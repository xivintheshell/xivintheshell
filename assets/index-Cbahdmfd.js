function zv(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in e)){const r=Object.getOwnPropertyDescriptor(o,l);r&&Object.defineProperty(e,l,r.get?r:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();function NN(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function jv(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function o(){var l=!1;try{l=this instanceof o}catch{}return l?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var l=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:function(){return e[o]}})}),n}var qA={exports:{}},zc={};var Ng;function Yv(){if(Ng)return zc;Ng=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(o,l,r){var d=null;if(r!==void 0&&(d=""+r),l.key!==void 0&&(d=""+l.key),"key"in l){r={};for(var E in l)E!=="key"&&(r[E]=l[E])}else r=l;return l=r.ref,{$$typeof:e,type:o,key:d,ref:l!==void 0?l:null,props:r}}return zc.Fragment=t,zc.jsx=n,zc.jsxs=n,zc}var Cg;function Kv(){return Cg||(Cg=1,qA.exports=Yv()),qA.exports}var c=Kv(),ZA={exports:{}},jc={},QA={exports:{}},JA={};var Og;function Vv(){return Og||(Og=1,function(e){function t(M,K){var $=M.length;M.push(K);e:for(;0<$;){var de=$-1>>>1,y=M[de];if(0<l(y,K))M[de]=K,M[$]=y,$=de;else break e}}function n(M){return M.length===0?null:M[0]}function o(M){if(M.length===0)return null;var K=M[0],$=M.pop();if($!==K){M[0]=$;e:for(var de=0,y=M.length,Y=y>>>1;de<Y;){var W=2*(de+1)-1,z=M[W],Z=W+1,ne=M[Z];if(0>l(z,$))Z<y&&0>l(ne,z)?(M[de]=ne,M[Z]=$,de=Z):(M[de]=z,M[W]=$,de=W);else if(Z<y&&0>l(ne,$))M[de]=ne,M[Z]=$,de=Z;else break e}}return K}function l(M,K){var $=M.sortIndex-K.sortIndex;return $!==0?$:M.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var d=Date,E=d.now();e.unstable_now=function(){return d.now()-E}}var h=[],A=[],R=1,T=null,S=3,I=!1,C=!1,_=!1,O=!1,D=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function L(M){for(var K=n(A);K!==null;){if(K.callback===null)o(A);else if(K.startTime<=M)o(A),K.sortIndex=K.expirationTime,t(h,K);else break;K=n(A)}}function w(M){if(_=!1,L(M),!C)if(n(h)!==null)C=!0,G||(G=!0,te());else{var K=n(A);K!==null&&he(w,K.startTime-M)}}var G=!1,B=-1,j=5,Q=-1;function ce(){return O?!0:!(e.unstable_now()-Q<j)}function ue(){if(O=!1,G){var M=e.unstable_now();Q=M;var K=!0;try{e:{C=!1,_&&(_=!1,U(B),B=-1),I=!0;var $=S;try{t:{for(L(M),T=n(h);T!==null&&!(T.expirationTime>M&&ce());){var de=T.callback;if(typeof de=="function"){T.callback=null,S=T.priorityLevel;var y=de(T.expirationTime<=M);if(M=e.unstable_now(),typeof y=="function"){T.callback=y,L(M),K=!0;break t}T===n(h)&&o(h),L(M)}else o(h);T=n(h)}if(T!==null)K=!0;else{var Y=n(A);Y!==null&&he(w,Y.startTime-M),K=!1}}break e}finally{T=null,S=$,I=!1}K=void 0}}finally{K?te():G=!1}}}var te;if(typeof H=="function")te=function(){H(ue)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,fe=ee.port2;ee.port1.onmessage=ue,te=function(){fe.postMessage(null)}}else te=function(){D(ue,0)};function he(M,K){B=D(function(){M(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_next=function(M){switch(S){case 1:case 2:case 3:var K=3;break;default:K=S}var $=S;S=K;try{return M()}finally{S=$}},e.unstable_requestPaint=function(){O=!0},e.unstable_runWithPriority=function(M,K){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var $=S;S=M;try{return K()}finally{S=$}},e.unstable_scheduleCallback=function(M,K,$){var de=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?de+$:de):$=de,M){case 1:var y=-1;break;case 2:y=250;break;case 5:y=1073741823;break;case 4:y=1e4;break;default:y=5e3}return y=$+y,M={id:R++,callback:K,priorityLevel:M,startTime:$,expirationTime:y,sortIndex:-1},$>de?(M.sortIndex=$,t(A,M),n(h)===null&&M===n(A)&&(_?(U(B),B=-1):_=!0,he(w,$-de))):(M.sortIndex=y,t(h,M),C||I||(C=!0,G||(G=!0,te()))),M},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(M){var K=S;return function(){var $=S;S=K;try{return M.apply(this,arguments)}finally{S=$}}}}(JA)),JA}var bg;function Wv(){return bg||(bg=1,QA.exports=Vv()),QA.exports}var $A={exports:{}},Ye={};var Dg;function Xv(){if(Dg)return Ye;Dg=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),d=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),T=Symbol.iterator;function S(y){return y===null||typeof y!="object"?null:(y=T&&y[T]||y["@@iterator"],typeof y=="function"?y:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,_={};function O(y,Y,W){this.props=y,this.context=Y,this.refs=_,this.updater=W||I}O.prototype.isReactComponent={},O.prototype.setState=function(y,Y){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,Y,"setState")},O.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function D(){}D.prototype=O.prototype;function U(y,Y,W){this.props=y,this.context=Y,this.refs=_,this.updater=W||I}var H=U.prototype=new D;H.constructor=U,C(H,O.prototype),H.isPureReactComponent=!0;var L=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function B(y,Y,W,z,Z,ne){return W=ne.ref,{$$typeof:e,type:y,key:Y,ref:W!==void 0?W:null,props:ne}}function j(y,Y){return B(y.type,Y,void 0,void 0,void 0,y.props)}function Q(y){return typeof y=="object"&&y!==null&&y.$$typeof===e}function ce(y){var Y={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(W){return Y[W]})}var ue=/\/+/g;function te(y,Y){return typeof y=="object"&&y!==null&&y.key!=null?ce(""+y.key):Y.toString(36)}function ee(){}function fe(y){switch(y.status){case"fulfilled":return y.value;case"rejected":throw y.reason;default:switch(typeof y.status=="string"?y.then(ee,ee):(y.status="pending",y.then(function(Y){y.status==="pending"&&(y.status="fulfilled",y.value=Y)},function(Y){y.status==="pending"&&(y.status="rejected",y.reason=Y)})),y.status){case"fulfilled":return y.value;case"rejected":throw y.reason}}throw y}function he(y,Y,W,z,Z){var ne=typeof y;(ne==="undefined"||ne==="boolean")&&(y=null);var P=!1;if(y===null)P=!0;else switch(ne){case"bigint":case"string":case"number":P=!0;break;case"object":switch(y.$$typeof){case e:case t:P=!0;break;case R:return P=y._init,he(P(y._payload),Y,W,z,Z)}}if(P)return Z=Z(y),P=z===""?"."+te(y,0):z,L(Z)?(W="",P!=null&&(W=P.replace(ue,"$&/")+"/"),he(Z,Y,W,"",function(Ee){return Ee})):Z!=null&&(Q(Z)&&(Z=j(Z,W+(Z.key==null||y&&y.key===Z.key?"":(""+Z.key).replace(ue,"$&/")+"/")+P)),Y.push(Z)),1;P=0;var X=z===""?".":z+":";if(L(y))for(var se=0;se<y.length;se++)z=y[se],ne=X+te(z,se),P+=he(z,Y,W,ne,Z);else if(se=S(y),typeof se=="function")for(y=se.call(y),se=0;!(z=y.next()).done;)z=z.value,ne=X+te(z,se++),P+=he(z,Y,W,ne,Z);else if(ne==="object"){if(typeof y.then=="function")return he(fe(y),Y,W,z,Z);throw Y=String(y),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return P}function M(y,Y,W){if(y==null)return y;var z=[],Z=0;return he(y,z,"","",function(ne){return Y.call(W,ne,Z++)}),z}function K(y){if(y._status===-1){var Y=y._result;Y=Y(),Y.then(function(W){(y._status===0||y._status===-1)&&(y._status=1,y._result=W)},function(W){(y._status===0||y._status===-1)&&(y._status=2,y._result=W)}),y._status===-1&&(y._status=0,y._result=Y)}if(y._status===1)return y._result.default;throw y._result}var $=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)};function de(){}return Ye.Children={map:M,forEach:function(y,Y,W){M(y,function(){Y.apply(this,arguments)},W)},count:function(y){var Y=0;return M(y,function(){Y++}),Y},toArray:function(y){return M(y,function(Y){return Y})||[]},only:function(y){if(!Q(y))throw Error("React.Children.only expected to receive a single React element child.");return y}},Ye.Component=O,Ye.Fragment=n,Ye.Profiler=l,Ye.PureComponent=U,Ye.StrictMode=o,Ye.Suspense=h,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(y){return w.H.useMemoCache(y)}},Ye.cache=function(y){return function(){return y.apply(null,arguments)}},Ye.cloneElement=function(y,Y,W){if(y==null)throw Error("The argument must be a React element, but you passed "+y+".");var z=C({},y.props),Z=y.key,ne=void 0;if(Y!=null)for(P in Y.ref!==void 0&&(ne=void 0),Y.key!==void 0&&(Z=""+Y.key),Y)!G.call(Y,P)||P==="key"||P==="__self"||P==="__source"||P==="ref"&&Y.ref===void 0||(z[P]=Y[P]);var P=arguments.length-2;if(P===1)z.children=W;else if(1<P){for(var X=Array(P),se=0;se<P;se++)X[se]=arguments[se+2];z.children=X}return B(y.type,Z,void 0,void 0,ne,z)},Ye.createContext=function(y){return y={$$typeof:d,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null},y.Provider=y,y.Consumer={$$typeof:r,_context:y},y},Ye.createElement=function(y,Y,W){var z,Z={},ne=null;if(Y!=null)for(z in Y.key!==void 0&&(ne=""+Y.key),Y)G.call(Y,z)&&z!=="key"&&z!=="__self"&&z!=="__source"&&(Z[z]=Y[z]);var P=arguments.length-2;if(P===1)Z.children=W;else if(1<P){for(var X=Array(P),se=0;se<P;se++)X[se]=arguments[se+2];Z.children=X}if(y&&y.defaultProps)for(z in P=y.defaultProps,P)Z[z]===void 0&&(Z[z]=P[z]);return B(y,ne,void 0,void 0,null,Z)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(y){return{$$typeof:E,render:y}},Ye.isValidElement=Q,Ye.lazy=function(y){return{$$typeof:R,_payload:{_status:-1,_result:y},_init:K}},Ye.memo=function(y,Y){return{$$typeof:A,type:y,compare:Y===void 0?null:Y}},Ye.startTransition=function(y){var Y=w.T,W={};w.T=W;try{var z=y(),Z=w.S;Z!==null&&Z(W,z),typeof z=="object"&&z!==null&&typeof z.then=="function"&&z.then(de,$)}catch(ne){$(ne)}finally{w.T=Y}},Ye.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},Ye.use=function(y){return w.H.use(y)},Ye.useActionState=function(y,Y,W){return w.H.useActionState(y,Y,W)},Ye.useCallback=function(y,Y){return w.H.useCallback(y,Y)},Ye.useContext=function(y){return w.H.useContext(y)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(y,Y){return w.H.useDeferredValue(y,Y)},Ye.useEffect=function(y,Y,W){var z=w.H;if(typeof W=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return z.useEffect(y,Y)},Ye.useId=function(){return w.H.useId()},Ye.useImperativeHandle=function(y,Y,W){return w.H.useImperativeHandle(y,Y,W)},Ye.useInsertionEffect=function(y,Y){return w.H.useInsertionEffect(y,Y)},Ye.useLayoutEffect=function(y,Y){return w.H.useLayoutEffect(y,Y)},Ye.useMemo=function(y,Y){return w.H.useMemo(y,Y)},Ye.useOptimistic=function(y,Y){return w.H.useOptimistic(y,Y)},Ye.useReducer=function(y,Y,W){return w.H.useReducer(y,Y,W)},Ye.useRef=function(y){return w.H.useRef(y)},Ye.useState=function(y){return w.H.useState(y)},Ye.useSyncExternalStore=function(y,Y,W){return w.H.useSyncExternalStore(y,Y,W)},Ye.useTransition=function(){return w.H.useTransition()},Ye.version="19.1.0",Ye}var yg;function hR(){return yg||(yg=1,$A.exports=Xv()),$A.exports}var em={exports:{}},Ja={};var vg;function qv(){if(vg)return Ja;vg=1;var e=hR();function t(h){var A="https://react.dev/errors/"+h;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)A+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+h+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function r(h,A,R){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:T==null?null:""+T,children:h,containerInfo:A,implementation:R}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function E(h,A){if(h==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return Ja.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Ja.createPortal=function(h,A){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(t(299));return r(h,A,null,R)},Ja.flushSync=function(h){var A=d.T,R=o.p;try{if(d.T=null,o.p=2,h)return h()}finally{d.T=A,o.p=R,o.d.f()}},Ja.preconnect=function(h,A){typeof h=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,o.d.C(h,A))},Ja.prefetchDNS=function(h){typeof h=="string"&&o.d.D(h)},Ja.preinit=function(h,A){if(typeof h=="string"&&A&&typeof A.as=="string"){var R=A.as,T=E(R,A.crossOrigin),S=typeof A.integrity=="string"?A.integrity:void 0,I=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;R==="style"?o.d.S(h,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:I}):R==="script"&&o.d.X(h,{crossOrigin:T,integrity:S,fetchPriority:I,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},Ja.preinitModule=function(h,A){if(typeof h=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var R=E(A.as,A.crossOrigin);o.d.M(h,{crossOrigin:R,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&o.d.M(h)},Ja.preload=function(h,A){if(typeof h=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var R=A.as,T=E(R,A.crossOrigin);o.d.L(h,R,{crossOrigin:T,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},Ja.preloadModule=function(h,A){if(typeof h=="string")if(A){var R=E(A.as,A.crossOrigin);o.d.m(h,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:R,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else o.d.m(h)},Ja.requestFormReset=function(h){o.d.r(h)},Ja.unstable_batchedUpdates=function(h,A){return h(A)},Ja.useFormState=function(h,A,R){return d.H.useFormState(h,A,R)},Ja.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ja.version="19.1.0",Ja}var Mg;function CN(){if(Mg)return em.exports;Mg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),em.exports=qv(),em.exports}var Lg;function Zv(){if(Lg)return jc;Lg=1;var e=Wv(),t=hR(),n=CN();function o(a){var i="https://react.dev/errors/"+a;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+a+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var i=a,s=a;if(a.alternate)for(;i.return;)i=i.return;else{a=i;do i=a,(i.flags&4098)!==0&&(s=i.return),a=i.return;while(a)}return i.tag===3?s:null}function d(a){if(a.tag===13){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function E(a){if(r(a)!==a)throw Error(o(188))}function h(a){var i=a.alternate;if(!i){if(i=r(a),i===null)throw Error(o(188));return i!==a?null:a}for(var s=a,u=i;;){var f=s.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){s=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===s)return E(f),a;if(m===u)return E(f),i;m=m.sibling}throw Error(o(188))}if(s.return!==u.return)s=f,u=m;else{for(var N=!1,v=f.child;v;){if(v===s){N=!0,s=f,u=m;break}if(v===u){N=!0,u=f,s=m;break}v=v.sibling}if(!N){for(v=m.child;v;){if(v===s){N=!0,s=m,u=f;break}if(v===u){N=!0,u=m,s=f;break}v=v.sibling}if(!N)throw Error(o(189))}}if(s.alternate!==u)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?a:i}function A(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(i=A(a),i!==null)return i;a=a.sibling}return null}var R=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),H=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function te(a){return a===null||typeof a!="object"?null:(a=ue&&a[ue]||a["@@iterator"],typeof a=="function"?a:null)}var ee=Symbol.for("react.client.reference");function fe(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ee?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case C:return"Fragment";case O:return"Profiler";case _:return"StrictMode";case w:return"Suspense";case G:return"SuspenseList";case Q:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case I:return"Portal";case H:return(a.displayName||"Context")+".Provider";case U:return(a._context.displayName||"Context")+".Consumer";case L:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case B:return i=a.displayName||null,i!==null?i:fe(a.type)||"Memo";case j:i=a._payload,a=a._init;try{return fe(a(i))}catch{}}return null}var he=Array.isArray,M=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},de=[],y=-1;function Y(a){return{current:a}}function W(a){0>y||(a.current=de[y],de[y]=null,y--)}function z(a,i){y++,de[y]=a.current,a.current=i}var Z=Y(null),ne=Y(null),P=Y(null),X=Y(null);function se(a,i){switch(z(P,i),z(ne,a),z(Z,null),i.nodeType){case 9:case 11:a=(a=i.documentElement)&&(a=a.namespaceURI)?J_(a):0;break;default:if(a=i.tagName,i=i.namespaceURI)i=J_(i),a=$_(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}W(Z),z(Z,a)}function Ee(){W(Z),W(ne),W(P)}function Se(a){a.memoizedState!==null&&z(X,a);var i=Z.current,s=$_(i,a.type);i!==s&&(z(ne,a),z(Z,s))}function Oe(a){ne.current===a&&(W(Z),W(ne)),X.current===a&&(W(X),Pc._currentValue=$)}var Ue=Object.prototype.hasOwnProperty,Ae=e.unstable_scheduleCallback,be=e.unstable_cancelCallback,_e=e.unstable_shouldYield,ge=e.unstable_requestPaint,ye=e.unstable_now,Fe=e.unstable_getCurrentPriorityLevel,Aa=e.unstable_ImmediatePriority,di=e.unstable_UserBlockingPriority,Tn=e.unstable_NormalPriority,Xi=e.unstable_LowPriority,qi=e.unstable_IdlePriority,As=e.log,ms=e.unstable_setDisableYieldValue,Co=null,ot=null;function Ft(a){if(typeof As=="function"&&ms(a),ot&&typeof ot.setStrictMode=="function")try{ot.setStrictMode(Co,a)}catch{}}var kt=Math.clz32?Math.clz32:Vr,Yn=Math.log,Rs=Math.LN2;function Vr(a){return a>>>=0,a===0?32:31-(Yn(a)/Rs|0)|0}var Sl=256,Ts=4194304;function Di(a){var i=a&42;if(i!==0)return i;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Ss(a,i,s){var u=a.pendingLanes;if(u===0)return 0;var f=0,m=a.suspendedLanes,N=a.pingedLanes;a=a.warmLanes;var v=u&134217727;return v!==0?(u=v&~m,u!==0?f=Di(u):(N&=v,N!==0?f=Di(N):s||(s=v&~a,s!==0&&(f=Di(s))))):(v=u&~m,v!==0?f=Di(v):N!==0?f=Di(N):s||(s=u&~a,s!==0&&(f=Di(s)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,s=i&-i,m>=s||m===32&&(s&4194048)!==0)?i:f}function Il(a,i){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&i)===0}function PE(a,i){switch(a){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ou(){var a=Sl;return Sl<<=1,(Sl&4194048)===0&&(Sl=256),a}function Is(){var a=Ts;return Ts<<=1,(Ts&62914560)===0&&(Ts=4194304),a}function _s(a){for(var i=[],s=0;31>s;s++)i.push(a);return i}function _l(a,i){a.pendingLanes|=i,i!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function wE(a,i,s,u,f,m){var N=a.pendingLanes;a.pendingLanes=s,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=s,a.entangledLanes&=s,a.errorRecoveryDisabledLanes&=s,a.shellSuspendCounter=0;var v=a.entanglements,F=a.expirationTimes,oe=a.hiddenUpdates;for(s=N&~s;0<s;){var me=31-kt(s),Te=1<<me;v[me]=0,F[me]=-1;var le=oe[me];if(le!==null)for(oe[me]=null,me=0;me<le.length;me++){var re=le[me];re!==null&&(re.lane&=-536870913)}s&=~Te}u!==0&&bu(a,u,0),m!==0&&f===0&&a.tag!==0&&(a.suspendedLanes|=m&~(N&~i))}function bu(a,i,s){a.pendingLanes|=i,a.suspendedLanes&=~i;var u=31-kt(i);a.entangledLanes|=i,a.entanglements[u]=a.entanglements[u]|1073741824|s&4194090}function Du(a,i){var s=a.entangledLanes|=i;for(a=a.entanglements;s;){var u=31-kt(s),f=1<<u;f&i|a[u]&i&&(a[u]|=i),s&=~f}}function Wr(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function GE(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function GT(){var a=K.p;return a!==0?a:(a=window.event,a===void 0?32:Tg(a.type))}function MD(a,i){var s=K.p;try{return K.p=a,i()}finally{K.p=s}}var Oo=Math.random().toString(36).slice(2),Za="__reactFiber$"+Oo,Sn="__reactProps$"+Oo,gs="__reactContainer$"+Oo,BE="__reactEvents$"+Oo,LD="__reactListeners$"+Oo,HD="__reactHandles$"+Oo,BT="__reactResources$"+Oo,Xr="__reactMarker$"+Oo;function FE(a){delete a[Za],delete a[Sn],delete a[BE],delete a[LD],delete a[HD]}function ps(a){var i=a[Za];if(i)return i;for(var s=a.parentNode;s;){if(i=s[gs]||s[Za]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(a=ng(a);a!==null;){if(s=a[Za])return s;a=ng(a)}return i}a=s,s=a.parentNode}return null}function Ns(a){if(a=a[Za]||a[gs]){var i=a.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return a}return null}function qr(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a.stateNode;throw Error(o(33))}function Cs(a){var i=a[BT];return i||(i=a[BT]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Da(a){a[Xr]=!0}var FT=new Set,zT={};function gl(a,i){Os(a,i),Os(a+"Capture",i)}function Os(a,i){for(zT[a]=i,a=0;a<i.length;a++)FT.add(i[a])}var UD=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jT={},YT={};function kD(a){return Ue.call(YT,a)?!0:Ue.call(jT,a)?!1:UD.test(a)?YT[a]=!0:(jT[a]=!0,!1)}function yu(a,i,s){if(kD(i))if(s===null)a.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":a.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){a.removeAttribute(i);return}}a.setAttribute(i,""+s)}}function vu(a,i,s){if(s===null)a.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(i);return}a.setAttribute(i,""+s)}}function Zi(a,i,s,u){if(u===null)a.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(s);return}a.setAttributeNS(i,s,""+u)}}var zE,KT;function bs(a){if(zE===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);zE=i&&i[1]||"",KT=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zE+a+KT}var jE=!1;function YE(a,i){if(!a||jE)return"";jE=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(re){var le=re}Reflect.construct(a,[],Te)}else{try{Te.call()}catch(re){le=re}a.call(Te.prototype)}}else{try{throw Error()}catch(re){le=re}(Te=a())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(re){if(re&&le&&typeof re.stack=="string")return[re.stack,le.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),N=m[0],v=m[1];if(N&&v){var F=N.split(`
`),oe=v.split(`
`);for(f=u=0;u<F.length&&!F[u].includes("DetermineComponentFrameRoot");)u++;for(;f<oe.length&&!oe[f].includes("DetermineComponentFrameRoot");)f++;if(u===F.length||f===oe.length)for(u=F.length-1,f=oe.length-1;1<=u&&0<=f&&F[u]!==oe[f];)f--;for(;1<=u&&0<=f;u--,f--)if(F[u]!==oe[f]){if(u!==1||f!==1)do if(u--,f--,0>f||F[u]!==oe[f]){var me=`
`+F[u].replace(" at new "," at ");return a.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",a.displayName)),me}while(1<=u&&0<=f);break}}}finally{jE=!1,Error.prepareStackTrace=s}return(s=a?a.displayName||a.name:"")?bs(s):""}function xD(a){switch(a.tag){case 26:case 27:case 5:return bs(a.type);case 16:return bs("Lazy");case 13:return bs("Suspense");case 19:return bs("SuspenseList");case 0:case 15:return YE(a.type,!1);case 11:return YE(a.type.render,!1);case 1:return YE(a.type,!0);case 31:return bs("Activity");default:return""}}function VT(a){try{var i="";do i+=xD(a),a=a.return;while(a);return i}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function Kn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function WT(a){var i=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function PD(a){var i=WT(a)?"checked":"value",s=Object.getOwnPropertyDescriptor(a.constructor.prototype,i),u=""+a[i];if(!a.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,m=s.set;return Object.defineProperty(a,i,{configurable:!0,get:function(){return f.call(this)},set:function(N){u=""+N,m.call(this,N)}}),Object.defineProperty(a,i,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(N){u=""+N},stopTracking:function(){a._valueTracker=null,delete a[i]}}}}function Mu(a){a._valueTracker||(a._valueTracker=PD(a))}function XT(a){if(!a)return!1;var i=a._valueTracker;if(!i)return!0;var s=i.getValue(),u="";return a&&(u=WT(a)?a.checked?"true":"false":a.value),a=u,a!==s?(i.setValue(a),!0):!1}function Lu(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var wD=/[\n"\\]/g;function Vn(a){return a.replace(wD,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function KE(a,i,s,u,f,m,N,v){a.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.type=N:a.removeAttribute("type"),i!=null?N==="number"?(i===0&&a.value===""||a.value!=i)&&(a.value=""+Kn(i)):a.value!==""+Kn(i)&&(a.value=""+Kn(i)):N!=="submit"&&N!=="reset"||a.removeAttribute("value"),i!=null?VE(a,N,Kn(i)):s!=null?VE(a,N,Kn(s)):u!=null&&a.removeAttribute("value"),f==null&&m!=null&&(a.defaultChecked=!!m),f!=null&&(a.checked=f&&typeof f!="function"&&typeof f!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?a.name=""+Kn(v):a.removeAttribute("name")}function qT(a,i,s,u,f,m,N,v){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(a.type=m),i!=null||s!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;s=s!=null?""+Kn(s):"",i=i!=null?""+Kn(i):s,v||i===a.value||(a.value=i),a.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,a.checked=v?a.checked:!!u,a.defaultChecked=!!u,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(a.name=N)}function VE(a,i,s){i==="number"&&Lu(a.ownerDocument)===a||a.defaultValue===""+s||(a.defaultValue=""+s)}function Ds(a,i,s,u){if(a=a.options,i){i={};for(var f=0;f<s.length;f++)i["$"+s[f]]=!0;for(s=0;s<a.length;s++)f=i.hasOwnProperty("$"+a[s].value),a[s].selected!==f&&(a[s].selected=f),f&&u&&(a[s].defaultSelected=!0)}else{for(s=""+Kn(s),i=null,f=0;f<a.length;f++){if(a[f].value===s){a[f].selected=!0,u&&(a[f].defaultSelected=!0);return}i!==null||a[f].disabled||(i=a[f])}i!==null&&(i.selected=!0)}}function ZT(a,i,s){if(i!=null&&(i=""+Kn(i),i!==a.value&&(a.value=i),s==null)){a.defaultValue!==i&&(a.defaultValue=i);return}a.defaultValue=s!=null?""+Kn(s):""}function QT(a,i,s,u){if(i==null){if(u!=null){if(s!=null)throw Error(o(92));if(he(u)){if(1<u.length)throw Error(o(93));u=u[0]}s=u}s==null&&(s=""),i=s}s=Kn(i),a.defaultValue=s,u=a.textContent,u===s&&u!==""&&u!==null&&(a.value=u)}function ys(a,i){if(i){var s=a.firstChild;if(s&&s===a.lastChild&&s.nodeType===3){s.nodeValue=i;return}}a.textContent=i}var GD=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function JT(a,i,s){var u=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?u?a.setProperty(i,""):i==="float"?a.cssFloat="":a[i]="":u?a.setProperty(i,s):typeof s!="number"||s===0||GD.has(i)?i==="float"?a.cssFloat=s:a[i]=(""+s).trim():a[i]=s+"px"}function $T(a,i,s){if(i!=null&&typeof i!="object")throw Error(o(62));if(a=a.style,s!=null){for(var u in s)!s.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&s[f]!==u&&JT(a,f,u)}else for(var m in i)i.hasOwnProperty(m)&&JT(a,m,i[m])}function WE(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var BD=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),FD=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hu(a){return FD.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var XE=null;function qE(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var vs=null,Ms=null;function eS(a){var i=Ns(a);if(i&&(a=i.stateNode)){var s=a[Sn]||null;e:switch(a=i.stateNode,i.type){case"input":if(KE(a,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=a;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Vn(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var u=s[i];if(u!==a&&u.form===a.form){var f=u[Sn]||null;if(!f)throw Error(o(90));KE(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<s.length;i++)u=s[i],u.form===a.form&&XT(u)}break e;case"textarea":ZT(a,s.value,s.defaultValue);break e;case"select":i=s.value,i!=null&&Ds(a,!!s.multiple,i,!1)}}}var ZE=!1;function tS(a,i,s){if(ZE)return a(i,s);ZE=!0;try{var u=a(i);return u}finally{if(ZE=!1,(vs!==null||Ms!==null)&&(Td(),vs&&(i=vs,a=Ms,Ms=vs=null,eS(i),a)))for(i=0;i<a.length;i++)eS(a[i])}}function Zr(a,i){var s=a.stateNode;if(s===null)return null;var u=s[Sn]||null;if(u===null)return null;s=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(a=a.type,u=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!u;break e;default:a=!1}if(a)return null;if(s&&typeof s!="function")throw Error(o(231,i,typeof s));return s}var Qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),QE=!1;if(Qi)try{var Qr={};Object.defineProperty(Qr,"passive",{get:function(){QE=!0}}),window.addEventListener("test",Qr,Qr),window.removeEventListener("test",Qr,Qr)}catch{QE=!1}var bo=null,JE=null,Uu=null;function aS(){if(Uu)return Uu;var a,i=JE,s=i.length,u,f="value"in bo?bo.value:bo.textContent,m=f.length;for(a=0;a<s&&i[a]===f[a];a++);var N=s-a;for(u=1;u<=N&&i[s-u]===f[m-u];u++);return Uu=f.slice(a,1<u?1-u:void 0)}function ku(a){var i=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&i===13&&(a=13)):a=i,a===10&&(a=13),32<=a||a===13?a:0}function xu(){return!0}function nS(){return!1}function In(a){function i(s,u,f,m,N){this._reactName=s,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=N,this.currentTarget=null;for(var v in a)a.hasOwnProperty(v)&&(s=a[v],this[v]=s?s(m):m[v]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?xu:nS,this.isPropagationStopped=nS,this}return R(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=xu)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=xu)},persist:function(){},isPersistent:xu}),i}var pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pu=In(pl),Jr=R({},pl,{view:0,detail:0}),zD=In(Jr),$E,ef,$r,wu=R({},Jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:af,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==$r&&($r&&a.type==="mousemove"?($E=a.screenX-$r.screenX,ef=a.screenY-$r.screenY):ef=$E=0,$r=a),$E)},movementY:function(a){return"movementY"in a?a.movementY:ef}}),iS=In(wu),jD=R({},wu,{dataTransfer:0}),YD=In(jD),KD=R({},Jr,{relatedTarget:0}),tf=In(KD),VD=R({},pl,{animationName:0,elapsedTime:0,pseudoElement:0}),WD=In(VD),XD=R({},pl,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),qD=In(XD),ZD=R({},pl,{data:0}),oS=In(ZD),QD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$D={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ey(a){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(a):(a=$D[a])?!!i[a]:!1}function af(){return ey}var ty=R({},Jr,{key:function(a){if(a.key){var i=QD[a.key]||a.key;if(i!=="Unidentified")return i}return a.type==="keypress"?(a=ku(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?JD[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:af,charCode:function(a){return a.type==="keypress"?ku(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ku(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ay=In(ty),ny=R({},wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lS=In(ny),iy=R({},Jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:af}),oy=In(iy),ly=R({},pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),sy=In(ly),ry=R({},wu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),cy=In(ry),uy=R({},pl,{newState:0,oldState:0}),dy=In(uy),hy=[9,13,27,32],nf=Qi&&"CompositionEvent"in window,ec=null;Qi&&"documentMode"in document&&(ec=document.documentMode);var Ey=Qi&&"TextEvent"in window&&!ec,sS=Qi&&(!nf||ec&&8<ec&&11>=ec),rS=" ",cS=!1;function uS(a,i){switch(a){case"keyup":return hy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dS(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ls=!1;function fy(a,i){switch(a){case"compositionend":return dS(i);case"keypress":return i.which!==32?null:(cS=!0,rS);case"textInput":return a=i.data,a===rS&&cS?null:a;default:return null}}function Ay(a,i){if(Ls)return a==="compositionend"||!nf&&uS(a,i)?(a=aS(),Uu=JE=bo=null,Ls=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return sS&&i.locale!=="ko"?null:i.data;default:return null}}var my={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hS(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i==="input"?!!my[a.type]:i==="textarea"}function ES(a,i,s,u){vs?Ms?Ms.push(u):Ms=[u]:vs=u,i=Nd(i,"onChange"),0<i.length&&(s=new Pu("onChange","change",null,s,u),a.push({event:s,listeners:i}))}var tc=null,ac=null;function Ry(a){W_(a,0)}function Gu(a){var i=qr(a);if(XT(i))return a}function fS(a,i){if(a==="change")return i}var AS=!1;if(Qi){var of;if(Qi){var lf="oninput"in document;if(!lf){var mS=document.createElement("div");mS.setAttribute("oninput","return;"),lf=typeof mS.oninput=="function"}of=lf}else of=!1;AS=of&&(!document.documentMode||9<document.documentMode)}function RS(){tc&&(tc.detachEvent("onpropertychange",TS),ac=tc=null)}function TS(a){if(a.propertyName==="value"&&Gu(ac)){var i=[];ES(i,ac,a,qE(a)),tS(Ry,i)}}function Ty(a,i,s){a==="focusin"?(RS(),tc=i,ac=s,tc.attachEvent("onpropertychange",TS)):a==="focusout"&&RS()}function Sy(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Gu(ac)}function Iy(a,i){if(a==="click")return Gu(i)}function _y(a,i){if(a==="input"||a==="change")return Gu(i)}function gy(a,i){return a===i&&(a!==0||1/a===1/i)||a!==a&&i!==i}var Dn=typeof Object.is=="function"?Object.is:gy;function nc(a,i){if(Dn(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var s=Object.keys(a),u=Object.keys(i);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var f=s[u];if(!Ue.call(i,f)||!Dn(a[f],i[f]))return!1}return!0}function SS(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function IS(a,i){var s=SS(a);a=0;for(var u;s;){if(s.nodeType===3){if(u=a+s.textContent.length,a<=i&&u>=i)return{node:s,offset:i-a};a=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=SS(s)}}function _S(a,i){return a&&i?a===i?!0:a&&a.nodeType===3?!1:i&&i.nodeType===3?_S(a,i.parentNode):"contains"in a?a.contains(i):a.compareDocumentPosition?!!(a.compareDocumentPosition(i)&16):!1:!1}function gS(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var i=Lu(a.document);i instanceof a.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)a=i.contentWindow;else break;i=Lu(a.document)}return i}function sf(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i&&(i==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||i==="textarea"||a.contentEditable==="true")}var py=Qi&&"documentMode"in document&&11>=document.documentMode,Hs=null,rf=null,ic=null,cf=!1;function pS(a,i,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;cf||Hs==null||Hs!==Lu(u)||(u=Hs,"selectionStart"in u&&sf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ic&&nc(ic,u)||(ic=u,u=Nd(rf,"onSelect"),0<u.length&&(i=new Pu("onSelect","select",null,i,s),a.push({event:i,listeners:u}),i.target=Hs)))}function Nl(a,i){var s={};return s[a.toLowerCase()]=i.toLowerCase(),s["Webkit"+a]="webkit"+i,s["Moz"+a]="moz"+i,s}var Us={animationend:Nl("Animation","AnimationEnd"),animationiteration:Nl("Animation","AnimationIteration"),animationstart:Nl("Animation","AnimationStart"),transitionrun:Nl("Transition","TransitionRun"),transitionstart:Nl("Transition","TransitionStart"),transitioncancel:Nl("Transition","TransitionCancel"),transitionend:Nl("Transition","TransitionEnd")},uf={},NS={};Qi&&(NS=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function Cl(a){if(uf[a])return uf[a];if(!Us[a])return a;var i=Us[a],s;for(s in i)if(i.hasOwnProperty(s)&&s in NS)return uf[a]=i[s];return a}var CS=Cl("animationend"),OS=Cl("animationiteration"),bS=Cl("animationstart"),Ny=Cl("transitionrun"),Cy=Cl("transitionstart"),Oy=Cl("transitioncancel"),DS=Cl("transitionend"),yS=new Map,df="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");df.push("scrollEnd");function hi(a,i){yS.set(a,i),gl(i,[a])}var vS=new WeakMap;function Wn(a,i){if(typeof a=="object"&&a!==null){var s=vS.get(a);return s!==void 0?s:(i={value:a,source:i,stack:VT(i)},vS.set(a,i),i)}return{value:a,source:i,stack:VT(i)}}var Xn=[],ks=0,hf=0;function Bu(){for(var a=ks,i=hf=ks=0;i<a;){var s=Xn[i];Xn[i++]=null;var u=Xn[i];Xn[i++]=null;var f=Xn[i];Xn[i++]=null;var m=Xn[i];if(Xn[i++]=null,u!==null&&f!==null){var N=u.pending;N===null?f.next=f:(f.next=N.next,N.next=f),u.pending=f}m!==0&&MS(s,f,m)}}function Fu(a,i,s,u){Xn[ks++]=a,Xn[ks++]=i,Xn[ks++]=s,Xn[ks++]=u,hf|=u,a.lanes|=u,a=a.alternate,a!==null&&(a.lanes|=u)}function Ef(a,i,s,u){return Fu(a,i,s,u),zu(a)}function xs(a,i){return Fu(a,null,null,i),zu(a)}function MS(a,i,s){a.lanes|=s;var u=a.alternate;u!==null&&(u.lanes|=s);for(var f=!1,m=a.return;m!==null;)m.childLanes|=s,u=m.alternate,u!==null&&(u.childLanes|=s),m.tag===22&&(a=m.stateNode,a===null||a._visibility&1||(f=!0)),a=m,m=m.return;return a.tag===3?(m=a.stateNode,f&&i!==null&&(f=31-kt(s),a=m.hiddenUpdates,u=a[f],u===null?a[f]=[i]:u.push(i),i.lane=s|536870912),m):null}function zu(a){if(50<yc)throw yc=0,SA=null,Error(o(185));for(var i=a.return;i!==null;)a=i,i=a.return;return a.tag===3?a.stateNode:null}var Ps={};function by(a,i,s,u){this.tag=a,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(a,i,s,u){return new by(a,i,s,u)}function ff(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ji(a,i){var s=a.alternate;return s===null?(s=yn(a.tag,i,a.key,a.mode),s.elementType=a.elementType,s.type=a.type,s.stateNode=a.stateNode,s.alternate=a,a.alternate=s):(s.pendingProps=i,s.type=a.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=a.flags&65011712,s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,i=a.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=a.sibling,s.index=a.index,s.ref=a.ref,s.refCleanup=a.refCleanup,s}function LS(a,i){a.flags&=65011714;var s=a.alternate;return s===null?(a.childLanes=0,a.lanes=i,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,i=s.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a}function ju(a,i,s,u,f,m){var N=0;if(u=a,typeof a=="function")ff(a)&&(N=1);else if(typeof a=="string")N=yv(a,s,Z.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case Q:return a=yn(31,s,i,f),a.elementType=Q,a.lanes=m,a;case C:return Ol(s.children,f,m,i);case _:N=8,f|=24;break;case O:return a=yn(12,s,i,f|2),a.elementType=O,a.lanes=m,a;case w:return a=yn(13,s,i,f),a.elementType=w,a.lanes=m,a;case G:return a=yn(19,s,i,f),a.elementType=G,a.lanes=m,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case D:case H:N=10;break e;case U:N=9;break e;case L:N=11;break e;case B:N=14;break e;case j:N=16,u=null;break e}N=29,s=Error(o(130,a===null?"null":typeof a,"")),u=null}return i=yn(N,s,i,f),i.elementType=a,i.type=u,i.lanes=m,i}function Ol(a,i,s,u){return a=yn(7,a,u,i),a.lanes=s,a}function Af(a,i,s){return a=yn(6,a,null,i),a.lanes=s,a}function mf(a,i,s){return i=yn(4,a.children!==null?a.children:[],a.key,i),i.lanes=s,i.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},i}var ws=[],Gs=0,Yu=null,Ku=0,qn=[],Zn=0,bl=null,$i=1,eo="";function Dl(a,i){ws[Gs++]=Ku,ws[Gs++]=Yu,Yu=a,Ku=i}function HS(a,i,s){qn[Zn++]=$i,qn[Zn++]=eo,qn[Zn++]=bl,bl=a;var u=$i;a=eo;var f=32-kt(u)-1;u&=~(1<<f),s+=1;var m=32-kt(i)+f;if(30<m){var N=f-f%5;m=(u&(1<<N)-1).toString(32),u>>=N,f-=N,$i=1<<32-kt(i)+f|s<<f|u,eo=m+a}else $i=1<<m|s<<f|u,eo=a}function Rf(a){a.return!==null&&(Dl(a,1),HS(a,1,0))}function Tf(a){for(;a===Yu;)Yu=ws[--Gs],ws[Gs]=null,Ku=ws[--Gs],ws[Gs]=null;for(;a===bl;)bl=qn[--Zn],qn[Zn]=null,eo=qn[--Zn],qn[Zn]=null,$i=qn[--Zn],qn[Zn]=null}var an=null,Xt=null,Et=!1,yl=null,yi=!1,Sf=Error(o(519));function vl(a){var i=Error(o(418,""));throw sc(Wn(i,a)),Sf}function US(a){var i=a.stateNode,s=a.type,u=a.memoizedProps;switch(i[Za]=a,i[Sn]=u,s){case"dialog":$e("cancel",i),$e("close",i);break;case"iframe":case"object":case"embed":$e("load",i);break;case"video":case"audio":for(s=0;s<Mc.length;s++)$e(Mc[s],i);break;case"source":$e("error",i);break;case"img":case"image":case"link":$e("error",i),$e("load",i);break;case"details":$e("toggle",i);break;case"input":$e("invalid",i),qT(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Mu(i);break;case"select":$e("invalid",i);break;case"textarea":$e("invalid",i),QT(i,u.value,u.defaultValue,u.children),Mu(i)}s=u.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||u.suppressHydrationWarning===!0||Q_(i.textContent,s)?(u.popover!=null&&($e("beforetoggle",i),$e("toggle",i)),u.onScroll!=null&&$e("scroll",i),u.onScrollEnd!=null&&$e("scrollend",i),u.onClick!=null&&(i.onclick=Cd),i=!0):i=!1,i||vl(a)}function kS(a){for(an=a.return;an;)switch(an.tag){case 5:case 13:yi=!1;return;case 27:case 3:yi=!0;return;default:an=an.return}}function oc(a){if(a!==an)return!1;if(!Et)return kS(a),Et=!0,!1;var i=a.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=a.type,s=!(s!=="form"&&s!=="button")||kA(a.type,a.memoizedProps)),s=!s),s&&Xt&&vl(a),kS(a),i===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));e:{for(a=a.nextSibling,i=0;a;){if(a.nodeType===8)if(s=a.data,s==="/$"){if(i===0){Xt=fi(a.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++;a=a.nextSibling}Xt=null}}else i===27?(i=Xt,jo(a.type)?(a=GA,GA=null,Xt=a):Xt=i):Xt=an?fi(a.stateNode.nextSibling):null;return!0}function lc(){Xt=an=null,Et=!1}function xS(){var a=yl;return a!==null&&(pn===null?pn=a:pn.push.apply(pn,a),yl=null),a}function sc(a){yl===null?yl=[a]:yl.push(a)}var If=Y(null),Ml=null,to=null;function Do(a,i,s){z(If,i._currentValue),i._currentValue=s}function ao(a){a._currentValue=If.current,W(If)}function _f(a,i,s){for(;a!==null;){var u=a.alternate;if((a.childLanes&i)!==i?(a.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),a===s)break;a=a.return}}function gf(a,i,s,u){var f=a.child;for(f!==null&&(f.return=a);f!==null;){var m=f.dependencies;if(m!==null){var N=f.child;m=m.firstContext;e:for(;m!==null;){var v=m;m=f;for(var F=0;F<i.length;F++)if(v.context===i[F]){m.lanes|=s,v=m.alternate,v!==null&&(v.lanes|=s),_f(m.return,s,a),u||(N=null);break e}m=v.next}}else if(f.tag===18){if(N=f.return,N===null)throw Error(o(341));N.lanes|=s,m=N.alternate,m!==null&&(m.lanes|=s),_f(N,s,a),N=null}else N=f.child;if(N!==null)N.return=f;else for(N=f;N!==null;){if(N===a){N=null;break}if(f=N.sibling,f!==null){f.return=N.return,N=f;break}N=N.return}f=N}}function rc(a,i,s,u){a=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var N=f.alternate;if(N===null)throw Error(o(387));if(N=N.memoizedProps,N!==null){var v=f.type;Dn(f.pendingProps.value,N.value)||(a!==null?a.push(v):a=[v])}}else if(f===X.current){if(N=f.alternate,N===null)throw Error(o(387));N.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(a!==null?a.push(Pc):a=[Pc])}f=f.return}a!==null&&gf(i,a,s,u),i.flags|=262144}function Vu(a){for(a=a.firstContext;a!==null;){if(!Dn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ll(a){Ml=a,to=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Qa(a){return PS(Ml,a)}function Wu(a,i){return Ml===null&&Ll(a),PS(a,i)}function PS(a,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},to===null){if(a===null)throw Error(o(308));to=i,a.dependencies={lanes:0,firstContext:i},a.flags|=524288}else to=to.next=i;return s}var Dy=typeof AbortController<"u"?AbortController:function(){var a=[],i=this.signal={aborted:!1,addEventListener:function(s,u){a.push(u)}};this.abort=function(){i.aborted=!0,a.forEach(function(s){return s()})}},yy=e.unstable_scheduleCallback,vy=e.unstable_NormalPriority,ga={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pf(){return{controller:new Dy,data:new Map,refCount:0}}function cc(a){a.refCount--,a.refCount===0&&yy(vy,function(){a.controller.abort()})}var uc=null,Nf=0,Bs=0,Fs=null;function My(a,i){if(uc===null){var s=uc=[];Nf=0,Bs=OA(),Fs={status:"pending",value:void 0,then:function(u){s.push(u)}}}return Nf++,i.then(wS,wS),i}function wS(){if(--Nf===0&&uc!==null){Fs!==null&&(Fs.status="fulfilled");var a=uc;uc=null,Bs=0,Fs=null;for(var i=0;i<a.length;i++)(0,a[i])()}}function Ly(a,i){var s=[],u={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return a.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<s.length;f++)(0,s[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),u}var GS=M.S;M.S=function(a,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&My(a,i),GS!==null&&GS(a,i)};var Hl=Y(null);function Cf(){var a=Hl.current;return a!==null?a:vt.pooledCache}function Xu(a,i){i===null?z(Hl,Hl.current):z(Hl,i.pool)}function BS(){var a=Cf();return a===null?null:{parent:ga._currentValue,pool:a}}var dc=Error(o(460)),FS=Error(o(474)),qu=Error(o(542)),Of={then:function(){}};function zS(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Zu(){}function jS(a,i,s){switch(s=a[s],s===void 0?a.push(i):s!==i&&(i.then(Zu,Zu),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,KS(a),a;default:if(typeof i.status=="string")i.then(Zu,Zu);else{if(a=vt,a!==null&&100<a.shellSuspendCounter)throw Error(o(482));a=i,a.status="pending",a.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,KS(a),a}throw hc=i,dc}}var hc=null;function YS(){if(hc===null)throw Error(o(459));var a=hc;return hc=null,a}function KS(a){if(a===dc||a===qu)throw Error(o(483))}var yo=!1;function bf(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Df(a,i){a=a.updateQueue,i.updateQueue===a&&(i.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function vo(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Mo(a,i,s){var u=a.updateQueue;if(u===null)return null;if(u=u.shared,(At&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=zu(a),MS(a,null,s),i}return Fu(a,u,i,s),zu(a)}function Ec(a,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var u=i.lanes;u&=a.pendingLanes,s|=u,i.lanes=s,Du(a,s)}}function yf(a,i){var s=a.updateQueue,u=a.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var f=null,m=null;if(s=s.firstBaseUpdate,s!==null){do{var N={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};m===null?f=m=N:m=m.next=N,s=s.next}while(s!==null);m===null?f=m=i:m=m.next=i}else f=m=i;s={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},a.updateQueue=s;return}a=s.lastBaseUpdate,a===null?s.firstBaseUpdate=i:a.next=i,s.lastBaseUpdate=i}var vf=!1;function fc(){if(vf){var a=Fs;if(a!==null)throw a}}function Ac(a,i,s,u){vf=!1;var f=a.updateQueue;yo=!1;var m=f.firstBaseUpdate,N=f.lastBaseUpdate,v=f.shared.pending;if(v!==null){f.shared.pending=null;var F=v,oe=F.next;F.next=null,N===null?m=oe:N.next=oe,N=F;var me=a.alternate;me!==null&&(me=me.updateQueue,v=me.lastBaseUpdate,v!==N&&(v===null?me.firstBaseUpdate=oe:v.next=oe,me.lastBaseUpdate=F))}if(m!==null){var Te=f.baseState;N=0,me=oe=F=null,v=m;do{var le=v.lane&-536870913,re=le!==v.lane;if(re?(lt&le)===le:(u&le)===le){le!==0&&le===Bs&&(vf=!0),me!==null&&(me=me.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var Pe=a,He=v;le=i;var gt=s;switch(He.tag){case 1:if(Pe=He.payload,typeof Pe=="function"){Te=Pe.call(gt,Te,le);break e}Te=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=He.payload,le=typeof Pe=="function"?Pe.call(gt,Te,le):Pe,le==null)break e;Te=R({},Te,le);break e;case 2:yo=!0}}le=v.callback,le!==null&&(a.flags|=64,re&&(a.flags|=8192),re=f.callbacks,re===null?f.callbacks=[le]:re.push(le))}else re={lane:le,tag:v.tag,payload:v.payload,callback:v.callback,next:null},me===null?(oe=me=re,F=Te):me=me.next=re,N|=le;if(v=v.next,v===null){if(v=f.shared.pending,v===null)break;re=v,v=re.next,re.next=null,f.lastBaseUpdate=re,f.shared.pending=null}}while(!0);me===null&&(F=Te),f.baseState=F,f.firstBaseUpdate=oe,f.lastBaseUpdate=me,m===null&&(f.shared.lanes=0),Go|=N,a.lanes=N,a.memoizedState=Te}}function VS(a,i){if(typeof a!="function")throw Error(o(191,a));a.call(i)}function WS(a,i){var s=a.callbacks;if(s!==null)for(a.callbacks=null,a=0;a<s.length;a++)VS(s[a],i)}var zs=Y(null),Qu=Y(0);function XS(a,i){a=co,z(Qu,a),z(zs,i),co=a|i.baseLanes}function Mf(){z(Qu,co),z(zs,zs.current)}function Lf(){co=Qu.current,W(zs),W(Qu)}var Lo=0,Ve=null,It=null,ma=null,Ju=!1,js=!1,Ul=!1,$u=0,mc=0,Ys=null,Hy=0;function ra(){throw Error(o(321))}function Hf(a,i){if(i===null)return!1;for(var s=0;s<i.length&&s<a.length;s++)if(!Dn(a[s],i[s]))return!1;return!0}function Uf(a,i,s,u,f,m){return Lo=m,Ve=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,M.H=a===null||a.memoizedState===null?MI:LI,Ul=!1,m=s(u,f),Ul=!1,js&&(m=ZS(i,s,u,f)),qS(a),m}function qS(a){M.H=od;var i=It!==null&&It.next!==null;if(Lo=0,ma=It=Ve=null,Ju=!1,mc=0,Ys=null,i)throw Error(o(300));a===null||ya||(a=a.dependencies,a!==null&&Vu(a)&&(ya=!0))}function ZS(a,i,s,u){Ve=a;var f=0;do{if(js&&(Ys=null),mc=0,js=!1,25<=f)throw Error(o(301));if(f+=1,ma=It=null,a.updateQueue!=null){var m=a.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}M.H=By,m=i(s,u)}while(js);return m}function Uy(){var a=M.H,i=a.useState()[0];return i=typeof i.then=="function"?Rc(i):i,a=a.useState()[0],(It!==null?It.memoizedState:null)!==a&&(Ve.flags|=1024),i}function kf(){var a=$u!==0;return $u=0,a}function xf(a,i,s){i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~s}function Pf(a){if(Ju){for(a=a.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}Ju=!1}Lo=0,ma=It=Ve=null,js=!1,mc=$u=0,Ys=null}function _n(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ma===null?Ve.memoizedState=ma=a:ma=ma.next=a,ma}function Ra(){if(It===null){var a=Ve.alternate;a=a!==null?a.memoizedState:null}else a=It.next;var i=ma===null?Ve.memoizedState:ma.next;if(i!==null)ma=i,It=a;else{if(a===null)throw Ve.alternate===null?Error(o(467)):Error(o(310));It=a,a={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},ma===null?Ve.memoizedState=ma=a:ma=ma.next=a}return ma}function wf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rc(a){var i=mc;return mc+=1,Ys===null&&(Ys=[]),a=jS(Ys,a,i),i=Ve,(ma===null?i.memoizedState:ma.next)===null&&(i=i.alternate,M.H=i===null||i.memoizedState===null?MI:LI),a}function ed(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Rc(a);if(a.$$typeof===H)return Qa(a)}throw Error(o(438,String(a)))}function Gf(a){var i=null,s=Ve.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var u=Ve.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=wf(),Ve.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(a),u=0;u<a;u++)s[u]=ce;return i.index++,s}function no(a,i){return typeof i=="function"?i(a):i}function td(a){var i=Ra();return Bf(i,It,a)}function Bf(a,i,s){var u=a.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=s;var f=a.baseQueue,m=u.pending;if(m!==null){if(f!==null){var N=f.next;f.next=m.next,m.next=N}i.baseQueue=f=m,u.pending=null}if(m=a.baseState,f===null)a.memoizedState=m;else{i=f.next;var v=N=null,F=null,oe=i,me=!1;do{var Te=oe.lane&-536870913;if(Te!==oe.lane?(lt&Te)===Te:(Lo&Te)===Te){var le=oe.revertLane;if(le===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),Te===Bs&&(me=!0);else if((Lo&le)===le){oe=oe.next,le===Bs&&(me=!0);continue}else Te={lane:0,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},F===null?(v=F=Te,N=m):F=F.next=Te,Ve.lanes|=le,Go|=le;Te=oe.action,Ul&&s(m,Te),m=oe.hasEagerState?oe.eagerState:s(m,Te)}else le={lane:Te,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},F===null?(v=F=le,N=m):F=F.next=le,Ve.lanes|=Te,Go|=Te;oe=oe.next}while(oe!==null&&oe!==i);if(F===null?N=m:F.next=v,!Dn(m,a.memoizedState)&&(ya=!0,me&&(s=Fs,s!==null)))throw s;a.memoizedState=m,a.baseState=N,a.baseQueue=F,u.lastRenderedState=m}return f===null&&(u.lanes=0),[a.memoizedState,u.dispatch]}function Ff(a){var i=Ra(),s=i.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=a;var u=s.dispatch,f=s.pending,m=i.memoizedState;if(f!==null){s.pending=null;var N=f=f.next;do m=a(m,N.action),N=N.next;while(N!==f);Dn(m,i.memoizedState)||(ya=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),s.lastRenderedState=m}return[m,u]}function QS(a,i,s){var u=Ve,f=Ra(),m=Et;if(m){if(s===void 0)throw Error(o(407));s=s()}else s=i();var N=!Dn((It||f).memoizedState,s);N&&(f.memoizedState=s,ya=!0),f=f.queue;var v=eI.bind(null,u,f,a);if(Tc(2048,8,v,[a]),f.getSnapshot!==i||N||ma!==null&&ma.memoizedState.tag&1){if(u.flags|=2048,Ks(9,ad(),$S.bind(null,u,f,s,i),null),vt===null)throw Error(o(349));m||(Lo&124)!==0||JS(u,i,s)}return s}function JS(a,i,s){a.flags|=16384,a={getSnapshot:i,value:s},i=Ve.updateQueue,i===null?(i=wf(),Ve.updateQueue=i,i.stores=[a]):(s=i.stores,s===null?i.stores=[a]:s.push(a))}function $S(a,i,s,u){i.value=s,i.getSnapshot=u,tI(i)&&aI(a)}function eI(a,i,s){return s(function(){tI(i)&&aI(a)})}function tI(a){var i=a.getSnapshot;a=a.value;try{var s=i();return!Dn(a,s)}catch{return!0}}function aI(a){var i=xs(a,2);i!==null&&Un(i,a,2)}function zf(a){var i=_n();if(typeof a=="function"){var s=a;if(a=s(),Ul){Ft(!0);try{s()}finally{Ft(!1)}}}return i.memoizedState=i.baseState=a,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:a},i}function nI(a,i,s,u){return a.baseState=s,Bf(a,It,typeof u=="function"?u:no)}function ky(a,i,s,u,f){if(id(a))throw Error(o(485));if(a=i.action,a!==null){var m={payload:f,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){m.listeners.push(N)}};M.T!==null?s(!0):m.isTransition=!1,u(m),s=i.pending,s===null?(m.next=i.pending=m,iI(i,m)):(m.next=s.next,i.pending=s.next=m)}}function iI(a,i){var s=i.action,u=i.payload,f=a.state;if(i.isTransition){var m=M.T,N={};M.T=N;try{var v=s(f,u),F=M.S;F!==null&&F(N,v),oI(a,i,v)}catch(oe){jf(a,i,oe)}finally{M.T=m}}else try{m=s(f,u),oI(a,i,m)}catch(oe){jf(a,i,oe)}}function oI(a,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(u){lI(a,i,u)},function(u){return jf(a,i,u)}):lI(a,i,s)}function lI(a,i,s){i.status="fulfilled",i.value=s,sI(i),a.state=s,i=a.pending,i!==null&&(s=i.next,s===i?a.pending=null:(s=s.next,i.next=s,iI(a,s)))}function jf(a,i,s){var u=a.pending;if(a.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=s,sI(i),i=i.next;while(i!==u)}a.action=null}function sI(a){a=a.listeners;for(var i=0;i<a.length;i++)(0,a[i])()}function rI(a,i){return i}function cI(a,i){if(Et){var s=vt.formState;if(s!==null){e:{var u=Ve;if(Et){if(Xt){t:{for(var f=Xt,m=yi;f.nodeType!==8;){if(!m){f=null;break t}if(f=fi(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Xt=fi(f.nextSibling),u=f.data==="F!";break e}}vl(u)}u=!1}u&&(i=s[0])}}return s=_n(),s.memoizedState=s.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rI,lastRenderedState:i},s.queue=u,s=DI.bind(null,Ve,u),u.dispatch=s,u=zf(!1),m=Xf.bind(null,Ve,!1,u.queue),u=_n(),f={state:i,dispatch:null,action:a,pending:null},u.queue=f,s=ky.bind(null,Ve,f,m,s),f.dispatch=s,u.memoizedState=a,[i,s,!1]}function uI(a){var i=Ra();return dI(i,It,a)}function dI(a,i,s){if(i=Bf(a,i,rI)[0],a=td(no)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Rc(i)}catch(N){throw N===dc?qu:N}else u=i;i=Ra();var f=i.queue,m=f.dispatch;return s!==i.memoizedState&&(Ve.flags|=2048,Ks(9,ad(),xy.bind(null,f,s),null)),[u,m,a]}function xy(a,i){a.action=i}function hI(a){var i=Ra(),s=It;if(s!==null)return dI(i,s,a);Ra(),i=i.memoizedState,s=Ra();var u=s.queue.dispatch;return s.memoizedState=a,[i,u,!1]}function Ks(a,i,s,u){return a={tag:a,create:s,deps:u,inst:i,next:null},i=Ve.updateQueue,i===null&&(i=wf(),Ve.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=a.next=a:(u=s.next,s.next=a,a.next=u,i.lastEffect=a),a}function ad(){return{destroy:void 0,resource:void 0}}function EI(){return Ra().memoizedState}function nd(a,i,s,u){var f=_n();u=u===void 0?null:u,Ve.flags|=a,f.memoizedState=Ks(1|i,ad(),s,u)}function Tc(a,i,s,u){var f=Ra();u=u===void 0?null:u;var m=f.memoizedState.inst;It!==null&&u!==null&&Hf(u,It.memoizedState.deps)?f.memoizedState=Ks(i,m,s,u):(Ve.flags|=a,f.memoizedState=Ks(1|i,m,s,u))}function fI(a,i){nd(8390656,8,a,i)}function AI(a,i){Tc(2048,8,a,i)}function mI(a,i){return Tc(4,2,a,i)}function RI(a,i){return Tc(4,4,a,i)}function TI(a,i){if(typeof i=="function"){a=a();var s=i(a);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return a=a(),i.current=a,function(){i.current=null}}function SI(a,i,s){s=s!=null?s.concat([a]):null,Tc(4,4,TI.bind(null,i,a),s)}function Yf(){}function II(a,i){var s=Ra();i=i===void 0?null:i;var u=s.memoizedState;return i!==null&&Hf(i,u[1])?u[0]:(s.memoizedState=[a,i],a)}function _I(a,i){var s=Ra();i=i===void 0?null:i;var u=s.memoizedState;if(i!==null&&Hf(i,u[1]))return u[0];if(u=a(),Ul){Ft(!0);try{a()}finally{Ft(!1)}}return s.memoizedState=[u,i],u}function Kf(a,i,s){return s===void 0||(Lo&1073741824)!==0?a.memoizedState=i:(a.memoizedState=s,a=N_(),Ve.lanes|=a,Go|=a,s)}function gI(a,i,s,u){return Dn(s,i)?s:zs.current!==null?(a=Kf(a,s,u),Dn(a,i)||(ya=!0),a):(Lo&42)===0?(ya=!0,a.memoizedState=s):(a=N_(),Ve.lanes|=a,Go|=a,i)}function pI(a,i,s,u,f){var m=K.p;K.p=m!==0&&8>m?m:8;var N=M.T,v={};M.T=v,Xf(a,!1,i,s);try{var F=f(),oe=M.S;if(oe!==null&&oe(v,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var me=Ly(F,u);Sc(a,i,me,Hn(a))}else Sc(a,i,u,Hn(a))}catch(Te){Sc(a,i,{then:function(){},status:"rejected",reason:Te},Hn())}finally{K.p=m,M.T=N}}function Py(){}function Vf(a,i,s,u){if(a.tag!==5)throw Error(o(476));var f=NI(a).queue;pI(a,f,i,$,s===null?Py:function(){return CI(a),s(u)})}function NI(a){var i=a.memoizedState;if(i!==null)return i;i={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:$},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:s},next:null},a.memoizedState=i,a=a.alternate,a!==null&&(a.memoizedState=i),i}function CI(a){var i=NI(a).next.queue;Sc(a,i,{},Hn())}function Wf(){return Qa(Pc)}function OI(){return Ra().memoizedState}function bI(){return Ra().memoizedState}function wy(a){for(var i=a.return;i!==null;){switch(i.tag){case 24:case 3:var s=Hn();a=vo(s);var u=Mo(i,a,s);u!==null&&(Un(u,i,s),Ec(u,i,s)),i={cache:pf()},a.payload=i;return}i=i.return}}function Gy(a,i,s){var u=Hn();s={lane:u,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},id(a)?yI(i,s):(s=Ef(a,i,s,u),s!==null&&(Un(s,a,u),vI(s,i,u)))}function DI(a,i,s){var u=Hn();Sc(a,i,s,u)}function Sc(a,i,s,u){var f={lane:u,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(id(a))yI(i,f);else{var m=a.alternate;if(a.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var N=i.lastRenderedState,v=m(N,s);if(f.hasEagerState=!0,f.eagerState=v,Dn(v,N))return Fu(a,i,f,0),vt===null&&Bu(),!1}catch{}finally{}if(s=Ef(a,i,f,u),s!==null)return Un(s,a,u),vI(s,i,u),!0}return!1}function Xf(a,i,s,u){if(u={lane:2,revertLane:OA(),action:u,hasEagerState:!1,eagerState:null,next:null},id(a)){if(i)throw Error(o(479))}else i=Ef(a,s,u,2),i!==null&&Un(i,a,2)}function id(a){var i=a.alternate;return a===Ve||i!==null&&i===Ve}function yI(a,i){js=Ju=!0;var s=a.pending;s===null?i.next=i:(i.next=s.next,s.next=i),a.pending=i}function vI(a,i,s){if((s&4194048)!==0){var u=i.lanes;u&=a.pendingLanes,s|=u,i.lanes=s,Du(a,s)}}var od={readContext:Qa,use:ed,useCallback:ra,useContext:ra,useEffect:ra,useImperativeHandle:ra,useLayoutEffect:ra,useInsertionEffect:ra,useMemo:ra,useReducer:ra,useRef:ra,useState:ra,useDebugValue:ra,useDeferredValue:ra,useTransition:ra,useSyncExternalStore:ra,useId:ra,useHostTransitionStatus:ra,useFormState:ra,useActionState:ra,useOptimistic:ra,useMemoCache:ra,useCacheRefresh:ra},MI={readContext:Qa,use:ed,useCallback:function(a,i){return _n().memoizedState=[a,i===void 0?null:i],a},useContext:Qa,useEffect:fI,useImperativeHandle:function(a,i,s){s=s!=null?s.concat([a]):null,nd(4194308,4,TI.bind(null,i,a),s)},useLayoutEffect:function(a,i){return nd(4194308,4,a,i)},useInsertionEffect:function(a,i){nd(4,2,a,i)},useMemo:function(a,i){var s=_n();i=i===void 0?null:i;var u=a();if(Ul){Ft(!0);try{a()}finally{Ft(!1)}}return s.memoizedState=[u,i],u},useReducer:function(a,i,s){var u=_n();if(s!==void 0){var f=s(i);if(Ul){Ft(!0);try{s(i)}finally{Ft(!1)}}}else f=i;return u.memoizedState=u.baseState=f,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:f},u.queue=a,a=a.dispatch=Gy.bind(null,Ve,a),[u.memoizedState,a]},useRef:function(a){var i=_n();return a={current:a},i.memoizedState=a},useState:function(a){a=zf(a);var i=a.queue,s=DI.bind(null,Ve,i);return i.dispatch=s,[a.memoizedState,s]},useDebugValue:Yf,useDeferredValue:function(a,i){var s=_n();return Kf(s,a,i)},useTransition:function(){var a=zf(!1);return a=pI.bind(null,Ve,a.queue,!0,!1),_n().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,i,s){var u=Ve,f=_n();if(Et){if(s===void 0)throw Error(o(407));s=s()}else{if(s=i(),vt===null)throw Error(o(349));(lt&124)!==0||JS(u,i,s)}f.memoizedState=s;var m={value:s,getSnapshot:i};return f.queue=m,fI(eI.bind(null,u,m,a),[a]),u.flags|=2048,Ks(9,ad(),$S.bind(null,u,m,s,i),null),s},useId:function(){var a=_n(),i=vt.identifierPrefix;if(Et){var s=eo,u=$i;s=(u&~(1<<32-kt(u)-1)).toString(32)+s,i=""+i+"R"+s,s=$u++,0<s&&(i+="H"+s.toString(32)),i+=""}else s=Hy++,i=""+i+"r"+s.toString(32)+"";return a.memoizedState=i},useHostTransitionStatus:Wf,useFormState:cI,useActionState:cI,useOptimistic:function(a){var i=_n();i.memoizedState=i.baseState=a;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=Xf.bind(null,Ve,!0,s),s.dispatch=i,[a,i]},useMemoCache:Gf,useCacheRefresh:function(){return _n().memoizedState=wy.bind(null,Ve)}},LI={readContext:Qa,use:ed,useCallback:II,useContext:Qa,useEffect:AI,useImperativeHandle:SI,useInsertionEffect:mI,useLayoutEffect:RI,useMemo:_I,useReducer:td,useRef:EI,useState:function(){return td(no)},useDebugValue:Yf,useDeferredValue:function(a,i){var s=Ra();return gI(s,It.memoizedState,a,i)},useTransition:function(){var a=td(no)[0],i=Ra().memoizedState;return[typeof a=="boolean"?a:Rc(a),i]},useSyncExternalStore:QS,useId:OI,useHostTransitionStatus:Wf,useFormState:uI,useActionState:uI,useOptimistic:function(a,i){var s=Ra();return nI(s,It,a,i)},useMemoCache:Gf,useCacheRefresh:bI},By={readContext:Qa,use:ed,useCallback:II,useContext:Qa,useEffect:AI,useImperativeHandle:SI,useInsertionEffect:mI,useLayoutEffect:RI,useMemo:_I,useReducer:Ff,useRef:EI,useState:function(){return Ff(no)},useDebugValue:Yf,useDeferredValue:function(a,i){var s=Ra();return It===null?Kf(s,a,i):gI(s,It.memoizedState,a,i)},useTransition:function(){var a=Ff(no)[0],i=Ra().memoizedState;return[typeof a=="boolean"?a:Rc(a),i]},useSyncExternalStore:QS,useId:OI,useHostTransitionStatus:Wf,useFormState:hI,useActionState:hI,useOptimistic:function(a,i){var s=Ra();return It!==null?nI(s,It,a,i):(s.baseState=a,[a,s.queue.dispatch])},useMemoCache:Gf,useCacheRefresh:bI},Vs=null,Ic=0;function ld(a){var i=Ic;return Ic+=1,Vs===null&&(Vs=[]),jS(Vs,a,i)}function _c(a,i){i=i.props.ref,a.ref=i!==void 0?i:null}function sd(a,i){throw i.$$typeof===T?Error(o(525)):(a=Object.prototype.toString.call(i),Error(o(31,a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a)))}function HI(a){var i=a._init;return i(a._payload)}function UI(a){function i(J,V){if(a){var ae=J.deletions;ae===null?(J.deletions=[V],J.flags|=16):ae.push(V)}}function s(J,V){if(!a)return null;for(;V!==null;)i(J,V),V=V.sibling;return null}function u(J){for(var V=new Map;J!==null;)J.key!==null?V.set(J.key,J):V.set(J.index,J),J=J.sibling;return V}function f(J,V){return J=Ji(J,V),J.index=0,J.sibling=null,J}function m(J,V,ae){return J.index=ae,a?(ae=J.alternate,ae!==null?(ae=ae.index,ae<V?(J.flags|=67108866,V):ae):(J.flags|=67108866,V)):(J.flags|=1048576,V)}function N(J){return a&&J.alternate===null&&(J.flags|=67108866),J}function v(J,V,ae,Re){return V===null||V.tag!==6?(V=Af(ae,J.mode,Re),V.return=J,V):(V=f(V,ae),V.return=J,V)}function F(J,V,ae,Re){var Ce=ae.type;return Ce===C?me(J,V,ae.props.children,Re,ae.key):V!==null&&(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===j&&HI(Ce)===V.type)?(V=f(V,ae.props),_c(V,ae),V.return=J,V):(V=ju(ae.type,ae.key,ae.props,null,J.mode,Re),_c(V,ae),V.return=J,V)}function oe(J,V,ae,Re){return V===null||V.tag!==4||V.stateNode.containerInfo!==ae.containerInfo||V.stateNode.implementation!==ae.implementation?(V=mf(ae,J.mode,Re),V.return=J,V):(V=f(V,ae.children||[]),V.return=J,V)}function me(J,V,ae,Re,Ce){return V===null||V.tag!==7?(V=Ol(ae,J.mode,Re,Ce),V.return=J,V):(V=f(V,ae),V.return=J,V)}function Te(J,V,ae){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Af(""+V,J.mode,ae),V.return=J,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return ae=ju(V.type,V.key,V.props,null,J.mode,ae),_c(ae,V),ae.return=J,ae;case I:return V=mf(V,J.mode,ae),V.return=J,V;case j:var Re=V._init;return V=Re(V._payload),Te(J,V,ae)}if(he(V)||te(V))return V=Ol(V,J.mode,ae,null),V.return=J,V;if(typeof V.then=="function")return Te(J,ld(V),ae);if(V.$$typeof===H)return Te(J,Wu(J,V),ae);sd(J,V)}return null}function le(J,V,ae,Re){var Ce=V!==null?V.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Ce!==null?null:v(J,V,""+ae,Re);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return ae.key===Ce?F(J,V,ae,Re):null;case I:return ae.key===Ce?oe(J,V,ae,Re):null;case j:return Ce=ae._init,ae=Ce(ae._payload),le(J,V,ae,Re)}if(he(ae)||te(ae))return Ce!==null?null:me(J,V,ae,Re,null);if(typeof ae.then=="function")return le(J,V,ld(ae),Re);if(ae.$$typeof===H)return le(J,V,Wu(J,ae),Re);sd(J,ae)}return null}function re(J,V,ae,Re,Ce){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return J=J.get(ae)||null,v(V,J,""+Re,Ce);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case S:return J=J.get(Re.key===null?ae:Re.key)||null,F(V,J,Re,Ce);case I:return J=J.get(Re.key===null?ae:Re.key)||null,oe(V,J,Re,Ce);case j:var Xe=Re._init;return Re=Xe(Re._payload),re(J,V,ae,Re,Ce)}if(he(Re)||te(Re))return J=J.get(ae)||null,me(V,J,Re,Ce,null);if(typeof Re.then=="function")return re(J,V,ae,ld(Re),Ce);if(Re.$$typeof===H)return re(J,V,ae,Wu(V,Re),Ce);sd(V,Re)}return null}function Pe(J,V,ae,Re){for(var Ce=null,Xe=null,ve=V,ke=V=0,Ma=null;ve!==null&&ke<ae.length;ke++){ve.index>ke?(Ma=ve,ve=null):Ma=ve.sibling;var ht=le(J,ve,ae[ke],Re);if(ht===null){ve===null&&(ve=Ma);break}a&&ve&&ht.alternate===null&&i(J,ve),V=m(ht,V,ke),Xe===null?Ce=ht:Xe.sibling=ht,Xe=ht,ve=Ma}if(ke===ae.length)return s(J,ve),Et&&Dl(J,ke),Ce;if(ve===null){for(;ke<ae.length;ke++)ve=Te(J,ae[ke],Re),ve!==null&&(V=m(ve,V,ke),Xe===null?Ce=ve:Xe.sibling=ve,Xe=ve);return Et&&Dl(J,ke),Ce}for(ve=u(ve);ke<ae.length;ke++)Ma=re(ve,J,ke,ae[ke],Re),Ma!==null&&(a&&Ma.alternate!==null&&ve.delete(Ma.key===null?ke:Ma.key),V=m(Ma,V,ke),Xe===null?Ce=Ma:Xe.sibling=Ma,Xe=Ma);return a&&ve.forEach(function(Xo){return i(J,Xo)}),Et&&Dl(J,ke),Ce}function He(J,V,ae,Re){if(ae==null)throw Error(o(151));for(var Ce=null,Xe=null,ve=V,ke=V=0,Ma=null,ht=ae.next();ve!==null&&!ht.done;ke++,ht=ae.next()){ve.index>ke?(Ma=ve,ve=null):Ma=ve.sibling;var Xo=le(J,ve,ht.value,Re);if(Xo===null){ve===null&&(ve=Ma);break}a&&ve&&Xo.alternate===null&&i(J,ve),V=m(Xo,V,ke),Xe===null?Ce=Xo:Xe.sibling=Xo,Xe=Xo,ve=Ma}if(ht.done)return s(J,ve),Et&&Dl(J,ke),Ce;if(ve===null){for(;!ht.done;ke++,ht=ae.next())ht=Te(J,ht.value,Re),ht!==null&&(V=m(ht,V,ke),Xe===null?Ce=ht:Xe.sibling=ht,Xe=ht);return Et&&Dl(J,ke),Ce}for(ve=u(ve);!ht.done;ke++,ht=ae.next())ht=re(ve,J,ke,ht.value,Re),ht!==null&&(a&&ht.alternate!==null&&ve.delete(ht.key===null?ke:ht.key),V=m(ht,V,ke),Xe===null?Ce=ht:Xe.sibling=ht,Xe=ht);return a&&ve.forEach(function(Fv){return i(J,Fv)}),Et&&Dl(J,ke),Ce}function gt(J,V,ae,Re){if(typeof ae=="object"&&ae!==null&&ae.type===C&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:e:{for(var Ce=ae.key;V!==null;){if(V.key===Ce){if(Ce=ae.type,Ce===C){if(V.tag===7){s(J,V.sibling),Re=f(V,ae.props.children),Re.return=J,J=Re;break e}}else if(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===j&&HI(Ce)===V.type){s(J,V.sibling),Re=f(V,ae.props),_c(Re,ae),Re.return=J,J=Re;break e}s(J,V);break}else i(J,V);V=V.sibling}ae.type===C?(Re=Ol(ae.props.children,J.mode,Re,ae.key),Re.return=J,J=Re):(Re=ju(ae.type,ae.key,ae.props,null,J.mode,Re),_c(Re,ae),Re.return=J,J=Re)}return N(J);case I:e:{for(Ce=ae.key;V!==null;){if(V.key===Ce)if(V.tag===4&&V.stateNode.containerInfo===ae.containerInfo&&V.stateNode.implementation===ae.implementation){s(J,V.sibling),Re=f(V,ae.children||[]),Re.return=J,J=Re;break e}else{s(J,V);break}else i(J,V);V=V.sibling}Re=mf(ae,J.mode,Re),Re.return=J,J=Re}return N(J);case j:return Ce=ae._init,ae=Ce(ae._payload),gt(J,V,ae,Re)}if(he(ae))return Pe(J,V,ae,Re);if(te(ae)){if(Ce=te(ae),typeof Ce!="function")throw Error(o(150));return ae=Ce.call(ae),He(J,V,ae,Re)}if(typeof ae.then=="function")return gt(J,V,ld(ae),Re);if(ae.$$typeof===H)return gt(J,V,Wu(J,ae),Re);sd(J,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,V!==null&&V.tag===6?(s(J,V.sibling),Re=f(V,ae),Re.return=J,J=Re):(s(J,V),Re=Af(ae,J.mode,Re),Re.return=J,J=Re),N(J)):s(J,V)}return function(J,V,ae,Re){try{Ic=0;var Ce=gt(J,V,ae,Re);return Vs=null,Ce}catch(ve){if(ve===dc||ve===qu)throw ve;var Xe=yn(29,ve,null,J.mode);return Xe.lanes=Re,Xe.return=J,Xe}finally{}}}var Ws=UI(!0),kI=UI(!1),Qn=Y(null),vi=null;function Ho(a){var i=a.alternate;z(pa,pa.current&1),z(Qn,a),vi===null&&(i===null||zs.current!==null||i.memoizedState!==null)&&(vi=a)}function xI(a){if(a.tag===22){if(z(pa,pa.current),z(Qn,a),vi===null){var i=a.alternate;i!==null&&i.memoizedState!==null&&(vi=a)}}else Uo()}function Uo(){z(pa,pa.current),z(Qn,Qn.current)}function io(a){W(Qn),vi===a&&(vi=null),W(pa)}var pa=Y(0);function rd(a){for(var i=a;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||wA(s)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function qf(a,i,s,u){i=a.memoizedState,s=s(u,i),s=s==null?i:R({},i,s),a.memoizedState=s,a.lanes===0&&(a.updateQueue.baseState=s)}var Zf={enqueueSetState:function(a,i,s){a=a._reactInternals;var u=Hn(),f=vo(u);f.payload=i,s!=null&&(f.callback=s),i=Mo(a,f,u),i!==null&&(Un(i,a,u),Ec(i,a,u))},enqueueReplaceState:function(a,i,s){a=a._reactInternals;var u=Hn(),f=vo(u);f.tag=1,f.payload=i,s!=null&&(f.callback=s),i=Mo(a,f,u),i!==null&&(Un(i,a,u),Ec(i,a,u))},enqueueForceUpdate:function(a,i){a=a._reactInternals;var s=Hn(),u=vo(s);u.tag=2,i!=null&&(u.callback=i),i=Mo(a,u,s),i!==null&&(Un(i,a,s),Ec(i,a,s))}};function PI(a,i,s,u,f,m,N){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(u,m,N):i.prototype&&i.prototype.isPureReactComponent?!nc(s,u)||!nc(f,m):!0}function wI(a,i,s,u){a=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,u),i.state!==a&&Zf.enqueueReplaceState(i,i.state,null)}function kl(a,i){var s=i;if("ref"in i){s={};for(var u in i)u!=="ref"&&(s[u]=i[u])}if(a=a.defaultProps){s===i&&(s=R({},s));for(var f in a)s[f]===void 0&&(s[f]=a[f])}return s}var cd=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function GI(a){cd(a)}function BI(a){console.error(a)}function FI(a){cd(a)}function ud(a,i){try{var s=a.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function zI(a,i,s){try{var u=a.onCaughtError;u(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Qf(a,i,s){return s=vo(s),s.tag=3,s.payload={element:null},s.callback=function(){ud(a,i)},s}function jI(a){return a=vo(a),a.tag=3,a}function YI(a,i,s,u){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;a.payload=function(){return f(m)},a.callback=function(){zI(i,s,u)}}var N=s.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(a.callback=function(){zI(i,s,u),typeof f!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this));var v=u.stack;this.componentDidCatch(u.value,{componentStack:v!==null?v:""})})}function Fy(a,i,s,u,f){if(s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=s.alternate,i!==null&&rc(i,s,f,!0),s=Qn.current,s!==null){switch(s.tag){case 13:return vi===null?_A():s.alternate===null&&qt===0&&(qt=3),s.flags&=-257,s.flags|=65536,s.lanes=f,u===Of?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([u]):i.add(u),pA(a,u,f)),!1;case 22:return s.flags|=65536,u===Of?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([u]):s.add(u)),pA(a,u,f)),!1}throw Error(o(435,s.tag))}return pA(a,u,f),_A(),!1}if(Et)return i=Qn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Sf&&(a=Error(o(422),{cause:u}),sc(Wn(a,s)))):(u!==Sf&&(i=Error(o(423),{cause:u}),sc(Wn(i,s))),a=a.current.alternate,a.flags|=65536,f&=-f,a.lanes|=f,u=Wn(u,s),f=Qf(a.stateNode,u,f),yf(a,f),qt!==4&&(qt=2)),!1;var m=Error(o(520),{cause:u});if(m=Wn(m,s),Dc===null?Dc=[m]:Dc.push(m),qt!==4&&(qt=2),i===null)return!0;u=Wn(u,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,a=f&-f,s.lanes|=a,a=Qf(s.stateNode,u,a),yf(s,a),!1;case 1:if(i=s.type,m=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Bo===null||!Bo.has(m))))return s.flags|=65536,f&=-f,s.lanes|=f,f=jI(f),YI(f,a,s,u),yf(s,f),!1}s=s.return}while(s!==null);return!1}var KI=Error(o(461)),ya=!1;function Ba(a,i,s,u){i.child=a===null?kI(i,null,s,u):Ws(i,a.child,s,u)}function VI(a,i,s,u,f){s=s.render;var m=i.ref;if("ref"in u){var N={};for(var v in u)v!=="ref"&&(N[v]=u[v])}else N=u;return Ll(i),u=Uf(a,i,s,N,m,f),v=kf(),a!==null&&!ya?(xf(a,i,f),oo(a,i,f)):(Et&&v&&Rf(i),i.flags|=1,Ba(a,i,u,f),i.child)}function WI(a,i,s,u,f){if(a===null){var m=s.type;return typeof m=="function"&&!ff(m)&&m.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=m,XI(a,i,m,u,f)):(a=ju(s.type,null,u,i,i.mode,f),a.ref=i.ref,a.return=i,i.child=a)}if(m=a.child,!oA(a,f)){var N=m.memoizedProps;if(s=s.compare,s=s!==null?s:nc,s(N,u)&&a.ref===i.ref)return oo(a,i,f)}return i.flags|=1,a=Ji(m,u),a.ref=i.ref,a.return=i,i.child=a}function XI(a,i,s,u,f){if(a!==null){var m=a.memoizedProps;if(nc(m,u)&&a.ref===i.ref)if(ya=!1,i.pendingProps=u=m,oA(a,f))(a.flags&131072)!==0&&(ya=!0);else return i.lanes=a.lanes,oo(a,i,f)}return Jf(a,i,s,u,f)}function qI(a,i,s){var u=i.pendingProps,f=u.children,m=a!==null?a.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=m!==null?m.baseLanes|s:s,a!==null){for(f=i.child=a.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;i.childLanes=m&~u}else i.childLanes=0,i.child=null;return ZI(a,i,u,s)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},a!==null&&Xu(i,m!==null?m.cachePool:null),m!==null?XS(i,m):Mf(),xI(i);else return i.lanes=i.childLanes=536870912,ZI(a,i,m!==null?m.baseLanes|s:s,s)}else m!==null?(Xu(i,m.cachePool),XS(i,m),Uo(),i.memoizedState=null):(a!==null&&Xu(i,null),Mf(),Uo());return Ba(a,i,f,s),i.child}function ZI(a,i,s,u){var f=Cf();return f=f===null?null:{parent:ga._currentValue,pool:f},i.memoizedState={baseLanes:s,cachePool:f},a!==null&&Xu(i,null),Mf(),xI(i),a!==null&&rc(a,i,u,!0),null}function dd(a,i){var s=i.ref;if(s===null)a!==null&&a.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(a===null||a.ref!==s)&&(i.flags|=4194816)}}function Jf(a,i,s,u,f){return Ll(i),s=Uf(a,i,s,u,void 0,f),u=kf(),a!==null&&!ya?(xf(a,i,f),oo(a,i,f)):(Et&&u&&Rf(i),i.flags|=1,Ba(a,i,s,f),i.child)}function QI(a,i,s,u,f,m){return Ll(i),i.updateQueue=null,s=ZS(i,u,s,f),qS(a),u=kf(),a!==null&&!ya?(xf(a,i,m),oo(a,i,m)):(Et&&u&&Rf(i),i.flags|=1,Ba(a,i,s,m),i.child)}function JI(a,i,s,u,f){if(Ll(i),i.stateNode===null){var m=Ps,N=s.contextType;typeof N=="object"&&N!==null&&(m=Qa(N)),m=new s(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Zf,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},bf(i),N=s.contextType,m.context=typeof N=="object"&&N!==null?Qa(N):Ps,m.state=i.memoizedState,N=s.getDerivedStateFromProps,typeof N=="function"&&(qf(i,s,N,u),m.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(N=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),N!==m.state&&Zf.enqueueReplaceState(m,m.state,null),Ac(i,u,m,f),fc(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(a===null){m=i.stateNode;var v=i.memoizedProps,F=kl(s,v);m.props=F;var oe=m.context,me=s.contextType;N=Ps,typeof me=="object"&&me!==null&&(N=Qa(me));var Te=s.getDerivedStateFromProps;me=typeof Te=="function"||typeof m.getSnapshotBeforeUpdate=="function",v=i.pendingProps!==v,me||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v||oe!==N)&&wI(i,m,u,N),yo=!1;var le=i.memoizedState;m.state=le,Ac(i,u,m,f),fc(),oe=i.memoizedState,v||le!==oe||yo?(typeof Te=="function"&&(qf(i,s,Te,u),oe=i.memoizedState),(F=yo||PI(i,s,F,u,le,oe,N))?(me||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=oe),m.props=u,m.state=oe,m.context=N,u=F):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,Df(a,i),N=i.memoizedProps,me=kl(s,N),m.props=me,Te=i.pendingProps,le=m.context,oe=s.contextType,F=Ps,typeof oe=="object"&&oe!==null&&(F=Qa(oe)),v=s.getDerivedStateFromProps,(oe=typeof v=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N!==Te||le!==F)&&wI(i,m,u,F),yo=!1,le=i.memoizedState,m.state=le,Ac(i,u,m,f),fc();var re=i.memoizedState;N!==Te||le!==re||yo||a!==null&&a.dependencies!==null&&Vu(a.dependencies)?(typeof v=="function"&&(qf(i,s,v,u),re=i.memoizedState),(me=yo||PI(i,s,me,u,le,re,F)||a!==null&&a.dependencies!==null&&Vu(a.dependencies))?(oe||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,re,F),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,re,F)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||N===a.memoizedProps&&le===a.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&le===a.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=re),m.props=u,m.state=re,m.context=F,u=me):(typeof m.componentDidUpdate!="function"||N===a.memoizedProps&&le===a.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&le===a.memoizedState||(i.flags|=1024),u=!1)}return m=u,dd(a,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,s=u&&typeof s.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,a!==null&&u?(i.child=Ws(i,a.child,null,f),i.child=Ws(i,null,s,f)):Ba(a,i,s,f),i.memoizedState=m.state,a=i.child):a=oo(a,i,f),a}function $I(a,i,s,u){return lc(),i.flags|=256,Ba(a,i,s,u),i.child}var $f={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function eA(a){return{baseLanes:a,cachePool:BS()}}function tA(a,i,s){return a=a!==null?a.childLanes&~s:0,i&&(a|=Jn),a}function e_(a,i,s){var u=i.pendingProps,f=!1,m=(i.flags&128)!==0,N;if((N=m)||(N=a!==null&&a.memoizedState===null?!1:(pa.current&2)!==0),N&&(f=!0,i.flags&=-129),N=(i.flags&32)!==0,i.flags&=-33,a===null){if(Et){if(f?Ho(i):Uo(),Et){var v=Xt,F;if(F=v){e:{for(F=v,v=yi;F.nodeType!==8;){if(!v){v=null;break e}if(F=fi(F.nextSibling),F===null){v=null;break e}}v=F}v!==null?(i.memoizedState={dehydrated:v,treeContext:bl!==null?{id:$i,overflow:eo}:null,retryLane:536870912,hydrationErrors:null},F=yn(18,null,null,0),F.stateNode=v,F.return=i,i.child=F,an=i,Xt=null,F=!0):F=!1}F||vl(i)}if(v=i.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return wA(v)?i.lanes=32:i.lanes=536870912,null;io(i)}return v=u.children,u=u.fallback,f?(Uo(),f=i.mode,v=hd({mode:"hidden",children:v},f),u=Ol(u,f,s,null),v.return=i,u.return=i,v.sibling=u,i.child=v,f=i.child,f.memoizedState=eA(s),f.childLanes=tA(a,N,s),i.memoizedState=$f,u):(Ho(i),aA(i,v))}if(F=a.memoizedState,F!==null&&(v=F.dehydrated,v!==null)){if(m)i.flags&256?(Ho(i),i.flags&=-257,i=nA(a,i,s)):i.memoizedState!==null?(Uo(),i.child=a.child,i.flags|=128,i=null):(Uo(),f=u.fallback,v=i.mode,u=hd({mode:"visible",children:u.children},v),f=Ol(f,v,s,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,Ws(i,a.child,null,s),u=i.child,u.memoizedState=eA(s),u.childLanes=tA(a,N,s),i.memoizedState=$f,i=f);else if(Ho(i),wA(v)){if(N=v.nextSibling&&v.nextSibling.dataset,N)var oe=N.dgst;N=oe,u=Error(o(419)),u.stack="",u.digest=N,sc({value:u,source:null,stack:null}),i=nA(a,i,s)}else if(ya||rc(a,i,s,!1),N=(s&a.childLanes)!==0,ya||N){if(N=vt,N!==null&&(u=s&-s,u=(u&42)!==0?1:Wr(u),u=(u&(N.suspendedLanes|s))!==0?0:u,u!==0&&u!==F.retryLane))throw F.retryLane=u,xs(a,u),Un(N,a,u),KI;v.data==="$?"||_A(),i=nA(a,i,s)}else v.data==="$?"?(i.flags|=192,i.child=a.child,i=null):(a=F.treeContext,Xt=fi(v.nextSibling),an=i,Et=!0,yl=null,yi=!1,a!==null&&(qn[Zn++]=$i,qn[Zn++]=eo,qn[Zn++]=bl,$i=a.id,eo=a.overflow,bl=i),i=aA(i,u.children),i.flags|=4096);return i}return f?(Uo(),f=u.fallback,v=i.mode,F=a.child,oe=F.sibling,u=Ji(F,{mode:"hidden",children:u.children}),u.subtreeFlags=F.subtreeFlags&65011712,oe!==null?f=Ji(oe,f):(f=Ol(f,v,s,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,v=a.child.memoizedState,v===null?v=eA(s):(F=v.cachePool,F!==null?(oe=ga._currentValue,F=F.parent!==oe?{parent:oe,pool:oe}:F):F=BS(),v={baseLanes:v.baseLanes|s,cachePool:F}),f.memoizedState=v,f.childLanes=tA(a,N,s),i.memoizedState=$f,u):(Ho(i),s=a.child,a=s.sibling,s=Ji(s,{mode:"visible",children:u.children}),s.return=i,s.sibling=null,a!==null&&(N=i.deletions,N===null?(i.deletions=[a],i.flags|=16):N.push(a)),i.child=s,i.memoizedState=null,s)}function aA(a,i){return i=hd({mode:"visible",children:i},a.mode),i.return=a,a.child=i}function hd(a,i){return a=yn(22,a,null,i),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function nA(a,i,s){return Ws(i,a.child,null,s),a=aA(i,i.pendingProps.children),a.flags|=2,i.memoizedState=null,a}function t_(a,i,s){a.lanes|=i;var u=a.alternate;u!==null&&(u.lanes|=i),_f(a.return,i,s)}function iA(a,i,s,u,f){var m=a.memoizedState;m===null?a.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=s,m.tailMode=f)}function a_(a,i,s){var u=i.pendingProps,f=u.revealOrder,m=u.tail;if(Ba(a,i,u.children,s),u=pa.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=i.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&t_(a,s,i);else if(a.tag===19)t_(a,s,i);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}u&=1}switch(z(pa,u),f){case"forwards":for(s=i.child,f=null;s!==null;)a=s.alternate,a!==null&&rd(a)===null&&(f=s),s=s.sibling;s=f,s===null?(f=i.child,i.child=null):(f=s.sibling,s.sibling=null),iA(i,!1,f,s,m);break;case"backwards":for(s=null,f=i.child,i.child=null;f!==null;){if(a=f.alternate,a!==null&&rd(a)===null){i.child=f;break}a=f.sibling,f.sibling=s,s=f,f=a}iA(i,!0,s,null,m);break;case"together":iA(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function oo(a,i,s){if(a!==null&&(i.dependencies=a.dependencies),Go|=i.lanes,(s&i.childLanes)===0)if(a!==null){if(rc(a,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(a!==null&&i.child!==a.child)throw Error(o(153));if(i.child!==null){for(a=i.child,s=Ji(a,a.pendingProps),i.child=s,s.return=i;a.sibling!==null;)a=a.sibling,s=s.sibling=Ji(a,a.pendingProps),s.return=i;s.sibling=null}return i.child}function oA(a,i){return(a.lanes&i)!==0?!0:(a=a.dependencies,!!(a!==null&&Vu(a)))}function zy(a,i,s){switch(i.tag){case 3:se(i,i.stateNode.containerInfo),Do(i,ga,a.memoizedState.cache),lc();break;case 27:case 5:Se(i);break;case 4:se(i,i.stateNode.containerInfo);break;case 10:Do(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ho(i),i.flags|=128,null):(s&i.child.childLanes)!==0?e_(a,i,s):(Ho(i),a=oo(a,i,s),a!==null?a.sibling:null);Ho(i);break;case 19:var f=(a.flags&128)!==0;if(u=(s&i.childLanes)!==0,u||(rc(a,i,s,!1),u=(s&i.childLanes)!==0),f){if(u)return a_(a,i,s);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),z(pa,pa.current),u)break;return null;case 22:case 23:return i.lanes=0,qI(a,i,s);case 24:Do(i,ga,a.memoizedState.cache)}return oo(a,i,s)}function n_(a,i,s){if(a!==null)if(a.memoizedProps!==i.pendingProps)ya=!0;else{if(!oA(a,s)&&(i.flags&128)===0)return ya=!1,zy(a,i,s);ya=(a.flags&131072)!==0}else ya=!1,Et&&(i.flags&1048576)!==0&&HS(i,Ku,i.index);switch(i.lanes=0,i.tag){case 16:e:{a=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")ff(u)?(a=kl(u,a),i.tag=1,i=JI(null,i,u,a,s)):(i.tag=0,i=Jf(null,i,u,a,s));else{if(u!=null){if(f=u.$$typeof,f===L){i.tag=11,i=VI(null,i,u,a,s);break e}else if(f===B){i.tag=14,i=WI(null,i,u,a,s);break e}}throw i=fe(u)||u,Error(o(306,i,""))}}return i;case 0:return Jf(a,i,i.type,i.pendingProps,s);case 1:return u=i.type,f=kl(u,i.pendingProps),JI(a,i,u,f,s);case 3:e:{if(se(i,i.stateNode.containerInfo),a===null)throw Error(o(387));u=i.pendingProps;var m=i.memoizedState;f=m.element,Df(a,i),Ac(i,u,null,s);var N=i.memoizedState;if(u=N.cache,Do(i,ga,u),u!==m.cache&&gf(i,[ga],s,!0),fc(),u=N.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:N.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=$I(a,i,u,s);break e}else if(u!==f){f=Wn(Error(o(424)),i),sc(f),i=$I(a,i,u,s);break e}else{switch(a=i.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Xt=fi(a.firstChild),an=i,Et=!0,yl=null,yi=!0,s=kI(i,null,u,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(lc(),u===f){i=oo(a,i,s);break e}Ba(a,i,u,s)}i=i.child}return i;case 26:return dd(a,i),a===null?(s=sg(i.type,null,i.pendingProps,null))?i.memoizedState=s:Et||(s=i.type,a=i.pendingProps,u=Od(P.current).createElement(s),u[Za]=i,u[Sn]=a,za(u,s,a),Da(u),i.stateNode=u):i.memoizedState=sg(i.type,a.memoizedProps,i.pendingProps,a.memoizedState),null;case 27:return Se(i),a===null&&Et&&(u=i.stateNode=ig(i.type,i.pendingProps,P.current),an=i,yi=!0,f=Xt,jo(i.type)?(GA=f,Xt=fi(u.firstChild)):Xt=f),Ba(a,i,i.pendingProps.children,s),dd(a,i),a===null&&(i.flags|=4194304),i.child;case 5:return a===null&&Et&&((f=u=Xt)&&(u=mv(u,i.type,i.pendingProps,yi),u!==null?(i.stateNode=u,an=i,Xt=fi(u.firstChild),yi=!1,f=!0):f=!1),f||vl(i)),Se(i),f=i.type,m=i.pendingProps,N=a!==null?a.memoizedProps:null,u=m.children,kA(f,m)?u=null:N!==null&&kA(f,N)&&(i.flags|=32),i.memoizedState!==null&&(f=Uf(a,i,Uy,null,null,s),Pc._currentValue=f),dd(a,i),Ba(a,i,u,s),i.child;case 6:return a===null&&Et&&((a=s=Xt)&&(s=Rv(s,i.pendingProps,yi),s!==null?(i.stateNode=s,an=i,Xt=null,a=!0):a=!1),a||vl(i)),null;case 13:return e_(a,i,s);case 4:return se(i,i.stateNode.containerInfo),u=i.pendingProps,a===null?i.child=Ws(i,null,u,s):Ba(a,i,u,s),i.child;case 11:return VI(a,i,i.type,i.pendingProps,s);case 7:return Ba(a,i,i.pendingProps,s),i.child;case 8:return Ba(a,i,i.pendingProps.children,s),i.child;case 12:return Ba(a,i,i.pendingProps.children,s),i.child;case 10:return u=i.pendingProps,Do(i,i.type,u.value),Ba(a,i,u.children,s),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,Ll(i),f=Qa(f),u=u(f),i.flags|=1,Ba(a,i,u,s),i.child;case 14:return WI(a,i,i.type,i.pendingProps,s);case 15:return XI(a,i,i.type,i.pendingProps,s);case 19:return a_(a,i,s);case 31:return u=i.pendingProps,s=i.mode,u={mode:u.mode,children:u.children},a===null?(s=hd(u,s),s.ref=i.ref,i.child=s,s.return=i,i=s):(s=Ji(a.child,u),s.ref=i.ref,i.child=s,s.return=i,i=s),i;case 22:return qI(a,i,s);case 24:return Ll(i),u=Qa(ga),a===null?(f=Cf(),f===null&&(f=vt,m=pf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=s),f=m),i.memoizedState={parent:u,cache:f},bf(i),Do(i,ga,f)):((a.lanes&s)!==0&&(Df(a,i),Ac(i,null,null,s),fc()),f=a.memoizedState,m=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Do(i,ga,u)):(u=m.cache,Do(i,ga,u),u!==f.cache&&gf(i,[ga],s,!0))),Ba(a,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function lo(a){a.flags|=4}function i_(a,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!hg(i)){if(i=Qn.current,i!==null&&((lt&4194048)===lt?vi!==null:(lt&62914560)!==lt&&(lt&536870912)===0||i!==vi))throw hc=Of,FS;a.flags|=8192}}function Ed(a,i){i!==null&&(a.flags|=4),a.flags&16384&&(i=a.tag!==22?Is():536870912,a.lanes|=i,Qs|=i)}function gc(a,i){if(!Et)switch(a.tailMode){case"hidden":i=a.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?a.tail=null:s.sibling=null;break;case"collapsed":s=a.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?i||a.tail===null?a.tail=null:a.tail.sibling=null:u.sibling=null}}function zt(a){var i=a.alternate!==null&&a.alternate.child===a.child,s=0,u=0;if(i)for(var f=a.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=a,f=f.sibling;else for(f=a.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=a,f=f.sibling;return a.subtreeFlags|=u,a.childLanes=s,i}function jy(a,i,s){var u=i.pendingProps;switch(Tf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(i),null;case 1:return zt(i),null;case 3:return s=i.stateNode,u=null,a!==null&&(u=a.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ao(ga),Ee(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(a===null||a.child===null)&&(oc(i)?lo(i):a===null||a.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,xS())),zt(i),null;case 26:return s=i.memoizedState,a===null?(lo(i),s!==null?(zt(i),i_(i,s)):(zt(i),i.flags&=-16777217)):s?s!==a.memoizedState?(lo(i),zt(i),i_(i,s)):(zt(i),i.flags&=-16777217):(a.memoizedProps!==u&&lo(i),zt(i),i.flags&=-16777217),null;case 27:Oe(i),s=P.current;var f=i.type;if(a!==null&&i.stateNode!=null)a.memoizedProps!==u&&lo(i);else{if(!u){if(i.stateNode===null)throw Error(o(166));return zt(i),null}a=Z.current,oc(i)?US(i):(a=ig(f,u,s),i.stateNode=a,lo(i))}return zt(i),null;case 5:if(Oe(i),s=i.type,a!==null&&i.stateNode!=null)a.memoizedProps!==u&&lo(i);else{if(!u){if(i.stateNode===null)throw Error(o(166));return zt(i),null}if(a=Z.current,oc(i))US(i);else{switch(f=Od(P.current),a){case 1:a=f.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:a=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":a=f.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":a=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":a=f.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?a.multiple=!0:u.size&&(a.size=u.size);break;default:a=typeof u.is=="string"?f.createElement(s,{is:u.is}):f.createElement(s)}}a[Za]=i,a[Sn]=u;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=a;e:switch(za(a,s,u),s){case"button":case"input":case"select":case"textarea":a=!!u.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&lo(i)}}return zt(i),i.flags&=-16777217,null;case 6:if(a&&i.stateNode!=null)a.memoizedProps!==u&&lo(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(o(166));if(a=P.current,oc(i)){if(a=i.stateNode,s=i.memoizedProps,u=null,f=an,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}a[Za]=i,a=!!(a.nodeValue===s||u!==null&&u.suppressHydrationWarning===!0||Q_(a.nodeValue,s)),a||vl(i)}else a=Od(a).createTextNode(u),a[Za]=i,i.stateNode=a}return zt(i),null;case 13:if(u=i.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(f=oc(i),u!==null&&u.dehydrated!==null){if(a===null){if(!f)throw Error(o(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));f[Za]=i}else lc(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;zt(i),f=!1}else f=xS(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(io(i),i):(io(i),null)}if(io(i),(i.flags&128)!==0)return i.lanes=s,i;if(s=u!==null,a=a!==null&&a.memoizedState!==null,s){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return s!==a&&s&&(i.child.flags|=8192),Ed(i,i.updateQueue),zt(i),null;case 4:return Ee(),a===null&&vA(i.stateNode.containerInfo),zt(i),null;case 10:return ao(i.type),zt(i),null;case 19:if(W(pa),f=i.memoizedState,f===null)return zt(i),null;if(u=(i.flags&128)!==0,m=f.rendering,m===null)if(u)gc(f,!1);else{if(qt!==0||a!==null&&(a.flags&128)!==0)for(a=i.child;a!==null;){if(m=rd(a),m!==null){for(i.flags|=128,gc(f,!1),a=m.updateQueue,i.updateQueue=a,Ed(i,a),i.subtreeFlags=0,a=s,s=i.child;s!==null;)LS(s,a),s=s.sibling;return z(pa,pa.current&1|2),i.child}a=a.sibling}f.tail!==null&&ye()>md&&(i.flags|=128,u=!0,gc(f,!1),i.lanes=4194304)}else{if(!u)if(a=rd(m),a!==null){if(i.flags|=128,u=!0,a=a.updateQueue,i.updateQueue=a,Ed(i,a),gc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Et)return zt(i),null}else 2*ye()-f.renderingStartTime>md&&s!==536870912&&(i.flags|=128,u=!0,gc(f,!1),i.lanes=4194304);f.isBackwards?(m.sibling=i.child,i.child=m):(a=f.last,a!==null?a.sibling=m:i.child=m,f.last=m)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=ye(),i.sibling=null,a=pa.current,z(pa,u?a&1|2:a&1),i):(zt(i),null);case 22:case 23:return io(i),Lf(),u=i.memoizedState!==null,a!==null?a.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(s&536870912)!==0&&(i.flags&128)===0&&(zt(i),i.subtreeFlags&6&&(i.flags|=8192)):zt(i),s=i.updateQueue,s!==null&&Ed(i,s.retryQueue),s=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==s&&(i.flags|=2048),a!==null&&W(Hl),null;case 24:return s=null,a!==null&&(s=a.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),ao(ga),zt(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function Yy(a,i){switch(Tf(i),i.tag){case 1:return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 3:return ao(ga),Ee(),a=i.flags,(a&65536)!==0&&(a&128)===0?(i.flags=a&-65537|128,i):null;case 26:case 27:case 5:return Oe(i),null;case 13:if(io(i),a=i.memoizedState,a!==null&&a.dehydrated!==null){if(i.alternate===null)throw Error(o(340));lc()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 19:return W(pa),null;case 4:return Ee(),null;case 10:return ao(i.type),null;case 22:case 23:return io(i),Lf(),a!==null&&W(Hl),a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 24:return ao(ga),null;case 25:return null;default:return null}}function o_(a,i){switch(Tf(i),i.tag){case 3:ao(ga),Ee();break;case 26:case 27:case 5:Oe(i);break;case 4:Ee();break;case 13:io(i);break;case 19:W(pa);break;case 10:ao(i.type);break;case 22:case 23:io(i),Lf(),a!==null&&W(Hl);break;case 24:ao(ga)}}function pc(a,i){try{var s=i.updateQueue,u=s!==null?s.lastEffect:null;if(u!==null){var f=u.next;s=f;do{if((s.tag&a)===a){u=void 0;var m=s.create,N=s.inst;u=m(),N.destroy=u}s=s.next}while(s!==f)}}catch(v){Ot(i,i.return,v)}}function ko(a,i,s){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&a)===a){var N=u.inst,v=N.destroy;if(v!==void 0){N.destroy=void 0,f=i;var F=s,oe=v;try{oe()}catch(me){Ot(f,F,me)}}}u=u.next}while(u!==m)}}catch(me){Ot(i,i.return,me)}}function l_(a){var i=a.updateQueue;if(i!==null){var s=a.stateNode;try{WS(i,s)}catch(u){Ot(a,a.return,u)}}}function s_(a,i,s){s.props=kl(a.type,a.memoizedProps),s.state=a.memoizedState;try{s.componentWillUnmount()}catch(u){Ot(a,i,u)}}function Nc(a,i){try{var s=a.ref;if(s!==null){switch(a.tag){case 26:case 27:case 5:var u=a.stateNode;break;case 30:u=a.stateNode;break;default:u=a.stateNode}typeof s=="function"?a.refCleanup=s(u):s.current=u}}catch(f){Ot(a,i,f)}}function Mi(a,i){var s=a.ref,u=a.refCleanup;if(s!==null)if(typeof u=="function")try{u()}catch(f){Ot(a,i,f)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){Ot(a,i,f)}else s.current=null}function r_(a){var i=a.type,s=a.memoizedProps,u=a.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&u.focus();break e;case"img":s.src?u.src=s.src:s.srcSet&&(u.srcset=s.srcSet)}}catch(f){Ot(a,a.return,f)}}function lA(a,i,s){try{var u=a.stateNode;dv(u,a.type,s,i),u[Sn]=i}catch(f){Ot(a,a.return,f)}}function c_(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&jo(a.type)||a.tag===4}function sA(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||c_(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&jo(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function rA(a,i,s){var u=a.tag;if(u===5||u===6)a=a.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(a,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(a),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Cd));else if(u!==4&&(u===27&&jo(a.type)&&(s=a.stateNode,i=null),a=a.child,a!==null))for(rA(a,i,s),a=a.sibling;a!==null;)rA(a,i,s),a=a.sibling}function fd(a,i,s){var u=a.tag;if(u===5||u===6)a=a.stateNode,i?s.insertBefore(a,i):s.appendChild(a);else if(u!==4&&(u===27&&jo(a.type)&&(s=a.stateNode),a=a.child,a!==null))for(fd(a,i,s),a=a.sibling;a!==null;)fd(a,i,s),a=a.sibling}function u_(a){var i=a.stateNode,s=a.memoizedProps;try{for(var u=a.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);za(i,u,s),i[Za]=a,i[Sn]=s}catch(m){Ot(a,a.return,m)}}var so=!1,ca=!1,cA=!1,d_=typeof WeakSet=="function"?WeakSet:Set,va=null;function Ky(a,i){if(a=a.containerInfo,HA=Ld,a=gS(a),sf(a)){if("selectionStart"in a)var s={start:a.selectionStart,end:a.selectionEnd};else e:{s=(s=a.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{s.nodeType,m.nodeType}catch{s=null;break e}var N=0,v=-1,F=-1,oe=0,me=0,Te=a,le=null;t:for(;;){for(var re;Te!==s||f!==0&&Te.nodeType!==3||(v=N+f),Te!==m||u!==0&&Te.nodeType!==3||(F=N+u),Te.nodeType===3&&(N+=Te.nodeValue.length),(re=Te.firstChild)!==null;)le=Te,Te=re;for(;;){if(Te===a)break t;if(le===s&&++oe===f&&(v=N),le===m&&++me===u&&(F=N),(re=Te.nextSibling)!==null)break;Te=le,le=Te.parentNode}Te=re}s=v===-1||F===-1?null:{start:v,end:F}}else s=null}s=s||{start:0,end:0}}else s=null;for(UA={focusedElem:a,selectionRange:s},Ld=!1,va=i;va!==null;)if(i=va,a=i.child,(i.subtreeFlags&1024)!==0&&a!==null)a.return=i,va=a;else for(;va!==null;){switch(i=va,m=i.alternate,a=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&m!==null){a=void 0,s=i,f=m.memoizedProps,m=m.memoizedState,u=s.stateNode;try{var Pe=kl(s.type,f,s.elementType===s.type);a=u.getSnapshotBeforeUpdate(Pe,m),u.__reactInternalSnapshotBeforeUpdate=a}catch(He){Ot(s,s.return,He)}}break;case 3:if((a&1024)!==0){if(a=i.stateNode.containerInfo,s=a.nodeType,s===9)PA(a);else if(s===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":PA(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(o(163))}if(a=i.sibling,a!==null){a.return=i.return,va=a;break}va=i.return}}function h_(a,i,s){var u=s.flags;switch(s.tag){case 0:case 11:case 15:xo(a,s),u&4&&pc(5,s);break;case 1:if(xo(a,s),u&4)if(a=s.stateNode,i===null)try{a.componentDidMount()}catch(N){Ot(s,s.return,N)}else{var f=kl(s.type,i.memoizedProps);i=i.memoizedState;try{a.componentDidUpdate(f,i,a.__reactInternalSnapshotBeforeUpdate)}catch(N){Ot(s,s.return,N)}}u&64&&l_(s),u&512&&Nc(s,s.return);break;case 3:if(xo(a,s),u&64&&(a=s.updateQueue,a!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{WS(a,i)}catch(N){Ot(s,s.return,N)}}break;case 27:i===null&&u&4&&u_(s);case 26:case 5:xo(a,s),i===null&&u&4&&r_(s),u&512&&Nc(s,s.return);break;case 12:xo(a,s);break;case 13:xo(a,s),u&4&&A_(a,s),u&64&&(a=s.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(s=ev.bind(null,s),Tv(a,s))));break;case 22:if(u=s.memoizedState!==null||so,!u){i=i!==null&&i.memoizedState!==null||ca,f=so;var m=ca;so=u,(ca=i)&&!m?Po(a,s,(s.subtreeFlags&8772)!==0):xo(a,s),so=f,ca=m}break;case 30:break;default:xo(a,s)}}function E_(a){var i=a.alternate;i!==null&&(a.alternate=null,E_(i)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(i=a.stateNode,i!==null&&FE(i)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var xt=null,gn=!1;function ro(a,i,s){for(s=s.child;s!==null;)f_(a,i,s),s=s.sibling}function f_(a,i,s){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(Co,s)}catch{}switch(s.tag){case 26:ca||Mi(s,i),ro(a,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ca||Mi(s,i);var u=xt,f=gn;jo(s.type)&&(xt=s.stateNode,gn=!1),ro(a,i,s),Hc(s.stateNode),xt=u,gn=f;break;case 5:ca||Mi(s,i);case 6:if(u=xt,f=gn,xt=null,ro(a,i,s),xt=u,gn=f,xt!==null)if(gn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(s.stateNode)}catch(m){Ot(s,i,m)}else try{xt.removeChild(s.stateNode)}catch(m){Ot(s,i,m)}break;case 18:xt!==null&&(gn?(a=xt,ag(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.stateNode),Fc(a)):ag(xt,s.stateNode));break;case 4:u=xt,f=gn,xt=s.stateNode.containerInfo,gn=!0,ro(a,i,s),xt=u,gn=f;break;case 0:case 11:case 14:case 15:ca||ko(2,s,i),ca||ko(4,s,i),ro(a,i,s);break;case 1:ca||(Mi(s,i),u=s.stateNode,typeof u.componentWillUnmount=="function"&&s_(s,i,u)),ro(a,i,s);break;case 21:ro(a,i,s);break;case 22:ca=(u=ca)||s.memoizedState!==null,ro(a,i,s),ca=u;break;default:ro(a,i,s)}}function A_(a,i){if(i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Fc(a)}catch(s){Ot(i,i.return,s)}}function Vy(a){switch(a.tag){case 13:case 19:var i=a.stateNode;return i===null&&(i=a.stateNode=new d_),i;case 22:return a=a.stateNode,i=a._retryCache,i===null&&(i=a._retryCache=new d_),i;default:throw Error(o(435,a.tag))}}function uA(a,i){var s=Vy(a);i.forEach(function(u){var f=tv.bind(null,a,u);s.has(u)||(s.add(u),u.then(f,f))})}function vn(a,i){var s=i.deletions;if(s!==null)for(var u=0;u<s.length;u++){var f=s[u],m=a,N=i,v=N;e:for(;v!==null;){switch(v.tag){case 27:if(jo(v.type)){xt=v.stateNode,gn=!1;break e}break;case 5:xt=v.stateNode,gn=!1;break e;case 3:case 4:xt=v.stateNode.containerInfo,gn=!0;break e}v=v.return}if(xt===null)throw Error(o(160));f_(m,N,f),xt=null,gn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)m_(i,a),i=i.sibling}var Ei=null;function m_(a,i){var s=a.alternate,u=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:vn(i,a),Mn(a),u&4&&(ko(3,a,a.return),pc(3,a),ko(5,a,a.return));break;case 1:vn(i,a),Mn(a),u&512&&(ca||s===null||Mi(s,s.return)),u&64&&so&&(a=a.updateQueue,a!==null&&(u=a.callbacks,u!==null&&(s=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=s===null?u:s.concat(u))));break;case 26:var f=Ei;if(vn(i,a),Mn(a),u&512&&(ca||s===null||Mi(s,s.return)),u&4){var m=s!==null?s.memoizedState:null;if(u=a.memoizedState,s===null)if(u===null)if(a.stateNode===null){e:{u=a.type,s=a.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Xr]||m[Za]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),za(m,u,s),m[Za]=a,Da(m),u=m;break e;case"link":var N=ug("link","href",f).get(u+(s.href||""));if(N){for(var v=0;v<N.length;v++)if(m=N[v],m.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&m.getAttribute("rel")===(s.rel==null?null:s.rel)&&m.getAttribute("title")===(s.title==null?null:s.title)&&m.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){N.splice(v,1);break t}}m=f.createElement(u),za(m,u,s),f.head.appendChild(m);break;case"meta":if(N=ug("meta","content",f).get(u+(s.content||""))){for(v=0;v<N.length;v++)if(m=N[v],m.getAttribute("content")===(s.content==null?null:""+s.content)&&m.getAttribute("name")===(s.name==null?null:s.name)&&m.getAttribute("property")===(s.property==null?null:s.property)&&m.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&m.getAttribute("charset")===(s.charSet==null?null:s.charSet)){N.splice(v,1);break t}}m=f.createElement(u),za(m,u,s),f.head.appendChild(m);break;default:throw Error(o(468,u))}m[Za]=a,Da(m),u=m}a.stateNode=u}else dg(f,a.type,a.stateNode);else a.stateNode=cg(f,u,a.memoizedProps);else m!==u?(m===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):m.count--,u===null?dg(f,a.type,a.stateNode):cg(f,u,a.memoizedProps)):u===null&&a.stateNode!==null&&lA(a,a.memoizedProps,s.memoizedProps)}break;case 27:vn(i,a),Mn(a),u&512&&(ca||s===null||Mi(s,s.return)),s!==null&&u&4&&lA(a,a.memoizedProps,s.memoizedProps);break;case 5:if(vn(i,a),Mn(a),u&512&&(ca||s===null||Mi(s,s.return)),a.flags&32){f=a.stateNode;try{ys(f,"")}catch(re){Ot(a,a.return,re)}}u&4&&a.stateNode!=null&&(f=a.memoizedProps,lA(a,f,s!==null?s.memoizedProps:f)),u&1024&&(cA=!0);break;case 6:if(vn(i,a),Mn(a),u&4){if(a.stateNode===null)throw Error(o(162));u=a.memoizedProps,s=a.stateNode;try{s.nodeValue=u}catch(re){Ot(a,a.return,re)}}break;case 3:if(yd=null,f=Ei,Ei=bd(i.containerInfo),vn(i,a),Ei=f,Mn(a),u&4&&s!==null&&s.memoizedState.isDehydrated)try{Fc(i.containerInfo)}catch(re){Ot(a,a.return,re)}cA&&(cA=!1,R_(a));break;case 4:u=Ei,Ei=bd(a.stateNode.containerInfo),vn(i,a),Mn(a),Ei=u;break;case 12:vn(i,a),Mn(a);break;case 13:vn(i,a),Mn(a),a.child.flags&8192&&a.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(mA=ye()),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,uA(a,u)));break;case 22:f=a.memoizedState!==null;var F=s!==null&&s.memoizedState!==null,oe=so,me=ca;if(so=oe||f,ca=me||F,vn(i,a),ca=me,so=oe,Mn(a),u&8192)e:for(i=a.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(s===null||F||so||ca||xl(a)),s=null,i=a;;){if(i.tag===5||i.tag===26){if(s===null){F=s=i;try{if(m=F.stateNode,f)N=m.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{v=F.stateNode;var Te=F.memoizedProps.style,le=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;v.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(re){Ot(F,F.return,re)}}}else if(i.tag===6){if(s===null){F=i;try{F.stateNode.nodeValue=f?"":F.memoizedProps}catch(re){Ot(F,F.return,re)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===a)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=a.updateQueue,u!==null&&(s=u.retryQueue,s!==null&&(u.retryQueue=null,uA(a,s))));break;case 19:vn(i,a),Mn(a),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,uA(a,u)));break;case 30:break;case 21:break;default:vn(i,a),Mn(a)}}function Mn(a){var i=a.flags;if(i&2){try{for(var s,u=a.return;u!==null;){if(c_(u)){s=u;break}u=u.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var f=s.stateNode,m=sA(a);fd(a,m,f);break;case 5:var N=s.stateNode;s.flags&32&&(ys(N,""),s.flags&=-33);var v=sA(a);fd(a,v,N);break;case 3:case 4:var F=s.stateNode.containerInfo,oe=sA(a);rA(a,oe,F);break;default:throw Error(o(161))}}catch(me){Ot(a,a.return,me)}a.flags&=-3}i&4096&&(a.flags&=-4097)}function R_(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var i=a;R_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),a=a.sibling}}function xo(a,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)h_(a,i.alternate,i),i=i.sibling}function xl(a){for(a=a.child;a!==null;){var i=a;switch(i.tag){case 0:case 11:case 14:case 15:ko(4,i,i.return),xl(i);break;case 1:Mi(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&s_(i,i.return,s),xl(i);break;case 27:Hc(i.stateNode);case 26:case 5:Mi(i,i.return),xl(i);break;case 22:i.memoizedState===null&&xl(i);break;case 30:xl(i);break;default:xl(i)}a=a.sibling}}function Po(a,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=a,m=i,N=m.flags;switch(m.tag){case 0:case 11:case 15:Po(f,m,s),pc(4,m);break;case 1:if(Po(f,m,s),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(oe){Ot(u,u.return,oe)}if(u=m,f=u.updateQueue,f!==null){var v=u.stateNode;try{var F=f.shared.hiddenCallbacks;if(F!==null)for(f.shared.hiddenCallbacks=null,f=0;f<F.length;f++)VS(F[f],v)}catch(oe){Ot(u,u.return,oe)}}s&&N&64&&l_(m),Nc(m,m.return);break;case 27:u_(m);case 26:case 5:Po(f,m,s),s&&u===null&&N&4&&r_(m),Nc(m,m.return);break;case 12:Po(f,m,s);break;case 13:Po(f,m,s),s&&N&4&&A_(f,m);break;case 22:m.memoizedState===null&&Po(f,m,s),Nc(m,m.return);break;case 30:break;default:Po(f,m,s)}i=i.sibling}}function dA(a,i){var s=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==s&&(a!=null&&a.refCount++,s!=null&&cc(s))}function hA(a,i){a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&cc(a))}function Li(a,i,s,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)T_(a,i,s,u),i=i.sibling}function T_(a,i,s,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Li(a,i,s,u),f&2048&&pc(9,i);break;case 1:Li(a,i,s,u);break;case 3:Li(a,i,s,u),f&2048&&(a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&cc(a)));break;case 12:if(f&2048){Li(a,i,s,u),a=i.stateNode;try{var m=i.memoizedProps,N=m.id,v=m.onPostCommit;typeof v=="function"&&v(N,i.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(F){Ot(i,i.return,F)}}else Li(a,i,s,u);break;case 13:Li(a,i,s,u);break;case 23:break;case 22:m=i.stateNode,N=i.alternate,i.memoizedState!==null?m._visibility&2?Li(a,i,s,u):Cc(a,i):m._visibility&2?Li(a,i,s,u):(m._visibility|=2,Xs(a,i,s,u,(i.subtreeFlags&10256)!==0)),f&2048&&dA(N,i);break;case 24:Li(a,i,s,u),f&2048&&hA(i.alternate,i);break;default:Li(a,i,s,u)}}function Xs(a,i,s,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=a,N=i,v=s,F=u,oe=N.flags;switch(N.tag){case 0:case 11:case 15:Xs(m,N,v,F,f),pc(8,N);break;case 23:break;case 22:var me=N.stateNode;N.memoizedState!==null?me._visibility&2?Xs(m,N,v,F,f):Cc(m,N):(me._visibility|=2,Xs(m,N,v,F,f)),f&&oe&2048&&dA(N.alternate,N);break;case 24:Xs(m,N,v,F,f),f&&oe&2048&&hA(N.alternate,N);break;default:Xs(m,N,v,F,f)}i=i.sibling}}function Cc(a,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=a,u=i,f=u.flags;switch(u.tag){case 22:Cc(s,u),f&2048&&dA(u.alternate,u);break;case 24:Cc(s,u),f&2048&&hA(u.alternate,u);break;default:Cc(s,u)}i=i.sibling}}var Oc=8192;function qs(a){if(a.subtreeFlags&Oc)for(a=a.child;a!==null;)S_(a),a=a.sibling}function S_(a){switch(a.tag){case 26:qs(a),a.flags&Oc&&a.memoizedState!==null&&Mv(Ei,a.memoizedState,a.memoizedProps);break;case 5:qs(a);break;case 3:case 4:var i=Ei;Ei=bd(a.stateNode.containerInfo),qs(a),Ei=i;break;case 22:a.memoizedState===null&&(i=a.alternate,i!==null&&i.memoizedState!==null?(i=Oc,Oc=16777216,qs(a),Oc=i):qs(a));break;default:qs(a)}}function I_(a){var i=a.alternate;if(i!==null&&(a=i.child,a!==null)){i.child=null;do i=a.sibling,a.sibling=null,a=i;while(a!==null)}}function bc(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var u=i[s];va=u,g_(u,a)}I_(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)__(a),a=a.sibling}function __(a){switch(a.tag){case 0:case 11:case 15:bc(a),a.flags&2048&&ko(9,a,a.return);break;case 3:bc(a);break;case 12:bc(a);break;case 22:var i=a.stateNode;a.memoizedState!==null&&i._visibility&2&&(a.return===null||a.return.tag!==13)?(i._visibility&=-3,Ad(a)):bc(a);break;default:bc(a)}}function Ad(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var u=i[s];va=u,g_(u,a)}I_(a)}for(a=a.child;a!==null;){switch(i=a,i.tag){case 0:case 11:case 15:ko(8,i,i.return),Ad(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,Ad(i));break;default:Ad(i)}a=a.sibling}}function g_(a,i){for(;va!==null;){var s=va;switch(s.tag){case 0:case 11:case 15:ko(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var u=s.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:cc(s.memoizedState.cache)}if(u=s.child,u!==null)u.return=s,va=u;else e:for(s=a;va!==null;){u=va;var f=u.sibling,m=u.return;if(E_(u),u===s){va=null;break e}if(f!==null){f.return=m,va=f;break e}va=m}}}var Wy={getCacheForType:function(a){var i=Qa(ga),s=i.data.get(a);return s===void 0&&(s=a(),i.data.set(a,s)),s}},Xy=typeof WeakMap=="function"?WeakMap:Map,At=0,vt=null,Je=null,lt=0,mt=0,Ln=null,wo=!1,Zs=!1,EA=!1,co=0,qt=0,Go=0,Pl=0,fA=0,Jn=0,Qs=0,Dc=null,pn=null,AA=!1,mA=0,md=1/0,Rd=null,Bo=null,Fa=0,Fo=null,Js=null,$s=0,RA=0,TA=null,p_=null,yc=0,SA=null;function Hn(){if((At&2)!==0&&lt!==0)return lt&-lt;if(M.T!==null){var a=Bs;return a!==0?a:OA()}return GT()}function N_(){Jn===0&&(Jn=(lt&536870912)===0||Et?Ou():536870912);var a=Qn.current;return a!==null&&(a.flags|=32),Jn}function Un(a,i,s){(a===vt&&(mt===2||mt===9)||a.cancelPendingCommit!==null)&&(er(a,0),zo(a,lt,Jn,!1)),_l(a,s),((At&2)===0||a!==vt)&&(a===vt&&((At&2)===0&&(Pl|=s),qt===4&&zo(a,lt,Jn,!1)),Hi(a))}function C_(a,i,s){if((At&6)!==0)throw Error(o(327));var u=!s&&(i&124)===0&&(i&a.expiredLanes)===0||Il(a,i),f=u?Qy(a,i):gA(a,i,!0),m=u;do{if(f===0){Zs&&!u&&zo(a,i,0,!1);break}else{if(s=a.current.alternate,m&&!qy(s)){f=gA(a,i,!1),m=!1;continue}if(f===2){if(m=i,a.errorRecoveryDisabledLanes&m)var N=0;else N=a.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){i=N;e:{var v=a;f=Dc;var F=v.current.memoizedState.isDehydrated;if(F&&(er(v,N).flags|=256),N=gA(v,N,!1),N!==2){if(EA&&!F){v.errorRecoveryDisabledLanes|=m,Pl|=m,f=4;break e}m=pn,pn=f,m!==null&&(pn===null?pn=m:pn.push.apply(pn,m))}f=N}if(m=!1,f!==2)continue}}if(f===1){er(a,0),zo(a,i,0,!0);break}e:{switch(u=a,m=f,m){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:zo(u,i,Jn,!wo);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(f=mA+300-ye(),10<f)){if(zo(u,i,Jn,!wo),Ss(u,0,!0)!==0)break e;u.timeoutHandle=eg(O_.bind(null,u,s,pn,Rd,AA,i,Jn,Pl,Qs,wo,m,2,-0,0),f);break e}O_(u,s,pn,Rd,AA,i,Jn,Pl,Qs,wo,m,0,-0,0)}}break}while(!0);Hi(a)}function O_(a,i,s,u,f,m,N,v,F,oe,me,Te,le,re){if(a.timeoutHandle=-1,Te=i.subtreeFlags,(Te&8192||(Te&16785408)===16785408)&&(xc={stylesheets:null,count:0,unsuspend:vv},S_(i),Te=Lv(),Te!==null)){a.cancelPendingCommit=Te(H_.bind(null,a,i,m,s,u,f,N,v,F,me,1,le,re)),zo(a,m,N,!oe);return}H_(a,i,m,s,u,f,N,v,F)}function qy(a){for(var i=a;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var u=0;u<s.length;u++){var f=s[u],m=f.getSnapshot;f=f.value;try{if(!Dn(m(),f))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function zo(a,i,s,u){i&=~fA,i&=~Pl,a.suspendedLanes|=i,a.pingedLanes&=~i,u&&(a.warmLanes|=i),u=a.expirationTimes;for(var f=i;0<f;){var m=31-kt(f),N=1<<m;u[m]=-1,f&=~N}s!==0&&bu(a,s,i)}function Td(){return(At&6)===0?(vc(0),!1):!0}function IA(){if(Je!==null){if(mt===0)var a=Je.return;else a=Je,to=Ml=null,Pf(a),Vs=null,Ic=0,a=Je;for(;a!==null;)o_(a.alternate,a),a=a.return;Je=null}}function er(a,i){var s=a.timeoutHandle;s!==-1&&(a.timeoutHandle=-1,Ev(s)),s=a.cancelPendingCommit,s!==null&&(a.cancelPendingCommit=null,s()),IA(),vt=a,Je=s=Ji(a.current,null),lt=i,mt=0,Ln=null,wo=!1,Zs=Il(a,i),EA=!1,Qs=Jn=fA=Pl=Go=qt=0,pn=Dc=null,AA=!1,(i&8)!==0&&(i|=i&32);var u=a.entangledLanes;if(u!==0)for(a=a.entanglements,u&=i;0<u;){var f=31-kt(u),m=1<<f;i|=a[f],u&=~m}return co=i,Bu(),s}function b_(a,i){Ve=null,M.H=od,i===dc||i===qu?(i=YS(),mt=3):i===FS?(i=YS(),mt=4):mt=i===KI?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ln=i,Je===null&&(qt=1,ud(a,Wn(i,a.current)))}function D_(){var a=M.H;return M.H=od,a===null?od:a}function y_(){var a=M.A;return M.A=Wy,a}function _A(){qt=4,wo||(lt&4194048)!==lt&&Qn.current!==null||(Zs=!0),(Go&134217727)===0&&(Pl&134217727)===0||vt===null||zo(vt,lt,Jn,!1)}function gA(a,i,s){var u=At;At|=2;var f=D_(),m=y_();(vt!==a||lt!==i)&&(Rd=null,er(a,i)),i=!1;var N=qt;e:do try{if(mt!==0&&Je!==null){var v=Je,F=Ln;switch(mt){case 8:IA(),N=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(i=!0);var oe=mt;if(mt=0,Ln=null,tr(a,v,F,oe),s&&Zs){N=0;break e}break;default:oe=mt,mt=0,Ln=null,tr(a,v,F,oe)}}Zy(),N=qt;break}catch(me){b_(a,me)}while(!0);return i&&a.shellSuspendCounter++,to=Ml=null,At=u,M.H=f,M.A=m,Je===null&&(vt=null,lt=0,Bu()),N}function Zy(){for(;Je!==null;)v_(Je)}function Qy(a,i){var s=At;At|=2;var u=D_(),f=y_();vt!==a||lt!==i?(Rd=null,md=ye()+500,er(a,i)):Zs=Il(a,i);e:do try{if(mt!==0&&Je!==null){i=Je;var m=Ln;t:switch(mt){case 1:mt=0,Ln=null,tr(a,i,m,1);break;case 2:case 9:if(zS(m)){mt=0,Ln=null,M_(i);break}i=function(){mt!==2&&mt!==9||vt!==a||(mt=7),Hi(a)},m.then(i,i);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:zS(m)?(mt=0,Ln=null,M_(i)):(mt=0,Ln=null,tr(a,i,m,7));break;case 5:var N=null;switch(Je.tag){case 26:N=Je.memoizedState;case 5:case 27:var v=Je;if(!N||hg(N)){mt=0,Ln=null;var F=v.sibling;if(F!==null)Je=F;else{var oe=v.return;oe!==null?(Je=oe,Sd(oe)):Je=null}break t}}mt=0,Ln=null,tr(a,i,m,5);break;case 6:mt=0,Ln=null,tr(a,i,m,6);break;case 8:IA(),qt=6;break e;default:throw Error(o(462))}}Jy();break}catch(me){b_(a,me)}while(!0);return to=Ml=null,M.H=u,M.A=f,At=s,Je!==null?0:(vt=null,lt=0,Bu(),qt)}function Jy(){for(;Je!==null&&!_e();)v_(Je)}function v_(a){var i=n_(a.alternate,a,co);a.memoizedProps=a.pendingProps,i===null?Sd(a):Je=i}function M_(a){var i=a,s=i.alternate;switch(i.tag){case 15:case 0:i=QI(s,i,i.pendingProps,i.type,void 0,lt);break;case 11:i=QI(s,i,i.pendingProps,i.type.render,i.ref,lt);break;case 5:Pf(i);default:o_(s,i),i=Je=LS(i,co),i=n_(s,i,co)}a.memoizedProps=a.pendingProps,i===null?Sd(a):Je=i}function tr(a,i,s,u){to=Ml=null,Pf(i),Vs=null,Ic=0;var f=i.return;try{if(Fy(a,f,i,s,lt)){qt=1,ud(a,Wn(s,a.current)),Je=null;return}}catch(m){if(f!==null)throw Je=f,m;qt=1,ud(a,Wn(s,a.current)),Je=null;return}i.flags&32768?(Et||u===1?a=!0:Zs||(lt&536870912)!==0?a=!1:(wo=a=!0,(u===2||u===9||u===3||u===6)&&(u=Qn.current,u!==null&&u.tag===13&&(u.flags|=16384))),L_(i,a)):Sd(i)}function Sd(a){var i=a;do{if((i.flags&32768)!==0){L_(i,wo);return}a=i.return;var s=jy(i.alternate,i,co);if(s!==null){Je=s;return}if(i=i.sibling,i!==null){Je=i;return}Je=i=a}while(i!==null);qt===0&&(qt=5)}function L_(a,i){do{var s=Yy(a.alternate,a);if(s!==null){s.flags&=32767,Je=s;return}if(s=a.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(a=a.sibling,a!==null)){Je=a;return}Je=a=s}while(a!==null);qt=6,Je=null}function H_(a,i,s,u,f,m,N,v,F){a.cancelPendingCommit=null;do Id();while(Fa!==0);if((At&6)!==0)throw Error(o(327));if(i!==null){if(i===a.current)throw Error(o(177));if(m=i.lanes|i.childLanes,m|=hf,wE(a,s,m,N,v,F),a===vt&&(Je=vt=null,lt=0),Js=i,Fo=a,$s=s,RA=m,TA=f,p_=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,av(Tn,function(){return w_(),null})):(a.callbackNode=null,a.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=M.T,M.T=null,f=K.p,K.p=2,N=At,At|=4;try{Ky(a,i,s)}finally{At=N,K.p=f,M.T=u}}Fa=1,U_(),k_(),x_()}}function U_(){if(Fa===1){Fa=0;var a=Fo,i=Js,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=M.T,M.T=null;var u=K.p;K.p=2;var f=At;At|=4;try{m_(i,a);var m=UA,N=gS(a.containerInfo),v=m.focusedElem,F=m.selectionRange;if(N!==v&&v&&v.ownerDocument&&_S(v.ownerDocument.documentElement,v)){if(F!==null&&sf(v)){var oe=F.start,me=F.end;if(me===void 0&&(me=oe),"selectionStart"in v)v.selectionStart=oe,v.selectionEnd=Math.min(me,v.value.length);else{var Te=v.ownerDocument||document,le=Te&&Te.defaultView||window;if(le.getSelection){var re=le.getSelection(),Pe=v.textContent.length,He=Math.min(F.start,Pe),gt=F.end===void 0?He:Math.min(F.end,Pe);!re.extend&&He>gt&&(N=gt,gt=He,He=N);var J=IS(v,He),V=IS(v,gt);if(J&&V&&(re.rangeCount!==1||re.anchorNode!==J.node||re.anchorOffset!==J.offset||re.focusNode!==V.node||re.focusOffset!==V.offset)){var ae=Te.createRange();ae.setStart(J.node,J.offset),re.removeAllRanges(),He>gt?(re.addRange(ae),re.extend(V.node,V.offset)):(ae.setEnd(V.node,V.offset),re.addRange(ae))}}}}for(Te=[],re=v;re=re.parentNode;)re.nodeType===1&&Te.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<Te.length;v++){var Re=Te[v];Re.element.scrollLeft=Re.left,Re.element.scrollTop=Re.top}}Ld=!!HA,UA=HA=null}finally{At=f,K.p=u,M.T=s}}a.current=i,Fa=2}}function k_(){if(Fa===2){Fa=0;var a=Fo,i=Js,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=M.T,M.T=null;var u=K.p;K.p=2;var f=At;At|=4;try{h_(a,i.alternate,i)}finally{At=f,K.p=u,M.T=s}}Fa=3}}function x_(){if(Fa===4||Fa===3){Fa=0,ge();var a=Fo,i=Js,s=$s,u=p_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Fa=5:(Fa=0,Js=Fo=null,P_(a,a.pendingLanes));var f=a.pendingLanes;if(f===0&&(Bo=null),GE(s),i=i.stateNode,ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(Co,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=M.T,f=K.p,K.p=2,M.T=null;try{for(var m=a.onRecoverableError,N=0;N<u.length;N++){var v=u[N];m(v.value,{componentStack:v.stack})}}finally{M.T=i,K.p=f}}($s&3)!==0&&Id(),Hi(a),f=a.pendingLanes,(s&4194090)!==0&&(f&42)!==0?a===SA?yc++:(yc=0,SA=a):yc=0,vc(0)}}function P_(a,i){(a.pooledCacheLanes&=i)===0&&(i=a.pooledCache,i!=null&&(a.pooledCache=null,cc(i)))}function Id(a){return U_(),k_(),x_(),w_()}function w_(){if(Fa!==5)return!1;var a=Fo,i=RA;RA=0;var s=GE($s),u=M.T,f=K.p;try{K.p=32>s?32:s,M.T=null,s=TA,TA=null;var m=Fo,N=$s;if(Fa=0,Js=Fo=null,$s=0,(At&6)!==0)throw Error(o(331));var v=At;if(At|=4,__(m.current),T_(m,m.current,N,s),At=v,vc(0,!1),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(Co,m)}catch{}return!0}finally{K.p=f,M.T=u,P_(a,i)}}function G_(a,i,s){i=Wn(s,i),i=Qf(a.stateNode,i,2),a=Mo(a,i,2),a!==null&&(_l(a,2),Hi(a))}function Ot(a,i,s){if(a.tag===3)G_(a,a,s);else for(;i!==null;){if(i.tag===3){G_(i,a,s);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Bo===null||!Bo.has(u))){a=Wn(s,a),s=jI(2),u=Mo(i,s,2),u!==null&&(YI(s,u,i,a),_l(u,2),Hi(u));break}}i=i.return}}function pA(a,i,s){var u=a.pingCache;if(u===null){u=a.pingCache=new Xy;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(s)||(EA=!0,f.add(s),a=$y.bind(null,a,i,s),i.then(a,a))}function $y(a,i,s){var u=a.pingCache;u!==null&&u.delete(i),a.pingedLanes|=a.suspendedLanes&s,a.warmLanes&=~s,vt===a&&(lt&s)===s&&(qt===4||qt===3&&(lt&62914560)===lt&&300>ye()-mA?(At&2)===0&&er(a,0):fA|=s,Qs===lt&&(Qs=0)),Hi(a)}function B_(a,i){i===0&&(i=Is()),a=xs(a,i),a!==null&&(_l(a,i),Hi(a))}function ev(a){var i=a.memoizedState,s=0;i!==null&&(s=i.retryLane),B_(a,s)}function tv(a,i){var s=0;switch(a.tag){case 13:var u=a.stateNode,f=a.memoizedState;f!==null&&(s=f.retryLane);break;case 19:u=a.stateNode;break;case 22:u=a.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(i),B_(a,s)}function av(a,i){return Ae(a,i)}var _d=null,ar=null,NA=!1,gd=!1,CA=!1,wl=0;function Hi(a){a!==ar&&a.next===null&&(ar===null?_d=ar=a:ar=ar.next=a),gd=!0,NA||(NA=!0,iv())}function vc(a,i){if(!CA&&gd){CA=!0;do for(var s=!1,u=_d;u!==null;){if(a!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var N=u.suspendedLanes,v=u.pingedLanes;m=(1<<31-kt(42|a)+1)-1,m&=f&~(N&~v),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(s=!0,Y_(u,m))}else m=lt,m=Ss(u,u===vt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Il(u,m)||(s=!0,Y_(u,m));u=u.next}while(s);CA=!1}}function nv(){F_()}function F_(){gd=NA=!1;var a=0;wl!==0&&(hv()&&(a=wl),wl=0);for(var i=ye(),s=null,u=_d;u!==null;){var f=u.next,m=z_(u,i);m===0?(u.next=null,s===null?_d=f:s.next=f,f===null&&(ar=s)):(s=u,(a!==0||(m&3)!==0)&&(gd=!0)),u=f}vc(a)}function z_(a,i){for(var s=a.suspendedLanes,u=a.pingedLanes,f=a.expirationTimes,m=a.pendingLanes&-62914561;0<m;){var N=31-kt(m),v=1<<N,F=f[N];F===-1?((v&s)===0||(v&u)!==0)&&(f[N]=PE(v,i)):F<=i&&(a.expiredLanes|=v),m&=~v}if(i=vt,s=lt,s=Ss(a,a===i?s:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),u=a.callbackNode,s===0||a===i&&(mt===2||mt===9)||a.cancelPendingCommit!==null)return u!==null&&u!==null&&be(u),a.callbackNode=null,a.callbackPriority=0;if((s&3)===0||Il(a,s)){if(i=s&-s,i===a.callbackPriority)return i;switch(u!==null&&be(u),GE(s)){case 2:case 8:s=di;break;case 32:s=Tn;break;case 268435456:s=qi;break;default:s=Tn}return u=j_.bind(null,a),s=Ae(s,u),a.callbackPriority=i,a.callbackNode=s,i}return u!==null&&u!==null&&be(u),a.callbackPriority=2,a.callbackNode=null,2}function j_(a,i){if(Fa!==0&&Fa!==5)return a.callbackNode=null,a.callbackPriority=0,null;var s=a.callbackNode;if(Id()&&a.callbackNode!==s)return null;var u=lt;return u=Ss(a,a===vt?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),u===0?null:(C_(a,u,i),z_(a,ye()),a.callbackNode!=null&&a.callbackNode===s?j_.bind(null,a):null)}function Y_(a,i){if(Id())return null;C_(a,i,!0)}function iv(){fv(function(){(At&6)!==0?Ae(Aa,nv):F_()})}function OA(){return wl===0&&(wl=Ou()),wl}function K_(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Hu(""+a)}function V_(a,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,a.id&&s.setAttribute("form",a.id),i.parentNode.insertBefore(s,i),a=new FormData(a),s.parentNode.removeChild(s),a}function ov(a,i,s,u,f){if(i==="submit"&&s&&s.stateNode===f){var m=K_((f[Sn]||null).action),N=u.submitter;N&&(i=(i=N[Sn]||null)?K_(i.formAction):N.getAttribute("formAction"),i!==null&&(m=i,N=null));var v=new Pu("action","action",null,u,f);a.push({event:v,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(wl!==0){var F=N?V_(f,N):new FormData(f);Vf(s,{pending:!0,data:F,method:f.method,action:m},null,F)}}else typeof m=="function"&&(v.preventDefault(),F=N?V_(f,N):new FormData(f),Vf(s,{pending:!0,data:F,method:f.method,action:m},m,F))},currentTarget:f}]})}}for(var bA=0;bA<df.length;bA++){var DA=df[bA],lv=DA.toLowerCase(),sv=DA[0].toUpperCase()+DA.slice(1);hi(lv,"on"+sv)}hi(CS,"onAnimationEnd"),hi(OS,"onAnimationIteration"),hi(bS,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(Ny,"onTransitionRun"),hi(Cy,"onTransitionStart"),hi(Oy,"onTransitionCancel"),hi(DS,"onTransitionEnd"),Os("onMouseEnter",["mouseout","mouseover"]),Os("onMouseLeave",["mouseout","mouseover"]),Os("onPointerEnter",["pointerout","pointerover"]),Os("onPointerLeave",["pointerout","pointerover"]),gl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gl("onBeforeInput",["compositionend","keypress","textInput","paste"]),gl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mc));function W_(a,i){i=(i&4)!==0;for(var s=0;s<a.length;s++){var u=a[s],f=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var N=u.length-1;0<=N;N--){var v=u[N],F=v.instance,oe=v.currentTarget;if(v=v.listener,F!==m&&f.isPropagationStopped())break e;m=v,f.currentTarget=oe;try{m(f)}catch(me){cd(me)}f.currentTarget=null,m=F}else for(N=0;N<u.length;N++){if(v=u[N],F=v.instance,oe=v.currentTarget,v=v.listener,F!==m&&f.isPropagationStopped())break e;m=v,f.currentTarget=oe;try{m(f)}catch(me){cd(me)}f.currentTarget=null,m=F}}}}function $e(a,i){var s=i[BE];s===void 0&&(s=i[BE]=new Set);var u=a+"__bubble";s.has(u)||(X_(i,a,2,!1),s.add(u))}function yA(a,i,s){var u=0;i&&(u|=4),X_(s,a,u,i)}var pd="_reactListening"+Math.random().toString(36).slice(2);function vA(a){if(!a[pd]){a[pd]=!0,FT.forEach(function(s){s!=="selectionchange"&&(rv.has(s)||yA(s,!1,a),yA(s,!0,a))});var i=a.nodeType===9?a:a.ownerDocument;i===null||i[pd]||(i[pd]=!0,yA("selectionchange",!1,i))}}function X_(a,i,s,u){switch(Tg(i)){case 2:var f=kv;break;case 8:f=xv;break;default:f=YA}s=f.bind(null,i,s,a),f=void 0,!QE||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?a.addEventListener(i,s,{capture:!0,passive:f}):a.addEventListener(i,s,!0):f!==void 0?a.addEventListener(i,s,{passive:f}):a.addEventListener(i,s,!1)}function MA(a,i,s,u,f){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var N=u.tag;if(N===3||N===4){var v=u.stateNode.containerInfo;if(v===f)break;if(N===4)for(N=u.return;N!==null;){var F=N.tag;if((F===3||F===4)&&N.stateNode.containerInfo===f)return;N=N.return}for(;v!==null;){if(N=ps(v),N===null)return;if(F=N.tag,F===5||F===6||F===26||F===27){u=m=N;continue e}v=v.parentNode}}u=u.return}tS(function(){var oe=m,me=qE(s),Te=[];e:{var le=yS.get(a);if(le!==void 0){var re=Pu,Pe=a;switch(a){case"keypress":if(ku(s)===0)break e;case"keydown":case"keyup":re=ay;break;case"focusin":Pe="focus",re=tf;break;case"focusout":Pe="blur",re=tf;break;case"beforeblur":case"afterblur":re=tf;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=iS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=YD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=oy;break;case CS:case OS:case bS:re=WD;break;case DS:re=sy;break;case"scroll":case"scrollend":re=zD;break;case"wheel":re=cy;break;case"copy":case"cut":case"paste":re=qD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=lS;break;case"toggle":case"beforetoggle":re=dy}var He=(i&4)!==0,gt=!He&&(a==="scroll"||a==="scrollend"),J=He?le!==null?le+"Capture":null:le;He=[];for(var V=oe,ae;V!==null;){var Re=V;if(ae=Re.stateNode,Re=Re.tag,Re!==5&&Re!==26&&Re!==27||ae===null||J===null||(Re=Zr(V,J),Re!=null&&He.push(Lc(V,Re,ae))),gt)break;V=V.return}0<He.length&&(le=new re(le,Pe,null,s,me),Te.push({event:le,listeners:He}))}}if((i&7)===0){e:{if(le=a==="mouseover"||a==="pointerover",re=a==="mouseout"||a==="pointerout",le&&s!==XE&&(Pe=s.relatedTarget||s.fromElement)&&(ps(Pe)||Pe[gs]))break e;if((re||le)&&(le=me.window===me?me:(le=me.ownerDocument)?le.defaultView||le.parentWindow:window,re?(Pe=s.relatedTarget||s.toElement,re=oe,Pe=Pe?ps(Pe):null,Pe!==null&&(gt=r(Pe),He=Pe.tag,Pe!==gt||He!==5&&He!==27&&He!==6)&&(Pe=null)):(re=null,Pe=oe),re!==Pe)){if(He=iS,Re="onMouseLeave",J="onMouseEnter",V="mouse",(a==="pointerout"||a==="pointerover")&&(He=lS,Re="onPointerLeave",J="onPointerEnter",V="pointer"),gt=re==null?le:qr(re),ae=Pe==null?le:qr(Pe),le=new He(Re,V+"leave",re,s,me),le.target=gt,le.relatedTarget=ae,Re=null,ps(me)===oe&&(He=new He(J,V+"enter",Pe,s,me),He.target=ae,He.relatedTarget=gt,Re=He),gt=Re,re&&Pe)t:{for(He=re,J=Pe,V=0,ae=He;ae;ae=nr(ae))V++;for(ae=0,Re=J;Re;Re=nr(Re))ae++;for(;0<V-ae;)He=nr(He),V--;for(;0<ae-V;)J=nr(J),ae--;for(;V--;){if(He===J||J!==null&&He===J.alternate)break t;He=nr(He),J=nr(J)}He=null}else He=null;re!==null&&q_(Te,le,re,He,!1),Pe!==null&&gt!==null&&q_(Te,gt,Pe,He,!0)}}e:{if(le=oe?qr(oe):window,re=le.nodeName&&le.nodeName.toLowerCase(),re==="select"||re==="input"&&le.type==="file")var Ce=fS;else if(hS(le))if(AS)Ce=_y;else{Ce=Sy;var Xe=Ty}else re=le.nodeName,!re||re.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?oe&&WE(oe.elementType)&&(Ce=fS):Ce=Iy;if(Ce&&(Ce=Ce(a,oe))){ES(Te,Ce,s,me);break e}Xe&&Xe(a,le,oe),a==="focusout"&&oe&&le.type==="number"&&oe.memoizedProps.value!=null&&VE(le,"number",le.value)}switch(Xe=oe?qr(oe):window,a){case"focusin":(hS(Xe)||Xe.contentEditable==="true")&&(Hs=Xe,rf=oe,ic=null);break;case"focusout":ic=rf=Hs=null;break;case"mousedown":cf=!0;break;case"contextmenu":case"mouseup":case"dragend":cf=!1,pS(Te,s,me);break;case"selectionchange":if(py)break;case"keydown":case"keyup":pS(Te,s,me)}var ve;if(nf)e:{switch(a){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Ls?uS(a,s)&&(ke="onCompositionEnd"):a==="keydown"&&s.keyCode===229&&(ke="onCompositionStart");ke&&(sS&&s.locale!=="ko"&&(Ls||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Ls&&(ve=aS()):(bo=me,JE="value"in bo?bo.value:bo.textContent,Ls=!0)),Xe=Nd(oe,ke),0<Xe.length&&(ke=new oS(ke,a,null,s,me),Te.push({event:ke,listeners:Xe}),ve?ke.data=ve:(ve=dS(s),ve!==null&&(ke.data=ve)))),(ve=Ey?fy(a,s):Ay(a,s))&&(ke=Nd(oe,"onBeforeInput"),0<ke.length&&(Xe=new oS("onBeforeInput","beforeinput",null,s,me),Te.push({event:Xe,listeners:ke}),Xe.data=ve)),ov(Te,a,oe,s,me)}W_(Te,i)})}function Lc(a,i,s){return{instance:a,listener:i,currentTarget:s}}function Nd(a,i){for(var s=i+"Capture",u=[];a!==null;){var f=a,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Zr(a,s),f!=null&&u.unshift(Lc(a,f,m)),f=Zr(a,i),f!=null&&u.push(Lc(a,f,m))),a.tag===3)return u;a=a.return}return[]}function nr(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function q_(a,i,s,u,f){for(var m=i._reactName,N=[];s!==null&&s!==u;){var v=s,F=v.alternate,oe=v.stateNode;if(v=v.tag,F!==null&&F===u)break;v!==5&&v!==26&&v!==27||oe===null||(F=oe,f?(oe=Zr(s,m),oe!=null&&N.unshift(Lc(s,oe,F))):f||(oe=Zr(s,m),oe!=null&&N.push(Lc(s,oe,F)))),s=s.return}N.length!==0&&a.push({event:i,listeners:N})}var cv=/\r\n?/g,uv=/\u0000|\uFFFD/g;function Z_(a){return(typeof a=="string"?a:""+a).replace(cv,`
`).replace(uv,"")}function Q_(a,i){return i=Z_(i),Z_(a)===i}function Cd(){}function _t(a,i,s,u,f,m){switch(s){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||ys(a,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&ys(a,""+u);break;case"className":vu(a,"class",u);break;case"tabIndex":vu(a,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":vu(a,s,u);break;case"style":$T(a,u,m);break;case"data":if(i!=="object"){vu(a,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||s!=="href")){a.removeAttribute(s);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){a.removeAttribute(s);break}u=Hu(""+u),a.setAttribute(s,u);break;case"action":case"formAction":if(typeof u=="function"){a.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(s==="formAction"?(i!=="input"&&_t(a,i,"name",f.name,f,null),_t(a,i,"formEncType",f.formEncType,f,null),_t(a,i,"formMethod",f.formMethod,f,null),_t(a,i,"formTarget",f.formTarget,f,null)):(_t(a,i,"encType",f.encType,f,null),_t(a,i,"method",f.method,f,null),_t(a,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){a.removeAttribute(s);break}u=Hu(""+u),a.setAttribute(s,u);break;case"onClick":u!=null&&(a.onclick=Cd);break;case"onScroll":u!=null&&$e("scroll",a);break;case"onScrollEnd":u!=null&&$e("scrollend",a);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(s=u.__html,s!=null){if(f.children!=null)throw Error(o(60));a.innerHTML=s}}break;case"multiple":a.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":a.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){a.removeAttribute("xlink:href");break}s=Hu(""+u),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(s,""+u):a.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(s,""):a.removeAttribute(s);break;case"capture":case"download":u===!0?a.setAttribute(s,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(s,u):a.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?a.setAttribute(s,u):a.removeAttribute(s);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?a.removeAttribute(s):a.setAttribute(s,u);break;case"popover":$e("beforetoggle",a),$e("toggle",a),yu(a,"popover",u);break;case"xlinkActuate":Zi(a,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Zi(a,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Zi(a,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Zi(a,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Zi(a,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Zi(a,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Zi(a,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Zi(a,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Zi(a,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":yu(a,"is",u);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=BD.get(s)||s,yu(a,s,u))}}function LA(a,i,s,u,f,m){switch(s){case"style":$T(a,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(s=u.__html,s!=null){if(f.children!=null)throw Error(o(60));a.innerHTML=s}}break;case"children":typeof u=="string"?ys(a,u):(typeof u=="number"||typeof u=="bigint")&&ys(a,""+u);break;case"onScroll":u!=null&&$e("scroll",a);break;case"onScrollEnd":u!=null&&$e("scrollend",a);break;case"onClick":u!=null&&(a.onclick=Cd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zT.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),i=s.slice(2,f?s.length-7:void 0),m=a[Sn]||null,m=m!=null?m[s]:null,typeof m=="function"&&a.removeEventListener(i,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(s in a?a[s]=null:a.hasAttribute(s)&&a.removeAttribute(s)),a.addEventListener(i,u,f);break e}s in a?a[s]=u:u===!0?a.setAttribute(s,""):yu(a,s,u)}}}function za(a,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",a),$e("load",a);var u=!1,f=!1,m;for(m in s)if(s.hasOwnProperty(m)){var N=s[m];if(N!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:_t(a,i,m,N,s,null)}}f&&_t(a,i,"srcSet",s.srcSet,s,null),u&&_t(a,i,"src",s.src,s,null);return;case"input":$e("invalid",a);var v=m=N=f=null,F=null,oe=null;for(u in s)if(s.hasOwnProperty(u)){var me=s[u];if(me!=null)switch(u){case"name":f=me;break;case"type":N=me;break;case"checked":F=me;break;case"defaultChecked":oe=me;break;case"value":m=me;break;case"defaultValue":v=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(o(137,i));break;default:_t(a,i,u,me,s,null)}}qT(a,m,v,F,oe,N,f,!1),Mu(a);return;case"select":$e("invalid",a),u=N=m=null;for(f in s)if(s.hasOwnProperty(f)&&(v=s[f],v!=null))switch(f){case"value":m=v;break;case"defaultValue":N=v;break;case"multiple":u=v;default:_t(a,i,f,v,s,null)}i=m,s=N,a.multiple=!!u,i!=null?Ds(a,!!u,i,!1):s!=null&&Ds(a,!!u,s,!0);return;case"textarea":$e("invalid",a),m=f=u=null;for(N in s)if(s.hasOwnProperty(N)&&(v=s[N],v!=null))switch(N){case"value":u=v;break;case"defaultValue":f=v;break;case"children":m=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(o(91));break;default:_t(a,i,N,v,s,null)}QT(a,u,f,m),Mu(a);return;case"option":for(F in s)if(s.hasOwnProperty(F)&&(u=s[F],u!=null))switch(F){case"selected":a.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:_t(a,i,F,u,s,null)}return;case"dialog":$e("beforetoggle",a),$e("toggle",a),$e("cancel",a),$e("close",a);break;case"iframe":case"object":$e("load",a);break;case"video":case"audio":for(u=0;u<Mc.length;u++)$e(Mc[u],a);break;case"image":$e("error",a),$e("load",a);break;case"details":$e("toggle",a);break;case"embed":case"source":case"link":$e("error",a),$e("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in s)if(s.hasOwnProperty(oe)&&(u=s[oe],u!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:_t(a,i,oe,u,s,null)}return;default:if(WE(i)){for(me in s)s.hasOwnProperty(me)&&(u=s[me],u!==void 0&&LA(a,i,me,u,s,void 0));return}}for(v in s)s.hasOwnProperty(v)&&(u=s[v],u!=null&&_t(a,i,v,u,s,null))}function dv(a,i,s,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,N=null,v=null,F=null,oe=null,me=null;for(re in s){var Te=s[re];if(s.hasOwnProperty(re)&&Te!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":F=Te;default:u.hasOwnProperty(re)||_t(a,i,re,null,u,Te)}}for(var le in u){var re=u[le];if(Te=s[le],u.hasOwnProperty(le)&&(re!=null||Te!=null))switch(le){case"type":m=re;break;case"name":f=re;break;case"checked":oe=re;break;case"defaultChecked":me=re;break;case"value":N=re;break;case"defaultValue":v=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(o(137,i));break;default:re!==Te&&_t(a,i,le,re,u,Te)}}KE(a,N,v,F,oe,me,m,f);return;case"select":re=N=v=le=null;for(m in s)if(F=s[m],s.hasOwnProperty(m)&&F!=null)switch(m){case"value":break;case"multiple":re=F;default:u.hasOwnProperty(m)||_t(a,i,m,null,u,F)}for(f in u)if(m=u[f],F=s[f],u.hasOwnProperty(f)&&(m!=null||F!=null))switch(f){case"value":le=m;break;case"defaultValue":v=m;break;case"multiple":N=m;default:m!==F&&_t(a,i,f,m,u,F)}i=v,s=N,u=re,le!=null?Ds(a,!!s,le,!1):!!u!=!!s&&(i!=null?Ds(a,!!s,i,!0):Ds(a,!!s,s?[]:"",!1));return;case"textarea":re=le=null;for(v in s)if(f=s[v],s.hasOwnProperty(v)&&f!=null&&!u.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:_t(a,i,v,null,u,f)}for(N in u)if(f=u[N],m=s[N],u.hasOwnProperty(N)&&(f!=null||m!=null))switch(N){case"value":le=f;break;case"defaultValue":re=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(o(91));break;default:f!==m&&_t(a,i,N,f,u,m)}ZT(a,le,re);return;case"option":for(var Pe in s)if(le=s[Pe],s.hasOwnProperty(Pe)&&le!=null&&!u.hasOwnProperty(Pe))switch(Pe){case"selected":a.selected=!1;break;default:_t(a,i,Pe,null,u,le)}for(F in u)if(le=u[F],re=s[F],u.hasOwnProperty(F)&&le!==re&&(le!=null||re!=null))switch(F){case"selected":a.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:_t(a,i,F,le,u,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in s)le=s[He],s.hasOwnProperty(He)&&le!=null&&!u.hasOwnProperty(He)&&_t(a,i,He,null,u,le);for(oe in u)if(le=u[oe],re=s[oe],u.hasOwnProperty(oe)&&le!==re&&(le!=null||re!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(o(137,i));break;default:_t(a,i,oe,le,u,re)}return;default:if(WE(i)){for(var gt in s)le=s[gt],s.hasOwnProperty(gt)&&le!==void 0&&!u.hasOwnProperty(gt)&&LA(a,i,gt,void 0,u,le);for(me in u)le=u[me],re=s[me],!u.hasOwnProperty(me)||le===re||le===void 0&&re===void 0||LA(a,i,me,le,u,re);return}}for(var J in s)le=s[J],s.hasOwnProperty(J)&&le!=null&&!u.hasOwnProperty(J)&&_t(a,i,J,null,u,le);for(Te in u)le=u[Te],re=s[Te],!u.hasOwnProperty(Te)||le===re||le==null&&re==null||_t(a,i,Te,le,u,re)}var HA=null,UA=null;function Od(a){return a.nodeType===9?a:a.ownerDocument}function J_(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $_(a,i){if(a===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&i==="foreignObject"?0:a}function kA(a,i){return a==="textarea"||a==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var xA=null;function hv(){var a=window.event;return a&&a.type==="popstate"?a===xA?!1:(xA=a,!0):(xA=null,!1)}var eg=typeof setTimeout=="function"?setTimeout:void 0,Ev=typeof clearTimeout=="function"?clearTimeout:void 0,tg=typeof Promise=="function"?Promise:void 0,fv=typeof queueMicrotask=="function"?queueMicrotask:typeof tg<"u"?function(a){return tg.resolve(null).then(a).catch(Av)}:eg;function Av(a){setTimeout(function(){throw a})}function jo(a){return a==="head"}function ag(a,i){var s=i,u=0,f=0;do{var m=s.nextSibling;if(a.removeChild(s),m&&m.nodeType===8)if(s=m.data,s==="/$"){if(0<u&&8>u){s=u;var N=a.ownerDocument;if(s&1&&Hc(N.documentElement),s&2&&Hc(N.body),s&4)for(s=N.head,Hc(s),N=s.firstChild;N;){var v=N.nextSibling,F=N.nodeName;N[Xr]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&N.rel.toLowerCase()==="stylesheet"||s.removeChild(N),N=v}}if(f===0){a.removeChild(m),Fc(i);return}f--}else s==="$"||s==="$?"||s==="$!"?f++:u=s.charCodeAt(0)-48;else u=0;s=m}while(s);Fc(i)}function PA(a){var i=a.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":PA(s),FE(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}a.removeChild(s)}}function mv(a,i,s,u){for(;a.nodeType===1;){var f=s;if(a.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(u){if(!a[Xr])switch(i){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(m=a.getAttribute("rel"),m==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(m!==f.rel||a.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||a.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||a.getAttribute("title")!==(f.title==null?null:f.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(m=a.getAttribute("src"),(m!==(f.src==null?null:f.src)||a.getAttribute("type")!==(f.type==null?null:f.type)||a.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(i==="input"&&a.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&a.getAttribute("name")===m)return a}else return a;if(a=fi(a.nextSibling),a===null)break}return null}function Rv(a,i,s){if(i==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!s||(a=fi(a.nextSibling),a===null))return null;return a}function wA(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function Tv(a,i){var s=a.ownerDocument;if(a.data!=="$?"||s.readyState==="complete")i();else{var u=function(){i(),s.removeEventListener("DOMContentLoaded",u)};s.addEventListener("DOMContentLoaded",u),a._reactRetry=u}}function fi(a){for(;a!=null;a=a.nextSibling){var i=a.nodeType;if(i===1||i===3)break;if(i===8){if(i=a.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return a}var GA=null;function ng(a){a=a.previousSibling;for(var i=0;a;){if(a.nodeType===8){var s=a.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return a;i--}else s==="/$"&&i++}a=a.previousSibling}return null}function ig(a,i,s){switch(i=Od(s),a){case"html":if(a=i.documentElement,!a)throw Error(o(452));return a;case"head":if(a=i.head,!a)throw Error(o(453));return a;case"body":if(a=i.body,!a)throw Error(o(454));return a;default:throw Error(o(451))}}function Hc(a){for(var i=a.attributes;i.length;)a.removeAttributeNode(i[0]);FE(a)}var $n=new Map,og=new Set;function bd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var uo=K.d;K.d={f:Sv,r:Iv,D:_v,C:gv,L:pv,m:Nv,X:Ov,S:Cv,M:bv};function Sv(){var a=uo.f(),i=Td();return a||i}function Iv(a){var i=Ns(a);i!==null&&i.tag===5&&i.type==="form"?CI(i):uo.r(a)}var ir=typeof document>"u"?null:document;function lg(a,i,s){var u=ir;if(u&&typeof i=="string"&&i){var f=Vn(i);f='link[rel="'+a+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),og.has(f)||(og.add(f),a={rel:a,crossOrigin:s,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),za(i,"link",a),Da(i),u.head.appendChild(i)))}}function _v(a){uo.D(a),lg("dns-prefetch",a,null)}function gv(a,i){uo.C(a,i),lg("preconnect",a,i)}function pv(a,i,s){uo.L(a,i,s);var u=ir;if(u&&a&&i){var f='link[rel="preload"][as="'+Vn(i)+'"]';i==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+Vn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+Vn(s.imageSizes)+'"]')):f+='[href="'+Vn(a)+'"]';var m=f;switch(i){case"style":m=or(a);break;case"script":m=lr(a)}$n.has(m)||(a=R({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:a,as:i},s),$n.set(m,a),u.querySelector(f)!==null||i==="style"&&u.querySelector(Uc(m))||i==="script"&&u.querySelector(kc(m))||(i=u.createElement("link"),za(i,"link",a),Da(i),u.head.appendChild(i)))}}function Nv(a,i){uo.m(a,i);var s=ir;if(s&&a){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Vn(u)+'"][href="'+Vn(a)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=lr(a)}if(!$n.has(m)&&(a=R({rel:"modulepreload",href:a},i),$n.set(m,a),s.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(kc(m)))return}u=s.createElement("link"),za(u,"link",a),Da(u),s.head.appendChild(u)}}}function Cv(a,i,s){uo.S(a,i,s);var u=ir;if(u&&a){var f=Cs(u).hoistableStyles,m=or(a);i=i||"default";var N=f.get(m);if(!N){var v={loading:0,preload:null};if(N=u.querySelector(Uc(m)))v.loading=5;else{a=R({rel:"stylesheet",href:a,"data-precedence":i},s),(s=$n.get(m))&&BA(a,s);var F=N=u.createElement("link");Da(F),za(F,"link",a),F._p=new Promise(function(oe,me){F.onload=oe,F.onerror=me}),F.addEventListener("load",function(){v.loading|=1}),F.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Dd(N,i,u)}N={type:"stylesheet",instance:N,count:1,state:v},f.set(m,N)}}}function Ov(a,i){uo.X(a,i);var s=ir;if(s&&a){var u=Cs(s).hoistableScripts,f=lr(a),m=u.get(f);m||(m=s.querySelector(kc(f)),m||(a=R({src:a,async:!0},i),(i=$n.get(f))&&FA(a,i),m=s.createElement("script"),Da(m),za(m,"link",a),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function bv(a,i){uo.M(a,i);var s=ir;if(s&&a){var u=Cs(s).hoistableScripts,f=lr(a),m=u.get(f);m||(m=s.querySelector(kc(f)),m||(a=R({src:a,async:!0,type:"module"},i),(i=$n.get(f))&&FA(a,i),m=s.createElement("script"),Da(m),za(m,"link",a),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function sg(a,i,s,u){var f=(f=P.current)?bd(f):null;if(!f)throw Error(o(446));switch(a){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=or(s.href),s=Cs(f).hoistableStyles,u=s.get(i),u||(u={type:"style",instance:null,count:0,state:null},s.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){a=or(s.href);var m=Cs(f).hoistableStyles,N=m.get(a);if(N||(f=f.ownerDocument||f,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(a,N),(m=f.querySelector(Uc(a)))&&!m._p&&(N.instance=m,N.state.loading=5),$n.has(a)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},$n.set(a,s),m||Dv(f,a,s,N.state))),i&&u===null)throw Error(o(528,""));return N}if(i&&u!==null)throw Error(o(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=lr(s),s=Cs(f).hoistableScripts,u=s.get(i),u||(u={type:"script",instance:null,count:0,state:null},s.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,a))}}function or(a){return'href="'+Vn(a)+'"'}function Uc(a){return'link[rel="stylesheet"]['+a+"]"}function rg(a){return R({},a,{"data-precedence":a.precedence,precedence:null})}function Dv(a,i,s,u){a.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=a.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),za(i,"link",s),Da(i),a.head.appendChild(i))}function lr(a){return'[src="'+Vn(a)+'"]'}function kc(a){return"script[async]"+a}function cg(a,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var u=a.querySelector('style[data-href~="'+Vn(s.href)+'"]');if(u)return i.instance=u,Da(u),u;var f=R({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return u=(a.ownerDocument||a).createElement("style"),Da(u),za(u,"style",f),Dd(u,s.precedence,a),i.instance=u;case"stylesheet":f=or(s.href);var m=a.querySelector(Uc(f));if(m)return i.state.loading|=4,i.instance=m,Da(m),m;u=rg(s),(f=$n.get(f))&&BA(u,f),m=(a.ownerDocument||a).createElement("link"),Da(m);var N=m;return N._p=new Promise(function(v,F){N.onload=v,N.onerror=F}),za(m,"link",u),i.state.loading|=4,Dd(m,s.precedence,a),i.instance=m;case"script":return m=lr(s.src),(f=a.querySelector(kc(m)))?(i.instance=f,Da(f),f):(u=s,(f=$n.get(m))&&(u=R({},s),FA(u,f)),a=a.ownerDocument||a,f=a.createElement("script"),Da(f),za(f,"link",u),a.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(o(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Dd(u,s.precedence,a));return i.instance}function Dd(a,i,s){for(var u=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,N=0;N<u.length;N++){var v=u[N];if(v.dataset.precedence===i)m=v;else if(m!==f)break}m?m.parentNode.insertBefore(a,m.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(a,i.firstChild))}function BA(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.title==null&&(a.title=i.title)}function FA(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.integrity==null&&(a.integrity=i.integrity)}var yd=null;function ug(a,i,s){if(yd===null){var u=new Map,f=yd=new Map;f.set(s,u)}else f=yd,u=f.get(s),u||(u=new Map,f.set(s,u));if(u.has(a))return u;for(u.set(a,null),s=s.getElementsByTagName(a),f=0;f<s.length;f++){var m=s[f];if(!(m[Xr]||m[Za]||a==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var N=m.getAttribute(i)||"";N=a+N;var v=u.get(N);v?v.push(m):u.set(N,[m])}}return u}function dg(a,i,s){a=a.ownerDocument||a,a.head.insertBefore(s,i==="title"?a.querySelector("head > title"):null)}function yv(a,i,s){if(s===1||i.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return a=i.disabled,typeof i.precedence=="string"&&a==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function hg(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var xc=null;function vv(){}function Mv(a,i,s){if(xc===null)throw Error(o(475));var u=xc;if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=or(s.href),m=a.querySelector(Uc(f));if(m){a=m._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(u.count++,u=vd.bind(u),a.then(u,u)),i.state.loading|=4,i.instance=m,Da(m);return}m=a.ownerDocument||a,s=rg(s),(f=$n.get(f))&&BA(s,f),m=m.createElement("link"),Da(m);var N=m;N._p=new Promise(function(v,F){N.onload=v,N.onerror=F}),za(m,"link",s),i.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=vd.bind(u),a.addEventListener("load",i),a.addEventListener("error",i))}}function Lv(){if(xc===null)throw Error(o(475));var a=xc;return a.stylesheets&&a.count===0&&zA(a,a.stylesheets),0<a.count?function(i){var s=setTimeout(function(){if(a.stylesheets&&zA(a,a.stylesheets),a.unsuspend){var u=a.unsuspend;a.unsuspend=null,u()}},6e4);return a.unsuspend=i,function(){a.unsuspend=null,clearTimeout(s)}}:null}function vd(){if(this.count--,this.count===0){if(this.stylesheets)zA(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Md=null;function zA(a,i){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Md=new Map,i.forEach(Hv,a),Md=null,vd.call(a))}function Hv(a,i){if(!(i.state.loading&4)){var s=Md.get(a);if(s)var u=s.get(null);else{s=new Map,Md.set(a,s);for(var f=a.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var N=f[m];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(s.set(N.dataset.precedence,N),u=N)}u&&s.set(null,u)}f=i.instance,N=f.getAttribute("data-precedence"),m=s.get(N)||u,m===u&&s.set(null,f),s.set(N,f),this.count++,u=vd.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(f,a.firstChild)),i.state.loading|=4}}var Pc={$$typeof:H,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function Uv(a,i,s,u,f,m,N,v){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_s(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_s(0),this.hiddenUpdates=_s(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function Eg(a,i,s,u,f,m,N,v,F,oe,me,Te){return a=new Uv(a,i,s,N,v,F,oe,Te),i=1,m===!0&&(i|=24),m=yn(3,null,null,i),a.current=m,m.stateNode=a,i=pf(),i.refCount++,a.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:s,cache:i},bf(m),a}function fg(a){return a?(a=Ps,a):Ps}function Ag(a,i,s,u,f,m){f=fg(f),u.context===null?u.context=f:u.pendingContext=f,u=vo(i),u.payload={element:s},m=m===void 0?null:m,m!==null&&(u.callback=m),s=Mo(a,u,i),s!==null&&(Un(s,a,i),Ec(s,a,i))}function mg(a,i){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var s=a.retryLane;a.retryLane=s!==0&&s<i?s:i}}function jA(a,i){mg(a,i),(a=a.alternate)&&mg(a,i)}function Rg(a){if(a.tag===13){var i=xs(a,67108864);i!==null&&Un(i,a,67108864),jA(a,67108864)}}var Ld=!0;function kv(a,i,s,u){var f=M.T;M.T=null;var m=K.p;try{K.p=2,YA(a,i,s,u)}finally{K.p=m,M.T=f}}function xv(a,i,s,u){var f=M.T;M.T=null;var m=K.p;try{K.p=8,YA(a,i,s,u)}finally{K.p=m,M.T=f}}function YA(a,i,s,u){if(Ld){var f=KA(u);if(f===null)MA(a,i,u,Hd,s),Sg(a,u);else if(wv(f,a,i,s,u))u.stopPropagation();else if(Sg(a,u),i&4&&-1<Pv.indexOf(a)){for(;f!==null;){var m=Ns(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var N=Di(m.pendingLanes);if(N!==0){var v=m;for(v.pendingLanes|=2,v.entangledLanes|=2;N;){var F=1<<31-kt(N);v.entanglements[1]|=F,N&=~F}Hi(m),(At&6)===0&&(md=ye()+500,vc(0))}}break;case 13:v=xs(m,2),v!==null&&Un(v,m,2),Td(),jA(m,2)}if(m=KA(u),m===null&&MA(a,i,u,Hd,s),m===f)break;f=m}f!==null&&u.stopPropagation()}else MA(a,i,u,null,s)}}function KA(a){return a=qE(a),VA(a)}var Hd=null;function VA(a){if(Hd=null,a=ps(a),a!==null){var i=r(a);if(i===null)a=null;else{var s=i.tag;if(s===13){if(a=d(i),a!==null)return a;a=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Hd=a,null}function Tg(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fe()){case Aa:return 2;case di:return 8;case Tn:case Xi:return 32;case qi:return 268435456;default:return 32}default:return 32}}var WA=!1,Yo=null,Ko=null,Vo=null,wc=new Map,Gc=new Map,Wo=[],Pv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sg(a,i){switch(a){case"focusin":case"focusout":Yo=null;break;case"dragenter":case"dragleave":Ko=null;break;case"mouseover":case"mouseout":Vo=null;break;case"pointerover":case"pointerout":wc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(i.pointerId)}}function Bc(a,i,s,u,f,m){return a===null||a.nativeEvent!==m?(a={blockedOn:i,domEventName:s,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},i!==null&&(i=Ns(i),i!==null&&Rg(i)),a):(a.eventSystemFlags|=u,i=a.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),a)}function wv(a,i,s,u,f){switch(i){case"focusin":return Yo=Bc(Yo,a,i,s,u,f),!0;case"dragenter":return Ko=Bc(Ko,a,i,s,u,f),!0;case"mouseover":return Vo=Bc(Vo,a,i,s,u,f),!0;case"pointerover":var m=f.pointerId;return wc.set(m,Bc(wc.get(m)||null,a,i,s,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Gc.set(m,Bc(Gc.get(m)||null,a,i,s,u,f)),!0}return!1}function Ig(a){var i=ps(a.target);if(i!==null){var s=r(i);if(s!==null){if(i=s.tag,i===13){if(i=d(s),i!==null){a.blockedOn=i,MD(a.priority,function(){if(s.tag===13){var u=Hn();u=Wr(u);var f=xs(s,u);f!==null&&Un(f,s,u),jA(s,u)}});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){a.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ud(a){if(a.blockedOn!==null)return!1;for(var i=a.targetContainers;0<i.length;){var s=KA(a.nativeEvent);if(s===null){s=a.nativeEvent;var u=new s.constructor(s.type,s);XE=u,s.target.dispatchEvent(u),XE=null}else return i=Ns(s),i!==null&&Rg(i),a.blockedOn=s,!1;i.shift()}return!0}function _g(a,i,s){Ud(a)&&s.delete(i)}function Gv(){WA=!1,Yo!==null&&Ud(Yo)&&(Yo=null),Ko!==null&&Ud(Ko)&&(Ko=null),Vo!==null&&Ud(Vo)&&(Vo=null),wc.forEach(_g),Gc.forEach(_g)}function kd(a,i){a.blockedOn===i&&(a.blockedOn=null,WA||(WA=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Gv)))}var xd=null;function gg(a){xd!==a&&(xd=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){xd===a&&(xd=null);for(var i=0;i<a.length;i+=3){var s=a[i],u=a[i+1],f=a[i+2];if(typeof u!="function"){if(VA(u||s)===null)continue;break}var m=Ns(s);m!==null&&(a.splice(i,3),i-=3,Vf(m,{pending:!0,data:f,method:s.method,action:u},u,f))}}))}function Fc(a){function i(F){return kd(F,a)}Yo!==null&&kd(Yo,a),Ko!==null&&kd(Ko,a),Vo!==null&&kd(Vo,a),wc.forEach(i),Gc.forEach(i);for(var s=0;s<Wo.length;s++){var u=Wo[s];u.blockedOn===a&&(u.blockedOn=null)}for(;0<Wo.length&&(s=Wo[0],s.blockedOn===null);)Ig(s),s.blockedOn===null&&Wo.shift();if(s=(a.ownerDocument||a).$$reactFormReplay,s!=null)for(u=0;u<s.length;u+=3){var f=s[u],m=s[u+1],N=f[Sn]||null;if(typeof m=="function")N||gg(s);else if(N){var v=null;if(m&&m.hasAttribute("formAction")){if(f=m,N=m[Sn]||null)v=N.formAction;else if(VA(f)!==null)continue}else v=N.action;typeof v=="function"?s[u+1]=v:(s.splice(u,3),u-=3),gg(s)}}}function XA(a){this._internalRoot=a}Pd.prototype.render=XA.prototype.render=function(a){var i=this._internalRoot;if(i===null)throw Error(o(409));var s=i.current,u=Hn();Ag(s,u,a,i,null,null)},Pd.prototype.unmount=XA.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var i=a.containerInfo;Ag(a.current,2,null,a,null,null),Td(),i[gs]=null}};function Pd(a){this._internalRoot=a}Pd.prototype.unstable_scheduleHydration=function(a){if(a){var i=GT();a={blockedOn:null,target:a,priority:i};for(var s=0;s<Wo.length&&i!==0&&i<Wo[s].priority;s++);Wo.splice(s,0,a),s===0&&Ig(a)}};var pg=t.version;if(pg!=="19.1.0")throw Error(o(527,pg,"19.1.0"));K.findDOMNode=function(a){var i=a._reactInternals;if(i===void 0)throw typeof a.render=="function"?Error(o(188)):(a=Object.keys(a).join(","),Error(o(268,a)));return a=h(i),a=a!==null?A(a):null,a=a===null?null:a.stateNode,a};var Bv={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{Co=wd.inject(Bv),ot=wd}catch{}}return jc.createRoot=function(a,i){if(!l(a))throw Error(o(299));var s=!1,u="",f=GI,m=BI,N=FI,v=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(N=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(v=i.unstable_transitionCallbacks)),i=Eg(a,1,!1,null,null,s,u,f,m,N,v,null),a[gs]=i.current,vA(a),new XA(i)},jc.hydrateRoot=function(a,i,s){if(!l(a))throw Error(o(299));var u=!1,f="",m=GI,N=BI,v=FI,F=null,oe=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(N=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(F=s.unstable_transitionCallbacks),s.formState!==void 0&&(oe=s.formState)),i=Eg(a,1,!0,i,s??null,u,f,m,N,v,F,oe),i.context=fg(null),s=i.current,u=Hn(),u=Wr(u),f=vo(u),f.callback=null,Mo(s,f,u),s=u,i.current.lanes=s,_l(i,s),Hi(i),a[gs]=i.current,vA(a),new Pd(i)},jc.version="19.1.0",jc}var Hg;function Qv(){if(Hg)return ZA.exports;Hg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ZA.exports=Zv(),ZA.exports}var Jv=Qv(),b=hR();const sn=NN(b),ER=zv({__proto__:null,default:sn},[b]);var ON={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ar=sn.createContext&&sn.createContext(ON),$v=["attr","size","title"];function eM(e,t){if(e==null)return{};var n=tM(e,t),o,l;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)o=r[l],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function tM(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function Th(){return Th=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Th.apply(this,arguments)}function Ug(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function Sh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ug(Object(n),!0).forEach(function(o){aM(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ug(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function aM(e,t,n){return t=nM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nM(e){var t=iM(e,"string");return typeof t=="symbol"?t:t+""}function iM(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bN(e){return e&&e.map((t,n)=>sn.createElement(t.tag,Sh({key:n},t.attr),bN(t.child)))}function _i(e){return t=>sn.createElement(oM,Th({attr:Sh({},e.attr)},t),bN(e.child))}function oM(e){var t=n=>{var{attr:o,size:l,title:r}=e,d=eM(e,$v),E=l||n.size||"1em",h;return n.className&&(h=n.className),e.className&&(h=(h?h+" ":"")+e.className),sn.createElement("svg",Th({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,o,d,{className:h,style:Sh(Sh({color:e.color||n.color},n.style),e.style),height:E,width:E,xmlns:"http://www.w3.org/2000/svg"}),r&&sn.createElement("title",null,r),e.children)};return Ar!==void 0?sn.createElement(Ar.Consumer,null,n=>t(n)):t(ON)}function lM(e){return _i({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M407.8 294.7c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3zM288 227.1C261.9 176.4 190.9 81.9 124.9 35.3C61.6-9.4 37.5-1.7 21.6 5.5C3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7c3.3-.5 6.6-.9 10-1.4c-3.3 .5-6.6 1-10 1.4C74.3 308.6-9.1 342.8 100.3 464.5C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4c102.4-103.4 28.1-156-65.8-169.9c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3c64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1z"},child:[]}]})(e)}function sM(e){return _i({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(e)}function rM(e){return _i({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M192 32c0 17.7 14.3 32 32 32c123.7 0 224 100.3 224 224c0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32c70.7 0 128 57.3 128 128c0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192c-17.7 0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5 0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144H128v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48s-48-21.5-48-48V144z"},child:[]}]})(e)}function cM(e){return _i({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(e)}function uM(e){return _i({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32V144C576 64.5 511.5 0 432 0S288 64.5 288 144v48H64c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64H352V144z"},child:[]}]})(e)}function dM(e){return _i({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"},child:[]}]})(e)}function DN(e){return _i({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},child:[]}]})(e)}const hM="7.4",EM=16;var Na=(e=>(e.Exact="Exact",e.SkillSequence="SkillSequence",e.Edited="Edited",e))(Na||{}),ni=(e=>(e.Record="Record",e.SkillSequencePresets="SkillSequencePresets",e.MarkerTrackIndividual="MarkerTrackIndividual",e.MarkerTracksCombined="MarkerTracksCombined",e.MarkerTrackSet="MarkerTrackSet",e))(ni||{}),ei=(e=>(e[e.RealTime=0]="RealTime",e[e.RealTimeAutoPause=1]="RealTimeAutoPause",e[e.Manual=2]="Manual",e))(ei||{}),Ao=(e=>(e[e.Initial=0]="Initial",e[e.FpsTax=1]="FpsTax",e[e.AllaganGcdFormula=2]="AllaganGcdFormula",e))(Ao||{});const fR={version:2};let yN=!1;function fM(){return yN}const $h="DT",Qc=window.location.hostname.startsWith("beta"),AM=localStorage.length===0;function Rt(e){const t=localStorage.getItem($h+"."+e);return localStorage.getItem(e)!==null&&(yN=!0),t}function ft(e,t){localStorage.setItem($h+"."+e,t)}function Hm(e){localStorage.removeItem($h+"."+e)}function vN(){Object.keys(localStorage).forEach(e=>{e.startsWith($h+".")&&localStorage.removeItem(e)})}function MN(e,t){const n=e in tm?tm[e]:tm.NEVER;return t>=n.level}const ie=()=>e=>e,mM=ie()({BENEFIC:{id:3594,name:"Benefic",label:{zh:"",ja:""}},LIGHTSPEED:{id:3606,name:"Lightspeed",label:{zh:"",ja:""}},HELIOS:{id:3600,name:"Helios",label:{zh:"",ja:""}},ASCEND:{id:3603,name:"Ascend",label:{zh:"",ja:""}},ESSENTIAL_DIGNITY:{id:3614,name:"Essential Dignity",label:{zh:"",ja:""}},BENEFIC_II:{id:3610,name:"Benefic II",label:{zh:"",ja:""}},ASTRAL_DRAW:{id:37017,name:"Astral Draw",label:{zh:"",ja:""}},UMBRAL_DRAW:{id:37018,name:"Umbral Draw",label:{zh:"",ja:""}},PLAY_I:{id:37019,name:"Play I",label:{zh:"I",ja:"I"}},PLAY_II:{id:37020,name:"Play II",label:{zh:"II",ja:"II"}},PLAY_III:{id:37021,name:"Play III",label:{zh:"III",ja:"III"}},ASPECTED_BENEFIC:{id:3595,name:"Aspected Benefic",label:{zh:"",ja:""}},ASPECTED_HELIOS:{id:3601,name:"Aspected Helios",label:{zh:"",ja:""}},GRAVITY:{id:3615,name:"Gravity",label:{zh:"",ja:""}},COMBUST_II:{id:3608,name:"Combust II",label:{zh:"",ja:""}},SYNASTRY:{id:3612,name:"Synastry",label:{zh:"",ja:""}},DIVINATION:{id:16552,name:"Divination",label:{zh:"",ja:""}},COLLECTIVE_UNCONSCIOUS:{id:3613,name:"Collective Unconscious",label:{zh:"",ja:""}},CELESTIAL_OPPOSITION:{id:16553,name:"Celestial Opposition",label:{zh:"",ja:""}},EARTHLY_STAR:{id:7439,name:"Earthly Star",label:{zh:"",ja:""}},STELLAR_DETONATION:{id:8324,name:"Stellar Detonation",label:{zh:"",ja:""}},MALEFIC_III:{id:7442,name:"Malefic III",label:{zh:"",ja:""}},MINOR_ARCANA:{id:37022,name:"Minor Arcana",label:{zh:"",ja:""}},COMBUST_III:{id:16554,name:"Combust III",label:{zh:"",ja:""}},MALEFIC_IV:{id:16555,name:"Malefic IV",label:{zh:"",ja:""}},CELESTIAL_INTERSECTION:{id:16556,name:"Celestial Intersection",label:{zh:"",ja:""}},HOROSCOPE:{id:16557,name:"Horoscope",label:{zh:"",ja:""}},HOROSCOPE_RECAST:{id:16558,name:"Horoscope (Recast)",label:{zh:"",ja:""}},NEUTRAL_SECT:{id:16559,name:"Neutral Sect",label:{zh:"",ja:""}},FALL_MALEFIC:{id:25871,name:"Fall Malefic",label:{zh:"",ja:""}},GRAVITY_II:{id:25872,name:"Gravity II",label:{zh:"",ja:""}},EXALTATION:{id:25873,name:"Exaltation",label:{zh:"",ja:""}},MACROCOSMOS:{id:25874,name:"Macrocosmos",label:{zh:"",ja:""}},MICROCOSMOS:{id:25875,name:"Microcosmos",label:{zh:"",ja:""}},ORACLE:{id:37029,name:"Oracle",label:{zh:"",ja:""}},HELIOS_CONJUNCTION:{id:37030,name:"Helios Conjunction",label:{zh:"",ja:""}},SUN_SIGN:{id:37031,name:"Sun Sign",label:{zh:"",ja:""}},THE_BALANCE:{id:37023,name:"The Balance",label:{zh:"",ja:""}},THE_ARROW:{id:37024,name:"The Arrow",label:{zh:"",ja:""}},THE_SPIRE:{id:37025,name:"The Spire",label:{zh:"",ja:""}},THE_SPEAR:{id:37026,name:"The Spear",label:{zh:"",ja:""}},THE_BOLE:{id:37027,name:"The Bole",label:{zh:"",ja:""}},THE_EWER:{id:37028,name:"The Ewer",label:{zh:"",ja:""}},LORD_OF_CROWNS:{id:7444,name:"Lord of Crowns",label:{zh:"",ja:""}},LADY_OF_CROWNS:{id:7445,name:"Lady of Crowns",label:{zh:"",ja:""}}}),RM=ie()({cd_LIGHTSPEED:{name:"cd_Lightspeed"},cd_ESSENTIAL_DIGNITY:{name:"cd_EssentialDignity"},cd_ASTRAL_DRAW:{name:"cd_AstralDraw"},cd_PLAY_I:{name:"cd_PlayI"},cd_PLAY_II:{name:"cd_PlayII"},cd_PLAY_III:{name:"cd_PlayIII"},cd_SYNASTRY:{name:"cd_Synastry"},cd_DIVINATION:{name:"cd_Divination"},cd_COLLECTIVE_UNCONSCIOUS:{name:"cd_CollectiveUnconscious"},cd_CELESTIAL_OPPOSITION:{name:"cd_CelestialOpposition"},cd_EARTHLY_STAR:{name:"cd_EarthlyStar"},cd_STELLAR_DETONATION:{name:"cd_StellarDetonation"},cd_MINOR_ARCANA:{name:"cd_MinorArcana"},cd_CELESTIAL_INTERSECTION:{name:"cd_CelestialIntersection"},cd_HOROSCOPE:{name:"cd_Horoscope"},cd_HOROSCOPE_RECAST:{name:"cd_HoroscopeRecast"},cd_NEUTRAL_SECT:{name:"cd_NeutralSect"},cd_EXALTATION:{name:"cd_Exaltation"},cd_MACROCOSMOS:{name:"cd_Macrocosmos"},cd_MICROCOSMOS:{name:"cd_Microcosmos"},cd_ORACLE:{name:"cd_Oracle"},cd_SUN_SIGN:{name:"cd_SunSign"}}),TM=ie()({ARCANA:{name:"Arcana",label:{zh:""}},MINOR_ARCANA:{name:"Minor Arcana",label:{zh:""}}}),AR=ie()({LIGHTSPEED:{name:"Lightspeed",label:{zh:""}},THE_BALANCE:{name:"The Balance",label:{zh:""}},THE_ARROW:{name:"The Arrow",label:{zh:""}},THE_SPIRE:{name:"The Spire",label:{zh:""}},THE_SPEAR:{name:"The Spear",label:{zh:""}},THE_BOLE:{name:"The Bole",label:{zh:""}},THE_EWER:{name:"The Ewer",label:{zh:""}},ASPECTED_BENEFIC:{name:"Aspected Benefic",label:{zh:""}},ASPECTED_HELIOS:{name:"Aspected Helios",label:{zh:""}},SYNASTRY:{name:"Synastry",label:{zh:""}},DIVINATION:{name:"Divination",label:{zh:""}},DIVINING:{name:"Divining",label:{zh:""}},COLLECTIVE_UNCONSCIOUS:{name:"Collective Unconscious",label:{zh:""}},COLLECTIVE_UNCONSCIOUS_MIT:{name:"Collective Unconscious (Mitigation)",label:{zh:""}},WHEEL_OF_FORTUNE:{name:"Wheel of Fortune",label:{zh:""}},OPPOSITION:{name:"Opposition",label:{zh:""}},EARTHLY_DOMINANCE:{name:"Earthly Dominance",mayNotBeCanceled:!0,label:{zh:""}},GIANT_DOMINANCE:{name:"Giant Dominance",mayNotBeCanceled:!0,label:{zh:""}},COMBUST_II:{name:"Combust II",label:{zh:""}},COMBUST_III:{name:"Combust III",label:{zh:""}},INTERSECTION:{name:"Intersection",label:{zh:""}},HOROSCOPE:{name:"Horoscope",label:{zh:""}},HOROSCOPE_HELIOS:{name:"Horoscope Helios",label:{zh:""}},NEUTRAL_SECT:{name:"Neutral Sect",label:{zh:""}},NEUTRAL_SECT_SHIELD:{name:"Neutral Sect (Shield)",label:{zh:""}},SUNTOUCHED:{name:"Suntouched",label:{zh:""}},EXALTATION:{name:"Exaltation",label:{zh:""}},MACROCOSMOS:{name:"Macrocosmos",label:{zh:""}},HELIOS_CONJUNCTION:{name:"Helios Conjunction",label:{zh:""}},SUN_SIGN:{name:"Sun Sign",label:{zh:""}}}),SM=ie()({ARCANA_1:{name:"Arcana 1",label:{zh:"1"}},ARCANA_2:{name:"Arcana 2",label:{zh:"2"}},ARCANA_3:{name:"Arcana 3",label:{zh:"3"}},NEXT_DRAW:{name:"Next Draw",label:{zh:""}}}),IM=ie()({COMBUST_MASTERY_II:{name:"Combust Mastery II",level:72},MALEFIC_MASTERY_III:{name:"Malefic Mastery III",level:82},ENHANCED_ESSENTIAL_DIGNITY:{name:"Enhanced Essential Dignity",level:78},MALEFIC_MASTERY_IV:{name:"Malefic Mastery IV",level:82},GRAVITY_MASTERY:{name:"Gravity Mastery",level:82},ENHANCED_CELESTIAL_INTERSECTION:{name:"Enhanced Celestial Intersection",level:88},ENHANCED_DIVINATION:{name:"Enhanced Divination",level:92},ASPECTED_HELIOS_MASTERY:{name:"Aspected Helios Mastery",level:96},ENHANCED_ESSENTIAL_DIGNITY_II:{name:"Enhanced Essential Dignity_II",level:98},ENHANCED_NEUTRAL_SECT:{name:"Enhanced Neutral Sect",level:100}}),_M={...TM,...AR,...SM},gM=ie()({BLIZZARD:{id:142,name:"Blizzard",label:{zh:"1",ja:""},discordEmote:"B1"},FIRE:{id:141,name:"Fire",label:{zh:"1",ja:""},discordEmote:"F1"},BLIZZARD_II:{id:25793,name:"Blizzard 2",label:{zh:"2",ja:""},discordEmote:"F2"},FIRE_II:{id:147,name:"Fire 2",label:{zh:"2",ja:""},discordEmote:"F2"},TRANSPOSE:{id:149,name:"Transpose",label:{zh:"",ja:""},discordEmote:"Transpose"},THUNDER_III:{id:153,name:"Thunder 3",label:{zh:"3",ja:""},discordEmote:"T3"},THUNDER_IV:{id:7420,name:"Thunder 4",label:{zh:""},discordEmote:"T4"},MANAWARD:{id:157,name:"Manaward",label:{zh:"",ja:""},discordEmote:"Manaward"},MANAFONT:{id:158,name:"Manafont",label:{zh:"",ja:""},discordEmote:"Manafont"},LEY_LINES:{id:3573,name:"Ley Lines",label:{zh:"",ja:""},discordEmote:"LL"},FIRE_III:{id:152,name:"Fire 3",label:{zh:"3",ja:""},discordEmote:"F3"},BLIZZARD_III:{id:154,name:"Blizzard 3",label:{zh:"3",ja:""},discordEmote:"B3"},FREEZE:{id:159,name:"Freeze",label:{zh:"",ja:""},discordEmote:"Freeze"},FLARE:{id:162,name:"Flare",label:{zh:"",ja:""},discordEmote:"Flare"},BLIZZARD_IV:{id:3576,name:"Blizzard 4",label:{zh:"4",ja:""},discordEmote:"B4"},FIRE_IV:{id:3577,name:"Fire 4",label:{zh:"4",ja:""},discordEmote:"F4"},BETWEEN_THE_LINES:{id:7419,name:"Between the Lines",label:{zh:"",ja:""},discordEmote:"BtL"},AETHERIAL_MANIPULATION:{id:155,name:"Aetherial Manipulation",label:{zh:"",ja:""},discordEmote:"AM"},TRIPLECAST:{id:7421,name:"Triplecast",label:{zh:"",ja:""},discordEmote:"Triple"},FOUL:{id:7422,name:"Foul",label:{zh:"",ja:""},discordEmote:"Foul"},DESPAIR:{id:16505,name:"Despair",label:{zh:"",ja:""},discordEmote:"Despair"},UMBRAL_SOUL:{id:16506,name:"Umbral Soul",label:{zh:"",ja:""},discordEmote:"Soul"},XENOGLOSSY:{id:16507,name:"Xenoglossy",label:{zh:"",ja:""},discordEmote:"Xeno"},HIGH_FIRE_II:{id:25794,name:"High Fire 2",label:{zh:"2",ja:""},discordEmote:"HF2"},HIGH_BLIZZARD_II:{id:25795,name:"High Blizzard 2",label:{zh:"2",ja:""},discordEmote:"HB2"},AMPLIFIER:{id:25796,name:"Amplifier",label:{zh:"",ja:""},discordEmote:"Amplifier"},PARADOX:{id:25797,name:"Paradox",label:{zh:"",ja:""},discordEmote:"Para"},HIGH_THUNDER:{id:36986,name:"High Thunder",label:{zh:"",ja:""},discordEmote:"HThunder"},HIGH_THUNDER_II:{id:36987,name:"High Thunder 2",label:{zh:""},discordEmote:"HThunder2"},FLARE_STAR:{id:36989,name:"Flare Star",label:{zh:"",ja:""},discordEmote:"FS"},RETRACE:{id:36988,name:"Retrace",label:{zh:"",ja:""}}}),pM=ie()({cd_TRANSPOSE:{name:"cd_Transpose"},cd_LEY_LINES:{name:"cd_LeyLines"},cd_MANAWARD:{name:"cd_Manaward"},cd_BETWEEN_THE_LINES:{name:"cd_BetweenTheLines"},cd_AETHERIAL_MANIPULATION:{name:"cd_AetherialManipulation"},cd_TRIPLECAST:{name:"cd_Triplecast"},cd_MANAFONT:{name:"cd_Manafont"},cd_AMPLIFIER:{name:"cd_Amplifier"},cd_RETRACE:{name:"cd_Retrace"}}),NM=ie()({POLYGLOT:{name:"Polyglot",label:{zh:""}},ASTRAL_FIRE:{name:"Astral Fire",label:{zh:""}},UMBRAL_ICE:{name:"Umbral Ice",label:{zh:""}},UMBRAL_HEART:{name:"Umbral Heart",label:{zh:""}},ENOCHIAN:{name:"Enochian",label:{zh:""}},PARADOX:{name:"Paradox",label:{zh:""}},ASTRAL_SOUL:{name:"Astral Soul",label:{zh:""}}}),mR=ie()({LEY_LINES:{name:"Ley Lines",label:{zh:""},mayBeToggled:!0},TRIPLECAST:{name:"Triplecast",label:{zh:""},maximumStacks:3},FIRESTARTER:{name:"Firestarter",label:{zh:""}},THUNDERHEAD:{name:"Thunderhead",label:{zh:""}},THUNDER_III:{name:"Thunder III",label:{zh:""}},THUNDER_IV:{name:"Thunder IV",label:{zh:""}},HIGH_THUNDER:{name:"High Thunder",label:{zh:""}},HIGH_THUNDER_II:{name:"High Thunder II",label:{zh:""}},MANAWARD:{name:"Manaward",label:{zh:""}}}),CM=ie()({}),OM=ie()({ENHANCED_ENOCHIAN_II:{name:"Enhanced Enochian II",level:78},ENHANCED_POLYGLOT:{name:"Enhanced Polyglot",level:80},ENHANCED_FOUL:{name:"Enhanced Foul",level:80},ASPECT_MASTERY_IV:{name:"Aspect Mastery IV",level:82},ENHANCED_MANAFONT:{name:"Enhanced Manafont",level:84},ENHANCED_ENOCHIAN_III:{name:"Enhanced Enochian III",level:86},ASPECT_MASTERY_V:{name:"Aspect Mastery V",level:90},THUNDER_MASTERY_III:{name:"Thunder Mastery III",level:92},ENHANCED_LEYLINES:{name:"Enhanced Ley Lines",level:96},ENHANCED_ENOCHIAN_IV:{name:"Enhanced Enochian IV",level:96},ENHANCED_POLYGLOT_II:{name:"Enhanced Polyglot II",level:98},ENHANCED_ASTRAL_FIRE:{name:"Enhanced Astral Fire",level:100}}),bM={...NM,...mR,...CM},DM=ie()({HEAVY_SHOT:{id:97,name:"Heavy Shot"},QUICK_NOCK:{id:100,name:"Quick Nock"},BLOODLETTER:{id:110,name:"Bloodletter"},BARRAGE:{id:107,name:"Barrage"},RAGING_STRIKES:{id:101,name:"Raging Strikes"},REPELLING_SHOT:{id:112,name:"Repelling Shot"},WIDE_VOLLEY:{id:111,name:"Wide Volley"},MAGES_BALLAD:{id:114,name:"Mage's Ballad"},ARMYS_PAEON:{id:116,name:"Army's Paeon"},RAIN_OF_DEATH:{id:117,name:"Rain of Death"},BATTLE_VOICE:{id:118,name:"Battle Voice"},EMYPREAL_ARROW:{id:3558,name:"Empyreal Arrow"},WANDERERS_MINUET:{id:3559,name:"The Wanderer's Minuet"},IRON_JAWS:{id:3560,name:"Iron Jaws"},WARDENS_PAEAN:{id:3561,name:"Warden's Paean"},SIDEWINDER:{id:3562,name:"Sidewinder"},PITCH_PERFECT:{id:7404,name:"Pitch Perfect"},TROUBADOUR:{id:7405,name:"Troubadour"},CAUSTIC_BITE:{id:7406,name:"Caustic Bite"},STORMBITE:{id:7407,name:"Stormbite"},NATURES_MINNE:{id:7408,name:"Nature's Minne"},REFULGENT_ARROW:{id:7409,name:"Refulgent Arrow"},SHADOWBITE:{id:16494,name:"Shadowbite"},BURST_SHOT:{id:16495,name:"Burst Shot"},APEX_ARROW:{id:16496,name:"Apex Arrow"},LADONSBITE:{id:25783,name:"Ladonsbite"},BLAST_ARROW:{id:25784,name:"Blast Arrow"},RADIANT_FINALE:{id:25785,name:"Radiant Finale"},HEARTBREAK_SHOT:{id:36975,name:"Heartbreak Shot"},RESONANT_ARROW:{id:36976,name:"Resonant Arrow"},RADIANT_ENCORE:{id:36977,name:"Radiant Encore"}}),yM=ie()({cd_RAGING_STRIKES:{name:"cd_RagingStrikes"},cd_BARRAGE:{name:"cd_Barrage"},cd_EMPYREAL_ARROW:{name:"cd_EmpyrealArrow"},cd_HEARTBREAK_SHOT:{name:"cd_HeartbreakShot"},cd_SIDEWINDER:{name:"cd_Sidewinder"},cd_WANDERERS_MINUET:{name:"cd_WanderersMinuet"},cd_MAGES_BALLAD:{name:"cd_MagesBallad"},cd_ARMYS_PAEON:{name:"cd_ArmysPaeon"},cd_WARDENS_PAEAN:{name:"cd_WardensPaean"},cd_NATURES_MINNE:{name:"cd_NaturesMinne"},cd_REPELLING_SHOT:{name:"cd_RepellingShot"},cd_BATTLE_VOICE:{name:"cd_BattleVoice"},cd_RADIANT_FINALE:{name:"cd_RadiantFinale"},cd_TROUBADOUR:{name:"cd_Troubadour"},cd_PITCH_PERFECT:{name:"cd_PitchPerfect"}}),vM=ie()({SONG_TIMER:{name:"SongTimer"},SOUL_VOICE:{name:"Soul Voice"},PITCH_PERFECT:{name:"Pitch Perfect"},REPERTOIRE:{name:"Repertoire"},WANDERERS_CODA:{name:"Wanderer's Coda"},MAGES_CODA:{name:"Mage's Coda"},ARMYS_CODA:{name:"Army's Coda"}}),RR=ie()({HAWKS_EYE:{name:"Hawk's Eye"},RAGING_STRIKES:{name:"Raging Strikes"},BARRAGE:{name:"Barrage"},ARMYS_MUSE:{name:"Army's Muse"},ARMYS_ETHOS:{name:"Army's Ethos"},BLAST_ARROW_READY:{name:"Blast Arrow Ready"},RESONANT_ARROW_READY:{name:"Resonant Arrow Ready"},RADIANT_ENCORE_READY:{name:"Radiant Encore Ready"},CAUSTIC_BITE:{name:"Caustic Bite"},STORMBITE:{name:"Stormbite"},MAGES_BALLAD:{name:"Mage's Ballad"},ARMYS_PAEON:{name:"Army's Paeon"},WANDERERS_MINUET:{name:"Wanderer's Minuet"},BATTLE_VOICE:{name:"Battle Voice"},WARDENS_PAEAN:{name:"Warden's Paean"},TROUBADOUR:{name:"Troubadour"},NATURES_MINNE:{name:"Nature's Minne"},RADIANT_FINALE:{name:"Radiant Finale"}}),MM=ie()({RADIANT_CODA:{name:"Radiant Coda"},MUSE_REPERTOIRE:{name:"Muse Repertoire"},ETHOS_REPERTOIRE:{name:"Ethos Repertoire"}}),LM=ie()({WIDE_VOLLEY_MASTERY:{name:"Wide Volley Mastery",level:72},BITE_MASTERY_II:{name:"Bite Mastery II",level:76},HEAVY_SHOT_MASTERY:{name:"Heavy Shot Mastery",level:76},ENHANCED_ARMYS_PAEON:{name:"Enhanced Army's Paeon",level:78},SOUL_VOICE:{name:"Soul Voice",level:80},QUICK_NOCK_MASTERY:{name:"Quick Nock Mastery",level:82},ENHANCED_BLOODLETTER:{name:"Enhanced Bloodletter",level:84},ENHANCED_APEX_ARROW:{name:"Enhanced Apex Arrow",level:86},ENHANCED_TROUBADOUR:{name:"Enhanced Troubadour",level:88},MINSTRELS_CODA:{name:"Minstrel's Coda",level:90},BLOODLETTER_MASTERY:{name:"Bloodletter Mastery",level:92},RANGED_MASTERY:{name:"Ranged Mastery",level:94},ENHANCED_BARRAGE:{name:"Enhanced Barrage",level:96},ENHANCED_RADIANT_FINALE:{name:"Enhanced Radiant Finale",level:100}}),HM={...vM,...RR,...MM},UM=ie()({STANDARD_FINISH:{id:16003,name:"Standard Finish",label:{zh:""}},SINGLE_STANDARD_FINISH:{id:16191,name:"Single Standard Finish",label:{zh:""}},DOUBLE_STANDARD_FINISH:{id:16192,name:"Double Standard Finish",label:{zh:""}},FINISHING_MOVE:{id:36984,name:"Finishing Move",label:{zh:""}},LAST_DANCE:{id:36983,name:"Last Dance",label:{zh:""}},TECHNICAL_FINISH:{id:16004,name:"Technical Finish",label:{zh:""}},SINGLE_TECHNICAL_FINISH:{id:16193,name:"Single Technical Finish",label:{zh:""}},DOUBLE_TECHNICAL_FINISH:{id:16194,name:"Double Technical Finish",label:{zh:""}},TRIPLE_TECHNICAL_FINISH:{id:16195,name:"Triple Technical Finish",label:{zh:""}},QUADRUPLE_TECHNICAL_FINISH:{id:16196,name:"Quadruple Technical Finish",label:{zh:""}},TILLANA:{id:25790,name:"Tillana",label:{zh:""}},CASCADE:{id:15989,name:"Cascade",label:{zh:""}},FOUNTAIN:{id:15990,name:"Fountain",label:{zh:""}},REVERSE_CASCADE:{id:15991,name:"Reverse Cascade",label:{zh:""}},FOUNTAINFALL:{id:15992,name:"Fountainfall",label:{zh:""}},WINDMILL:{id:15993,name:"Windmill",label:{zh:""}},BLADESHOWER:{id:15994,name:"Bladeshower",label:{zh:""}},RISING_WINDMILL:{id:15995,name:"Rising Windmill",label:{zh:""}},BLOODSHOWER:{id:15996,name:"Bloodshower",label:{zh:""}},STANDARD_STEP:{id:15997,name:"Standard Step",label:{zh:""}},TECHNICAL_STEP:{id:15998,name:"Technical Step",label:{zh:""}},EMBOITE:{id:15999,name:"Emboite",label:{zh:""}},ENTRECHAT:{id:16e3,name:"Entrechat",label:{zh:""}},JETE:{id:16001,name:"Jete",label:{zh:""}},PIROUETTE:{id:16002,name:"Pirouette",label:{zh:""}},SABER_DANCE:{id:16005,name:"Saber Dance",label:{zh:""}},DANCE_OF_THE_DAWN:{id:36985,name:"Dance of the Dawn",label:{zh:""}},CLOSED_POSITION:{id:16006,name:"Closed Position",label:{zh:""}},FAN_DANCE:{id:16007,name:"Fan Dance",label:{zh:""}},FAN_DANCE_II:{id:16008,name:"Fan Dance II",label:{zh:""}},FAN_DANCE_III:{id:16009,name:"Fan Dance III",label:{zh:""}},FAN_DANCE_IV:{id:25791,name:"Fan Dance IV",label:{zh:""}},EN_AVANT:{id:16010,name:"En Avant",label:{zh:""}},DEVILMENT:{id:16011,name:"Devilment",label:{zh:""}},STARFALL_DANCE:{id:25792,name:"Starfall Dance",label:{zh:""}},SHIELD_SAMBA:{id:16012,name:"Shield Samba",label:{zh:""}},FLOURISH:{id:16013,name:"Flourish",label:{zh:""}},IMPROVISATION:{id:16014,name:"Improvisation",label:{zh:""}},IMPROVISED_FINISH:{id:25789,name:"Improvised Finish",label:{zh:""}},CURING_WALTZ:{id:16015,name:"Curing Waltz",label:{zh:""}},ENDING:{id:18073,name:"Ending",label:{zh:""}}}),kM=ie()({cd_STANDARD_STEP:{name:"cd_StandardStep"},cd_TECHNICAL_STEP:{name:"cd_TechnicalStep"},cd_CLOSED_POSITION:{name:"cd_ClosedPosition"},cd_FAN_DANCE:{name:"cd_FanDance"},cd_FAN_DANCE_II:{name:"cd_FanDanceII",label:{zh:"CD"}},cd_FAN_DANCE_III:{name:"cd_FanDanceIII",label:{zh:"CD"}},cd_FAN_DANCE_IV:{name:"cd_FanDanceIV",label:{zh:"CD"}},cd_EN_AVANT:{name:"cd_EnAvant"},cd_DEVILMENT:{name:"cd_Devilment"},cd_SHIELD_SAMBA:{name:"cd_ShieldSamba"},cd_FLOURISH:{name:"cd_Flourish"},cd_IMPROVISATION:{name:"cd_Improvisation"},cd_IMPROVISED_FINISH:{name:"cd_ImprovisedFinish"},cd_CURING_WALTZ:{name:"cd_CuringWaltz"},cd_ENDING:{name:"cd_Ending"}}),xM=ie()({ESPRIT_GAUGE:{name:"EspritGauge",label:{zh:""}},FEATHER_GAUGE:{name:"Feathers",label:{zh:""}},STANDARD_DANCE:{name:"Standard Dance",label:{zh:""}},TECHNICAL_DANCE:{name:"Technical Dance",label:{zh:""}}}),TR=ie()({SILKEN_SYMMETRY:{name:"Silken Symmetry",label:{zh:""}},SILKEN_FLOW:{name:"Silken Flow",label:{zh:""}},FLOURISHING_SYMMETRY:{name:"Flourishing Symmetry",label:{zh:""}},FLOURISHING_FLOW:{name:"Flourishing Flow",label:{zh:""}},THREEFOLD_FAN_DANCE:{name:"Threefold Fan Dance",label:{zh:""}},FOURFOLD_FAN_DANCE:{name:"Fourfold Fan Dance",label:{zh:""}},FINISHING_MOVE_READY:{name:"Finishing Move Ready",label:{zh:""}},FLOURISHING_STARFALL:{name:"Flourishing Starfall",label:{zh:""}},STANDARD_STEP:{name:"Standard Step",label:{zh:""},mayNotBeCanceled:!0},TECHNICAL_STEP:{name:"Technical Step",label:{zh:""},mayNotBeCanceled:!0},LAST_DANCE_READY:{name:"Last Dance Ready",label:{zh:""}},DANCE_OF_THE_DAWN_READY:{name:"Dance of the Dawn Ready",label:{zh:""}},FLOURISHING_FINISH:{name:"Flourishing Finish",label:{zh:""}},SHIELD_SAMBA:{name:"Shield Samba",label:{zh:""}},IMPROVISATION:{name:"Improvisation",label:{zh:""},mayNotBeCanceled:!0},RISING_RHYTHM:{name:"Rising Rhythm",label:{zh:""},maximumStacks:4},IMPROVISATION_REGEN:{name:"Improvisation Regen",label:{zh:""}},IMPROVISED_FINISH:{name:"Improvised Finish",label:{zh:""}},DEVILMENT:{name:"Devilment",label:{zh:""}},TECHNICAL_FINISH:{name:"Technical Finish",label:{zh:""}},ESPRIT:{name:"Esprit",label:{zh:""},mayNotBeCanceled:!0},STANDARD_FINISH:{name:"Standard Finish",label:{zh:""}},CLOSED_POSITION:{name:"Closed Position",label:{zh:""},mayNotBeCanceled:!0},DANCE_PARTNER:{name:"Dance Partner",label:{zh:""}},STANDARD_FINISH_PARTNER:{name:"Standard Finish Partner",label:{zh:"buff"}},ESPRIT_PARTNER:{name:"Esprit Partner",label:{zh:"buff"}},ESPRIT_TECHNICAL:{name:"Esprit Technical",label:{zh:"buff"}}}),PM=ie()({CASCADE_COMBO:{name:"CascadeCombo",label:{zh:""}},WINDMILL_COMBO:{name:"WindmillCombo",label:{zh:""}},STANDARD_BONUS:{name:"StandardBonus",label:{zh:""}},TECHNICAL_BONUS:{name:"TechnicalBonus",label:{zh:""}}}),wM=ie()({ESPRIT:{name:"Esprit",level:76},ENHANCED_EN_AVANT_II:{name:"Enhanced En Avant II",level:78},ENHANCED_TECHNICAL_FINISH:{name:"Enhanced Technical Finish",level:82},ENHANCED_ESPRIT:{name:"Enhanced Esprit",level:84},ENHANCED_FLOURISH:{name:"Enhanced Flourish",level:86},ENHANCED_SHIELD_SAMBA:{name:"Enhanced Shield Samba",level:88},ENHANCED_DEVILMENT:{name:"Enhanced Devilment",level:90},ENHANCED_STANDARD_FINISH:{name:"Enhanced Standard Finish",level:92},DYNAMIC_DANCER:{name:"Dynamic Dancer",level:94},ENHANCED_FLOURISH_II:{name:"Enhanced Flourish II",level:96},ENHANCED_TECHNICAL_FINISH_II:{name:"Enhanced Technical Finish II",level:100}}),GM={...xM,...TR,...PM},BM=ie()({PIERCING_TALON:{id:90,name:"Piercing Talon"},TRUE_THRUST:{id:75,name:"True Thrust"},RAIDEN_THRUST:{id:16479,name:"Raiden Thrust"},DISEMBOWEL:{id:87,name:"Disembowel"},SPIRAL_BLOW:{id:36955,name:"Spiral Blow"},CHAOS_THRUST:{id:88,name:"Chaos Thrust"},CHAOTIC_SPRING:{id:25772,name:"Chaotic Spring"},WHEELING_THRUST:{id:3556,name:"Wheeling Thrust"},VORPAL_THRUST:{id:78,name:"Vorpal Thrust"},LANCE_BARRAGE:{id:36954,name:"Lance Barrage"},FULL_THRUST:{id:84,name:"Full Thrust"},HEAVENS_THRUST:{id:25771,name:"Heavens' Thrust"},FANG_AND_CLAW:{id:3554,name:"Fang and Claw"},DRAKESBANE:{id:36952,name:"Drakesbane"},DOOM_SPIKE:{id:86,name:"Doom Spike"},DRACONIAN_FURY:{id:25770,name:"Draconian Fury"},SONIC_THRUST:{id:7397,name:"Sonic Thrust"},COERTHAN_TORMENT:{id:16477,name:"Coerthan Torment"},LIFE_SURGE:{id:83,name:"Life Surge"},LANCE_CHARGE:{id:85,name:"Lance Charge"},JUMP:{id:92,name:"Jump"},HIGH_JUMP:{id:16478,name:"High Jump"},MIRAGE_DIVE:{id:7339,name:"Mirage Dive"},DRAGONFIRE_DIVE:{id:96,name:"Dragonfire Dive"},RISE_OF_THE_DRAGON:{id:36953,name:"Rise of the Dragon"},BATTLE_LITANY:{id:3557,name:"Battle Litany"},WYRMWIND_THRUST:{id:25773,name:"Wyrmwind Thrust"},GEIRSKOGUL:{id:3555,name:"Geirskogul"},NASTROND:{id:7400,name:"Nastrond"},STARDIVER:{id:16480,name:"Stardiver"},STARCROSS:{id:36956,name:"Starcross"},ELUSIVE_JUMP:{id:94,name:"Elusive Jump"},WINGED_GLIDE:{id:36951,name:"Winged Glide"}}),FM=ie()({cd_LIFE_SURGE:{name:"cd_LifeSurge"},cd_LANCE_CHARGE:{name:"cd_LanceCharge"},cd_JUMP:{name:"cd_Jump"},cd_HIGH_JUMP:{name:"cd_HighJump"},cd_ELUSIVE_JUMP:{name:"cd_ElusiveJump"},cd_WINGED_GLIDE:{name:"cd_WingedGlide"},cd_DRAGONFIRE_DIVE:{name:"cd_DragonfireDive"},cd_BATTLE_LITANY:{name:"cd_BattleLitany"},cd_GEIRSKOGUL:{name:"cd_Geirskogul"},cd_MIRAGE_DIVE:{name:"cd_MirageDive"},cd_NASTROND:{name:"cd_Nastrond"},cd_STARDIVER:{name:"cd_Stardiver"},cd_WYRMWIND_THRUST:{name:"cd_WyrmwindThrust"},cd_RISE_OF_THE_DRAGON:{name:"cd_RiseOfTheDragon"},cd_STARCROSS:{name:"cd_Starcross"}}),zM=ie()({LIFE_OF_THE_DRAGON:{name:"Life of the Dragon"},FIRSTMINDS_FOCUS:{name:"Firstminds' Focus"}}),SR=ie()({LIFE_SURGE:{name:"Life Surge"},ENHANCED_PIERCING_TALON:{name:"Enhanced Piercing Talon"},POWER_SURGE:{name:"Power Surge"},LANCE_CHARGE:{name:"Lance Charge"},DIVE_READY:{name:"Dive Ready"},CHAOS_THRUST_DOT:{name:"Chaos Thrust DoT"},CHAOTIC_SPRING_DOT:{name:"Chaotic Spring DoT"},DRAGONS_FLIGHT:{name:"Dragon's Flight"},BATTLE_LITANY:{name:"Battle Litany"},NASTROND_READY:{name:"Nastrond Ready"},DRACONIAN_FIRE:{name:"Draconian Fire"},STARCROSS_READY:{name:"Starcross Ready"}}),jM=ie()({DRG_CHAOS_COMBO_TRACKER:{name:"DRG Chaos Combo"},DRG_HEAVENS_COMBO_TRACKER:{name:"DRG Heavens Combo"},DRG_AOE_COMBO_TRACKER:{name:"DRG AOE Combo"}}),YM=ie()({JUMP_MASTERY:{name:"Jump Mastery",level:74},LANCE_MASTERY:{name:"Lance Mastery",level:76},ENHANCED_COERTHAN_TORMENT:{name:"Enhanced Coerthan Torment",level:82},ENHANCED_WINGED_GLIDE:{name:"Enhanced Winged Glide",level:84},LANCE_MASTERY_II:{name:"Lance Mastery II",level:86},ENHANCED_LIFE_SURGE:{name:"Enhanced Life Surge",level:88},LANCE_MASTERY_III:{name:"Lance Mastery III",level:90},ENHANCED_DRAGONFIRE_DIVE:{name:"Enhanced Dragonfire Dive",level:92},MELEE_MASTERY_DRG:{name:"Melee Mastery DRG",level:94},LANCE_MASTERY_IV:{name:"Lance Mastery IV",level:96},ENHANCED_STARDIVER:{name:"Enhanced Stardiver",level:100}}),KM={...zM,...SR,...jM},VM=ie()({HARD_SLASH:{id:3617,name:"Hard Slash",label:{zh:""}},SYPHON_STRIKE:{id:3623,name:"Syphon Strike",label:{zh:""}},UNLEASH:{id:3621,name:"Unleash",label:{zh:""}},GRIT:{id:3629,name:"Grit",label:{zh:""}},RELEASE_GRIT:{id:32067,name:"Release Grit",label:{zh:""}},UNMEND:{id:3624,name:"Unmend",label:{zh:""}},SOULEATER:{id:3632,name:"Souleater",label:{zh:""}},FLOOD_OF_DARKNESS:{name:"Flood of Darkness",label:{zh:""}},BLOOD_WEAPON:{id:3625,name:"Blood Weapon",label:{zh:""}},SHADOW_WALL:{id:3636,name:"Shadow Wall",label:{zh:""}},STALWART_SOUL:{id:16468,name:"Stalwart Soul",label:{zh:""}},EDGE_OF_DARKNESS:{name:"Edge of Darkness",label:{zh:""}},DARK_MIND:{id:3634,name:"Dark Mind",label:{zh:""}},LIVING_DEAD:{id:3638,name:"Living Dead",label:{zh:""}},SALTED_EARTH:{id:3639,name:"Salted Earth",label:{zh:""}},SHADOWSTRIDE:{id:36926,name:"Shadowstride",label:{zh:""}},ABYSSAL_DRAIN:{id:3641,name:"Abyssal Drain",label:{zh:""}},CARVE_AND_SPIT:{id:3643,name:"Carve and Spit",label:{zh:""}},BLOODSPILLER:{id:7392,name:"Bloodspiller",label:{zh:""}},QUIETUS:{id:7391,name:"Quietus",label:{zh:""}},DARK_MISSIONARY:{id:16471,name:"Dark Missionary",label:{zh:""}},DELIRIUM:{id:7390,name:"Delirium",label:{zh:""}},THE_BLACKEST_NIGHT:{id:7393,name:"The Blackest Night",label:{zh:""}},THE_BLACKEST_NIGHT_POP:{name:"Pop The Blackest Night",label:{zh:""}},FLOOD_OF_SHADOW:{id:16469,name:"Flood of Shadow",label:{zh:""}},EDGE_OF_SHADOW:{id:16470,name:"Edge of Shadow",label:{zh:""}},LIVING_SHADOW:{id:16472,name:"Living Shadow",label:{zh:""}},OBLATION:{id:25754,name:"Oblation",label:{zh:""}},SALT_AND_DARKNESS:{id:25755,name:"Salt and Darkness",label:{zh:""}},SHADOWBRINGER:{id:25757,name:"Shadowbringer",label:{zh:""}},SHADOWED_VIGIL:{id:36927,name:"Shadowed Vigil",label:{zh:""}},SCARLET_DELIRIUM:{id:36928,name:"Scarlet Delirium",label:{zh:""}},COMEUPPANCE:{id:36929,name:"Comeuppance",label:{zh:""}},TORCLEAVER:{id:36930,name:"Torcleaver",label:{zh:""}},IMPALEMENT:{id:36931,name:"Impalement",label:{zh:""}},DISESTEEM:{id:36932,name:"Disesteem",label:{zh:""}},ABYSSAL_DRAIN_PET:{id:17904,name:"Abyssal Drain (Esteem)",label:{zh:""}},SHADOWSTRIDE_PET:{id:38512,name:"Shadowstride (Esteem)",label:{zh:""}},SHADOWBRINGER_PET:{id:25881,name:"Shadowbringer (Esteem)",label:{zh:""}},EDGE_OF_SHADOW_PET:{id:17908,name:"Edge of Shadow (Esteem)",label:{zh:""}},FLOOD_OF_SHADOW_PET:{name:"Flood of Shadow (Esteem)",label:{zh:""}},BLOODSPILLER_PET:{id:17909,name:"Bloodspiller (Esteem)",label:{zh:""}},CARVE_AND_SPIT_PET:{name:"Carve and Spit (Esteem)",label:{zh:""}},DISESTEEM_PET:{id:36933,name:"Disesteem (Esteem)",label:{zh:""}}}),WM=ie()({cd_GRIT:{name:"cd_Grit"},cd_RELEASE_GRIT:{name:"cd_ReleaseGrit"},cd_FLOOD_OF_DARKNESS:{name:"cd_FloodOfDarkness"},cd_SHADOW_WALL:{name:"cd_ShadowWall"},cd_DARK_MIND:{name:"cd_DarkMind"},cd_LIVING_DEAD:{name:"cd_LivingDead"},cd_SALTED_EARTH:{name:"cd_SaltedEarth"},cd_SHADOWSTRIDE:{name:"cd_Shadowstride"},cd_ABYSSAL_DRAIN:{name:"cd_AbyssalDrain"},cd_DARK_MISSIONARY:{name:"cd_DarkMissionary"},cd_DELIRIUM:{name:"cd_Delirium"},cd_THE_BLACKEST_NIGHT:{name:"cd_TheBlackestNight"},cd_THE_BLACKEST_NIGHT_POP:{name:"cd_TheBlackestNightPop"},cd_LIVING_SHADOW:{name:"cd_LivingShadow"},cd_OBLATION:{name:"cd_Oblation"},cd_SALT_AND_DARKNESS:{name:"cd_SaltAndDarkness"},cd_SHADOWBRINGER:{name:"cd_Shadowbringer"},cd_POP_TBN:{name:"cd_PopTBN"}}),XM=ie()({DARKSIDE:{name:"Darkside",label:{zh:""}},BLOOD_GAUGE:{name:"Blood Gauge",label:{zh:""}}}),IR=ie()({SALTED_EARTH:{name:"Salted Earth",mayBeToggled:!0,label:{zh:""}},GRIT:{name:"Grit",label:{zh:""}},SHADOW_WALL:{name:"Shadow Wall",label:{zh:""}},DARK_MIND:{name:"Dark Mind",label:{zh:""}},LIVING_DEAD:{name:"Living Dead",label:{zh:""}},WALKING_DEAD:{name:"Walking Dead",label:{zh:""}},UNDEAD_REBIRTH:{name:"Undead Rebirth",label:{zh:""}},DARK_MISSIONARY:{name:"Dark Missionary",label:{zh:""}},DELIRIUM:{name:"Delirium",maximumStacks:3,label:{zh:""}},BLOOD_WEAPON:{name:"Blood Weapon",maximumStacks:3,label:{zh:""}},BLACKEST_NIGHT:{name:"Blackest Night",label:{zh:""}},SCORN:{name:"Scorn",label:{zh:""}},OBLATION:{name:"Oblation",label:{zh:""}},SHADOWED_VIGIL:{name:"Shadowed Vigil",label:{zh:""}},VIGILANT:{name:"Vigilant",label:{zh:""}}}),qM=ie()({DRK_COMBO_TRACKER:{name:"DRK Combo",label:{zh:""}},DRK_AOE_COMBO_TRACKER:{name:"DRK AOE Combo",label:{zh:"AOE"}},DRK_DELIRIUM_COMBO_TRACKER:{name:"DRK Delirium Combo",label:{zh:""}},DARK_ARTS:{name:"Dark Arts",label:{zh:""}},ESTEEM_TRACKER:{name:"Esteem Attacks",label:{zh:""}}}),ZM=ie()({DAKRSIDE_MASTERY:{name:"Darkside Mastery",level:74},ENHANCED_UNMEND:{name:"Enhanced Unmend",level:84},ENHANCED_LIVING_SHADOW:{name:"Enhanced Living Shadow",level:88},ENHANCED_LIVING_SHADOW_II:{name:"Enhanced Living Shadow II",level:90},SHADOW_WALL_MASTERY:{name:"Shadow Wall Mastery",level:92},ENHANCED_DELIRIUM:{name:"Enhanced Delirium",level:96},ENHANCED_LIVING_SHADOW_III:{name:"Enhanced Living Shadow III",level:100}}),QM={...XM,...IR,...qM},JM=ie()({LIGHTNING_SHOT:{id:16143,name:"Lightning Shot",label:{zh:""}},KEEN_EDGE:{id:16137,name:"Keen Edge",label:{zh:""}},BRUTAL_SHELL:{id:16139,name:"Brutal Shell",label:{zh:""}},SOLID_BARREL:{id:16145,name:"Solid Barrel",label:{zh:""}},DEMON_SLICE:{id:16141,name:"Demon Slice",label:{zh:""}},DEMON_SLAUGHTER:{id:16149,name:"Demon Slaughter",label:{zh:""}},BURST_STRIKE:{id:16162,name:"Burst Strike",label:{zh:""}},FATED_CIRCLE:{id:16163,name:"Fated Circle",label:{zh:""}},BLOODFEST:{id:16164,name:"Bloodfest",label:{zh:""}},NO_MERCY:{id:16138,name:"No Mercy",label:{zh:""}},SONIC_BREAK:{id:16153,name:"Sonic Break",label:{zh:""}},GNASHING_FANG:{id:16146,name:"Gnashing Fang",label:{zh:""}},SAVAGE_CLAW:{id:16147,name:"Savage Claw",label:{zh:""}},WICKED_TALON:{id:16150,name:"Wicked Talon",label:{zh:""}},DOUBLE_DOWN:{id:25760,name:"Double Down",label:{zh:""}},REIGN_OF_BEASTS:{id:36937,name:"Reign of Beasts",label:{zh:""}},NOBLE_BLOOD:{id:36938,name:"Noble Blood",label:{zh:""}},LION_HEART:{id:36939,name:"Lion Heart",label:{zh:""}},CONTINUATION:{id:16155,name:"Continuation",label:{zh:""}},HYPERVELOCITY:{id:25759,name:"Hypervelocity",label:{zh:""}},FATED_BRAND:{id:36936,name:"Fated Brand",label:{zh:""}},JUGULAR_RIP:{id:16156,name:"Jugular Rip",label:{zh:""}},ABDOMEN_TEAR:{id:16157,name:"Abdomen Tear",label:{zh:""}},EYE_GOUGE:{id:16158,name:"Eye Gouge",label:{zh:""}},DANGER_ZONE:{id:16144,name:"Danger Zone",label:{zh:""}},BLASTING_ZONE:{id:16165,name:"Blasting Zone",label:{zh:""}},BOW_SHOCK:{id:16159,name:"Bow Shock",label:{zh:""}},TRAJECTORY:{id:36934,name:"Trajectory",label:{zh:""}},HEART_OF_STONE:{id:16161,name:"Heart of Stone",label:{zh:""}},HEART_OF_CORUNDUM:{id:25758,name:"Heart of Corundum",label:{zh:""}},SUPERBOLIDE:{id:16152,name:"Superbolide",label:{zh:""}},CAMOUFLAGE:{id:16140,name:"Camouflage",label:{zh:""}},NEBULA:{id:16148,name:"Nebula",label:{zh:""}},GREAT_NEBULA:{id:36935,name:"Great Nebula",label:{zh:""}},HEART_OF_LIGHT:{id:16160,name:"Heart of Light",label:{zh:""}},AURORA:{id:16151,name:"Aurora",label:{zh:""}},ROYAL_GUARD:{id:16142,name:"Royal Guard",label:{zh:""}},RELEASE_ROYAL_GUARD:{id:32068,name:"Release Royal Guard",label:{zh:""}}}),$M=ie()({cd_NO_MERCY:{name:"cd_NoMercy"},cd_BLOODFEST:{name:"cd_Bloodfest"},cd_CAMOUFLAGE:{name:"cd_Camouflage"},cd_ROYAL_GUARD:{name:"cd_RoyalGuard"},cd_RELEASE_ROYAL_GUARD:{name:"cd_ReleaseRoyalGuard"},cd_DANGER_ZONE:{name:"cd_DangerZone"},cd_BLASTING_ZONE:{name:"cd_BlastingZone"},cd_NEBULA:{name:"cd_Nebula"},cd_GREAT_NEBULA:{name:"cd_GreatNebula"},cd_AURORA:{name:"cd_Aurora"},cd_SUPERBOLIDE:{name:"cd_Superbolide"},cd_TRAJECTORY:{name:"cd_Trajectory"},cd_GNASHING_FANG:{name:"cd_GnashingFang"},cd_BOW_SHOCK:{name:"cd_BowShock"},cd_HEART_OF_LIGHT:{name:"cd_HeartOfLight"},cd_HEART_OF_STONE:{name:"cd_HeartOfStone"},cd_HEART_OF_CORUNDUM:{name:"cd_HeartOfCorundum"},cd_DOUBLE_DOWN:{name:"cd_DoubleDown"},cd_CONTINUATION:{name:"cd_Continuation"},cd_HYPERVELOCITY:{name:"cd_Hypervelocity"},cd_FATED_BRAND:{name:"cd_FatedBrand"},cd_JUGULAR_RIP:{name:"cd_JugularRip"},cd_ABDOMEN_TEAR:{name:"cd_AbdomenTear"},cd_EYE_GOUGE:{name:"cd_EyeGouge"}}),eL=ie()({POWDER_GAUGE:{name:"Powder Gauge",label:{zh:""}}}),_R=ie()({NO_MERCY:{name:"No Mercy",label:{zh:""}},AURORA:{name:"Aurora",label:{zh:""}},BOW_SHOCK_DOT:{name:"Bow Shock DoT",label:{zh:""}},CAMOUFLAGE:{name:"Camouflage",label:{zh:""}},HEART_OF_CORUNDUM:{name:"Heart of Corundum",label:{zh:""}},CLARITY_OF_CORUNDUM:{name:"Clarity of Corundum",label:{zh:""}},CATHARSIS_OF_CORUNDUM:{name:"Catharsis of Corundum",label:{zh:""}},NEBULA:{name:"Nebula",label:{zh:""}},GREAT_NEBULA:{name:"Great Nebula",label:{zh:""}},HEART_OF_LIGHT:{name:"Heart of Light",label:{zh:""}},HEART_OF_STONE:{name:"Heart of Stone",label:{zh:""}},READY_TO_BLAST:{name:"Ready to Blast",label:{zh:""}},READY_TO_BREAK:{name:"Ready to Break",label:{zh:""}},READY_TO_GOUGE:{name:"Ready to Gouge",label:{zh:""}},READY_TO_RAZE:{name:"Ready to Raze",label:{zh:""}},READY_TO_REIGN:{name:"Ready to Reign",label:{zh:""}},READY_TO_RIP:{name:"Ready to Rip",label:{zh:""}},READY_TO_TEAR:{name:"Ready to Tear",label:{zh:""}},ROYAL_GUARD:{name:"Royal Guard",label:{zh:""}},SONIC_BREAK_DOT:{name:"Sonic Break DoT",label:{zh:""}},SUPERBOLIDE:{name:"Superbolide",label:{zh:""}},BRUTAL_SHELL:{name:"Brutal Shell",label:{zh:""}},BLOODFEST:{name:"Bloodfest",label:{zh:""}}}),tL=ie()({GNB_COMBO_TRACKER:{name:"GNB Combo",label:{zh:""}},GNB_AOE_COMBO_TRACKER:{name:"GNB AOE Combo",label:{zh:"AOE"}},GNB_GNASHING_COMBO_TRACKER:{name:"GNB Gnashing Combo",label:{zh:""}},GNB_REIGN_COMBO_TRACKER:{name:"GNB Reign Combo",label:{zh:""}}}),aL=ie()({DANGER_ZONE_MASTERY:{name:"Danger Zone Mastery",level:80},HEART_OF_STONE_MASTERY:{name:"Heart Of Stone Mastery",level:82},ENHANCED_AURORA:{name:"Enhanced Aurora",level:84},ENHANCED_CONTINUATION:{name:"Enhanced Continuation",level:86},CARTRIDGE_CHARGE_II:{name:"Cartridge Charge II",level:88},NEBULA_MASTERY:{name:"Nebula Mastery",level:92},ENHANCED_CONTINUATION_II:{name:"Enhanced Continuation II",level:96},ENHANCED_BLOODFEST:{name:"Enhanced Bloodfest",level:100}}),nL={...eL,..._R,...tL},iL=ie()({HEATED_SPLIT_SHOT:{id:7411,name:"Heated Split Shot",label:{zh:""}},HEATED_SLUG_SHOT:{id:7412,name:"Heated Slug Shot",label:{zh:""}},HEATED_CLEAN_SHOT:{id:7413,name:"Heated Clean Shot",label:{zh:""}},DRILL:{id:16498,name:"Drill",label:{zh:""}},HOT_SHOT:{id:2872,name:"Hot Shot",label:{zh:""}},AIR_ANCHOR:{id:16500,name:"Air Anchor",label:{zh:""}},CHAIN_SAW:{id:25788,name:"Chain Saw",label:{zh:""}},EXCAVATOR:{id:36981,name:"Excavator",label:{zh:""}},GAUSS_ROUND:{id:2874,name:"Gauss Round",label:{zh:""}},DOUBLE_CHECK:{id:36979,name:"Double Check",label:{zh:""}},RICOCHET:{id:2890,name:"Ricochet",label:{zh:""}},CHECKMATE:{id:36980,name:"Checkmate",label:{zh:""}},BLAZING_SHOT:{id:36978,name:"Blazing Shot",label:{zh:""}},WILDFIRE:{id:2878,name:"Wildfire",label:{zh:""}},DETONATOR:{id:16766,name:"Detonator",label:{zh:""}},HYPERCHARGE:{id:17209,name:"Hypercharge",label:{zh:""}},ROOK_AUTOTURRET:{id:2864,name:"Rook Autoturret",label:{zh:""}},ROOK_OVERDRIVE:{id:7415,name:"Rook Overdrive",label:{zh:""}},AUTOMATON_QUEEN:{id:16501,name:"Automaton Queen",label:{zh:""}},QUEEN_OVERDRIVE:{id:16502,name:"Queen Overdrive",label:{zh:""}},BARREL_STABILIZER:{id:7414,name:"Barrel Stabilizer",label:{zh:""}},REASSEMBLE:{id:2876,name:"Reassemble",label:{zh:""}},FULL_METAL_FIELD:{id:36982,name:"Full Metal Field",label:{zh:""}},SPREAD_SHOT:{id:2870,name:"Spread Shot",label:{zh:""}},SCATTERGUN:{id:25786,name:"Scattergun",label:{zh:""}},AUTO_CROSSBOW:{id:16497,name:"Auto Crossbow",label:{zh:""}},BIOBLASTER:{id:16499,name:"Bioblaster",label:{zh:""}},FLAMETHROWER:{id:7418,name:"Flamethrower",label:{zh:""}},DISMANTLE:{id:2887,name:"Dismantle",label:{zh:""}},TACTICIAN:{id:16889,name:"Tactician",label:{zh:""}},VOLLEY_FIRE:{id:2891,name:"Volley Fire",label:{zh:""}},ARM_PUNCH:{id:16504,name:"Arm Punch",label:{zh:""}},ROOK_OVERLOAD:{id:7416,name:"Rook Overload",label:{zh:""}},PILE_BUNKER:{id:16503,name:"Pile Bunker",label:{zh:""}},CROWNED_COLLIDER:{id:25787,name:"Crowned Collider",label:{zh:""}}}),oL=ie()({cd_REASSEMBLE:{name:"cd_Reassemble"},cd_DRILL:{name:"cd_Drill"},cd_CHECKMATE:{name:"cd_Checkmate"},cd_DOUBLE_CHECK:{name:"cd_DoubleCheck"},cd_AIR_ANCHOR:{name:"cd_AirAnchor"},cd_CHAINSAW:{name:"cd_Chainsaw",label:{zh:"CD"}},cd_BARREL_STABILIZER:{name:"cd_BarrelStabilizer"},cd_WILDFIRE:{name:"cd_Wildfire"},cd_QUEEN:{name:"cd_Queen",label:{zh:"CD"}},cd_OVERDRIVE:{name:"cd_Overdrive",label:{zh:"CD/"}},cd_DISMANTLE:{name:"cd_Dismantle"},cd_TACTICIAN:{name:"cd_Tactician"},cd_HYPERCHARGE:{name:"cd_Hypercharge"},cd_DETONATOR:{name:"cd_Detonator"},cd_FLAMETHROWER:{name:"cd_Flamethrower"}}),lL=ie()({HEAT_GAUGE:{name:"Heat",label:{zh:""}},BATTERY_GAUGE:{name:"Battery",label:{zh:""}}}),gR=ie()({REASSEMBLED:{name:"Reassembled",label:{zh:""}},OVERHEATED:{name:"Overheated",label:{zh:""},maximumStacks:5},WILDFIRE:{name:"Wildfire",label:{zh:""}},WILDFIRE_SELF:{name:"Wildfire Self",label:{zh:""}},FLAMETHROWER:{name:"Flamethrower",label:{zh:""}},BIOBLASTER:{name:"Bioblaster",label:{zh:"dot"}},TACTICIAN:{name:"Tactician",label:{zh:"buff"}},HYPERCHARGED:{name:"Hypercharged",label:{zh:""}},EXCAVATOR_READY:{name:"Excavator Ready",label:{zh:""}},FULL_METAL_MACHINIST:{name:"Full Metal Machinist",label:{zh:""}}}),sL=ie()({HEAT_COMBO:{name:"Heat Combo",label:{zh:""}},QUEEN:{name:"Queen",label:{zh:""}},QUEEN_PUNCHES:{name:"QueenPunches",label:{zh:""}},QUEEN_FINISHERS:{name:"QueenFinishers",label:{zh:""}},BATTERY_BONUS:{name:"BatteryBonus",label:{zh:""}},WILDFIRE_HITS:{name:"WildfireHits",label:{zh:""}}}),rL=ie()({CHARGED_ACTION_MASTERY:{name:"Charged Action Mastery",level:74},HOT_SHOT_MASTERY:{name:"Hot Shot Mastery",level:76},ENHANCED_WILD_FIRE:{name:"Enhanced Wildfire",level:88},PROMOTION:{name:"Promotion",level:80},SPREAD_SHOT_MASTERY:{name:"Spread Shot Mastery",level:82},ENHANCED_REASSEMBLE:{name:"Enhanced Reassemble",level:84},MARKSMANS_MASTERY:{name:"Marksman's Mastery",level:84},QUEENS_GAMBIT:{name:"Queen's Gambit",level:86},ENHANCED_TACTICIAN:{name:"Enhanced Tactician",level:88},DOUBLE_BARREL_MASTERY:{name:"Double-Barrel Mastery",level:92},ENHANCED_MULTI_WEAPON:{name:"Enhanced Multiweapon",level:94},MARKSMANS_MASTERY_II:{name:"Marksman's Mastery II",level:94},ENHANCED_MULTI_WEAPON_II:{name:"Enhanced Multiweapon II",level:96},ENHANCED_BARREL_STABILIZER:{name:"Enhanced Barrel Stabilizer",level:100}}),cL={...lL,...gR,...sL},uL=ie()({BOOTSHINE:{id:53,name:"Bootshine",label:{zh:"",ja:""}},TRUE_STRIKE:{id:54,name:"True Strike",label:{zh:"",ja:""}},SNAP_PUNCH:{id:56,name:"Snap Punch",label:{zh:"",ja:""}},TWIN_SNAKES:{id:61,name:"Twin Snakes",label:{zh:"",ja:""}},ARM_OF_THE_DESTROYER:{id:62,name:"Arm of the Destroyer",label:{zh:"",ja:""}},DEMOLISH:{id:66,name:"Demolish",label:{zh:"",ja:""}},ROCKBREAKER:{id:70,name:"Rockbreaker",label:{zh:"",ja:""}},THUNDERCLAP:{id:25762,name:"Thunderclap",label:{zh:"",ja:""}},HOWLING_FIST:{id:25763,name:"Howling Fist",label:{zh:"",ja:""}},MANTRA:{id:65,name:"Mantra",label:{zh:"",ja:""}},FOUR_POINT_FURY:{id:16473,name:"Four-point Fury",label:{zh:"",ja:""}},DRAGON_KICK:{id:74,name:"Dragon Kick",label:{zh:"",ja:""}},PERFECT_BALANCE:{id:69,name:"Perfect Balance",label:{zh:"",ja:""}},FORM_SHIFT:{id:4262,name:"Form Shift",label:{zh:"",ja:""}},FORBIDDEN_MEDITATION:{id:36942,name:"Forbidden Meditation",label:{zh:"",ja:""}},THE_FORBIDDEN_CHAKRA:{id:3547,name:"The Forbidden Chakra",label:{zh:"",ja:""}},MASTERFUL_BLITZ:{id:25764,name:"Masterful Blitz",label:{zh:"",ja:""}},TORNADO_KICK:{id:3543,name:"Tornado Kick",label:{zh:"",ja:""}},ELIXIR_FIELD:{id:3545,name:"Elixir Field",label:{zh:"",ja:""}},CELESTIAL_REVOLUTION:{id:25765,name:"Celestial Revolution",label:{zh:"",ja:""}},FLINT_STRIKE:{id:25882,name:"Flint Strike",label:{zh:"",ja:""}},RIDDLE_OF_EARTH:{id:7394,name:"Riddle of Earth",label:{zh:"",ja:""}},EARTHS_REPLY:{id:36944,name:"Earth's Reply",label:{zh:"",ja:""}},RIDDLE_OF_FIRE:{id:7395,name:"Riddle of Fire",label:{zh:"",ja:""}},BROTHERHOOD:{id:7396,name:"Brotherhood",label:{zh:"",ja:""}},RIDDLE_OF_WIND:{id:25766,name:"Riddle of Wind",label:{zh:"",ja:""}},INSPIRITED_MEDITATION:{id:36941,name:"Inspirited Meditation",label:{zh:"",ja:""}},ENLIGHTENED_MEDITATION:{id:36943,name:"Enlightened Meditation",label:{zh:"",ja:""}},ENLIGHTENMENT:{id:16474,name:"Enlightenment",label:{zh:"",ja:""}},SIX_SIDED_STAR:{id:16476,name:"Six-sided Star",label:{zh:"",ja:""}},SHADOW_OF_THE_DESTROYER:{id:25767,name:"Shadow of the Destroyer",label:{zh:"",ja:""}},RISING_PHOENIX:{id:25768,name:"Rising Phoenix",label:{zh:"",ja:""}},PHANTOM_RUSH:{id:25769,name:"Phantom Rush",label:{zh:"",ja:""}},LEAPING_OPO:{id:36945,name:"Leaping Opo",label:{zh:"",ja:""}},RISING_RAPTOR:{id:36946,name:"Rising Raptor",label:{zh:"",ja:""}},POUNCING_COEURL:{id:36947,name:"Pouncing Coeurl",label:{zh:"",ja:""}},ELIXIR_BURST:{id:36948,name:"Elixir Burst",label:{zh:"",ja:""}},WINDS_REPLY:{id:36949,name:"Wind's Reply",label:{zh:"",ja:""}},FIRES_REPLY:{id:36950,name:"Fire's Reply",label:{zh:"",ja:""}}}),dL=ie()({cd_THUNDERCLAP:{name:"cd_Thunderclap"},cd_MANTRA:{name:"cd_Mantra"},cd_PERFECT_BALANCE:{name:"cd_PerfectBalance"},cd_ENLIGHTENMENT:{name:"cd_Enlightenment"},cd_THE_FORBIDDEN_CHAKRA:{name:"cd_TheForbiddenChakra"},cd_RIDDLE_OF_EARTH:{name:"cd_RiddleOfEarth"},cd_EARTHS_REPLY:{name:"cd_EarthsReply"},cd_RIDDLE_OF_FIRE:{name:"cd_RiddleOfFire"},cd_BROTHERHOOD:{name:"cd_Brotherhood"},cd_RIDDLE_OF_WIND:{name:"cd_RiddleOfWind"}}),hL=ie()({CHAKRA:{name:"Chakra",label:{zh:""}},BEAST_CHAKRA:{name:"Beast Chakra",label:{zh:""}},BEAST_CHAKRA_TIMER:{name:"Beast Timer",label:{zh:""}},NADI:{name:"Nadi",label:{zh:"/"}},LUNAR_NADI:{name:"Lunar Nadi",label:{zh:""}},SOLAR_NADI:{name:"Solar Nadi",label:{zh:""}},OPO_OPOS_FURY:{name:"Opo-opo's Fury",label:{zh:""}},RAPTORS_FURY:{name:"Raptor's Fury",label:{zh:""}},COEURLS_FURY:{name:"Coeurl's Fury",label:{zh:""}}}),pR=ie()({MANTRA:{name:"Mantra",label:{zh:""}},OPO_OPO_FORM:{name:"Opo-opo Form",label:{zh:""}},RAPTOR_FORM:{name:"Raptor Form",label:{zh:""}},COEURL_FORM:{name:"Coeurl Form",label:{zh:""}},PERFECT_BALANCE:{name:"Perfect Balance",maximumStacks:3,label:{zh:""}},FORMLESS_FIST:{name:"Formless Fist",label:{zh:""}},RIDDLE_OF_EARTH:{name:"Riddle of Earth",label:{zh:""}},EARTHS_RESOLVE:{name:"Earth's Resolve",label:{zh:""}},EARTHS_RUMINATION:{name:"Earth's Rumination",label:{zh:""}},RIDDLE_OF_FIRE:{name:"Riddle of Fire",label:{zh:""}},FIRES_RUMINATION:{name:"Fire's Rumination",label:{zh:""}},BROTHERHOOD:{name:"Brotherhood",label:{zh:""}},MEDITATIVE_BROTHERHOOD:{name:"Meditative Brotherhood",label:{zh:""}},RIDDLE_OF_WIND:{name:"Riddle of Wind",label:{zh:""}},WINDS_RUMINATION:{name:"Wind's Rumination",label:{zh:""}},SIX_SIDED_STAR:{name:"Six-sided Star",label:{zh:""}}}),EL=ie()({BEAST_CHAKRA_1:{name:"Beast Chakra 1",label:{zh:"1"}},BEAST_CHAKRA_2:{name:"Beast Chakra 2",label:{zh:"2"}},BEAST_CHAKRA_3:{name:"Beast Chakra 3",label:{zh:"3"}}}),fL=ie()({DEEP_MEDITATION_II:{name:"Deep Meditation II",level:74},HOWLING_FIST_MASTERY:{name:"Howling Fist Mastery",level:74},ENHANCED_GREASED_LIGHTNING_III:{name:"Enhanced Greased Lightning III",level:76},ARM_OF_THE_DESTROYER_MASTERY:{name:"Arm of the Destroyer Mastery",level:82},ENHANCED_THUNDERCLAP:{name:"Enhanced Thunderclap",level:84},MELEE_MASTERY_MNK:{name:"Melee Mastery MNK",level:84},FLINT_STRIKE_MASTERY:{name:"Flint Strike Mastery",level:86},ENHANCED_BROTHERHOOD:{name:"Enhanced Brotherhood",level:88},TORNADO_KICK_MASTERY:{name:"Tornado Kick Mastery",level:90},BEAST_CHAKRA_MASTERY:{name:"Beast Chakra Mastery",level:92},MELEE_MASTERY_II_MNK:{name:"Melee Mastery II MNK",level:94},ENHANCED_RIDDLE_OF_WIND:{name:"Enhanced Riddle of Wind",level:96},ENHANCED_RIDDLE_OF_FIRE:{name:"Enhanced Riddle of Fire",level:100}}),LN={...hL,...pR,...EL},AL=ie()({SPINNING_EDGE:{id:2240,name:"Spinning Edge",label:{zh:""}},SHADE_SHIFT:{id:2241,name:"Shade Shift",label:{zh:""}},GUST_SLASH:{id:2242,name:"Gust Slash",label:{zh:""}},HIDE:{id:2245,name:"Hide",label:{zh:""}},THROWING_DAGGER:{id:2247,name:"Throwing Dagger",label:{zh:""}},TRICK_ATTACK:{id:2258,name:"Trick Attack",label:{zh:""}},AEOLIAN_EDGE:{id:2255,name:"Aeolian Edge",label:{zh:""}},TEN:{id:2259,name:"Ten",label:{zh:""}},NINJUTSU:{id:2260,name:"Ninjutsu",label:{zh:""}},CHI:{id:2261,name:"Chi",label:{zh:""}},DEATH_BLOSSOM:{id:2254,name:"Death Blossom",label:{zh:""}},SHUKUCHI:{id:2262,name:"Shukuchi",label:{zh:""}},JIN:{id:2263,name:"Jin",label:{zh:""}},KASSATSU:{id:2264,name:"Kassatsu",label:{zh:""}},HAKKE_MUJINSATSU:{id:16488,name:"Hakke Mujinsatsu",label:{zh:""}},ARMOR_CRUSH:{id:3563,name:"Armor Crush",label:{zh:""}},DREAM_WITHIN_A_DREAM:{id:3566,name:"Dream Within a Dream",label:{zh:""}},HELLFROG_MEDIUM:{id:7401,name:"Hellfrog Medium",label:{zh:""}},DOKUMORI:{id:36957,name:"Dokumori",label:{zh:""}},BHAVACAKRA:{id:7402,name:"Bhavacakra",label:{zh:""}},TEN_CHI_JIN:{id:7403,name:"Ten Chi Jin",label:{zh:""}},MEISUI:{id:16489,name:"Meisui",label:{zh:""}},BUNSHIN:{id:16493,name:"Bunshin",label:{zh:""}},PHANTOM_KAMAITACHI:{id:25774,name:"Phantom Kamaitachi",label:{zh:""}},FORKED_RAIJU:{id:25777,name:"Forked Raiju",label:{zh:""}},FLEETING_RAIJU:{id:25778,name:"Fleeting Raiju",label:{zh:""}},KUNAIS_BANE:{id:36958,name:"Kunai's Bane",label:{zh:""}},DEATHFROG_MEDIUM:{id:36959,name:"Deathfrog Medium",label:{zh:""}},ZESHO_MEPPO:{id:36960,name:"Zesho Meppo",label:{zh:""}},TENRI_JINDO:{id:36961,name:"Tenri Jindo",label:{zh:""}},KATON:{id:2266,name:"Katon",label:{zh:""}},RAITON:{id:2267,name:"Raiton",label:{zh:""}},HYOTON:{id:2268,name:"Hyoton",label:{zh:""}},HUTON:{id:2269,name:"Huton",label:{zh:""}},DOTON:{id:2270,name:"Doton",label:{zh:""}},SUITON:{id:2271,name:"Suiton",label:{zh:""}},GOKA_MEKKYAKU:{id:16491,name:"Goka Mekkyaku",label:{zh:""}},HYOSHO_RANRYU:{id:16492,name:"Hyosho Ranryu",label:{zh:""}},RABBIT_MEDIUM:{id:2272,name:"Rabbit Medium",label:{zh:""}},FUMA_SHURIKEN:{id:2265,name:"Fuma Shuriken",label:{zh:""}},FUMA_SHURIKEN_TEN:{id:18873,name:"Fuma Shuriken (Ten)",label:{zh:""}},FUMA_SHURIKEN_CHI:{id:18874,name:"Fuma Shuriken (Chi)",label:{zh:""}},FUMA_SHURIKEN_JIN:{id:18875,name:"Fuma Shuriken (Jin)",label:{zh:""}},KATON_TEN:{id:18876,name:"Katon (Ten)",label:{zh:""}},RAITON_CHI:{id:18877,name:"Raiton (Chi)",label:{zh:""}},HYOTON_JIN:{id:18878,name:"Hyoton (Jin)",label:{zh:""}},HUTON_TEN:{id:18879,name:"Huton (Ten)",label:{zh:""}},DOTON_CHI:{id:18880,name:"Doton (Chi)",label:{zh:""}},SUITON_JIN:{id:18881,name:"Suiton (Jin)",label:{zh:""}}}),mL=ie()({cd_MUDRA_HACK:{name:"cd_MudraHack"},cd_MUDRA:{name:"cd_Mudra"},cd_SHADE_SHIFT:{name:"cd_Shadeshift"},cd_HIDE:{name:"cd_Hide"},cd_TRICK_ATTACK:{name:"cd_TrickAttack"},cd_SHUKUCHI:{name:"cd_Shukuchi"},cd_KASSATSU:{name:"cd_Kassatsu"},cd_DREAM_WITHIN_A_DREAM:{name:"cd_DREAM_WITHIN_A_DREAM"},cd_DOKUMORI:{name:"cd_Dokumori"},cd_TEN_CHI_JIN:{name:"cd_TenChiJin"},cd_MEISUI:{name:"cd_Meisui"},cd_BUNSHIN:{name:"cd_Bunshin"},cd_BHAVACAKRA:{name:"cd_Bhavacakra"},cd_TENRI_JINDO:{name:"cd_TenriJindo"}}),RL=ie()({KAZEMATOI:{name:"Kazematoi",label:{zh:""}},NINKI:{name:"Ninki",label:{zh:""}}}),NR=ie()({MUDRA:{name:"Mudra",label:{zh:""}},SHADE_SHIFT:{name:"Shade Shift",label:{zh:""}},HIDDEN:{name:"Hidden",label:{zh:""}},TRICK_ATTACK:{name:"Trick Attack",label:{zh:""}},KASSATSU:{name:"Kassatsu",label:{zh:""}},DOKUMORI:{name:"Dokumori",label:{zh:""}},TENRI_JINDO_READY:{name:"Tenri Jindo Ready",label:{zh:""}},TEN_CHI_JIN:{name:"Ten Chi Jin",maximumStacks:3,label:{zh:""}},MEISUI:{name:"Meisui",label:{zh:""}},SHADOW_WALKER:{name:"Shadow Walker",label:{zh:""}},BUNSHIN:{name:"Bunshin",maximumStacks:5,label:{zh:""}},PHANTOM_KAMAITACHI_READY:{name:"Phantom Kamaitachi Ready",label:{zh:""}},RAIJU_READY:{name:"Raiju Ready",maximumStacks:3,label:{zh:""}},KUNAIS_BANE:{name:"Kunai's Bane",label:{zh:""}},HIGI:{name:"Higi",label:{zh:""}},DOTON:{name:"Doton",mayBeToggled:!0,label:{zh:""}}}),TL=ie()({NIN_COMBO_TRACKER:{name:"NIN Combo",label:{zh:""}},NIN_AOE_COMBO_TRACKER:{name:"NIN AOE Combo",label:{zh:"AOE"}},MUDRA_TRACKER:{name:"Mudra Tracker",label:{zh:""}},BUNNY:{name:"Bunny",label:{zh:""}}}),SL=ie()({ENHANCED_SHUKUCHI_II:{name:"Enhanced Shukuchi II",level:74},MELEE_MASTERY_NIN:{name:"Melee Mastery NIN",level:74},ENHANCED_KASSATSU:{name:"Enhanced Kassatsu",level:76},SHUKIHO_II:{name:"Shukiho II",level:78},SHUKIHO_III:{name:"Shukiho III",level:84},MELEE_MASTERY_II_NIN:{name:"Melee Mastery II NIN",level:84},ENHANCED_MEISUI:{name:"Enhanced Meisui",level:88},ENHANCED_RAITON:{name:"Enhanced Raiton",level:90},TRICK_ATTACK_MASTERY:{name:"Trick Attack Mastery",level:92},MELEE_MASTERY_III_NIN:{name:"Melee Mastery III NIN",level:94},ENHANCED_DOKUMORI:{name:"Enhanced Dokumori",level:96},ENHANCED_TEN_CHI_JIN:{name:"Enhanced Ten Chi Jin",level:100}}),IL={...RL,...NR,...TL},_L=ie()({FIRE_IN_RED:{id:34650,name:"Fire in Red",label:{zh:"",ja:""}},AERO_IN_GREEN:{id:34651,name:"Aero in Green",label:{zh:"",ja:""}},WATER_IN_BLUE:{id:34652,name:"Water in Blue",label:{zh:"",ja:""}},FIRE_II_IN_RED:{id:34656,name:"Fire II in Red",label:{zh:"",ja:""},discordEmote:"Fire2inRed"},AERO_II_IN_GREEN:{id:34657,name:"Aero II in Green",label:{zh:"",ja:""},discordEmote:"Aero2inGreen"},WATER_II_IN_BLUE:{id:34658,name:"Water II in Blue",label:{zh:"",ja:""},discordEmote:"Water2inBlue"},BLIZZARD_IN_CYAN:{id:34653,name:"Blizzard in Cyan",label:{zh:"",ja:""}},STONE_IN_YELLOW:{id:34654,name:"Stone in Yellow",label:{zh:"",ja:""}},THUNDER_IN_MAGENTA:{id:34655,name:"Thunder in Magenta",label:{zh:"",ja:""}},BLIZZARD_II_IN_CYAN:{id:34659,name:"Blizzard II in Cyan",label:{zh:"",ja:""},discordEmote:"Blizzard2inCyan"},STONE_II_IN_YELLOW:{id:34660,name:"Stone II in Yellow",label:{zh:"",ja:""},discordEmote:"Stone2inYellow"},THUNDER_II_IN_MAGENTA:{id:34661,name:"Thunder II in Magenta",label:{zh:"",ja:""},discordEmote:"Thunder2inMagenta"},HOLY_IN_WHITE:{id:34662,name:"Holy in White",label:{zh:"",ja:""}},COMET_IN_BLACK:{id:34663,name:"Comet in Black",label:{zh:"",ja:""}},RAINBOW_DRIP:{id:34688,name:"Rainbow Drip",label:{zh:"",ja:""}},STAR_PRISM:{id:34681,name:"Star Prism",label:{zh:"",ja:""}},TEMPERA_COAT:{id:34685,name:"Tempera Coat",label:{zh:"",ja:""}},TEMPERA_GRASSA:{id:34686,name:"Tempera Grassa",label:{zh:"",ja:""}},TEMPERA_COAT_POP:{name:"Pop Tempera Coat",label:{zh:"",ja:""}},TEMPERA_GRASSA_POP:{name:"Pop Tempera Grassa",label:{zh:"",ja:""}},SMUDGE:{id:34684,name:"Smudge",label:{zh:"",ja:""}},SUBTRACTIVE_PALETTE:{id:34683,name:"Subtractive Palette",label:{zh:"",ja:""}},CREATURE_MOTIF:{id:34689,name:"Creature Motif",label:{zh:"",ja:""}},POM_MOTIF:{id:34664,name:"Pom Motif",label:{zh:"",ja:""}},WING_MOTIF:{id:34665,name:"Wing Motif",label:{zh:"",ja:""}},CLAW_MOTIF:{id:34666,name:"Claw Motif",label:{zh:"",ja:""}},MAW_MOTIF:{id:34667,name:"Maw Motif",label:{zh:"",ja:""}},LIVING_MUSE:{id:35347,name:"Living Muse",label:{zh:"",ja:""}},POM_MUSE:{id:34670,name:"Pom Muse",label:{zh:"",ja:""}},WINGED_MUSE:{id:34671,name:"Winged Muse",label:{zh:"",ja:""}},CLAWED_MUSE:{id:34672,name:"Clawed Muse",label:{zh:"",ja:""}},FANGED_MUSE:{id:34673,name:"Fanged Muse",label:{zh:"",ja:""}},MOG_OF_THE_AGES:{id:34676,name:"Mog of the Ages",label:{zh:"",ja:""}},RETRIBUTION_OF_THE_MADEEN:{id:34677,name:"Retribution of the Madeen",label:{zh:"",ja:""}},WEAPON_MOTIF:{id:34690,name:"Weapon Motif",label:{zh:"",ja:""}},STEEL_MUSE:{id:35348,name:"Steel Muse",label:{zh:"",ja:""}},HAMMER_MOTIF:{id:34668,name:"Hammer Motif",label:{zh:"",ja:""}},STRIKING_MUSE:{id:34674,name:"Striking Muse",label:{zh:"",ja:""}},HAMMER_STAMP:{id:34678,name:"Hammer Stamp",label:{zh:"",ja:""}},HAMMER_BRUSH:{id:34679,name:"Hammer Brush",label:{zh:"",ja:""}},POLISHING_HAMMER:{id:34680,name:"Polishing Hammer",label:{zh:"",ja:""}},LANDSCAPE_MOTIF:{id:34691,name:"Landscape Motif",label:{zh:"",ja:""}},SCENIC_MUSE:{id:35349,name:"Scenic Muse",label:{zh:"",ja:""}},STARRY_SKY_MOTIF:{id:34669,name:"Starry Sky Motif",label:{zh:"",ja:""}},STARRY_MUSE:{id:34675,name:"Starry Muse",label:{zh:"",ja:""}}}),gL=ie()({cd_TEMPERA_COAT:{name:"cd_TemperaCoat"},cd_SMUDGE:{name:"cd_Smudge"},cd_LIVING_MUSE:{name:"cd_LivingMuse"},cd_PORTRAIT:{name:"cd_Portrait",label:{zh:"CD/"}},cd_STEEL_MUSE:{name:"cd_SteelMuse"},cd_SCENIC_MUSE:{name:"cd_ScenicMuse"},cd_SUBTRACTIVE:{name:"cd_Subtractive",label:{zh:"CD"}},cd_GRASSA:{name:"cd_Grassa",label:{zh:"CD"}},cd_TEMPERA_POP:{name:"cd_TemperaPop",label:{zh:"CD"}}}),pL=ie()({PORTRAIT:{name:"Portrait",label:{zh:"//"}},DEPICTIONS:{name:"Depictions",label:{zh:"///"}},CREATURE_CANVAS:{name:"Creature Canvas",label:{zh:""}},WEAPON_CANVAS:{name:"Weapon Canvas",label:{zh:""}},LANDSCAPE_CANVAS:{name:"Landscape Canvas",label:{zh:""}},PALETTE_GAUGE:{name:"Palette Gauge",label:{zh:""}},PAINT:{name:"Paint",label:{zh:""}}}),CR=ie()({AETHERHUES:{name:"Aetherhues",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:2},MONOCHROME_TONES:{name:"Monochrome Tones",label:{zh:""}},SUBTRACTIVE_PALETTE:{name:"Subtractive Palette",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:3},HAMMER_TIME:{name:"Hammer Time",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:3},INSPIRATION:{name:"Inspiration",label:{zh:""},mayBeToggled:!0},SUBTRACTIVE_SPECTRUM:{name:"Subtractive Spectrum",label:{zh:""}},HYPERPHANTASIA:{name:"Hyperphantasia",label:{zh:""},maximumStacks:5},RAINBOW_BRIGHT:{name:"Rainbow Bright",label:{zh:""}},STARSTRUCK:{name:"Starstruck",label:{zh:""}},STARRY_MUSE:{name:"Starry Muse",label:{zh:""}},TEMPERA_COAT:{name:"Tempera Coat",label:{zh:""}},TEMPERA_GRASSA:{name:"Tempera Grassa",label:{zh:""}},SMUDGE:{name:"Smudge",label:{zh:""}}}),NL=ie()({HAMMER_COMBO:{name:"Hammer Combo Counter",label:{zh:""}}}),CL=ie()({PICTOMANCY_MASTERY_II:{name:"Pictomancy Mastery II",level:74},ENHANCED_ARTISTRY:{name:"Enhanced Artistry",level:80},ENHANCED_PICTOMANCY:{name:"Enhanced Pictomancy",level:82},ENHANCED_SMUDGE:{name:"Enhanced Smudge",level:84},PICTOMANCY_MASTERY_III:{name:"Pictomancy Mastery III",level:84},ENHANCED_PICTOMANCY_II:{name:"Enhanced Pictomancy II",level:86},ENHANCED_TEMPERA:{name:"Enhanced Tempera",level:88},ENHANCED_PALETTE:{name:"Enhanced Palette",level:90},ENHANCED_PICTOMANCY_III:{name:"Enhanced Pictomancy III",level:92},PICTOMANCY_MASTERY_IV:{name:"Pictomancy Mastery IV",level:94},ENHANCED_PICTOMANCY_IV:{name:"Enhanced Pictomancy IV",level:96},ENHANCED_PICTOMANCY_V:{name:"Enhanced Pictomancy V",level:100}}),OL={...pL,...CR,...NL},bL=ie()({FAST_BLADE:{id:9,name:"Fast Blade",label:{zh:""}},FIGHT_OR_FLIGHT:{id:20,name:"Fight or Flight",label:{zh:""}},RIOT_BLADE:{id:15,name:"Riot Blade",label:{zh:""}},TOTAL_ECLIPSE:{id:7381,name:"Total Eclipse",label:{zh:""}},SHIELD_BASH:{id:16,name:"Shield Bash",label:{zh:""}},IRON_WILL:{id:28,name:"Iron Will",label:{zh:""}},RELEASE_IRON_WILL:{id:32065,name:"Release Iron Will",label:{zh:""}},SHIELD_LOB:{id:24,name:"Shield Lob",label:{zh:""}},SPIRITS_WITHIN:{id:29,name:"Spirits Within",label:{zh:""}},SHELTRON:{id:3542,name:"Sheltron",label:{zh:""}},SENTINEL:{id:17,name:"Sentinel",label:{zh:""}},PROMINENCE:{id:16457,name:"Prominence",label:{zh:""}},COVER:{id:27,name:"Cover",label:{zh:""}},CIRCLE_OF_SCORN:{id:23,name:"Circle of Scorn",label:{zh:""}},HALLOWED_GROUND:{id:30,name:"Hallowed Ground",label:{zh:""}},BULWARK:{id:22,name:"Bulwark",label:{zh:""}},GORING_BLADE:{id:3538,name:"Goring Blade",label:{zh:""}},DIVINE_VEIL:{id:3540,name:"Divine Veil",label:{zh:""}},CLEMENCY:{id:3541,name:"Clemency",label:{zh:""}},ROYAL_AUTHORITY:{id:3539,name:"Royal Authority",label:{zh:""}},INTERVENTION:{id:7382,name:"Intervention",label:{zh:""}},HOLY_SPIRIT:{id:7384,name:"Holy Spirit",label:{zh:""}},INTERVENE:{id:16461,name:"Intervene",label:{zh:""}},REQUIESCAT:{id:7383,name:"Requiescat",label:{zh:""}},PASSAGE_OF_ARMS:{id:7385,name:"Passage of Arms",label:{zh:""}},HOLY_CIRCLE:{id:16458,name:"Holy Circle",label:{zh:""}},ATONEMENT:{id:16460,name:"Atonement",label:{zh:""}},SUPPLICATION:{id:36918,name:"Supplication",label:{zh:"2"}},SEPULCHRE:{id:36919,name:"Sepulchre",label:{zh:"3"}},CONFITEOR:{id:16459,name:"Confiteor",label:{zh:""}},HOLY_SHELTRON:{id:25746,name:"Holy Sheltron",label:{zh:""}},EXPIACION:{id:25747,name:"Expiacion",label:{zh:""}},BLADE_OF_FAITH:{id:25748,name:"Blade of Faith",label:{zh:"2"}},BLADE_OF_TRUTH:{id:25749,name:"Blade of Truth",label:{zh:"3"}},BLADE_OF_VALOR:{id:25750,name:"Blade of Valor",label:{zh:"4"}},GUARDIAN:{id:36920,name:"Guardian",label:{zh:""}},IMPERATOR:{id:36921,name:"Imperator",label:{zh:""}},BLADE_OF_HONOR:{id:36922,name:"Blade of Honor",label:{zh:""}}}),DL=ie()({cd_FIGHT_OR_FLIGHT:{name:"cd_FightOrFlight"},cd_IRON_WILL:{name:"cd_IronWill"},cd_RELEASE_IRON_WILL:{name:"cd_ReleaseIronWill"},cd_SPIRITS_WITHIN:{name:"cd_SpiritsWithin"},cd_SHELTRON:{name:"cd_Sheltron"},cd_SENTINEL:{name:"cd_Sentinel"},cd_COVER:{name:"cd_Cover"},cd_CIRCLE_OF_SCORN:{name:"cd_CircleOfScorn"},cd_HALLOWED_GROUND:{name:"cd_HallowedGround"},cd_BULWARK:{name:"cd_Bulwark"},cd_DIVINE_VEIL:{name:"cd_DivineVeil"},cd_INTERVENTION:{name:"cd_Intervention"},cd_INTERVENE:{name:"cd_Intervene"},cd_REQUIESCAT:{name:"cd_Requiescat"},cd_PASSAGE_OF_ARMS:{name:"cd_PassageOfArms"},cd_HOLY_SHELTRON:{name:"cd_HolySheltron"},cd_EXPIACION:{name:"cd_Expiacion"},cd_GUARDIAN:{name:"cd_Guardian"},cd_IMPERATOR:{name:"cd_Imperator"},cd_BLADE_OF_HONOR:{name:"cd_BladeOfHonor"}}),yL=ie()({OATH_GAUGE:{name:"Oath Gauge",label:{zh:""}}}),OR=ie()({FIGHT_OR_FLIGHT:{name:"Fight or Flight",label:{zh:""}},IRON_WILL:{name:"Iron Will",label:{zh:""}},CIRCLE_OF_SCORN_DOT:{name:"Circle of Scorn DoT",label:{zh:"DOT"}},SHELTRON:{name:"Sheltron",label:{zh:""}},SENTINEL:{name:"Sentinel",label:{zh:""}},COVER:{name:"Cover",label:{zh:""}},HALLOWED_GROUND:{name:"Hallowed Ground",label:{zh:""}},BULWARK:{name:"Bulwark",label:{zh:""}},GORING_BLADE_READY:{name:"Goring Blade Ready",label:{zh:""}},DIVINE_VEIL:{name:"Divine Veil",label:{zh:""}},ATONEMENT_READY:{name:"Atonement Ready",label:{zh:""}},DIVINE_MIGHT:{name:"Divine Might",label:{zh:""}},INTERVENTION:{name:"Intervention",label:{zh:""}},KNIGHTS_RESOLVE:{name:"Knight's Resolve",label:{zh:""}},KNIGHTS_BENEDICTION:{name:"Knight's Benediction",label:{zh:""}},REQUIESCAT:{name:"Requiescat",maximumStacks:4,label:{zh:""}},CONFITEOR_READY:{name:"Confiteor Ready",label:{zh:""}},PASSAGE_OF_ARMS:{name:"Passage of Arms",label:{zh:""}},ARMS_UP:{name:"Arms Up",label:{zh:""}},SUPPLICATION_READY:{name:"Supplication Ready",label:{zh:""}},SEPULCHRE_READY:{name:"Sepulchre Ready",label:{zh:""}},HOLY_SHELTRON:{name:"Holy Sheltron",label:{zh:""}},BLADE_OF_HONOR_READY:{name:"Blade of Honor Ready",label:{zh:""}},GUARDIAN:{name:"Guardian",label:{zh:""}},GUARDIANS_WILL:{name:"Guardian's Will",label:{zh:""}}}),vL=ie()({PLD_COMBO_TRACKER:{name:"PLD Combo Tracker",label:{zh:""}},PLD_CONFITEOR_COMBO_TRACKER:{name:"PLD Confiteor Combo Tracker",label:{zh:""}},PLD_AOE_COMBO_TRACKER:{name:"PLD AOE Combo Tracker",label:{zh:"AOE"}}}),ML=ie()({ENHANCED_PROMINENCE:{name:"Enhanced Prominence",level:72},ENHANCED_SHELTRON:{name:"Enhanced Sheltron",level:74},SWORD_OATH:{name:"Sword Oath",level:76},ENHANCED_REQUIESCAT:{name:"Enhanced Requiescat",level:80},SHELTRON_MASTERY:{name:"Sheltron Mastery",level:82},ENHANCED_INTERVENTION:{name:"Enhanced Intervention",level:82},DIVINE_MAGIC_MASTERY_II:{name:"Divine Magic Mastery II",level:84},SPIRITS_WITHIN_MASTERY:{name:"Spirits Within Mastery",level:86},ENHANCED_DIVINE_VEIL:{name:"Enhanced Divine Veil",level:88},SENTINEL_MASTERY:{name:"Sentinel Mastery",level:92},REQUIESCAT_MASTERY:{name:"Requiescat Mastery",level:96},ENHANCED_BLADE_OF_VALOR:{name:"Enhanced Blade of Valor",level:100}}),LL={...yL,...OR,...vL},HL=ie()({RIPOSTE:{id:7504,name:"Riposte",label:{zh:"",ja:""}},VERTHUNDER:{id:7505,name:"Verthunder",label:{zh:"",ja:""}},CORPS_A_CORPS:{id:7506,name:"Corps-a-corps",label:{zh:"",ja:""}},VERAERO:{id:7507,name:"Veraero",label:{zh:"",ja:""}},VERFIRE:{id:7510,name:"Verfire",label:{zh:"",ja:""}},VERSTONE:{id:7511,name:"Verstone",label:{zh:"",ja:""}},ZWERCHHAU:{id:7512,name:"Zwerchhau",label:{zh:"",ja:""}},DISPLACEMENT:{id:7515,name:"Displacement",label:{zh:"",ja:""}},FLECHE:{id:7517,name:"Fleche",label:{zh:"",ja:""}},REDOUBLEMENT:{id:7516,name:"Redoublement",label:{zh:"",ja:""}},ACCELERATION:{id:7518,name:"Acceleration",label:{zh:"",ja:""}},MOULINET:{id:7513,name:"Moulinet",label:{zh:"",ja:""}},VERCURE:{id:7514,name:"Vercure",label:{zh:"",ja:""}},CONTRE_SIXTE:{id:7519,name:"Contre Sixte",label:{zh:"",ja:""}},EMBOLDEN:{id:7520,name:"Embolden",label:{zh:"",ja:""}},MANAFICATION:{id:7521,name:"Manafication",label:{zh:"",ja:""}},JOLT_II:{id:7524,name:"Jolt II",label:{zh:"",ja:""}},VERRAISE:{id:7523,name:"Verraise",label:{zh:"",ja:""}},IMPACT:{id:16526,name:"Impact",label:{zh:"",ja:""}},VERFLARE:{id:7525,name:"Verflare",label:{zh:"",ja:""}},VERHOLY:{id:7526,name:"Verholy",label:{zh:"",ja:""}},ENCHANTED_RIPOSTE:{id:7527,name:"Enchanted Riposte",label:{zh:"",ja:""}},ENCHANTED_ZWERCHHAU:{id:7528,name:"Enchanted Zwerchhau",label:{zh:"",ja:""}},ENCHANTED_REDOUBLEMENT:{id:7529,name:"Enchanted Redoublement",label:{zh:"",ja:""}},ENCHANTED_MOULINET:{id:7530,name:"Enchanted Moulinet",label:{zh:"",ja:""}},VERTHUNDER_II:{id:16524,name:"Verthunder II",label:{zh:"",ja:""}},VERAERO_II:{id:16525,name:"Veraero II",label:{zh:"",ja:""}},ENGAGEMENT:{id:16527,name:"Engagement",label:{zh:"",ja:""}},ENCHANTED_REPRISE:{id:16528,name:"Enchanted Reprise",label:{zh:"",ja:""}},REPRISE:{id:16529,name:"Reprise",label:{zh:"",ja:""}},SCORCH:{id:16530,name:"Scorch",label:{zh:"",ja:""}},VERTHUNDER_III:{id:25855,name:"Verthunder III",label:{zh:"",ja:""}},VERAERO_III:{id:25856,name:"Veraero III",label:{zh:"",ja:""}},MAGICK_BARRIER:{id:25857,name:"Magick Barrier",label:{zh:"",ja:""}},RESOLUTION:{id:25858,name:"Resolution",label:{zh:"",ja:""}},ENCHANTED_MOULINET_II:{id:37002,name:"Enchanted Moulinet Deux",label:{zh:"",ja:""}},ENCHANTED_MOULINET_III:{id:37003,name:"Enchanted Moulinet Trois",label:{zh:"",ja:""}},JOLT_III:{id:37004,name:"Jolt III",label:{zh:"",ja:""}},VICE_OF_THORNS:{id:37005,name:"Vice of Thorns",label:{zh:"",ja:""}},GRAND_IMPACT:{id:37006,name:"Grand Impact",label:{zh:"",ja:""}},PREFULGENCE:{id:37007,name:"Prefulgence",label:{zh:"",ja:""}}}),UL=ie()({cd_CORPS_A_CORPS:{name:"cd_CorpsACorps"},cd_DISPLACEMENT:{name:"cd_Displacement"},cd_FLECHE:{name:"cd_Fleche"},cd_ACCELERATION:{name:"cd_Acceleration"},cd_CONTRE_SIXTE:{name:"cd_ContreSixte"},cd_EMBOLDEN:{name:"cd_Embolden"},cd_MANAFICATION:{name:"cd_Manafication"},cd_MAGICK_BARRIER:{name:"cd_MagickBarrier"},cd_VICE_OF_THORNS:{name:"cd_ViceOfThorns"},cd_PREFULGENCE:{name:"cd_Prefulgence"}}),kL=ie()({WHITE_MANA:{name:"White Mana",label:{zh:""}},BLACK_MANA:{name:"Black Mana",label:{zh:""}},MANA_STACKS:{name:"Mana Stacks",label:{zh:""}}}),bR=ie()({ACCELERATION:{name:"Acceleration",label:{zh:""}},DUALCAST:{name:"Dualcast",label:{zh:""}},EMBOLDEN:{name:"Embolden",label:{zh:""}},GRAND_IMPACT_READY:{name:"Grand Impact Ready",label:{zh:""}},MAGICK_BARRIER:{name:"Magick Barrier",label:{zh:""}},MAGICKED_SWORDPLAY:{name:"Magicked Swordplay",label:{zh:""},maximumStacks:3},MANAFICATION:{name:"Manafication",label:{zh:""}},PREFULGENCE_READY:{name:"Prefulgence Ready",label:{zh:""}},THORNED_FLOURISH:{name:"Thorned Flourish",label:{zh:""}},VERFIRE_READY:{name:"Verfire Ready",label:{zh:""}},VERSTONE_READY:{name:"Verstone Ready",label:{zh:""}}}),xL=ie()({RDM_MELEE_COUNTER:{name:"RDM Melee Combo",label:{zh:""}},RDM_FINISHER_COUNTER:{name:"RDM Finisher Combo",label:{zh:"/"}},RDM_AOE_COUNTER:{name:"RDM AoE Combo",label:{zh:"AOE"}}}),PL=ie()({ENHANCED_DISPLACEMENT:{name:"Enhanced Displacement",level:72},RED_MAGIC_MASTERY:{name:"Red Magic Mastery",level:74},RED_MAGIC_MASTERY_II:{name:"Red Magic Mastery II",level:82},RED_MAGIC_MASTERY_III:{name:"Red Magic Mastery III",level:84},ENHANCED_ACCELERATION:{name:"Enhanced Acceleration",level:88},ENHANCED_EMBOLDEN:{name:"Enhanced Embolden",level:92},ENCHANTED_BLADE_MASTERY:{name:"Enchanted Blade Mastery",level:94},ENHANCED_ACCELERATION_II:{name:"Enhanced Acceleration II",level:96},ENHANCED_MANAFICATION:{name:"Enhanced Manafication",level:100}}),wL={...kL,...bR,...xL},GL=ie()({SLICE:{id:24373,name:"Slice",label:{zh:""}},WAXING_SLICE:{id:24374,name:"Waxing Slice",label:{zh:""}},INFERNAL_SLICE:{id:24375,name:"Infernal Slice",label:{zh:""}},SHADOW_OF_DEATH:{id:24378,name:"Shadow of Death",label:{zh:""}},SOUL_SLICE:{id:24380,name:"Soul Slice",label:{zh:""}},GIBBET:{id:24382,name:"Gibbet",label:{zh:""}},GALLOWS:{id:24383,name:"Gallows",label:{zh:""}},EXECUTIONERS_GIBBET:{id:36970,name:"Executioner's Gibbet",label:{zh:""}},EXECUTIONERS_GALLOWS:{id:36971,name:"Executioner's Gallows",label:{zh:""}},VOID_REAPING:{id:24395,name:"Void Reaping",label:{zh:""}},CROSS_REAPING:{id:24396,name:"Cross Reaping",label:{zh:""}},PLENTIFUL_HARVEST:{id:24385,name:"Plentiful Harvest",label:{zh:""}},HARVEST_MOON:{id:24388,name:"Harvest Moon",label:{zh:""}},COMMUNIO:{id:24398,name:"Communio",label:{zh:""}},PERFECTIO:{id:36973,name:"Perfectio",label:{zh:""}},SOULSOW:{id:24387,name:"Soulsow",label:{zh:""}},HARPE:{id:24386,name:"Harpe",label:{zh:""}},BLOOD_STALK:{id:24389,name:"Blood Stalk",label:{zh:""}},UNVEILED_GIBBET:{id:24390,name:"Unveiled Gibbet",label:{zh:""}},UNVEILED_GALLOWS:{id:24391,name:"Unveiled Gallows",label:{zh:""}},LEMURES_SLICE:{id:24399,name:"Lemure's Slice",label:{zh:""}},SACRIFICIUM:{id:36969,name:"Sacrificium",label:{zh:""}},ARCANE_CIRCLE:{id:24405,name:"Arcane Circle",label:{zh:""}},GLUTTONY:{id:24393,name:"Gluttony",label:{zh:""}},ENSHROUD:{id:24394,name:"Enshroud",label:{zh:""}},SPINNING_SCYTHE:{id:24376,name:"Spinning Scythe",label:{zh:""}},NIGHTMARE_SCYTHE:{id:24377,name:"Nightmare Scythe",label:{zh:""}},WHORL_OF_DEATH:{id:24379,name:"Whorl of Death",label:{zh:""}},SOUL_SCYTHE:{id:24381,name:"Soul Scythe",label:{zh:""}},GUILLOTINE:{id:24384,name:"Guillotine",label:{zh:""}},EXECUTIONERS_GUILLOTINE:{id:36972,name:"Executioner's Guillotine",label:{zh:""}},GRIM_REAPING:{id:24397,name:"Grim Reaping",label:{zh:""}},GRIM_SWATHE:{id:24392,name:"Grim Swathe",label:{zh:""}},LEMURES_SCYTHE:{id:24400,name:"Lemure's Scythe",label:{zh:""}},ARCANE_CREST:{id:24404,name:"Arcane Crest",label:{zh:""}},ARCANE_CREST_POP:{name:"Pop Arcane Crest",label:{zh:""}},HELLS_INGRESS:{id:24401,name:"Hell's Ingress",label:{zh:""}},HELLS_EGRESS:{id:24402,name:"Hell's Egress",label:{zh:""}},REGRESS:{id:24403,name:"Regress",label:{zh:""}},GAIN_SOUL_GAUGE:{name:"+10 Soul Gauge",label:{zh:"+10"}}}),BL=ie()({cd_ARCANE_CIRCLE:{name:"cd_ArcaneCircle"},cd_GLUTTONY:{name:"cd_Gluttony"},cd_SOUL_SLICE:{name:"cd_SoulSlice"},cd_ENSHROUD:{name:"cd_Enshroud"},cd_INGRESS_EGRESS:{name:"cd_IngressEgress",label:{zh:"CD/"}},cd_ARCANE_CREST:{name:"cd_ArcaneCrest"},cd_ARCANE_CREST_POP:{name:"cd_ArcaneCrestPop"},cd_BLOOD_STALK:{name:"cd_BloodStalk"},cd_LEMURES_SLICE:{name:"cd_LemuresSlice"},cd_SACRIFICIUM:{name:"cd_Sacrificium"},cd_GAIN_SOUL_GAUGE:{name:"cd_GainSoulGauge"}}),FL=ie()({SOUL:{name:"Soul",label:{zh:""}},SHROUD:{name:"Shroud",label:{zh:""}},LEMURE_SHROUD:{name:"Lemure Shroud",label:{zh:""}},VOID_SHROUD:{name:"Void Shroud",label:{zh:""}}}),DR=ie()({DEATHS_DESIGN:{name:"Death's Design",label:{zh:""}},SOUL_REAVER:{name:"Soul Reaver",label:{zh:""},maximumStacks:2},ENHANCED_GIBBET:{name:"Enhanced Gibbet",label:{zh:""}},ENHANCED_GALLOWS:{name:"Enhanced Gallows",label:{zh:""}},EXECUTIONER:{name:"Executioner",label:{zh:""},maximumStacks:2},ENSHROUDED:{name:"Enshrouded",label:{zh:""}},ENHANCED_VOID_REAPING:{name:"Enhanced Void Reaping",label:{zh:""}},ENHANCED_CROSS_REAPING:{name:"Enhanced Cross Reaping",label:{zh:""}},OBLATIO:{name:"Oblatio",label:{zh:""}},IDEAL_HOST:{name:"Ideal Host",label:{zh:""}},PERFECTIO_OCCULTA:{name:"Perfectio Occulta",label:{zh:""}},PERFECTIO_PARATA:{name:"Perfectio Parata",label:{zh:""}},ARCANE_CIRCLE:{name:"Arcane Circle",label:{zh:""}},CIRCLE_OF_SACRIFICE:{name:"Circle of Sacrifice",label:{zh:""}},BLOODSOWN_CIRCLE:{name:"Bloodsown Circle",label:{zh:""}},IMMORTAL_SACRIFICE:{name:"Immortal Sacrifice",label:{zh:""},maximumStacks:8},CREST_OF_TIME_BORROWED:{name:"Crest of Time Borrowed",label:{zh:""}},CREST_OF_TIME_RETURNED:{name:"Crest of Time Returned",label:{zh:""}},SOULSOW:{name:"Soulsow",label:{zh:""}},THRESHOLD:{name:"Threshold",label:{zh:""}},ENHANCED_HARPE:{name:"Enhanced Harpe",label:{zh:""}}}),zL=ie()({ARCANE_CREST:{name:"Arcane Crest",label:{zh:""}},HELLS_INGRESS_USED:{name:"Hell's Ingress Used",label:{zh:""}},RPR_COMBO:{name:"RPR Combo",label:{zh:""}},RPR_AOE_COMBO:{name:"RPR AoE Combo",label:{zh:"AOE"}}}),jL=ie()({HELLSGATE:{name:"Hellsgate",level:74},TEMPERED_SOUL:{name:"Tempered Soul",level:78},SHROUD_GAUGE:{name:"Shroud Gauge",level:80},ENHANCED_ARCANE_CREST:{name:"Enhanced Arcane Crest",level:84},MELEE_MASTERY_II_RPR:{name:"Melee Mastery II",level:84},VOID_SOUL:{name:"Void Soul",level:86},ENHANCED_ARCANE_CIRCLE:{name:"Enhanced Arcane Circle",level:88},ENHANCED_ENSHROUD:{name:"Enhanced Enshroud",level:92},MELEE_MASTERY_III_RPR:{name:"Melee Mastery III",level:94},ENHANCED_GLUTTONY:{name:"Enhanced Gluttony",level:96},ENHANCED_PLENTIFUL_HARVEST:{name:"Enhanced Plentiful Harvest",level:100}}),YL={...FL,...DR,...zL},KL=ie()({ENPI:{id:7486,name:"Enpi",label:{zh:""}},HAKAZE:{id:7477,name:"Hakaze",label:{zh:""}},GYOFU:{id:36963,name:"Gyofu",label:{zh:""}},YUKIKAZE:{id:7480,name:"Yukikaze",label:{zh:""}},JINPU:{id:7478,name:"Jinpu",label:{zh:""}},GEKKO:{id:7481,name:"Gekko",label:{zh:""}},SHIFU:{id:7479,name:"Shifu",label:{zh:""}},KASHA:{id:7482,name:"Kasha",label:{zh:""}},FUGA:{id:7483,name:"Fuga",label:{zh:""}},FUKO:{id:25780,name:"Fuko",label:{zh:""}},MANGETSU:{id:7484,name:"Mangetsu",label:{zh:""}},OKA:{id:7485,name:"Oka",label:{zh:""}},MEIKYO_SHISUI:{id:7499,name:"Meikyo Shisui",label:{zh:""}},IKISHOTEN:{id:16482,name:"Ikishoten",label:{zh:""}},HISSATSU_SHINTEN:{id:7490,name:"Hissatsu: Shinten",label:{zh:""}},HISSATSU_KYUTEN:{id:7491,name:"Hissatsu: Kyuten",label:{zh:""}},HISSATSU_GYOTEN:{id:7492,name:"Hissatsu: Gyoten",label:{zh:""}},HISSATSU_YATEN:{id:7493,name:"Hissatsu: Yaten",label:{zh:""}},HISSATSU_SENEI:{id:16481,name:"Hissatsu: Senei",label:{zh:""}},HISSATSU_GUREN:{id:7496,name:"Hissatsu: Guren",label:{zh:""}},HAGAKURE:{id:7495,name:"Hagakure",label:{zh:""}},IAIJUTSU:{id:7867,name:"Iaijutsu",label:{zh:""}},TSUBAME_GAESHI:{id:16483,name:"Tsubame-gaeshi",label:{zh:""}},SHOHA:{id:16487,name:"Shoha",label:{zh:""}},THIRD_EYE:{id:7498,name:"Third Eye",label:{zh:""}},TENGENTSU:{id:36962,name:"Tengentsu",label:{zh:""}},OGI_NAMIKIRI:{id:25781,name:"Ogi Namikiri",label:{zh:""}},KAESHI_NAMIKIRI:{id:25782,name:"Kaeshi: Namikiri",label:{zh:""}},ZANSHIN:{id:36964,name:"Zanshin",label:{zh:""}},MEDITATE:{id:7497,name:"Meditate",label:{zh:""}},HIGANBANA:{id:7489,name:"Higanbana",label:{zh:""}},TENKA_GOKEN:{id:7488,name:"Tenka Goken",label:{zh:""}},KAESHI_GOKEN:{id:16485,name:"Kaeshi: Goken",label:{zh:""}},TENDO_GOKEN:{id:36965,name:"Tendo Goken",label:{zh:""}},TENDO_KAESHI_GOKEN:{id:36967,name:"Tendo Kaeshi Goken",label:{zh:""}},MIDARE_SETSUGEKKA:{id:7487,name:"Midare Setsugekka",label:{zh:""}},KAESHI_SETSUGEKKA:{id:16486,name:"Kaeshi: Setsugekka",label:{zh:""}},TENDO_SETSUGEKKA:{id:36966,name:"Tendo Setsugekka",label:{zh:""}},TENDO_KAESHI_SETSUGEKKA:{id:36968,name:"Tendo Kaeshi Setsugekka",label:{zh:""}},THIRD_EYE_POP:{name:"Pop Third Eye",label:{zh:""}},TENGENTSU_POP:{name:"Pop Tengentsu",label:{zh:""}}}),VL=ie()({cd_YATEN:{name:"cd_Yaten",label:{zh:"CD"}},cd_GYOTEN:{name:"cd_Gyoten",label:{zh:"CD"}},cd_SENEI_GUREN:{name:"cd_Senei",label:{zh:"CD: /"}},cd_SHINTEN:{name:"cd_Shinten",label:{zh:"CD"}},cd_KYUTEN:{name:"cd_Kyuten",label:{zh:"CD"}},cd_MEDITATE:{name:"cd_Meditate"},cd_IKISHOTEN:{name:"cd_Ikishoten"},cd_ZANSHIN:{name:"cd_Zanshin"},cd_HAGAKURE:{name:"cd_Hagakure"},cd_SHOHA:{name:"cd_Shoha"},cd_MEIKYO_SHISUI:{name:"cd_MeikyoShisui"},cd_THIRD_EYE:{name:"cd_ThirdEye"},cd_THIRD_EYE_POP:{name:"cd_ThirdEyePop"}}),WL=ie()({KENKI:{name:"Kenki",label:{zh:""}},SETSU:{name:"Setsu",label:{zh:""}},GETSU:{name:"Getsu",label:{zh:""}},KA_SEN:{name:"Ka",label:{zh:""}},MEDITATION:{name:"Meditation",label:{zh:""}}}),yR=ie()({MEIKYO_SHISUI:{name:"Meikyo Shisui",label:{zh:""},maximumStacks:3},FUGETSU:{name:"Fugetsu",label:{zh:""}},FUKA:{name:"Fuka",label:{zh:""}},ZANSHIN_READY:{name:"Zanshin Ready",label:{zh:""}},TENDO:{name:"Tendo",label:{zh:""}},OGI_READY:{name:"Ogi Namikiri Ready",label:{zh:""}},TSUBAME_GAESHI_READY:{name:"Tsubame-gaeshi Ready",label:{zh:""}},THIRD_EYE:{name:"Third Eye",label:{zh:""}},TENGENTSU:{name:"Tengentsu",label:{zh:""}},TENGENTSUS_FORESIGHT:{name:"Tengentsu's Foresight",label:{zh:""}},MEDITATE:{name:"Meditate",label:{zh:""}},ENHANCED_ENPI:{name:"Enhanced Enpi",label:{zh:""}},HIGANBANA_DOT:{name:"HiganbanaDoT",label:{zh:"dot"}}}),XL=ie()({SAM_TWO_READY:{name:"SAMTwoReady",label:{zh:"2"}},SAM_TWO_AOE_READY:{name:"SAMTwoAoeReady",label:{zh:"AOE2"}},GEKKO_READY:{name:"GekkoReady",label:{zh:""}},KASHA_READY:{name:"KashaReady",label:{zh:""}},KAESHI_OGI_READY:{name:"KaeshiOgiReady",label:{zh:""}},KAESHI_TRACKER:{name:"KaeshiTracker",label:{zh:""}}}),qL=ie()({ENHANCED_IAIJUTSU:{name:"Enhanced Iaijutsu",level:74},ENHANCED_MEIKYO_SHISUI:{name:"Enhanced Meikyo Shisui",level:76},ENHANCED_FUGETSU_AND_FUKA:{name:"Enhanced Fugetsu and Fuka",level:78},THIRD_EYE_MASTERY:{name:"Third Eye Mastery",level:82},WAY_OF_THE_SAMURAI_II:{name:"Way of the Samurai II",level:84},FUGA_MASTERY:{name:"Fuga Mastery",level:86},ENHANCED_IKISHOTEN:{name:"Enhanced Ikishoten",level:90},HAKAZE_MASTERY:{name:"Hakaze Mastery",level:92},ENHANCED_HISSATSU:{name:"Enhanced Hissatsu",level:94},WAY_OF_THE_SAMURAI_III:{name:"Way of the Samurai III",level:94},ENHANCED_IKISHOTEN_II:{name:"Enhanced Ikishoten II",level:96},ENHANCED_MEIKYO_SHISUI_II:{name:"Enhanced Meikyo Shisui II",level:100}}),ZL={...WL,...yR,...XL},vR=ie()({PHYSICK:{id:190,name:"Physick",label:{zh:"",ja:""}},SUMMON_EOS:{id:17215,name:"Summon Eos",label:{zh:"",ja:""}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:"",ja:""}},WHISPERING_DAWN:{id:16537,name:"Whispering Dawn",label:{zh:"",ja:""}},BIO_II:{id:17865,name:"Bio II",label:{zh:"",ja:""}},ADLOQUIUM:{id:185,name:"Adloquium",label:{zh:"",ja:""}},SUCCOR:{id:186,name:"Succor",label:{zh:"",ja:""}},RUIN_II:{id:17870,name:"Ruin II",label:{zh:"",ja:""}},FEY_ILLUMINATION:{id:16538,name:"Fey Illumination",label:{zh:"",ja:""}},AETHERFLOW:{id:166,name:"Aetherflow",label:{zh:"",ja:""}},ENERGY_DRAIN:{id:167,name:"Energy Drain",label:{zh:"",ja:""}},LUSTRATE:{id:189,name:"Lustrate",label:{zh:"",ja:""}},ART_OF_WAR:{id:16539,name:"Art of War",label:{zh:"",ja:""}},SACRED_SOIL:{id:188,name:"Sacred Soil",label:{zh:"",ja:""}},INDOMITABILITY:{id:3583,name:"Indomitability",label:{zh:"",ja:""}},DEPLOYMENT_TACTICS:{id:3585,name:"Deployment Tactics",label:{zh:"",ja:""}},EMERGENCY_TACTICS:{id:3586,name:"Emergency Tactics",label:{zh:"",ja:""}},DISSIPATION:{id:3587,name:"Dissipation",label:{zh:"",ja:""}},EXCOGITATION:{id:7434,name:"Excogitation",label:{zh:"",ja:""}},BROIL_II:{id:7435,name:"Broil II",label:{zh:"",ja:""}},CHAIN_STRATAGEM:{id:7436,name:"Chain Stratagem",label:{zh:"",ja:""}},AETHERPACT:{id:7437,name:"Aetherpact",label:{zh:"",ja:""}},DISSOLVE_UNION:{id:7869,name:"Dissolve Union",label:{zh:"",ja:""}},BIOLYSIS:{id:16540,name:"Biolysis",label:{zh:"",ja:""}},BROIL_III:{id:16541,name:"Broil III",label:{zh:"",ja:""}},RECITATION:{id:16542,name:"Recitation",label:{zh:"",ja:""}},FEY_BLESSING:{id:16543,name:"Fey Blessing",label:{zh:"",ja:""}},SUMMON_SERAPH:{id:16545,name:"Summon Seraph",label:{zh:"",ja:""}},CONSOLATION:{id:16546,name:"Consolation",label:{zh:"",ja:""}},BROIL_IV:{id:25865,name:"Broil IV",label:{zh:"",ja:""}},ART_OF_WAR_II:{id:25866,name:"Art of War II",label:{zh:"",ja:""}},PROTRACTION:{id:25867,name:"Protraction",label:{zh:"",ja:""}},EXPEDIENT:{id:25868,name:"Expedient",label:{zh:"",ja:""}},BANEFUL_IMPACTION:{id:37012,name:"Baneful Impaction",label:{zh:"",ja:""}},CONCITATION:{id:37013,name:"Concitation",label:{zh:"",ja:""}},SERAPHISM:{id:37014,name:"Seraphism",label:{zh:"",ja:""}},MANIFESTATION:{id:37015,name:"Manifestation",label:{zh:"",ja:""}},ACCESSION:{id:37016,name:"Accession",label:{zh:"",ja:""}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:""}}}),QL=ie()({cd_WHISPERING_DAWN:{name:"cd_WhisperingDawn"},cd_FEY_ILLUMINATION:{name:"cd_FeyIllumination"},cd_AETHERFLOW:{name:"cd_Aetherflow"},cd_ENERGY_DRAIN:{name:"cd_EnergyDrain"},cd_LUSTRATE:{name:"cd_Lustrate"},cd_SACRED_SOIL:{name:"cd_SacredSoil"},cd_INDOMITABILITY:{name:"cd_Indomitability"},cd_DEPLOYMENT_TACTICS:{name:"cd_DeploymentTactics"},cd_EMERGENCY_TACTICS:{name:"cd_EmergencyTactics"},cd_DISSIPATION:{name:"cd_Dissipation"},cd_EXCOGITATION:{name:"cd_Excogitation"},cd_CHAIN_STRATAGEM:{name:"cd_ChainStratagem"},cd_AETHERPACT:{name:"cd_Aetherpact"},cd_DISSOLVE_UNION:{name:"cd_DissolveUnion"},cd_RECITATION:{name:"cd_Recitation"},cd_FEY_BLESSING:{name:"cd_FeyBlessing"},cd_SUMMON_SERAPH:{name:"cd_SummonSeraph"},cd_CONSOLATION:{name:"cd_Consolation"},cd_CONSOLATION_INTERNAL:{name:"cd_ConsolationInternal"},cd_PROTRACTION:{name:"cd_Protraction"},cd_EXPEDIENT:{name:"cd_Expedient"},cd_BANEFUL_IMPACTION:{name:"cd_BanefulImpaction"},cd_SERAPHISM:{name:"cd_Seraphism"}}),JL=ie()({AETHERFLOW:{name:"Aetherflow",maximumCharges:3,label:{zh:""}},FAERIE_GAUGE:{name:"Faerie Gauge",maximumStacks:100,label:{zh:""}}}),MR=ie()({BIO_II:{name:"Bio II",label:{zh:""}},CATALYZE:{name:"Catalyze",label:{zh:""}},GALVANIZE:{name:"Galvanize",label:{zh:""}},WHISPERING_DAWN:{name:"Whispering Dawn",label:{zh:""}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:""}},FEY_ILLUMINATION:{name:"Fey Illumination",label:{zh:""}},SERAPHIC_ILLUMINATION:{name:"Seraphic Illumination",label:{zh:""}},SACRED_SOIL_MIT:{name:"Sacred Soil (Mitigation)",label:{zh:"[]"},mayNotBeCanceled:!0},SACRED_SOIL_ZONE:{name:"Sacred Soil",label:{zh:""},mayBeToggled:!0},EMERGENCY_TACTICS:{name:"Emergency Tactics",label:{zh:""}},DISSIPATION:{name:"Dissipation",label:{zh:""},mayNotBeCanceled:!0},EXCOGITATION:{name:"Excogitation",label:{zh:""}},CHAIN_STRATAGEM:{name:"Chain Stratagem",label:{zh:""}},IMPACT_IMMINENT:{name:"Impact Imminent",label:{zh:""}},BIOLYSIS:{name:"Biolysis",label:{zh:""}},RECITATION:{name:"Recitation",label:{zh:""}},FEY_UNION:{name:"Fey Union",label:{zh:""}},SERAPHIC_VEIL:{name:"Seraphic Veil",label:{zh:""}},PROTRACTION:{name:"Protraction",label:{zh:""}},EXPEDIENCE:{name:"Expedience",label:{zh:""}},DESPERATE_MEASURES:{name:"Desperate Measures",label:{zh:""}},BANEFUL_IMPACTION:{name:"Baneful Impaction",label:{zh:""}},SERAPHISM:{name:"Seraphism",label:{zh:""},mayNotBeCanceled:!0},SERAPHISM_REGEN:{name:"Seraphism (Regen)",label:{zh:"[]"}}}),$L=ie()({SERAPH_SUMMON_TIMER:{name:"Seraph Summon Timer",label:{zh:""}}}),e1=ie()({CORRUPTION_MASTERY_II:{name:"Corruption Mastery II",level:72},BROIL_MASTERY_III:{name:"Broil Mastery III",level:72},ENHANCED_SACRED_SOIL:{name:"Enhanced Sacred Soil",level:78},BROIL_MASTERY_IV:{name:"Broil Mastery IV",level:82},ART_OF_WAR_MASTERY:{name:"Art of War Mastery",level:82},ENHANCED_DEPLOYMENT_TACTICS:{name:"Enhanced Deployment Tactics",level:88},ENHANCED_CHAIN_STRATAGEM:{name:"Enhanced Chain Stratagem",level:92},TACTICIANS_MASTERY:{name:"Tactician's Mastery",level:94},SUCCOR_MASTERY:{name:"Succor Mastery",level:96},ENHANCED_RECITATION:{name:"Enhanced Recitation",level:98}}),t1={...JL,...MR,...$L},a1=ie()({DIAGNOSIS:{id:24284,name:"Diagnosis",label:{zh:""}},EUKRASIAN_DIAGNOSIS:{id:24291,name:"Eukrasian Diagnosis",label:{zh:""}},EUKRASIAN_DIAGNOSIS_POP:{name:"Pop Eukrasian Diagnosis",label:{zh:""}},HAIMA:{id:24305,name:"Haima",label:{zh:""}},HAIMA_POP:{name:"Pop Haima",label:{zh:""}},EGEIRO:{id:24287,name:"Egeiro",label:{zh:""}},PROGNOSIS:{id:24286,name:"Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS:{id:24292,name:"Eukrasian Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS_II:{id:37034,name:"Eukrasian Prognosis II",label:{zh:" II"}},EUKRASIAN_PROGNOSIS_POP:{name:"Pop Eukrasian Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS_II_POP:{name:"Pop Eukrasian Prognosis II",label:{zh:" II "}},PANHAIMA:{id:24311,name:"Panhaima",label:{zh:""}},PANHAIMA_POP:{name:"Pop Panhaima",label:{zh:""}},PHYSIS_II:{id:24302,name:"Physis II",label:{zh:" II"}},HOLOS:{id:24310,name:"Holos",label:{zh:""}},PEPSIS:{id:24301,name:"Pepsis",label:{zh:""}},KARDIA:{id:24285,name:"Kardia",label:{zh:""}},EUKRASIA:{id:24290,name:"Eukrasia",label:{zh:""}},SOTERIA:{id:24294,name:"Soteria",label:{zh:""}},ICARUS:{id:24295,name:"Icarus",label:{zh:""}},ZOE:{id:24300,name:"Zoe",label:{zh:""}},KRASIS:{id:24317,name:"Krasis",label:{zh:""}},PHILOSOPHIA:{id:37035,name:"Philosophia",label:{zh:""}},RHIZOMATA:{id:24309,name:"Rhizomata",label:{zh:""}},DRUOCHOLE:{id:24296,name:"Druochole",label:{zh:""}},IXOCHOLE:{id:24299,name:"Ixochole",label:{zh:""}},KERACHOLE:{id:24298,name:"Kerachole",label:{zh:""}},TAUROCHOLE:{id:24303,name:"Taurochole",label:{zh:""}},DOSIS:{id:24283,name:"Dosis",label:{zh:""}},DOSIS_II:{id:24306,name:"Dosis II",label:{zh:" II"}},DOSIS_III:{id:24312,name:"Dosis III",label:{zh:" III"}},EUKRASIAN_DOSIS:{id:24293,name:"Eukrasian Dosis",label:{zh:""}},EUKRASIAN_DOSIS_II:{id:24308,name:"Eukrasian Dosis II",label:{zh:" II"}},EUKRASIAN_DOSIS_III:{id:24314,name:"Eukrasian Dosis III",label:{zh:" III"}},TOXIKON:{id:24304,name:"Toxikon",label:{zh:""}},TOXIKON_II:{id:24316,name:"Toxikon II",label:{zh:" II"}},DYSKRASIA:{id:24297,name:"Dyskrasia",label:{zh:""}},DYSKRASIA_II:{id:24315,name:"Dyskrasia II",label:{zh:" II"}},EUKRASIAN_DYSKRASIA:{id:37032,name:"Eukrasian Dyskrasia",label:{zh:""}},PHLEGMA:{id:24289,name:"Phlegma",label:{zh:""}},PHLEGMA_II:{id:24307,name:"Phlegma II",label:{zh:" II"}},PHLEGMA_III:{id:24313,name:"Phlegma III",label:{zh:" III"}},PSYCHE:{id:37033,name:"Psyche",label:{zh:""}},PNEUMA:{id:24318,name:"Pneuma",label:{zh:""}}}),n1=ie()({cd_HAIMA:{name:"cd_Haima"},cd_PANHAIMA:{name:"cd_PANHAIMA"},cd_PHYSIS:{name:"cd_PHYSIS",label:{zh:"CD"}},cd_HOLOS:{name:"cd_HOLOS"},cd_PEPSIS:{name:"cd_PEPSIS"},cd_KARDIA:{name:"cd_KARDIA"},cd_EUKRASIA:{name:"cd_EUKRASIA"},cd_SOTERIA:{name:"cd_SOTERIA"},cd_ICARUS:{name:"cd_ICARUS"},cd_ZOE:{name:"cd_ZOE"},cd_KRASIS:{name:"cd_KRASIS"},cd_PHILOSOPHIA:{name:"cd_PHILOSOPHIA"},cd_RHIZOMATA:{name:"cd_RHIZOMATA"},cd_DRUOCHOLE:{name:"cd_DRUOCHOLE"},cd_IXOCHOLE:{name:"cd_IXOCHOLE"},cd_KERACHOLE:{name:"cd_KERACHOLE"},cd_TAUROCHOLE:{name:"cd_TAUROCHOLE"},cd_PHLEGMA:{name:"cd_PHLEGMA"},cd_PSYCHE:{name:"cd_PSYCHE"},cd_PNEUMA:{name:"cd_PNEUMA"},cd_DIAGNOSIS_POP:{name:"cd_DIAGNOSIS_POP",label:{zh:"CD"}},cd_PROGNOSIS_POP:{name:"cd_PROGNOSIS_POP",label:{zh:"CD"}},cd_HAIMA_POP:{name:"cd_HAIMA_POP"},cd_PANHAIMA_POP:{name:"cd_PANHAIMA_POP"}}),i1=ie()({ADDERSGALL:{name:"Addersgall",label:{zh:""}},ADDERSTING:{name:"Addersting",label:{zh:""}}}),HN=ie()({EUKRASIA:{id:2606,name:"Eukrasia",label:{zh:""}},EUKRASIAN_DIAGNOSIS:{id:2607,name:"Eukrasian Diagnosis",label:{zh:""}},DIFFERENTIAL_DIAGNOSIS:{id:2608,name:"Differential Diagnosis",label:{zh:""}},HAIMA:{id:2612,name:"Haima",label:{zh:""},mayNotBeCanceled:!0},HAIMATINON:{id:2642,name:"Haimatinon",label:{zh:""},maximumStacks:5,mayNotBeCanceled:!0},EUKRASIAN_PROGNOSIS:{id:2609,name:"Eukrasian Prognosis",label:{zh:""}},PANHAIMA:{id:2613,name:"Panhaima",label:{zh:""},mayNotBeCanceled:!0},PANHAIMATINON:{id:2643,name:"Panhaimatinon",label:{zh:""},maximumStacks:5,mayNotBeCanceled:!0},PHYSIS_II:{id:2620,name:"Physis II",label:{zh:" II"}},AUTOPHYSIS:{id:2621,name:"Autophysis",label:{zh:""}},KARDIA:{id:2604,name:"Kardia",label:{zh:""}},KARDION:{id:2605,name:"Kardion",label:{zh:""}},PHILOSOPHIA:{id:3898,name:"Philosophia",label:{zh:""}},EUDAIMONIA:{id:3899,name:"Eudaimonia",label:{zh:""}},SOTERIA:{id:2610,name:"Soteria",label:{zh:""},maximumStacks:4},ZOE:{id:2611,name:"Zoe",label:{zh:""}},KRASIS:{id:2622,name:"Krasis",label:{zh:""}},KERACHOLE:{id:2618,name:"Kerachole",label:{zh:""}},KERAKEIA:{id:2938,name:"Kerakeia",label:{zh:"[]"}},TAUROCHOLE:{id:2619,name:"Taurochole",label:{zh:""}},EUKRASIAN_DOSIS:{id:2614,name:"Eukrasian Dosis",label:{zh:""}},EUKRASIAN_DOSIS_II:{id:2615,name:"Eukrasian Dosis II",label:{zh:" II"}},EUKRASIAN_DOSIS_III:{id:2616,name:"Eukrasian Dosis III",label:{zh:" III"}},EUKRASIAN_DYSKRASIA:{id:3897,name:"Eukrasian Dyskrasia",label:{zh:""}},PNEUMA:{id:2623,name:"Pneuma",label:{zh:""}},HOLOS:{id:3003,name:"Holos",label:{zh:""}},HOLOSAKOS:{id:3365,name:"Holosakos",label:{zh:""}}}),o1=ie()({PEPSIS:{name:"Pepsis",label:{zh:""}}}),l1=ie()({OFFENSIVE_MAGIC_MASTERY:{name:"Offensive Magic Mastery",level:72},OFFENSIVE_MAGIC_MASTERY_II:{name:"Offensive Magic Mastery II",level:82},ENHANCED_KERACHOLE:{name:"Enhanced Kerachole",level:78},ENHANCED_ZOE:{name:"Enhanced Zoe",level:88},ENHANCED_SOTERIA:{name:"Enhanced Soteria",level:94},EUKRASIAN_PROGNOSIS_MASTERY:{name:"Eukrasian Prognosis Mastery",level:96},ENHANCED_PHYSIS_II:{name:"Enhanced Physis II",level:98}}),s1={...i1,...HN,...o1},UN=ie()({SUMMON_CARBUNCLE:{id:25798,name:"Summon Carbuncle",label:{zh:""}},RADIANT_AEGIS:{id:25799,name:"Radiant Aegis",label:{zh:""}},PHYSICK:{id:16230,name:"Physick",label:{zh:""}},GEMSHINE:{id:25883,name:"Gemshine",label:{zh:""}},FESTER:{id:181,name:"Fester",label:{zh:""}},ENERGY_DRAIN:{id:16508,name:"Energy Drain",label:{zh:""}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:""}},OUTBURST:{id:16511,name:"Outburst",label:{zh:""}},PRECIOUS_BRILLIANCE:{id:25884,name:"Precious Brilliance",label:{zh:""}},RUBY_OUTBURST:{id:25814,name:"Ruby Outburst",label:{zh:""}},TOPAZ_OUTBURST:{id:25815,name:"Topaz Outburst",label:{zh:""}},EMERALD_OUTBURST:{id:25816,name:"Emerald Outburst",label:{zh:""}},SUMMON_IFRIT:{id:25805,name:"Summon Ifrit",label:{zh:""}},PAINFLARE:{id:3578,name:"Painflare",label:{zh:""}},SUMMON_TITAN:{id:25806,name:"Summon Titan",label:{zh:""}},SUMMON_GARUDA:{id:25807,name:"Summon Garuda",label:{zh:""}},ENERGY_SIPHON:{id:16510,name:"Energy Siphon",label:{zh:""}},RUBY_RUIN_III:{id:25817,name:"Ruby Ruin III",label:{zh:""}},TOPAZ_RUIN_III:{id:25818,name:"Topaz Ruin III",label:{zh:""}},EMERALD_RUIN_III:{id:25819,name:"Emerald Ruin III",label:{zh:""}},RUIN_III:{id:3579,name:"Ruin III",label:{zh:""}},ASTRAL_IMPULSE:{id:25820,name:"Astral Impulse",label:{zh:""}},ASTRAL_FLARE:{id:25821,name:"Astral Flare",label:{zh:""}},ASTRAL_FLOW:{id:25822,name:"Astral Flow",label:{zh:""}},DEATHFLARE:{id:3582,name:"Deathflare",label:{zh:""}},RUIN_IV:{id:7426,name:"Ruin IV",label:{zh:""}},SEARING_LIGHT:{id:25801,name:"Searing Light",label:{zh:""}},SUMMON_BAHAMUT:{id:7427,name:"Summon Bahamut",label:{zh:""}},ENKINDLE_BAHAMUT:{id:7429,name:"Enkindle Bahamut",label:{zh:""}},RUBY_RITE:{id:25823,name:"Ruby Rite",label:{zh:""}},TOPAZ_RITE:{id:25824,name:"Topaz Rite",label:{zh:""}},EMERALD_RITE:{id:25825,name:"Emerald Rite",label:{zh:""}},TRI_DISASTER:{id:25826,name:"Tri-disaster",label:{zh:""}},RUBY_DISASTER:{id:25827,name:"Ruby Disaster",label:{zh:""}},TOPAZ_DISASTER:{id:25828,name:"Topaz Disaster",label:{zh:""}},EMERALD_DISASTER:{id:25829,name:"Emerald Disaster",label:{zh:""}},SUMMON_PHOENIX:{id:25831,name:"Summon Phoenix",label:{zh:""}},FOUNTAIN_OF_FIRE:{id:16514,name:"Fountain of Fire",label:{zh:""}},BRAND_OF_PURGATORY:{id:16515,name:"Brand of Purgatory",label:{zh:""}},REKINDLE:{id:25830,name:"Rekindle",label:{zh:""}},ENKINDLE_PHOENIX:{id:16516,name:"Enkindle Phoenix",label:{zh:""}},RUBY_CATASTROPHE:{id:25832,name:"Ruby Catastrophe",label:{zh:""}},TOPAZ_CATASTROPHE:{id:25833,name:"Topaz Catastrophe",label:{zh:""}},EMERALD_CATASTROPHE:{id:25834,name:"Emerald Catastrophe",label:{zh:""}},CRIMSON_CYCLONE:{id:25835,name:"Crimson Cyclone",label:{zh:""}},CRIMSON_STRIKE:{id:25885,name:"Crimson Strike",label:{zh:""}},MOUNTAIN_BUSTER:{id:25836,name:"Mountain Buster",label:{zh:""}},SLIPSTREAM:{id:25837,name:"Slipstream",label:{zh:""}},SUMMON_IFRIT_II:{id:25838,name:"Summon Ifrit II",label:{zh:" II"}},SUMMON_TITAN_II:{id:25839,name:"Summon Titan II",label:{zh:" II"}},SUMMON_GARUDA_II:{id:25840,name:"Summon Garuda II",label:{zh:" II"}},NECROTIZE:{id:36990,name:"Necrotize",label:{zh:""}},SEARING_FLASH:{id:36991,name:"Searing Flash",label:{zh:""}},SUMMON_SOLAR_BAHAMUT:{id:36992,name:"Summon Solar Bahamut",label:{zh:""}},UMBRAL_IMPULSE:{id:36994,name:"Umbral Impulse",label:{zh:""}},UMBRAL_FLARE:{id:36995,name:"Umbral Flare",label:{zh:""}},SUNFLARE:{id:36996,name:"Sunflare",label:{zh:""}},ENKINDLE_SOLAR_BAHAMUT:{id:36998,name:"Enkindle Solar Bahamut",label:{zh:""}},LUX_SOLARIS:{id:36997,name:"Lux Solaris",label:{zh:""}},INFERNO:{id:25852,name:"Inferno",label:{zh:""}},EARTHEN_FURY:{id:25853,name:"Earthen Fury",label:{zh:""}},AERIAL_BLAST:{id:25854,name:"Aerial Blast",label:{zh:""}},WYRMWAVE:{id:7428,name:"Wyrmwave",label:{zh:""}},SCARLET_FLAME:{id:16519,name:"Scarlet Flame",label:{zh:""}},LUXWAVE:{id:36993,name:"Luxwave",label:{zh:""}},AKH_MORN:{id:7449,name:"Akh Morn",label:{zh:""}},REVELATION:{id:16518,name:"Revelation",label:{zh:""}},EXODUS:{id:36999,name:"Exodus",label:{zh:""}}}),r1=ie()({cd_RADIANT_AEGIS:{name:"cd_RADIANT_AEGIS"},cd_ASTRAL_FLOW:{name:"cd_ASTRAL_FLOW"},cd_ENKINDLE:{name:"cd_ENKINDLE",label:{zh:"CD//"}},cd_DEMI_SUMMON:{name:"cd_DEMI_SUMMON",label:{zh:"CD"}},cd_ENERGY_DRAIN:{name:"cd_ENERGY_DRAIN"},cd_AETHERFLOW:{name:"cd_AETHERFLOW",label:{zh:"CD"}},cd_SEARING_LIGHT:{name:"cd_SEARING_LIGHT"},cd_SEARING_FLASH:{name:"cd_SEARING_FLASH"},cd_LUX_SOLARIS:{name:"cd_LUX_SOLARIS"},cd_MOUNTAIN_BUSTER:{name:"cd_MOUNTAIN_BUSTER"},cd_SUMMON_LOCKOUT:{name:"cd_SUMMON_LOCKOUT"}}),c1=ie()({AETHERFLOW:{name:"Aetherflow",label:{zh:""}},RUBY_ARCANUM:{name:"Ruby Arcanum",label:{zh:""}},TOPAZ_ARCANUM:{name:"Topaz Arcanum",label:{zh:""}},EMERALD_ARCANUM:{name:"Emerald Arcanum",label:{zh:""}},FIRE_ATTUNEMENT:{name:"Fire Attunement",label:{zh:""}},EARTH_ATTUNEMENT:{name:"Earth Attunement",label:{zh:""}},WIND_ATTUNEMENT:{name:"Wind Attunement",label:{zh:""}},ACTIVE_DEMI:{name:"Active Demi",label:{zh:""}}}),LR=ie()({AETHERFLOW:{name:"Aetherflow",maximumStacks:2,label:{zh:""}},CRIMSON_STRIKE_READY:{name:"Crimson Strike Ready",label:{zh:""}},EVERLASTING_FLIGHT:{name:"Everlasting Flight",label:{zh:""}},FURTHER_RUIN:{name:"Further Ruin",label:{zh:""}},GARUDAS_FAVOR:{name:"Garuda's Favor",label:{zh:""}},IFRITS_FAVOR:{name:"Ifrit's Favor",label:{zh:""}},RADIANT_AEGIS:{name:"Radiant Aegis",label:{zh:""}},REFULGENT_LUX:{name:"Refulgent Lux",label:{zh:""}},REKINDLE:{name:"Rekindle",label:{zh:""}},RUBYS_GLIMMER:{name:"Ruby's Glimmer",label:{zh:""}},SEARING_LIGHT:{name:"Searing Light",label:{zh:""}},SLIPSTREAM:{name:"Slipstream",mayBeToggled:!0,label:{zh:""}},TITANS_FAVOR:{name:"Titan's Favor",label:{zh:""}},UNDYING_FLAME:{name:"Undying Flame",label:{zh:""}}}),u1=ie()({NEXT_DEMI_CYCLE:{name:"Next Demi Cycle",label:{zh:""}},DEMI_AUTO:{name:"Demi Auto-attack",label:{zh:""}}}),d1=ie()({RUIN_MASTERY_III:{name:"Ruin Mastery III",level:72},OUTBURST_MASTERY:{name:"Outburst Mastery",level:74},ENHANCED_SUMMON_BAHAMUT:{name:"Enhanced Summon Bahamut",level:80},OUTBURST_MASTERY_II:{name:"Outburst Mastery II",level:82},RUIN_MASTERY_IV:{name:"Ruin Mastery IV",level:84},ELEMENTAL_MASTERY:{name:"Elemental Mastery",level:86},ENHANCED_RADIANT_AEGIS:{name:"Enhanced Radiant Aegis",level:88},ENKINDLE_II:{name:"Enkindle II",level:90},ENHANCED_FESTER:{name:"Enhanced Fester",level:92},ARCANE_MASTERY:{name:"Arcane Mastery",level:94},ENHANCED_SEARING_LIGHT:{name:"Enhanced Searing Light",level:96},ENHANCED_SUMMON_BAHAMUT_II:{name:"Enhanced Summon Bahamut II",level:100}}),h1={...c1,...LR,...u1},E1=ie()({STEEL_FANGS:{id:34606,name:"Steel Fangs",label:{zh:"",ja:""}},HUNTERS_STING:{id:34608,name:"Hunter's Sting",label:{zh:"",ja:""}},REAVING_FANGS:{id:34607,name:"Reaving Fangs",label:{zh:"",ja:""}},WRITHING_SNAP:{id:34632,name:"Writhing Snap",label:{zh:"",ja:""}},SWIFTSKINS_STING:{id:34609,name:"Swiftskin's Sting",label:{zh:"",ja:""}},STEEL_MAW:{id:34614,name:"Steel Maw",label:{zh:"",ja:""}},FLANKSTING_STRIKE:{id:34610,name:"Flanksting Strike",label:{zh:"",ja:""}},FLANKSBANE_FANG:{id:34611,name:"Flanksbane Fang",label:{zh:"",ja:""}},HINDSTING_STRIKE:{id:34612,name:"Hindsting Strike",label:{zh:"",ja:""}},HINDSBANE_FANG:{id:34613,name:"Hindsbane Fang",label:{zh:"",ja:""}},REAVING_MAW:{id:34615,name:"Reaving Maw",label:{zh:"",ja:""}},SLITHER:{id:34646,name:"Slither",label:{zh:"",ja:""}},HUNTERS_BITE:{id:34616,name:"Hunter's Bite",label:{zh:"",ja:""}},SWIFTSKINS_BITE:{id:34617,name:"Swiftskin's Bite",label:{zh:"",ja:""}},JAGGED_MAW:{id:34618,name:"Jagged Maw",label:{zh:"",ja:""}},BLOODIED_MAW:{id:34619,name:"Bloodied Maw",label:{zh:"",ja:""}},SERPENTS_TAIL:{id:35920,name:"Serpent's Tail",label:{zh:"",ja:""}},DEATH_RATTLE:{id:34634,name:"Death Rattle",label:{zh:"",ja:""}},LAST_LASH:{id:34635,name:"Last Lash",label:{zh:"",ja:""}},VICEWINDER:{id:34620,name:"Vicewinder",label:{zh:"",ja:""}},HUNTERS_COIL:{id:34621,name:"Hunter's Coil",label:{zh:"",ja:""}},SWIFTSKINS_COIL:{id:34622,name:"Swiftskin's Coil",label:{zh:"",ja:""}},VICEPIT:{id:34623,name:"Vicepit",label:{zh:"",ja:""}},HUNTERS_DEN:{id:34624,name:"Hunter's Den",label:{zh:"",ja:""}},SWIFTSKINS_DEN:{id:34625,name:"Swiftskin's Den",label:{zh:"",ja:""}},TWINFANG:{id:35921,name:"Twinfang",label:{zh:"",ja:""}},TWINBLOOD:{id:35922,name:"Twinblood",label:{zh:"",ja:""}},TWINFANG_BITE:{id:34636,name:"Twinfang Bite",label:{zh:"",ja:""}},TWINBLOOD_BITE:{id:34637,name:"Twinblood Bite",label:{zh:"",ja:""}},TWINFANG_THRESH:{id:34638,name:"Twinfang Thresh",label:{zh:"",ja:""}},TWINBLOOD_THRESH:{id:34639,name:"Twinblood Thresh",label:{zh:"",ja:""}},UNCOILED_FURY:{id:34633,name:"Uncoiled Fury",label:{zh:"",ja:""}},SERPENTS_IRE:{id:34647,name:"Serpent's Ire",label:{zh:"",ja:""}},REAWAKEN:{id:34626,name:"Reawaken",label:{zh:"",ja:""}},FIRST_GENERATION:{id:34627,name:"First Generation",label:{zh:"",ja:""}},SECOND_GENERATION:{id:34628,name:"Second Generation",label:{zh:"",ja:""}},THIRD_GENERATION:{id:34629,name:"Third Generation",label:{zh:"",ja:""}},FOURTH_GENERATION:{id:34630,name:"Fourth Generation",label:{zh:"",ja:""}},UNCOILED_TWINFANG:{id:34644,name:"Uncoiled Twinfang",label:{zh:"",ja:""}},UNCOILED_TWINBLOOD:{id:34645,name:"Uncoiled Twinblood",label:{zh:"",ja:""}},OUROBOROS:{id:34631,name:"Ouroboros",label:{zh:"",ja:""}},FIRST_LEGACY:{id:34640,name:"First Legacy",label:{zh:"",ja:""}},SECOND_LEGACY:{id:34641,name:"Second Legacy",label:{zh:"",ja:""}},THIRD_LEGACY:{id:34642,name:"Third Legacy",label:{zh:"",ja:""}},FOURTH_LEGACY:{id:34643,name:"Fourth Legacy",label:{zh:"",ja:""}}}),f1=ie()({cd_SERPENTS_IRE:{name:"cd_SerpentsIre"},cd_VICEWINDER:{name:"cd_Vicewinder"},cd_SLITHER:{name:"cd_Slither"},cd_SERPENTS_TAIL:{name:"cd_SerpentsTail"},cd_TWINFANG:{name:"cd_Twinfang"},cd_TWINBLOOD:{name:"cd_Twinblood"}}),A1=ie()({RATTLING_COIL:{name:"Rattling Coil",label:{zh:""}},SERPENT_OFFERINGS:{name:"Serpent Offerings",label:{zh:""}},ANGUINE_TRIBUTE:{name:"Anguine Tribute",label:{zh:""}}}),HR=ie()({HUNTERS_INSTINCT:{name:"Hunter's Instinct",label:{zh:""}},SWIFTSCALED:{name:"Swiftscaled",label:{zh:""}},HONED_STEEL:{name:"Honed Steel",label:{zh:""}},HONED_REAVERS:{name:"Honed Reavers",label:{zh:""}},FLANKSTUNG_VENOM:{name:"Flankstung Venom",label:{zh:""}},HINDSTUNG_VENOM:{name:"Hindstung Venom",label:{zh:""}},FLANKSBANE_VENOM:{name:"Flanksbane Venom",label:{zh:""}},HINDSBANE_VENOM:{name:"Hindsbane Venom",label:{zh:""}},GRIMSKINS_VENOM:{name:"Grimskin's Venom",label:{zh:""}},GRIMHUNTERS_VENOM:{name:"Grimhunter's Venom",label:{zh:""}},HUNTERS_VENOM:{name:"Hunter's Venom",label:{zh:""}},SWIFTSKINS_VENOM:{name:"Swiftskin's Venom",label:{zh:""}},POISED_FOR_TWINFANG:{name:"Poised for Twinfang",label:{zh:""}},POISED_FOR_TWINBLOOD:{name:"Poised for Twinblood",label:{zh:""}},FELLHUNTERS_VENOM:{name:"Fellhunter's Venom",label:{zh:""}},FELLSKINS_VENOM:{name:"Fellskin's Venom",label:{zh:""}},READY_TO_REAWAKEN:{name:"Ready to Reawaken",label:{zh:""}},REAWAKENED:{name:"Reawakened",label:{zh:""},mayNotBeCanceled:!0}}),m1=ie()({VPR_COMBO:{name:"VPR Combo"},DEATH_RATTLE_READY:{name:"Death Rattle Ready"},VPR_AOE_COMBO:{name:"VPR AoE Combo"},LAST_LASH_READY:{name:"Last Lash Ready"},HUNTERS_COIL_READY:{name:"Hunter's Coil Ready"},SWIFTSKINS_COIL_READY:{name:"Swiftskin's Coil Ready"},COIL_OGCD_READY:{name:"Coil oGCD Ready"},HUNTERS_DEN_READY:{name:"Hunter's Den Ready"},SWIFTSKINS_DEN_READY:{name:"Swiftskin's Den Ready"},DEN_OGCD_READY:{name:"Den oGCD Ready"},UNCOILED_OGCD_READY:{name:"Uncoiled oGCD Ready"},REAWAKEN_COMBO:{name:"Reawaken Combo"},LEGACY_READY:{name:"Legacy Ready"}}),R1=ie()({MELEE_MASTERY_VPR:{name:"Melee Mastery VPR",level:74},VIPERS_BITE:{name:"Viper's Bite",level:75},VIPERS_THRESH:{name:"Viper's Thresh",level:80},VIPERS_RATTLE:{name:"Viper's Rattle",level:82},ENHANCED_SLITHER:{name:"Enhanced Slither",level:84},MELEE_MASTERY_II_VPR:{name:"Melee Mastery II VPR",level:84},ENHANCED_VIPERS_RATTLE:{name:"Enhanced Viper's Rattle",level:88},SERPENTS_LINEAGE:{name:"Serpent's Lineage",level:90},UNCOILED_FANGS:{name:"Uncoiled Fangs",level:92},ENHANCED_SERPENTS_LINEAGE:{name:"Enhanced Serpent's Lineage",level:96},SERPENTS_LEGACY:{name:"Serpent's Legacy",level:100}}),T1={...A1,...HR,...m1},S1=ie()({HEAVY_SWING:{id:31,name:"Heavy Swing",label:{zh:""}},MAIM:{id:37,name:"Maim",label:{zh:""}},STORMS_PATH:{id:42,name:"Storm's Path",label:{zh:""}},STORMS_EYE:{id:45,name:"Storm's Eye",label:{zh:""}},FELL_CLEAVE:{id:3549,name:"Fell Cleave",label:{zh:""}},UPHEAVAL:{id:7387,name:"Upheaval",label:{zh:""}},ONSLAUGHT:{id:7386,name:"Onslaught",label:{zh:""}},TOMAHAWK:{id:46,name:"Tomahawk",label:{zh:""}},OVERPOWER:{id:41,name:"Overpower",label:{zh:""}},MYTHRIL_TEMPEST:{id:16462,name:"Mythril Tempest",label:{zh:""}},DECIMATE:{id:3550,name:"Decimate",label:{zh:""}},OROGENY:{id:25752,name:"Orogeny",label:{zh:""}},INNER_RELEASE:{id:7389,name:"Inner Release",label:{zh:""}},PRIMAL_WRATH:{id:36924,name:"Primal Wrath",label:{zh:""}},PRIMAL_REND:{id:25753,name:"Primal Rend",label:{zh:""}},PRIMAL_RUINATION:{id:36925,name:"Primal Ruination",label:{zh:""}},INFURIATE:{id:52,name:"Infuriate",label:{zh:""}},INNER_CHAOS:{id:16465,name:"Inner Chaos",label:{zh:""}},CHAOTIC_CYCLONE:{id:16463,name:"Chaotic Cyclone",label:{zh:""}},THRILL_OF_BATTLE:{id:40,name:"Thrill of Battle",label:{zh:""}},EQUILIBRIUM:{id:3552,name:"Equilibrium",label:{zh:""}},SHAKE_IT_OFF:{id:7388,name:"Shake It Off",label:{zh:""}},RAW_INTUITION:{id:3551,name:"Raw Intuition",label:{zh:""}},NASCENT_FLASH:{id:16464,name:"Nascent Flash",label:{zh:""}},BLOODWHETTING:{id:25751,name:"Bloodwhetting",label:{zh:""}},VENGEANCE:{id:44,name:"Vengeance",label:{zh:""}},DAMNATION:{id:36923,name:"Damnation",label:{zh:""}},HOLMGANG:{id:43,name:"Holmgang",label:{zh:""}},DEFIANCE:{id:48,name:"Defiance",label:{zh:""}},RELEASE_DEFIANCE:{id:32066,name:"Release Defiance",label:{zh:""}}}),I1=ie()({cd_INNER_RELEASE:{name:"cd_InnerRelease"},cd_PRIMAL_WRATH:{name:"cd_PrimalWrath"},cd_UPHEAVAL:{name:"cd_Upheaval"},cd_ONSLAUGHT:{name:"cd_Onslaught"},cd_INFURIATE:{name:"cd_Infuriate"},cd_VENGEANCE:{name:"cd_Vengeance"},cd_THRILL_OF_BATTLE:{name:"cd_ThrillOfBattle"},cd_RAW_INTUITION:{name:"cd_RawIntuition"},cd_EQUILIBRIUM:{name:"cd_Equilibrium"},cd_SHAKE_IT_OFF:{name:"cd_ShakeItOff"},cd_HOLMGANG:{name:"cd_Holmgang"},cd_DEFIANCE:{name:"cd_Defiance"},cd_RELEASE_DEFIANCE:{name:"cd_ReleaseDefiance"}}),_1=ie()({BEAST_GAUGE:{name:"Beast Gauge",label:{zh:""}}}),UR=ie()({SURGING_TEMPEST:{name:"Surging Tempest",label:{zh:"buff"}},INNER_RELEASE:{name:"Inner Release",label:{zh:"buff"},maximumStacks:3},INNER_STRENGTH:{name:"Inner Strength",label:{zh:"buff"}},BURGEONING_FURY:{name:"Burgeoning Fury",label:{zh:"buff"},maximumStacks:3},WRATHFUL:{name:"Wrathful",label:{zh:""}},PRIMAL_REND_READY:{name:"Primal Rend Ready",label:{zh:""}},PRIMAL_RUINATION_READY:{name:"Primal Ruination Ready",label:{zh:""}},NASCENT_CHAOS:{name:"Nascent Chaos",label:{zh:"buff"}},NASCENT_FLASH:{name:"Nascent Flash",label:{zh:"buff"}},THRILL_OF_BATTLE:{name:"Thrill of Battle",label:{zh:""}},EQUILIBRIUM:{name:"Equilibrium",label:{zh:"hot"}},SHAKE_IT_OFF:{name:"Shake It Off",label:{zh:""}},SHAKE_IT_OFF_OVER_TIME:{name:"Shake It Off Over Time",label:{zh:"hot"}},RAW_INTUITION:{name:"Raw Intuition",label:{zh:"buff"}},STEM_THE_TIDE:{name:"Stem the Tide",label:{zh:"buff"}},STEM_THE_FLOW:{name:"Stem the Flow",label:{zh:"buff"}},BLOODWHETTING:{name:"Bloodwhetting",label:{zh:"buff"}},VENGEANCE:{name:"Vengeance",label:{zh:"30"}},DAMNATION:{name:"Damnation",label:{zh:"40"}},PRIMEVAL_IMPULSE:{name:"Primeval Impulse",label:{zh:"hot"}},HOLMGANG:{name:"Holmgang",label:{zh:"buff"}},DEFIANCE:{name:"Defiance",label:{zh:"buff"},mayNotBeCanceled:!0}}),g1=ie()({STORM_COMBO:{name:"Storm Combo",label:{zh:""}},TEMPEST_COMBO:{name:"Tempest Combo",label:{zh:"aoe"}}}),p1=ie()({NASCENT_CHAOS:{name:"Nascent Chaos",level:72},MASTERING_THE_BEAST:{name:"Mastering the Beast",level:74},ENHANCED_SHAKE_IT_OFF:{name:"Enhanced Shake It Off",level:76},ENHANCED_THRILL_OF_BATTLE:{name:"Enhanced Thrill of Battle",level:78},RAW_INTUITION_MASTERY:{name:"Raw Intuition Mastery",level:82},ENHANCED_NASCENT_FLASH:{name:"Enhanced Nascent Flash",level:82},ENHANCED_EQUILIBRIUM:{name:"Enhanced Equilibrium",level:84},ENHANCED_ONSLAUGHT:{name:"Enhanced Onslaught",level:88},VENGEANCE_MASTERY:{name:"Vengeance Mastery",level:92},ENHANCED_INNER_RELEASE:{name:"Enhanced Inner Release",level:96},ENHANCED_PRIMAL_REND:{name:"Enhanced Primal Rend",level:100}}),N1={..._1,...UR,...g1},C1=ie()({CURE:{id:120,name:"Cure",label:{zh:"",ja:""}},MEDICA:{id:124,name:"Medica",label:{zh:"",ja:""}},RAISE:{id:125,name:"Raise",label:{zh:"",ja:""}},CURE_II:{id:135,name:"Cure II",label:{zh:"",ja:""}},PRESENCE_OF_MIND:{id:136,name:"Presence of Mind",label:{zh:"",ja:""}},REGEN:{id:137,name:"Regen",label:{zh:"",ja:""}},CURE_III:{id:131,name:"Cure III",label:{zh:"",ja:""}},AETHERIAL_SHIFT:{id:37008,name:"Aetherial Shift",label:{zh:"",ja:""}},HOLY:{id:139,name:"Holy",label:{zh:"",ja:""}},AERO_II:{id:132,name:"Aero II",label:{zh:"",ja:""}},MEDICA_II:{id:133,name:"Medica II",label:{zh:"",ja:""}},BENEDICTION:{id:140,name:"Benediction",label:{zh:"",ja:""}},AFFLATUS_SOLACE:{id:16531,name:"Afflatus Solace",label:{zh:"",ja:""}},ASYLUM:{id:3569,name:"Asylum",label:{zh:"",ja:""}},ASSIZE:{id:3571,name:"Assize",label:{zh:"",ja:""}},THIN_AIR:{id:7430,name:"Thin Air",label:{zh:"",ja:""}},TETRAGRAMMATON:{id:3570,name:"Tetragrammaton",label:{zh:"",ja:""}},STONE_IV:{id:7431,name:"Stone IV",label:{zh:"",ja:""}},DIVINE_BENISON:{id:7432,name:"Divine Benison",label:{zh:"",ja:""}},PLENARY_INDULGENCE:{id:7433,name:"Plenary Indulgence",label:{zh:"",ja:""}},DIA:{id:16532,name:"Dia",label:{zh:"",ja:""}},GLARE:{id:16533,name:"Glare",label:{zh:"",ja:""}},AFFLATUS_MISERY:{id:16535,name:"Afflatus Misery",label:{zh:"",ja:""}},AFFLATUS_RAPTURE:{id:16534,name:"Afflatus Rapture",label:{zh:"",ja:""}},TEMPERANCE:{id:16536,name:"Temperance",label:{zh:"",ja:""}},GLARE_III:{id:25859,name:"Glare III",label:{zh:"",ja:""}},HOLY_III:{id:25860,name:"Holy III",label:{zh:"",ja:""}},AQUAVEIL:{id:25861,name:"Aquaveil",label:{zh:"",ja:""}},LITURGY_OF_THE_BELL:{id:25862,name:"Liturgy of the Bell",label:{zh:"",ja:""}},LITURGY_POP:{name:"Pop Liturgy of the Bell",label:{zh:""}},LITURGY_TRIGGER:{name:"Trigger Liturgy of the Bell",label:{zh:""}},GLARE_IV:{id:37009,name:"Glare IV",label:{zh:"",ja:""}},MEDICA_III:{id:37010,name:"Medica III",label:{zh:"",ja:""}},DIVINE_CARESS:{id:37011,name:"Divine Caress",label:{zh:"",ja:""}}}),O1=ie()({cd_PRESENCE_OF_MIND:{name:"cd_PresenceOfMind"},cd_AETHERIAL_SHIFT:{name:"cd_AetherialShift"},cd_BENEDICTION:{name:"cd_Benediction"},cd_ASYLUM:{name:"cd_Asylum"},cd_ASSIZE:{name:"cd_Assize"},cd_THIN_AIR:{name:"cd_ThinAir"},cd_TETRAGRAMMATON:{name:"cd_Tetragrammaton"},cd_DIVINE_BENISON:{name:"cd_DivineBenison"},cd_PLENARY_INDULGENCE:{name:"cd_PlenaryIndulgence"},cd_TEMPERANCE:{name:"cd_Temperance"},cd_AQUAVEIL:{name:"cd_Aquaveil"},cd_LITURGY_OF_THE_BELL:{name:"cd_LiturgyOfTheBell"},cd_LITURGY_POP:{name:"cd_LiturgyPop"},cd_LITURGY_TRIGGER:{name:"cd_LiturgyTrigger"},cd_DIVINE_CARESS:{name:"cd_DivineCaress"}}),b1=ie()({LILLIES:{name:"Lillies",maximumCharges:3,label:{zh:""}},LILY_TIMER:{name:"Lily Timer",label:{zh:""}},BLOOD_LILY:{name:"Blood Lily",maximumCharges:3,label:{zh:""}}}),kR=ie()({FREECURE:{name:"Freecure",label:{zh:""}},PRESENCE_OF_MIND:{name:"Presence of Mind",label:{zh:""}},SACRED_SIGHT:{name:"Sacred Sight",maximumStacks:3,label:{zh:""}},REGEN:{name:"Regen",label:{zh:""}},AERO_II:{name:"Aero II",label:{zh:""}},MEDICA_II:{name:"Medica II",label:{zh:""}},ASYLUM:{name:"Asylum",mayBeToggled:!0,label:{zh:""}},THIN_AIR:{name:"Thin Air",label:{zh:""}},DIVINE_BENISON:{name:"Divine Benison",label:{zh:""}},CONFESSION:{name:"Confession",label:{zh:""}},DIA:{name:"Dia",label:{zh:""}},TEMPERANCE:{name:"Temperance",label:{zh:""}},DIVINE_GRACE:{name:"Divine Grace",label:{zh:""}},AQUAVEIL:{name:"Aquaveil",label:{zh:""}},LITURGY_OF_THE_BELL:{name:"Liturgy of the Bell",maximumStacks:5,mayNotBeCanceled:!0,label:{zh:""}},MEDICA_III:{name:"Medica III",label:{zh:""}},DIVINE_CARESS:{name:"Divine Caress",label:{zh:""}},DIVINE_AURA:{name:"Divine Aura",label:{zh:""}}}),D1=ie()({}),y1=ie()({AERO_MASTERY_II:{name:"Aero Mastery II",level:72},STONE_MASTERY_IV:{name:"Stone Mastery IV",level:72},TRANSCENDENT_AFFLATUS:{name:"Transcendent Afflatus",level:74},ENHANCED_ASYLUM:{name:"Enhanced Asylum",level:78},GLARE_MASTERY:{name:"Glare Mastery",level:82},HOLY_MASTERY:{name:"Holy Mastery",level:82},ENHANCED_DIVINE_BENISON:{name:"Enhanced Divine Benison",level:88},ENHANCED_PRESENCE_OF_MIND:{name:"Enhanced Presence of Mind",level:92},WHITE_MAGIC_MASTERY:{name:"White Magic Mastery",level:94},MEDICA_MASTERY:{name:"Medica Mastery",level:96},ENHANCED_TETRAGRAMMATON:{name:"Enhanced Tetragrammaton",level:98},ENHANCED_TEMPERANCE:{name:"Enhanced Temperance",level:100}}),v1={...b1,...kR,...D1},M1=ie()({WATER_CANNON:{name:"Water Cannon",label:{zh:"(2200)"},id:11385},SONIC_BOOM:{name:"Sonic Boom",label:{zh:"(1210)"},id:18308},SHARPENED_KNIFE:{name:"Sharpened Knife",label:{zh:"(1220)"},id:11400},HYDRO_PULL:{name:"Hydro Pull",label:{zh:"(2220)"},id:23282},MOON_FLUTE:{name:"Moon Flute",label:{zh:""},id:11415},DIAMONDBACK:{name:"Diamondback",label:{zh:""},id:11424},SONG_OF_TORMENT:{name:"Song of Torment",label:{zh:""},id:11386},WHISTLE:{name:"Whistle",label:{zh:""},id:18309},BRISTLE:{name:"Bristle",label:{zh:""},id:11393},TINGLE:{name:"Tingle",label:{zh:""},id:23265},FINAL_STING:{name:"Final Sting",label:{zh:""},id:11407},COLD_FOG:{name:"Cold Fog",label:{zh:""},id:23267},WHITE_DEATH:{name:"White Death",label:{zh:""},id:23268},POP_COLD_FOG:{name:"Pop Cold Fog",label:{zh:""}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:""},id:23288},END_PHANTOM_FLURRY:{name:"End Phantom Flurry",label:{zh:""},id:23289},MATRA_MAGIC:{name:"Matra Magic",label:{zh:""},id:23285},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:""},id:34576},CONVICTION_MARCATO:{name:"Conviction Marcato",label:{zh:""},id:34574},REVENGE_BLAST:{name:"Revenge Blast",label:{zh:""},id:18316},WILD_RAGE:{name:"Wild Rage",label:{zh:""},id:34568},GOBLIN_PUNCH:{name:"Goblin Punch",label:{zh:""},id:34563},THE_ROSE_OF_DESTRUCTION:{name:"The Rose of Destruction",label:{zh:""},id:23275},ERUPTION:{name:"Eruption",label:{zh:""},id:11427},FEATHER_RAIN:{name:"Feather Rain",label:{zh:""},id:11426},MOUNTAIN_BUSTER:{name:"Mountain Buster",label:{zh:""},id:11428},SHOCK_STRIKE:{name:"Shock Strike",label:{zh:""},id:11429},GLASS_DANCE:{name:"Glass Dance",label:{zh:""},id:11430},QUASAR:{name:"Quasar",label:{zh:""},id:18324},J_KICK:{name:"J Kick",label:{zh:""},id:18325},TRIPLE_TRIDENT:{name:"Triple Trident",label:{zh:""},id:23264},BOTH_ENDS:{name:"Both Ends",label:{zh:""},id:23287},NIGHTBLOOM:{name:"Nightbloom",label:{zh:""},id:23290},SEA_SHANTY:{name:"Sea Shanty",label:{zh:""},id:34580},APOKALYPSIS:{name:"Apokalypsis",label:{zh:""},id:34581},BEING_MORTAL:{name:"Being Mortal",label:{zh:""},id:34582},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:""},id:34567},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:""},id:34579},SURPANAKHA:{name:"Surpanakha",label:{zh:""},id:18323}}),L1=ie()({cd_ERUPTION:{name:"cd_Eruption",label:{zh:"CD: /"}},cd_SHOCK_STRIKE:{name:"cd_Shock_Strike",label:{zh:"CD: /"}},cd_GLASS_DANCE:{name:"cd_Glass_Dance",label:{zh:"CD: "}},cd_SURPANAKHA:{name:"cd_Surpanakha",label:{zh:"CD: "}},cd_QUASAR:{name:"cd_Quasar",label:{zh:"CD: /"}},cd_NIGHTBLOOM:{name:"cd_Nightbloom",label:{zh:"CD: /"}},cd_SEA_SHANTY:{name:"cd_Sea_Shanty",label:{zh:"CD: "}},cd_BEING_MORTAL:{name:"cd_Being_Mortal",label:{zh:"CD: /"}},cd_COLD_FOG:{name:"cd_Cold_Fog",label:{zh:"CD: "}},cd_TRIPLE_TRIDENT:{name:"cd_Triple_Trident",label:{zh:"CD: "}},cd_PHANTOM_FLURRY:{name:"cd_Phantom_Flurry",label:{zh:"CD: "}},cd_COLD_FOG_POP:{name:"cd_Cold_Fog_Pop",label:{zh:"CD: "}},cd_MATRA_MAGIC:{name:"cd_Matra_Magic",label:{zh:"CD: "}},cd_WINGED_REPROBATION:{name:"cd_Winged_Reprobation",label:{zh:"CD: "}},cd_THE_ROSE_OF_DESTRUCTION:{name:"cd_The_Rose_of_Destruction",label:{zh:"CD: "}},cd_SURPANAKHA_LOCKOUT:{name:"cd_SurpanakhaLockout",label:{zh:"CD: "}}}),H1=ie()({}),xR=ie()({NIGHTBLOOM:{name:"Bleeding",label:{zh:""}},SONG_OF_TORMENT:{name:"Bleeding",label:{zh:""}},FEATHER_RAIN:{name:"Feather Rain",label:{zh:""}},WAXING_NOCTURNE:{name:"Waxing Nocturne",label:{zh:""}},WANING_NOCTURNE:{name:"Waning Nocturne",label:{zh:""}},WHISTLE:{name:"Whistle",label:{zh:""}},BRISTLE:{name:"Bristle",label:{zh:""}},TINGLE:{name:"Tingle",label:{zh:""}},COLD_FOG:{name:"Cold Fog",label:{zh:""}},TOUCH_OF_FROST:{name:"Touch of Frost",label:{zh:""}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:""}},DIAMONDBACK:{name:"Diamondback",label:{zh:""}},APOKALYPSIS:{name:"Apokalypsis",label:{zh:""}},WINGED_REDEMPTION:{name:"Winged Redemption",label:{zh:""}},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:""}},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:""}},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:""},maximumStacks:4},SURPANAKHAS_FURY:{name:"Surpanakha's Fury",label:{zh:""},maximumStacks:4},BRUSH_WITH_DEATH:{name:"Brush with Death",label:{zh:""}}}),U1=ie()({SURPANAKHA_LOCKOUT:{name:"Supranakha Lockout",label:{zh:""}}}),k1=ie()({}),x1={...H1,...xR,...U1},P1=ie()({NEVER:{name:"NEVER"},TINCTURE:{name:"Tincture",label:{zh:"",ja:""}},SPRINT:{id:3,name:"Sprint",label:{zh:"",ja:""}}}),w1=ie()({NEVER:{name:"Never"},cd_GCD:{name:"cd_GCD",label:{zh:"GCD"}},cd_TINCTURE:{name:"cd_Tincture"},cd_SPRINT:{name:"cd_Sprint"}}),G1=ie()({MANA:{name:"Mana",label:{zh:"MP"}}}),B1=ie()({TINCTURE:{name:"Tincture",label:{zh:""}},SPRINT:{name:"Sprint",label:{zh:""}}}),F1=ie()({MOVEMENT:{name:"Movement"},NOT_ANIMATION_LOCKED:{name:"NotAnimationLocked"},NOT_CASTER_TAXED:{name:"NotCasterTaxed"},IN_COMBAT:{name:"InCombat",label:{zh:""}},AUTOS_ENGAGED:{name:"Autos Engaged"},STORED_AUTO:{name:"Stored Auto"},PARTY_SIZE:{name:"PartySize",label:{zh:""}},NEVER:{name:"Never"}}),z1=ie()({NEVER:{name:"Never",level:1}}),j1={...G1,...B1,...F1},Y1=ie()({LAST_BASTION:{id:199,name:"Last Bastion",label:{zh:""}},LAND_WAKER:{id:4240,name:"Land Waker",label:{zh:""}},DARK_FORCE:{id:4241,name:"Dark Force",label:{zh:""}},GUNMETAL_SOUL:{id:17105,name:"Gunmetal Soul",label:{zh:""}}}),K1=ie()({PULSE_OF_LIFE:{id:208,name:"Pulse of Life"},ANGEL_FEATHERS:{id:4247,name:"Angel Feathers"},ASTRAL_STASIS:{id:4248,name:"Astral Stasis"},TECHNE_MAKRE:{id:24859,name:"Techne Makre"}}),V1=ie()({FINAL_HEAVEN:{id:202,name:"Final Heaven"},DRAGONSONG_DIVE:{id:4242,name:"Dragonsong Dive"},CHIMATSURI:{id:4243,name:"Chimatsuri"},DOOM_OF_THE_LIVING:{id:7861,name:"Doom of the Living"},THE_END:{id:24858,name:"The End"},WORLD_SWALLOWER:{id:34866,name:"World-swallower"}}),W1=ie()({SAGITTARIUS_ARROW:{id:4244,name:"Sagittarius Arrow"},SATELLITE_BEAM:{id:4245,name:"Satellite Beam"},CRIMSON_LOTUS:{id:17106,name:"Crimson Lotus"}}),X1=ie()({METEOR:{id:205,name:"Meteor"},TERAFLARE:{id:3009,name:"Teraflare"},VERMILLION_SCOURGE:{id:7862,name:"Vermillion Scourge"},CHROMATIC_FANTASY:{id:34867,name:"Chromatic Fantasy"}}),q1=ie()({LAST_BASTION:{name:"Last Bastion",label:{zh:"LB3 buff"}},LAND_WAKER:{name:"Land Waker",label:{zh:"LB3 buff"}},DARK_FORCE:{name:"Dark Force",label:{zh:"LB3 buff"}},GUNMETAL_SOUL:{name:"Gunmetal Soul",label:{zh:"LB3 buff"}}}),Z1=ie()({cd_LIMIT_BREAK_1:{name:"cd_LIMIT_BREAK_1",label:{zh:"CDLB"}},cd_LIMIT_BREAK_2:{name:"cd_LIMIT_BREAK_2",label:{zh:"CDLB"}},cd_LIMIT_BREAK_3:{name:"cd_LIMIT_BREAK_3",label:{zh:"CDLB"}}}),Q1=ie()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{id:197,name:"Shield Wall"},STRONGHOLD:{id:198,name:"Stronghold"},HEALING_WIND:{id:206,name:"Healing Wind"},BREATH_OF_THE_EARTH:{id:207,name:"Breath of the Earth"},BRAVER:{id:200,name:"Braver"},BLADEDANCE:{id:201,name:"Bladedance"},BIGSHOT:{id:4238,name:"Big Shot"},DESPERADO:{id:4239,name:"Desperado"},SKYSHARD:{id:203,name:"Skyshard"},STARSTORM:{id:204,name:"Starstorm"}}),kN=ie()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{name:"Shield Wall",label:{zh:"LB1 buff"}},STRONGHOLD:{name:"Stronghold",label:{zh:"LB2 buff"}}}),J1={...Y1,...K1,...V1,...W1,...X1},mo={...Q1,...J1},xN={...kN,...q1},$1=ie()({ARMS_LENGTH:{id:7548,name:"Arm's Length",label:{zh:""}},SECOND_WIND:{id:7541,name:"Second Wind",label:{zh:""}},HEAD_GRAZE:{id:7551,name:"Head Graze",label:{zh:""}},ESUNA:{id:7568,name:"Esuna",label:{zh:""}},RESCUE:{id:7571,name:"Rescue",label:{zh:""}},ADDLE:{id:7560,name:"Addle",label:{zh:"",ja:""},discordEmote:"Addle"},SWIFTCAST:{id:7561,name:"Swiftcast",label:{zh:"",ja:""}},LUCID_DREAMING:{id:7562,name:"Lucid Dreaming",label:{zh:"",ja:""},discordEmote:"Lucid"},SURECAST:{id:7559,name:"Surecast",label:{zh:"",ja:""},discordEmote:"Surecast"},FEINT:{id:7549,name:"Feint",label:{zh:""}},BLOODBATH:{id:7542,name:"Bloodbath",label:{zh:""}},TRUE_NORTH:{id:7546,name:"True North",label:{zh:""}},LEG_SWEEP:{id:7863,name:"Leg Sweep",label:{zh:""}},RAMPART:{id:7531,name:"Rampart",label:{zh:""}},REPRISAL:{id:7535,name:"Reprisal",label:{zh:""}},LOW_BLOW:{id:7540,name:"Low Blow",label:{zh:""}},INTERJECT:{id:7538,name:"Interject",label:{zh:""}},PROVOKE:{id:7533,name:"Provoke",label:{zh:""}},SHIRK:{id:7537,name:"Shirk",label:{zh:""}}}),eH=ie()({cd_ADDLE:{name:"cd_Addle"},cd_SWIFTCAST:{name:"cd_Swiftcast"},cd_LUCID_DREAMING:{name:"cd_LucidDreaming"},cd_SURECAST:{name:"cd_Surecast"},cd_SECOND_WIND:{name:"cd_SecondWind"},cd_ARMS_LENGTH:{name:"cd_ArmsLength"},cd_RESCUE:{name:"cd_Rescue"},cd_FEINT:{name:"cd_Feint"},cd_TRUE_NORTH:{name:"cd_TrueNorth"},cd_BLOODBATH:{name:"cd_Bloodbath"},cd_LEG_SWEEP:{name:"cd_LegSweep"},cd_RAMPART:{name:"cd_Rampart"},cd_REPRISAL:{name:"cd_Reprisal"},cd_LOW_BLOW:{name:"cd_LowBlow"},cd_INTERJECT:{name:"cd_Interject"},cd_PROVOKE:{name:"cd_Provoke"},cd_SHIRK:{name:"cd_Shirk"},cd_HEAD_GRAZE:{name:"cd_HeadGraze"}}),tH=ie()({ADDLE:{name:"Addle",label:{zh:""}},SWIFTCAST:{name:"Swiftcast",label:{zh:""}},LUCID_DREAMING:{name:"Lucid Dreaming",label:{zh:""}},SURECAST:{name:"Surecast",label:{zh:""}},ARMS_LENGTH:{name:"Arms Length",label:{zh:""}},FEINT:{name:"Feint",label:{zh:""}},TRUE_NORTH:{name:"True North",label:{zh:""}},BLOODBATH:{name:"Bloodbath",label:{zh:""}},RAMPART:{name:"Rampart",label:{zh:"buff"}},REPRISAL:{name:"Reprisal",label:{zh:"buff"}}}),aH=ie()({REAR_POSITIONAL:{name:"Rear Positional",label:{zh:""},mayBeToggled:!0},FLANK_POSITIONAL:{name:"Flank Positional",label:{zh:""},mayBeToggled:!0},AUTOS_ENGAGED:{name:"Autos Engaged",mayBeToggled:!0}}),nH=ie()({ENHANCED_SWIFTCAST:{name:"Enhanced Swiftcast",level:94},ENHANCED_ADDLE:{name:"Enhanced Addle",level:98},ENHANCED_HEALING_MAGIC:{name:"Enhanced Healing Magic",level:85},MAGICK_MASTERY_HEALER:{name:"Magick Mastery",level:94},ENHANCED_SECOND_WIND:{name:"Enhanced Second Wind",level:94},ENHANCED_FEINT:{name:"Enhanced Feint",level:98},MELEE_MASTERY_TANK:{name:"Melee Mastery",level:84},ENHANCED_RAMPART:{name:"Enhanced Rampart",level:94},MELEE_MASTERY_II_TANK:{name:"Melee Mastery II",level:94},ENHANCED_REPRISAL:{name:"Enhanced Reprisal",level:98}}),PN={...tH,...aH},Ta={...P1,...$1,...mo,...bL,...S1,...VM,...JM,...C1,...vR,...mM,...a1,...uL,...BM,...AL,...KL,...GL,...E1,...DM,...iL,...UM,...gM,...UN,...HL,..._L,...M1},Kl={...w1,...eH,...Z1,...DL,...I1,...WM,...$M,...O1,...QL,...RM,...n1,...dL,...FM,...mL,...VL,...BL,...f1,...yM,...oL,...kM,...pM,...r1,...UL,...gL,...L1},xe={...j1,...PN,...xN,...LL,...N1,...QM,...nL,...v1,...t1,..._M,...s1,...LN,...KM,...IL,...ZL,...YL,...T1,...HM,...cL,...GM,...bM,...h1,...wL,...OL,...x1},tm={...z1,...nH,...ML,...p1,...ZM,...aL,...y1,...e1,...IM,...l1,...fL,...YM,...SL,...qL,...jL,...R1,...LM,...rL,...wM,...OM,...d1,...PL,...CL,...k1},ha={epsilon:1e-6};var Ze=(e=>(e[e.lvl70=70]="lvl70",e[e.lvl80=80]="lvl80",e[e.lvl90=90]="lvl90",e[e.lvl100=100]="lvl100",e))(Ze||{});const iH=.1;var Ie=(e=>(e.Fire="Fire",e.Ice="Ice",e.Lightning="Lightning",e.Wind="Wind",e.Earth="Earth",e.Physical="Physical",e.Other="Other",e))(Ie||{}),on=(e=>(e.RNG="RNG",e.Never="Never",e.Always="Always",e))(on||{}),dt=(e=>(e.Blocked="blocked by CD, animation lock or caster tax",e.SecondaryBlocked="blocked by secondary CD",e.NotEnoughMP="not enough MP",e.NotInCombat="not in combat (must wait for first damage application)",e.RequirementsNotMet="skill requirements not satisfied",e.SkillNotUnlocked="skill not unlocked at provided level",e.BuffNoLongerAvailable="buff no longer available",e.PastTargetTime="jump target time has already passed",e.CastCanceled="cast canceled (skill requirements no longer met at confirmation time)",e.UnknownSkill="unknown skill",e))(dt||{});function Jc(){return{unavailableReasons:[],ready:function(){return this.unavailableReasons.length===0},toString:function(){return this.ready()?"ready":this.unavailableReasons.join("; ")},addUnavailableReason:function(e){this.unavailableReasons.includes(e)||this.unavailableReasons.push(e)},clone:function(){const e=Jc();return this.unavailableReasons.forEach(t=>e.addUnavailableReason(t)),e}}}var k=(e=>(e.LeyLines="Ley Lines",e.Hyperphantasia="Hyperphantasia",e.Acceleration="Acceleration",e.Fuka="Fuka",e.Fugetsu="Fugetsu",e.EnhancedEnpi="Enhanced Enpi",e.NoMercy="No Mercy",e.PowerSurge="Power Surge",e.LanceCharge="Lance Charge",e.LifeOfTheDragon="Life Of The Dragon",e.EnhancedPiercingTalon="Enhanced Piercing Talon",e.LifeSurge="Life Surge",e.DivineMight="Divine Might",e.Requiescat="Requiescat",e.FightOrFlight="Fight Or Flight",e.Tincture="Tincture",e.ArcaneCircle="Arcane Circle",e.ArmysPaeon="Army's Paeon",e.BattleLitany="Battle Litany",e.BattleVoice="Battle Voice",e.Brotherhood="Brotherhood",e.Card_TheBalance="Card - The Balance",e.Card_TheSpear="Card - The Spear",e.ChainStratagem="Chain Stratagem",e.Devilment="Devilment",e.Divination="Divination",e.Dokumori="Dokumori",e.Embolden="Embolden",e.MagesBallad="Mage's Ballad",e.RadiantFinale1="Radiant Finale (1)",e.RadiantFinale2="Radiant Finale (2)",e.RadiantFinale3="Radiant Finale (3)",e.Barrage="Barrage",e.SearingLight="Searing Light",e.StandardFinish="Standard Finish",e.StarryMuse="Starry Muse",e.TechnicalFinish="Technical Finish",e.WanderersMinuet="The Wanderer's Minuet",e.RagingStrikes="Raging Strikes",e.DeathsDesign="Death's Design",e.Zoe="Zoe",e.Autophysis="Autophysis",e.Krasis="Krasis",e.Philosophia="Philosophia",e.Soteria="Soteria",e.WaxingNocturne="Waxing Nocturne",e.Whistle="Whistle",e.Bristle="Bristle",e.TingleA="TingleA",e.TingleB="TingleB",e.TrickAttack="Trick Attack",e.KunaisBane="Kunai's Bane",e.Bunshin="Bunshin",e.RiddleOfFire="Riddle of Fire",e.TheArrow="The Arrow",e.NeutralSect="Neutral Sect",e.Synastry="Synastry",e.Confession="Confession",e.Asylum="Asylum",e.Temperance="Temperance",e.HuntersInstinct="Hunter's Instinct",e.Swiftscaled="Swiftscaled",e.FeyIllumination="Fey Illumination",e.Dissipation="Dissipation",e.Protraction="Protraction",e.Recitation="Recitation",e))(k||{});function oH(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(e)}function lH(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(e)}function sH(e){return _i({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"},child:[]}]})(e)}function am(e,t){const n=Math.pow(10,t);return Math.floor(e*n)/n}class st{static getMainstatBase(t){switch(t){case Ze.lvl70:return 292;case Ze.lvl80:return 340;case Ze.lvl90:return 390;case Ze.lvl100:return 440}}static getSubstatBase(t){switch(t){case Ze.lvl70:return 364;case Ze.lvl80:return 380;case Ze.lvl90:return 400;case Ze.lvl100:return 420}}static getStatDiv(t){switch(t){case Ze.lvl70:return 900;case Ze.lvl80:return 1300;case Ze.lvl90:return 1900;case Ze.lvl100:return 2780}}static calculateDamage(t,n,o,l,r,d,E){let h=r;const A=d>=1?d:d<0?0:st.criticalHitRate(t,n)+d,R=E>=1?E:E<0?0:st.#t(t,o)+E;if(A===0&&R===0)return h;const T=st.#e(t,n),S=1.25,I=A>=1&&R>=1,C=A>1?am(1+(T-1)*(d-1),3):1,_=R>1?am(1+(S-1)*(E-1),3):1,O=A>1?1:A,D=R>1?1:R;I?h*=am(st.#n(t,l)+st.#a(t,o),3):h*=st.#n(t,l);const U=h*C*T,H=h*_*S,L=U*_*S,w=O*D,G=1-O-D+w;return h*G+U*(O-w)+H*(D-w)+L*w}static criticalHitRate(t,n){const o=this.getSubstatBase(t),l=this.getStatDiv(t);return(Math.floor(200*(n-o)/l)+50)*.001}static#e(t,n){const o=this.getSubstatBase(t),l=this.getStatDiv(t);return(Math.floor(200*(n-o)/l)+1400)*.001}static#t(t,n){const o=this.getSubstatBase(t),l=this.getStatDiv(t);return Math.floor(550*(n-o)/l)*.001}static#a(t,n){const o=this.getSubstatBase(t),l=this.getStatDiv(t);return Math.floor(140*(n-o)/l)*.001}static#n(t,n){const o=this.getMainstatBase(t),l=this.getStatDiv(t);return Math.floor(1e3+140*(n-o)/l)*.001}static overtimePotency(t,n,o){const l=this.getSubstatBase(t),r=this.getStatDiv(t),d=(1e3+Math.floor((n-l)*130/r))*.001;return o*d}static mpTick(t,n){const o=this.getMainstatBase(t),l=this.getStatDiv(t);return 200+Math.floor(150*(n-o)/l)}static preTaxGcd(t,n,o,l){const r=this.getSubstatBase(t),d=this.getStatDiv(t),E=Math.ceil((r-n)*130/d),h=Math.floor(o*(1e3+E));return Math.floor((100-(l??0))*h/1e3)/100}static preTaxGcdLegacy(t,n,o,l){const r=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(l??0))*100/100)*Math.floor((2e3-Math.floor(130*(n-r)/d+1e3))*(1e3*o)/1e4)/100)*100/100)/100}static preTaxCastTime(t,n,o,l){const r=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(l??0))*100/100)*Math.floor((2e3-Math.floor(130*(n-r)/d+1e3))*(1e3*o)/1e3)/100)*100/100)/1e3}static afterFpsTax(t,n){return Math.floor(n*t+1)/t}}var x=(e=>(e[e.AF3=0]="AF3",e[e.AF2=1]="AF2",e[e.AF1=2]="AF1",e[e.UI3=3]="UI3",e[e.UI2=4]="UI2",e[e.UI1=5]="UI1",e[e.ENO=6]="ENO",e[e.STARRY=7]="STARRY",e[e.EMBOLDEN_M=8]="EMBOLDEN_M",e[e.ACCELERATION=9]="ACCELERATION",e[e.POT=10]="POT",e[e.COMBO=11]="COMBO",e[e.AUTO_CDH=12]="AUTO_CDH",e[e.NO_CDH=13]="NO_CDH",e[e.PARTY=14]="PARTY",e[e.STANDARD_SINGLE=15]="STANDARD_SINGLE",e[e.STANDARD_DOUBLE=16]="STANDARD_DOUBLE",e[e.TECHNICAL_SINGLE=17]="TECHNICAL_SINGLE",e[e.TECHNICAL_DOUBLE=18]="TECHNICAL_DOUBLE",e[e.TECHNICAL_TRIPLE=19]="TECHNICAL_TRIPLE",e[e.TECHNICAL_QUADRUPLE=20]="TECHNICAL_QUADRUPLE",e[e.DEVILMENT=21]="DEVILMENT",e[e.FUGETSU=22]="FUGETSU",e[e.AUTO_CRIT=23]="AUTO_CRIT",e[e.YATEN=24]="YATEN",e[e.POSITIONAL=25]="POSITIONAL",e[e.ARCANE_CIRCLE=26]="ARCANE_CIRCLE",e[e.DEATHSDESIGN=27]="DEATHSDESIGN",e[e.ENHANCED_GIBBET_GALLOWS=28]="ENHANCED_GIBBET_GALLOWS",e[e.ENHANCED_REAPING=29]="ENHANCED_REAPING",e[e.IMMORTAL_SACRIFICE=30]="IMMORTAL_SACRIFICE",e[e.OVERHEATED=31]="OVERHEATED",e[e.SURGING_TEMPEST=32]="SURGING_TEMPEST",e[e.RAGING_STRIKES=33]="RAGING_STRIKES",e[e.WANDERERS_MINUET=34]="WANDERERS_MINUET",e[e.MAGES_BALLAD=35]="MAGES_BALLAD",e[e.ARMYS_PAEON=36]="ARMYS_PAEON",e[e.BATTLE_VOICE=37]="BATTLE_VOICE",e[e.RADIANT_FINALE_ONE_CODA=38]="RADIANT_FINALE_ONE_CODA",e[e.RADIANT_FINALE_TWO_CODA=39]="RADIANT_FINALE_TWO_CODA",e[e.RADIANT_FINALE_THREE_CODA=40]="RADIANT_FINALE_THREE_CODA",e[e.BARRAGE=41]="BARRAGE",e[e.NO_MERCY=42]="NO_MERCY",e[e.SEARING_LIGHT=43]="SEARING_LIGHT",e[e.POWER_SURGE=44]="POWER_SURGE",e[e.ENHANCED_PIERCING_TALON=45]="ENHANCED_PIERCING_TALON",e[e.LANCE_CHARGE=46]="LANCE_CHARGE",e[e.LIFE_OF_THE_DRAGON=47]="LIFE_OF_THE_DRAGON",e[e.LIFE_SURGE=48]="LIFE_SURGE",e[e.BATTLE_LITANY=49]="BATTLE_LITANY",e[e.FIGHT_OR_FLIGHT=50]="FIGHT_OR_FLIGHT",e[e.DIVINE_MIGHT=51]="DIVINE_MIGHT",e[e.REQUIESCAT=52]="REQUIESCAT",e[e.PET=53]="PET",e[e.ZOE=54]="ZOE",e[e.SOTERIA=55]="SOTERIA",e[e.KRASIS=56]="KRASIS",e[e.AUTOPHYSIS=57]="AUTOPHYSIS",e[e.PHILOSOPHIA=58]="PHILOSOPHIA",e[e.MOON_FLUTE=59]="MOON_FLUTE",e[e.BRISTLE=60]="BRISTLE",e[e.WHISTLE=61]="WHISTLE",e[e.TINGLEA=62]="TINGLEA",e[e.TINGLEB=63]="TINGLEB",e[e.SURPANAKHA=64]="SURPANAKHA",e[e.WINGED_REPROBATION=65]="WINGED_REPROBATION",e[e.WINGED_REDEMPTION=66]="WINGED_REDEMPTION",e[e.DARKSIDE=67]="DARKSIDE",e[e.BUNSHIN=68]="BUNSHIN",e[e.KASSATSU=69]="KASSATSU",e[e.HOLLOW_NOZUCHI=70]="HOLLOW_NOZUCHI",e[e.KAZEMATOI=71]="KAZEMATOI",e[e.MEISUI=72]="MEISUI",e[e.DOKUMORI=73]="DOKUMORI",e[e.TRICK_ATTACK=74]="TRICK_ATTACK",e[e.KUNAIS_BANE=75]="KUNAIS_BANE",e[e.BROTHERHOOD=76]="BROTHERHOOD",e[e.RIDDLE_OF_FIRE=77]="RIDDLE_OF_FIRE",e[e.SSS_CHAKRA=78]="SSS_CHAKRA",e[e.MNK_BALL=79]="MNK_BALL",e[e.DIVINATION=80]="DIVINATION",e[e.NEUTRAL_SECT=81]="NEUTRAL_SECT",e[e.THE_ARROW=82]="THE_ARROW",e[e.SYNASTRY=83]="SYNASTRY",e[e.CONFESSION=84]="CONFESSION",e[e.ASYLUM=85]="ASYLUM",e[e.TEMPERANCE=86]="TEMPERANCE",e[e.EXTRA_BELL_STACKS=87]="EXTRA_BELL_STACKS",e[e.HUNTERS_INSTINCT=88]="HUNTERS_INSTINCT",e[e.HONED=89]="HONED",e[e.VENOM=90]="VENOM",e[e.POISED=91]="POISED",e[e.CHAIN_STRAT=92]="CHAIN_STRAT",e[e.FEY_ILLUMINATION=93]="FEY_ILLUMINATION",e[e.DISSIPATION=94]="DISSIPATION",e[e.PROTRACTION=95]="PROTRACTION",e))(x||{});const kg=1.1,nm=.9,q={Tincture:{kind:"multiplier",source:10,potencyFactor:1},AutoCrit:{kind:"critDirect",source:23,critBonus:1,dhBonus:0},AutoCDH:{kind:"critDirect",source:12,critBonus:1,dhBonus:1},NoCDH:{kind:"critDirect",source:13,critBonus:0,dhBonus:0},Starry:{kind:"multiplier",source:7,potencyFactor:1.05},EmboldenMagic:{kind:"multiplier",source:8,potencyFactor:1.1},AccelerationImpact:{kind:"adder",source:9,additiveAmount:50},SingleStandardFinish:{kind:"multiplier",source:15,potencyFactor:1.02},DoubleStandardFinish:{kind:"multiplier",source:16,potencyFactor:1.05},SingleTechnicalFinish:{kind:"multiplier",source:17,potencyFactor:1.01},TripleTechnicalFinish:{kind:"multiplier",source:19,potencyFactor:1.03},QuadrupleTechnicalFinish:{kind:"multiplier",source:20,potencyFactor:1.05},Devilment:{kind:"critDirect",source:21,critBonus:.2,dhBonus:.2},FugetsuBase:{kind:"multiplier",source:22,potencyFactor:1.1},FugetsuEnhanced:{kind:"multiplier",source:22,potencyFactor:1.13},YatenpiBase:{kind:"adder",source:24,additiveAmount:160},YatenpiEnhanced:{kind:"adder",source:24,additiveAmount:170},ArcaneCircle:{kind:"multiplier",source:26,potencyFactor:1.03},DeathsDesign:{kind:"multiplier",source:27,potencyFactor:1.1},EnhancedGibbetGallows:{kind:"adder",source:28,additiveAmount:60},EnhancedReaping:{kind:"adder",source:29,additiveAmount:60},ImmortalSacrifice:{kind:"adder",source:30,additiveAmount:40},Overheated:{kind:"adder",source:31,additiveAmount:20},SurgingTempest:{kind:"multiplier",source:32,potencyFactor:1.1},RagingStrikes:{kind:"multiplier",source:33,potencyFactor:1.15},MagesBallad:{kind:"multiplier",source:35,potencyFactor:1.01},ArmysPaeon:{kind:"critDirect",source:36,critBonus:0,dhBonus:.03},WanderersMinuet:{kind:"critDirect",source:34,critBonus:.02,dhBonus:0},BattleVoice:{kind:"critDirect",source:37,critBonus:0,dhBonus:.2},RadiantFinaleOneCoda:{kind:"multiplier",source:38,potencyFactor:1.02},RadiantFinaleTwoCoda:{kind:"multiplier",source:39,potencyFactor:1.04},RadiantFinaleThreeCoda:{kind:"multiplier",source:40,potencyFactor:1.06},BarrageRefulgent:{kind:"multiplier",source:41,potencyFactor:3},BarrageWideVolley:{kind:"adder",source:41,additiveAmount:80},BarrageShadowbite:{kind:"adder",source:41,additiveAmount:100},NoMercy:{kind:"multiplier",source:42,potencyFactor:1.2},SearingLight:{kind:"multiplier",source:43,potencyFactor:1.05},SmnPet:{kind:"multiplier",source:53,potencyFactor:.8},PowerSurge:{kind:"multiplier",source:44,potencyFactor:1.1},LanceCharge:{kind:"multiplier",source:46,potencyFactor:1.1},LifeOfTheDragon:{kind:"multiplier",source:47,potencyFactor:1.15},BattleLitany:{kind:"critDirect",source:49,critBonus:.1,dhBonus:0},EnhancedPiercingTalon:{kind:"adder",source:45,additiveAmount:150},LifeSurge:{kind:"critDirect",source:48,critBonus:1,dhBonus:0},FightOrFlight:{kind:"multiplier",source:50,potencyFactor:1.25},Zoe:{kind:"multiplier",source:54,potencyFactor:1.5},Soteria:{kind:"multiplier",source:55,potencyFactor:1.7},Krasis:{kind:"multiplier",source:56,potencyFactor:1.2},Autophysis:{kind:"multiplier",source:57,potencyFactor:1.1},Philosophia:{kind:"multiplier",source:58,potencyFactor:1.2},MoonFlute:{kind:"multiplier",source:59,potencyFactor:1.5},Whistle:{kind:"multiplier",source:61,potencyFactor:1.8},Bristle:{kind:"multiplier",source:60,potencyFactor:1.5},TingleA:{kind:"adder",source:62,additiveAmount:100},TingleB:{kind:"adder",source:63,additiveAmount:300},WingedReprobation:{kind:"adder",source:65,additiveAmount:100},WingedRedemption:{kind:"adder",source:66,additiveAmount:220},Darkside:{kind:"multiplier",source:67,potencyFactor:kg},DrkPet:{kind:"multiplier",source:53,potencyFactor:1.05*kg},BunshinST:{kind:"adder",source:68,additiveAmount:160*nm},BunshinAOE:{kind:"adder",source:68,additiveAmount:80*nm},NinPet:{kind:"multiplier",source:53,potencyFactor:nm},Kassatsu:{kind:"multiplier",source:69,potencyFactor:1.3},HollowNozuchi:{kind:"adder",source:70,additiveAmount:70},Kazematoi:{kind:"adder",source:71,additiveAmount:100},Meisui:{kind:"adder",source:72,additiveAmount:150},Dokumori:{kind:"multiplier",source:73,potencyFactor:1.05},TrickAttack:{kind:"multiplier",source:74,potencyFactor:1.1},KunaisBane:{kind:"multiplier",source:75,potencyFactor:1.1},Brotherhood:{kind:"multiplier",source:76,potencyFactor:1.05},RiddleOfFire:{kind:"multiplier",source:77,potencyFactor:1.15},Divination:{kind:"multiplier",source:80,potencyFactor:1.06},NeutralSect:{kind:"multiplier",source:81,potencyFactor:1.2},TheArrow:{kind:"multiplier",source:82,potencyFactor:1.1},Synastry:{kind:"multiplier",source:83,potencyFactor:1.4},AstPet:{kind:"multiplier",source:53,potencyFactor:.98},Confession:{kind:"adder",source:84,additiveAmount:200},Asylum:{kind:"multiplier",source:85,potencyFactor:1.1},Temperance:{kind:"multiplier",source:86,potencyFactor:1.2},WhmPet:{kind:"multiplier",source:53,potencyFactor:.96},HuntersInstinct:{kind:"multiplier",source:88,potencyFactor:1.1},HonedST:{kind:"adder",source:89,additiveAmount:100},HonedAoE:{kind:"adder",source:89,additiveAmount:20},VenomST:{kind:"adder",source:90,additiveAmount:100},VenomAoE:{kind:"adder",source:90,additiveAmount:40},VenomOGCDST:{kind:"adder",source:90,additiveAmount:50},VenomOGCDAoE:{kind:"adder",source:90,additiveAmount:30},Poised:{kind:"adder",source:91,additiveAmount:50},ChainStrat:{kind:"critDirect",source:92,critBonus:.1,dhBonus:0},SchPet:{kind:"multiplier",source:53,potencyFactor:.9},FeyIllum:{kind:"multiplier",source:93,potencyFactor:1.1},Dissipation:{kind:"multiplier",source:94,potencyFactor:1.2},Protraction:{kind:"multiplier",source:95,potencyFactor:1.1}};function rH(e){return{kind:"adder",source:11,additiveAmount:e}}function cH(e){return{kind:"adder",source:52,additiveAmount:e}}function uH(e){return{kind:"adder",source:51,additiveAmount:e}}function Ih(e){return{kind:"adder",source:25,additiveAmount:e}}class Zt{config;sourceTime;sourceSkill;aspect;description;base;targetCount;falloff;snapshotTime;applicationTime;modifiers=[];constructor(t){this.config=t.config,this.sourceTime=t.sourceTime,this.sourceSkill=t.sourceSkill,this.aspect=t.aspect,this.base=t.basePotency,this.snapshotTime=t.snapshotTime,this.description=t.description,this.targetCount=t.targetCount,this.falloff=t.falloff}getAmount(t){let n=1,o=0,l=0,r=0,d=!1,E=!1,h=!1;this.modifiers.forEach(T=>{T.source===10?n*=t.tincturePotencyMultiplier:T.source===12?d=!0:T.source===23?E=!0:T.source===13?h=!0:T.kind==="critDirect"?(l+=T.critBonus,r+=T.dhBonus):T.kind==="multiplier"?n*=T.potencyFactor:T.kind==="adder"&&(o+=T.additiveAmount)}),console.assert(!(h&&(d||E)),"skills that can't CDH cannot be auto-crit or auto-CDH"),h&&(d=!1,E=!1),console.assert(!(d&&E),"cannot be both auto-crit and auto-CDH"),t.includePartyBuffs&&this.snapshotTime&&p.game.getPartyBuffs(this.snapshotTime).forEach(T=>{T.kind==="multiplier"?n*=T.potencyFactor:T.kind==="critDirect"&&(l+=T.critBonus,r+=T.dhBonus)});const A=this.base+o;let R=A*this.#a(n,h?0:l,h?0:r);if(d?R*=this.#e(l,r):E?R*=this.#t(l,r):h&&(R=A*n/st.calculateDamage(this.config.level,this.config.criticalHit,this.config.directHit,this.config.determination,n,0,0)),t.includeSplash){const T=1+(1-(this.falloff??1))*(this.targetCount-1);R*=T}return R}getPartyBuffs(){return this.snapshotTime?[...p.game.getPartyBuffs(this.snapshotTime).keys()]:[]}resolve(t){console.assert(this.snapshotTime!==void 0,`${this.sourceSkill} displayed at ${t} did not have snapshotTime`),console.assert(this.applicationTime===void 0,`${this.sourceSkill} displayed at ${t} was already resolved at ${this.applicationTime}`),this.applicationTime=t}hasResolved(){return this.applicationTime!==void 0}hasHitBoss(t){return this.applicationTime!==void 0&&!t(this.applicationTime)}hasSnapshotted(){return this.snapshotTime!==void 0}#e(t,n){const o=this.config.level,l=st.calculateDamage(o,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,t,n);return st.calculateDamage(o,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,1+t,1+n)/l}#t(t,n){const o=this.config.level,l=st.calculateDamage(o,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,t,n);return st.calculateDamage(o,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,1+t,n)/l}#a(t,n,o){const l=this.config.level,r=this.config.criticalHit,d=this.config.directHit,E=this.config.determination,h=st.calculateDamage(l,r,d,E,1,0,0);return st.calculateDamage(l,r,d,E,t,n,o)/h}}var ut=(e=>(e.Red="#f64141",e.Orange="#e89b5f",e.Yellow="#ffd535",e.Green="#50c53d",e.Cyan="#53e5e5",e.Blue="#217ff5",e.Purple="#9755ef",e.Pink="#ee79ee",e.Grey="#6f6f6f",e))(ut||{});const pt=()=>Gn(b.useContext(Ea)),Gn=e=>e==="Dark"?dH:hH,sl=(e,t)=>Gn(e)[t],dH={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#e176c2",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",GNB:"#f6b26b",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#5579f1",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#b0b0b0",emphasis:"#dadada",success:"mediumseagreen",warning:"#ff6224",background:"#1f1f21",tipBackground:"#2a2a2a",bgLowContrast:"#333",bgMediumContrast:"#393939",bgHighContrast:"#626262",timelineEditor:{headerFooter:"#424242",bgAlternateRow:"#282828"},resources:{gcdBar:"#5cab43",lockBar:"#737373",mana:"#62a5d2",manaTick:"#3d5c73",cdhTag:"#d55124",comboTag:"#5c8bad",petTag:"#eb9b5f"},blm:{enochian:"#b69241",astralFire:"#d55124",astralSoul:"#cb8046",umbralIce:"#509bd5",umbralHeart:"#8fced5",paradox:"#d953ee",polyTimer:"#594472",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#a948e3",weaponCanvas:"#a53535",landscapeCanvas:"#2e51dd",paletteGauge:"#b69241",holyPaint:"#9bc6dd",cometPaint:"#7e19aa",starryBuff:"#509bd5"},rdm:{whiteMana:"#dddddd",blackMana:"#2a4bf5",manaStack:"#cb8046",emboldenBuff:"#de0202",accelBuff:"#f0d1e8"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#c7ffff",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#ffba00"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#9a0ec4",trick:"#ffd454"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fffea5",extraChakra:"#fe9b28"},whm:{lily:"#d3ffff",blood:"#e08889",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#f8facd",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#acfff7",seraph:"#44b6fd",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#2d2d2d",tracks:"#242424",castBar:"#42364d",lockBar:"#696969",gcdBar:"#354931",invalidBg:"#f25449",llCover:"#5ea647",potCover:"#c4543a",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#32525e",warningMark:"#9d7103",lucidTickMark:"#56b3d5",countdown:"rgba(15, 15, 15, 0.4)",markerAlpha:"4f"}},hH={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#f485d6",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#4665ff",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#000000",emphasis:"#000000",success:"mediumseagreen",warning:"#ff4d07",background:"#ffffff",tipBackground:"#ffffff",bgLowContrast:"#efefef",bgMediumContrast:"lightgrey",bgHighContrast:"darkgrey",timelineEditor:{headerFooter:"#cacaca",bgAlternateRow:"#eeeeee"},resources:{gcdBar:"#8edc72",lockBar:"#cbcbcb",mana:"#8ACEEA",manaTick:"#C2EAFF",cdhTag:"#ff6633",comboTag:"#53a7c9",petTag:"#eb9b5f"},blm:{enochian:"#f5cf96",astralFire:"#ff6633",astralSoul:"#ffa641",umbralIce:"#66bbff",umbralHeart:"#95dae3",paradox:"#d953ee",polyTimer:"#d5bbf1",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#b854e8",weaponCanvas:"#d54d48",landscapeCanvas:"#4568f6",paletteGauge:"#f5cf96",holyPaint:"#b7c9d5",cometPaint:"#9926c8",starryBuff:"#66bbff"},rdm:{whiteMana:"#fcd8d4",blackMana:"#467aeb",manaStack:"#9926c8",emboldenBuff:"#c91310",accelBuff:"#c973b4"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#addede",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#e74a3c"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#7e03a3",trick:"#e6b525"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fee11c",extraChakra:"#fe9b28"},whm:{lily:"#a5d0e8",blood:"#ff5454",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#d3d672",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#79d9d0",seraph:"#3299d9",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#e9e9e9",tracks:"#f3f3f3",castBar:"#ecd6f3",lockBar:"#9d9d9d",gcdBar:"#ccefc6",invalidBg:"#c21104",llCover:"#87ec71",potCover:"#ff865c",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#b6dfea",warningMark:"#ffbb29",lucidTickMark:"#88cae0",countdown:"rgba(0, 0, 0, 0.1)",markerAlpha:"7f"}};function EH(e){const t=pt(),n=new Map([[x.AF3,t.blm.astralFire],[x.AF2,t.blm.astralFire],[x.AF1,t.blm.astralFire],[x.UI3,t.blm.umbralIce],[x.UI2,t.blm.umbralIce],[x.UI1,t.blm.umbralIce],[x.ENO,t.blm.enochian],[x.AUTO_CDH,t.resources.cdhTag],[x.STARRY,t.pct.starryBuff],[x.EMBOLDEN_M,t.rdm.emboldenBuff],[x.ACCELERATION,t.rdm.accelBuff],[x.STANDARD_SINGLE,t.dnc.jete],[x.STANDARD_DOUBLE,t.dnc.jete],[x.TECHNICAL_SINGLE,t.dnc.esprit],[x.TECHNICAL_DOUBLE,t.dnc.esprit],[x.TECHNICAL_TRIPLE,t.dnc.esprit],[x.TECHNICAL_QUADRUPLE,t.dnc.esprit],[x.DEVILMENT,t.dnc.feathers],[x.OVERHEATED,"#ee79ee"],[x.COMBO,t.resources.comboTag],[x.FUGETSU,t.sam.fugetsu],[x.AUTO_CRIT,t.resources.cdhTag],[x.YATEN,t.pct.cometPaint],[x.POSITIONAL,"#50c53d"],[x.ARCANE_CIRCLE,"#ee79ee"],[x.DEATHSDESIGN,"#f64141"],[x.ENHANCED_GIBBET_GALLOWS,"#217ff5"],[x.ENHANCED_REAPING,"#9755ef"],[x.IMMORTAL_SACRIFICE,"#ee79ee"],[x.SURGING_TEMPEST,"#9755ef"],[x.BARRAGE,t.brd.barrage],[x.RAGING_STRIKES,t.brd.ragingStrikes],[x.BATTLE_VOICE,t.brd.battleVoice],[x.RADIANT_FINALE_THREE_CODA,t.brd.radiantFinale],[x.RADIANT_FINALE_TWO_CODA,t.brd.radiantFinale],[x.RADIANT_FINALE_ONE_CODA,t.brd.radiantFinale],[x.WANDERERS_MINUET,t.brd.wanderersCoda],[x.MAGES_BALLAD,t.brd.magesCoda],[x.ARMYS_PAEON,t.brd.armysCoda],[x.NO_MERCY,t.rdm.blackMana],[x.SEARING_LIGHT,t.smn.searing],[x.LIFE_SURGE,t.drg.lifeSurge],[x.LANCE_CHARGE,t.drg.lanceCharge],[x.LIFE_OF_THE_DRAGON,t.drg.lifeOfTheDragon],[x.BATTLE_LITANY,t.drg.battleLitany],[x.POWER_SURGE,t.drg.powerSurge],[x.ENHANCED_PIERCING_TALON,t.drg.enhancedPiercingTalon],[x.DIVINE_MIGHT,t.pld.divineMight],[x.REQUIESCAT,t.pld.requiescat],[x.FIGHT_OR_FLIGHT,t.pld.fightOrFlight],[x.PET,t.resources.petTag],[x.MOON_FLUTE,t.blu.moonflute],[x.WHISTLE,t.blu.whistle],[x.BRISTLE,t.blu.bristle],[x.TINGLEA,t.blu.tinglea],[x.TINGLEB,t.blu.tingleb],[x.SURPANAKHA,t.blu.surpanakha],[x.WINGED_REDEMPTION,t.blu.wingedreprobation],[x.WINGED_REPROBATION,t.blu.wingedreprobation],[x.DARKSIDE,t.drk.darkside],[x.BUNSHIN,t.nin.bunshin],[x.KASSATSU,t.nin.kassatsu],[x.HOLLOW_NOZUCHI,t.nin.nozuchi],[x.KAZEMATOI,t.nin.kazematoi],[x.MEISUI,t.nin.meisui],[x.DOKUMORI,t.nin.dokumori],[x.TRICK_ATTACK,t.nin.trick],[x.KUNAIS_BANE,t.nin.trick],[x.BROTHERHOOD,t.mnk.brotherhood],[x.RIDDLE_OF_FIRE,t.mnk.riddleOfFire],[x.MNK_BALL,t.mnk.opo],[x.SSS_CHAKRA,t.mnk.chakra],[x.DIVINATION,t.ast.div],[x.HUNTERS_INSTINCT,t.vpr.huntersInstinct],[x.HONED,t.vpr.vprComboTimer],[x.VENOM,t.vpr.vprComboTimer],[x.POISED,t.vpr.vprComboTimer],[x.CHAIN_STRAT,t.sch.chain],[x.NO_CDH,t.timeline.untargetableDamageMark]]);return console.assert(n.has(e),`modifier ${e} doesn't have a color!`),n.get(e)??t.text}function xg(e){const t=e.colorTheme==="Dark",n=t?c.jsx(lH,{}):c.jsx(sH,{}),o=pt(),l=b.useContext(Ea),r=g({en:t?"Dark Mode":"Light Mode",zh:t?"":""});return c.jsx("div",{title:r,style:{display:"inline-block",cursor:"pointer",borderBottom:e.colorTheme===l?"none":"1px solid "+o.text,borderTop:e.colorTheme===l?"1px solid "+o.text:"none"},onClick:()=>e.setColorTheme(e.colorTheme),children:n})}const wN=()=>{const e=Rt("colorTheme");return e==="Light"||e==="Dark"?e:window.matchMedia?.("(prefers-color-scheme: dark)").matches?"Dark":"Light"},Ea=b.createContext(wN());function fH(e){return c.jsx("div",{style:{display:"inline-block"},children:c.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[c.jsx(xg,{colorTheme:"Light",setColorTheme:e.setColorTheme}),"|",c.jsx(xg,{colorTheme:"Dark",setColorTheme:e.setColorTheme})]})})}class _h{static getJob(t){return rt[t]}static getAction(t){return Ta[t]}static findAction(t){return this.findByName(Ta,t)}static findActionKey(t){return this.findKeyByName(Ta,t)}static getResource(t){return xe[t]}static findResource(t){return this.findByName(xe,t)}static findResourceKey(t){return this.findKeyByName(xe,t)}static getCooldown(t){return Kl[t]}static findCooldown(t){return this.findByName(Kl,t)}static findCooldownKey(t){return this.findKeyByName(Kl,t)}static findByName(t,n){return Object.values(t).find(o=>o.name===n)}static findKeyByName(t,n){const o=Object.entries(t).find(([l,r])=>r.name===n);if(o)return o[0]}}function Gd(e){const t=Ii();return t==="zh"?e==="en"?"":e==="zh"?"":"":t==="ja"?e==="en"?"":e==="zh"?"":"":e.toString()}function g(e){const t=Ii();return t==="zh"&&e.zh?e.zh:t==="ja"&&e.ja?e.ja:e.en}function AH(e,t){{const[n,o,l]=e.split("/");return`20${l}${n}${o}`}}function Kc(e){switch(e){case"spellSpeed":return g({en:"spell speed: ",zh:""}).toString();case"skillSpeed":return g({en:"skill speed: ",zh:""}).toString();case"fps":return g({en:"FPS: ",zh:""}).toString();case"criticalHit":return g({en:"crit: ",zh:""}).toString();case"directHit":return g({en:"direct hit: ",zh:""}).toString();case"determination":return g({en:"determination: ",zh:""}).toString();case"piety":return g({en:"piety: ",zh:""}).toString();case"animationLock":return g({en:"animation lock: ",zh:""}).toString()}return e}function li(e){if(e==="NEVER")return g({en:"unknown skill",zh:""}).toString();if(!(e in Ta))return e;const t=_h.getAction(e);return g({en:t.name,...t.label}).toString()}function Vl(e){if(e===void 0)return g({en:"reason unknown",zh:""}).toString();let t="";return e===dt.Blocked?t="CD":e===dt.SecondaryBlocked?t="CD":e===dt.NotEnoughMP?t="MP":e===dt.NotInCombat?t="":e===dt.RequirementsNotMet?t="":e===dt.SkillNotUnlocked?t="Lv":e===dt.BuffNoLongerAvailable?t="BUFF":e===dt.PastTargetTime?t="":e===dt.CastCanceled?t="":e===dt.UnknownSkill?t="":console.error("unlocalized reason: "+e),g({en:e,zh:t}).toString()}const mH=new Map([[k.LeyLines,""],[k.Hyperphantasia,""],[k.Tincture,""],[k.ArcaneCircle,""],[k.ArmysPaeon,""],[k.BattleLitany,""],[k.BattleVoice,""],[k.Brotherhood,""],[k.Card_TheBalance,""],[k.Card_TheSpear,""],[k.ChainStratagem,""],[k.Devilment,""],[k.Divination,""],[k.Dokumori,""],[k.Embolden,""],[k.MagesBallad,""],[k.RadiantFinale1,"1"],[k.RadiantFinale2,"2"],[k.RadiantFinale3,"3"],[k.SearingLight,""],[k.StandardFinish,""],[k.StarryMuse,""],[k.TechnicalFinish,""],[k.WanderersMinuet,""]]),RH=new Map([[k.LeyLines,""],[k.Tincture,""],[k.ArcaneCircle,""],[k.ArmysPaeon,""],[k.BattleLitany,""],[k.BattleVoice,""],[k.Brotherhood,""],[k.Card_TheBalance,""],[k.Card_TheSpear,""],[k.ChainStratagem,""],[k.Devilment,""],[k.Divination,""],[k.Dokumori,""],[k.Embolden,""],[k.MagesBallad,""],[k.RadiantFinale1,"1"],[k.RadiantFinale2,"2"],[k.RadiantFinale3,"3"],[k.SearingLight,""],[k.StandardFinish,""],[k.StarryMuse,""],[k.TechnicalFinish,""],[k.WanderersMinuet,""]]);function GN(e){const t=Ii();return t==="zh"?mH.get(e)??e:t==="ja"?RH.get(e)??e:e}function ze(e){const t=Ii();if(e in Kl){const o=_h.getCooldown(e),l=g({en:o.name,...o.label}).toString();if(t!=="en"&&l===o.name){const r=e.slice(3),d=Object.keys(Ta).find(E=>Ta[E].name===r||E===r);if(d!==void 0)return"CD"+li(d)}return l}const n=_h.getResource(e);return g({en:n.name,...n.label}).toString()}const Pg=new Map([[x.AF3,{en:"AF3",zh:""}],[x.AF2,{en:"AF2",zh:""}],[x.AF1,{en:"AF1",zh:""}],[x.UI3,{en:"UI3",zh:""}],[x.UI2,{en:"UI2",zh:""}],[x.UI1,{en:"UI1",zh:""}],[x.ENO,{en:"enochian",zh:""}],[x.POT,{en:"pot",zh:""}],[x.PARTY,{en:"party",zh:""}],[x.AUTO_CDH,{en:"auto crit/direct hit",zh:""}],[x.STARRY,{en:"starry muse",zh:""}],[x.EMBOLDEN_M,{en:"embolden",zh:""}],[x.ACCELERATION,{en:"acceleration",zh:""}],[x.STANDARD_SINGLE,{en:"single standard finish",zh:""}],[x.STANDARD_DOUBLE,{en:"double standard finish",zh:""}],[x.TECHNICAL_SINGLE,{en:"single technical finish",zh:""}],[x.TECHNICAL_DOUBLE,{en:"double technical finish",zh:""}],[x.TECHNICAL_TRIPLE,{en:"triple technical finish",zh:""}],[x.TECHNICAL_QUADRUPLE,{en:"quadruple technical finish",zh:""}],[x.DEVILMENT,{en:"devilment",zh:""}],[x.OVERHEATED,{en:"overheated",zh:""}],[x.COMBO,{en:"combo",zh:""}],[x.FUGETSU,{en:"fugetsu",zh:""}],[x.AUTO_CRIT,{en:"auto crit",zh:""}],[x.YATEN,{en:"yaten",zh:""}],[x.POSITIONAL,{en:"positional",zh:""}],[x.ARCANE_CIRCLE,{en:"arcane circle",zh:""}],[x.DEATHSDESIGN,{en:"death's design",zh:""}],[x.ENHANCED_GIBBET_GALLOWS,{en:"enhanced gibbet/gallows",zh:"/"}],[x.ENHANCED_REAPING,{en:"enhanced reaping",zh:"/"}],[x.IMMORTAL_SACRIFICE,{en:"immortal sacrifice"}],[x.BARRAGE,{en:"barrage"}],[x.RAGING_STRIKES,{en:"raging strikes"}],[x.BATTLE_VOICE,{en:"battle voice"}],[x.RADIANT_FINALE_THREE_CODA,{en:"three coda radiant finale"}],[x.RADIANT_FINALE_TWO_CODA,{en:"two coda radiant finale"}],[x.RADIANT_FINALE_ONE_CODA,{en:"one coda radiant finale"}],[x.WANDERERS_MINUET,{en:"wanderer's minuet"}],[x.MAGES_BALLAD,{en:"mage's ballad"}],[x.ARMYS_PAEON,{en:"army's paeon"}],[x.NO_MERCY,{en:"no mercy",zh:""}],[x.SEARING_LIGHT,{en:"searing light",zh:""}],[x.SURGING_TEMPEST,{en:"surging tempest",zh:""}],[x.POWER_SURGE,{en:"power surge"}],[x.LANCE_CHARGE,{en:"lance charge"}],[x.ENHANCED_PIERCING_TALON,{en:"enhanced piercing talon"}],[x.LIFE_OF_THE_DRAGON,{en:"life of the dragon"}],[x.LIFE_SURGE,{en:"life surge"}],[x.PET,{en:"pet modifier",zh:""}],[x.DIVINE_MIGHT,{en:"divine might",zh:""}],[x.REQUIESCAT,{en:"requiescat",zh:""}],[x.FIGHT_OR_FLIGHT,{en:"fight or flight",zh:""}],[x.WHISTLE,{en:"WH",zh:""}],[x.BRISTLE,{en:"BR",zh:""}],[x.MOON_FLUTE,{en:"MF",zh:""}],[x.TINGLEA,{en:"TING",zh:""}],[x.TINGLEB,{en:"TING",zh:""}],[x.WINGED_REPROBATION,{en:"WREP",zh:""}],[x.WINGED_REDEMPTION,{en:"WRED",zh:""}],[x.DARKSIDE,{en:"darkside",zh:""}],[x.BUNSHIN,{en:"bunshin",zh:""}],[x.KASSATSU,{en:"kassatsu",zh:""}],[x.HOLLOW_NOZUCHI,{en:"hollow nozuchi",zh:""}],[x.KAZEMATOI,{en:"kazematoi",zh:""}],[x.MEISUI,{en:"meisui",zh:""}],[x.DOKUMORI,{en:"dokumori",zh:""}],[x.TRICK_ATTACK,{en:"trick attack",zh:""}],[x.KUNAIS_BANE,{en:"kunai's bane",zh:""}],[x.BROTHERHOOD,{en:"brotherhood",zh:""}],[x.RIDDLE_OF_FIRE,{en:"riddle of fire",zh:""}],[x.MNK_BALL,{en:"ball",zh:""}],[x.SSS_CHAKRA,{en:"chakra",zh:""}],[x.DIVINATION,{en:"divination",zh:""}],[x.HUNTERS_INSTINCT,{en:"hunter's instinct",zh:""}],[x.HONED,{en:"honed"}],[x.VENOM,{en:"venom"}],[x.POISED,{en:"poised"}],[x.CHAIN_STRAT,{en:"chain stratagem",zh:""}],[x.NO_CDH,{en:"no crit/direct hit",zh:""}]]);function wg(e){return console.assert(Pg.has(e),`modifier ${e} doesn't have a name!`),g(Pg.get(e)??{en:"unknown"})}const Gg=new Map([[x.AF3,{en:"AF3",zh:""}],[x.AF2,{en:"AF2",zh:""}],[x.AF1,{en:"AF1",zh:""}],[x.UI3,{en:"UI3",zh:""}],[x.UI2,{en:"UI2",zh:""}],[x.UI1,{en:"UI1",zh:""}],[x.ENO,{en:"ENO",zh:""}],[x.POT,{en:"pot",zh:""}],[x.PARTY,{en:"party",zh:""}],[x.AUTO_CDH,{en:"CDH",zh:""}],[x.STARRY,{en:"STARRY",zh:""}],[x.EMBOLDEN_M,{en:"MB",zh:""}],[x.ACCELERATION,{en:"ACC",zh:""}],[x.STANDARD_SINGLE,{en:"SSF",zh:""}],[x.STANDARD_DOUBLE,{en:"DSF",zh:""}],[x.TECHNICAL_SINGLE,{en:"STF",zh:""}],[x.TECHNICAL_DOUBLE,{en:"DTF",zh:""}],[x.TECHNICAL_TRIPLE,{en:"TTF",zh:""}],[x.TECHNICAL_QUADRUPLE,{en:"QTF",zh:""}],[x.DEVILMENT,{en:"DEV",zh:""}],[x.OVERHEATED,{en:"OVERHEATED",zh:""}],[x.COMBO,{en:"CMB",zh:""}],[x.FUGETSU,{en:"FGS",zh:""}],[x.AUTO_CRIT,{en:"CRIT",zh:""}],[x.YATEN,{en:"ENH",zh:""}],[x.POSITIONAL,{en:"PS",zh:""}],[x.ARCANE_CIRCLE,{en:"AC",zh:""}],[x.DEATHSDESIGN,{en:"DD",zh:""}],[x.ENHANCED_GIBBET_GALLOWS,{en:"E. GIB/GAL",zh:"/"}],[x.ENHANCED_REAPING,{en:"E. REAPING",zh:"/"}],[x.IMMORTAL_SACRIFICE,{en:"IMMORTAL SAC",zh:""}],[x.BARRAGE,{en:"BRG"}],[x.RAGING_STRIKES,{en:"RS"}],[x.BATTLE_VOICE,{en:"BV"}],[x.RADIANT_FINALE_THREE_CODA,{en:"RF3"}],[x.RADIANT_FINALE_TWO_CODA,{en:"RF2"}],[x.RADIANT_FINALE_ONE_CODA,{en:"RF1"}],[x.WANDERERS_MINUET,{en:"WM"}],[x.MAGES_BALLAD,{en:"MB"}],[x.ARMYS_PAEON,{en:"AP"}],[x.NO_MERCY,{en:"NM",zh:""}],[x.SEARING_LIGHT,{en:"SL",zh:""}],[x.SURGING_TEMPEST,{en:"SURGING",zh:""}],[x.POWER_SURGE,{en:"PWS"}],[x.LANCE_CHARGE,{en:"LC"}],[x.LIFE_OF_THE_DRAGON,{en:"LIFE"}],[x.ENHANCED_PIERCING_TALON,{en:"ENH"}],[x.LIFE_SURGE,{en:"LS"}],[x.BATTLE_LITANY,{en:"BL"}],[x.DIVINE_MIGHT,{en:"DM",zh:""}],[x.REQUIESCAT,{en:"REQ",zh:""}],[x.FIGHT_OR_FLIGHT,{en:"FOF",zh:""}],[x.PET,{en:"PET",zh:""}],[x.WHISTLE,{en:"WH",zh:""}],[x.BRISTLE,{en:"BR",zh:""}],[x.MOON_FLUTE,{en:"MF",zh:""}],[x.TINGLEA,{en:"TING",zh:""}],[x.TINGLEB,{en:"TING",zh:""}],[x.WINGED_REPROBATION,{en:"WREP",zh:""}],[x.WINGED_REDEMPTION,{en:"WRED",zh:""}],[x.DARKSIDE,{en:"DS",zh:""}],[x.BUNSHIN,{en:"BUN",zh:""}],[x.KASSATSU,{en:"KASS",zh:""}],[x.HOLLOW_NOZUCHI,{en:"NOZ",zh:""}],[x.KAZEMATOI,{en:"KAZ",zh:""}],[x.MEISUI,{en:"MEI",zh:""}],[x.DOKUMORI,{en:"DOKU",zh:""}],[x.TRICK_ATTACK,{en:"TRICK",zh:""}],[x.KUNAIS_BANE,{en:"KB",zh:""}],[x.BROTHERHOOD,{en:"BH",zh:""}],[x.RIDDLE_OF_FIRE,{en:"ROF",zh:""}],[x.MNK_BALL,{en:"BALL",zh:""}],[x.SSS_CHAKRA,{en:"CHAKRA",zh:""}],[x.DIVINATION,{en:"DIV",zh:""}],[x.HUNTERS_INSTINCT,{en:"HI",zh:""}],[x.HONED,{en:"HONED"}],[x.VENOM,{en:"VENOM"}],[x.POISED,{en:"POISED"}],[x.CHAIN_STRAT,{en:"CHAIN",zh:""}],[x.NO_CDH,{en:"NO CDH",zh:""}]]);function TH(e){return console.assert(Gg.has(e),`modifier ${e} doesn't have a tag name!`),g(Gg.get(e)??{en:"unknown"})}const BN=navigator.language==="zh-CN"||navigator.language==="zh"?"zh":"en";let Ii=()=>BN;function Bg(e){let t="English";e.lang==="zh"&&(t=""),e.lang==="ja"&&(t="");const n=pt();return c.jsx("div",{style:{display:"inline-block",cursor:"pointer",textDecoration:e.lang===Ii()?"none":"underline",borderTop:e.lang===Ii()?"1px solid "+n.text:"none"},onClick:()=>{e.setCurrentLanguage(e.lang)},children:t})}function SH(){const e=Rt("language"),t=e!==null&&["zh","ja","en"].includes(e)?e:BN,[n,o]=b.useState(t),l=r=>{o(r),ft("language",r)};return b.useEffect(()=>(Ii=()=>n,()=>{Ii=()=>n})),b.useEffect(()=>{p.updateAllDisplay()},[n]),c.jsxs("div",{style:{display:"inline-block"},children:[c.jsx("span",{style:{display:"inline-block",fontSize:17,position:"relative",marginRight:2},children:c.jsx(oH,{})}),c.jsxs("div",{style:{display:"inline-block",fontSize:14,verticalAlign:"top"},children:[c.jsx(Bg,{lang:"en",setCurrentLanguage:l}),"|",c.jsx(Bg,{lang:"zh",setCurrentLanguage:l})]})]})}const FN=ie()({UNIMPLEMENTED:{},OUTDATED:{label:{en:"Outdated",zh:""},warningContent:{en:"WARNING: This job recently had significant changes, and may not have been fully updated to reflect them. Exported plans may not load correctly following these changes, so be cautious about relying on them until the job has been fully updated.",zh:"bugtxt"}},TESTING:{label:{en:"Testing",zh:""},warningContent:{en:"WARNING: This job was recently added to XIV in the Shell and is still being tested. There may be bugs or changes in the near future, so make sure to frequently export and save timelines for this job to make sure you don't lose your work.",zh:"txt"}},LIVE:{}});ie()({TANK:{label:g({en:"Tank"})},HEALER:{label:g({en:"Healer"})},MELEE:{label:g({en:"Melee"})},RANGED:{label:g({en:"Ranged"})},CASTER:{label:g({en:"Caster"})},LIMITED:{label:g({en:"Limited"})}});const zN=ie()({PLD:{role:"TANK",implementationLevel:"TESTING",usesMp:!0,limitBreak:"LAST_BASTION",limitBreakBuff:"LAST_BASTION",mainStat:"strength",zh:""},WAR:{role:"TANK",implementationLevel:"LIVE",limitBreak:"LAND_WAKER",limitBreakBuff:"LAND_WAKER",mainStat:"strength",zh:""},DRK:{role:"TANK",implementationLevel:"LIVE",usesMp:!0,limitBreak:"DARK_FORCE",limitBreakBuff:"DARK_FORCE",mainStat:"strength",zh:""},GNB:{role:"TANK",implementationLevel:"LIVE",limitBreak:"GUNMETAL_SOUL",limitBreakBuff:"GUNMETAL_SOUL",mainStat:"strength",zh:""}}),PR=ie()({WHM:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"PULSE_OF_LIFE",mainStat:"mind",zh:""},SCH:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ANGEL_FEATHERS",mainStat:"mind",zh:""},AST:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ASTRAL_STASIS",mainStat:"mind",zh:""},SGE:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"TECHNE_MAKRE",mainStat:"mind",zh:""}}),jN=ie()({MNK:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"FINAL_HEAVEN",mainStat:"strength",zh:""},DRG:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DRAGONSONG_DIVE",mainStat:"strength",zh:""},NIN:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"CHIMATSURI",mainStat:"dexterity",zh:""},SAM:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DOOM_OF_THE_LIVING",mainStat:"strength",zh:""},RPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"THE_END",mainStat:"strength",zh:""},VPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"WORLD_SWALLOWER",mainStat:"dexterity",zh:""}}),YN=ie()({BRD:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SAGITTARIUS_ARROW",mainStat:"dexterity",zh:""},MCH:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SATELLITE_BEAM",mainStat:"dexterity",zh:""},DNC:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"CRIMSON_LOTUS",mainStat:"dexterity",zh:""}}),KN=ie()({BLM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"METEOR",mainStat:"intelligence",zh:""},SMN:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"TERAFLARE",mainStat:"intelligence",zh:""},RDM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"VERMILLION_SCOURGE",mainStat:"intelligence",zh:""},PCT:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"CHROMATIC_FANTASY",mainStat:"intelligence",zh:""}}),VN=ie()({BLU:{role:"LIMITED",implementationLevel:"TESTING",usesMp:!0,mainStat:"intelligence",zh:""}}),rt={...zN,...PR,...jN,...YN,...KN,...VN,...ie()({NEVER:{role:"LIMITED",implementationLevel:"UNIMPLEMENTED",usesMp:!1,mainStat:"strength",zh:""}})},es=Object.keys(rt),cn=Object.keys(zN),si=Object.keys(PR),$a=Object.keys(jN),dl=Object.keys(YN),ri=Object.keys(KN),xr=Object.keys(VN);var nn=(e=>(e[e.ManaGain=0]="ManaGain",e[e.MpTick=1]="MpTick",e[e.LucidTick=2]="LucidTick",e[e.MeditateTick=3]="MeditateTick",e[e.AutoTick=4]="AutoTick",e))(nn||{});class Ne{name;#e;timeTillEvent;delay;effectFn;canceled;constructor(t,n,o){this.name=t,this.#e=[],this.timeTillEvent=n,this.delay=n,this.effectFn=o,this.canceled=!1}hasTag(t){for(let n=0;n<this.#e.length;n++)if(t===this.#e[n])return!0;return!1}addTag(t){this.hasTag(t)||this.#e.push(t)}}class WN{maxValue;currentValue;constructor(t,n){this.maxValue=t,this.currentValue=n}availableAmount(){return this.currentValue}consume(t){this.currentValue<t-ha.epsilon&&console.warn(`invalid resource consumption: ${this.type}, ${this.currentValue} - ${t}`),this.currentValue=Math.max(this.currentValue-t,0)}gain(t){this.currentValue=Math.min(this.currentValue+t,this.maxValue)}overrideCurrentValue(t){(t<0||t>this.maxValue)&&console.warn(`invalid resource value override: ${this.type}, ${t} should be in [0, ${this.maxValue}]`),this.currentValue=t}}class Wa extends WN{type;enabled;warnOnOvercap;pendingChange;#e;constructor(t,n,o,l=!1){super(n,o),this.type=t,this.enabled=!0,this.warnOnOvercap=l}available(t){return this.availableAmount()+ha.epsilon>=t}availableAmountIncludingDisabled(){return this.currentValue}availableAmount(){return this.enabled?super.availableAmount():0}gain(t){this.warnOnOvercap&&this.currentValue+t>this.maxValue&&p.reportWarning({kind:"overcap",rsc:this.type}),super.gain(t)}gainWrapping(t){this.currentValue=(this.currentValue+t)%(this.maxValue+1)}overrideTimer(t,n){this.pendingChange?(t.addEvent(new Ne("override "+this.pendingChange.name+" timer: "+n,0,()=>{this.pendingChange&&(this.pendingChange.timeTillEvent=n)})),this.pendingChange.timeTillEvent=n):console.error(`Failed to override non-pending resource timer for resource: ${this.type}`)}removeTimer(){this.pendingChange&&(this.pendingChange.canceled=!0,this.pendingChange=void 0)}getLastExpirationTime(){return this.#e}consume(t){super.consume(t),this.currentValue===0&&(this.#e=p.game.getDisplayTime())}}class Le extends WN{type;#e;#t;#a;constructor(t,n,o,l){super(o,l),this.type=t,this.#e=n,this.#t=n,this.#a=0}currentStackCd(){return this.#t}maxStacks(){return this.maxValue}useStack(){this.stacksAvailable()===this.maxStacks()&&(this.#a=this.#t),super.consume(1)}useStackWithRecast(t){console.assert(this.maxStacks()===1,"class CoolDown assumes special recasts are only available for skills with at most 1 stack"),this.#t=t,this.useStack()}restore(t){for(;t>0&&super.availableAmount()<this.maxStacks();){const n=Math.min(this.#a,t);this.#a-=n,this.#a<ha.epsilon&&(super.gain(1),this.#t=this.#e,this.stacksAvailable()<this.maxStacks()&&(this.#a+=this.#e)),t-=n}}timeTillNextStackAvailable(){return this.#a}overrideTimeTillNextStack(t){this.#a=t}stacksAvailable(){return super.availableAmount()}}class IH{game;#e;constructor(t){this.game=t,this.#e=new Map}forEach(t){this.#e.forEach(t)}get(t){const n=this.#e.get(t);return n||(console.assert(!1,`no cooldown for resource ${t}`),new Le("NEVER",0,0,0))}set(t){this.#e.set(t.type,t)}tick(t){for(const n of this.#e.values())n.restore(t)}timeTillNextStackAvailable(t){return this.get(t).timeTillNextStackAvailable()}timeTillAnyStackAvailable(t){const n=this.get(t);return n.stacksAvailable()>0?0:n.timeTillNextStackAvailable()}}class _H{game;#e;constructor(t){this.game=t,this.#e=new Map}get(t){const n=this.#e.get(t);return n||(console.error(`could not find resource ${t}`),new Wa("NEVER",0,0))}set(t){this.#e.set(t.type,t)}timeTillReady(t){const n=this.get(t);return n.pendingChange?n.pendingChange.timeTillEvent:0}addResourceEvent(t){const n=this.get(t.rscType),o=new Ne(t.name,t.delay,()=>{n.pendingChange=void 0,t.fnOnRsc(n)});n.pendingChange=o,t.tags&&t.tags.forEach(l=>{o.addTag(l)}),this.game.addEvent(o)}takeResourceLock(t,n){this.get(t).consume(1),this.addResourceEvent({rscType:t,name:"[resource ready] "+t,delay:n,fnOnRsc:o=>{o.gain(1)}})}}const gh=new Map,XN=new Map,qN=new Map,ZN=new Map;function Fg(e){return XN.get(e.toLowerCase())??qN.get(e)??ZN.get(e)}function wt(e,t){const n=gh.get(e);return n.has(t)||console.error(`no resource info found for ${t}`),n.get(t)}function Bi(e){return gh.has(e)||console.error("could not find resources for job "+e),gh.get(e)}function je(e,t,n,o){Bi(e).set(t,{isCoolDown:!1,defaultValue:o.default??0,maxValue:n,maxTimeout:o.timeout??-1,warnOnOvercap:o.warnOnOvercap??!1,warnOnTimeout:o.warnOnTimeout??!1});const l=xe[t].label;XN.set(xe[t].name.toLowerCase(),t),l?.zh!==void 0&&qN.set(l.zh,t),l?.ja!==void 0&&ZN.set(l.ja,t)}es.forEach(e=>{gh.set(e,new Map([["cd_GCD",{isCoolDown:!0,maxStacks:1,cdPerStack:2.5}]])),je(e,"IN_COMBAT",1,{default:0}),je(e,"MANA",1e4,{default:1e4}),je(e,"TINCTURE",1,{timeout:30}),je(e,"SPRINT",1,{timeout:10}),je(e,"PARTY_SIZE",8,{default:8}),je(e,"AUTOS_ENGAGED",1,{default:0}),je(e,"STORED_AUTO",1,{default:0})});$a.forEach(e=>{je(e,"REAR_POSITIONAL",1,{default:1}),je(e,"FLANK_POSITIONAL",1,{default:1})});function tu(e,t,n,o=1){Bi(e).set(t,{isCoolDown:!0,cdPerStack:n,maxStacks:o})}class wR{type;timeTillFullOrDrop;stacks;effectOrTimerEnabled;constructor(t){this.type=t.type,this.timeTillFullOrDrop=t.timeTillFullOrDrop,this.stacks=t.stacks,this.effectOrTimerEnabled=t.effectOrTimerEnabled}equals(t){return this.type===t.type&&this.timeTillFullOrDrop===t.timeTillFullOrDrop&&this.stacks===t.stacks&&this.effectOrTimerEnabled===t.effectOrTimerEnabled}static fromGameState(t){const n=[];return t.cooldowns.forEach((o,l)=>{o.availableAmount(),n.push(new wR({type:l,timeTillFullOrDrop:o.maxValue-o.availableAmount(),stacks:0,effectOrTimerEnabled:!0}))}),n}applyTo(t){const n=Bi(t.job).get(this.type);if(!n){console.assert(!1,`can't apply override ${this.type} to job ${t.job}`);return}if(n.isCoolDown){const o=t.cooldowns.get(this.type),l=o.maxStacks()*o.currentStackCd()-this.timeTillFullOrDrop,r=Math.floor((l+ha.epsilon)/o.currentStackCd()),d=this.timeTillFullOrDrop%o.currentStackCd();o.overrideCurrentValue(r),o.overrideTimeTillNextStack(d)}else{const o=t.resources.get(this.type),l=r=>{o.removeTimer(),t.resources.addResourceEvent({rscType:o.type,name:"drop "+o.type,delay:r,fnOnRsc:d=>{o.type==="ENOCHIAN"?t.loseEnochian():d.consume(d.availableAmount())}})};if(o.type==="LEY_LINES")o.consume(o.availableAmount()),o.gain(1),l(this.timeTillFullOrDrop),o.enabled=this.effectOrTimerEnabled;else if(o.type==="POLYGLOT"){const r=this.stacks;o.consume(o.availableAmount()),o.gain(r);const d=this.timeTillFullOrDrop;d>0&&o.overrideTimer(t,d)}else{const r=this.stacks;o.consume(o.availableAmount()),o.gain(r);const d=this.timeTillFullOrDrop;r>0&&n.maxTimeout>=0&&l(d)}}}serialized(){return{type:this.type,timeTillFullOrDrop:this.timeTillFullOrDrop,stacks:this.stacks,effectOrTimerEnabled:this.effectOrTimerEnabled}}}const jt=.8,un=.01;function au(e,t){}function Me(e,...t){return(n,o)=>{e!==void 0&&e(n,o);for(const l of t)l!==void 0&&l(n,o)}}function hu(e,...t){return n=>(e===void 0||e(n))&&t.every(o=>o===void 0||o(n))}const ts=new Map,GR=new Map;es.forEach(e=>{ts.set(e,new Map),GR.set(e,new Map)});const ph=new Map,eE="General/Missing.png",hl=new Map;hl.set(vR.ENERGY_DRAIN.id,"ENERGY_DRAIN");hl.set(vR.PHYSICK.id,"PHYSICK");hl.set(UN.MOUNTAIN_BUSTER.id,"MOUNTAIN_BUSTER");hl.set(45960,"ENCHANTED_RIPOSTE");hl.set(45961,"ENCHANTED_ZWERCHHAU");hl.set(45962,"ENCHANTED_REDOUBLEMENT");const zg=new Set,Um=new Map,QN=new Map,JN=new Map,jg=new Map([["Lightning Shock","Lightning Shot"],["Wanderer's Minuet","The Wanderer's Minuet"],["Apex Arow","Apex Arrow"],["Storms Eye","Storm's Eye"],["Storms Path","Storm's Path"]]);function BR(e){return jg.has(e)&&(e=jg.get(e)),e=e.toLowerCase(),!Um.has(e)&&!zg.has(e)&&(console.error(`could not find skill with name: ${e}`),zg.add(e)),Um.get(e)}function gH(e){return e in xe?e:_h.findResourceKey(e)}function al(e,t){return ts.get(e).get(t)}function $N(e){return ph.get(e)??eE}function pH(e,t){return ts.get(e).has(t)}function tE(e,t,n){ts.get(e).set(t,n),GR.get(e).set(Ta[t].discordEmote??Ta[t].name.replaceAll(" ",""),t),Um.set(Ta[t].name.toLowerCase(),t);const o=Ta[t].label;o?.zh!==void 0&&QN.set(o.zh,t),o?.ja!==void 0&&JN.set(o.ja,t),ph.set(t,n.assetPath),Ta[t].id!==void 0&&hl.set(Ta[t].id,t)}function ln(e,t){return e===void 0?n=>t||0:typeof e=="number"?n=>e:e}function NH(e){return console.assert(e.length>0,`invalid trait potency array: ${e}`),t=>{let n;const o=t.config.level;for(const[l,r]of e)t.hasTraitUnlocked(l)&&(n=r);return console.assert(n!==void 0,`no applicable potency at level ${o} found in array ${e}`),n||0}}function Jt(e,t){return(Array.isArray(t)?NH(t):ln(t,0))(e)}function FR(e,t){const n=Ta[t].name;return`${e}/${n.replace(":","")}.png`}function Bn(e,t,n,o){Array.isArray(e)||(e=[e]);const l=Me((h,A)=>A.applicationTime=h.time,o.onApplication),r=Me(h=>h.maybeCancelChanneledSkills(t),o.onExecute),d=h=>{const A=[];return o.potency&&(o.combo||o.positional)&&A.push(...h.computeComboAndPositionalModifiers(Jt(h,o.potency),o.combo,o.positional)),o.jobPotencyModifiers&&A.push(...o.jobPotencyModifiers(h)),A},E={kind:"spell",name:t,assetPath:o.assetPath??(e.length===1?FR(e[0],t):eE),unlockLevel:n,autoUpgrade:o.autoUpgrade,autoDowngrade:o.autoDowngrade,cdName:"cd_GCD",secondaryCd:o.secondaryCooldown,aspect:o.aspect??Ie.Other,replaceIf:o.replaceIf??[],startOnHotbar:o.startOnHotbar??!0,highlightIf:o.highlightIf??(h=>!1),castTimeFn:ln(o.castTime,0),recastTimeFn:ln(o.recastTime,2.5),animationLockFn:h=>ln(o.animationLock,h.config.animationLock)(h),manaCostFn:ln(o.manaCost,0),potencyFn:h=>Jt(h,o.potency),jobPotencyModifiers:d,drawsAggro:o.drawsAggro??!1,falloff:o.falloff,healingPotencyFn:h=>Jt(h,o.healingPotency),jobHealingPotencyModifiers:o.jobHealingPotencyModifiers??(h=>[]),aoeHeal:o.aoeHeal??!1,validateAttempt:o.validateAttempt??(h=>!0),isInstantFn:o.isInstantFn??(h=>!1),onExecute:r,onConfirm:o.onConfirm??au,onApplication:l,applicationDelay:o.applicationDelay??0,startsAuto:o.startsAuto??!1};if(e.forEach(h=>tE(h,E.name,E)),o.secondaryCooldown!==void 0){const{cdName:h,cooldown:A,maxCharges:R}=o.secondaryCooldown;e.forEach(T=>tu(T,h,A,R))}return E}function $t(e,t,n,o){Array.isArray(e)||(e=[e]);const l=Me((h,A)=>A.applicationTime=h.time,o.onApplication),r=Me(h=>h.maybeCancelChanneledSkills(t),o.onExecute),d=h=>{const A=[];return o.potency&&(o.combo||o.positional)&&A.push(...h.computeComboAndPositionalModifiers(Jt(h,o.potency),o.combo,o.positional)),o.jobPotencyModifiers&&A.push(...o.jobPotencyModifiers(h)),A},E={kind:"weaponskill",name:t,assetPath:o.assetPath??(e.length===1?FR(e[0],t):eE),unlockLevel:n,autoUpgrade:o.autoUpgrade,autoDowngrade:o.autoDowngrade,cdName:"cd_GCD",secondaryCd:o.secondaryCooldown,aspect:o.aspect??Ie.Other,replaceIf:o.replaceIf??[],startOnHotbar:o.startOnHotbar??!0,highlightIf:o.highlightIf??(h=>!1),castTimeFn:ln(o.castTime,0),recastTimeFn:ln(o.recastTime,2.5),animationLockFn:h=>ln(o.animationLock,h.config.animationLock)(h),manaCostFn:ln(o.manaCost,0),potencyFn:h=>Jt(h,o.potency),jobPotencyModifiers:d,drawsAggro:o.drawsAggro??!1,falloff:o.falloff,healingPotencyFn:h=>Jt(h,o.healingPotency),jobHealingPotencyModifiers:o.jobHealingPotencyModifiers??(h=>[]),aoeHeal:o.aoeHeal??!1,validateAttempt:o.validateAttempt??(h=>!0),isInstantFn:o.isInstantFn??(h=>!0),onExecute:r,onConfirm:o.onConfirm??au,onApplication:l,applicationDelay:o.applicationDelay??0,startsAuto:o.startsAuto??!0};if(e.forEach(h=>tE(h,E.name,E)),o.secondaryCooldown!==void 0){const{cdName:h,cooldown:A,maxCharges:R}=o.secondaryCooldown;e.forEach(T=>tu(T,h,A,R))}return E}function et(e,t,n,o,l){Array.isArray(e)||(e=[e]);const r=Me((A,R)=>R.applicationTime=A.time,l.onApplication),d=Me(A=>A.maybeCancelChanneledSkills(t),l.onExecute),E=hu(A=>l.requiresCombat?A.isInCombat():!0,l.validateAttempt??(A=>!0)),h={kind:"ability",name:t,assetPath:l.assetPath??(e.length===1?FR(e[0],t):eE),requiresCombat:l.requiresCombat,unlockLevel:n,autoUpgrade:l.autoUpgrade,autoDowngrade:l.autoDowngrade,cdName:o,secondaryCd:l.secondaryCooldown,aspect:l.aspect??Ie.Other,replaceIf:l.replaceIf??[],startOnHotbar:l.startOnHotbar??!0,highlightIf:l.highlightIf??(A=>!1),animationLockFn:A=>ln(l.animationLock,A.config.animationLock)(A),manaCostFn:ln(l.manaCost,0),potencyFn:A=>Jt(A,l.potency),jobPotencyModifiers:l.jobPotencyModifiers??(A=>[]),drawsAggro:l.drawsAggro??!1,falloff:l.falloff,healingPotencyFn:A=>Jt(A,l.healingPotency),jobHealingPotencyModifiers:l.jobHealingPotencyModifiers??(A=>[]),aoeHeal:l.aoeHeal??!1,applicationDelay:l.applicationDelay??0,validateAttempt:E,onExecute:d,onConfirm:l.onConfirm??au,onApplication:r,startsAuto:l.startsAuto??!1};if(e.forEach(A=>tE(A,h.name,h)),l.cooldown!==void 0&&e.forEach(A=>tu(A,o,l.cooldown,l.maxCharges??1)),l.secondaryCooldown!==void 0){const{cdName:A,cooldown:R,maxCharges:T}=l.secondaryCooldown;e.forEach(S=>tu(S,A,R,T))}return h}function we(e,t,n,o,l){const r=Me((d,E)=>{const h=d.resources.get(l.rscType),A=l.duration??wt(d.job,l.rscType).maxTimeout,R=typeof A=="number"?T=>A:A;h.gain(h.maxValue),d.enqueueResourceDrop(l.rscType,R(d))},l?.onApplication);return et(e,t,n,o,{...l,onApplication:r})}function dn(e,t,n,o){Array.isArray(e)||(e=[e]);const l="Limit Break "+o.tier,r=Me(E=>E.maybeCancelChanneledSkills(t),o.onExecute),d={kind:"limitbreak",name:t,animationLockFn:E=>o.animationLock,assetPath:`General/${l}.png`,unlockLevel:1,autoUpgrade:void 0,autoDowngrade:void 0,cdName:n,secondaryCd:void 0,aspect:Ie.Other,replaceIf:[],startOnHotbar:!0,castTimeFn:ln(o.castTime,0),highlightIf:E=>!1,manaCostFn:E=>0,potencyFn:ln(o.potency,0),jobPotencyModifiers:E=>[],healingPotencyFn:ln(o.healingPotency,0),jobHealingPotencyModifiers:E=>[],aoeHeal:!1,drawsAggro:!1,applicationDelay:o.applicationDelay??0,validateAttempt:o.validateAttempt??(E=>!0),onExecute:r,onConfirm:o.onConfirm??au,onApplication:o.onApplication??au,startsAuto:!1};return e.forEach(E=>tE(E,d.name,d)),e.forEach(E=>tu(E,n,(o.castTime??0)+o.animationLock,1)),d}class CH{job;constructor(t){this.job=t.job}get(t){const n=ts.get(this.job).get(t);return n||(console.error(`creating placeholder skill ${t} for ${this.job}`),et([this.job],t,1,"NEVER",{validateAttempt:o=>!1}))}}function Nr(e,t,n){let o=al(e,t);for(;o.autoUpgrade&&MN(o.autoUpgrade.trait,n);)o=al(e,Nr(e,o.autoUpgrade.otherSkill,n));for(;o.autoDowngrade&&n<o.unlockLevel;)o=al(e,Nr(e,o.autoDowngrade.otherSkill,n));return o.name}function eC(e,t){const n=al(t.job,e);for(const o of n.replaceIf){if(o.newSkill===e)continue;const l=al(t.job,o.newSkill);if(!l)throw new Error("couldn't find skill info for "+o.newSkill);if(t.config.level>=l.unlockLevel&&o.condition(t))return Nr(t.job,o.newSkill,t.config.level)}return Nr(t.job,n.name,t.config.level)}class OH{#e;constructor(t,n){this.#e=[],console.assert(ts.has(t),`No skill map found for job: ${t}`);for(const l of ts.get(t).values())l.name!=="NEVER"&&l.cdName!=="NEVER"&&n>=l.unlockLevel&&l.autoDowngrade===void 0&&l.startOnHotbar&&this.#e.push(Nr(t,l.name,n));let o=ph.get("TINCTURE");switch(rt[t].role){case"TANK":case"MELEE":t==="NIN"||t==="VPR"?o="Role/Dexterity Tincture.png":o="Role/Strength Tincture.png";break;case"HEALER":o="Role/Mind Tincture.png";break;case"LIMITED":case"CASTER":o="Role/Intelligence Tincture.png";break;case"RANGED":o="Role/Dexterity Tincture.png";break}ph.set("TINCTURE",o)}getCurrentSkillNames(t){return this.#e.map(n=>eC(n,t))}}var Ge=(e=>(e.Skill="Skill",e.Wait="Wait",e.JumpToTimestamp="JumpToTimestamp",e.WaitForMP="WaitForMP",e.SetResourceEnabled="SetResourceEnabled",e.Unknown="Unknown",e.Invalid="Invalid",e))(Ge||{});function Wl(e,t){return new wn({type:"Skill",skillName:e,targetCount:t??1,healTargetCount:void 0})}function bH(e,t){return new wn({type:"Unknown",skillName:e,targetCount:t??1,healTargetCount:void 0})}function mr(e){return new wn({type:"Wait",waitDuration:e})}function el(e){return new wn({type:"JumpToTimestamp",targetTime:e})}function tC(){return new wn({type:"WaitForMP"})}function km(e){return new wn({type:"SetResourceEnabled",buffName:e})}class wn{#e;#t;#a;#n;#i;applicationTime;#c;#s;#r;#u;info;legacyWaitDuration;tmp_startLockTime;tmp_endLockTime;tmp_invalid_reasons;constructor(t,n){this.info=t,this.#e=new Set,this.#a=new Map,this.#i=new Map,this.#c=new Map,this.#s=new Map,this.#r=new Map,this.#u=new Map,this.legacyWaitDuration=n,this.tmp_invalid_reasons=[]}serialized(){return this.info.type==="Skill"?{type:"Skill",skillName:Ta[this.info.skillName].name,targetCount:this.info.targetCount,healTargetCount:this.info.healTargetCount}:this.info.type==="SetResourceEnabled"?{type:"SetResourceEnabled",buffName:this.info.buffName.toString()}:this.info.type==="Unknown"?{type:"Skill",skillName:this.info.skillName,targetCount:this.info.targetCount,healTargetCount:this.info.healTargetCount}:this.info}toLocalizedString(){if(this.info.type==="Skill")return li(this.info.skillName);if(this.info.type==="SetResourceEnabled")return g({en:"toggle ",zh:""}).toString()+ze(this.info.buffName);if(this.info.type==="Wait"){const t=this.info.waitDuration.toFixed(3);return g({en:`wait ${t}`,zh:`${t}`}).toString()}else{if(this.info.type==="WaitForMP")return g({en:"wait MP",zh:""}).toString();if(this.info.type==="JumpToTimestamp"){const t=this.info.targetTime.toFixed(3);return g({en:`jump ${t}`,zh:`${t}`}).toString()}}return"(unknown)"}maybeGetActionKey(){return this.info.type==="Skill"?this.info.skillName:void 0}get targetCount(){return this.info.type==="Skill"?this.info.targetCount:0}get healTargetCount(){return this.info.type==="Skill"?this.info.healTargetCount??0:0}getNameForMessage(){return this.info.type==="Skill"?Ta[this.info.skillName].name:this.info.type.toString()}getClone(){return new wn(this.info,this.legacyWaitDuration)}addBuff(t){this.#e.add(t)}hasBuff(t){return this.#e.has(t)}hasPartyBuff(){const t=this.#t?.snapshotTime;return t!==void 0&&p.game.getPartyBuffs(t).size>0}getPartyBuffs(){const t=this.#t?.snapshotTime;return t?[...p.game.getPartyBuffs(t).keys()]:[]}setTargetCount(t){this.info.type==="Skill"&&(this.info.targetCount=t)}setHealTargetCount(t){this.info.type==="Skill"&&(this.info.healTargetCount=t)}resolveAll(t){this.#t&&this.#t.resolve(t),this.#a.forEach(n=>{n.forEach(o=>{o.resolve(t)})})}resolved(){return this.applicationTime!==void 0}hitBoss(t){return this.#t?.hasHitBoss(t)??!0}getPotency(t){const n={applied:0,snapshottedButPending:0};return this.#t&&this.recordPotency(t,this.#t,n),t.excludeDoT||this.#a.forEach(o=>{o.forEach(l=>{this.recordPotency(t,l,n)})}),n}getHealingPotency(t){const n={applied:0,snapshottedButPending:0};return this.#n&&this.recordPotency(t,this.#n,n),t.excludeHoT||this.#i.forEach(o=>{o.forEach(l=>{this.recordPotency(t,l,n)})}),n}recordPotency(t,n,o){n.hasHitBoss(t.untargetable)?o.applied+=n.getAmount(t):!n.hasResolved()&&n.hasSnapshotted()&&(o.snapshottedButPending+=n.getAmount(t))}removeUnresolvedOvertimePotencies(t){(t==="damage"?this.#a:this.#i).forEach(o=>{const l=o.findIndex(r=>!r.hasResolved());l<0||o.splice(l)})}anyPotencies(){return this.#t!==void 0||this.#a.size>0}anyHealingPotencies(){return this.#n!==void 0||this.#i.size>0}getInitialPotency(){return this.#t}getInitialHealingPotency(){return this.#n}getAllDotPotencies(){return this.getAllOverTimePotencies("damage")}getAllHotPotencies(){return this.getAllOverTimePotencies("healing")}getAllOverTimePotencies(t){return t==="damage"?this.#a:this.#i}getDotPotencies(t){return this.getOverTimePotencies(t,"damage")}getHotPotencies(t){return this.getOverTimePotencies(t,"healing")}getOverTimePotencies(t,n){return n==="damage"?this.#a.get(t)??[]:this.#i.get(t)??[]}addPotency(t){console.assert(!this.#t,`ActionNode for ${this.getNameForMessage()} already had an initial potency`),this.#t=t}addHealingPotency(t){console.assert(!this.#n,`ActionNode for ${this.getNameForMessage()} already had an initial healing potency`),this.#n=t}addDoTPotency(t,n){this.addOverTimePotency(t,n,"damage")}addHoTPotency(t,n){this.addOverTimePotency(t,n,"healing")}addOverTimePotency(t,n,o){const l=o==="damage"?this.#a:this.#i,r=l.get(n)??[];r.length===0&&l.set(n,r),r.push(t)}setOverTimeGap(t,n,o){this.setOverTimeMappedAmount(t,n,o==="damage"?this.#s:this.#u)}getOverTimeGap(t,n){return this.getOverTimeMappedAmount(t,n==="damage"?this.#s:this.#u)}setOverTimeOverrideAmount(t,n,o){this.setOverTimeMappedAmount(t,n,o==="damage"?this.#c:this.#r)}getOverTimeOverrideAmount(t,n){return this.getOverTimeMappedAmount(t,n==="damage"?this.#c:this.#r)}setOverTimeMappedAmount(t,n,o){o.set(t,n)}getOverTimeMappedAmount(t,n){return n.get(t)??0}}class Cr{actions;name="(anonymous line)";constructor(){this.actions=[]}get length(){return this.actions.length}get head(){return this.length>0?this.actions[0]:void 0}get tail(){return this.length>0?this.actions[this.actions.length-1]:void 0}get tailIndex(){return this.length-1}prependActionNode(t){console.assert(t!==void 0),this.actions.unshift(t)}insertActionNodes(t,n){t.length>0&&this.actions.splice(n,0,...t)}addActionNode(t){console.assert(t!==void 0),this.actions.push(t)}iterateAll(t){this.actions.forEach(n=>t(n))}serialized(){return{name:this.name,actions:this.actions.map(t=>t.serialized())}}exportCsv(){return[]}static deserialize(t){const n=t.map(l=>{if(l.type==="Skill"){const r=BR(l.skillName),d="waitDuration"in l?l.waitDuration:void 0;return new wn(r!==void 0?{type:"Skill",skillName:r,targetCount:l.targetCount,healTargetCount:l.healTargetCount}:{type:"Unknown",skillName:l.skillName,targetCount:l.targetCount,healTargetCount:l.healTargetCount},d)}else if(l.type==="SetResourceEnabled"){const r="waitDuration"in l?l.waitDuration:void 0;return new wn({type:"SetResourceEnabled",buffName:gH(l.buffName)},r)}else return l.type==="Wait"||l.type==="JumpToTimestamp"||l.type==="WaitForMP"?new wn(l):(window.alert("unparseable action: "+JSON.stringify(l)),new wn({type:"Invalid"}))}),o=new Cr;return o.actions=n,o}}class Eo extends Cr{selectionStartIndex;selectionEndIndex;startIsPivot=!0;config;get selectionStart(){return this.selectionStartIndex!==void 0?this.actions[this.selectionStartIndex]:void 0}get selectionEnd(){return this.selectionEndIndex!==void 0?this.actions[this.selectionEndIndex]:void 0}getFirstSelection(){return this.selectionStart&&console.assert(this.selectionEnd!==void 0),this.selectionStart}getLastSelection(){return this.selectionEnd&&console.assert(this.selectionStart!==void 0),this.selectionEnd}isInSelection(t){return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&t>=this.selectionStartIndex&&t<=this.selectionEndIndex}iterateSelected(t){if(!(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0))for(let n=this.selectionStartIndex;n<=this.selectionEndIndex;n++)t(this.actions[n])}getSelected(){const t=new Cr;return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&(t.actions=this.actions.slice(this.selectionStartIndex,this.selectionEndIndex+1)),t}getSelectionLength(){return this.selectionStartIndex===void 0||this.selectionEndIndex===void 0?0:this.selectionEndIndex-this.selectionStartIndex+1}selectSingle(t){this.unselectAll(),this.selectionStartIndex=t,this.selectionEndIndex=t,this.startIsPivot=!0}unselectAll(){this.selectionStartIndex=void 0,this.selectionEndIndex=void 0,this.startIsPivot=!0}#e(t,n){this.unselectAll(),this.selectionStartIndex=t,this.selectionEndIndex=n}selectUntil(t){if(this.selectionStartIndex!==void 0&&this.selectionStartIndex===this.selectionEndIndex)this.selectionStartIndex<=t?(this.#e(this.selectionStartIndex,t),this.startIsPivot=!0):(this.#e(t,this.selectionStartIndex),this.startIsPivot=!1);else if(this.selectionStartIndex!==void 0&&this.selectionStartIndex!==this.selectionEndIndex){const n=this.startIsPivot?this.selectionStartIndex:this.selectionEndIndex;this.selectionStartIndex=n,this.selectionEndIndex=n,this.selectUntil(t)}}onClickNode(t,n){n&&this.selectionStartIndex!==void 0?this.selectUntil(t):this.selectionStartIndex===t&&this.selectionEndIndex===t?this.unselectAll():this.selectSingle(t)}moveSelected(t){if(t===0||this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const n=this.selectionStartIndex,o=this.getSelectionLength(),l=this.actions.splice(n,o);let r=n+t;return r=Math.max(r,0),r=Math.min(r,this.length),this.actions.splice(r,0,...l),this.selectionStartIndex=r,this.selectionEndIndex=r+o-1,r}deleteSelected(){if(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const t=this.selectionStartIndex;return this.actions.splice(t,this.getSelectionLength()),this.unselectAll(),t}serialized(){console.assert(this.config);const t=super.serialized();return{name:t.name,fileType:ni.Record,config:this.config?.serialized(),actions:t.actions}}spliceUpTo(t){const n=this.selectionStartIndex,o=this.selectionEndIndex;this.unselectAll(),t<this.length&&this.actions.splice(t,this.length-t),n!==void 0&&(this.selectSingle(n),this.selectUntil(o))}getCloneWithSharedConfig(){const t=new Eo;return t.config=this.config,t.actions=this.actions.map(n=>n.getClone()),t.selectionStartIndex=this.selectionStartIndex,t.selectionEndIndex=this.selectionEndIndex,t}}var Pr=CN();function aC({controlled:e,default:t,name:n,state:o="value"}){const{current:l}=b.useRef(e!==void 0),[r,d]=b.useState(t),E=l?e:r,h=b.useCallback(A=>{l||d(A)},[]);return[E,h]}const Yg={};function wr(e,t){const n=b.useRef(Yg);return n.current===Yg&&(n.current=e(t)),n}const im=ER[`useInsertionEffect${Math.random().toFixed(1)}`.slice(0,-3)],DH=im&&im!==b.useLayoutEffect?im:e=>e();function nt(e){const t=wr(yH).current;return t.next=e,DH(t.effect),t.trampoline}function yH(){const e={next:void 0,callback:vH,trampoline:(...t)=>e.callback?.(...t),effect:()=>{e.callback=e.next}};return e}function vH(){}const nC=b.createContext(void 0);function aE(){const e=b.useContext(nC);if(e===void 0)throw new Error("Base UI: TooltipRootContext is missing. Tooltip parts must be placed within <Tooltip.Root>.");return e}const MH=[];function iC(e){b.useEffect(e,MH)}const Yc=0;class rl{static create(){return new rl}currentId=Yc;start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=Yc,n()},t)}isStarted(){return this.currentId!==Yc}clear=()=>{this.currentId!==Yc&&(clearTimeout(this.currentId),this.currentId=Yc)};disposeEffect=()=>this.clear}function Or(){const e=wr(rl.create).current;return iC(e.disposeEffect),e}const LH=()=>{},Lt=typeof document<"u"?b.useLayoutEffect:LH;function nE(){return typeof window<"u"}function El(e){return zR(e)?(e.nodeName||"").toLowerCase():"#document"}function Ua(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ji(e){var t;return(t=(zR(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function zR(e){return nE()?e instanceof Node||e instanceof Ua(e).Node:!1}function Mt(e){return nE()?e instanceof Element||e instanceof Ua(e).Element:!1}function Ha(e){return nE()?e instanceof HTMLElement||e instanceof Ua(e).HTMLElement:!1}function xm(e){return!nE()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ua(e).ShadowRoot}const HH=new Set(["inline","contents"]);function Eu(e){const{overflow:t,overflowX:n,overflowY:o,display:l}=ii(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!HH.has(l)}const UH=new Set(["table","td","th"]);function kH(e){return UH.has(El(e))}const xH=[":popover-open",":modal"];function iE(e){return xH.some(t=>{try{return e.matches(t)}catch{return!1}})}const PH=["transform","translate","scale","rotate","perspective"],wH=["transform","translate","scale","rotate","perspective","filter"],GH=["paint","layout","strict","content"];function jR(e){const t=oE(),n=Mt(e)?ii(e):e;return PH.some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||wH.some(o=>(n.willChange||"").includes(o))||GH.some(o=>(n.contain||"").includes(o))}function BH(e){let t=So(e);for(;Ha(t)&&!Ro(t);){if(jR(t))return t;if(iE(t))return null;t=So(t)}return null}function oE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const FH=new Set(["html","body","#document"]);function Ro(e){return FH.has(El(e))}function ii(e){return Ua(e).getComputedStyle(e)}function lE(e){return Mt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function So(e){if(El(e)==="html")return e;const t=e.assignedSlot||e.parentNode||xm(e)&&e.host||ji(e);return xm(t)?t.host:t}function oC(e){const t=So(e);return Ro(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ha(t)&&Eu(t)?t:oC(t)}function nl(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const l=oC(e),r=l===((o=e.ownerDocument)==null?void 0:o.body),d=Ua(l);if(r){const E=Pm(d);return t.concat(d,d.visualViewport||[],Eu(l)?l:[],E&&n?nl(E):[])}return t.concat(l,nl(l,[],n))}function Pm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ri(e){const t=wr(zH,e).current;return t.next=e,Lt(t.effect),t}function zH(e){const t={current:e,next:e,effect:()=>{t.current=t.next}};return t}const Gr=typeof navigator<"u",om=KH(),lC=WH(),sC=VH(),rC=typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none"),jH=om.platform==="MacIntel"&&om.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(om.platform),cC=Gr&&/apple/i.test(navigator.vendor),wm=Gr&&/android/i.test(lC)||/android/i.test(sC),YH=Gr&&lC.toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints,uC=sC.includes("jsdom/");function KH(){if(!Gr)return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e?.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform??"",maxTouchPoints:navigator.maxTouchPoints??-1}}function VH(){if(!Gr)return"";const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(({brand:t,version:n})=>`${t}/${n}`).join(" "):navigator.userAgent}function WH(){if(!Gr)return"";const e=navigator.userAgentData;return e?.platform?e.platform:navigator.platform??""}const Gm="data-base-ui-focusable",dC="active",hC="selected",XH="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Qo(e){let t=e.activeElement;for(;t?.shadowRoot?.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function da(e,t){if(!e||!t)return!1;const n=t.getRootNode?.();if(e.contains(t))return!0;if(n&&xm(n)){let o=t;for(;o;){if(e===o)return!0;o=o.parentNode||o.host}}return!1}function xn(e){return"composedPath"in e?e.composedPath()[0]:e.target}function ho(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function qH(e){return e.matches("html,body")}function La(e){return e?.ownerDocument||document}function EC(e){return Ha(e)&&e.matches(XH)}function Kg(e){return e?e.getAttribute("role")==="combobox"&&EC(e):!1}function ZH(e){if(!e||uC)return!0;try{return e.matches(":focus-visible")}catch{return!0}}function Bm(e){return e?e.hasAttribute(Gm)?e:e.querySelector(`[${Gm}]`)||e:null}function Xl(e,t,n=!0){return e.filter(l=>l.parentId===t&&(!n||l.context?.open)).flatMap(l=>[l,...Xl(e,l.id,n)])}function Vg(e,t){let n=[],o=e.find(l=>l.id===t)?.parentId;for(;o;){const l=e.find(r=>r.id===o);o=l?.parentId,l&&(n=n.concat(l))}return n}function QH(e){e.preventDefault(),e.stopPropagation()}function JH(e){return"nativeEvent"in e}function $H(e){return e.mozInputSource===0&&e.isTrusted?!0:wm&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function eU(e){return uC?!1:!wm&&e.width===0&&e.height===0||wm&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function br(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}const tU=["top","right","bottom","left"],Dr=Math.min,Pn=Math.max,Nh=Math.round,Bd=Math.floor,Pi=e=>({x:e,y:e}),aU={left:"right",right:"left",bottom:"top",top:"bottom"},nU={start:"end",end:"start"};function Fm(e,t,n){return Pn(e,Dr(t,n))}function Io(e,t){return typeof e=="function"?e(t):e}function oi(e){return e.split("-")[0]}function fl(e){return e.split("-")[1]}function YR(e){return e==="x"?"y":"x"}function KR(e){return e==="y"?"height":"width"}const iU=new Set(["top","bottom"]);function Ti(e){return iU.has(oi(e))?"y":"x"}function VR(e){return YR(Ti(e))}function oU(e,t,n){n===void 0&&(n=!1);const o=fl(e),l=VR(e),r=KR(l);let d=l==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(d=Ch(d)),[d,Ch(d)]}function lU(e){const t=Ch(e);return[zm(e),t,zm(t)]}function zm(e){return e.replace(/start|end/g,t=>nU[t])}const Wg=["left","right"],Xg=["right","left"],sU=["top","bottom"],rU=["bottom","top"];function cU(e,t,n){switch(e){case"top":case"bottom":return n?t?Xg:Wg:t?Wg:Xg;case"left":case"right":return t?sU:rU;default:return[]}}function uU(e,t,n,o){const l=fl(e);let r=cU(oi(e),n==="start",o);return l&&(r=r.map(d=>d+"-"+l),t&&(r=r.concat(r.map(zm)))),r}function Ch(e){return e.replace(/left|right|bottom|top/g,t=>aU[t])}function dU(e){return{top:0,right:0,bottom:0,left:0,...e}}function fC(e){return typeof e!="number"?dU(e):{top:e,right:e,bottom:e,left:e}}function Oh(e){const{x:t,y:n,width:o,height:l}=e;return{width:o,height:l,top:n,left:t,right:t+o,bottom:n+l,x:t,y:n}}var hU=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],bh=hU.join(","),AC=typeof Element>"u",yr=AC?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Dh=!AC&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},yh=function e(t,n){var o;n===void 0&&(n=!0);var l=t==null||(o=t.getAttribute)===null||o===void 0?void 0:o.call(t,"inert"),r=l===""||l==="true",d=r||n&&t&&e(t.parentNode);return d},EU=function(t){var n,o=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return o===""||o==="true"},mC=function(t,n,o){if(yh(t))return[];var l=Array.prototype.slice.apply(t.querySelectorAll(bh));return n&&yr.call(t,bh)&&l.unshift(t),l=l.filter(o),l},RC=function e(t,n,o){for(var l=[],r=Array.from(t);r.length;){var d=r.shift();if(!yh(d,!1))if(d.tagName==="SLOT"){var E=d.assignedElements(),h=E.length?E:d.children,A=e(h,!0,o);o.flatten?l.push.apply(l,A):l.push({scopeParent:d,candidates:A})}else{var R=yr.call(d,bh);R&&o.filter(d)&&(n||!t.includes(d))&&l.push(d);var T=d.shadowRoot||typeof o.getShadowRoot=="function"&&o.getShadowRoot(d),S=!yh(T,!1)&&(!o.shadowRootFilter||o.shadowRootFilter(d));if(T&&S){var I=e(T===!0?d.children:T.children,!0,o);o.flatten?l.push.apply(l,I):l.push({scopeParent:d,candidates:I})}else r.unshift.apply(r,d.children)}}return l},TC=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},SC=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||EU(t))&&!TC(t)?0:t.tabIndex},fU=function(t,n){var o=SC(t);return o<0&&n&&!TC(t)?0:o},AU=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},IC=function(t){return t.tagName==="INPUT"},mU=function(t){return IC(t)&&t.type==="hidden"},RU=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(o){return o.tagName==="SUMMARY"});return n},TU=function(t,n){for(var o=0;o<t.length;o++)if(t[o].checked&&t[o].form===n)return t[o]},SU=function(t){if(!t.name)return!0;var n=t.form||Dh(t),o=function(E){return n.querySelectorAll('input[type="radio"][name="'+E+'"]')},l;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")l=o(window.CSS.escape(t.name));else try{l=o(t.name)}catch(d){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",d.message),!1}var r=TU(l,t.form);return!r||r===t},IU=function(t){return IC(t)&&t.type==="radio"},_U=function(t){return IU(t)&&!SU(t)},gU=function(t){var n,o=t&&Dh(t),l=(n=o)===null||n===void 0?void 0:n.host,r=!1;if(o&&o!==t){var d,E,h;for(r=!!((d=l)!==null&&d!==void 0&&(E=d.ownerDocument)!==null&&E!==void 0&&E.contains(l)||t!=null&&(h=t.ownerDocument)!==null&&h!==void 0&&h.contains(t));!r&&l;){var A,R,T;o=Dh(l),l=(A=o)===null||A===void 0?void 0:A.host,r=!!((R=l)!==null&&R!==void 0&&(T=R.ownerDocument)!==null&&T!==void 0&&T.contains(l))}}return r},qg=function(t){var n=t.getBoundingClientRect(),o=n.width,l=n.height;return o===0&&l===0},pU=function(t,n){var o=n.displayCheck,l=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var r=yr.call(t,"details>summary:first-of-type"),d=r?t.parentElement:t;if(yr.call(d,"details:not([open]) *"))return!0;if(!o||o==="full"||o==="legacy-full"){if(typeof l=="function"){for(var E=t;t;){var h=t.parentElement,A=Dh(t);if(h&&!h.shadowRoot&&l(h)===!0)return qg(t);t.assignedSlot?t=t.assignedSlot:!h&&A!==t.ownerDocument?t=A.host:t=h}t=E}if(gU(t))return!t.getClientRects().length;if(o!=="legacy-full")return!0}else if(o==="non-zero-area")return qg(t);return!1},NU=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var o=0;o<n.children.length;o++){var l=n.children.item(o);if(l.tagName==="LEGEND")return yr.call(n,"fieldset[disabled] *")?!0:!l.contains(t)}return!0}n=n.parentElement}return!1},jm=function(t,n){return!(n.disabled||yh(n)||mU(n)||pU(n,t)||RU(n)||NU(n))},Ym=function(t,n){return!(_U(n)||SC(n)<0||!jm(t,n))},CU=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},OU=function e(t){var n=[],o=[];return t.forEach(function(l,r){var d=!!l.scopeParent,E=d?l.scopeParent:l,h=fU(E,d),A=d?e(l.candidates):E;h===0?d?n.push.apply(n,A):n.push(E):o.push({documentOrder:r,tabIndex:h,item:l,isScope:d,content:A})}),o.sort(AU).reduce(function(l,r){return r.isScope?l.push.apply(l,r.content):l.push(r.content),l},[]).concat(n)},sE=function(t,n){n=n||{};var o;return n.getShadowRoot?o=RC([t],n.includeContainer,{filter:Ym.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:CU}):o=mC(t,n.includeContainer,Ym.bind(null,n)),OU(o)},bU=function(t,n){n=n||{};var o;return n.getShadowRoot?o=RC([t],n.includeContainer,{filter:jm.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):o=mC(t,n.includeContainer,jm.bind(null,n)),o},_C=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return yr.call(t,bh)===!1?!1:Ym(n,t)};const fu=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function gC(e,t){const n=sE(e,fu()),o=n.length;if(o===0)return;const l=Qo(La(e)),r=n.indexOf(l),d=r===-1?t===1?0:o-1:r+t;return n[d]}function pC(e){return gC(La(e).body,1)||e}function NC(e){return gC(La(e).body,-1)||e}function $c(e,t){const n=t||e.currentTarget,o=e.relatedTarget;return!o||!da(n,o)}function DU(e){sE(e,fu()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Zg(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const o=n.dataset.tabindex;delete n.dataset.tabindex,o?n.setAttribute("tabindex",o):n.removeAttribute("tabindex")})}const yU={...ER};let Qg=0;function vU(e,t="mui"){const[n,o]=b.useState(e),l=e||n;return b.useEffect(()=>{n==null&&(Qg+=1,o(`${t}-${Qg}`))},[n,t]),l}const Jg=yU.useId;function rE(e,t){if(Jg!==void 0){const n=Jg();return e??(t?`${t}-${n}`:n)}return vU(e,t)}function MU(){const e=new Map;return{emit(t,n){e.get(t)?.forEach(o=>o(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){e.get(t)?.delete(n)}}}const LU=b.createContext(null),HU=b.createContext(null),WR=()=>b.useContext(LU)?.id||null,cE=()=>b.useContext(HU);function vr(e){return`data-base-ui-${e}`}const $g=vr("safe-polygon");function Qd(e,t,n){if(n&&!br(n))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const o=e();return typeof o=="number"?o:o?.[t]}return e?.[t]}function lm(e){return typeof e=="function"?e():e}function UU(e,t={}){const{open:n,onOpenChange:o,dataRef:l,events:r,elements:d}=e,{enabled:E=!0,delay:h=0,handleClose:A=null,mouseOnly:R=!1,restMs:T=0,move:S=!0}=t,I=cE(),C=WR(),_=Ri(A),O=Ri(h),D=Ri(n),U=Ri(T),H=b.useRef(void 0),L=Or(),w=b.useRef(void 0),G=Or(),B=b.useRef(!0),j=b.useRef(!1),Q=b.useRef(()=>{}),ce=b.useRef(!1),ue=nt(()=>{const K=l.current.openEvent?.type;return K?.includes("mouse")&&K!=="mousedown"});b.useEffect(()=>{if(!E)return;function K({open:$}){$||(L.clear(),G.clear(),B.current=!0,ce.current=!1)}return r.on("openchange",K),()=>{r.off("openchange",K)}},[E,r,L,G]),b.useEffect(()=>{if(!E||!_.current||!n)return;function K(de){ue()&&o(!1,de,"hover")}const $=La(d.floating).documentElement;return $.addEventListener("mouseleave",K),()=>{$.removeEventListener("mouseleave",K)}},[d.floating,n,o,E,_,ue]);const te=b.useCallback((K,$=!0,de="hover")=>{const y=Qd(O.current,"close",H.current);y&&!w.current?L.start(y,()=>o(!1,K,de)):$&&(L.clear(),o(!1,K,de))},[O,o,L]),ee=nt(()=>{Q.current(),w.current=void 0}),fe=nt(()=>{if(j.current){const K=La(d.floating).body;K.style.pointerEvents="",K.removeAttribute($g),j.current=!1}}),he=nt(()=>l.current.openEvent?["click","mousedown"].includes(l.current.openEvent.type):!1);b.useEffect(()=>{if(!E)return;function K(W){if(L.clear(),B.current=!1,R&&!br(H.current)||lm(U.current)>0&&!Qd(O.current,"open"))return;const z=Qd(O.current,"open",H.current);z?L.start(z,()=>{D.current||o(!0,W,"hover")}):n||o(!0,W,"hover")}function $(W){if(he()){fe();return}Q.current();const z=La(d.floating);if(G.clear(),ce.current=!1,_.current&&l.current.floatingContext){n||L.clear(),w.current=_.current({...l.current.floatingContext,tree:I,x:W.clientX,y:W.clientY,onClose(){fe(),ee(),he()||te(W,!0,"safe-polygon")}});const ne=w.current;z.addEventListener("mousemove",ne),Q.current=()=>{z.removeEventListener("mousemove",ne)};return}(H.current==="touch"?!da(d.floating,W.relatedTarget):!0)&&te(W)}function de(W){he()||l.current.floatingContext&&_.current?.({...l.current.floatingContext,tree:I,x:W.clientX,y:W.clientY,onClose(){fe(),ee(),he()||te(W)}})(W)}function y(){L.clear()}function Y(W){he()||te(W,!1)}if(Mt(d.domReference)){const W=d.domReference,z=d.floating;return n&&W.addEventListener("mouseleave",de),S&&W.addEventListener("mousemove",K,{once:!0}),W.addEventListener("mouseenter",K),W.addEventListener("mouseleave",$),z&&(z.addEventListener("mouseleave",de),z.addEventListener("mouseenter",y),z.addEventListener("mouseleave",Y)),()=>{n&&W.removeEventListener("mouseleave",de),S&&W.removeEventListener("mousemove",K),W.removeEventListener("mouseenter",K),W.removeEventListener("mouseleave",$),z&&(z.removeEventListener("mouseleave",de),z.removeEventListener("mouseenter",y),z.removeEventListener("mouseleave",Y))}}},[d,E,e,R,S,te,ee,fe,o,n,D,I,O,_,l,he,U,L,G]),Lt(()=>{if(E&&n&&_.current?.__options?.blockPointerEvents&&ue()){j.current=!0;const K=d.floating;if(Mt(d.domReference)&&K){const $=La(d.floating).body;$.setAttribute($g,"");const de=d.domReference,y=I?.nodesRef.current.find(Y=>Y.id===C)?.context?.elements.floating;return y&&(y.style.pointerEvents=""),$.style.pointerEvents="none",de.style.pointerEvents="auto",K.style.pointerEvents="auto",()=>{$.style.pointerEvents="",de.style.pointerEvents="",K.style.pointerEvents=""}}}},[E,n,C,d,I,_,ue]),Lt(()=>{n||(H.current=void 0,ce.current=!1,ee(),fe())},[n,ee,fe]),b.useEffect(()=>()=>{ee(),L.clear(),G.clear(),fe()},[E,d.domReference,ee,fe,L,G]);const M=b.useMemo(()=>{function K($){H.current=$.pointerType}return{onPointerDown:K,onPointerEnter:K,onMouseMove($){const{nativeEvent:de}=$;function y(){!B.current&&!D.current&&o(!0,de,"hover")}R&&!br(H.current)||n||lm(U.current)===0||ce.current&&$.movementX**2+$.movementY**2<2||(G.clear(),H.current==="touch"?y():(ce.current=!0,G.start(lm(U.current),y)))}}},[R,o,n,D,U,G]);return b.useMemo(()=>E?{reference:M}:{},[E,M])}const kU=b.createContext({hasProvider:!1,timeoutMs:0,delayRef:{current:0},initialDelayRef:{current:0},timeout:new rl,currentIdRef:{current:null},currentContextRef:{current:null}});function xU(e,t={}){const{open:n,onOpenChange:o,floatingId:l}=e,{enabled:r=!0}=t,d=b.useContext(kU),{currentIdRef:E,delayRef:h,timeoutMs:A,initialDelayRef:R,currentContextRef:T,hasProvider:S,timeout:I}=d,[C,_]=b.useState(!1);return Lt(()=>{function O(){_(!1),T.current?.setIsInstantPhase(!1),E.current=null,T.current=null,h.current=R.current}if(r&&E.current&&!n&&E.current===l){if(_(!1),A)return I.start(A,O),()=>{I.clear()};O()}},[r,n,l,E,h,A,R,T,I]),Lt(()=>{if(!r||!n)return;const O=T.current,D=E.current;T.current={onOpenChange:o,setIsInstantPhase:_},E.current=l,h.current={open:0,close:Qd(R.current,"close")},D!==null&&D!==l?(I.clear(),_(!0),O?.setIsInstantPhase(!0),O?.onOpenChange(!1)):(_(!1),O?.setIsInstantPhase(!1))},[r,n,l,o,E,h,A,R,T,I]),Lt(()=>()=>{T.current=null},[T]),b.useMemo(()=>({hasProvider:S,delayRef:h,isInstantPhase:C}),[S,h,C])}function Mr(e,t,n,o){const l=wr(CC).current;return wU(l,e,t,n,o)&&OC(l,[e,t,n,o]),l.callback}function PU(e){const t=wr(CC).current;return GU(t,e)&&OC(t,e),t.callback}function CC(){return{callback:null,cleanup:null,refs:[]}}function wU(e,t,n,o,l){return e.refs[0]!==t||e.refs[1]!==n||e.refs[2]!==o||e.refs[3]!==l}function GU(e,t){return e.refs.length!==t.length||e.refs.some((n,o)=>n!==t[o])}function OC(e,t){if(e.refs=t,t.every(n=>n==null)){e.callback=null;return}e.callback=n=>{if(e.cleanup&&(e.cleanup(),e.cleanup=null),n!=null){const o=Array(t.length).fill(null);for(let l=0;l<t.length;l+=1){const r=t[l];if(r!=null)switch(typeof r){case"function":{const d=r(n);typeof d=="function"&&(o[l]=d);break}case"object":{r.current=n;break}}}e.cleanup=()=>{for(let l=0;l<t.length;l+=1){const r=t[l];if(r!=null)switch(typeof r){case"function":{const d=o[l];typeof d=="function"?d():r(null);break}case"object":{r.current=null;break}}}}}}}const XR={clip:"rect(0 0 0 0)",overflow:"hidden",whiteSpace:"nowrap",position:"fixed",top:0,left:0,border:0,padding:0,width:1,height:1,margin:-1},vh=b.forwardRef(function(t,n){const[o,l]=b.useState();Lt(()=>{cC&&l("button")},[]);const r={ref:n,tabIndex:0,role:o,"aria-hidden":o?void 0:!0,style:XR};return c.jsx("span",{...t,...r,"data-base-ui-focus-guard":""})});let ep=0;function sm(e,t={}){const{preventScroll:n=!1,cancelPrevious:o=!0,sync:l=!1}=t;o&&cancelAnimationFrame(ep);const r=()=>e?.focus({preventScroll:n});l?r():ep=requestAnimationFrame(r)}const Rr={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function tp(e){return e==="inert"?Rr.inert:e==="aria-hidden"?Rr["aria-hidden"]:Rr.none}let Fd=new WeakSet,zd={},rm=0;const bC=e=>e&&(e.host||bC(e.parentNode)),BU=(e,t)=>t.map(n=>{if(e.contains(n))return n;const o=bC(n);return e.contains(o)?o:null}).filter(n=>n!=null);function FU(e,t,n,o){const l="data-base-ui-inert",r=o?"inert":n?"aria-hidden":null,d=BU(t,e),E=new Set,h=new Set(d),A=[];zd[l]||(zd[l]=new WeakMap);const R=zd[l];d.forEach(T),S(t),E.clear();function T(I){!I||E.has(I)||(E.add(I),I.parentNode&&T(I.parentNode))}function S(I){!I||h.has(I)||[].forEach.call(I.children,C=>{if(El(C)!=="script")if(E.has(C))S(C);else{const _=r?C.getAttribute(r):null,O=_!==null&&_!=="false",D=tp(r),U=(D.get(C)||0)+1,H=(R.get(C)||0)+1;D.set(C,U),R.set(C,H),A.push(C),U===1&&O&&Fd.add(C),H===1&&C.setAttribute(l,""),!O&&r&&C.setAttribute(r,r==="inert"?"":"true")}})}return rm+=1,()=>{A.forEach(I=>{const C=tp(r),O=(C.get(I)||0)-1,D=(R.get(I)||0)-1;C.set(I,O),R.set(I,D),O||(!Fd.has(I)&&r&&I.removeAttribute(r),Fd.delete(I)),D||I.removeAttribute(l)}),rm-=1,rm||(Rr.inert=new WeakMap,Rr["aria-hidden"]=new WeakMap,Rr.none=new WeakMap,Fd=new WeakSet,zd={})}}function zU(e,t=!1,n=!1){const o=La(e[0]).body;return FU(e.concat(Array.from(o.querySelectorAll("[aria-live]"))),o,t,n)}const DC=b.createContext(null),yC=()=>b.useContext(DC),ap=vr("portal");function vC(e={}){const{id:t,root:n}=e,o=rE(),l=yC(),[r,d]=b.useState(null),E=b.useRef(null);return Lt(()=>()=>{r?.remove(),queueMicrotask(()=>{E.current=null})},[r]),Lt(()=>{if(!o||E.current)return;const h=t?document.getElementById(t):null;if(!h)return;const A=document.createElement("div");A.id=o,A.setAttribute(ap,""),h.appendChild(A),E.current=A,d(A)},[t,o]),Lt(()=>{if(n===null||!o||E.current)return;let h=n||l?.portalNode;h&&!zR(h)&&(h=h.current),h=h||document.body;let A=null;t&&(A=document.createElement("div"),A.id=t,h.appendChild(A));const R=document.createElement("div");R.id=o,R.setAttribute(ap,""),h=A||h,h.appendChild(R),E.current=R,d(R)},[t,n,o,l]),r}function jU(e){const{children:t,id:n,root:o,preserveTabOrder:l=!0}=e,r=vC({id:n,root:o}),[d,E]=b.useState(null),h=b.useRef(null),A=b.useRef(null),R=b.useRef(null),T=b.useRef(null),S=d?.modal,I=d?.open,C=!!d&&!d.modal&&d.open&&l&&!!(o||r);return b.useEffect(()=>{if(!r||!l||S)return;function _(O){r&&$c(O)&&(O.type==="focusin"?Zg:DU)(r)}return r.addEventListener("focusin",_,!0),r.addEventListener("focusout",_,!0),()=>{r.removeEventListener("focusin",_,!0),r.removeEventListener("focusout",_,!0)}},[r,l,S]),b.useEffect(()=>{r&&(I||Zg(r))},[I,r]),c.jsxs(DC.Provider,{value:b.useMemo(()=>({preserveTabOrder:l,beforeOutsideRef:h,afterOutsideRef:A,beforeInsideRef:R,afterInsideRef:T,portalNode:r,setFocusManagerState:E}),[l,r]),children:[C&&r&&c.jsx(vh,{"data-type":"outside",ref:h,onFocus:_=>{if($c(_,r))R.current?.focus();else{const O=d?d.domReference:null;NC(O)?.focus()}}}),C&&r&&c.jsx("span",{"aria-owns":r.id,style:XR}),r&&Pr.createPortal(t,r),C&&r&&c.jsx(vh,{"data-type":"outside",ref:A,onFocus:_=>{if($c(_,r))T.current?.focus();else{const O=d?d.domReference:null;pC(O)?.focus(),d?.closeOnFocusOut&&d?.onOpenChange(!1,_.nativeEvent,"focus-out")}}})]})}const YU={style:{transition:"none"}},Jo={},MC="data-base-ui-click-trigger",KU={fallbackAxisSide:"end"},np=20;let tl=[];function qR(){tl=tl.filter(e=>e.isConnected)}function VU(e){qR(),e&&El(e)!=="body"&&(tl.push(e),tl.length>np&&(tl=tl.slice(-np)))}function ip(){return qR(),tl[tl.length-1]}function WU(e){const t=fu();return _C(e,t)?e:sE(e,t)[0]||e}function op(e,t){if(!t.current.includes("floating")&&!e.getAttribute("role")?.includes("dialog"))return;const n=fu(),l=bU(e,n).filter(d=>{const E=d.getAttribute("data-tabindex")||"";return _C(d,n)||d.hasAttribute("data-tabindex")&&!E.startsWith("-")}),r=e.getAttribute("tabindex");t.current.includes("floating")||l.length===0?r!=="0"&&e.setAttribute("tabindex","0"):(r!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}function XU(e){const{context:t,children:n,disabled:o=!1,order:l=["content"],initialFocus:r=0,returnFocus:d=!0,restoreFocus:E=!1,modal:h=!0,closeOnFocusOut:A=!0,getInsideElements:R=()=>[]}=e,{open:T,onOpenChange:S,events:I,dataRef:C,elements:{domReference:_,floating:O}}=t,D=nt(()=>C.current.floatingContext?.nodeId),U=nt(R),H=typeof r=="number"&&r<0,L=Kg(_)&&H,w=Ri(l),G=Ri(r),B=Ri(d),j=cE(),Q=yC(),ce=b.useRef(null),ue=b.useRef(null),te=b.useRef(!1),ee=b.useRef(!1),fe=b.useRef(-1),he=Or(),M=Q!=null,K=Bm(O),$=nt((ne=K)=>ne?sE(ne,fu()):[]),de=nt(ne=>{const P=$(ne);return w.current.map(()=>P).filter(Boolean).flat()});b.useEffect(()=>{if(o||!h)return;function ne(X){X.key==="Tab"&&da(K,Qo(La(K)))&&$().length===0&&!L&&QH(X)}const P=La(K);return P.addEventListener("keydown",ne),()=>{P.removeEventListener("keydown",ne)}},[o,_,K,h,w,L,$,de]),b.useEffect(()=>{if(o||!O)return;function ne(P){const X=xn(P),Ee=$().indexOf(X);Ee!==-1&&(fe.current=Ee)}return O.addEventListener("focusin",ne),()=>{O.removeEventListener("focusin",ne)}},[o,O,$]),b.useEffect(()=>{if(o||!A)return;function ne(){ee.current=!0}function P(Ee){const Se=Ee.relatedTarget,Oe=Ee.currentTarget,Ue=xn(Ee);queueMicrotask(()=>{const Ae=D(),be=!(da(_,Se)||da(O,Se)||da(Se,O)||da(Q?.portalNode,Se)||Se?.hasAttribute(vr("focus-guard"))||j&&(Xl(j.nodesRef.current,Ae).find(_e=>da(_e.context?.elements.floating,Se)||da(_e.context?.elements.domReference,Se))||Vg(j.nodesRef.current,Ae).find(_e=>[_e.context?.elements.floating,Bm(_e.context?.elements.floating)].includes(Se)||_e.context?.elements.domReference===Se)));if(Oe===_&&K&&op(K,w),E&&Oe!==_&&!Ue?.isConnected&&Qo(La(K))===La(K).body){Ha(K)&&K.focus();const _e=fe.current,ge=$(),ye=ge[_e]||ge[ge.length-1]||K;Ha(ye)&&ye.focus()}if(C.current.insideReactTree){C.current.insideReactTree=!1;return}if(ee.current){ee.current=!1;return}(L||!h)&&Se&&be&&Se!==ip()&&(te.current=!0,S(!1,Ee,"focus-out"))})}const X=!!(!j&&Q);function se(){C.current.insideReactTree=!0,he.start(0,()=>{C.current.insideReactTree=!1})}if(O&&Ha(_))return _.addEventListener("focusout",P),_.addEventListener("pointerdown",ne),O.addEventListener("focusout",P),X&&O.addEventListener("focusout",se,!0),()=>{_.removeEventListener("focusout",P),_.removeEventListener("pointerdown",ne),O.removeEventListener("focusout",P),X&&O.removeEventListener("focusout",se,!0)}},[o,_,O,K,h,j,Q,S,A,E,$,L,D,w,C,he]);const y=b.useRef(null),Y=b.useRef(null),W=Mr(y,Q?.beforeInsideRef),z=Mr(Y,Q?.afterInsideRef);b.useEffect(()=>{if(o||!O)return;const ne=Array.from(Q?.portalNode?.querySelectorAll(`[${vr("portal")}]`)||[]),X=(j?Vg(j.nodesRef.current,D()):[]).find(Se=>Kg(Se.context?.elements.domReference||null))?.context?.elements.domReference,se=[O,X,...ne,...U(),ce.current,ue.current,y.current,Y.current,Q?.beforeOutsideRef.current,Q?.afterOutsideRef.current,L?_:null].filter(Se=>Se!=null),Ee=zU(se,h||L);return()=>{Ee()}},[o,_,O,h,w,Q,L,j,D,U]),Lt(()=>{if(o||!Ha(K))return;const ne=La(K),P=Qo(ne);queueMicrotask(()=>{const X=de(K),se=G.current,Ee=(typeof se=="number"?X[se]:se.current)||K,Se=da(K,P);!H&&!Se&&T&&sm(Ee,{preventScroll:Ee===K})})},[o,T,K,H,de,G]),Lt(()=>{if(o||!K)return;const ne=La(K),P=Qo(ne);VU(P);function X({reason:Se,event:Oe,nested:Ue}){if(["hover","safe-polygon"].includes(Se)&&Oe.type==="mouseleave"&&(te.current=!0),Se==="outside-press")if(Ue)te.current=!1;else if($H(Oe)||eU(Oe))te.current=!1;else{let Ae=!1;document.createElement("div").focus({get preventScroll(){return Ae=!0,!1}}),Ae?te.current=!1:te.current=!0}}I.on("openchange",X);const se=ne.createElement("span");se.setAttribute("tabindex","-1"),se.setAttribute("aria-hidden","true"),Object.assign(se.style,XR),M&&_&&_.insertAdjacentElement("afterend",se);function Ee(){if(typeof B.current=="boolean"){const Se=_||ip();return Se&&Se.isConnected?Se:se}return B.current.current||se}return()=>{I.off("openchange",X);const Se=Qo(ne),Oe=da(O,Se)||j&&Xl(j.nodesRef.current,D(),!1).some(Ae=>da(Ae.context?.elements.floating,Se)),Ue=Ee();queueMicrotask(()=>{const Ae=WU(Ue);B.current&&!te.current&&Ha(Ae)&&(!(Ae!==Se&&Se!==ne.body)||Oe)&&Ae.focus({preventScroll:!0}),se.remove()})}},[o,O,K,B,C,I,j,M,_,D]),b.useEffect(()=>{queueMicrotask(()=>{te.current=!1})},[o]),b.useEffect(()=>{if(o||!T)return;function ne(X){xn(X)?.closest(`[${MC}]`)&&(ee.current=!0)}const P=La(K);return P.addEventListener("pointerdown",ne,!0),()=>{P.removeEventListener("pointerdown",ne,!0)}},[o,T,K]),Lt(()=>{if(!o&&Q)return Q.setFocusManagerState({modal:h,closeOnFocusOut:A,open:T,onOpenChange:S,domReference:_}),()=>{Q.setFocusManagerState(null)}},[o,Q,h,T,S,A,_]),Lt(()=>{if(!(o||!K))return op(K,w),()=>{queueMicrotask(qR)}},[o,K,w]);const Z=!o&&(h?!L:!0)&&(M||h);return c.jsxs(b.Fragment,{children:[Z&&c.jsx(vh,{"data-type":"inside",ref:W,onFocus:ne=>{if(h){const P=de();sm(P[P.length-1])}else Q?.preserveTabOrder&&Q.portalNode&&(te.current=!1,$c(ne,Q.portalNode)?pC(_)?.focus():Q.beforeOutsideRef.current?.focus())}}),n,Z&&c.jsx(vh,{"data-type":"inside",ref:z,onFocus:ne=>{h?sm(de()[0]):Q?.preserveTabOrder&&Q.portalNode&&(A&&(te.current=!0),$c(ne,Q.portalNode)?NC(_)?.focus():Q.afterOutsideRef.current?.focus())}})]})}const jd=null;class qU{callbacks=[];callbacksCount=0;nextId=1;startId=1;isScheduled=!1;tick=t=>{this.isScheduled=!1;const n=this.callbacks,o=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,o>0)for(let l=0;l<n.length;l+=1)n[l]?.(t)};request(t){const n=this.nextId;return this.nextId+=1,this.callbacks.push(t),this.callbacksCount+=1,(!this.isScheduled||!1)&&(requestAnimationFrame(this.tick),this.isScheduled=!0),n}cancel(t){const n=t-this.startId;n<0||n>=this.callbacks.length||(this.callbacks[n]=null,this.callbacksCount-=1)}}const Yd=new qU;class ki{static create(){return new ki}static request(t){return Yd.request(t)}static cancel(t){return Yd.cancel(t)}currentId=jd;request(t){this.cancel(),this.currentId=Yd.request(()=>{this.currentId=jd,t()})}cancel=()=>{this.currentId!==jd&&(Yd.cancel(this.currentId),this.currentId=jd)};disposeEffect=()=>this.cancel}function LC(){const e=wr(ki.create).current;return iC(e.disposeEffect),e}function ZU(e,t={}){const{open:n,onOpenChange:o,dataRef:l}=e,{enabled:r=!0,event:d="click",toggle:E=!0,ignoreMouse:h=!1,stickIfOpen:A=!0}=t,R=b.useRef(void 0),T=LC(),S=b.useMemo(()=>({onPointerDown(I){R.current=I.pointerType},onMouseDown(I){const C=R.current,_=I.nativeEvent;if(I.button!==0||d==="click"||br(C,!0)&&h)return;const O=l.current.openEvent,D=O?.type,U=!(n&&E&&(!(O&&A)||D==="click"||D==="mousedown"));T.request(()=>{o(U,_,"click")})},onClick(I){const C=R.current;if(d==="mousedown"&&C){R.current=void 0;return}if(br(C,!0)&&h)return;const _=l.current.openEvent,O=_?.type;o(!(n&&E&&(!(_&&A)||O==="click"||O==="mousedown"||O==="keydown"||O==="keyup")),I.nativeEvent,"click")},onKeyDown(){R.current=void 0}}),[l,d,h,o,n,A,E,T]);return b.useMemo(()=>r?{reference:S}:Jo,[r,S])}function QU(e,t){let n=null,o=null,l=!1;return{contextElement:e||void 0,getBoundingClientRect(){const r=e?.getBoundingClientRect()||{width:0,height:0,x:0,y:0},d=t.axis==="x"||t.axis==="both",E=t.axis==="y"||t.axis==="both",h=["mouseenter","mousemove"].includes(t.dataRef.current.openEvent?.type||"")&&t.pointerType!=="touch";let A=r.width,R=r.height,T=r.x,S=r.y;return n==null&&t.x&&d&&(n=r.x-t.x),o==null&&t.y&&E&&(o=r.y-t.y),T-=n||0,S-=o||0,A=0,R=0,!l||h?(A=t.axis==="y"?r.width:0,R=t.axis==="x"?r.height:0,T=d&&t.x!=null?t.x:T,S=E&&t.y!=null?t.y:S):l&&!h&&(R=t.axis==="x"?r.height:R,A=t.axis==="y"?r.width:A),l=!0,{width:A,height:R,x:T,y:S,top:S,right:T+A,bottom:S+R,left:T}}}}function lp(e){return e!=null&&e.clientX!=null}function JU(e,t={}){const{open:n,dataRef:o,elements:{floating:l,domReference:r},refs:d}=e,{enabled:E=!0,axis:h="both",x:A=null,y:R=null}=t,T=b.useRef(!1),S=b.useRef(null),[I,C]=b.useState(),[_,O]=b.useState([]),D=nt((G,B)=>{T.current||o.current.openEvent&&!lp(o.current.openEvent)||d.setPositionReference(QU(r,{x:G,y:B,axis:h,dataRef:o,pointerType:I}))}),U=nt(G=>{A!=null||R!=null||(n?S.current||O([]):D(G.clientX,G.clientY))}),H=br(I)?l:n,L=b.useCallback(()=>{if(!H||!E||A!=null||R!=null)return;const G=Ua(l);function B(j){const Q=xn(j);da(l,Q)?(G.removeEventListener("mousemove",B),S.current=null):D(j.clientX,j.clientY)}if(!o.current.openEvent||lp(o.current.openEvent)){G.addEventListener("mousemove",B);const j=()=>{G.removeEventListener("mousemove",B),S.current=null};return S.current=j,j}d.setPositionReference(r)},[H,E,A,R,l,o,d,r,D]);b.useEffect(()=>L(),[L,_]),b.useEffect(()=>{E&&!l&&(T.current=!1)},[E,l]),b.useEffect(()=>{!E&&n&&(T.current=!0)},[E,n]),Lt(()=>{E&&(A!=null||R!=null)&&(T.current=!1,D(A,R))},[E,A,R,D]);const w=b.useMemo(()=>{function G(B){C(B.pointerType)}return{onPointerDown:G,onPointerEnter:G,onMouseMove:U,onMouseEnter:U}},[U]);return b.useMemo(()=>E?{reference:w}:{},[E,w])}function sp(e,t,n){let{reference:o,floating:l}=e;const r=Ti(t),d=VR(t),E=KR(d),h=oi(t),A=r==="y",R=o.x+o.width/2-l.width/2,T=o.y+o.height/2-l.height/2,S=o[E]/2-l[E]/2;let I;switch(h){case"top":I={x:R,y:o.y-l.height};break;case"bottom":I={x:R,y:o.y+o.height};break;case"right":I={x:o.x+o.width,y:T};break;case"left":I={x:o.x-l.width,y:T};break;default:I={x:o.x,y:o.y}}switch(fl(t)){case"start":I[d]-=S*(n&&A?-1:1);break;case"end":I[d]+=S*(n&&A?-1:1);break}return I}const $U=async(e,t,n)=>{const{placement:o="bottom",strategy:l="absolute",middleware:r=[],platform:d}=n,E=r.filter(Boolean),h=await(d.isRTL==null?void 0:d.isRTL(t));let A=await d.getElementRects({reference:e,floating:t,strategy:l}),{x:R,y:T}=sp(A,o,h),S=o,I={},C=0;for(let _=0;_<E.length;_++){const{name:O,fn:D}=E[_],{x:U,y:H,data:L,reset:w}=await D({x:R,y:T,initialPlacement:o,placement:S,strategy:l,middlewareData:I,rects:A,platform:d,elements:{reference:e,floating:t}});R=U??R,T=H??T,I={...I,[O]:{...I[O],...L}},w&&C<=50&&(C++,typeof w=="object"&&(w.placement&&(S=w.placement),w.rects&&(A=w.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:l}):w.rects),{x:R,y:T}=sp(A,S,h)),_=-1)}return{x:R,y:T,placement:S,strategy:l,middlewareData:I}};async function nu(e,t){var n;t===void 0&&(t={});const{x:o,y:l,platform:r,rects:d,elements:E,strategy:h}=e,{boundary:A="clippingAncestors",rootBoundary:R="viewport",elementContext:T="floating",altBoundary:S=!1,padding:I=0}=Io(t,e),C=fC(I),O=E[S?T==="floating"?"reference":"floating":T],D=Oh(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(O)))==null||n?O:O.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(E.floating)),boundary:A,rootBoundary:R,strategy:h})),U=T==="floating"?{x:o,y:l,width:d.floating.width,height:d.floating.height}:d.reference,H=await(r.getOffsetParent==null?void 0:r.getOffsetParent(E.floating)),L=await(r.isElement==null?void 0:r.isElement(H))?await(r.getScale==null?void 0:r.getScale(H))||{x:1,y:1}:{x:1,y:1},w=Oh(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:E,rect:U,offsetParent:H,strategy:h}):U);return{top:(D.top-w.top+C.top)/L.y,bottom:(w.bottom-D.bottom+C.bottom)/L.y,left:(D.left-w.left+C.left)/L.x,right:(w.right-D.right+C.right)/L.x}}const ek=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:l,middlewareData:r,rects:d,initialPlacement:E,platform:h,elements:A}=t,{mainAxis:R=!0,crossAxis:T=!0,fallbackPlacements:S,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:_=!0,...O}=Io(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const D=oi(l),U=Ti(E),H=oi(E)===E,L=await(h.isRTL==null?void 0:h.isRTL(A.floating)),w=S||(H||!_?[Ch(E)]:lU(E)),G=C!=="none";!S&&G&&w.push(...uU(E,_,C,L));const B=[E,...w],j=await nu(t,O),Q=[];let ce=((o=r.flip)==null?void 0:o.overflows)||[];if(R&&Q.push(j[D]),T){const fe=oU(l,d,L);Q.push(j[fe[0]],j[fe[1]])}if(ce=[...ce,{placement:l,overflows:Q}],!Q.every(fe=>fe<=0)){var ue,te;const fe=(((ue=r.flip)==null?void 0:ue.index)||0)+1,he=B[fe];if(he&&(!(T==="alignment"?U!==Ti(he):!1)||ce.every($=>Ti($.placement)===U?$.overflows[0]>0:!0)))return{data:{index:fe,overflows:ce},reset:{placement:he}};let M=(te=ce.filter(K=>K.overflows[0]<=0).sort((K,$)=>K.overflows[1]-$.overflows[1])[0])==null?void 0:te.placement;if(!M)switch(I){case"bestFit":{var ee;const K=(ee=ce.filter($=>{if(G){const de=Ti($.placement);return de===U||de==="y"}return!0}).map($=>[$.placement,$.overflows.filter(de=>de>0).reduce((de,y)=>de+y,0)]).sort(($,de)=>$[1]-de[1])[0])==null?void 0:ee[0];K&&(M=K);break}case"initialPlacement":M=E;break}if(l!==M)return{reset:{placement:M}}}return{}}}};function rp(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function cp(e){return tU.some(t=>e[t]>=0)}const tk=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:o="referenceHidden",...l}=Io(e,t);switch(o){case"referenceHidden":{const r=await nu(t,{...l,elementContext:"reference"}),d=rp(r,n.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:cp(d)}}}case"escaped":{const r=await nu(t,{...l,altBoundary:!0}),d=rp(r,n.floating);return{data:{escapedOffsets:d,escaped:cp(d)}}}default:return{}}}}},HC=new Set(["left","top"]);async function ak(e,t){const{placement:n,platform:o,elements:l}=e,r=await(o.isRTL==null?void 0:o.isRTL(l.floating)),d=oi(n),E=fl(n),h=Ti(n)==="y",A=HC.has(d)?-1:1,R=r&&h?-1:1,T=Io(t,e);let{mainAxis:S,crossAxis:I,alignmentAxis:C}=typeof T=="number"?{mainAxis:T,crossAxis:0,alignmentAxis:null}:{mainAxis:T.mainAxis||0,crossAxis:T.crossAxis||0,alignmentAxis:T.alignmentAxis};return E&&typeof C=="number"&&(I=E==="end"?C*-1:C),h?{x:I*R,y:S*A}:{x:S*A,y:I*R}}const nk=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:l,y:r,placement:d,middlewareData:E}=t,h=await ak(t,e);return d===((n=E.offset)==null?void 0:n.placement)&&(o=E.arrow)!=null&&o.alignmentOffset?{}:{x:l+h.x,y:r+h.y,data:{...h,placement:d}}}}},ik=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:l}=t,{mainAxis:r=!0,crossAxis:d=!1,limiter:E={fn:O=>{let{x:D,y:U}=O;return{x:D,y:U}}},...h}=Io(e,t),A={x:n,y:o},R=await nu(t,h),T=Ti(oi(l)),S=YR(T);let I=A[S],C=A[T];if(r){const O=S==="y"?"top":"left",D=S==="y"?"bottom":"right",U=I+R[O],H=I-R[D];I=Fm(U,I,H)}if(d){const O=T==="y"?"top":"left",D=T==="y"?"bottom":"right",U=C+R[O],H=C-R[D];C=Fm(U,C,H)}const _=E.fn({...t,[S]:I,[T]:C});return{..._,data:{x:_.x-n,y:_.y-o,enabled:{[S]:r,[T]:d}}}}}},ok=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:o,placement:l,rects:r,middlewareData:d}=t,{offset:E=0,mainAxis:h=!0,crossAxis:A=!0}=Io(e,t),R={x:n,y:o},T=Ti(l),S=YR(T);let I=R[S],C=R[T];const _=Io(E,t),O=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(h){const H=S==="y"?"height":"width",L=r.reference[S]-r.floating[H]+O.mainAxis,w=r.reference[S]+r.reference[H]-O.mainAxis;I<L?I=L:I>w&&(I=w)}if(A){var D,U;const H=S==="y"?"width":"height",L=HC.has(oi(l)),w=r.reference[T]-r.floating[H]+(L&&((D=d.offset)==null?void 0:D[T])||0)+(L?0:O.crossAxis),G=r.reference[T]+r.reference[H]+(L?0:((U=d.offset)==null?void 0:U[T])||0)-(L?O.crossAxis:0);C<w?C=w:C>G&&(C=G)}return{[S]:I,[T]:C}}}},lk=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,o;const{placement:l,rects:r,platform:d,elements:E}=t,{apply:h=()=>{},...A}=Io(e,t),R=await nu(t,A),T=oi(l),S=fl(l),I=Ti(l)==="y",{width:C,height:_}=r.floating;let O,D;T==="top"||T==="bottom"?(O=T,D=S===(await(d.isRTL==null?void 0:d.isRTL(E.floating))?"start":"end")?"left":"right"):(D=T,O=S==="end"?"top":"bottom");const U=_-R.top-R.bottom,H=C-R.left-R.right,L=Dr(_-R[O],U),w=Dr(C-R[D],H),G=!t.middlewareData.shift;let B=L,j=w;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(j=H),(o=t.middlewareData.shift)!=null&&o.enabled.y&&(B=U),G&&!S){const ce=Pn(R.left,0),ue=Pn(R.right,0),te=Pn(R.top,0),ee=Pn(R.bottom,0);I?j=C-2*(ce!==0||ue!==0?ce+ue:Pn(R.left,R.right)):B=_-2*(te!==0||ee!==0?te+ee:Pn(R.top,R.bottom))}await h({...t,availableWidth:j,availableHeight:B});const Q=await d.getDimensions(E.floating);return C!==Q.width||_!==Q.height?{reset:{rects:!0}}:{}}}};function UC(e){const t=ii(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const l=Ha(e),r=l?e.offsetWidth:n,d=l?e.offsetHeight:o,E=Nh(n)!==r||Nh(o)!==d;return E&&(n=r,o=d),{width:n,height:o,$:E}}function ZR(e){return Mt(e)?e:e.contextElement}function Tr(e){const t=ZR(e);if(!Ha(t))return Pi(1);const n=t.getBoundingClientRect(),{width:o,height:l,$:r}=UC(t);let d=(r?Nh(n.width):n.width)/o,E=(r?Nh(n.height):n.height)/l;return(!d||!Number.isFinite(d))&&(d=1),(!E||!Number.isFinite(E))&&(E=1),{x:d,y:E}}const sk=Pi(0);function kC(e){const t=Ua(e);return!oE()||!t.visualViewport?sk:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function rk(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ua(e)?!1:t}function as(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const l=e.getBoundingClientRect(),r=ZR(e);let d=Pi(1);t&&(o?Mt(o)&&(d=Tr(o)):d=Tr(e));const E=rk(r,n,o)?kC(r):Pi(0);let h=(l.left+E.x)/d.x,A=(l.top+E.y)/d.y,R=l.width/d.x,T=l.height/d.y;if(r){const S=Ua(r),I=o&&Mt(o)?Ua(o):o;let C=S,_=Pm(C);for(;_&&o&&I!==C;){const O=Tr(_),D=_.getBoundingClientRect(),U=ii(_),H=D.left+(_.clientLeft+parseFloat(U.paddingLeft))*O.x,L=D.top+(_.clientTop+parseFloat(U.paddingTop))*O.y;h*=O.x,A*=O.y,R*=O.x,T*=O.y,h+=H,A+=L,C=Ua(_),_=Pm(C)}}return Oh({width:R,height:T,x:h,y:A})}function uE(e,t){const n=lE(e).scrollLeft;return t?t.left+n:as(ji(e)).left+n}function xC(e,t){const n=e.getBoundingClientRect(),o=n.left+t.scrollLeft-uE(e,n),l=n.top+t.scrollTop;return{x:o,y:l}}function ck(e){let{elements:t,rect:n,offsetParent:o,strategy:l}=e;const r=l==="fixed",d=ji(o),E=t?iE(t.floating):!1;if(o===d||E&&r)return n;let h={scrollLeft:0,scrollTop:0},A=Pi(1);const R=Pi(0),T=Ha(o);if((T||!T&&!r)&&((El(o)!=="body"||Eu(d))&&(h=lE(o)),Ha(o))){const I=as(o);A=Tr(o),R.x=I.x+o.clientLeft,R.y=I.y+o.clientTop}const S=d&&!T&&!r?xC(d,h):Pi(0);return{width:n.width*A.x,height:n.height*A.y,x:n.x*A.x-h.scrollLeft*A.x+R.x+S.x,y:n.y*A.y-h.scrollTop*A.y+R.y+S.y}}function uk(e){return Array.from(e.getClientRects())}function dk(e){const t=ji(e),n=lE(e),o=e.ownerDocument.body,l=Pn(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),r=Pn(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let d=-n.scrollLeft+uE(e);const E=-n.scrollTop;return ii(o).direction==="rtl"&&(d+=Pn(t.clientWidth,o.clientWidth)-l),{width:l,height:r,x:d,y:E}}const up=25;function hk(e,t){const n=Ua(e),o=ji(e),l=n.visualViewport;let r=o.clientWidth,d=o.clientHeight,E=0,h=0;if(l){r=l.width,d=l.height;const R=oE();(!R||R&&t==="fixed")&&(E=l.offsetLeft,h=l.offsetTop)}const A=uE(o);if(A<=0){const R=o.ownerDocument,T=R.body,S=getComputedStyle(T),I=R.compatMode==="CSS1Compat"&&parseFloat(S.marginLeft)+parseFloat(S.marginRight)||0,C=Math.abs(o.clientWidth-T.clientWidth-I);C<=up&&(r-=C)}else A<=up&&(r+=A);return{width:r,height:d,x:E,y:h}}const Ek=new Set(["absolute","fixed"]);function fk(e,t){const n=as(e,!0,t==="fixed"),o=n.top+e.clientTop,l=n.left+e.clientLeft,r=Ha(e)?Tr(e):Pi(1),d=e.clientWidth*r.x,E=e.clientHeight*r.y,h=l*r.x,A=o*r.y;return{width:d,height:E,x:h,y:A}}function dp(e,t,n){let o;if(t==="viewport")o=hk(e,n);else if(t==="document")o=dk(ji(e));else if(Mt(t))o=fk(t,n);else{const l=kC(e);o={x:t.x-l.x,y:t.y-l.y,width:t.width,height:t.height}}return Oh(o)}function PC(e,t){const n=So(e);return n===t||!Mt(n)||Ro(n)?!1:ii(n).position==="fixed"||PC(n,t)}function Ak(e,t){const n=t.get(e);if(n)return n;let o=nl(e,[],!1).filter(E=>Mt(E)&&El(E)!=="body"),l=null;const r=ii(e).position==="fixed";let d=r?So(e):e;for(;Mt(d)&&!Ro(d);){const E=ii(d),h=jR(d);!h&&E.position==="fixed"&&(l=null),(r?!h&&!l:!h&&E.position==="static"&&!!l&&Ek.has(l.position)||Eu(d)&&!h&&PC(e,d))?o=o.filter(R=>R!==d):l=E,d=So(d)}return t.set(e,o),o}function mk(e){let{element:t,boundary:n,rootBoundary:o,strategy:l}=e;const d=[...n==="clippingAncestors"?iE(t)?[]:Ak(t,this._c):[].concat(n),o],E=d[0],h=d.reduce((A,R)=>{const T=dp(t,R,l);return A.top=Pn(T.top,A.top),A.right=Dr(T.right,A.right),A.bottom=Dr(T.bottom,A.bottom),A.left=Pn(T.left,A.left),A},dp(t,E,l));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function Rk(e){const{width:t,height:n}=UC(e);return{width:t,height:n}}function Tk(e,t,n){const o=Ha(t),l=ji(t),r=n==="fixed",d=as(e,!0,r,t);let E={scrollLeft:0,scrollTop:0};const h=Pi(0);function A(){h.x=uE(l)}if(o||!o&&!r)if((El(t)!=="body"||Eu(l))&&(E=lE(t)),o){const I=as(t,!0,r,t);h.x=I.x+t.clientLeft,h.y=I.y+t.clientTop}else l&&A();r&&!o&&l&&A();const R=l&&!o&&!r?xC(l,E):Pi(0),T=d.left+E.scrollLeft-h.x-R.x,S=d.top+E.scrollTop-h.y-R.y;return{x:T,y:S,width:d.width,height:d.height}}function cm(e){return ii(e).position==="static"}function hp(e,t){if(!Ha(e)||ii(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ji(e)===n&&(n=n.ownerDocument.body),n}function wC(e,t){const n=Ua(e);if(iE(e))return n;if(!Ha(e)){let l=So(e);for(;l&&!Ro(l);){if(Mt(l)&&!cm(l))return l;l=So(l)}return n}let o=hp(e,t);for(;o&&kH(o)&&cm(o);)o=hp(o,t);return o&&Ro(o)&&cm(o)&&!jR(o)?n:o||BH(e)||n}const Sk=async function(e){const t=this.getOffsetParent||wC,n=this.getDimensions,o=await n(e.floating);return{reference:Tk(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function Ik(e){return ii(e).direction==="rtl"}const _k={convertOffsetParentRelativeRectToViewportRelativeRect:ck,getDocumentElement:ji,getClippingRect:mk,getOffsetParent:wC,getElementRects:Sk,getClientRects:uk,getDimensions:Rk,getScale:Tr,isElement:Mt,isRTL:Ik};function GC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function gk(e,t){let n=null,o;const l=ji(e);function r(){var E;clearTimeout(o),(E=n)==null||E.disconnect(),n=null}function d(E,h){E===void 0&&(E=!1),h===void 0&&(h=1),r();const A=e.getBoundingClientRect(),{left:R,top:T,width:S,height:I}=A;if(E||t(),!S||!I)return;const C=Bd(T),_=Bd(l.clientWidth-(R+S)),O=Bd(l.clientHeight-(T+I)),D=Bd(R),H={rootMargin:-C+"px "+-_+"px "+-O+"px "+-D+"px",threshold:Pn(0,Dr(1,h))||1};let L=!0;function w(G){const B=G[0].intersectionRatio;if(B!==h){if(!L)return d();B?d(!1,B):o=setTimeout(()=>{d(!1,1e-7)},1e3)}B===1&&!GC(A,e.getBoundingClientRect())&&d(),L=!1}try{n=new IntersectionObserver(w,{...H,root:l.ownerDocument})}catch{n=new IntersectionObserver(w,H)}n.observe(e)}return d(!0),r}function Ep(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:l=!0,ancestorResize:r=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:E=typeof IntersectionObserver=="function",animationFrame:h=!1}=o,A=ZR(e),R=l||r?[...A?nl(A):[],...nl(t)]:[];R.forEach(D=>{l&&D.addEventListener("scroll",n,{passive:!0}),r&&D.addEventListener("resize",n)});const T=A&&E?gk(A,n):null;let S=-1,I=null;d&&(I=new ResizeObserver(D=>{let[U]=D;U&&U.target===A&&I&&(I.unobserve(t),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var H;(H=I)==null||H.observe(t)})),n()}),A&&!h&&I.observe(A),I.observe(t));let C,_=h?as(e):null;h&&O();function O(){const D=as(e);_&&!GC(_,D)&&n(),_=D,C=requestAnimationFrame(O)}return n(),()=>{var D;R.forEach(U=>{l&&U.removeEventListener("scroll",n),r&&U.removeEventListener("resize",n)}),T?.(),(D=I)==null||D.disconnect(),I=null,h&&cancelAnimationFrame(C)}}const pk=nk,Nk=ik,Ck=ek,Ok=lk,bk=tk,Dk=ok,yk=(e,t,n)=>{const o=new Map,l={platform:_k,...n},r={...l.platform,_c:o};return $U(e,t,{...l,platform:r})};var vk=typeof document<"u",Mk=function(){},Jd=vk?b.useLayoutEffect:Mk;function Mh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,o,l;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(o=n;o--!==0;)if(!Mh(e[o],t[o]))return!1;return!0}if(l=Object.keys(e),n=l.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!{}.hasOwnProperty.call(t,l[o]))return!1;for(o=n;o--!==0;){const r=l[o];if(!(r==="_owner"&&e.$$typeof)&&!Mh(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function BC(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function fp(e,t){const n=BC(e);return Math.round(t*n)/n}function um(e){const t=b.useRef(e);return Jd(()=>{t.current=e}),t}function Lk(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:o=[],platform:l,elements:{reference:r,floating:d}={},transform:E=!0,whileElementsMounted:h,open:A}=e,[R,T]=b.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[S,I]=b.useState(o);Mh(S,o)||I(o);const[C,_]=b.useState(null),[O,D]=b.useState(null),U=b.useCallback($=>{$!==G.current&&(G.current=$,_($))},[]),H=b.useCallback($=>{$!==B.current&&(B.current=$,D($))},[]),L=r||C,w=d||O,G=b.useRef(null),B=b.useRef(null),j=b.useRef(R),Q=h!=null,ce=um(h),ue=um(l),te=um(A),ee=b.useCallback(()=>{if(!G.current||!B.current)return;const $={placement:t,strategy:n,middleware:S};ue.current&&($.platform=ue.current),yk(G.current,B.current,$).then(de=>{const y={...de,isPositioned:te.current!==!1};fe.current&&!Mh(j.current,y)&&(j.current=y,Pr.flushSync(()=>{T(y)}))})},[S,t,n,ue,te]);Jd(()=>{A===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,T($=>({...$,isPositioned:!1})))},[A]);const fe=b.useRef(!1);Jd(()=>(fe.current=!0,()=>{fe.current=!1}),[]),Jd(()=>{if(L&&(G.current=L),w&&(B.current=w),L&&w){if(ce.current)return ce.current(L,w,ee);ee()}},[L,w,ee,ce,Q]);const he=b.useMemo(()=>({reference:G,floating:B,setReference:U,setFloating:H}),[U,H]),M=b.useMemo(()=>({reference:L,floating:w}),[L,w]),K=b.useMemo(()=>{const $={position:n,left:0,top:0};if(!M.floating)return $;const de=fp(M.floating,R.x),y=fp(M.floating,R.y);return E?{...$,transform:"translate("+de+"px, "+y+"px)",...BC(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:de,top:y}},[n,E,M.floating,R.x,R.y]);return b.useMemo(()=>({...R,update:ee,refs:he,elements:M,floatingStyles:K}),[R,ee,he,M,K])}const Hk=(e,t)=>({...pk(e),options:[e,t]}),Uk=(e,t)=>({...Nk(e),options:[e,t]}),kk=(e,t)=>({...Dk(e),options:[e,t]}),xk=(e,t)=>({...Ck(e),options:[e,t]}),Pk=(e,t)=>({...Ok(e),options:[e,t]}),wk=(e,t)=>({...bk(e),options:[e,t]}),Gk={intentional:"onClick",sloppy:"onPointerDown"};function Ap(e){return{escapeKey:typeof e=="boolean"?e:e?.escapeKey??!1,outsidePress:typeof e=="boolean"?e:e?.outsidePress??!0}}function FC(e,t={}){const{open:n,onOpenChange:o,elements:l,dataRef:r}=e,{enabled:d=!0,escapeKey:E=!0,outsidePress:h=!0,outsidePressEvent:A="sloppy",referencePress:R=!1,referencePressEvent:T="sloppy",ancestorScroll:S=!1,bubbles:I,capture:C}=t,_=cE(),O=nt(typeof h=="function"?h:()=>!1),D=typeof h=="function"?O:h,U=b.useRef(!1),{escapeKey:H,outsidePress:L}=Ap(I),{escapeKey:w,outsidePress:G}=Ap(C),B=b.useRef(null),j=Or(),Q=Or(),ce=b.useRef(!1),ue=b.useRef(""),te=nt(P=>{ue.current=P.pointerType}),ee=nt(()=>{const P=ue.current,X=P==="pen"||!P?"mouse":P;return typeof A=="string"?A:A[X]}),fe=nt(P=>{if(!n||!d||!E||P.key!=="Escape"||ce.current)return;const X=r.current.floatingContext?.nodeId,se=_?Xl(_.nodesRef.current,X):[];if(!H&&(P.stopPropagation(),se.length>0)){let Ee=!0;if(se.forEach(Se=>{Se.context?.open&&!Se.context.dataRef.current.__escapeKeyBubbles&&(Ee=!1)}),!Ee)return}o(!1,JH(P)?P.nativeEvent:P,"escape-key")}),he=nt(P=>{const X=ee();return X==="intentional"&&P.type!=="click"||X==="sloppy"&&P.type==="click"}),M=nt(P=>{const X=()=>{fe(P),xn(P)?.removeEventListener("keydown",X)};xn(P)?.addEventListener("keydown",X)}),K=nt(P=>{if(he(P))return;const X=r.current.insideReactTree;r.current.insideReactTree=!1;const se=U.current;if(U.current=!1,ee()==="intentional"&&se||X||typeof D=="function"&&!D(P))return;const Ee=xn(P),Se=`[${vr("inert")}]`,Oe=La(l.floating).querySelectorAll(Se);let Ue=Mt(Ee)?Ee:null;for(;Ue&&!Ro(Ue);){const ge=So(Ue);if(Ro(ge)||!Mt(ge))break;Ue=ge}if(Oe.length&&Mt(Ee)&&!qH(Ee)&&!da(Ee,l.floating)&&Array.from(Oe).every(ge=>!da(Ue,ge)))return;if(Ha(Ee)){const ge=Ro(Ee),ye=ii(Ee),Fe=/auto|scroll/,Aa=ge||Fe.test(ye.overflowX),di=ge||Fe.test(ye.overflowY),Tn=Aa&&Ee.clientWidth>0&&Ee.scrollWidth>Ee.clientWidth,Xi=di&&Ee.clientHeight>0&&Ee.scrollHeight>Ee.clientHeight,qi=ye.direction==="rtl",As=Xi&&(qi?P.offsetX<=Ee.offsetWidth-Ee.clientWidth:P.offsetX>Ee.clientWidth),ms=Tn&&P.offsetY>Ee.clientHeight;if(As||ms)return}const Ae=r.current.floatingContext?.nodeId,be=_&&Xl(_.nodesRef.current,Ae).some(ge=>ho(P,ge.context?.elements.floating));if(ho(P,l.floating)||ho(P,l.domReference)||be)return;const _e=_?Xl(_.nodesRef.current,Ae):[];if(_e.length>0){let ge=!0;if(_e.forEach(ye=>{ye.context?.open&&!ye.context.dataRef.current.__outsidePressBubbles&&(ge=!1)}),!ge)return}o(!1,P,"outside-press")}),$=nt(P=>{if(!(ee()!=="sloppy"||!n||!d||ho(P,l.floating)||ho(P,l.domReference))){if(P.pointerType==="touch"){B.current={startTime:Date.now(),startX:P.clientX,startY:P.clientY,dismissOnPointerUp:!1,dismissOnMouseDown:!0},j.start(1e3,()=>{B.current&&(B.current.dismissOnPointerUp=!1,B.current.dismissOnMouseDown=!1)});return}K(P)}}),de=nt(P=>{if(he(P)||(j.clear(),P.type==="mousedown"&&B.current&&!B.current.dismissOnMouseDown))return;const X=()=>{P.type==="pointerdown"?$(P):K(P),xn(P)?.removeEventListener(P.type,X)};xn(P)?.addEventListener(P.type,X)}),y=nt(P=>{if(ee()!=="sloppy"||P.pointerType!=="touch"||!B.current||ho(P,l.floating)||ho(P,l.domReference))return;const X=Math.abs(P.clientX-B.current.startX),se=Math.abs(P.clientY-B.current.startY),Ee=Math.sqrt(X*X+se*se);Ee>5&&(B.current.dismissOnPointerUp=!0),Ee>10&&(K(P),j.clear(),B.current=null)}),Y=nt(P=>{ee()!=="sloppy"||P.pointerType!=="touch"||!B.current||ho(P,l.floating)||ho(P,l.domReference)||(B.current.dismissOnPointerUp&&K(P),j.clear(),B.current=null)});b.useEffect(()=>{if(!n||!d)return;r.current.__escapeKeyBubbles=H,r.current.__outsidePressBubbles=L;const P=new rl;function X(Ue){o(!1,Ue,"ancestor-scroll")}function se(){P.clear(),ce.current=!0}function Ee(){P.start(oE()?5:0,()=>{ce.current=!1})}const Se=La(l.floating);Se.addEventListener("pointerdown",te,!0),E&&(Se.addEventListener("keydown",w?M:fe,w),Se.addEventListener("compositionstart",se),Se.addEventListener("compositionend",Ee)),D&&(Se.addEventListener("click",G?de:K,G),Se.addEventListener("pointerdown",G?de:K,G),Se.addEventListener("pointermove",y,G),Se.addEventListener("pointerup",Y,G),Se.addEventListener("mousedown",de,G));let Oe=[];return S&&(Mt(l.domReference)&&(Oe=nl(l.domReference)),Mt(l.floating)&&(Oe=Oe.concat(nl(l.floating))),!Mt(l.reference)&&l.reference&&l.reference.contextElement&&(Oe=Oe.concat(nl(l.reference.contextElement)))),Oe=Oe.filter(Ue=>Ue!==Se.defaultView?.visualViewport),Oe.forEach(Ue=>{Ue.addEventListener("scroll",X,{passive:!0})}),()=>{Se.removeEventListener("pointerdown",te,!0),E&&(Se.removeEventListener("keydown",w?M:fe,w),Se.removeEventListener("compositionstart",se),Se.removeEventListener("compositionend",Ee)),D&&(Se.removeEventListener("click",G?de:K,G),Se.removeEventListener("pointerdown",G?de:K,G),Se.removeEventListener("pointermove",y,G),Se.removeEventListener("pointerup",Y,G),Se.removeEventListener("mousedown",de,G)),Oe.forEach(Ue=>{Ue.removeEventListener("scroll",X)}),P.clear()}},[r,l,E,D,A,n,o,S,d,H,L,fe,w,M,K,G,de,$,y,Y,te]),b.useEffect(()=>{r.current.insideReactTree=!1},[r,D]);const W=b.useMemo(()=>({onKeyDown:fe,...R&&{[Gk[T]]:P=>{o(!1,P.nativeEvent,"reference-press")},...T!=="intentional"&&{onClick(P){o(!1,P.nativeEvent,"reference-press")}}}}),[fe,o,R,T]),z=nt(P=>{const X=xn(P.nativeEvent);da(l.floating,X)&&(U.current=!0)}),Z=nt(()=>{r.current.insideReactTree=!0,Q.start(0,()=>{r.current.insideReactTree=!1})}),ne=b.useMemo(()=>({onKeyDown:fe,onMouseDown:z,onMouseUp:z,onPointerDownCapture:Z,onMouseDownCapture:Z,onClickCapture:Z}),[fe,z,Z]);return b.useMemo(()=>d?{reference:W,floating:ne}:{},[d,W,ne])}function QR(e){const{open:t=!1,onOpenChange:n,elements:o}=e,l=rE(),r=b.useRef({}),[d]=b.useState(()=>MU()),E=WR()!=null,[h,A]=b.useState(o.reference),R=nt((I,C,_)=>{r.current.openEvent=I?C:void 0,d.emit("openchange",{open:I,event:C,reason:_,nested:E}),n?.(I,C,_)}),T=b.useMemo(()=>({setPositionReference:A}),[]),S=b.useMemo(()=>({reference:h||o.reference||null,floating:o.floating||null,domReference:o.reference}),[h,o.reference,o.floating]);return b.useMemo(()=>({dataRef:r,open:t,onOpenChange:R,elements:S,events:d,floatingId:l,refs:T}),[t,R,S,d,l,T])}function Bk(e={}){const{nodeId:t}=e,n=QR({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||n,l=o.elements,[r,d]=b.useState(null),[E,h]=b.useState(null),R=l?.domReference||r,T=b.useRef(null),S=cE();Lt(()=>{R&&(T.current=R)},[R]);const I=Lk({...e,elements:{...l,...E&&{reference:E}}}),C=b.useCallback(H=>{const L=Mt(H)?{getBoundingClientRect:()=>H.getBoundingClientRect(),getClientRects:()=>H.getClientRects(),contextElement:H}:H;h(L),I.refs.setReference(L)},[I.refs]),_=b.useCallback(H=>{(Mt(H)||H===null)&&(T.current=H,d(H)),(Mt(I.refs.reference.current)||I.refs.reference.current===null||H!==null&&!Mt(H))&&I.refs.setReference(H)},[I.refs]),O=b.useMemo(()=>({...I.refs,setReference:_,setPositionReference:C,domReference:T}),[I.refs,_,C]),D=b.useMemo(()=>({...I.elements,domReference:R}),[I.elements,R]),U=b.useMemo(()=>({...I,...o,refs:O,elements:D,nodeId:t}),[I,O,D,t,o]);return Lt(()=>{o.dataRef.current.floatingContext=U;const H=S?.nodesRef.current.find(L=>L.id===t);H&&(H.context=U)}),b.useMemo(()=>({...I,context:U,refs:O,elements:D}),[I,O,D,U])}const dm=YH&&cC;function Fk(e,t={}){const{open:n,onOpenChange:o,events:l,dataRef:r,elements:d}=e,{enabled:E=!0,visibleOnly:h=!0}=t,A=b.useRef(!1),R=Or(),T=b.useRef(!0);b.useEffect(()=>{if(!E)return;const I=Ua(d.domReference);function C(){!n&&Ha(d.domReference)&&d.domReference===Qo(La(d.domReference))&&(A.current=!0)}function _(){T.current=!0}function O(){T.current=!1}return I.addEventListener("blur",C),dm&&(I.addEventListener("keydown",_,!0),I.addEventListener("pointerdown",O,!0)),()=>{I.removeEventListener("blur",C),dm&&(I.removeEventListener("keydown",_,!0),I.removeEventListener("pointerdown",O,!0))}},[d.domReference,n,E]),b.useEffect(()=>{if(!E)return;function I({reason:C}){(C==="reference-press"||C==="escape-key")&&(A.current=!0)}return l.on("openchange",I),()=>{l.off("openchange",I)}},[l,E]);const S=b.useMemo(()=>({onMouseLeave(){A.current=!1},onFocus(I){if(A.current)return;const C=xn(I.nativeEvent);if(h&&Mt(C)){if(dm&&!I.relatedTarget){if(!T.current&&!EC(C))return}else if(!ZH(C))return}o(!0,I.nativeEvent,"focus")},onBlur(I){A.current=!1;const C=I.relatedTarget,_=I.nativeEvent,O=Mt(C)&&C.hasAttribute(vr("focus-guard"))&&C.getAttribute("data-type")==="outside";R.start(0,()=>{const D=Qo(d.domReference?d.domReference.ownerDocument:document);!C&&D===d.domReference||da(r.current.floatingContext?.refs.floating.current,D)||da(d.domReference,D)||O||o(!1,_,"focus")})}}),[r,d.domReference,o,h,R]);return b.useMemo(()=>E?{reference:S}:{},[E,S])}function zC(e=[]){const t=e.map(E=>E?.reference),n=e.map(E=>E?.floating),o=e.map(E=>E?.item),l=b.useCallback(E=>hm(E,e,"reference"),t),r=b.useCallback(E=>hm(E,e,"floating"),n),d=b.useCallback(E=>hm(E,e,"item"),o);return b.useMemo(()=>({getReferenceProps:l,getFloatingProps:r,getItemProps:d}),[l,r,d])}function hm(e,t,n){const o=new Map,l=n==="item",r={};n==="floating"&&(r.tabIndex=-1,r[Gm]="");for(const d in e)l&&e&&(d===dC||d===hC)||(r[d]=e[d]);for(let d=0;d<t.length;d+=1){let E;const h=t[d]?.[n];typeof h=="function"?E=e?h(e):null:E=h,E&&mp(r,E,l,o)}return mp(r,e,l,o),r}function mp(e,t,n,o){for(const l in t){const r=t[l];n&&(l===dC||l===hC)||(l.startsWith("on")?(o.has(l)||o.set(l,[]),typeof r=="function"&&(o.get(l)?.push(r),e[l]=(...d)=>o.get(l)?.map(E=>E(...d)).find(E=>E!==void 0))):e[l]=r)}}const zk=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function jk(e,t={}){const{open:n,elements:o,floatingId:l}=e,{enabled:r=!0,role:d="dialog"}=t,E=rE(),h=o.domReference?.id||E,A=b.useMemo(()=>Bm(o.floating)?.id||l,[o.floating,l]),R=zk.get(d)??d,S=WR()!=null,I=b.useMemo(()=>R==="tooltip"||d==="label"?{[`aria-${d==="label"?"labelledby":"describedby"}`]:n?A:void 0}:{"aria-expanded":n?"true":"false","aria-haspopup":R==="alertdialog"?"dialog":R,"aria-controls":n?A:void 0,...R==="listbox"&&{role:"combobox"},...R==="menu"&&{id:h},...R==="menu"&&S&&{role:"menuitem"},...d==="select"&&{"aria-autocomplete":"none"},...d==="combobox"&&{"aria-autocomplete":"list"}},[R,A,S,n,h,d]),C=b.useMemo(()=>{const O={id:A,...R&&{role:R}};return R==="tooltip"||d==="label"?O:{...O,...R==="menu"&&{"aria-labelledby":h}}},[R,A,h,d]),_=b.useCallback(({active:O,selected:D})=>{const U={role:"option",...O&&{id:`${A}-fui-option`}};switch(d){case"select":case"combobox":return{...U,"aria-selected":D}}return{}},[A,d]);return b.useMemo(()=>r?{reference:I,floating:C,item:_}:{},[r,I,C,_])}function Rp(e,t){const[n,o]=e;let l=!1;const r=t.length;for(let d=0,E=r-1;d<r;E=d++){const[h,A]=t[d]||[0,0],[R,T]=t[E]||[0,0];A>=o!=T>=o&&n<=(R-h)*(o-A)/(T-A)+h&&(l=!l)}return l}function Yk(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function Kk(e={}){const{buffer:t=.5,blockPointerEvents:n=!1,requireIntent:o=!0}=e,l=new rl;let r=!1,d=null,E=null,h=typeof performance<"u"?performance.now():0;function A(T,S){const I=performance.now(),C=I-h;if(d===null||E===null||C===0)return d=T,E=S,h=I,null;const _=T-d,O=S-E,U=Math.sqrt(_*_+O*O)/C;return d=T,E=S,h=I,U}const R=({x:T,y:S,placement:I,elements:C,onClose:_,nodeId:O,tree:D})=>function(H){function L(){l.clear(),_()}if(l.clear(),!C.domReference||!C.floating||I==null||T==null||S==null)return;const{clientX:w,clientY:G}=H,B=[w,G],j=xn(H),Q=H.type==="mouseleave",ce=da(C.floating,j),ue=da(C.domReference,j),te=C.domReference.getBoundingClientRect(),ee=C.floating.getBoundingClientRect(),fe=I.split("-")[0],he=T>ee.right-ee.width/2,M=S>ee.bottom-ee.height/2,K=Yk(B,te),$=ee.width>te.width,de=ee.height>te.height,y=($?te:ee).left,Y=($?te:ee).right,W=(de?te:ee).top,z=(de?te:ee).bottom;if(ce&&(r=!0,!Q))return;if(ue&&(r=!1),ue&&!Q){r=!0;return}if(Q&&Mt(H.relatedTarget)&&da(C.floating,H.relatedTarget)||D&&Xl(D.nodesRef.current,O).some(({context:P})=>P?.open))return;if(fe==="top"&&S>=te.bottom-1||fe==="bottom"&&S<=te.top+1||fe==="left"&&T>=te.right-1||fe==="right"&&T<=te.left+1)return L();let Z=[];switch(fe){case"top":Z=[[y,te.top+1],[y,ee.bottom-1],[Y,ee.bottom-1],[Y,te.top+1]];break;case"bottom":Z=[[y,ee.top+1],[y,te.bottom-1],[Y,te.bottom-1],[Y,ee.top+1]];break;case"left":Z=[[ee.right-1,z],[ee.right-1,W],[te.left+1,W],[te.left+1,z]];break;case"right":Z=[[te.right-1,z],[te.right-1,W],[ee.left+1,W],[ee.left+1,z]];break}function ne([P,X]){switch(fe){case"top":{const se=[$?P+t/2:he?P+t*4:P-t*4,X+t+1],Ee=[$?P-t/2:he?P+t*4:P-t*4,X+t+1],Se=[[ee.left,he||$?ee.bottom-t:ee.top],[ee.right,he?$?ee.bottom-t:ee.top:ee.bottom-t]];return[se,Ee,...Se]}case"bottom":{const se=[$?P+t/2:he?P+t*4:P-t*4,X-t],Ee=[$?P-t/2:he?P+t*4:P-t*4,X-t],Se=[[ee.left,he||$?ee.top+t:ee.bottom],[ee.right,he?$?ee.top+t:ee.bottom:ee.top+t]];return[se,Ee,...Se]}case"left":{const se=[P+t+1,de?X+t/2:M?X+t*4:X-t*4],Ee=[P+t+1,de?X-t/2:M?X+t*4:X-t*4];return[...[[M||de?ee.right-t:ee.left,ee.top],[M?de?ee.right-t:ee.left:ee.right-t,ee.bottom]],se,Ee]}case"right":{const se=[P-t,de?X+t/2:M?X+t*4:X-t*4],Ee=[P-t,de?X-t/2:M?X+t*4:X-t*4],Se=[[M||de?ee.left+t:ee.right,ee.top],[M?de?ee.left+t:ee.right:ee.left+t,ee.bottom]];return[se,Ee,...Se]}default:return[]}}if(!Rp([w,G],Z)){if(r&&!K)return L();if(!Q&&o){const P=A(H.clientX,H.clientY);if(P!==null&&P<.1)return L()}Rp([w,G],ne([T,S]))?!r&&o&&l.start(40,L):L()}};return R.__options={blockPointerEvents:n},R}function jC(e,t=!1,n=!1){const[o,l]=b.useState(e&&t?"idle":void 0),[r,d]=b.useState(e);return e&&!r&&(d(!0),l("starting")),!e&&r&&o!=="ending"&&!n&&l("ending"),!e&&!r&&o==="ending"&&l(void 0),Lt(()=>{if(!e&&r&&o!=="ending"&&n){const E=ki.request(()=>{l("ending")});return()=>{ki.cancel(E)}}},[e,r,o,n]),Lt(()=>{if(!e||t)return;const E=ki.request(()=>{Pr.flushSync(()=>{l(void 0)})});return()=>{ki.cancel(E)}},[t,e]),Lt(()=>{if(!e||!t)return;e&&r&&o!=="idle"&&l("starting");const E=ki.request(()=>{l("idle")});return()=>{ki.cancel(E)}},[t,e,r,l,o]),b.useMemo(()=>({mounted:r,setMounted:d,transitionStatus:o}),[r,o])}const Vk=600;function YC(e){if(e)return{"focus-out":"focus-out","escape-key":"escape-key","outside-press":"outside-press","list-navigation":"list-navigation",click:"trigger-press",hover:"trigger-hover",focus:"trigger-focus","reference-press":"trigger-press","safe-polygon":"trigger-hover","ancestor-scroll":void 0}[e]}function Wk(e,t=!1){const n=LC();return nt((o,l=null)=>{if(n.cancel(),e==null)return;let r;if("current"in e){if(e.current==null)return;r=e.current}else r=e;typeof r.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?o():n.request(()=>{function d(){r&&Promise.allSettled(r.getAnimations().map(E=>E.finished)).then(()=>{l!=null&&l.aborted||Pr.flushSync(o)})}t?n.request(d):d()})})}function dE(e){const{enabled:t=!0,open:n,ref:o,onComplete:l}=e,r=Ri(n),d=nt(l),E=Wk(o,n);b.useEffect(()=>{t&&E(()=>{n===r.current&&d()})},[t,n,d,E,r])}const Xk=b.createContext(void 0);function qk(){return b.useContext(Xk)}function KC(e){const{disabled:t=!1,defaultOpen:n=!1,onOpenChange:o,open:l,delay:r,closeDelay:d,hoverable:E=!0,trackCursorAxis:h="none",actionsRef:A,onOpenChangeComplete:R}=e,T=r??Vk,S=d??0,[I,C]=b.useState(null),[_,O]=b.useState(null),[D,U]=b.useState(),H=b.useRef(null),[L,w]=aC({controlled:l,default:n,name:"Tooltip",state:"open"}),G=!t&&L;function B(X,se,Ee){const Se=Ee==="trigger-hover",Oe=X&&Ee==="trigger-focus",Ue=!X&&(Ee==="trigger-press"||Ee==="escape-key");function Ae(){o?.(X,se,Ee),w(X)}Se?Pr.flushSync(Ae):Ae(),Oe||Ue?U(Oe?"focus":"dismiss"):Ee==="trigger-hover"&&U(void 0)}const j=nt(B);L&&t&&B(!1,void 0,"disabled");const{mounted:Q,setMounted:ce,transitionStatus:ue}=jC(G),te=nt(()=>{ce(!1),R?.(!1)});dE({enabled:!A,open:G,ref:H,onComplete(){G||te()}}),b.useImperativeHandle(A,()=>({unmount:te}),[te]);const ee=QR({elements:{reference:I,floating:_},open:G,onOpenChange(X,se,Ee){j(X,se,YC(Ee))}}),fe=qk(),{delayRef:he,isInstantPhase:M,hasProvider:K}=xU(ee),$=M?"delay":D,de=UU(ee,{enabled:!t,mouseOnly:!0,move:!1,handleClose:E&&h!=="both"?Kk():null,restMs(){const X=fe?.delay,se=typeof he.current=="object"?he.current.open:void 0;let Ee=T;return K&&(se!==0?Ee=r??X??T:Ee=0),Ee},delay(){const X=typeof he.current=="object"?he.current.close:void 0;let se=S;return d==null&&K&&(se=X),{close:se}}}),y=Fk(ee,{enabled:!t}),Y=FC(ee,{enabled:!t,referencePress:!0}),W=JU(ee,{enabled:!t&&h!=="none",axis:h==="none"?void 0:h}),{getReferenceProps:z,getFloatingProps:Z}=zC([de,y,Y,W]),ne=b.useMemo(()=>({open:G,setOpen:j,mounted:Q,setMounted:ce,setTriggerElement:C,positionerElement:_,setPositionerElement:O,popupRef:H,triggerProps:z(),popupProps:Z(),floatingRootContext:ee,instantType:$,transitionStatus:ue,onOpenChangeComplete:R}),[G,j,Q,ce,C,_,O,H,z,Z,ee,$,ue,R]),P=b.useMemo(()=>({...ne,delay:T,closeDelay:S,trackCursorAxis:h,hoverable:E}),[ne,T,S,h,E]);return c.jsx(nC.Provider,{value:P,children:e.children})}let Lh=function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e}({});const Zk={[Lh.startingStyle]:""},Qk={[Lh.endingStyle]:""},JR={transitionStatus(e){return e==="starting"?Zk:e==="ending"?Qk:null}};let jl=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=Lh.startingStyle]="startingStyle",e[e.endingStyle=Lh.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e}({}),Jk=function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e}({});const $k={[Jk.popupOpen]:""},ex={[jl.open]:""},tx={[jl.closed]:""},ax={[jl.anchorHidden]:""},VC={open(e){return e?$k:null}},hE={open(e){return e?ex:tx},anchorHidden(e){return e?ax:null}},nx=parseInt(b.version,10);function WC(e){return nx>=e}function XC(e,t){if(e&&!t)return e;if(!e&&t)return t;if(e||t)return{...e,...t}}function ix(e,t){const n={};for(const o in e){const l=e[o];if(t?.hasOwnProperty(o)){const r=t[o](l);r!=null&&Object.assign(n,r);continue}l===!0?n[`data-${o.toLowerCase()}`]="":l&&(n[`data-${o.toLowerCase()}`]=l.toString())}return n}function ox(e,t){return typeof e=="function"?e(t):e}const eu={};function $R(e,t,n,o,l){let r={...Km(e,eu)};return t&&(r=$d(r,t)),n&&(r=$d(r,n)),o&&(r=$d(r,o)),r}function lx(e){if(e.length===0)return eu;if(e.length===1)return Km(e[0],eu);let t={...Km(e[0],eu)};for(let n=1;n<e.length;n+=1)t=$d(t,e[n]);return t}function $d(e,t){return qC(t)?t(e):sx(e,t)}function sx(e,t){if(!t)return e;for(const n in t){const o=t[n];switch(n){case"style":{e[n]=XC(e.style,o);break}case"className":{e[n]=ZC(e.className,o);break}default:rx(n,o)?e[n]=cx(e[n],o):e[n]=o}}return e}function rx(e,t){const n=e.charCodeAt(0),o=e.charCodeAt(1),l=e.charCodeAt(2);return n===111&&o===110&&l>=65&&l<=90&&(typeof t=="function"||typeof t>"u")}function qC(e){return typeof e=="function"}function Km(e,t){return qC(e)?e(t):e??eu}function cx(e,t){return t?e?n=>{if(ux(n)){const l=n;Vm(l);const r=t(l);return l.baseUIHandlerPrevented||e?.(l),r}const o=t(n);return e?.(n),o}:t:e}function Vm(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function ZC(e,t){return t?e?t+" "+e:t:e}function ux(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function po(e,t,n={}){const o=t.render,l=dx(t,n);if(n.enabled===!1)return null;const r=n.state??Jo;return hx(e,o,l,r)}function dx(e,t={}){const{className:n,render:o}=e,{state:l=Jo,ref:r,props:d,disableStyleHooks:E,customStyleHookMapping:h,enabled:A=!0}=t,R=A?ox(n,l):void 0;let T;E!==!0&&(T=b.useMemo(()=>A?ix(l,h):Jo,[l,h,A]));const S=A?XC(T,Array.isArray(d)?lx(d):d)??Jo:Jo;return typeof document<"u"&&(A?Array.isArray(r)?S.ref=PU([S.ref,Tp(o),...r]):S.ref=Mr(S.ref,Tp(o),r):Mr(null,null)),A?(R!==void 0&&(S.className=ZC(S.className,R)),S):Jo}function hx(e,t,n,o){if(t){if(typeof t=="function")return t(n,o);const l=$R(n,t.props);return l.ref=n.ref,b.cloneElement(t,l)}if(e&&typeof e=="string")return Ex(e,n);throw new Error("Base UI: Render element or function are not defined.")}function Ex(e,t){return e==="button"?c.jsx("button",{type:"button",...t}):e==="img"?c.jsx("img",{alt:"",...t}):b.createElement(e,t)}function Tp(e){return e&&typeof e!="function"?WC(19)?e.props.ref:e.ref:null}const fx=b.forwardRef(function(t,n){const{className:o,render:l,...r}=t,{open:d,setTriggerElement:E,triggerProps:h}=aE(),A=b.useMemo(()=>({open:d}),[d]);return po("button",t,{state:A,ref:[n,E],props:[h,r],customStyleHookMapping:VC})}),QC=b.createContext(void 0);function Ax(){const e=b.useContext(QC);if(e===void 0)throw new Error("Base UI: <Tooltip.Portal> is missing.");return e}function mx(e){const t=vC({root:e.root});return t&&Pr.createPortal(e.children,t)}function JC(e){const{children:t,keepMounted:n=!1,container:o}=e,{mounted:l}=aE();return l||n?c.jsx(QC.Provider,{value:n,children:c.jsx(mx,{root:o,children:t})}):null}const $C=b.createContext(void 0);function Rx(){const e=b.useContext($C);if(e===void 0)throw new Error("Base UI: TooltipPositionerContext is missing. TooltipPositioner parts must be placed within <Tooltip.Positioner>.");return e}function Br(e){return e?.ownerDocument||document}const Tx=b.createContext(void 0);function Sx(e=!0){const t=b.useContext(Tx);if(t===void 0&&!e)throw new Error("Base UI: DirectionContext is missing.");return t?.direction??"ltr"}const Ix=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:l,rects:r,platform:d,elements:E,middlewareData:h}=t,{element:A,padding:R=0,offsetParent:T="real"}=Io(e,t)||{};if(A==null)return{};const S=fC(R),I={x:n,y:o},C=VR(l),_=KR(C),O=await d.getDimensions(A),D=C==="y",U=D?"top":"left",H=D?"bottom":"right",L=D?"clientHeight":"clientWidth",w=r.reference[_]+r.reference[C]-I[C]-r.floating[_],G=I[C]-r.reference[C],B=T==="real"?await d.getOffsetParent?.(A):E.floating;let j=E.floating[L]||r.floating[_];(!j||!await d.isElement?.(B))&&(j=E.floating[L]||r.floating[_]);const Q=w/2-G/2,ce=j/2-O[_]/2-1,ue=Math.min(S[U],ce),te=Math.min(S[H],ce),ee=ue,fe=j-O[_]-te,he=j/2-O[_]/2+Q,M=Fm(ee,he,fe),K=!h.arrow&&fl(l)!=null&&he!==M&&r.reference[_]/2-(he<ee?ue:te)-O[_]/2<0,$=K?he<ee?he-ee:he-fe:0;return{[C]:I[C]+$,data:{[C]:M,centerOffset:he-M-$,...K&&{alignmentOffset:$}},reset:K}}}),_x=(e,t)=>({...Ix(e),options:[e,t]});function e0(e,t,n){const o=e==="inline-start"||e==="inline-end";return{top:"top",right:o?n?"inline-start":"inline-end":"right",bottom:"bottom",left:o?n?"inline-end":"inline-start":"left"}[t]}function Sp(e,t,n){const{rects:o,placement:l}=e;return{side:e0(t,oi(l),n),align:fl(l)||"center",anchor:{width:o.reference.width,height:o.reference.height},positioner:{width:o.floating.width,height:o.floating.height}}}function gx(e){const{anchor:t,positionMethod:n="absolute",side:o="bottom",sideOffset:l=0,align:r="center",alignOffset:d=0,collisionBoundary:E,collisionPadding:h=5,sticky:A=!1,arrowPadding:R=5,trackAnchor:T=!0,keepMounted:S=!1,floatingRootContext:I,mounted:C,collisionAvoidance:_,shiftCrossAxis:O=!1,nodeId:D,adaptiveOrigin:U}=e,H=_.side||"flip",L=_.align||"flip",w=_.fallbackAxisSide||"end",G=typeof t=="function"?t:void 0,B=nt(G),j=G?B:t,Q=Ri(t),ue=Sx()==="rtl",te={top:"top",right:"right",bottom:"bottom",left:"left","inline-end":ue?"left":"right","inline-start":ue?"right":"left"}[o],ee=r==="center"?te:`${te}-${r}`,fe={boundary:E==="clipping-ancestors"?"clippingAncestors":E,padding:h},he=b.useRef(null),M=Ri(l),K=Ri(d),y=[Hk(ot=>{const Ft=Sp(ot,o,ue),kt=typeof M.current=="function"?M.current(Ft):M.current,Yn=typeof K.current=="function"?K.current(Ft):K.current;return{mainAxis:kt,crossAxis:Yn,alignmentAxis:Yn}},[typeof l!="function"?l:0,typeof d!="function"?d:0,ue,o])],Y=L==="none"&&H!=="shift",W=!Y&&(A||O||H==="shift"),z=H==="none"?null:xk({...fe,mainAxis:!O&&H==="flip",crossAxis:L==="flip"?"alignment":!1,fallbackAxisSideDirection:w}),Z=Y?null:Uk(ot=>{const Ft=Br(ot.elements.floating).documentElement;return{...fe,rootBoundary:O?{x:0,y:0,width:Ft.clientWidth,height:Ft.clientHeight}:void 0,mainAxis:L!=="none",crossAxis:W,limiter:A||O?void 0:kk(()=>{if(!he.current)return{};const{height:kt}=he.current.getBoundingClientRect();return{offset:kt/2+(typeof h=="number"?h:0)}})}},[fe,A,O,h,L]);H==="shift"||L==="shift"||r==="center"?y.push(Z,z):y.push(z,Z),y.push(Pk({...fe,apply({elements:{floating:ot},rects:{reference:Ft},availableWidth:kt,availableHeight:Yn}){Object.entries({"--available-width":`${kt}px`,"--available-height":`${Yn}px`,"--anchor-width":`${Ft.width}px`,"--anchor-height":`${Ft.height}px`}).forEach(([Rs,Vr])=>{ot.style.setProperty(Rs,Vr)})}}),_x(()=>({element:he.current||document.createElement("div"),padding:R,offsetParent:"floating"}),[R]),wk(),{name:"transformOrigin",fn(ot){const{elements:Ft,middlewareData:kt,placement:Yn,rects:Rs,y:Vr}=ot,Sl=oi(Yn),Ts=Ti(Sl),Di=he.current,Ss=kt.arrow?.x||0,Il=kt.arrow?.y||0,PE=Di?.clientWidth||0,Ou=Di?.clientHeight||0,Is=Ss+PE/2,_s=Il+Ou/2,_l=Math.abs(kt.shift?.y||0),wE=Rs.reference.height/2,bu=_l>(typeof l=="function"?l(Sp(ot,o,ue)):l),Du={top:`${Is}px calc(100% + ${l}px)`,bottom:`${Is}px ${-l}px`,left:`calc(100% + ${l}px) ${_s}px`,right:`${-l}px ${_s}px`}[Sl],Wr=`${Is}px ${Rs.reference.y+wE-Vr}px`;return Ft.floating.style.setProperty("--transform-origin",W&&Ts==="y"&&bu?Wr:Du),{}}},U);let ne=I;!C&&I&&(ne={...I,elements:{reference:null,floating:null,domReference:null}});const P=b.useMemo(()=>({elementResize:T&&typeof ResizeObserver<"u",layoutShift:T&&typeof IntersectionObserver<"u"}),[T]),{refs:X,elements:se,x:Ee,y:Se,middlewareData:Oe,update:Ue,placement:Ae,context:be,isPositioned:_e,floatingStyles:ge}=Bk({rootContext:ne,placement:ee,middleware:y,strategy:n,whileElementsMounted:S?void 0:(...ot)=>Ep(...ot,P),nodeId:D}),{sideX:ye,sideY:Fe}=Oe.adaptiveOrigin||{},Aa=b.useMemo(()=>U?{position:n,[ye]:`${Ee}px`,[Fe]:`${Se}px`}:ge,[U,ye,Fe,n,Ee,Se,ge]),di=b.useRef(null);Lt(()=>{if(!C)return;const ot=Q.current,Ft=typeof ot=="function"?ot():ot,Yn=(Ip(Ft)?Ft.current:Ft)||null||null;Yn!==di.current&&(X.setPositionReference(Yn),di.current=Yn)},[C,X,j,Q]),b.useEffect(()=>{if(!C)return;const ot=Q.current;typeof ot!="function"&&Ip(ot)&&ot.current!==di.current&&(X.setPositionReference(ot.current),di.current=ot.current)},[C,X,j,Q]),b.useEffect(()=>{if(S&&C&&se.domReference&&se.floating)return Ep(se.domReference,se.floating,Ue,P)},[S,C,se,Ue,P]);const Tn=oi(Ae),Xi=e0(o,Tn,ue),qi=fl(Ae)||"center",As=!!Oe.hide?.referenceHidden,ms=b.useMemo(()=>({position:"absolute",top:Oe.arrow?.y,left:Oe.arrow?.x}),[Oe.arrow]),Co=Oe.arrow?.centerOffset!==0;return b.useMemo(()=>({positionerStyles:Aa,arrowStyles:ms,arrowRef:he,arrowUncentered:Co,side:Xi,align:qi,anchorHidden:As,refs:X,context:be,isPositioned:_e,update:Ue}),[Aa,ms,he,Co,Xi,qi,As,X,be,_e,Ue])}function Ip(e){return e!=null&&"current"in e}const t0=b.forwardRef(function(t,n){const{render:o,className:l,anchor:r,positionMethod:d="absolute",side:E="top",align:h="center",sideOffset:A=0,alignOffset:R=0,collisionBoundary:T="clipping-ancestors",collisionPadding:S=5,arrowPadding:I=5,sticky:C=!1,trackAnchor:_=!0,collisionAvoidance:O=KU,...D}=t,{open:U,setPositionerElement:H,mounted:L,floatingRootContext:w,trackCursorAxis:G,hoverable:B}=aE(),j=Ax(),Q=gx({anchor:r,positionMethod:d,floatingRootContext:w,mounted:L,side:E,sideOffset:A,align:h,alignOffset:R,collisionBoundary:T,collisionPadding:S,sticky:C,arrowPadding:I,trackAnchor:_,keepMounted:j,collisionAvoidance:O}),ce=b.useMemo(()=>{const he={};return(!U||G==="both"||!B)&&(he.pointerEvents="none"),{role:"presentation",hidden:!L,style:{...Q.positionerStyles,...he}}},[U,G,B,L,Q.positionerStyles]),ue=b.useMemo(()=>({props:ce,...Q}),[ce,Q]),te=b.useMemo(()=>({open:U,side:ue.side,align:ue.align,anchorHidden:ue.anchorHidden}),[U,ue.side,ue.align,ue.anchorHidden]),ee=b.useMemo(()=>({...te,arrowRef:ue.arrowRef,arrowStyles:ue.arrowStyles,arrowUncentered:ue.arrowUncentered}),[te,ue.arrowRef,ue.arrowStyles,ue.arrowUncentered]),fe=po("div",t,{state:te,props:[ue.props,D],ref:[n,H],customStyleHookMapping:hE});return c.jsx($C.Provider,{value:ee,children:fe})}),px={...hE,...JR},a0=b.forwardRef(function(t,n){const{className:o,render:l,...r}=t,{open:d,instantType:E,transitionStatus:h,popupProps:A,popupRef:R,onOpenChangeComplete:T}=aE(),{side:S,align:I}=Rx();dE({open:d,ref:R,onComplete(){d&&T?.(!0)}});const C=b.useMemo(()=>({open:d,side:S,align:I,instant:E,transitionStatus:h}),[d,S,I,E,h]);return po("div",t,{state:C,ref:[n,R],props:[A,h==="starting"?YU:Jo,r],customStyleHookMapping:px})}),Em=new Map,n0="assets/Skills/General/Missing.png",Wm=e=>{if(Em.has(e))return Em.get(e);const t=`assets/Skills/${$N(e)}`;if(t){const n=new Image;return n.src=t,n.onerror=o=>{n.src=n0,console.error("failed to load skill image: "+t),n.onerror=null},n.onload=()=>go(),Em.set(e,n),n}};function i0(e){const t=`assets/Skills/${$N(e.skillName)}`,[n,o]=b.useState(!1);return c.jsx("img",{style:e.style,src:n?n0:t,onError:l=>o(!0),alt:e.skillName})}function Nx(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.6)"}){const t=e.diameter/2,n=Math.PI*t,o=n*(1-e.progress),l=n-o,r=o+","+l,d=c.jsx("circle",{r:t/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:t,strokeDasharray:r,strokeDashoffset:n/4+o}),E=t,h=c.jsx("circle",{r:t+E/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:E});return c.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[d,h]})}function Cx(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,n=2*Math.PI*t,o=n*e.progress,l=n-o,r=o+","+l,d=c.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:2,strokeDashoffset:n/4,strokeDasharray:r});return c.jsx("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:d})}function Ox(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,n=Math.PI*t*2,o=n*e.progress,l=n-o,r=o+","+l,d=2*Math.PI*e.progress,E="#ffffffef",h=c.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:E,strokeWidth:1,strokeDasharray:r,strokeDashoffset:n/4}),A=c.jsx("line",{x1:20,y1:21,x2:20,y2:21-t,stroke:E,strokeWidth:1}),R=c.jsx("line",{x1:20,y1:21,x2:20+t*Math.cos(d-Math.PI/2),y2:21+t*Math.sin(d-Math.PI/2),stroke:E,strokeWidth:1});return c.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[h,A,R]})}function bx(e){const[t,n]=b.useState(c.jsx("div",{})),o=b.useContext(Ea),l=()=>{const G=p.getSkillInfo({game:p.getDisplayedGame(),skillName:e.skillName}),B=Gn(o),j=[];if(G.status.ready()){let te="ready ("+G.stacksAvailable,ee=" ("+G.stacksAvailable;G.timeTillNextStackReady>0&&(te+=") (next stack ready in "+G.timeTillNextStackReady.toFixed(3),ee+=") ("+G.timeTillNextStackReady.toFixed(3)+""),te+=")",ee+=")",j.push(g({en:te,zh:ee}))}else{if(G.status.unavailableReasons.includes(dt.RequirementsNotMet)&&j.push(Vl(dt.RequirementsNotMet)),G.status.unavailableReasons.includes(dt.NotEnoughMP)&&j.push(Vl(dt.NotEnoughMP)+g({en:" (needs "+G.capturedManaCost+")",zh:" "+G.capturedManaCost+""})),G.status.unavailableReasons.includes(dt.Blocked)){const te=Math.max(G.timeTillNextStackReady,G.timeTillSecondaryReady??0),ee=g({en:"possibly ready in "+G.timeTillAvailable.toFixed(3),zh:""+G.timeTillAvailable.toFixed(3)+""}),fe=g({en:" (next stack ready in "+te.toFixed(3)+")",zh:""+te.toFixed(3)+"CD"});j.push(c.jsxs(c.Fragment,{children:[ee,G.stacksAvailable<G.maxStacks?fe:void 0]}))}G.status.unavailableReasons.includes(dt.NotInCombat)&&j.push(Vl(dt.NotInCombat))}const Q=G.instantCast?0:G.castTime;let ce="";G.status.ready()&&(ce+=g({en:"cast: ",zh:""})+Q.toFixed(3),G.llCovered&&Q>ha.epsilon&&(ce+=" (LL)"),ce+=g({en:", cast+delay: ",zh:" +"})+G.timeTillDamageApplication.toFixed(3));const ue=c.jsxs("div",{style:{color:p.displayingUpToDateGameState?B.text:B.historical},children:[c.jsx("div",{className:"paragraph",children:c.jsx("b",{children:li(e.skillName)})}),c.jsx("div",{className:"paragraph",children:j.map((te,ee)=>c.jsxs("span",{children:[te,c.jsx("br",{})]},ee))}),c.jsx("div",{className:"paragraph",children:ce})]});n(ue)},r={width:48,height:48,verticalAlign:"top",position:"relative",display:"inline-block"},d={width:40,height:40,position:"absolute",top:2,left:"50%",marginLeft:-20};let E="transparent";e.readyAsideFromCd||(E="rgba(0, 0, 0, 0.6)");const h=p.getSkillInfo({game:p.getDisplayedGame(),skillName:e.skillName}),A=h.stacksAvailable,R=h.maxStacks;let T;const S=48,I=S/3+4;let C,_;if(A>0){C="0 0 2px rgba(255, 50, 0, 1), 0 0 3px rgba(255, 100, 0, 1), 0 0 5px rgba(255, 100, 0, 1)";const G=A===R?5:3;for(let B=0;B<G;B++)C+=", 0 0 10px black";_="white"}else C="0 0 4px black, 0 0 8px black",_="rgb(223,60,60)";R>1?T=c.jsx("div",{tabIndex:-1,style:{fontFamily:"Goldman Regular",color:_,fontSize:`${I}px`,textShadow:C,width:I,textAlign:"center",bottom:2,right:1,zIndex:3,position:"absolute"},children:A}):T=c.jsx(c.Fragment,{});const O=c.jsx(Nx,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(0, 0, 0, 0.6)"}),D=c.jsx(Ox,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 1.0)"}),U=e.secondaryCdProgress&&c.jsx(Cx,{diameter:32,progress:e.secondaryCdProgress,color:"rgba(250,186,47,255)"}),H=c.jsx("img",{hidden:!e.highlight,src:"/misc/proc.png",alt:"skill proc",style:{position:"absolute",width:44,height:44,top:0,left:2,zIndex:2}}),L=c.jsxs("div",{onMouseEnter:l,children:[c.jsxs("div",{style:r,children:[" ",c.jsx(i0,{style:d,skillName:e.skillName}),c.jsxs("div",{style:{position:"absolute",width:40,height:41,top:1,left:"50%",marginLeft:-20,borderRadius:3,overflow:"hidden",zIndex:1,background:E},children:[e.cdProgress>1-ha.epsilon||!e.readyAsideFromCd||O,e.cdProgress>1-ha.epsilon||D,!e.secondaryCdProgress||e.secondaryCdProgress>1-ha.epsilon||U]}),c.jsx("div",{style:{position:"absolute",width:S,height:S,background:"url('/misc/skillIcon_overlay.png') no-repeat"}})]}),H,T]}),w=c.jsx("span",{title:Ta[e.skillName].name,className:"skillButton",children:c.jsx(is,{onClickFn:()=>{p.requestUseSkill({skillName:e.skillName,targetCount:e.targetCount},!0)},content:L})});return c.jsxs(KC,{delay:0,hoverable:!1,children:[c.jsx(fx,{render:w}),c.jsx(JC,{container:document.getElementById("skillsWindowAnchor"),children:c.jsx(t0,{sideOffset:3,side:"top",className:"tooltip-positioner",children:c.jsx(a0,{className:"info-tooltip tooltip",children:t})})})]})}let o0=e=>{};class Dx extends sn.Component{state;onWaitTimeChange;onWaitTimeSubmit;onWaitUntilChange;onWaitUntilSubmit;onWaitSinceChange;onTargetCountChange;onRemoveTrailingIdleTime;onWaitTillNextMpOrLucidTick;static contextType=Ea;constructor(t){super(t),o0=n=>{this.setState({statusList:n})},this.onWaitTimeChange=n=>{!n||!n.target||this.setState({waitTime:n.target.value})},this.onWaitTimeSubmit=n=>{n.preventDefault();const o=parseFloat(this.state.waitTime);if(!isNaN(o))if(this.state.waitSince==="Now")p.step(o,!0);else if(this.state.waitSince==="LastSkill"){const l=p.game.time-p.lastSkillTime,r=o-l;r<=0?window.alert("Invalid input: trying to jump to "+o+"s since the last action, but "+l+"s has already elapsed."):p.step(r,!0)}else console.assert(!1)},this.onWaitUntilChange=n=>{!n||!n.target||this.setState({waitUntil:n.target.value})},this.onWaitUntilSubmit=n=>{n.preventDefault();const o=xi(this.state.waitUntil);isNaN(o)||(o>(p.displayingUpToDateGameState?p.game.getDisplayTime():p.savedHistoricalGame.getDisplayTime())?p.stepUntil(o,!0):window.alert("Can only jump to a time in the future!"))},this.onWaitSinceChange=n=>{this.setState({waitSince:n.target.value})},this.onTargetCountChange=n=>{this.setState({targetCount:parseInt(n.target.value)})},this.onRemoveTrailingIdleTime=()=>{p.removeTrailingIdleTime()},this.onWaitTillNextMpOrLucidTick=()=>{p.waitTillNextMpOrLucidTick()},this.state={statusList:[],waitTime:"1",waitSince:"Now",waitUntil:"0:00",targetCount:1}}render(){const t=[];for(let E=0;E<this.state.statusList.length;E++){const h=this.state.statusList[E].skillName,A=this.state.statusList[E],R=A?!A.status.unavailableReasons.some(S=>S!==dt.Blocked):!1,T=c.jsx(bx,{highlight:A?A.highlight:!1,skillName:h,ready:A?A.status.ready():!1,readyAsideFromCd:R,cdProgress:A?1-A.timeTillNextStackReady/A.cdRecastTime:1,secondaryCdProgress:A&&A.secondaryCdRecastTime&&A.timeTillSecondaryReady?1-A.timeTillSecondaryReady/A.secondaryCdRecastTime:1,targetCount:this.state.targetCount},E);t.push(T)}const n=c.jsx(Be,{topic:"waitUntilInputFormat",content:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:g({en:"Examples:",zh:""})}),c.jsxs("div",{className:"paragraph",children:["12 ",c.jsx("br",{}),"1.5 ",c.jsx("br",{}),"10:04.2 ",c.jsx("br",{}),"-0:03"]})]})}),o={display:"inline-block",flex:"auto"},l=Gn(this.context),r={outline:"none",border:"none",borderBottom:"1px solid "+l.text,borderRadius:0,background:"transparent",color:l.text},d=c.jsx(Be,{topic:"targetCount",content:g({en:c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"The number of targets hit by the next ability. Damage fall-off is automatically computed. If the number of targets set is more than the number of enemies the ability can hit, then the additional targets are ignored."}),c.jsx("br",{}),c.jsx("br",{}),c.jsx("span",{children:"Buff calculations for enemy debuffs like Dokumori and Chain Stratagem may be inaccurate when multiple targets are selected."})]}),zh:c.jsxs("div",{children:[c.jsx("span",{children:"2"}),c.jsx("br",{}),c.jsx("br",{}),c.jsx("span",{children:""})]})})});return c.jsx("div",{className:"skillsWindow",id:"skillsWindowAnchor",children:c.jsxs("div",{className:"skillIcons",children:[c.jsx("style",{children:`
					.info-tooltip {
						color: ${l.text};
						background-color: ${l.tipBackground};
						opacity: 0.98;
						max-width: 300px;
						outline: 1px solid ${l.bgHighContrast};
						transition: none;
						font-size: 100%;
						z-index: 10;
					}
				`}),t,c.jsxs("div",{style:{margin:"10px 0"},children:[g({en:"# of targets hit",zh:""})," ",d,":"," ",c.jsx("input",{type:"number",min:1,max:EM,style:{width:30,...r},value:this.state.targetCount,onChange:this.onTargetCountChange}),c.jsxs("div",{style:{display:"flex",flexDirection:"row",marginBottom:6},children:[g({en:c.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:o,children:["Wait until"," ",c.jsx("input",{type:"text",style:{width:40,...r},value:this.state.waitTime,onChange:this.onWaitTimeChange})," ","second(s) since"," ",c.jsxs("select",{style:{display:"inline-block",outline:"none"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[c.jsx("option",{value:"Now",children:"now"}),c.jsx("option",{value:"LastSkill",children:"last action"})]})," ",c.jsx("input",{type:"submit",value:"GO"})]}),zh:c.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:o,children:[""," ",c.jsxs("select",{style:{display:"inline-block",outline:"none"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[c.jsx("option",{value:"Now",children:""}),c.jsx("option",{value:"LastSkill",children:""})]})," ",""," ",c.jsx("input",{type:"text",style:{width:30,...r},value:this.state.waitTime,onChange:this.onWaitTimeChange})," "," ",c.jsx("input",{type:"submit",value:"GO"})]}),ja:c.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:o,children:[c.jsxs("select",{style:{display:"inline-block",outline:"none",marginRight:"4px"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[c.jsx("option",{value:"Now",children:""}),c.jsx("option",{value:"LastSkill",children:""})]}),"",c.jsx("input",{type:"text",style:{width:30,...r},value:this.state.waitTime,onChange:this.onWaitTimeChange}),"",c.jsx("input",{type:"submit",value:"GO"})]})}),g({en:c.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:o,children:["Wait until ",n," ",c.jsx("input",{type:"text",style:{width:60,...r},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),c.jsx("input",{type:"submit",value:"GO"})]}),zh:c.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:o,children:[" ",n," ",c.jsx("input",{type:"text",style:{width:60,...r},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),c.jsx("input",{type:"submit",value:"GO"})]}),ja:c.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:o,children:[" ",n," ",c.jsx("input",{type:"text",style:{width:60,...r},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),c.jsx("input",{type:"submit",value:"GO"})]})})]}),c.jsx("button",{onClick:this.onWaitTillNextMpOrLucidTick,children:g({en:"Wait until MP tick / lucid tick",zh:"/"})}),c.jsx("span",{children:" "}),c.jsx("button",{onClick:this.onRemoveTrailingIdleTime,children:g({en:"Remove trailing idle time",zh:""})})]})]})})}}let il=()=>{};function yx(e){const[t,n]=b.useState("(untitled)"),o=l=>n(l);return c.jsxs("form",{children:[c.jsx(Pt,{style:{display:"inline-block",marginTop:"10px"},defaultValue:t,description:g({en:"name: ",zh:""}),width:30,onChange:o}),c.jsx("span",{children:" "}),c.jsx("button",{type:"submit",disabled:!e.enabled,onClick:l=>{p.addSelectionToPreset(t),l.preventDefault()},children:g({en:"add selection to preset",zh:""})})]})}function vx(e){const t=e.line,n=[];let o=0;const l={margin:"0 1px",width:"18px",verticalAlign:"middle"};for(const d of t.actions)if(d.info.type===Ge.Skill){const E=d.info.skillName;n.push(c.jsx(i0,{style:l,skillName:E},o)),o++}const r=c.jsxs("span",{children:[t.name," (",n,")"]});return c.jsxs("div",{style:{marginBottom:"8px"},children:[c.jsx(is,{content:r,onClickFn:()=>{const d=p.record.selectionStartIndex;p.displayingUpToDateGameState?(p.tryAddLine(t,Na.SkillSequence),p.updateAllDisplay(),p.scrollToTime()):d!==void 0&&p.undoStack.doThenPush(new sT(t.actions,d,"preset"))}}),c.jsx("span",{children:" "}),c.jsx(is,{content:"[x]",onClickFn:()=>{p.deleteLine(t)}})]})}function Mx(){const e=b.useContext(Ea),[,t]=b.useReducer(r=>r+1,0);b.useEffect(()=>(il=()=>t(),()=>{il=()=>{}}),[]);const n=p.record.getFirstSelection()!==void 0,o=sl(e,"bgMediumContrast"),l=c.jsxs("div",{children:[c.jsx("button",{style:{marginBottom:10},onClick:()=>{p.deleteAllLines()},children:g({en:"clear all presets",zh:""})}),c.jsx(kh,{allowLoadFromUrl:!1,defaultLoadUrl:"https://miyehn.me/ffxiv-blm-rotation/presets/lines/default.txt",onLoadFn:r=>{r.fileType===ni.SkillSequencePresets?p.appendFilePresets(r):window.alert("incorrect file type '"+r.fileType+"'")}}),c.jsxs("div",{style:{outline:"1px solid "+o,margin:"10px 0",padding:"10px"},children:[p.getPresetLines().map((r,d)=>c.jsx(vx,{line:r},d)),c.jsx(yx,{enabled:n}),c.jsx("div",{style:{marginTop:16},children:c.jsx(ol,{fileFormat:To.Json,getContentFn:()=>p.serializedPresets(),filename:"presets",displayName:g({en:"download presets to file",zh:""})})})]})]});return c.jsx(ll,{title:g({en:"Skill sequence presets",zh:""}),content:l,defaultShow:!1})}const mi=4;var at=(e=>(e.s_Cursor="s_Cursor",e.s_HistoricalCursor="s_HistoricalCursor",e.DamageMark="DamageMark",e.HealingMark="HealingMark",e.AggroMark="AggroMark",e.LucidMark="LucidMark",e.MPTickMark="MPTickMark",e.MeditateTickMark="MeditateTickMark",e.AutoTickMark="AutoTickMark",e.Skill="Skill",e.Marker="Marker",e.WarningMark="WarningMark",e.Buff="Buff",e))(at||{});const wi=-1;var Ya=(e=>(e.Info="Info",e.Untargetable="Untargetable",e.Buff="Buff",e))(Ya||{});function Lx(e){return e.type==="s_Cursor"||e.type==="s_HistoricalCursor"}let Hx=class{scale;startTime;elapsedTime;sharedElements;slots;activeSlotIndex;#e;#t;#a;constructor(){this.scale=.25,this.startTime=0,this.elapsedTime=0,this.sharedElements=[],this.slots=[],this.activeSlotIndex=-1,this.#e=[],this.#t=[],this.#a=[],this.#u()}setTimeSegment(t,n){this.startTime=t,this.elapsedTime=n}addElement(t){Lx(t)?this.sharedElements.push(t):(console.assert(this.slots.length>0),this.slots[this.activeSlotIndex].elements.push(t))}invalidateLastElement(){if(this.slots.length>0){const t=this.slots[this.activeSlotIndex].elements;for(let n=t.length-1;n>=0;n--){const o=t[n];if(o.type==="Skill"){o.node.tmp_invalid_reasons=[dt.CastCanceled];return}}}}tryGetElement(t,n){return this.slots[this.activeSlotIndex].elements.find(o=>o.time===t&&o.type===n)}getAllMarkers(){return this.#e}getUntargetableMarkers(){return this.#t}getBuffMarkers(){return this.#a}#n(t,n){const o=function(l,r){return Math.abs(l-r)<ha.epsilon};return!(t.markerType!==n.markerType||!o(t.time,n.time)||!o(t.duration,n.duration)||t.color!==n.color||t.track!==n.track||t.showText!==n.showText||t.description!==n.description)}addMarker(t){this.#e.push(t),t.markerType==="Untargetable"?this.#t.push(t):t.markerType==="Buff"&&this.#a.push(t),this.drawElements(),this.#r()}deleteMarker(t){let n=!1;for(let o=0;o<this.#e.length;o++)t===this.#e[o]&&(this.#e.splice(o,1),this.drawElements(),this.#r(),n=!0);return this.#i(),this.#c(),n}#i(){this.#t=[],this.#e.forEach(t=>{t.markerType==="Untargetable"&&this.#t.push(t)}),Ka()}#c(){this.#a=[],this.#e.forEach(t=>{t.markerType==="Buff"&&(t.description==="Wanderer's Minuet"&&(t.description=k.WanderersMinuet),this.#a.push(t))})}sortAndRemoveDuplicateMarkers(){this.#e.sort((n,o)=>n.time-o.time);let t=0;for(let n=this.#e.length-1;n>0;n--)this.#n(this.#e[n],this.#e[n-1])&&(this.#e.splice(n,1),t++);return this.#i(),this.#c(),this.#r(),t}#s(t,n,o,l){let r=t.markers.map(d=>({time:d.time+o,duration:d.duration,color:d.color,description:d.description,track:d.markerType==="Untargetable"?wi:n,type:"Marker",markerType:d.markerType??"Info",showText:d.showText??!1}));l!==void 0&&(r=r.filter(d=>l===void 0||d.time<=l+ha.epsilon)),this.#e=this.#e.concat(r),this.#i(),this.#c(),this.#r()}loadCombinedTracksPreset(t,n,o){if(t.fileType!==ni.MarkerTracksCombined){window.alert("wrong file type '"+t.fileType+"'");return}t.tracks.forEach(l=>{this.loadIndividualTrackPreset(l,l.track,n,o)})}loadIndividualTrackPreset(t,n,o,l){if(t.fileType!==ni.MarkerTrackIndividual){window.alert("wrong file type '"+t.fileType+"'");return}this.#s(t,n,o,l)}deleteAllMarkers(){const t=this.#t.length>0;this.#e=[],this.#t=[],this.#a=[],this.drawElements(),t&&Ka(),this.#r()}addSlotAtIndex(t){if(t<0||t>this.slots.length||this.slots.length+1>mi){console.error("attempted to add slot at invalid index",t);return}for(let n=mi-1;n>=t;n--){let o=Rt(`gameRecord${n}`);o!==null&&ft(`gameRecord${n+1}`,o),o=Rt(`gameTimeInfo${n}`),o!==null&&ft(`gameTimeInfo${n+1}`,o)}this.slots.splice(t,0,{job:"BLM",elements:[]}),this.activeSlotIndex=t,p.setConfigAndRestart(p.gameConfig)}addSlot(){this.addSlotAtIndex(this.slots.length)}removeSlot(t){console.assert(t<this.slots.length);for(let n=t;n<mi;n++){let o=Rt("gameRecord"+(n+1).toString());o!==null&&ft("gameRecord"+n.toString(),o),o=Rt("gameTimeInfo"+(n+1).toString()),o!==null&&ft("gameTimeInfo"+n.toString(),o)}this.slots.splice(t,1);for(let n=this.slots.length;n<mi;n++)Hm("gameRecord"+n.toString()),Hm("gameTimeInfo"+n.toString());this.activeSlotIndex>=t&&(this.activeSlotIndex=Math.max(0,this.activeSlotIndex-1)),this.loadSlot(this.activeSlotIndex),ft("activeSlotIndex",this.activeSlotIndex.toString())}saveCurrentSlot(t,n,o){ft("gameRecord"+this.activeSlotIndex.toString(),JSON.stringify(t)),ft("gameTimeInfo"+this.activeSlotIndex.toString(),JSON.stringify({countdown:n,elapsedTime:o})),p.gameConfig.savePartialConfig()}loadSlot(t){const n=Rt("gameRecord"+t.toString());if(n!==null){for(this.activeSlotIndex=t;this.slots.length<=t;)this.slots.push({job:"BLM",elements:[]});const o=JSON.parse(n);return p.loadBattleRecordFromFile(o),this.slots[t].job=p.game.job,!0}else return!1}reset(){this.startTime=0,this.elapsedTime=0,this.slots.length>0&&(this.slots[this.activeSlotIndex].elements=[]),this.sharedElements=[],this.addElement({type:"s_Cursor",time:0,displayTime:0}),this.addElement({type:"s_HistoricalCursor",time:0,displayTime:0,enabled:!1})}updateElem(t){console.assert(t&&t.type.substring(0,2)==="s_");for(let n=0;n<this.sharedElements.length;n++)if(this.sharedElements[n].type===t.type){this.sharedElements[n]=t;return}console.assert(!1)}setHorizontalScale(t){this.scale=t,this.drawElements()}getAllSlotsTimeInfo(){let t=0,n=0,o=!1;for(let l=0;l<mi;l++){const r=Rt("gameTimeInfo"+l.toString());if(r!==null){const d=JSON.parse(r);t=Math.max(t,d.countdown),n=Math.max(n,d.elapsedTime),o=!0}}return o?{countdown:t,rightMostTime:n}:null}getCanvasWidth(){let t=Math.max(0,this.elapsedTime),n=p.gameConfig.countdown;const o=this.getAllSlotsTimeInfo();return o!==null&&(n=Math.max(n,o.countdown),t=Math.max(t,o.rightMostTime)),this.#e.forEach(r=>{const d=r.time+r.duration;t=Math.max(t,d+n)}),Math.ceil((t+Math.max(0,n)+4)/8)*8*100*this.scale}getCanvasHeight(){const t=this.getNumMarkerTracks();return pe.timelineCanvasHeight(t,this.slots.length)}positionFromTime(t){return t*this.scale*100}timeFromPosition(t){return t/(this.scale*100)}drawElements(){go(),this.updateTimelineMarkers()}getTrackIndices(){return Array.from(new Set(this.#e.map(t=>t.track))).sort()}updateTimelineMarkers(){go()}onClickTimelineAction(t,n){if(t<0||t>=p.record.length)return;p.record.onClickNode(t,n),il(),lu();const o=p.record.selectionStartIndex;o!==void 0?p.displayHistoricalState(-1/0,o):p.displayHistoricalState(-1/0,t)}resizeSelection(t){const n=p.record.selectionStartIndex,o=p.record.selectionEndIndex;if(n!==void 0&&o!==void 0){const l=(p.record.startIsPivot?o:n)+(t?-1:1);l>=0&&l<p.record.length&&this.onClickTimelineAction(l,!0)}}getNumMarkerTracks(){let t=-1,n=!1;for(let o=0;o<this.#e.length;o++)t=Math.max(t,this.#e[o].track),this.#e[o].track===wi&&(n=!0);return n?t+2:t+1}duringUntargetable(t){for(let n=0;n<this.#t.length;n++){const o=this.#t[n],l=o.time,r=o.time+o.duration;if(t>=l&&t<r)return!0}return!1}getTargetableDurationBetween(t,n){const o=function([d,E],[h,A]){const R=[];return d<h&&R.push([d,Math.min(E,h)]),A<E&&R.push([Math.max(A,d),E]),R};let l=[[t,n]];for(let d=0;d<this.#t.length;d++){const E=this.#t[d],h=E.time,A=E.time+E.duration;let R=[];l.forEach(T=>{R=R.concat(o(T,[h,A]))}),l=R}let r=0;return l.forEach(d=>{r+=d[1]-d[0]}),r}#r(){const t=this.serializedSeparateMarkerTracks();ft("timelineMarkers",JSON.stringify(t))}#u(){const t=Rt("timelineMarkers");t!==null&&JSON.parse(t).forEach(o=>{this.#s(o,o.track,0)})}serializedSeparateMarkerTracks(){const t=this.getNumMarkerTracks()-1,n=new Map;for(let l=wi;l<t+1;l++)n.set(l,[]);this.#e.forEach(l=>{const r=n.get(l.track);console.assert(r),r&&(r.push({time:l.time,markerType:l.markerType,duration:l.duration,description:l.description,color:l.color,showText:l.showText}),n.set(l.track,r))});const o=[];return n.forEach((l,r)=>{l.length>0&&o.push({fileType:ni.MarkerTrackIndividual,track:r,markers:l})}),o}serializedCombinedMarkerTracks(){const t=this.serializedSeparateMarkerTracks();return{fileType:ni.MarkerTracksCombined,tracks:t}}};function Ux(e){return _i({attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 5 5 L 5 27 L 27 27 L 27 5 Z M 7 7 L 25 7 L 25 25 L 7 25 Z M 9 20 L 9 22 L 23 22 L 23 20 Z"},child:[]}]})(e)}const EE=b.createContext(null);EE.displayName="PanelGroupContext";const Qt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},eT=10,ql=b.useLayoutEffect,_p=ER.useId,kx=typeof _p=="function"?_p:()=>null;let xx=0;function tT(e=null){const t=kx(),n=b.useRef(e||t||null);return n.current===null&&(n.current=""+xx++),e??n.current}function l0({children:e,className:t="",collapsedSize:n,collapsible:o,defaultSize:l,forwardedRef:r,id:d,maxSize:E,minSize:h,onCollapse:A,onExpand:R,onResize:T,order:S,style:I,tagName:C="div",..._}){const O=b.useContext(EE);if(O===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:D,expandPanel:U,getPanelSize:H,getPanelStyle:L,groupId:w,isPanelCollapsed:G,reevaluatePanelConstraints:B,registerPanel:j,resizePanel:Q,unregisterPanel:ce}=O,ue=tT(d),te=b.useRef({callbacks:{onCollapse:A,onExpand:R,onResize:T},constraints:{collapsedSize:n,collapsible:o,defaultSize:l,maxSize:E,minSize:h},id:ue,idIsFromProps:d!==void 0,order:S});b.useRef({didLogMissingDefaultSizeWarning:!1}),ql(()=>{const{callbacks:fe,constraints:he}=te.current,M={...he};te.current.id=ue,te.current.idIsFromProps=d!==void 0,te.current.order=S,fe.onCollapse=A,fe.onExpand=R,fe.onResize=T,he.collapsedSize=n,he.collapsible=o,he.defaultSize=l,he.maxSize=E,he.minSize=h,(M.collapsedSize!==he.collapsedSize||M.collapsible!==he.collapsible||M.maxSize!==he.maxSize||M.minSize!==he.minSize)&&B(te.current,M)}),ql(()=>{const fe=te.current;return j(fe),()=>{ce(fe)}},[S,ue,j,ce]),b.useImperativeHandle(r,()=>({collapse:()=>{D(te.current)},expand:fe=>{U(te.current,fe)},getId(){return ue},getSize(){return H(te.current)},isCollapsed(){return G(te.current)},isExpanded(){return!G(te.current)},resize:fe=>{Q(te.current,fe)}}),[D,U,H,G,ue,Q]);const ee=L(te.current,l);return b.createElement(C,{..._,children:e,className:t,id:ue,style:{...ee,...I},[Qt.groupId]:w,[Qt.panel]:"",[Qt.panelCollapsible]:o||void 0,[Qt.panelId]:ue,[Qt.panelSize]:parseFloat(""+ee.flexGrow).toFixed(1)})}const s0=b.forwardRef((e,t)=>b.createElement(l0,{...e,forwardedRef:t}));l0.displayName="Panel";s0.displayName="forwardRef(Panel)";let Xm=null,eh=-1,$o=null;function Px(e,t){if(t){const n=(t&h0)!==0,o=(t&E0)!==0,l=(t&f0)!==0,r=(t&A0)!==0;if(n)return l?"se-resize":r?"ne-resize":"e-resize";if(o)return l?"sw-resize":r?"nw-resize":"w-resize";if(l)return"s-resize";if(r)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function wx(){$o!==null&&(document.head.removeChild($o),Xm=null,$o=null,eh=-1)}function fm(e,t){var n,o;const l=Px(e,t);if(Xm!==l){if(Xm=l,$o===null&&($o=document.createElement("style"),document.head.appendChild($o)),eh>=0){var r;(r=$o.sheet)===null||r===void 0||r.removeRule(eh)}eh=(n=(o=$o.sheet)===null||o===void 0?void 0:o.insertRule(`*{cursor: ${l} !important;}`))!==null&&n!==void 0?n:-1}}function r0(e){return e.type==="keydown"}function c0(e){return e.type.startsWith("pointer")}function u0(e){return e.type.startsWith("mouse")}function fE(e){if(c0(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(u0(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function Gx(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Bx(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function Fx(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:Np(e),b:Np(t)};let o;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),o=e;Ke(o,"Stacking order can only be calculated for elements with a common ancestor");const l={a:pp(gp(n.a)),b:pp(gp(n.b))};if(l.a===l.b){const r=o.childNodes,d={a:n.a.at(-1),b:n.b.at(-1)};let E=r.length;for(;E--;){const h=r[E];if(h===d.a)return 1;if(h===d.b)return-1}}return Math.sign(l.a-l.b)}const zx=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function jx(e){var t;const n=getComputedStyle((t=d0(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function Yx(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||jx(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||zx.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function gp(e){let t=e.length;for(;t--;){const n=e[t];if(Ke(n,"Missing node"),Yx(n))return n}return null}function pp(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Np(e){const t=[];for(;e;)t.push(e),e=d0(e);return t}function d0(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const h0=1,E0=2,f0=4,A0=8,Kx=Gx()==="coarse";let Si=[],Sr=!1,zl=new Map,AE=new Map;const iu=new Set;function Vx(e,t,n,o,l){var r;const{ownerDocument:d}=t,E={direction:n,element:t,hitAreaMargins:o,setResizeHandlerState:l},h=(r=zl.get(d))!==null&&r!==void 0?r:0;return zl.set(d,h+1),iu.add(E),Hh(),function(){var R;AE.delete(e),iu.delete(E);const T=(R=zl.get(d))!==null&&R!==void 0?R:1;if(zl.set(d,T-1),Hh(),T===1&&zl.delete(d),Si.includes(E)){const S=Si.indexOf(E);S>=0&&Si.splice(S,1),nT(),l("up",!0,null)}}}function Wx(e){const{target:t}=e,{x:n,y:o}=fE(e);Sr=!0,aT({target:t,x:n,y:o}),Hh(),Si.length>0&&(Uh("down",e),e.preventDefault(),m0(t)||e.stopImmediatePropagation())}function Am(e){const{x:t,y:n}=fE(e);if(Sr&&e.buttons===0&&(Sr=!1,Uh("up",e)),!Sr){const{target:o}=e;aT({target:o,x:t,y:n})}Uh("move",e),nT(),Si.length>0&&e.preventDefault()}function mm(e){const{target:t}=e,{x:n,y:o}=fE(e);AE.clear(),Sr=!1,Si.length>0&&(e.preventDefault(),m0(t)||e.stopImmediatePropagation()),Uh("up",e),aT({target:t,x:n,y:o}),nT(),Hh()}function m0(e){let t=e;for(;t;){if(t.hasAttribute(Qt.resizeHandle))return!0;t=t.parentElement}return!1}function aT({target:e,x:t,y:n}){Si.splice(0);let o=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(o=e),iu.forEach(l=>{const{element:r,hitAreaMargins:d}=l,E=r.getBoundingClientRect(),{bottom:h,left:A,right:R,top:T}=E,S=Kx?d.coarse:d.fine;if(t>=A-S&&t<=R+S&&n>=T-S&&n<=h+S){if(o!==null&&document.contains(o)&&r!==o&&!r.contains(o)&&!o.contains(r)&&Fx(o,r)>0){let C=o,_=!1;for(;C&&!C.contains(r);){if(Bx(C.getBoundingClientRect(),E)){_=!0;break}C=C.parentElement}if(_)return}Si.push(l)}})}function Rm(e,t){AE.set(e,t)}function nT(){let e=!1,t=!1;Si.forEach(o=>{const{direction:l}=o;l==="horizontal"?e=!0:t=!0});let n=0;AE.forEach(o=>{n|=o}),e&&t?fm("intersection",n):e?fm("horizontal",n):t?fm("vertical",n):wx()}let Tm=new AbortController;function Hh(){Tm.abort(),Tm=new AbortController;const e={capture:!0,signal:Tm.signal};iu.size&&(Sr?(Si.length>0&&zl.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("contextmenu",mm,e),o.addEventListener("pointerleave",Am,e),o.addEventListener("pointermove",Am,e))}),window.addEventListener("pointerup",mm,e),window.addEventListener("pointercancel",mm,e)):zl.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("pointerdown",Wx,e),o.addEventListener("pointermove",Am,e))}))}function Uh(e,t){iu.forEach(n=>{const{setResizeHandlerState:o}=n,l=Si.includes(n);o(e,l,t)})}function Xx(){const[e,t]=b.useState(0);return b.useCallback(()=>t(n=>n+1),[])}function Ke(e,t){if(!e)throw console.error(t),Error(t)}function ns(e,t,n=eT){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function fo(e,t,n=eT){return ns(e,t,n)===0}function kn(e,t,n){return ns(e,t,n)===0}function qx(e,t,n){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++){const l=e[o],r=t[o];if(!kn(l,r,n))return!1}return!0}function dr({panelConstraints:e,panelIndex:t,size:n}){const o=e[t];Ke(o!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:l=0,collapsible:r,maxSize:d=100,minSize:E=0}=o;if(ns(n,E)<0)if(r){const h=(l+E)/2;ns(n,h)<0?n=l:n=E}else n=E;return n=Math.min(d,n),n=parseFloat(n.toFixed(eT)),n}function Vc({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:o,prevLayout:l,trigger:r}){if(kn(e,0))return t;const d=[...t],[E,h]=o;Ke(E!=null,"Invalid first pivot index"),Ke(h!=null,"Invalid second pivot index");let A=0;if(r==="keyboard"){{const T=e<0?h:E,S=n[T];Ke(S,`Panel constraints not found for index ${T}`);const{collapsedSize:I=0,collapsible:C,minSize:_=0}=S;if(C){const O=t[T];if(Ke(O!=null,`Previous layout not found for panel index ${T}`),kn(O,I)){const D=_-O;ns(D,Math.abs(e))>0&&(e=e<0?0-D:D)}}}{const T=e<0?E:h,S=n[T];Ke(S,`No panel constraints found for index ${T}`);const{collapsedSize:I=0,collapsible:C,minSize:_=0}=S;if(C){const O=t[T];if(Ke(O!=null,`Previous layout not found for panel index ${T}`),kn(O,_)){const D=O-I;ns(D,Math.abs(e))>0&&(e=e<0?0-D:D)}}}}{const T=e<0?1:-1;let S=e<0?h:E,I=0;for(;;){const _=t[S];Ke(_!=null,`Previous layout not found for panel index ${S}`);const D=dr({panelConstraints:n,panelIndex:S,size:100})-_;if(I+=D,S+=T,S<0||S>=n.length)break}const C=Math.min(Math.abs(e),Math.abs(I));e=e<0?0-C:C}{let S=e<0?E:h;for(;S>=0&&S<n.length;){const I=Math.abs(e)-Math.abs(A),C=t[S];Ke(C!=null,`Previous layout not found for panel index ${S}`);const _=C-I,O=dr({panelConstraints:n,panelIndex:S,size:_});if(!kn(C,O)&&(A+=C-O,d[S]=O,A.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?S--:S++}}if(qx(l,d))return l;{const T=e<0?h:E,S=t[T];Ke(S!=null,`Previous layout not found for panel index ${T}`);const I=S+A,C=dr({panelConstraints:n,panelIndex:T,size:I});if(d[T]=C,!kn(C,I)){let _=I-C,D=e<0?h:E;for(;D>=0&&D<n.length;){const U=d[D];Ke(U!=null,`Previous layout not found for panel index ${D}`);const H=U+_,L=dr({panelConstraints:n,panelIndex:D,size:H});if(kn(U,L)||(_-=L-U,d[D]=L),kn(_,0))break;e>0?D--:D++}}}const R=d.reduce((T,S)=>S+T,0);return kn(R,100)?d:l}function Zx({layout:e,panelsArray:t,pivotIndices:n}){let o=0,l=100,r=0,d=0;const E=n[0];Ke(E!=null,"No pivot index found"),t.forEach((T,S)=>{const{constraints:I}=T,{maxSize:C=100,minSize:_=0}=I;S===E?(o=_,l=C):(r+=_,d+=C)});const h=Math.min(l,100-r),A=Math.max(o,100-d),R=e[E];return{valueMax:h,valueMin:A,valueNow:R}}function ou(e,t=document){return Array.from(t.querySelectorAll(`[${Qt.resizeHandleId}][data-panel-group-id="${e}"]`))}function R0(e,t,n=document){const l=ou(e,n).findIndex(r=>r.getAttribute(Qt.resizeHandleId)===t);return l??null}function T0(e,t,n){const o=R0(e,t,n);return o!=null?[o,o+1]:[-1,-1]}function S0(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const o=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return o||null}function mE(e,t=document){const n=t.querySelector(`[${Qt.resizeHandleId}="${e}"]`);return n||null}function Qx(e,t,n,o=document){var l,r,d,E;const h=mE(t,o),A=ou(e,o),R=h?A.indexOf(h):-1,T=(l=(r=n[R])===null||r===void 0?void 0:r.id)!==null&&l!==void 0?l:null,S=(d=(E=n[R+1])===null||E===void 0?void 0:E.id)!==null&&d!==void 0?d:null;return[T,S]}function Jx({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:o,panelDataArray:l,panelGroupElement:r,setLayout:d}){b.useRef({didWarnAboutMissingResizeHandle:!1}),ql(()=>{if(!r)return;const E=ou(n,r);for(let h=0;h<l.length-1;h++){const{valueMax:A,valueMin:R,valueNow:T}=Zx({layout:o,panelsArray:l,pivotIndices:[h,h+1]}),S=E[h];if(S!=null){const I=l[h];Ke(I,`No panel data found for index "${h}"`),S.setAttribute("aria-controls",I.id),S.setAttribute("aria-valuemax",""+Math.round(A)),S.setAttribute("aria-valuemin",""+Math.round(R)),S.setAttribute("aria-valuenow",T!=null?""+Math.round(T):"")}}return()=>{E.forEach((h,A)=>{h.removeAttribute("aria-controls"),h.removeAttribute("aria-valuemax"),h.removeAttribute("aria-valuemin"),h.removeAttribute("aria-valuenow")})}},[n,o,l,r]),b.useEffect(()=>{if(!r)return;const E=t.current;Ke(E,"Eager values not found");const{panelDataArray:h}=E,A=S0(n,r);Ke(A!=null,`No group found for id "${n}"`);const R=ou(n,r);Ke(R,`No resize handles found for group id "${n}"`);const T=R.map(S=>{const I=S.getAttribute(Qt.resizeHandleId);Ke(I,"Resize handle element has no handle id attribute");const[C,_]=Qx(n,I,h,r);if(C==null||_==null)return()=>{};const O=D=>{if(!D.defaultPrevented)switch(D.key){case"Enter":{D.preventDefault();const U=h.findIndex(H=>H.id===C);if(U>=0){const H=h[U];Ke(H,`No panel data found for index ${U}`);const L=o[U],{collapsedSize:w=0,collapsible:G,minSize:B=0}=H.constraints;if(L!=null&&G){const j=Vc({delta:kn(L,w)?B-w:w-L,initialLayout:o,panelConstraints:h.map(Q=>Q.constraints),pivotIndices:T0(n,I,r),prevLayout:o,trigger:"keyboard"});o!==j&&d(j)}}break}}};return S.addEventListener("keydown",O),()=>{S.removeEventListener("keydown",O)}});return()=>{T.forEach(S=>S())}},[r,e,t,n,o,l,d])}function Cp(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function I0(e,t){const n=e==="horizontal",{x:o,y:l}=fE(t);return n?o:l}function $x(e,t,n,o,l){const r=n==="horizontal",d=mE(t,l);Ke(d,`No resize handle element found for id "${t}"`);const E=d.getAttribute(Qt.groupId);Ke(E,"Resize handle element has no group id attribute");let{initialCursorPosition:h}=o;const A=I0(n,e),R=S0(E,l);Ke(R,`No group element found for id "${E}"`);const T=R.getBoundingClientRect(),S=r?T.width:T.height;return(A-h)/S*100}function eP(e,t,n,o,l,r){if(r0(e)){const d=n==="horizontal";let E=0;e.shiftKey?E=100:l!=null?E=l:E=10;let h=0;switch(e.key){case"ArrowDown":h=d?0:E;break;case"ArrowLeft":h=d?-E:0;break;case"ArrowRight":h=d?E:0;break;case"ArrowUp":h=d?0:-E;break;case"End":h=100;break;case"Home":h=-100;break}return h}else return o==null?0:$x(e,t,n,o,r)}function tP({panelDataArray:e}){const t=Array(e.length),n=e.map(r=>r.constraints);let o=0,l=100;for(let r=0;r<e.length;r++){const d=n[r];Ke(d,`Panel constraints not found for index ${r}`);const{defaultSize:E}=d;E!=null&&(o++,t[r]=E,l-=E)}for(let r=0;r<e.length;r++){const d=n[r];Ke(d,`Panel constraints not found for index ${r}`);const{defaultSize:E}=d;if(E!=null)continue;const h=e.length-o,A=l/h;o++,t[r]=A,l-=A}return t}function sr(e,t,n){t.forEach((o,l)=>{const r=e[l];Ke(r,`Panel data not found for index ${l}`);const{callbacks:d,constraints:E,id:h}=r,{collapsedSize:A=0,collapsible:R}=E,T=n[h];if(T==null||o!==T){n[h]=o;const{onCollapse:S,onExpand:I,onResize:C}=d;C&&C(o,T),R&&(S||I)&&(I&&(T==null||fo(T,A))&&!fo(o,A)&&I(),S&&(T==null||!fo(T,A))&&fo(o,A)&&S())}})}function Kd(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function aP({defaultSize:e,dragState:t,layout:n,panelData:o,panelIndex:l,precision:r=3}){const d=n[l];let E;return d==null?E=e!=null?e.toPrecision(r):"1":o.length===1?E="1":E=d.toPrecision(r),{flexBasis:0,flexGrow:E,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function nP(e,t=10){let n=null;return(...l)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...l)},t)}}function Op(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function _0(e){return`react-resizable-panels:${e}`}function g0(e){return e.map(t=>{const{constraints:n,id:o,idIsFromProps:l,order:r}=t;return l?o:r?`${r}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function p0(e,t){try{const n=_0(e),o=t.getItem(n);if(o){const l=JSON.parse(o);if(typeof l=="object"&&l!=null)return l}}catch{}return null}function iP(e,t,n){var o,l;const r=(o=p0(e,n))!==null&&o!==void 0?o:{},d=g0(t);return(l=r[d])!==null&&l!==void 0?l:null}function oP(e,t,n,o,l){var r;const d=_0(e),E=g0(t),h=(r=p0(e,l))!==null&&r!==void 0?r:{};h[E]={expandToSizes:Object.fromEntries(n.entries()),layout:o};try{l.setItem(d,JSON.stringify(h))}catch(A){console.error(A)}}function bp({layout:e,panelConstraints:t}){const n=[...e],o=n.reduce((r,d)=>r+d,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(r=>`${r}%`).join(", ")}`);if(!kn(o,100)&&n.length>0)for(let r=0;r<t.length;r++){const d=n[r];Ke(d!=null,`No layout data found for index ${r}`);const E=100/o*d;n[r]=E}let l=0;for(let r=0;r<t.length;r++){const d=n[r];Ke(d!=null,`No layout data found for index ${r}`);const E=dr({panelConstraints:t,panelIndex:r,size:d});d!=E&&(l+=d-E,n[r]=E)}if(!kn(l,0))for(let r=0;r<t.length;r++){const d=n[r];Ke(d!=null,`No layout data found for index ${r}`);const E=d+l,h=dr({panelConstraints:t,panelIndex:r,size:E});if(d!==h&&(l-=h-d,n[r]=h,kn(l,0)))break}return n}const lP=100,Wc={getItem:e=>(Op(Wc),Wc.getItem(e)),setItem:(e,t)=>{Op(Wc),Wc.setItem(e,t)}},Dp={};function N0({autoSaveId:e=null,children:t,className:n="",direction:o,forwardedRef:l,id:r=null,onLayout:d=null,keyboardResizeBy:E=null,storage:h=Wc,style:A,tagName:R="div",...T}){const S=tT(r),I=b.useRef(null),[C,_]=b.useState(null),[O,D]=b.useState([]),U=Xx(),H=b.useRef({}),L=b.useRef(new Map),w=b.useRef(0),G=b.useRef({autoSaveId:e,direction:o,dragState:C,id:S,keyboardResizeBy:E,onLayout:d,storage:h}),B=b.useRef({layout:O,panelDataArray:[],panelDataArrayChanged:!1});b.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),b.useImperativeHandle(l,()=>({getId:()=>G.current.id,getLayout:()=>{const{layout:z}=B.current;return z},setLayout:z=>{const{onLayout:Z}=G.current,{layout:ne,panelDataArray:P}=B.current,X=bp({layout:z,panelConstraints:P.map(se=>se.constraints)});Cp(ne,X)||(D(X),B.current.layout=X,Z&&Z(X),sr(P,X,H.current))}}),[]),ql(()=>{G.current.autoSaveId=e,G.current.direction=o,G.current.dragState=C,G.current.id=S,G.current.onLayout=d,G.current.storage=h}),Jx({committedValuesRef:G,eagerValuesRef:B,groupId:S,layout:O,panelDataArray:B.current.panelDataArray,setLayout:D,panelGroupElement:I.current}),b.useEffect(()=>{const{panelDataArray:z}=B.current;if(e){if(O.length===0||O.length!==z.length)return;let Z=Dp[e];Z==null&&(Z=nP(oP,lP),Dp[e]=Z);const ne=[...z],P=new Map(L.current);Z(e,ne,P,O,h)}},[e,O,h]),b.useEffect(()=>{});const j=b.useCallback(z=>{const{onLayout:Z}=G.current,{layout:ne,panelDataArray:P}=B.current;if(z.constraints.collapsible){const X=P.map(Oe=>Oe.constraints),{collapsedSize:se=0,panelSize:Ee,pivotIndices:Se}=Gl(P,z,ne);if(Ke(Ee!=null,`Panel size not found for panel "${z.id}"`),!fo(Ee,se)){L.current.set(z.id,Ee);const Ue=ur(P,z)===P.length-1?Ee-se:se-Ee,Ae=Vc({delta:Ue,initialLayout:ne,panelConstraints:X,pivotIndices:Se,prevLayout:ne,trigger:"imperative-api"});Kd(ne,Ae)||(D(Ae),B.current.layout=Ae,Z&&Z(Ae),sr(P,Ae,H.current))}}},[]),Q=b.useCallback((z,Z)=>{const{onLayout:ne}=G.current,{layout:P,panelDataArray:X}=B.current;if(z.constraints.collapsible){const se=X.map(be=>be.constraints),{collapsedSize:Ee=0,panelSize:Se=0,minSize:Oe=0,pivotIndices:Ue}=Gl(X,z,P),Ae=Z??Oe;if(fo(Se,Ee)){const be=L.current.get(z.id),_e=be!=null&&be>=Ae?be:Ae,ye=ur(X,z)===X.length-1?Se-_e:_e-Se,Fe=Vc({delta:ye,initialLayout:P,panelConstraints:se,pivotIndices:Ue,prevLayout:P,trigger:"imperative-api"});Kd(P,Fe)||(D(Fe),B.current.layout=Fe,ne&&ne(Fe),sr(X,Fe,H.current))}}},[]),ce=b.useCallback(z=>{const{layout:Z,panelDataArray:ne}=B.current,{panelSize:P}=Gl(ne,z,Z);return Ke(P!=null,`Panel size not found for panel "${z.id}"`),P},[]),ue=b.useCallback((z,Z)=>{const{panelDataArray:ne}=B.current,P=ur(ne,z);return aP({defaultSize:Z,dragState:C,layout:O,panelData:ne,panelIndex:P})},[C,O]),te=b.useCallback(z=>{const{layout:Z,panelDataArray:ne}=B.current,{collapsedSize:P=0,collapsible:X,panelSize:se}=Gl(ne,z,Z);return Ke(se!=null,`Panel size not found for panel "${z.id}"`),X===!0&&fo(se,P)},[]),ee=b.useCallback(z=>{const{layout:Z,panelDataArray:ne}=B.current,{collapsedSize:P=0,collapsible:X,panelSize:se}=Gl(ne,z,Z);return Ke(se!=null,`Panel size not found for panel "${z.id}"`),!X||ns(se,P)>0},[]),fe=b.useCallback(z=>{const{panelDataArray:Z}=B.current;Z.push(z),Z.sort((ne,P)=>{const X=ne.order,se=P.order;return X==null&&se==null?0:X==null?-1:se==null?1:X-se}),B.current.panelDataArrayChanged=!0,U()},[U]);ql(()=>{if(B.current.panelDataArrayChanged){B.current.panelDataArrayChanged=!1;const{autoSaveId:z,onLayout:Z,storage:ne}=G.current,{layout:P,panelDataArray:X}=B.current;let se=null;if(z){const Se=iP(z,X,ne);Se&&(L.current=new Map(Object.entries(Se.expandToSizes)),se=Se.layout)}se==null&&(se=tP({panelDataArray:X}));const Ee=bp({layout:se,panelConstraints:X.map(Se=>Se.constraints)});Cp(P,Ee)||(D(Ee),B.current.layout=Ee,Z&&Z(Ee),sr(X,Ee,H.current))}}),ql(()=>{const z=B.current;return()=>{z.layout=[]}},[]);const he=b.useCallback(z=>{let Z=!1;const ne=I.current;return ne&&window.getComputedStyle(ne,null).getPropertyValue("direction")==="rtl"&&(Z=!0),function(X){X.preventDefault();const se=I.current;if(!se)return()=>null;const{direction:Ee,dragState:Se,id:Oe,keyboardResizeBy:Ue,onLayout:Ae}=G.current,{layout:be,panelDataArray:_e}=B.current,{initialLayout:ge}=Se??{},ye=T0(Oe,z,se);let Fe=eP(X,z,Ee,Se,Ue,se);const Aa=Ee==="horizontal";Aa&&Z&&(Fe=-Fe);const di=_e.map(qi=>qi.constraints),Tn=Vc({delta:Fe,initialLayout:ge??be,panelConstraints:di,pivotIndices:ye,prevLayout:be,trigger:r0(X)?"keyboard":"mouse-or-touch"}),Xi=!Kd(be,Tn);(c0(X)||u0(X))&&w.current!=Fe&&(w.current=Fe,!Xi&&Fe!==0?Aa?Rm(z,Fe<0?h0:E0):Rm(z,Fe<0?f0:A0):Rm(z,0)),Xi&&(D(Tn),B.current.layout=Tn,Ae&&Ae(Tn),sr(_e,Tn,H.current))}},[]),M=b.useCallback((z,Z)=>{const{onLayout:ne}=G.current,{layout:P,panelDataArray:X}=B.current,se=X.map(be=>be.constraints),{panelSize:Ee,pivotIndices:Se}=Gl(X,z,P);Ke(Ee!=null,`Panel size not found for panel "${z.id}"`);const Ue=ur(X,z)===X.length-1?Ee-Z:Z-Ee,Ae=Vc({delta:Ue,initialLayout:P,panelConstraints:se,pivotIndices:Se,prevLayout:P,trigger:"imperative-api"});Kd(P,Ae)||(D(Ae),B.current.layout=Ae,ne&&ne(Ae),sr(X,Ae,H.current))},[]),K=b.useCallback((z,Z)=>{const{layout:ne,panelDataArray:P}=B.current,{collapsedSize:X=0,collapsible:se}=Z,{collapsedSize:Ee=0,collapsible:Se,maxSize:Oe=100,minSize:Ue=0}=z.constraints,{panelSize:Ae}=Gl(P,z,ne);Ae!=null&&(se&&Se&&fo(Ae,X)?fo(X,Ee)||M(z,Ee):Ae<Ue?M(z,Ue):Ae>Oe&&M(z,Oe))},[M]),$=b.useCallback((z,Z)=>{const{direction:ne}=G.current,{layout:P}=B.current;if(!I.current)return;const X=mE(z,I.current);Ke(X,`Drag handle element not found for id "${z}"`);const se=I0(ne,Z);_({dragHandleId:z,dragHandleRect:X.getBoundingClientRect(),initialCursorPosition:se,initialLayout:P})},[]),de=b.useCallback(()=>{_(null)},[]),y=b.useCallback(z=>{const{panelDataArray:Z}=B.current,ne=ur(Z,z);ne>=0&&(Z.splice(ne,1),delete H.current[z.id],B.current.panelDataArrayChanged=!0,U())},[U]),Y=b.useMemo(()=>({collapsePanel:j,direction:o,dragState:C,expandPanel:Q,getPanelSize:ce,getPanelStyle:ue,groupId:S,isPanelCollapsed:te,isPanelExpanded:ee,reevaluatePanelConstraints:K,registerPanel:fe,registerResizeHandle:he,resizePanel:M,startDragging:$,stopDragging:de,unregisterPanel:y,panelGroupElement:I.current}),[j,C,o,Q,ce,ue,S,te,ee,K,fe,he,M,$,de,y]),W={display:"flex",flexDirection:o==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return b.createElement(EE.Provider,{value:Y},b.createElement(R,{...T,children:t,className:n,id:r,ref:I,style:{...W,...A},[Qt.group]:"",[Qt.groupDirection]:o,[Qt.groupId]:S}))}const C0=b.forwardRef((e,t)=>b.createElement(N0,{...e,forwardedRef:t}));N0.displayName="PanelGroup";C0.displayName="forwardRef(PanelGroup)";function ur(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function Gl(e,t,n){const o=ur(e,t),r=o===e.length-1?[o-1,o]:[o,o+1],d=n[o];return{...t.constraints,panelSize:d,pivotIndices:r}}function sP({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:o}){b.useEffect(()=>{if(e||n==null||o==null)return;const l=mE(t,o);if(l==null)return;const r=d=>{if(!d.defaultPrevented)switch(d.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{d.preventDefault(),n(d);break}case"F6":{d.preventDefault();const E=l.getAttribute(Qt.groupId);Ke(E,`No group element found for id "${E}"`);const h=ou(E,o),A=R0(E,t,o);Ke(A!==null,`No resize element found for id "${t}"`);const R=d.shiftKey?A>0?A-1:h.length-1:A+1<h.length?A+1:0;h[R].focus();break}}};return l.addEventListener("keydown",r),()=>{l.removeEventListener("keydown",r)}},[o,e,t,n])}function O0({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:o,id:l,onBlur:r,onClick:d,onDragging:E,onFocus:h,onPointerDown:A,onPointerUp:R,style:T={},tabIndex:S=0,tagName:I="div",...C}){var _,O;const D=b.useRef(null),U=b.useRef({onClick:d,onDragging:E,onPointerDown:A,onPointerUp:R});b.useEffect(()=>{U.current.onClick=d,U.current.onDragging=E,U.current.onPointerDown=A,U.current.onPointerUp=R});const H=b.useContext(EE);if(H===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:L,groupId:w,registerResizeHandle:G,startDragging:B,stopDragging:j,panelGroupElement:Q}=H,ce=tT(l),[ue,te]=b.useState("inactive"),[ee,fe]=b.useState(!1),[he,M]=b.useState(null),K=b.useRef({state:ue});ql(()=>{K.current.state=ue}),b.useEffect(()=>{if(n)M(null);else{const Y=G(ce);M(()=>Y)}},[n,ce,G]);const $=(_=o?.coarse)!==null&&_!==void 0?_:15,de=(O=o?.fine)!==null&&O!==void 0?O:5;b.useEffect(()=>{if(n||he==null)return;const Y=D.current;Ke(Y,"Element ref not attached");let W=!1;return Vx(ce,Y,L,{coarse:$,fine:de},(Z,ne,P)=>{if(!ne){te("inactive");return}switch(Z){case"down":{te("drag"),W=!1,Ke(P,'Expected event to be defined for "down" action'),B(ce,P);const{onDragging:X,onPointerDown:se}=U.current;X?.(!0),se?.();break}case"move":{const{state:X}=K.current;W=!0,X!=="drag"&&te("hover"),Ke(P,'Expected event to be defined for "move" action'),he(P);break}case"up":{te("hover"),j();const{onClick:X,onDragging:se,onPointerUp:Ee}=U.current;se?.(!1),Ee?.(),W||X?.();break}}})},[$,L,n,de,G,ce,he,B,j]),sP({disabled:n,handleId:ce,resizeHandler:he,panelGroupElement:Q});const y={touchAction:"none",userSelect:"none"};return b.createElement(I,{...C,children:e,className:t,id:l,onBlur:()=>{fe(!1),r?.()},onFocus:()=>{fe(!0),h?.()},ref:D,role:"separator",style:{...y,...T},tabIndex:S,[Qt.groupDirection]:L,[Qt.groupId]:w,[Qt.resizeHandle]:"",[Qt.resizeHandleActive]:ue==="drag"?"pointer":ee?"keyboard":void 0,[Qt.resizeHandleEnabled]:!n,[Qt.resizeHandleId]:ce,[Qt.resizeHandleState]:ue})}O0.displayName="PanelResizeHandle";const b0=navigator.userAgent.indexOf("Firefox")>=0,_o="XIVShell Defaults, , sans-serif",rP=3,pe={rulerHeight:30,trackHeight:14,slotPaddingTop:4,damageMarkerHeight:8,skillButtonHeight:28,buffCoverHeight:4,slotPaddingBottom:4,renderSlotHeight:()=>pe.slotPaddingTop+pe.damageMarkerHeight+pe.skillButtonHeight*1.5+pe.buffCoverHeight*rP+pe.slotPaddingBottom,timelineCanvasHeight:(e,t)=>{let n=pe.rulerHeight;return n+=pe.trackHeight*e,n+=pe.renderSlotHeight()*t,t<mi&&(n+=pe.addSlotButtonHeight),n},leftBufferWidth:20,addSlotButtonHeight:20},cP={drawMarkers:!0,drawDamageMarks:!0,drawHealingMarks:!0,drawMPTickMarks:!0,drawBuffIndicators:!0};function uP(e){const t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});return window.URL.createObjectURL(t)}function dP(e){let t="";e.meta?.forEach(o=>{t+="#"+o.toString()+`
`}),e.body.forEach(o=>{for(let l=0;l<o.length;l++)t+=o[l].toString(),l<o.length-1&&(t+=",");t+=`
`});const n=new Blob([t],{type:"text/csv;charset=utf-8"});return window.URL.createObjectURL(n)}var To=(e=>(e.Json="JSON",e.Csv="CSV",e.Png="PNG",e))(To||{});function ol(e){const[t,n]=b.useState({jsonContent:{},csvContent:{body:[]},pngContent:void 0}),o=()=>{const r=e.getContentFn();e.fileFormat==="JSON"?n({jsonContent:r}):e.fileFormat==="CSV"?n({csvContent:r}):e.fileFormat==="PNG"?n({pngContent:r}):console.assert(!1)};let l="";return e.fileFormat==="JSON"?l=uP(t.jsonContent):e.fileFormat==="CSV"?l=dP(t.csvContent):e.fileFormat==="PNG"?l=t.pngContent?.toDataURL()??"":console.assert(!1),c.jsx("a",{style:{color:pt().fileDownload,marginRight:6},href:l,download:e.filename,onClick:()=>o(),onContextMenu:()=>o(),children:`[${e.displayName===void 0?"download":e.displayName}]`})}function hP(e,t=n=>{console.log(n)}){const n=new FileReader;n.onload=function(o){const l=o.target?.result?.toString()??"";let r;try{r=JSON.parse(l)}catch(d){window.alert(g({en:"Parse error! Are you sure this is the correct file? This tool only reads text files in JSON format.",zh:"- JSON"})),console.error(d)}t(r)},n.readAsText(e,"UTF-8")}const We={positionFromTimeAndScale:function(e,t){return e*t*100},timeFromPositionAndScale:function(e,t){return e/(t*100)},displayTime:function(e,t){const n=Math.abs(e),o=Math.floor(n/60),l=n-60*o;return(e<0?"-":"")+o.toString()+":"+(l+ha.epsilon<10?"0":"")+l.toFixed(t).toString()}},EP=function(e){console.log("[asyncFetch] some error occurred")},yp=new Map;function D0(e,t,n=EP){const o=yp.get(e);if(o){t(o);return}const l=new XMLHttpRequest;l.addEventListener("error",n),l.addEventListener("load",r=>{t(l.responseText),yp.set(e,l.responseText)}),l.open("GET",e),l.send()}function xi(e){const t=e.trim();let n=1;e[0]==="-"&&(n=-1,e=e.substring(1));const o=t.indexOf(":");if(o<0)return parseFloat(t);const l=parseInt(t.substring(0,o)),r=parseFloat(t.substring(o+1));return n*(l*60+r)}function is(e){return c.jsx("div",{className:"clickable",onClick:e.onClickFn,style:e.style,children:e.content})}function fP(e){const n={position:"relative",display:"inline-block",verticalAlign:"top",border:"1px solid "+pt().bgHighContrast,borderRadius:4,height:8,top:e.offsetY,width:e.width},o={background:`${e.backgroundColor}`,height:"100%",borderRadius:"inherit",width:`${e.progress*100}%`};return c.jsx("div",{style:n,children:c.jsx("div",{style:o})})}const hr=26;function y0(e){const t=hr-2,[n,o]=sn.useState(void 0);b.useEffect(()=>{let h=e.defaultSelectedIndex;const A=Rt("tabs: "+e.uniqueName);A!==null&&(A==="none"?h=void 0:h=parseInt(A)),o(h)},[e.defaultSelectedIndex,e.uniqueName]);const l=pt(),r=function(h){const R="1px solid "+(h===n?l.bgHighContrast:l.bgMediumContrast),T="1px solid "+l.background;let S=R;(h===n||n===void 0)&&(S=T);const I=h===n?R:T;let C=T,_=T;return h===n?(C=R,_=R):h>0&&(n===void 0||n+1!==h)&&(C=R),{margin:0,display:"inline-block",boxSizing:"border-box",padding:"0 12px",borderBottom:S,borderTop:I,borderLeft:C,borderRight:_,lineHeight:`${t}px`,color:h===n?l.emphasis:l.text,cursor:e.collapsible||h!==n?"pointer":"default"}},d=[],E=[];for(let h=0;h<e.content.length;h++){const A=e.content[h],R=h===n;d.push(c.jsx("span",{style:r(h),onClick:()=>{let S=n;R?e.collapsible&&(S=void 0):S=h,o(S),ft("tabs: "+e.uniqueName,S===void 0?"none":`${S}`)},children:A.titleNode},h));const T={display:R?"block":"none"};e.maxWidth!==void 0&&(T.maxWidth=e.maxWidth),E.push(c.jsx("div",{style:T,children:A.contentNode},h))}return e.collapsible&&n!==void 0&&d.push(c.jsx("span",{onClick:()=>{o(void 0),ft("tabs: "+e.uniqueName,"none")},children:c.jsx(Ux,{style:{marginLeft:16,fontSize:14,cursor:"pointer",position:"relative",top:3}})},d.length)),c.jsxs("div",{style:{position:"relative",...e.style},children:[c.jsx("div",{children:d}),c.jsx("div",{className:e.scrollable?"visibleScrollbar":void 0,style:{display:n===void 0?"none":"block",height:e.height-hr,boxSizing:"border-box",padding:`10px ${b0?15:5}px`,overflowY:e.scrollable?"scroll":"hidden"},children:E})]})}function iT(e){const t=pt(),n=[];for(let o=0;o<e.children.length;o++){const l=e.children[o],r=o<e.children.length-1?e.children[o+1]:void 0;if(n.push(c.jsxs(s0,{className:l.showScrollbar?"visibleScrollbar":"invisibleScrollbar",defaultSize:l.defaultSize,minSize:l.minSize??20,style:{border:l.fullBorder===!0?`1px solid ${t.bgMediumContrast}`:void 0,boxSizing:"border-box",height:e.contentHeight,overflowY:"scroll"},children:[l.title?c.jsx("div",{style:{marginBottom:10},children:c.jsx("b",{children:l.title})}):void 0,l.content]},`column-${o}`)),o<e.children.length-1){const E=l.fullBorder===!0||r!==void 0&&r.fullBorder===!0?{margin:"0 5px"}:{borderLeft:"1px solid "+t.bgMediumContrast,margin:"0 15px 0 10px"};n.push(c.jsx(O0,{style:E},`divider-${o}`))}}return c.jsx(C0,{direction:"horizontal",children:n})}function Pt(e){const t=d=>{e.onChange&&e.onChange(d.target.value)},n=pt(),o=e.fullWidthInput?void 0:e.width??5,l={color:e.style?.color??e.componentColor??n.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+(e.componentColor??n.text),width:e.fullWidthInput?"100%":void 0},r=e.style??{};return c.jsxs("div",{style:{...r,color:e.componentColor},children:[c.jsx("span",{children:e.description}),c.jsx("input",{style:l,size:o,type:"text",value:e.defaultValue,onChange:t,onKeyDown:d=>d.stopPropagation(),autoFocus:e.autoFocus,placeholder:e.placeholder})]})}function AP(e){const t=e.description??"default description",[n,o]=b.useState(e.defaultValue??""),l=r=>{o(r.target.value),e.onChange&&e.onChange(r.target.value),ft("slider: "+e.uniqueName,r.target.value)};return b.useEffect(()=>{let r=n;const d=Rt("slider: "+e.uniqueName);d!==null&&(r=d,o(d)),e.onChange&&e.onChange(r)},[]),c.jsxs("div",{style:{display:"inline-block",...e.style},children:[c.jsx("span",{children:t??""}),c.jsx("input",{size:10,type:"range",value:n,min:.05,max:1,step:.025,onChange:l,style:{position:"relative",outline:"none"}})]})}function v0(e){const t=Rt(`radio: ${e.uniqueName}`)??e.selected??e.options[0][0],[n,o]=b.useState(t);b.useEffect(()=>{e.selected!==void 0&&(o(e.selected),ft(`radio: ${e.uniqueName}`,e.selected),e.onChange(e.selected))},[e.selected]);const l={position:"relative",top:3,marginRight:"0.25em"},r=e.options.map(([d,E])=>c.jsxs("div",{style:l,children:[c.jsx("input",{type:"radio",id:d,name:e.uniqueName,value:d,checked:n===d,onChange:()=>{o(d),ft(`radio: ${e.uniqueName}`,d),e.onChange(d)}}),c.jsxs("label",{htmlFor:d,style:{verticalAlign:"top"},children:[" ",E]})]},d));return c.jsx("div",{style:e.containerStyle,children:r})}function Xc(e){const[t,n]=b.useState(!1);return b.useEffect(()=>{let o=e.defaultChecked??!0;const l=Rt("checked: "+e.uniqueName);l!==null&&(o=parseInt(l)>0),n(o),e.onChange(o)},[]),c.jsxs("div",{style:{marginBottom:5},children:[c.jsx("input",{className:"shellCheckbox",type:"checkbox",onChange:o=>{const l=o.currentTarget.checked;n(l),ft("checked: "+e.uniqueName,l?"1":"0"),e.onChange(l)},checked:t}),c.jsx("span",{children:e.label})]})}function ll(e){const[t,n]=b.useState(e.defaultShow??!1),o=e.autoIndent??!0,l=()=>{const d=!t;n(d),e.onExpand&&d&&e.onExpand(),e.onCollapse&&!d&&e.onCollapse(),ft("exp: "+e.title,(d?1:0).toString())};b.useEffect(()=>{const d=Rt("exp: "+e.title);d!==null&&n(parseInt(d)===1)},[]);const r=o?{margin:10,paddingLeft:6,marginBottom:20}:{};return c.jsxs("div",{style:e.noMargin?{}:{marginTop:10,marginBottom:10},children:[c.jsx(is,{content:c.jsxs("span",{children:[c.jsx("span",{children:t?"- ":"+ "}),e.titleNode??e.title]}),onClickFn:l}),c.jsx("div",{style:{position:"relative",display:t?"block":"none",marginTop:e.titleBodyGap},children:c.jsx("div",{style:r,children:e.content})})]})}function kh(e){const t=b.useRef(null);let n=e.defaultLoadUrl??"";const o=h=>{h.target&&(n=h.target.value)},l=()=>{const h=t.current;if(h&&h.files&&h.files.length>0){const A=h.files[0];hP(A,R=>e.onLoadFn(R)),h.value=""}},r=()=>{const h=function(A){console.log("some error occurred")};D0(n,A=>{try{const R=JSON.parse(A);e.onLoadFn(R)}catch{h()}},A=>{h()})},d=pt(),E={color:d.text,background:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+d.text,width:"30em"};return c.jsxs("div",{children:[c.jsxs("div",{children:[c.jsx("span",{children:e.label??g({en:"Load from file: ",zh:""})}),c.jsx("input",{style:{width:"110px",color:"transparent"},type:"file",ref:t,onChange:l})]}),e.allowLoadFromUrl?c.jsxs("form",{children:[c.jsx("span",{children:g({en:"Load from URL: ",zh:"URL"})}),c.jsx("input",{defaultValue:n,style:E,onChange:o}),c.jsx("span",{children:" "}),c.jsx("button",{type:"submit",onClick:h=>{r(),h.preventDefault()},children:g({en:"load",zh:""})})]}):void 0]})}function Ai(e){const t=pt();return c.jsx("span",{style:{fontSize:11,border:"1px solid "+t.bgHighContrast,borderRadius:2,padding:"1px 4px",background:t.bgLowContrast},children:e.text})}const mP=100;function Be(e){const n={display:"inline-block",position:"relative",width:12,height:12,lineHeight:1,cursor:"help",background:pt().bgHighContrast,borderRadius:6,textAlign:"center",verticalAlign:"middle"},o=b.useRef(0),[l,r]=b.useState(!1);return c.jsxs(KC,{delay:0,open:l,children:[c.jsx("span",{id:`help-${e.topic}`,className:"help-icon global-help-tooltip",style:n,"data-tooltip-offset":4,onMouseEnter:()=>{const d=Date.now();d-o.current>mP&&r(!0),o.current=d},onMouseLeave:()=>r(!1),children:c.jsx("span",{style:{position:"relative",top:-1,color:"white"},children:"?"})}),c.jsx(JC,{container:e.container??document.getElementById("globalHelpTooltipAnchor"),children:c.jsx(t0,{className:"tooltip-positioner",anchor:document.getElementById(`help-${e.topic}`),children:c.jsx(a0,{className:"help-tooltip tooltip",children:e.content})})})]})}const xh="3f";let lu=()=>{},Ka=()=>({isValid:!1,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0}),qc=e=>{e()};const M0=b.createContext(e=>({drop:t=>{},setSelected:t=>{}})),Zl=e=>({borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"}),Ir={width:"1.5%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},qo={width:"12%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},L0={width:"86.5%",textAlign:"left",paddingLeft:"0.3em"},H0={width:"100%",height:"1.6em",userSelect:"none",outline:"none"},U0=e=>({borderTopWidth:"4px",borderTopStyle:"solid",borderColor:e.dropTarget});function qm(e){return(e??0)+1}function RP(e){const t=pt();let n=e.index%2===1?t.timelineEditor.bgAlternateRow:"transparent";e.isSelected&&(n="rgba(151,111,246,0.25)"),e.recordIsDirty&&e.isSelected&&(n=t.editingValid+xh);let o=g({en:"(other)",zh:""});if(e.node.info.type===Ge.Skill){const T=e.node.info.targetCount>1?g({en:` (${e.node.info.targetCount} targets)`,zh:`${e.node.info.targetCount}`}):"";o=e.node.info.skillName?li(e.node.info.skillName)+T:g({en:"(unknown skill)",zh:""})}else if(e.node.info.type===Ge.Wait)o=g({en:"(wait for "+e.node.info.waitDuration.toFixed(3)+"s)",zh:""+e.node.info.waitDuration.toFixed(3)+""});else if(e.node.info.type===Ge.JumpToTimestamp)o=g({en:"(jump to time "+We.displayTime(e.node.info.targetTime,3)+")",zh:" "+We.displayTime(e.node.info.targetTime,3)+""});else if(e.node.info.type===Ge.WaitForMP)o=g({en:"(wait until MP/lucid tick)",zh:"/"});else if(e.node.info.type===Ge.SetResourceEnabled){const T=ze(e.node.info.buffName);o=g({en:"(toggle resource: "+T+")",zh:"BUFF"+T+""})}else e.node.info.type===Ge.Unknown&&(o=e.node.info.skillName);const l=c.jsxs("td",{style:{...L0,...Zl(t)},children:[e.isInvalid?c.jsx("span",{style:{marginRight:6,padding:"0 4px",backgroundColor:t.editingInvalid+xh},children:""}):void 0,c.jsx("span",{children:o})]}),r=e.includeDetails?c.jsx("td",{style:{...Ir,...Zl(t)},children:qm(e.index)}):void 0,d=e.includeDetails?c.jsx("td",{style:{...qo,...Zl(t)},children:We.displayTime(e.usedAt,3)}):void 0,E=b.useContext(xE),h=E.dragTargetIndex===e.index,A=b.useContext(Cu),R=b.useContext(M0)(e.index);return c.jsxs("tr",{style:{...H0,background:n,...h?U0(t):{}},ref:e.refObj??null,draggable:!A.value,onDragStart:T=>{R.setSelected(!0),e.isSelected||p.timeline.onClickTimelineAction(e.index,!1)},onDragLeave:T=>{E.setDragTarget(null,null)},onDrop:T=>{R.drop(T),E.setDragTarget(null,null)},onDragOver:T=>{T.preventDefault();let S=e.usedAt;const I=e.index>0?p.record.actions[e.index-1]:void 0;I?.tmp_endLockTime!==void 0&&e.node.info.type===Ge.Skill&&al(p.game.job,e.node.info.skillName).cdName==="cd_GCD"&&(S=I.tmp_endLockTime-p.gameConfig.countdown),E.setDragTarget(e.index,S)},onClick:T=>{R.setSelected(!0),e.recordIsDirty?p.timeline.onClickTimelineAction(e.index,T.shiftKey):(p.timeline.onClickTimelineAction(e.index,T.shiftKey),e.node.tmp_startLockTime!==void 0&&p.scrollToTime(e.node.tmp_startLockTime))},tabIndex:-1,onKeyDown:e.onKeyDown,children:[r,d,l]})}let oT=()=>{},k0=()=>{};function TP(){const e=pt(),t=b.useRef(null),n=b.useRef(null),[o,l]=b.useState(!1),[r,d]=b.useState(void 0),[E,h]=b.useState(void 0),[,A]=b.useReducer(y=>y+1,0),R=b.useRef(!1),T=b.useRef(void 0);b.useEffect(()=>(lu=()=>{A()},Ka=()=>{const y=p.checkRecordValidity(p.record,0,!0);return d(y),y},qc=y=>{o&&T.current&&(p.record=T.current,p.checkRecordValidity(p.record,0,!0)),y(),l(!1),T.current=p.record,d(p.checkRecordValidity(p.record,0,!0))},oT=()=>{setTimeout(()=>{t.current?.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},k0=()=>{setTimeout(()=>{(p.record.getSelectionLength()===1?t:n).current?.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},d(p.checkRecordValidity(p.record,0,!0)),()=>{lu=()=>{}}),[]);const S=r&&r.isValid,I=y=>{y&&T.current&&(p.record=T.current),l(!1),d(p.checkRecordValidity(p.record,0,!0)),h(void 0)},C=5,_=()=>c.jsx("button",{style:{display:"block",marginTop:10,marginLeft:C},onClick:y=>{R.current=!0,o||console.error("attempted to discard edits while timeline editor was not dirty"),I(!0)},children:g({en:"discard changes",zh:""})}),O=()=>(o||(T.current=p.record,p.record=p.record.getCloneWithSharedConfig(),l(!0)),p.record),D=(y,Y)=>{const W=y?.node,z=y?.index,Z=y?.reason,ne=Ii()==="en",P=(Oe,Ue)=>ne?Oe:Ue;let X=P("(unknown node)","");if(W)if(W.info.type===Ge.Wait)X=P("(Wait)","");else if(W.info.type===Ge.JumpToTimestamp)X=P("(Jump to time)","");else if(W.info.type===Ge.WaitForMP)X=P("(Wait for MP/lucid tick)","/");else if(W.info.type===Ge.SetResourceEnabled){const Oe=ze(W.info.buffName);X=P("(Toggle resource "+Oe+")","BUFF "+Oe+"")}else W.info.type===Ge.Skill?X=W.info.skillName?li(W.info.skillName):P("(unknown skill)",""):W.info.type===Ge.Unknown&&(X=W.info.skillName);let se;const Ee=z!==void 0?r?.skillUseTimes[z]:void 0,Se=Z?.unavailableReasons.map(Vl).join(P("; ",""))??Vl(void 0);if(Y?se=P(`This sequence contains invalid actions! Check action #${qm(z)}: ${X}`,`${qm(z)} ${X}`):se=P(`This action is invalid! ${X}`,` ${X}`),Ee!==void 0){const Oe=We.displayTime(Ee,3);se+=` @ ${Oe}`+P(".","")}return{en:c.jsxs(c.Fragment,{children:[se,c.jsx("br",{}),c.jsx("br",{}),"Reason: ",Se]}),zh:c.jsxs(c.Fragment,{children:[se,c.jsx("br",{}),c.jsx("br",{}),"",Se]})}},U={padding:"0.3em"},H=()=>{if(o)return c.jsxs("div",{children:[c.jsx("div",{style:{...U,backgroundColor:(S?e.editingValid:e.editingInvalid)+xh},children:g(S?{en:"This edited sequence is valid.",zh:""}:D(r?.invalidActions[0],!0))}),c.jsx("button",{style:{display:"block",marginTop:10,marginLeft:C},onClick:y=>{R.current=!0,o?p.applyEditedRecord():console.error("attempted to apply edits while timeline editor was not dirty"),I(!1),p.displayCurrentState()},children:g({en:"apply changes to timeline and save",zh:""})}),_()]});if(S)return c.jsx("div",{style:U,children:g({en:"Timeline is up to date.",zh:""})});{const y=new Map;r?.invalidActions.forEach(ne=>y.set(ne.index,ne));const Y=r?.invalidActions[0];let W=Y,z=!0;const Z=p.record;if(Y!==void 0&&Z.selectionStartIndex!==void 0){const ne=r?.invalidActions.find(X=>Z.isInSelection(X.index)),P=Z.getSelectionLength();P===1&&ne!==void 0?(W=y.get(Z.selectionStartIndex),z=!1):P>1&&ne!==void 0&&(W=ne)}return c.jsx("div",{children:c.jsx("div",{style:{...U,backgroundColor:e.editingInvalid+xh},children:g(D(W,z))})})}},L={display:"block",width:"100%",padding:3},w=y=>{if(p.record.getFirstSelection()){R.current=!0;const Y=O();let W=E;const z=y(Y);z!==void 0&&(W===void 0?W=z:W=Math.min(z,W));const Z=p.checkRecordValidity(Y,W);z!==void 0&&Z.straightenedIfValid?(p.record=Z.straightenedIfValid,h(void 0)):h(W),d(Z),go()}},G=p.undoStack.peekUndoMessage(),B=p.undoStack.peekRedoMessage(),j=c.jsxs("div",{style:{marginBottom:6,flex:1,display:"flex",flexDirection:"column",gap:10},children:[c.jsx("button",{style:L,onClick:y=>w(Y=>(p.undoStack.push(new th(Y.selectionStartIndex,Y.getSelectionLength(),-1)),Y.moveSelected(-1))),children:g({en:"move up",zh:""})}),c.jsx("button",{style:L,onClick:y=>w(Y=>(p.undoStack.push(new th(Y.selectionStartIndex,Y.getSelectionLength(),1)),Y.moveSelected(1))),children:g({en:"move down",zh:""})}),c.jsx("button",{style:L,onClick:y=>w(Y=>(p.undoStack.push(new Er(Y.selectionStartIndex,Y.getSelected().actions,"delete")),Y.deleteSelected())),children:g({en:"delete selected",zh:""})}),c.jsx("button",{style:L,onClick:y=>{const Y=p.record.getSelectionLength();Y>1&&w(W=>{const z=W.selectionStartIndex,Z=W.selectionEndIndex;return p.undoStack.push(new th(Z,1,-(Y-1))),W.selectSingle(Z),W.moveSelected(-(Y-1)),W.selectSingle(z),W.selectUntil(Z),W.selectionStartIndex})},children:g({en:c.jsxs(c.Fragment,{children:["move end of selection",c.jsx("br",{}),"to start of selection"]}),zh:c.jsxs(c.Fragment,{children:["",c.jsx("br",{}),""]})})}),c.jsx("hr",{style:{backgroundColor:e.bgLowContrast,height:2,marginTop:-2,marginBottom:-2,border:0,width:"100%"}}),c.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:6},children:[c.jsx("button",{style:L,onClick:Zm,disabled:p.record.getSelectionLength()===0,children:g({en:"copy ",zh:""})}),c.jsx("button",{style:L,onClick:F0,children:g({en:"paste ",zh:""})})]}),c.jsxs("button",{style:L,onClick:()=>p.undoStack.undo(),disabled:G===void 0,children:[g({en:"undo ",zh:""}),g(G??{en:""})]}),c.jsxs("button",{style:L,onClick:()=>p.undoStack.redo(),disabled:B===void 0,children:[g({en:"redo ",zh:""}),g(B??{en:""})]})]}),Q=y=>{const Y=p.record.selectionStartIndex;Y!==void 0&&(y.key==="Backspace"||y.key==="Delete"?w(z=>(p.undoStack.push(new Er(Y,z.getSelected().actions,"delete")),z.deleteSelected())):(p.handleTimelineKeyboardEvent(y),y.key==="Escape"&&he.setDragTarget(null,null)))},ce=!0,ue=[],te=new Set(r?.invalidActions.map(y=>y.index));p.record.actions.forEach((y,Y)=>{const W=!o&&Y===p.record.selectionStartIndex,z=!o&&Y===p.record.selectionEndIndex;ue.push(c.jsx(RP,{index:Y,node:y,isSelected:p.record.isInSelection(Y),recordIsDirty:o,isInvalid:te.has(Y),usedAt:r?.skillUseTimes[Y]??0,includeDetails:ce,onKeyDown:Q,refObj:W?t:z?n:void 0},Y))});const ee=y=>({drop:Y=>{const W=p.record.selectionStartIndex??0;let z=y-(W??0);z>0&&(z-=p.record.getSelectionLength()),z!==0&&w(Z=>Z.moveSelected(z))},setSelected:Y=>{R.current=Y}}),fe=b.useContext(Cu),he=b.useContext(xE),M=ue.length,K=ee(M),$=he.dragTargetIndex===M;M>0&&ue.push(c.jsxs("tr",{tabIndex:-1,style:{height:"0.8em",background:e.timelineEditor.headerFooter,userSelect:"none",...$?U0(e):{}},draggable:!fe.value,onDragStart:y=>y.preventDefault(),onDragLeave:y=>{he.setDragTarget(null,null)},onDrop:y=>{K.drop(y),he.setDragTarget(null,null)},onDragOver:y=>{y.preventDefault(),he.setDragTarget(M,p.game.getDisplayTime())},children:[c.jsx("td",{style:{border:"none"}}),c.jsx("td",{style:{border:"none"}}),c.jsx("td",{style:{border:"none"}})]},M));const de={backgroundColor:e.timelineEditor.headerFooter};return c.jsx("div",{onClick:y=>{!y.shiftKey&&!R.current&&(p.record.unselectAll(),p.displayCurrentState()),R.current=!1},children:c.jsx(iT,{contentHeight:wT,children:[{content:j,defaultSize:20},{content:c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:Ir.paddingLeft},children:[c.jsxs("table",{style:{position:"relative",width:"100%",borderCollapse:"collapse",borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},children:[c.jsx("thead",{children:c.jsxs("tr",{style:H0,children:[c.jsx("th",{className:"stickyTh",style:{...de,...Ir,...Zl(e)},children:"#"}),c.jsx("th",{className:"stickyTh",style:{...de,...qo,...Zl(e)},children:g({en:"Time",zh:""})}),c.jsx("th",{className:"stickyTh",style:{...de,...L0,...Zl(e)},children:g({en:"Actions",zh:""})})]})}),c.jsx("tbody",{children:c.jsx(M0.Provider,{value:ee,children:ue})})]}),M===0&&c.jsx("span",{style:{paddingLeft:Ir.paddingLeft,fontStyle:"italic"},children:g({en:"No actions to display yet.",zh:""})})]}),defaultSize:40,fullBorder:!0,showScrollbar:!0},{content:H(),defaultSize:40,fullBorder:!0}]})})}const SP=30;class IP{actions;cursor;constructor(){this.cursor=0,this.actions=[]}clear(){this.cursor=0,this.actions=[]}get length(){return this.actions.length}push(t){this.actions.splice(this.cursor,this.actions.length-this.cursor,t),this.actions.length>SP&&this.actions.shift(),this.cursor=this.actions.length}doThenPush(t){t.redo(),this.push(t)}emitLog(...t){}undo(){this.cursor>0?(this.actions[--this.cursor].undo(),this.emitLog("UNDO",this.actions[this.cursor])):this.emitLog("nothing to undo")}redo(){this.cursor<this.actions.length?(this.emitLog("REDO",this.actions[this.cursor]),this.actions[this.cursor++].redo()):this.emitLog("nothing to redo")}peekUndoMessage(){return this.cursor>0?this.actions[this.cursor-1].message:void 0}peekRedoMessage(){return this.cursor<this.actions.length?this.actions[this.cursor].message:void 0}}class gi{message;constructor(t){this.message=t}}function lT(e){return e>0?"actions":"action"}class Bl extends gi{node;index;constructor(t,n){super({en:"add action",zh:""}),this.node=t,this.index=n}undo(){p.record.selectSingle(this.index),p.deleteSelectedSkills()}redo(){p.insertRecordNode(this.node,this.index)}}class th extends gi{startIndex;selectCount;offset;constructor(t,n,o){super({en:`move ${n} ${lT(n)}`,zh:"${selectCount}"}),this.startIndex=t,this.selectCount=n,this.offset=o}undo(){p.record.selectSingle(this.startIndex+this.offset),p.record.selectUntil(this.startIndex+this.selectCount+this.offset-1),p.record.moveSelected(-this.offset),p.autoSave(),Ka()}redo(){p.record.selectSingle(this.startIndex),p.record.selectUntil(this.startIndex+this.selectCount-1),p.record.moveSelected(this.offset),p.autoSave(),Ka()}}class Er extends gi{startIndex;nodes;source;constructor(t,n,o){super({en:`${o} ${n.length} ${lT(n.length)}`,zh:`${o==="delete"?"":""}${n.length}`}),this.startIndex=t,this.nodes=n,this.source=o}undo(){p.insertRecordNodes(this.nodes,this.startIndex)}redo(){p.record.selectSingle(this.startIndex),p.record.selectUntil(this.startIndex+this.nodes.length-1),p.deleteSelectedSkills(),Ka()}}class sT extends gi{nodes;index;source;constructor(t,n,o){super({en:o==="preset"?"add preset sequence":`paste ${t.length} ${lT(t.length)}`,zh:o==="preset"?"":`${t.length}`}),this.nodes=t,this.index=n,this.source=o}undo(){p.record.selectSingle(this.index),p.record.selectUntil(this.index+this.nodes.length-1),p.deleteSelectedSkills()}redo(){p.insertRecordNodes(this.nodes,this.index)}}class _P extends gi{nodes;index;oldConfig;newConfig;constructor(t,n,o,l){super({en:"import from fflogs",zh:"fflogs"}),this.nodes=t,this.index=n,this.oldConfig=o,this.newConfig=l}undo(){p.record.selectSingle(this.index),p.record.selectUntil(this.index+this.nodes.length-1),p.deleteSelectedSkills(),p.setConfigAndRestart(this.oldConfig,!1),p.updateAllDisplay(),p.scrollToTime()}redo(){p.insertRecordNodes(this.nodes,this.index),p.setConfigAndRestart(this.newConfig,!1),p.updateAllDisplay(),p.scrollToTime()}}class gP extends gi{oldIndex;newIndex;constructor(t,n){super({en:"change active slot",zh:""}),this.oldIndex=t,this.newIndex=n}undo(){p.setActiveSlot(this.oldIndex),p.displayCurrentState()}redo(){p.setActiveSlot(this.newIndex),p.displayCurrentState()}}class pP extends gi{deleteIndex;deletedRecord;constructor(t,n){super({en:"delete slot",zh:""}),this.deleteIndex=t,this.deletedRecord=n}undo(){p.timeline.addSlotAtIndex(this.deleteIndex),p.loadBattleRecordFromFile(this.deletedRecord),p.autoSave(),p.displayCurrentState()}redo(){p.timeline.removeSlot(this.deleteIndex),p.displayCurrentState()}}class NP extends gi{oldIndex;constructor(t){super({en:"add slot",zh:""}),this.oldIndex=t}undo(){p.timeline.removeSlot(p.timeline.slots.length-1),p.setActiveSlot(this.oldIndex),p.displayCurrentState()}redo(){p.setActiveSlot(this.oldIndex),p.timeline.addSlot(),p.displayCurrentState()}}class CP extends gi{sourceIndex;constructor(t){super({en:"clone slot",zh:""}),this.sourceIndex=t}undo(){p.timeline.removeSlot(p.timeline.slots.length-1),p.setActiveSlot(this.sourceIndex),p.displayCurrentState()}redo(){p.setActiveSlot(this.sourceIndex),p.cloneActiveSlot(),p.displayCurrentState()}}class OP extends gi{oldConfig;newConfig;oldRecord;constructor(t,n,o){super({en:"change config",zh:""}),this.oldConfig=t,this.newConfig=n,o===void 0&&(t.job!==n.job||t.level!==n.level)&&console.error("config apply w/o reset but job or level changed"),this.oldRecord=o}undo(){this.oldRecord!==void 0?(p.loadBattleRecordFromFile(this.oldRecord),p.autoSave()):p.setConfigAndRestart(this.oldConfig,!1),p.updateAllDisplay(),p.scrollToTime()}redo(){p.setConfigAndRestart(this.newConfig,this.oldRecord!==void 0),p.updateAllDisplay(),p.scrollToTime()}}class bP extends gi{oldRecord;importedRecord;constructor(t,n){super({en:"import from file",zh:""}),this.oldRecord=t,this.importedRecord=n}undo(){p.loadBattleRecordFromFile(this.oldRecord),p.autoSave(),p.displayCurrentState()}redo(){p.loadBattleRecordFromFile(this.importedRecord),p.autoSave(),p.displayCurrentState()}}let x0,P0=[];const w0="",G0=", ",Sm=":";function DP(e){const t=p.record.getSelected().actions,n=p.record.selectionStartIndex;if(n===void 0)return"";let o="";if(e==="plain"){const l=[];t.forEach(d=>l.push(d.toLocalizedString()));const r=Ii()==="zh"?w0:G0;o=l.join(r)}else if(e==="tsv"){const l=[],r=p.checkRecordValidity(p.record,0);t.forEach((d,E)=>l.push([r.skillUseTimes[E+n].toFixed(3),d.targetCount,d.toLocalizedString()].join("	"))),o=l.join(`
`)}else if(e==="discord"){const l=[];t.forEach(r=>{if(r.info.type===Ge.Skill){const d=r.info.skillName;d==="TINCTURE"?l.push(":IntPot:"):d==="SWIFTCAST"?l.push(p.gameConfig.job==="BLM"?":Swift:":":Swiftcast:"):l.push(`:${Ta[d].discordEmote??Ta[d].name.replaceAll(" ","")}:`)}else l.push(r.toLocalizedString())}),o=l.join(" ")}else console.error("invalid clipboard mode",e);return x0=o,P0=t,o}function yP(e){return e==="."||e>="0"&&e<="9"}function B0(e,t){const n=e.toLowerCase(),o=t?.toLowerCase();if(n==="wait mp"||e===""||n==="wait"&&o===" mp"||e===""&&t?.substring(3,5)==="")return tC();const l=e.split(" ");if(!(t!==void 0&&yP(t[0]))){if(l.length===2&&l[0]==="wait"){const r=xi(l[1]);return isNaN(r)?void 0:mr(r)}if(e.startsWith("")){const r=xi(e.substring(3));return isNaN(r)?void 0:mr(r)}if(l.length===2&&l[0]==="jump"){const r=xi(l[1]);return isNaN(r)?void 0:el(r)}if(e.startsWith("")){const r=xi(e.substring(2));return isNaN(r)?void 0:el(r)}if(l.length>=2&&l[0]==="toggle"){const r=Fg(l.slice(1).join(" "));return r!==void 0?km(r):void 0}if(e.startsWith("")){const r=Fg(e.substring(2));return r!==void 0?km(r):void 0}}}function vp(e,t=1){const n=B0(e,void 0);if(n!==void 0)return n;const o=BR(e)??QN.get(e)??JN.get(e);return o!==void 0?Wl(o,t):void 0}function vP(e){if(e===x0)return P0;const t=e.split(`
`),n=[];for(const o of t){const l=o.trimStart();if(o.includes("	")){const r=o.split("	");if(r.length>0){const d=r[r.length-1].trim();let E=1;if(r.length>1){const A=parseInt(r[r.length-2]);isNaN(A)||(E=A)}const h=vp(d,E);h!==void 0&&n.push(h)}}else if(l.length>2&&l[0]===Sm){let r=!0,d="";for(let E=1;E<l.length;E++){const h=l[E];if(r&&(h===Sm||h===" ")){const R=d.indexOf("~");if(R>0&&(d=d.substring(0,R)),d.toLowerCase().endsWith("_ogcd")&&(d=d.substring(0,d.length-5)),d.length!==0)if(d==="IntPot")n.push(Wl("TINCTURE",1));else if(d==="Swift"||d==="Swiftcast")n.push(Wl("SWIFTCAST",1));else{const T=GR.get(p.gameConfig.job).get(d);T!==void 0?n.push(Wl(T)):console.error("unrecognized discord emote",d)}d="",r=!1;continue}if(h===Sm&&d.length===0){r=!0,d="";continue}(d.length>0||h!==" ")&&(d+=h);const A=l.substring(E+1,E+4);if(!r){const R=B0(d,A);R!==void 0&&(n.push(R),d="")}}}else{let r=l.split(G0);r.length<2&&(r=l.split(w0)),r.forEach(d=>{if(d.length>0){const E=vp(d.trim());E!==void 0&&n.push(E)}})}}return n}function Zm(){navigator.clipboard.writeText(DP(p.clipboardMode))}function F0(){p.queuedPastes++,navigator.clipboard.readText().then(e=>{if(e.startsWith("https://")||e.startsWith("www.")||e.startsWith("cn."))return;const t=vP(e);if(t===void 0||t.length===0){console.error("failed to paste parsed clipboard contents:"),console.error(e);return}p.undoStack.doThenPush(new sT(t,p.record.selectionStartIndex??p.record.length,"paste"))}).finally(()=>{p.queuedPastes--,console.assert(p.queuedPastes>=0)})}class ua{name;duration;color;damageFactor;critBonus;dhBonus;job;constructor(t,n,o,l,r,d,E){this.name=t,this.duration=o,this.color=n,this.damageFactor=l,this.critBonus=r,this.dhBonus=d,this.job=E}}const rT=[new ua(k.ArcaneCircle,ut.Pink,20,1.03,0,0,"RPR"),new ua(k.ArmysPaeon,ut.Yellow,45,1,0,.03,"BRD"),new ua(k.BattleLitany,ut.Blue,20,1,.1,0,"DRG"),new ua(k.BattleVoice,ut.Orange,20,1,0,.2,"BRD"),new ua(k.Brotherhood,ut.Orange,20,1.05,0,0,"MNK"),new ua(k.Card_TheBalance,ut.Red,15,1.03,0,0,"AST"),new ua(k.Card_TheSpear,ut.Blue,15,1.06,0,0,"AST"),new ua(k.ChainStratagem,ut.Grey,20,1,.1,0,"SCH"),new ua(k.Devilment,ut.Green,20,1,.2,.2,"DNC"),new ua(k.Divination,ut.Yellow,20,1.06,0,0,"AST"),new ua(k.Dokumori,ut.Purple,21,1.05,0,0,"NIN"),new ua(k.Embolden,ut.Grey,20,1.05,0,0,"RDM"),new ua(k.MagesBallad,ut.Purple,45,1.01,0,0,"BRD"),new ua(k.RadiantFinale1,ut.Purple,20,1.02,0,0,"BRD"),new ua(k.RadiantFinale2,ut.Purple,20,1.04,0,0,"BRD"),new ua(k.RadiantFinale3,ut.Purple,20,1.06,0,0,"BRD"),new ua(k.SearingLight,ut.Blue,20,1.05,0,0,"SMN"),new ua(k.StandardFinish,ut.Yellow,60,1.05,0,0,"DNC"),new ua(k.StarryMuse,ut.Purple,20.5,1.05,0,0,"PCT"),new ua(k.TechnicalFinish,ut.Blue,20,1.05,0,0,"DNC"),new ua(k.WanderersMinuet,ut.Green,45,1,.02,0,"BRD")],z0=new Map;rT.forEach(e=>{z0.set(e.name,e)});let Ph=class{name;info;constructor(t){this.name=t;let n=z0.get(t);n||(n=rT[0],console.error("Buff info not found!")),this.info=n}};const j0=152,Vd=5882,ja=5925,Im={main:ja,spellSpeed:420,skillSpeed:420,criticalHit:3387,directHit:1935,determination:2407,piety:440,tenacity:420},wh={DRK:{main:Vd,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},GNB:{main:Vd,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},PLD:{main:Vd,spellSpeed:420,skillSpeed:420,criticalHit:3242,directHit:1230,determination:2883,piety:440,tenacity:794},WAR:{main:Vd,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},AST:{main:ja,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},SCH:{main:ja,spellSpeed:1221,skillSpeed:420,criticalHit:3484,directHit:852,determination:2314,piety:718,tenacity:420},SGE:{main:ja,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},WHM:{main:ja,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},DRG:{main:ja,spellSpeed:420,skillSpeed:420,criticalHit:3425,directHit:1996,determination:2308,piety:440,tenacity:420},MNK:{main:ja,spellSpeed:420,skillSpeed:968,criticalHit:3487,directHit:1685,determination:2009,piety:440,tenacity:420},NIN:{main:ja,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},RPR:{main:ja,spellSpeed:420,skillSpeed:474,criticalHit:3425,directHit:1942,determination:2308,piety:440,tenacity:420},SAM:{main:ja,spellSpeed:420,skillSpeed:690,criticalHit:3425,directHit:2045,determination:1989,piety:440,tenacity:420},VPR:{main:ja,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},DNC:Im,BRD:Im,MCH:Im,BLM:{main:ja,spellSpeed:978,skillSpeed:420,criticalHit:3456,directHit:1764,determination:1951,piety:440,tenacity:420},RDM:{main:ja,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},SMN:{main:ja,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},PCT:{main:ja,spellSpeed:420,skillSpeed:420,criticalHit:3399,directHit:1764,determination:2566,piety:440,tenacity:420},BLU:{main:1701,spellSpeed:1573,skillSpeed:380,criticalHit:1343,directHit:785,determination:676,piety:340,tenacity:380},NEVER:{main:ja,spellSpeed:420,skillSpeed:420,criticalHit:420,directHit:420,determination:440,piety:440,tenacity:420}};function Qm(e,t=Ze.lvl100){return{job:e,shellVersion:fR.version,level:t??(e==="BLU"?Ze.lvl80:Ze.lvl100),...wh[e],wd:j0,countdown:5,randomSeed:"sup",fps:60,gcdSkillCorrection:0,animationLock:.7,timeTillFirstManaTick:1.2,procMode:on.Never,initialResourceOverrides:[]}}function MP(e){const t=Rt(`defaultPartialConfig: ${e}`);if(t===null)return wh[e];const n=JSON.parse(t);return Object.entries(wh[e]).forEach(([o,l])=>{n[o]===void 0&&(n[o]=l)}),n}const ah=Qm("BLM");class ti{job;shellVersion=fR.version;level;wd;main;spellSpeed;skillSpeed;criticalHit;directHit;determination;piety;tenacity;countdown;randomSeed;fps;gcdSkillCorrection;animationLock;timeTillFirstManaTick;procMode;initialResourceOverrides;legacy_casterTax;constructor(t){this.job=t.job,this.shellVersion=t.shellVersion;const n=ah;this.level=t.level??n.level,this.spellSpeed=t.spellSpeed,this.skillSpeed=t.skillSpeed??n.skillSpeed,this.criticalHit=t.criticalHit??n.criticalHit,this.directHit=t.directHit??n.directHit,this.determination=t.determination??n.determination,this.piety=t.piety??n.piety,this.countdown=t.countdown,this.randomSeed=t.randomSeed,this.fps=t.fps,this.gcdSkillCorrection=t.gcdSkillCorrection,this.animationLock=t.animationLock,this.timeTillFirstManaTick=t.timeTillFirstManaTick,this.procMode=t.procMode,this.initialResourceOverrides=t.initialResourceOverrides.map(o=>{if(o.effectOrTimerEnabled===void 0&&(o.enabled===void 0?o.effectOrTimerEnabled=!0:o.effectOrTimerEnabled=o.enabled),!(o.type in xe||o.type in Kl))if(o.type.toString()==="AstralFire")o.type="ASTRAL_FIRE";else if(o.type.toString()==="UmbralIce")o.type="UMBRAL_ICE";else if(o.type.toString()==="UmbralHeart")o.type="UMBRAL_HEART";else{let l=Object.keys(xe).find(r=>xe[r].name===o.type);l||(l=Object.keys(Kl).find(r=>Kl[r].name===o.type)),l&&(o.type=l)}return new wR(o)}),this.legacy_casterTax=t?.casterTax??0,this.tenacity=t?.tenacity??420,this.main=t?.main??ja,this.wd=t?.wd??j0}adjustedOvertimePotency(t,n){return st.overtimePotency(this.level,n==="sks"?this.skillSpeed:n==="sps"?this.spellSpeed:st.getSubstatBase(this.level),t)}adjustedGCD(t=2.5,n){return this.shellVersion>=Ao.AllaganGcdFormula?st.preTaxGcd(this.level,this.spellSpeed,t,n):st.preTaxGcdLegacy(this.level,this.spellSpeed,t,n)}adjustedSksGCD(t=2.5,n){return this.shellVersion>=Ao.AllaganGcdFormula?st.preTaxGcd(this.level,this.skillSpeed,t,n):st.preTaxGcdLegacy(this.level,this.skillSpeed,t,n)}adjustedCastTime(t,n){return st.preTaxCastTime(this.level,this.spellSpeed,t,n)}adjustedSksCastTime(t,n){return st.preTaxCastTime(this.level,this.skillSpeed,t,n)}getAfterTaxGCD(t){return this.shellVersion<Ao.FpsTax?t:st.afterFpsTax(this.fps,t)+this.gcdSkillCorrection}getAfterTaxCastTime(t){return this.shellVersion<Ao.FpsTax?this.legacy_casterTax+t:st.afterFpsTax(this.fps,t)+st.afterFpsTax(this.fps,iH)+this.gcdSkillCorrection}static getSlidecastWindow(t){return .5}get critRate(){return st.criticalHitRate(this.level,this.criticalHit)}getOverrideStacks(t){return this.initialResourceOverrides.find(n=>n.type===t)?.stacks}savePartialConfig(){const t={};Object.keys(wh[this.job]).forEach(n=>{t[n]=this[n]}),ft(`defaultPartialConfig: ${this.job}`,JSON.stringify(t))}serialized(){return{job:this.job,shellVersion:this.shellVersion,level:this.level,wd:this.wd,main:this.main,spellSpeed:this.spellSpeed,skillSpeed:this.skillSpeed,criticalHit:this.criticalHit,directHit:this.directHit,determination:this.determination,piety:this.piety,tenacity:this.tenacity,countdown:this.countdown,randomSeed:this.randomSeed,casterTax:this.legacy_casterTax,fps:this.fps,gcdSkillCorrection:this.gcdSkillCorrection,animationLock:this.animationLock,timeTillFirstManaTick:this.timeTillFirstManaTick,procMode:this.procMode,initialResourceOverrides:this.initialResourceOverrides.map(t=>t.serialized())}}}function LP(e){const t=pt();return c.jsx("div",{style:{top:1+(e.offset?.y??0),left:e.offset?.x??0,marginRight:8,position:"relative",width:16,height:16,borderRadius:8,display:"inline-block",border:"1px solid "+t.bgHighContrast,verticalAlign:"top"},children:e.color&&c.jsx("div",{style:{backgroundColor:`${e.color}`,position:"absolute",top:2,bottom:2,left:2,right:2,borderRadius:"inherit"}})})}function HP(e){const t=pt(),n=e.heightPx??30,o=e.widthPx??24;let l;return e.imgUrl?l=c.jsx("img",{src:e.imgUrl,alt:"resource img",style:{display:"block",margin:"2px auto",maxWidth:n-4,maxHeight:o-4}}):e.color&&(l=c.jsx("div",{style:{backgroundColor:e.color,position:"absolute",top:3,bottom:3,left:3,right:3}})),c.jsx("div",{style:{display:"inline-block",position:"relative",top:e.offset?.y??0,left:e.offset?.x??0,width:n,height:o,border:"1px solid "+t.bgHighContrast,marginRight:4},children:l})}function nh(e={name:"placeholder",color:"#6cf",value:"0.34/1.00",progress:.34,width:100,hidden:!1}){return c.jsxs("div",{hidden:e.hidden,style:{marginBottom:4,lineHeight:"1.5em"},children:[c.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),c.jsxs("div",{style:{width:200,display:"inline-block"},children:[c.jsx(fP,{backgroundColor:e.color,progress:e.progress,width:e.width,offsetY:4}),c.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.value})]})]})}function Ui(e){const t=e.containerType==="box"||e.items.some(o=>o.imgUrl!==void 0),n=e.items.map((o,l)=>e.containerType==="circle"&&o.imgUrl===void 0?c.jsx(LP,{color:o.color,offset:t?{x:0,y:3}:void 0},l):c.jsx(HP,{color:o.color,imgUrl:o.imgUrl,offset:t?{x:-2,y:0}:void 0,heightPx:o.boxHeightPx,widthPx:o.boxWidthPx},l));return t?c.jsxs("div",{style:{marginBottom:4},children:[c.jsx("div",{style:{display:"inline-block",position:"relative",verticalAlign:"top",top:6,width:108},children:e.name}),c.jsx("div",{style:{display:"inline-block"},children:n}),e.label?c.jsx("div",{style:{marginLeft:6,display:"inline-block",position:"relative",verticalAlign:"top",top:6},children:e.label}):void 0]}):c.jsxs("div",{style:{marginBottom:4,lineHeight:"1.5em"},children:[c.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),c.jsxs("div",{style:{width:200,display:"inline-block"},children:[c.jsx("div",{style:{display:"inline-block"},children:n}),e.label?c.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.label}):void 0]})]})}function Mp(e){return c.jsxs("div",{className:e.className,style:{marginBottom:4,lineHeight:"1.5em"},children:[c.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),c.jsx("div",{style:{width:200,display:"inline-block"},children:c.jsx("div",{style:{display:"inline-block",marginLeft:6,color:e.color},children:e.text})})]})}const os=new Map;function Gt(e,t){os.set(e,`Buffs/${t}`);const n=xe[e].maximumStacks??1;for(let o=2;o<=n;o++)os.set(e+o,`Buffs/${t.replace(xe[e].name,xe[e].name+o)}`)}Object.keys(PN).forEach(e=>{const t=xe[e].name;os.set(e,`Buffs/Role/${t}.png`)});Object.keys(xN).forEach(e=>os.set(e,"Buffs/Role/Tank Limit Break.png"));os.set("SPRINT","Buffs/General/Sprint.png");os.set("TINCTURE","Buffs/General/Tincture.png");function UP(e){let t=e.rscType;e.stacks>1&&(t+=e.stacks);let n;e.rscType==="AUTOS_ENGAGED"||e.rscType==="REAR_POSITIONAL"||e.rscType==="FLANK_POSITIONAL"?n={height:40}:n={height:40};const o=xe[e.rscType].mayNotBeCanceled,l={display:"inline-block",verticalAlign:"top",filter:e.enabled?"none":"grayScale(100%)"},r=c.jsx("img",{style:n,src:"assets/"+os.get(t),alt:e.rscType});return c.jsxs("div",{title:ze(e.rscType),className:e.className+" buff "+e.rscType,children:[o?c.jsx("div",{style:l,children:r}):c.jsx(is,{content:r,style:l,onClickFn:()=>{e.onSelf&&(p.requestToggleBuff(e.rscType,!0),p.updateStatusDisplay(p.game),p.updateSkillButtons(p.game),p.autoSave(),Ka())}}),c.jsx("span",{className:"buff-label",style:{visibility:e.timeRemaining===void 0?"hidden":void 0},children:e.timeRemaining??"0.000"})]})}function Gh(e){const t=e.data,n=[];for(let l=0;l<t.length;l++)n.push(c.jsx(UP,{...t[l]},l));let o={height:54,textAlign:"right",lineHeight:"1em"};return e.style&&(o={...o,...e.style}),c.jsx("div",{style:o,children:n})}function Y0(e){const t=pt(),n=e.data,o=c.jsx(nh,{name:"GCD",color:t.resources.gcdBar,progress:n.gcdReady?0:1-n.timeTillGCDReady/n.gcd,value:n.timeTillGCDReady.toFixed(3),width:100,hidden:n.gcdReady}),l=c.jsx(nh,{name:"casting/taxed",color:n.canMove?t.resources.gcdBar:t.resources.lockBar,progress:n.castLocked?1-n.castLockCountdown/n.castLockTotalDuration:0,value:n.castLockCountdown.toFixed(3),width:100,hidden:!n.castLocked}),r=c.jsx(nh,{name:"using skill",color:t.resources.lockBar,progress:n.animLocked?1-n.animLockCountdown/n.animLockTotalDuration:0,value:n.animLockCountdown.toFixed(3),width:100,hidden:!n.animLocked});return c.jsxs("div",{style:{position:"absolute"},children:[o,l,r]})}function K0(e){const t=e.data.resources.map((o,l)=>{switch(o.kind){case"bar":return c.jsx(nh,{name:o.name,color:o.color,progress:o.progress,value:o.valueString,width:o.widthPx??100,hidden:o.hidden??!1},"resourceDisplay"+l);case"counter":{const r=[];for(let d=0;d<o.maxStacks;d++)r.push({color:d<o.currentStacks?o.color:void 0});return c.jsx(Ui,{containerType:"circle",name:o.name,label:o.valueString??`${o.currentStacks}/${o.maxStacks}`,items:r},"resourceDisplay"+l)}case"paint":{const r=[];for(let E=0;E<o.maxStacks;E++){const h=o.hasComet&&E===o.currentStacks-1?o.cometColor:o.holyColor;r.push({color:E<o.currentStacks?h:void 0,imgUrl:void 0})}const d=`${o.currentStacks}/${o.maxStacks}`;return c.jsx(Ui,{containerType:"circle",name:o.name,label:d,items:r},"resourceDisplay"+l)}case"dance":{const r=o.currentStacks,d=[o.emboiteColor,o.entrechatColor,o.jeteColor,o.pirouetteColor],E=[];for(let A=0;A<o.maxStacks;A++)E.push({color:A<r?d[A]:void 0});const h=`${r}/${o.maxStacks}`;return c.jsx(Ui,{containerType:"circle",name:o.name,label:h,items:E},"resourceDisplay"+l)}case"sen":{const r=[{present:o.hasSetsu,color:o.setsuColor,name:"setsu"},{present:o.hasGetsu,color:o.getsuColor,name:"getsu"},{present:o.hasKa,color:o.kaColor,name:"ka"}],d=c.jsx(Be,{topic:"senExplanation",content:g({en:"from left to right: setsu (yukikaze), getsu (gekko/mangetsu), ka (kasha/oka)",zh:"//"})});return c.jsx(Ui,{name:c.jsxs(c.Fragment,{children:[o.name," ",d]}),label:r.filter(E=>E.present).map(E=>E.name).join("+"),containerType:"circle",items:r.map(E=>({color:E.present?E.color:void 0}))},"resourceDisplay"+l)}case"coda":{const r=[{present:o.hasWanderers,color:o.wanderersColor},{present:o.hasMages,color:o.magesColor},{present:o.hasArmys,color:o.armysColor}],d=c.jsx(Be,{topic:"codaExplanation",content:g({en:"from left to right: wanderer's coda, mage's coda, army's coda"})});return c.jsx(Ui,{name:c.jsxs(c.Fragment,{children:[o.name," ",d]}),containerType:"circle",items:r.map(E=>({color:E.present?E.color:void 0}))},"resourceDisplay"+l)}case"attunement":{const r=[{gem:o.ruby,color:o.rubyColor},{gem:o.topaz,color:o.topazColor},{gem:o.emerald,color:o.emeraldColor}];return c.jsxs("div",{children:[c.jsx(Ui,{name:o.aetherName,containerType:"circle",items:r.map(d=>({color:d.gem?d.color:void 0}))}),c.jsx(Mp,{name:o.attunementName,text:o.attunementCount.toString()+(o.attunementCount>0?` | ${o.timeRemaining.toFixed(3)}`:"")})]},"resourceDisplay"+l)}case"nadi":return c.jsx("div",{children:c.jsx(Ui,{name:o.name,label:o.label,containerType:"circle",items:[{color:o.lunar?o.lunarColor:void 0},{color:o.solar?o.solarColor:void 0}]})},"resourceDisplay"+l);case"beast":{const r=new Array(3).map(d=>({color:void 0}));return o.chakras.map((d,E)=>{r[E]={color:d==="opo"?o.opoColor:d==="raptor"?o.raptorColor:d==="coeurl"?o.coeurlColor:void 0}}),c.jsx("div",{children:c.jsx(Ui,{name:o.name,label:o.label,containerType:"circle",items:r})},"resourceDisplay"+l)}case"chakra":{const r=o.value>o.wrapCount,d=r?o.value%o.wrapCount:o.value,E=new Array(o.wrapCount);for(let h=0;h<o.wrapCount;h++)E[h]={color:r?h+1>d?o.regularColor:o.overflowColor:h+1>d?void 0:o.regularColor};return c.jsx("div",{children:c.jsx(Ui,{name:o.name,label:o.label,containerType:"circle",items:E})},"resourceDisplay"+l)}case"arcana":{const r=o.activeSlots.map((d,E)=>{const h=E===o.activeSlots.length-1?18:20,A=E===o.activeSlots.length-1?16:20;return{color:d?o.currentArcanaColor:void 0,boxHeightPx:h,boxWidthPx:A}});return c.jsx("div",{children:c.jsx(Ui,{name:o.name,containerType:"box",items:r})},"resourceDisplay"+l)}default:return c.jsx(Mp,{name:o.name,text:o.text,color:o.color},"resourceDisplay"+l)}});let n={textAlign:"left",minHeight:"13.5em"};return e.style&&(n={...n,...e.style}),c.jsx("div",{style:n,children:t})}let V0=(e,t)=>{};class kP extends sn.Component{state;static contextType=Ea;constructor(t){super(t),this.state={time:0,resources:[],enemyBuffs:[],selfBuffs:[],level:100,layoutFn:n=>c.jsx("div",{})},V0=(n,o)=>{const l=n(Gn(this.context));this.setState({layoutFn:o,...l})}}componentDidMount(){p.updateStatusDisplay(p.game)}render(){return c.jsxs("div",{style:{position:"relative",textAlign:"left",margin:"8px 0"},children:[c.jsx("div",{style:{position:"absolute",top:-8,right:0,zIndex:1},children:c.jsx(Be,{topic:"mainControlRegion",content:c.jsx("div",{className:"toolTip",children:g({en:c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"paragraph",children:[c.jsx("span",{style:{color:"lightgray"},children:"grey"})," border: not focused"]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"mediumpurple"},children:"purple"})," border: up-to-date, receiving input"]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"mediumseagreen"},children:"green"})," border: real-time"]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"darkorange"},children:"orange"})," border: viewing historical state, receiving input"]})]}),zh:c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"paragraph",children:[c.jsx("span",{style:{color:"lightgray"},children:""}),""]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"mediumpurple"},children:""}),""]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"mediumseagreen"},children:""}),""]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"darkorange"},children:""}),""]})]}),ja:c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"paragraph",children:[c.jsx("span",{style:{color:"lightgray"},children:""})," : "]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"mediumpurple"},children:""})," : "]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"mediumseagreen"},children:""})," : "]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"darkorange"},children:""})," : "]})]})})})})}),this.state.layoutFn(this.state)]})}}class Yt{state;constructor(t){this.state=t}makeCommonTimer(t,n=!0){const o=this.state.resources.timeTillReady(t),l=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:l.enabled,stacks:l.availableAmount(),timeRemaining:o.toFixed(3),className:l.availableAmountIncludingDisabled()>0?"":"hidden"}}makeToggleableTimer(t,n=!0){const o=this.state.resources.timeTillReady(t),l=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:l.enabled,stacks:l.availableAmount(),timeRemaining:o.toFixed(3),className:l.availableAmountIncludingDisabled()>0?"":"hidden"}}makeCommonTimerless(t,n=!0){return{rscType:t,onSelf:n,enabled:!0,stacks:this.state.resources.get(t).availableAmount(),className:this.state.hasResourceAvailable(t)?"":"hidden"}}makeToggleableTimerless(t,n=!0){const o=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:o.enabled,stacks:o.availableAmount(),className:o.availableAmountIncludingDisabled()>0?"":"hidden"}}jobSpecificOtherTargetedBuffViewProps(){return[]}getAllOtherTargetedBuffViewProps(){const t=this.state.job,n=[];return rt[t].role==="TANK"&&n.push(this.makeCommonTimer("REPRISAL",!1)),rt[t].role==="MELEE"&&n.push(this.makeCommonTimer("FEINT",!1)),rt[t].role==="CASTER"&&n.push(this.makeCommonTimer("ADDLE",!1)),[...this.jobSpecificOtherTargetedBuffViewProps(),...n]}jobSpecificSelfTargetedBuffViewProps(){return[]}getAllSelfTargetedBuffViewProps(){const t=this.state.job,n=this.state.resources,o=[];if(rt[t].role==="TANK"){o.push(...["RAMPART","SHIELD_WALL","STRONGHOLD"].map(r=>this.makeCommonTimer(r)));const l=rt[t].limitBreakBuff??"UNKNOWN";l&&o.push(this.makeCommonTimer(l))}return rt[t].role==="MELEE"&&o.push(...["TRUE_NORTH","BLOODBATH"].map(l=>this.makeCommonTimer(l))),["TANK","MELEE","RANGED"].includes(rt[t].role)&&o.push(this.makeCommonTimer("ARMS_LENGTH")),["HEALER","CASTER"].includes(rt[t].role)&&o.push(...["SWIFTCAST","LUCID_DREAMING","SURECAST"].map(l=>this.makeCommonTimer(l))),o.push(this.makeCommonTimer("TINCTURE"),this.makeCommonTimer("SPRINT")),rt[t].role==="MELEE"&&o.push(...["REAR_POSITIONAL","FLANK_POSITIONAL"].map(l=>({rscType:l,onSelf:!0,enabled:n.get(l).enabled,stacks:1,className:""}))),(rt[t].role==="TANK"||rt[t].role==="MELEE")&&o.push(...["AUTOS_ENGAGED"].map(l=>({rscType:l,onSelf:!0,enabled:n.get(l).available(1),stacks:1,className:""}))),[...this.jobSpecificSelfTargetedBuffViewProps(),...o]}jobSpecificResourceViewProps(t){return[]}getAllResourceViewProps(t){if(!rt[this.state.job].usesMp)return this.jobSpecificResourceViewProps(t);const n=this.state.resources,o=n.timeTillReady("MANA"),l=n.get("MANA").availableAmount();return[{kind:"bar",name:"MP",color:t.resources.mana,progress:l/1e4,valueString:Math.floor(l)+"/10000"},{kind:"bar",name:g({en:"MP tick",zh:"",ja:"MP"}),color:t.resources.manaTick,progress:1-o/3,valueString:(3-o).toFixed(3)+"/3"},...this.jobSpecificResourceViewProps(t)]}statusLayoutFn(t){return c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[c.jsxs("span",{style:{display:"block",marginBottom:10},children:[g({en:"time: ",zh:"",ja:""}),`${We.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?c.jsx(K0,{data:{level:t.level,resources:t.resources}}):void 0]}),c.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?c.jsx(Y0,{data:t.resourceLocks}):void 0,c.jsx(Gh,{data:t.enemyBuffs,style:{marginBottom:"3em"}}),c.jsx(Gh,{data:t.selfBuffs})]})]})}}var ih={exports:{}},xP=ih.exports,Lp;function PP(){return Lp||(Lp=1,function(e){(function(t,n,o){function l(h){var A=this,R=E();A.next=function(){var T=2091639*A.s0+A.c*23283064365386963e-26;return A.s0=A.s1,A.s1=A.s2,A.s2=T-(A.c=T|0)},A.c=1,A.s0=R(" "),A.s1=R(" "),A.s2=R(" "),A.s0-=R(h),A.s0<0&&(A.s0+=1),A.s1-=R(h),A.s1<0&&(A.s1+=1),A.s2-=R(h),A.s2<0&&(A.s2+=1),R=null}function r(h,A){return A.c=h.c,A.s0=h.s0,A.s1=h.s1,A.s2=h.s2,A}function d(h,A){var R=new l(h),T=A&&A.state,S=R.next;return S.int32=function(){return R.next()*4294967296|0},S.double=function(){return S()+(S()*2097152|0)*11102230246251565e-32},S.quick=S,T&&(typeof T=="object"&&r(T,R),S.state=function(){return r(R,{})}),S}function E(){var h=4022871197,A=function(R){R=String(R);for(var T=0;T<R.length;T++){h+=R.charCodeAt(T);var S=.02519603282416938*h;h=S>>>0,S-=h,S*=h,h=S>>>0,S-=h,h+=S*4294967296}return(h>>>0)*23283064365386963e-26};return A}n&&n.exports?n.exports=d:this.alea=d})(xP,e)}(ih)),ih.exports}var oh={exports:{}},wP=oh.exports,Hp;function GP(){return Hp||(Hp=1,function(e){(function(t,n,o){function l(E){var h=this,A="";h.x=0,h.y=0,h.z=0,h.w=0,h.next=function(){var T=h.x^h.x<<11;return h.x=h.y,h.y=h.z,h.z=h.w,h.w^=h.w>>>19^T^T>>>8},E===(E|0)?h.x=E:A+=E;for(var R=0;R<A.length+64;R++)h.x^=A.charCodeAt(R)|0,h.next()}function r(E,h){return h.x=E.x,h.y=E.y,h.z=E.z,h.w=E.w,h}function d(E,h){var A=new l(E),R=h&&h.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=A.next,T.quick=T,R&&(typeof R=="object"&&r(R,A),T.state=function(){return r(A,{})}),T}n&&n.exports?n.exports=d:this.xor128=d})(wP,e)}(oh)),oh.exports}var lh={exports:{}},BP=lh.exports,Up;function FP(){return Up||(Up=1,function(e){(function(t,n,o){function l(E){var h=this,A="";h.next=function(){var T=h.x^h.x>>>2;return h.x=h.y,h.y=h.z,h.z=h.w,h.w=h.v,(h.d=h.d+362437|0)+(h.v=h.v^h.v<<4^(T^T<<1))|0},h.x=0,h.y=0,h.z=0,h.w=0,h.v=0,E===(E|0)?h.x=E:A+=E;for(var R=0;R<A.length+64;R++)h.x^=A.charCodeAt(R)|0,R==A.length&&(h.d=h.x<<10^h.x>>>4),h.next()}function r(E,h){return h.x=E.x,h.y=E.y,h.z=E.z,h.w=E.w,h.v=E.v,h.d=E.d,h}function d(E,h){var A=new l(E),R=h&&h.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=A.next,T.quick=T,R&&(typeof R=="object"&&r(R,A),T.state=function(){return r(A,{})}),T}n&&n.exports?n.exports=d:this.xorwow=d})(BP,e)}(lh)),lh.exports}var sh={exports:{}},zP=sh.exports,kp;function jP(){return kp||(kp=1,function(e){(function(t,n,o){function l(E){var h=this;h.next=function(){var R=h.x,T=h.i,S,I;return S=R[T],S^=S>>>7,I=S^S<<24,S=R[T+1&7],I^=S^S>>>10,S=R[T+3&7],I^=S^S>>>3,S=R[T+4&7],I^=S^S<<7,S=R[T+7&7],S=S^S<<13,I^=S^S<<9,R[T]=I,h.i=T+1&7,I};function A(R,T){var S,I=[];if(T===(T|0))I[0]=T;else for(T=""+T,S=0;S<T.length;++S)I[S&7]=I[S&7]<<15^T.charCodeAt(S)+I[S+1&7]<<13;for(;I.length<8;)I.push(0);for(S=0;S<8&&I[S]===0;++S);for(S==8?I[7]=-1:I[S],R.x=I,R.i=0,S=256;S>0;--S)R.next()}A(h,E)}function r(E,h){return h.x=E.x.slice(),h.i=E.i,h}function d(E,h){E==null&&(E=+new Date);var A=new l(E),R=h&&h.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=A.next,T.quick=T,R&&(R.x&&r(R,A),T.state=function(){return r(A,{})}),T}n&&n.exports?n.exports=d:this.xorshift7=d})(zP,e)}(sh)),sh.exports}var rh={exports:{}},YP=rh.exports,xp;function KP(){return xp||(xp=1,function(e){(function(t,n,o){function l(E){var h=this;h.next=function(){var R=h.w,T=h.X,S=h.i,I,C;return h.w=R=R+1640531527|0,C=T[S+34&127],I=T[S=S+1&127],C^=C<<13,I^=I<<17,C^=C>>>15,I^=I>>>12,C=T[S]=C^I,h.i=S,C+(R^R>>>16)|0};function A(R,T){var S,I,C,_,O,D=[],U=128;for(T===(T|0)?(I=T,T=null):(T=T+"\0",I=0,U=Math.max(U,T.length)),C=0,_=-32;_<U;++_)T&&(I^=T.charCodeAt((_+32)%T.length)),_===0&&(O=I),I^=I<<10,I^=I>>>15,I^=I<<4,I^=I>>>13,_>=0&&(O=O+1640531527|0,S=D[_&127]^=I+O,C=S==0?C+1:0);for(C>=128&&(D[(T&&T.length||0)&127]=-1),C=127,_=4*128;_>0;--_)I=D[C+34&127],S=D[C=C+1&127],I^=I<<13,S^=S<<17,I^=I>>>15,S^=S>>>12,D[C]=I^S;R.w=O,R.X=D,R.i=C}A(h,E)}function r(E,h){return h.i=E.i,h.w=E.w,h.X=E.X.slice(),h}function d(E,h){E==null&&(E=+new Date);var A=new l(E),R=h&&h.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=A.next,T.quick=T,R&&(R.X&&r(R,A),T.state=function(){return r(A,{})}),T}n&&n.exports?n.exports=d:this.xor4096=d})(YP,e)}(rh)),rh.exports}var ch={exports:{}},VP=ch.exports,Pp;function WP(){return Pp||(Pp=1,function(e){(function(t,n,o){function l(E){var h=this,A="";h.next=function(){var T=h.b,S=h.c,I=h.d,C=h.a;return T=T<<25^T>>>7^S,S=S-I|0,I=I<<24^I>>>8^C,C=C-T|0,h.b=T=T<<20^T>>>12^S,h.c=S=S-I|0,h.d=I<<16^S>>>16^C,h.a=C-T|0},h.a=0,h.b=0,h.c=-1640531527,h.d=1367130551,E===Math.floor(E)?(h.a=E/4294967296|0,h.b=E|0):A+=E;for(var R=0;R<A.length+20;R++)h.b^=A.charCodeAt(R)|0,h.next()}function r(E,h){return h.a=E.a,h.b=E.b,h.c=E.c,h.d=E.d,h}function d(E,h){var A=new l(E),R=h&&h.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=A.next,T.quick=T,R&&(typeof R=="object"&&r(R,A),T.state=function(){return r(A,{})}),T}n&&n.exports?n.exports=d:this.tychei=d})(VP,e)}(ch)),ch.exports}var uh={exports:{}};const XP={},qP=Object.freeze(Object.defineProperty({__proto__:null,default:XP},Symbol.toStringTag,{value:"Module"})),ZP=jv(qP);var QP=uh.exports,wp;function JP(){return wp||(wp=1,function(e){(function(t,n,o){var l=256,r=6,d=52,E="random",h=o.pow(l,r),A=o.pow(2,d),R=A*2,T=l-1,S;function I(L,w,G){var B=[];w=w==!0?{entropy:!0}:w||{};var j=D(O(w.entropy?[L,H(n)]:L??U(),3),B),Q=new C(B),ce=function(){for(var ue=Q.g(r),te=h,ee=0;ue<A;)ue=(ue+ee)*l,te*=l,ee=Q.g(1);for(;ue>=R;)ue/=2,te/=2,ee>>>=1;return(ue+ee)/te};return ce.int32=function(){return Q.g(4)|0},ce.quick=function(){return Q.g(4)/4294967296},ce.double=ce,D(H(Q.S),n),(w.pass||G||function(ue,te,ee,fe){return fe&&(fe.S&&_(fe,Q),ue.state=function(){return _(Q,{})}),ee?(o[E]=ue,te):ue})(ce,j,"global"in w?w.global:this==o,w.state)}function C(L){var w,G=L.length,B=this,j=0,Q=B.i=B.j=0,ce=B.S=[];for(G||(L=[G++]);j<l;)ce[j]=j++;for(j=0;j<l;j++)ce[j]=ce[Q=T&Q+L[j%G]+(w=ce[j])],ce[Q]=w;(B.g=function(ue){for(var te,ee=0,fe=B.i,he=B.j,M=B.S;ue--;)te=M[fe=T&fe+1],ee=ee*l+M[T&(M[fe]=M[he=T&he+te])+(M[he]=te)];return B.i=fe,B.j=he,ee})(l)}function _(L,w){return w.i=L.i,w.j=L.j,w.S=L.S.slice(),w}function O(L,w){var G=[],B=typeof L,j;if(w&&B=="object")for(j in L)try{G.push(O(L[j],w-1))}catch{}return G.length?G:B=="string"?L:L+"\0"}function D(L,w){for(var G=L+"",B,j=0;j<G.length;)w[T&j]=T&(B^=w[T&j]*19)+G.charCodeAt(j++);return H(w)}function U(){try{var L;return S&&(L=S.randomBytes)?L=L(l):(L=new Uint8Array(l),(t.crypto||t.msCrypto).getRandomValues(L)),H(L)}catch{var w=t.navigator,G=w&&w.plugins;return[+new Date,t,G,t.screen,H(n)]}}function H(L){return String.fromCharCode.apply(0,L)}if(D(o.random(),n),e.exports){e.exports=I;try{S=ZP}catch{}}else o["seed"+E]=I})(typeof self<"u"?self:QP,[],Math)}(uh)),uh.exports}var _m,Gp;function $P(){if(Gp)return _m;Gp=1;var e=PP(),t=GP(),n=FP(),o=jP(),l=KP(),r=WP(),d=JP();return d.alea=e,d.xor128=t,d.xorwow=n,d.xorshift7=o,d.xor4096=l,d.tychei=r,_m=d,_m}var ew=$P();const Bp=NN(ew);class Kt{config;rng;nonProcRng;lucidTickOffset;dotTickOffset;hotTickOffset;time;resources;cooldowns;eventsQueue;skillsList;displayedSkills;autoAttackDelay;overTimeEffectGroups=[];dotResources=[];hotResources=[];excludedDoTs=[];excludedHoTs=[];fullTimeDoTs=[];#e=[];#t=[];dotSkills=[];hotSkills=[];#a=new Map;#n=new Map;constructor(t){this.config=t,this.rng=Bp(t.randomSeed),this.nonProcRng=Bp(t.randomSeed+"_nonProcs"),this.lucidTickOffset=this.nonProcRng()*3,this.dotTickOffset=this.nonProcRng()*3,this.hotTickOffset=this.nonProcRng()*3,this.time=0,this.resources=new _H(this),this.cooldowns=new IH(this),Bi(this.job).forEach((o,l)=>{o.isCoolDown?this.cooldowns.set(new Le(l,o.cdPerStack,o.maxStacks,o.maxStacks)):this.resources.set(new Wa(l,o.maxValue,o.defaultValue,o.warnOnOvercap))});let n=2.5;switch(rt[this.job].role){case"TANK":case"MELEE":case"RANGED":n=t.adjustedSksGCD();break;case"HEALER":case"CASTER":n=t.adjustedGCD();break}this.cooldowns.set(new Le("cd_GCD",t.getAfterTaxGCD(n),1,1)),this.resources.set(new Wa("MOVEMENT",1,1)),this.resources.set(new Wa("NOT_ANIMATION_LOCKED",1,1)),this.resources.set(new Wa("NOT_CASTER_TAXED",1,1)),this.resources.set(new Wa("IN_COMBAT",1,0)),this.cooldowns.set(new Le("NEVER",0,0,0)),this.eventsQueue=[],this.skillsList=new CH(this),this.displayedSkills=new OH(this.job,t.level),this.autoAttackDelay=2.5}get statusPropsGenerator(){return new Yt(this)}get job(){return this.config.job}get partySize(){return this.resources.get("PARTY_SIZE").availableAmount()}registerRecurringEvents(t=[],n=[]){const o=this;{const E=()=>{const h=this.resources.get("MANA"),A=this.captureManaRegenAmount();h.gain(A);const R=h.availableAmount();p.reportManaTick(o.time,"+"+A+" (MP="+R+")"),this.resources.addResourceEvent({rscType:"MANA",name:"mana tick",delay:3,fnOnRsc:T=>{E()},tags:[nn.MpTick,nn.ManaGain]})};this.resources.addResourceEvent({rscType:"MANA",name:"initial mana tick",delay:this.config.timeTillFirstManaTick,fnOnRsc:E,tags:[nn.MpTick,nn.ManaGain]})}const l=()=>{const E=this.resources.get("LUCID_DREAMING");if(E.available(1)&&(E.tickCount++,!(this.job==="BLM"&&this.hasResourceAvailable("ASTRAL_FIRE")))){const A=this.resources.get("MANA");A.gain(550);let R="+550";if(console.assert(E.node!==void 0),E.node){let T="??";E.node.tmp_startLockTime&&(T=(E.node.tmp_startLockTime-this.config.countdown).toFixed(3)),R+=" {skill}@"+T,R+=" ("+E.tickCount+"/7)"}R+=" (MP="+A.availableAmount()+")",p.reportLucidTick(this.time,R)}const h=new Ne("lucid tick",3,()=>{l()});h.addTag(nn.LucidTick),E.available(1)&&E.pendingChange&&E.pendingChange.timeTillEvent>=3&&h.addTag(nn.ManaGain),this.addEvent(h)};if([...si,...ri].includes(this.job)){let E=this.config.timeTillFirstManaTick+this.lucidTickOffset;for(;E>3;)E-=3;const h=new Ne("initial lucid tick",E,l);h.addTag(nn.LucidTick),this.addEvent(h)}const r=()=>{this.dotResources.filter(E=>!this.excludedDoTs.includes(E)).forEach(E=>this.handleDoTTick(E)),this.getDisplayTime()>=0&&p.reportDotTick(this.time),this.addEvent(new Ne("DoT tick",3,()=>{r()}))},d=()=>{this.hotResources.filter(E=>!this.excludedHoTs.includes(E)).forEach(E=>this.handleHoTTick(E)),this.getDisplayTime()>=0&&p.reportHotTick(this.time),this.addEvent(new Ne("HoT tick",3,()=>{d()}))};if(t.forEach(E=>{E.groupedEffects.forEach(h=>{let A=this.dotResources,R=this.#e,T=this.#a,S=this.excludedDoTs;E.isHealing&&(A=this.hotResources,R=this.#t,T=this.#n,S=this.excludedHoTs),A.includes(h.effectName)?console.assert(!1,`${h.effectName} was registered as an over time effect multiple times for ${this.job}`):(A.push(h.effectName),h.appliedBy.forEach(I=>{!E.isHealing&&!this.dotSkills.includes(I)&&this.dotSkills.push(I),E.isHealing&&!this.hotSkills.includes(I)&&this.hotSkills.push(I)}),T.set(h.effectName,E.groupedEffects.filter(I=>I!==h).map(I=>I.effectName)),h.isGroundTargeted&&!R.includes(h.effectName)&&R.push(h.effectName),h.exclude&&!S.includes(h.effectName)&&S.push(h.effectName),!E.isHealing&&E.reportName&&!this.fullTimeDoTs.includes(h.effectName)&&this.fullTimeDoTs.push(h.effectName))})}),n.forEach(E=>this.dotSkills.push(E)),this.overTimeEffectGroups=t,this.dotResources.filter(E=>!this.excludedDoTs.includes(E)).length>0){let E=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;E>3;)E-=3;this.addEvent(new Ne("initial DoT tick",E,r))}if(this.hotResources.filter(E=>!this.excludedHoTs.includes(E)).length>0){let E=this.config.timeTillFirstManaTick+this.hotTickOffset;for(;E>3;)E-=3;this.addEvent(new Ne("initial HoT tick",E,d))}this.jobSpecificRegisterRecurringEvents()}onResolveOverTimeTick(t,n){n==="damage"?this.jobSpecificOnResolveDotTick(t):this.jobSpecificOnResolveHotTick(t)}inherentSpeedModifier(){}jobSpecificRegisterRecurringEvents(){}jobSpecificOnResolveDotTick(t){}jobSpecificOnResolveHotTick(t){}jobSpecificAddDamageBuffCovers(t,n){}jobSpecificAddSpeedBuffCovers(t,n){}jobSpecificAddHealingBuffCovers(t,n){}maybeCancelChanneledSkills(t){const n=this.skillsList.get(t);n&&(n.animationLockFn(this)<=un||this.cancelChanneledSkills())}cancelChanneledSkills(){}jobSpecificOnAutoAttack(){}onAutoAttack(){this.jobSpecificOnAutoAttack()}getStatusDuration(t){return wt(this.job,t).maxTimeout}gainStatus(t,n=1){const o=this.resources.get(t),l=wt(this.job,t);this.hasResourceAvailable(t)?(l.warnOnOvercap&&n>=o.availableAmount()&&p.reportWarning({kind:"overcap",rsc:t}),l.maxTimeout>0&&o.overrideTimer(this,l.maxTimeout),o.availableAmount()!==n&&o.overrideCurrentValue(n)):(o.gain(n),l.maxTimeout>0&&this.enqueueResourceDrop(t))}maybeGainProc(t,n=.5,o=!1){this.triggersEffect(n,o)&&this.gainStatus(t)}triggersEffect(t,n=!1){if(this.config.procMode===on.Never)return!1;const o=n?this.rng():void 0;return this.config.procMode===on.Always?!0:(o??this.rng())<t}handleDoTTick(t){this.handleOverTimeTick(t,"damage")}handleHoTTick(t){this.handleOverTimeTick(t,"healing")}handleOverTimeTick(t,n){const o=this.resources.get(t);if(o.availableAmountIncludingDisabled()>0){if(o.node&&o.enabled){const l=o.node.getOverTimePotencies(t,n)[o.tickCount];p.resolveOverTimePotency(l,n),this.onResolveOverTimeTick(t,n)}o.tickCount++}else o.node&&(o.node.removeUnresolvedOvertimePotencies(n),o.node=void 0)}tick(t,n=()=>!1){let o=0;for(;o<t&&this.eventsQueue.length>0&&!n();){this.eventsQueue.sort((E,h)=>E.timeTillEvent-h.timeTillEvent);const l=Math.min(t-o,this.eventsQueue[0].timeTillEvent);o=Math.min(o+l,t),this.time+=l,this.cooldowns.tick(l);const r=[];for(let E=0;E<this.eventsQueue.length;E++)r.push(this.eventsQueue[E]);r.forEach(E=>{E.timeTillEvent-=l});let d=0;r.forEach(E=>{E.timeTillEvent<=ha.epsilon&&(E.canceled||E.effectFn(),d++)}),this.eventsQueue.splice(0,d)}return o}addEvent(t){this.eventsQueue.push(t)}getDisplayTime(){return this.time-this.config.countdown}captureManaRegenAmount(){return this.isInCombat()?this.job in PR?st.mpTick(this.config.level,this.config.piety):200:600}requestToggleBuff(t){const n=this.resources.get(t);if(t==="AUTOS_ENGAGED")return this.toggleAutosEngaged(),!0;if(xe[t].mayBeToggled)return n.available(1)?(n.enabled=!1,!0):(n.enabled=!0,!0);if(xe[t].mayNotBeCanceled)return!1;if(t==="MEDITATE"){const o=this.findNextQueuedEventByTag(nn.MeditateTick);o&&(o.canceled=!0)}return t==="KARDIA"&&this.tryConsumeResource("KARDION"),(t==="TEN_CHI_JIN"||t==="MUDRA")&&(this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)),n.consume(n.availableAmount()),n.removeTimer(),!0}addRecurringAutoAttackEvent(t,n){const o=(l,r)=>{const d=new Ne("aa tick",l,()=>{this.resources.get("AUTOS_ENGAGED").available(1)&&this.isInCombat()&&this.onAutoAttack(),this.addEvent(o(r,r))});return d.addTag(nn.AutoTick),d};this.addEvent(o(t,n))}findAutoAttackTimerInQueue(){let t=-1;return this.eventsQueue.forEach(n=>{n.name==="aa tick"&&(t=n.timeTillEvent)}),t}startAutoAttackTimer(t,n,o){if(this.findAutoAttackTimerInQueue()!==-1)this.removeAutoAttackTimer();else if(this.resources.get("STORED_AUTO").available(1)){const E=new Ne("stored auto",o||0,()=>{this.onAutoAttack()});this.addEvent(E)}this.tryConsumeResource("STORED_AUTO"),this.resources.get("AUTOS_ENGAGED").availableAmount()===0&&this.resources.get("AUTOS_ENGAGED").gain(1);const r=n||3;let d=0;t===-1?d=r:d=t??r,this.addRecurringAutoAttackEvent(d,r)}removeAutoAttackTimer(){let t=0;this.eventsQueue.forEach(n=>{n.name==="aa tick"&&this.eventsQueue.splice(t,1),t++})}toggleAutosEngaged(){const t=this.findAutoAttackTimerInQueue();if(this.resources.get("AUTOS_ENGAGED").availableAmount()===0)this.startAutoAttackTimer(t===-1?3:t);else if(this.resources.get("AUTOS_ENGAGED").consume(1),t!==-1){this.removeAutoAttackTimer();const n=new Ne("aa tick",t,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(n)}}refreshAutoBasedOnSkill(t,n,o){const l=n!==0,r=this.resources.get("AUTOS_ENGAGED").available(1),d=this.autoAttackDelay,E=this.findAutoAttackTimerInQueue(),h=t.startsAuto;if(o){if(this.isInCombat()){if(l&&r){const A=n+(E===-1?d:E);this.startAutoAttackTimer(A,d,n)}else if(!l&&!r)h&&this.startAutoAttackTimer(E,d);else if(l&&!r){if(h){const A=n+(E===-1?d:E);this.startAutoAttackTimer(A,d,n)}else if(E>0){this.removeAutoAttackTimer();const A=new Ne("aa tick",E+n,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(A)}}}else if(h){const A=n+(E===-1?d:E);this.startAutoAttackTimer(A,d,n)}}else if(this.isInCombat()){if(l&&r){const A=this.findAutoAttackTimerInQueue(),R=n+(A===-1?d:A);this.startAutoAttackTimer(R)}else if(l&&!r&&E>0){this.removeAutoAttackTimer();const A=new Ne("aa tick",E+n,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(A)}}}useSpellOrWeaponskill(t,n,o){const l=this.cooldowns.get(t.cdName),d=!(this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(t.name))&&t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,E=t.castTimeFn(this),h=t.recastTimeFn(this);this.jobSpecificAddSpeedBuffCovers(n,t);const A=t.potencyFn(this);let R=n.getInitialPotency();const T=this.dotSkills.includes(t.name);!R&&(A>0||t.drawsAggro&&!this.isInCombat()||T)?(this.refreshAutoBasedOnSkill(t,E,!0),R=new Zt({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:A,snapshotTime:void 0,description:"",targetCount:n.targetCount,falloff:t.falloff}),n.addPotency(R)):this.refreshAutoBasedOnSkill(t,E,!1);const S=t.healingPotencyFn(this);let I=n.getInitialHealingPotency();!I&&S>0&&(I=new Zt({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:S,snapshotTime:void 0,description:"",targetCount:n.healTargetCount,falloff:0}),n.addHealingPotency(I));const C=()=>{const O=t.manaCostFn(this);O>this.resources.get("MANA").availableAmount()?p.reportInterruption({failNode:n,failIndex:o}):O>0&&this.resources.get("MANA").consume(O);const D=A>0||T;if(R&&(R.snapshotTime=this.getDisplayTime(),D)){const H=[];this.hasResourceAvailable("TINCTURE")&&H.push(q.Tincture),H.push(...t.jobPotencyModifiers(this)),R.modifiers=H}D&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(k.Tincture)&&n.addBuff(k.Tincture),this.jobSpecificAddDamageBuffCovers(n,t));const U=S>0;if(I){I.snapshotTime=this.getDisplayTime();const H=[];this.hasResourceAvailable("TINCTURE")&&H.push(q.Tincture),H.push(...t.jobHealingPotencyModifiers(this)),I.modifiers=H}if(U&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(k.Tincture)&&n.addBuff(k.Tincture),this.jobSpecificAddHealingBuffCovers(n,t)),t.onConfirm(this,n),this.addEvent(new Ne(t.name+" applied",t.applicationDelay,()=>{R&&(p.resolvePotency(R),this.hasResourceAvailable("IN_COMBAT")||this.resources.get("IN_COMBAT").gain(1)),I&&p.resolveHealingPotency(I),t.onApplication(this,n)})),R&&!this.hasResourceAvailable("IN_COMBAT")){const H=this.resources.timeTillReady("IN_COMBAT");(H===0||H>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:L=>{L.gain(1)}})}};if(E===0||t.isInstantFn(this))this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this)),C();else{this.resources.takeResourceLock("MOVEMENT",E-ti.getSlidecastWindow(E)),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(E));const O=E-ti.getSlidecastWindow(E);this.addEvent(new Ne(t.name+" captured",O,()=>{t.validateAttempt(this)?C():p.reportInterruption({failNode:n,failIndex:o})}))}l.useStackWithRecast(this.config.getAfterTaxGCD(h)),d?.useStack()}useAbility(t,n){console.assert(n);const o=this.cooldowns.get(t.cdName),l=t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,r=t.potencyFn(this);let d;const E=this.dotSkills.includes(t.name);if((r>0||t.drawsAggro||E)&&(d=new Zt({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:r,snapshotTime:this.getDisplayTime(),description:"",targetCount:n.targetCount,falloff:t.falloff})),d&&(r>0||E)){const _=[];this.hasResourceAvailable("TINCTURE")&&_.push(q.Tincture),_.push(...t.jobPotencyModifiers(this)),d.modifiers=_,n.addPotency(d)}const h=this.resources.get("AUTOS_ENGAGED").available(1),A=this.autoAttackDelay,R=this.findAutoAttackTimerInQueue(),T=t.startsAuto||d&&r>0;if(T)if(this.isInCombat())h||T&&this.startAutoAttackTimer(R,A);else{const _=R===-1?A:R;this.startAutoAttackTimer(_,A,void 0)}const S=t.healingPotencyFn(this);let I;if(S>0){I=new Zt({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:S,snapshotTime:this.getDisplayTime(),description:"",targetCount:n.healTargetCount,falloff:0});const _=[];this.hasResourceAvailable("TINCTURE")&&_.push(q.Tincture),_.push(...t.jobHealingPotencyModifiers(this)),I.modifiers=_,n.addHealingPotency(I)}(r>0||E)&&!n.hasBuff(k.Tincture)&&(this.hasResourceAvailable("TINCTURE")&&n.addBuff(k.Tincture),this.jobSpecificAddDamageBuffCovers(n,t)),S>0&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(k.Tincture)&&n.addBuff(k.Tincture),this.jobSpecificAddHealingBuffCovers(n,t));const C=t.manaCostFn(this);if(C>0&&this.resources.get("MANA").consume(C),t.onConfirm(this,n),d&&!this.hasResourceAvailable("IN_COMBAT")){const _=this.resources.timeTillReady("IN_COMBAT");(_===0||_>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:O=>{O.gain(1)}})}t.applicationDelay>0?this.addEvent(new Ne(t.name+" applied",t.applicationDelay,()=>{d&&p.resolvePotency(d),I&&p.resolveHealingPotency(I),t.onApplication(this,n)})):(d&&p.resolvePotency(d),I&&p.resolveHealingPotency(I),t.onApplication(this,n)),o.useStack(),l?.useStack(),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this))}useLimitBreak(t,n,o){const l=this.cooldowns.get(t.cdName),r=t.castTimeFn(this),d=r>0?ti.getSlidecastWindow(r):0,E=t.potencyFn(this);let h;E>0&&(h=new Zt({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:E,snapshotTime:void 0,description:"",targetCount:n.targetCount,falloff:t.falloff}),n.addPotency(h));const A=t.healingPotencyFn(this);let R;A>0&&(R=new Zt({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:A,snapshotTime:void 0,description:"",targetCount:n.healTargetCount,falloff:0}),n.addHealingPotency(R));const T=()=>{t.onConfirm(this,n),h&&(h.snapshotTime=this.getDisplayTime()),R&&(R.snapshotTime=this.getDisplayTime()),this.addEvent(new Ne(t.name+" applied",t.applicationDelay,()=>{h&&p.resolvePotency(h),R&&p.resolveHealingPotency(R),t.onApplication(this,n)})),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",d+t.animationLockFn(this))};if(r===0)T();else{this.resources.takeResourceLock("MOVEMENT",r-d),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(r));const I=r-d;this.addEvent(new Ne(t.name+" captured",I,()=>{t.validateAttempt(this)?T():p.reportInterruption({failNode:n,failIndex:o})}))}l.useStack()}#i(t){const n=this.skillsList.get(t),l=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(n.name)?void 0:n.secondaryCd?.cdName;let r=this.cooldowns.timeTillAnyStackAvailable(n.cdName);return l&&(r=Math.max(r,this.cooldowns.timeTillAnyStackAvailable(l))),Math.max(this.timeTillAnySkillAvailable(),r)}timeTillAnySkillAvailable(){const t=this.resources.timeTillReady("NOT_ANIMATION_LOCKED"),n=this.resources.timeTillReady("NOT_CASTER_TAXED");return Math.max(t,n)}findNextQueuedEventByTag(t){for(let n=0;n<this.eventsQueue.length;n++){const o=this.eventsQueue[n];if(o.hasTag(t))return o}}hasResourceAvailable(t,n){return this.resources.get(t).available(n??1)}hasResourceExactly(t,n){return this.resources.get(t).availableAmount()===n}hitPositional(t){return this.hasResourceAvailable("TRUE_NORTH")||t==="flank"&&this.hasResourceAvailable("FLANK_POSITIONAL")||t==="rear"&&this.hasResourceAvailable("REAR_POSITIONAL")}hitCombo(t){return this.hasResourceExactly(t.resource,t.resourceValue)}computeComboAndPositionalModifiers(t,n,o){const l=[];return n&&this.hitCombo(n)?(l.push(rH(Jt(this,n.potency)-t)),o&&this.hitPositional(o.location)&&l.push(Ih(Jt(this,o.comboPotency)-Jt(this,n.potency)))):o&&this.hitPositional(o.location)&&l.push(Ih(Jt(this,o.potency)-t)),l}enqueueResourceDrop(t,n,o){if(n===void 0){const r=wt(this.job,t);console.assert(r?.maxTimeout,`could not find timeout declaration for resource ${t}`),n=r.maxTimeout}const l=(o===void 0?"drop all ":`drop ${o} `)+t;this.resources.get(t).removeTimer(),this.resources.addResourceEvent({rscType:t,name:l,delay:n,fnOnRsc:r=>{r.consume(o??r.availableAmountIncludingDisabled()),wt(this.job,r.type).warnOnTimeout&&p.reportWarning({kind:"timeout",rsc:r.type})}})}getOverriddenDots(t){return this.#a.get(t)??[]}getOverriddenHots(t){return this.#n.get(t)??[]}applyDoT(t,n){this.applyOverTimeEffect(t,n,"damage")}applyHoT(t,n,o){this.applyOverTimeEffect(t,n,"healing",o)}applyOverTimeEffect(t,n,o,l){const r=this.resources.get(t),d=l??this.getStatusDuration(t);let E;if((o==="damage"?this.getOverriddenDots(t):this.getOverriddenHots(t)).forEach(A=>{if(A!==t){if(!this.hasResourceAvailable(A)){const R=this.resources.get(A).getLastExpirationTime();if(R){const T=this.getDisplayTime()-R;E=E===void 0?T:Math.min(E,T)}return}n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,o)+this.resources.timeTillReady(A),o),p.reportOverTimeDrop(this.getDisplayTime(),A,o),E=0,this.tryConsumeResource(A)}}),r.available(1))console.assert(r.node),r.node.removeUnresolvedOvertimePotencies(o),n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,o)+this.resources.timeTillReady(t),o),r.overrideTimer(this,d);else{const A=this.getDisplayTime()-(r.getLastExpirationTime()??0);E=E===void 0?A:Math.min(E,A),r.gain(1);const R=o==="damage"?" DoT":" HoT";p.reportOverTimeStart(this.getDisplayTime(),t,o),this.resources.addResourceEvent({rscType:t,name:"drop "+t+R,delay:d,fnOnRsc:T=>{T.consume(1),p.reportOverTimeDrop(this.getDisplayTime(),t,o)}})}n.setOverTimeGap(t,E??0,o),r.node=n,r.tickCount=0,this.#e.includes(t)&&(this.handleDoTTick(t),p.reportDotTick(this.time,t)),this.#t.includes(t)&&(this.handleHoTTick(t),p.reportHotTick(this.time,t))}addDoTPotencies(t){this.addOverTimePotencies(t,"damage")}addHoTPotencies(t,n){this.addOverTimePotencies(t,"healing",n)}addOverTimePotencies(t,n,o){const l=t.modifiers??[];this.hasResourceAvailable("TINCTURE")&&!l.includes(q.Tincture)&&(l.push(q.Tincture),t.node.addBuff(k.Tincture));const r=o??this.getStatusDuration(t.effectName),d=this.#e.includes(t.effectName)||this.#t.includes(t.effectName),E=Math.ceil(r/(t.tickFrequency??3))+(d?1:0),h=n==="damage"?"DoT":"HoT",A=n==="damage"?t.node.targetCount:t.node.healTargetCount;for(let R=0;R<E;R++){const T=new Zt({config:p.record.config??p.gameConfig,sourceTime:this.getDisplayTime(),sourceSkill:t.skillName,aspect:t.aspect??Ie.Other,basePotency:this.config.adjustedOvertimePotency(t.tickPotency,t.speedStat),snapshotTime:this.getDisplayTime(),description:ze(t.effectName)+` ${h} `+(R+1)+`/${E}`,targetCount:A,falloff:0});T.modifiers=l,t.node.addOverTimePotency(T,t.effectName,n)}}refreshDoT(t,n=!1){this.refreshOverTimeEffect(t,"damage",n)}refreshHoT(t,n=!1){this.refreshOverTimeEffect(t,"healing",n)}refreshOverTimeEffect(t,n,o){!o&&!this.hasResourceAvailable(t.effectName)||(this.addOverTimePotencies(t,n),this.applyOverTimeEffect(t.effectName,t.node,n))}timeTillNextMpGainEvent(){const t=this.findNextQueuedEventByTag(nn.ManaGain);return t?t.timeTillEvent:0}timeTillNextDamageEvent(){return this.resources.timeTillReady("IN_COMBAT")}getSkillAvailabilityStatus(t,n=!1){const o=this.skillsList.get(t);let l=this.#i(o.name);const r=o.manaCostFn(this),d=this.job==="BLM"&&this.resources.get("LEY_LINES").available(1),E=o.kind==="weaponskill"||o.kind==="spell"||o.kind==="limitbreak"?o.castTimeFn(this):0,h=E===0||o.kind==="ability"||o.kind!=="limitbreak"&&o.kind!=="unknown"&&o.isInstantFn(this),A=this.resources.get("MANA").availableAmount(),R=l>ha.epsilon,T=r<=A,S=o.validateAttempt(this),I=this.config.level>=o.unlockLevel,C=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(o.name),_=Jc();if(R&&_.addUnavailableReason(dt.Blocked),!C&&o.secondaryCd&&this.cooldowns.get(o.secondaryCd.cdName).stacksAvailable()===0&&_.addUnavailableReason(dt.SecondaryBlocked),I||_.addUnavailableReason(dt.SkillNotUnlocked),S||_.addUnavailableReason(dt.RequirementsNotMet),T||_.addUnavailableReason(dt.NotEnoughMP),o.name==="MEDITATE"&&(l>ha.epsilon||this.cooldowns.get("cd_GCD").timeTillNextStackAvailable()>ha.epsilon)){const te=_.unavailableReasons.indexOf(dt.RequirementsNotMet);te>=0&&_.unavailableReasons.splice(te,1),_.addUnavailableReason(dt.Blocked)}o.requiresCombat&&_.unavailableReasons.includes(dt.RequirementsNotMet)&&(_.addUnavailableReason(dt.NotInCombat),l=this.timeTillNextDamageEvent());let O=this.cooldowns.get(o.cdName);const D=!C&&o.secondaryCd?this.cooldowns.get(o.secondaryCd.cdName):void 0;let U=O.timeTillNextStackAvailable()%O.currentStackCd();const H=!C&&o.secondaryCd?this.cooldowns.timeTillNextStackAvailable(o.secondaryCd.cdName):void 0;let L=O.currentStackCd();if(t==="MEDITATE"&&U<ha.epsilon){const te=this.cooldowns.get("cd_GCD"),ee=te.currentStackCd();te.timeTillNextStackAvailable()>U&&(O=te,L=ee,U=te.timeTillNextStackAvailable(),l=U)}if(C){const te=this.cooldowns.get("cd_GCD"),ee=te.currentStackCd();O=te,L=ee,U=te.timeTillNextStackAvailable(),l=U}const w=O.stacksAvailable(),G=O.maxStacks(),B=D?.currentStackCd()??0;let j=0;_.ready()&&(o.kind==="spell"?j=(h?0:E-ti.getSlidecastWindow(E))+o.applicationDelay:o.kind==="limitbreak"?j=E+o.applicationDelay:j=o.applicationDelay);const Q=D?.stacksAvailable()??0,ce=D?.maxStacks()??0,ue=o.highlightIf(this);return{skillName:o.name,status:_,stacksAvailable:ce>0?Q:w,maxStacks:Math.max(G,ce),castTime:E,instantCast:h,cdRecastTime:L,secondaryCdRecastTime:B,timeTillNextStackReady:U,timeTillSecondaryReady:H,timeTillAvailable:l,timeTillDamageApplication:j,capturedManaCost:r,highlight:ue,llCovered:d,usedAt:this.getDisplayTime()}}useSkill(t,n,o){const l=this.skillsList.get(t);l.onExecute(this,n),l.falloff===void 0&&n.setTargetCount(1),l.aoeHeal&&n.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),l.kind==="spell"||l.kind==="weaponskill"?this.useSpellOrWeaponskill(l,n,o):l.kind==="ability"?this.useAbility(l,n):l.kind==="limitbreak"&&this.useLimitBreak(l,n,o)}useInvalidSkill(t,n){const o=this.skillsList.get(t);if(o.falloff===void 0&&n.setTargetCount(1),o.aoeHeal&&n.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),o.kind==="spell"||o.kind==="weaponskill"){const l=o.castTimeFn(this),r=o.recastTimeFn(this);l===0||o.isInstantFn(this)?this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",o.animationLockFn(this)):this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(l)),this.cooldowns.get("cd_GCD").useStackWithRecast(this.config.getAfterTaxGCD(r))}else if(o.kind==="ability")this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",o.animationLockFn(this));else if(o.kind==="limitbreak"){const l=o.castTimeFn(this),r=ti.getSlidecastWindow(l);this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",r+o.animationLockFn(this))}}getPartyBuffs(t){const n=new Map;return p.timeline.getBuffMarkers().filter(l=>l.time<=t&&l.time+l.duration>=t).forEach(l=>{const r=new Ph(l.description);n.has(r.name)||(r.info.damageFactor===1?n.set(r.name,{kind:"critDirect",source:x.PARTY,buffType:r.name,critBonus:r.info.critBonus,dhBonus:r.info.dhBonus}):n.set(r.name,{kind:"multiplier",source:x.PARTY,buffType:r.name,potencyFactor:r.info.damageFactor}))}),n}tryConsumeResource(t,n=!1){const o=this.resources.get(t),l=n?o.availableAmount():1;return l>0&&o.available(l)?(o.consume(l),o.available(l)||o.removeTimer(),!0):!1}setComboState(t,n){n===0?this.tryConsumeResource(t,!0):(this.resources.get(t).overrideCurrentValue(n),this.enqueueResourceDrop(t,30))}hasTraitUnlocked(t){return MN(t,this.config.level)}isInCombat(){return this.hasResourceAvailable("IN_COMBAT")}}const W0=["THUNDER_III","THUNDER_IV","HIGH_THUNDER","HIGH_THUNDER_II"],tw=Object.keys(mR).filter(e=>!W0.includes(e));Object.keys(mR).forEach(e=>Gt(e,`BLM/${xe[e].name}.png`));class aw extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[...W0.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return tw.map(t=>t==="LEY_LINES"?this.makeToggleableTimer(t):t==="THUNDERHEAD"||t==="FIRESTARTER"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources.get("ENOCHIAN"),o=this.state.resources,l=this.state.getFireStacks(),r=this.state.getIceStacks(),d=o.get("UMBRAL_HEART").availableAmount(),E=o.get("PARADOX").availableAmount(),h=o.get("ASTRAL_SOUL").availableAmount(),A=n.available(1)?o.timeTillReady("POLYGLOT"):30,R=o.get("POLYGLOT").availableAmount(),T=this.state.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.state.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1,S=[{kind:"counter",name:g({en:"AF/UI",zh:"",ja:"AF/UB"}),color:l>0?t.blm.astralFire:t.blm.umbralIce,currentStacks:l>0?l:r,maxStacks:3},{kind:"counter",name:g({en:"hearts",zh:"",ja:""}),color:t.blm.umbralHeart,currentStacks:d,maxStacks:3},{kind:"counter",name:g({en:"paradox",zh:"",ja:""}),color:t.blm.paradox,currentStacks:E,maxStacks:1}];return this.state.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&S.push({kind:"counter",name:g({en:"astral soul",zh:"",ja:""}),color:t.blm.astralSoul,currentStacks:h,maxStacks:6}),S.push({kind:"bar",name:g({en:"poly timer",zh:"",ja:""}),color:t.blm.polyTimer,progress:1-A/30,valueString:A.toFixed(3)},{kind:"counter",name:g({en:"poly stacks",zh:"",ja:""}),color:t.blm.polyStacks,currentStacks:R,maxStacks:T}),S}}const en=(e,t,n)=>{je("BLM",e,t,n??{})};en("POLYGLOT",3,{timeout:30,warnOnOvercap:!0});en("ASTRAL_FIRE",3);en("UMBRAL_ICE",3);en("UMBRAL_HEART",3);en("ASTRAL_SOUL",6);en("LEY_LINES",1,{timeout:20});en("ENOCHIAN",1);en("PARADOX",1);en("FIRESTARTER",1);en("THUNDERHEAD",1);en("THUNDER_III",1,{timeout:27});en("THUNDER_IV",1,{timeout:21});en("HIGH_THUNDER",1,{timeout:30});en("HIGH_THUNDER_II",1,{timeout:24});en("MANAWARD",1,{timeout:20});en("TRIPLECAST",3,{timeout:15.7});class nw extends Kt{thunderTickOffset;constructor(t){super(t),t.initialResourceOverrides.some(d=>(d.type==="ASTRAL_FIRE"||d.type==="UMBRAL_ICE")&&d.stacks>0)&&this.gainStatus("ENOCHIAN"),this.thunderTickOffset=this.nonProcRng()*3;const o=this.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1;this.resources.set(new Wa("POLYGLOT",o,0,!0));const l=this.hasTraitUnlocked("ENHANCED_MANAFONT")&&100||120,r=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new Le("cd_MANAFONT",l,1,1),new Le("cd_SWIFTCAST",r,1,1)].forEach(d=>this.cooldowns.set(d)),this.registerRecurringEvents([{reportName:g({en:"Thunder DoT",zh:"DoT"}),groupedEffects:[{effectName:"HIGH_THUNDER",appliedBy:["HIGH_THUNDER"]},{effectName:"HIGH_THUNDER_II",appliedBy:["HIGH_THUNDER_II"]},{effectName:"THUNDER_III",appliedBy:["THUNDER_III"]},{effectName:"THUNDER_IV",appliedBy:["THUNDER_IV"]}]}])}get statusPropsGenerator(){return new aw(this)}jobSpecificRegisterRecurringEvents(){const t=n=>{this.hasEnochian()&&n.gain(1),this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:t})};this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:t})}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("LEY_LINES")&&n.cdName==="cd_GCD"&&t.addBuff(k.LeyLines)}captureManaRegenAmount(){return this.getFireStacks()>0?0:200}getFireStacks(){return this.resources.get("ASTRAL_FIRE").availableAmount()}getIceStacks(){return this.resources.get("UMBRAL_ICE").availableAmount()}getUmbralHearts(){return this.resources.get("UMBRAL_HEART").availableAmount()}getMP(){return this.resources.get("MANA").availableAmount()}switchToAForUI(t,n){console.assert(n>0);const o=this.resources.get("ASTRAL_FIRE"),l=this.resources.get("UMBRAL_ICE"),r=this.resources.get("UMBRAL_HEART"),d=this.resources.get("PARADOX"),E=this.resources.get("ASTRAL_SOUL");t==="ASTRAL_FIRE"?(o.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),o.gain(n),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&l.available(3)&&r.available(3)&&d.gain(1),l.consume(l.availableAmount())):t==="UMBRAL_ICE"&&(l.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),l.gain(n),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&o.available(3)&&d.gain(1),o.consume(o.availableAmount()),E.consume(E.availableAmount()))}gainUmbralMana(t=0){let n=0;switch(this.resources.get("UMBRAL_ICE").availableAmount()){case 1:n=2500;break;case 2:n=5e3;break;case 3:n=1e4;break;default:n=0;break}this.addEvent(new Ne("gain umbral mana",t,()=>{this.resources.get("MANA").gain(n)}))}captureManaCost(t,n,o){const l=this.getIceStacks(),r=this.getFireStacks(),d=this.getUmbralHearts();if(t==="PARADOX"&&this.getIceStacks()>0||t==="FIRE_III"&&this.hasResourceAvailable("FIRESTARTER"))return 0;let E=1;return n===Ie.Fire&&l>0||n===Ie.Ice&&(l>0||r>0)?E=0:n===Ie.Fire&&r>0&&d===0&&(E=2),o*E}captureSpellCastTimeAFUI(t,n){const o=this.config.adjustedCastTime(t,this.hasResourceAvailable("LEY_LINES")?15:void 0);let l=1;return(n===Ie.Fire&&this.getIceStacks()===3||n===Ie.Ice&&this.getFireStacks()===3)&&(l=.5),o*l}hasEnochian(){return this.hasResourceAvailable("ENOCHIAN")}startOrRefreshEnochian(){const t=this.resources.get("ENOCHIAN");t.available(1)||(this.resources.get("POLYGLOT").overrideTimer(this,30),t.gain(1))}loseEnochian(){["ENOCHIAN","ASTRAL_FIRE","UMBRAL_ICE","UMBRAL_HEART","PARADOX","ASTRAL_SOUL"].forEach(n=>this.tryConsumeResource(n,!0))}}const X0=e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,cT=e=>e.hasResourceAvailable("PARADOX"),q0=e=>e.hasTraitUnlocked("ENHANCED_ENOCHIAN_IV")&&1.27||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_III")&&1.22||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_II")&&1.15||1.1,ea=(e,t,n)=>{const o=n.aspect??Ie.Other,l=Me((r,d)=>{n.baseCastTime===0||e==="DESPAIR"&&r.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&r.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&r.hasResourceAvailable("FIRESTARTER")||r.tryConsumeResource("SWIFTCAST")||r.tryConsumeResource("TRIPLECAST")},(r,d)=>{r.getFireStacks()>0&&o===Ie.Fire&&!["DESPAIR","FLARE_STAR","FLARE"].includes(e)&&!(e==="FIRE_III"&&r.hasResourceAvailable("FIRESTARTER"))&&r.tryConsumeResource("UMBRAL_HEART"),o===Ie.Ice&&r.gainUmbralMana(n.applicationDelay)},n.onConfirm);return Bn("BLM",e,t,{...n,aspect:o,castTime:r=>r.captureSpellCastTimeAFUI(n.baseCastTime,o),recastTime:r=>r.config.adjustedGCD(2.5,r.hasResourceAvailable("LEY_LINES")?15:0),manaCost:r=>r.captureManaCost(e,o,n.baseManaCost),potency:r=>n.basePotency,isInstantFn:r=>e==="DESPAIR"&&r.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&r.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&r.hasResourceAvailable("FIRESTARTER")||r.hasResourceAvailable("SWIFTCAST")||r.hasResourceAvailable("TRIPLECAST"),onConfirm:l,jobPotencyModifiers:r=>{const d=[];if(r.hasResourceAvailable("ENOCHIAN")){const A=q0(r);d.push({kind:"multiplier",source:x.ENO,potencyFactor:A})}const E=r.getIceStacks(),h=r.getFireStacks();return E===1?o===Ie.Fire?d.push({kind:"multiplier",source:x.UI1,potencyFactor:.9}):o===Ie.Ice&&d.push({kind:"multiplier",source:x.UI1,potencyFactor:1}):E===2?o===Ie.Fire?d.push({kind:"multiplier",source:x.UI2,potencyFactor:.8}):o===Ie.Ice&&d.push({kind:"multiplier",source:x.UI2,potencyFactor:1}):E===3&&(o===Ie.Fire?d.push({kind:"multiplier",source:x.UI3,potencyFactor:.7}):o===Ie.Ice&&d.push({kind:"multiplier",source:x.UI3,potencyFactor:1})),h===1?o===Ie.Ice?d.push({kind:"multiplier",source:x.AF1,potencyFactor:.9}):o===Ie.Fire&&d.push({kind:"multiplier",source:x.AF1,potencyFactor:1.4}):h===2?o===Ie.Ice?d.push({kind:"multiplier",source:x.AF2,potencyFactor:.8}):o===Ie.Fire&&d.push({kind:"multiplier",source:x.AF2,potencyFactor:1.6}):h===3&&(o===Ie.Ice?d.push({kind:"multiplier",source:x.AF3,potencyFactor:.7}):o===Ie.Fire&&d.push({kind:"multiplier",source:x.AF3,potencyFactor:1.8})),d}})},ss=(e,t,n,o)=>et("BLM",e,t,n,o);ea("BLIZZARD",1,{aspect:Ie.Ice,baseCastTime:2,baseManaCost:400,basePotency:180,applicationDelay:.846,onConfirm:(e,t)=>{e.getFireStacks()===0?(e.switchToAForUI("UMBRAL_ICE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:cT}]});ea("FIRE",2,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:800,basePotency:180,applicationDelay:1.871,onConfirm:(e,t)=>{e.triggersEffect(.4,!0)&&e.gainStatus("FIRESTARTER"),e.getIceStacks()===0?(e.switchToAForUI("ASTRAL_FIRE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:cT}]});ss("TRANSPOSE",4,"cd_TRANSPOSE",{applicationDelay:0,cooldown:5,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{(e.getFireStacks()!==0||e.getIceStacks()!==0)&&(e.switchToAForUI(e.getFireStacks()>0?"UMBRAL_ICE":"ASTRAL_FIRE",1),e.startOrRefreshEnochian())}});const RE=(e,t)=>(n,o)=>{let l=0;switch(e){case"HIGH_THUNDER":l=60;break;case"THUNDER_III":l=50;break;case"THUNDER_IV":l=35;break;case"HIGH_THUNDER_II":l=40;break}const r=[];if(n.hasResourceAvailable("ENOCHIAN")){const d=q0(n);r.push({kind:"multiplier",source:x.ENO,potencyFactor:d})}console.assert(l>0,`${e} was applied as a Thunder DoT`),n.addDoTPotencies({node:o,effectName:t,skillName:e,tickPotency:l,speedStat:"sps",aspect:Ie.Lightning,modifiers:r}),n.tryConsumeResource("THUNDERHEAD")};ea("THUNDER_III",45,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:120,applicationDelay:1.03,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:RE("THUNDER_III","THUNDER_III"),onApplication:(e,t)=>e.applyDoT("THUNDER_III",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});we("BLM","MANAWARD",30,"cd_MANAWARD",{rscType:"MANAWARD",applicationDelay:1.114,cooldown:120});ss("MANAFONT",30,"cd_MANAFONT",{applicationDelay:.2,cooldown:100,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e=e,e.resources.get("ASTRAL_FIRE").gain(3),e.resources.get("UMBRAL_HEART").gain(3),e.hasTraitUnlocked("ASPECT_MASTERY_V")&&e.resources.get("PARADOX").gain(1),e.gainStatus("THUNDERHEAD"),e.startOrRefreshEnochian()},onApplication:(e,t)=>{e.resources.get("MANA").gain(1e4)}});ea("FIRE_III",35,{aspect:Ie.Fire,baseCastTime:3.5,baseManaCost:2e3,basePotency:290,applicationDelay:1.292,onConfirm:(e,t)=>{e.tryConsumeResource("FIRESTARTER"),e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()},highlightIf:e=>e.hasResourceAvailable("FIRESTARTER")});ea("BLIZZARD_III",35,{aspect:Ie.Ice,baseCastTime:3.5,baseManaCost:800,basePotency:290,applicationDelay:.89,onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});ea("FREEZE",40,{aspect:Ie.Ice,baseCastTime:2,baseManaCost:1e3,basePotency:120,applicationDelay:.664,falloff:0,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});ea("FLARE",50,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:0,basePotency:240,applicationDelay:1.157,falloff:.3,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const n=e.resources.get("UMBRAL_HEART"),o=e.resources.get("MANA"),l=n.available(1)?o.availableAmount()*.66:o.availableAmount();e.resources.get("MANA").consume(l),n.consume(n.availableAmount()),e.resources.get("ASTRAL_FIRE").gain(3),e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(3),e.startOrRefreshEnochian()}});we("BLM","LEY_LINES",52,"cd_LEY_LINES",{rscType:"LEY_LINES",applicationDelay:.49,cooldown:120,maxCharges:2,validateAttempt:e=>!(e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0),onApplication:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0},replaceIf:[{newSkill:"RETRACE",condition:X0}]});ea("BLIZZARD_IV",58,{aspect:Ie.Ice,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.156,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});ea("FIRE_IV",60,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.159,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(1)}});ss("BETWEEN_THE_LINES",62,"cd_BETWEEN_THE_LINES",{applicationDelay:0,cooldown:3,animationLock:jt,validateAttempt:e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,onConfirm:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0}});ss("AETHERIAL_MANIPULATION",50,"cd_AETHERIAL_MANIPULATION",{applicationDelay:0,cooldown:10,animationLock:jt});ss("TRIPLECAST",66,"cd_TRIPLECAST",{applicationDelay:0,cooldown:60,maxCharges:2,onApplication:(e,t)=>e.gainStatus("TRIPLECAST",3)});ea("FOUL",70,{baseCastTime:2,baseManaCost:0,basePotency:600,falloff:.25,applicationDelay:1.158,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});ea("DESPAIR",72,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:0,basePotency:350,applicationDelay:.556,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const n=e.resources.get("MANA"),o=n.availableAmount();console.assert(o>=800,`tried to confirm despair at ${o} MP`),n.consume(o),e.resources.get("ASTRAL_FIRE").gain(3),e.startOrRefreshEnochian()}});ea("UMBRAL_SOUL",35,{aspect:Ie.Ice,baseCastTime:0,baseManaCost:0,basePotency:0,applicationDelay:.633,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>{e.resources.get("UMBRAL_ICE").gain(1),e.resources.get("UMBRAL_HEART").gain(1)}});ea("XENOGLOSSY",80,{baseCastTime:0,baseManaCost:0,basePotency:890,applicationDelay:.63,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});ea("FIRE_II",18,{aspect:Ie.Fire,baseCastTime:3,baseManaCost:1500,basePotency:80,falloff:0,applicationDelay:1.154,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});ea("BLIZZARD_II",12,{aspect:Ie.Ice,baseCastTime:3,baseManaCost:800,basePotency:80,falloff:0,applicationDelay:1.158,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});ea("HIGH_FIRE_II",82,{aspect:Ie.Fire,baseCastTime:3,baseManaCost:1500,basePotency:100,falloff:0,applicationDelay:1.154,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});ea("HIGH_BLIZZARD_II",82,{aspect:Ie.Ice,baseCastTime:3,baseManaCost:800,basePotency:100,falloff:0,applicationDelay:1.158,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});ss("AMPLIFIER",86,"cd_AMPLIFIER",{applicationDelay:0,cooldown:120,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{e.resources.get("POLYGLOT").gain(1)}});ea("PARADOX",90,{baseCastTime:0,baseManaCost:1600,basePotency:540,applicationDelay:.624,validateAttempt:cT,onConfirm:(e,t)=>{e.resources.get("PARADOX").consume(1),e.getFireStacks()>0?e.gainStatus("FIRESTARTER"):e.getIceStacks()===0&&console.error("cannot cast Paradox outside of AF/UI")},replaceIf:[{newSkill:"BLIZZARD",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getIceStacks()>0},{newSkill:"FIRE",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getFireStacks()>0}],startOnHotbar:!1,highlightIf:e=>!0});ea("HIGH_THUNDER",92,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:150,applicationDelay:.757,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:RE("HIGH_THUNDER","HIGH_THUNDER"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_III"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});ea("FLARE_STAR",100,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:0,basePotency:500,falloff:.65,applicationDelay:.622,validateAttempt:e=>e.hasResourceAvailable("ASTRAL_SOUL",6),onConfirm:(e,t)=>e.tryConsumeResource("ASTRAL_SOUL",!0),highlightIf:e=>e.hasResourceAvailable("ASTRAL_SOUL",6)});ea("THUNDER_IV",64,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:80,falloff:0,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:RE("THUNDER_IV","THUNDER_IV"),onApplication:(e,t)=>e.applyDoT("THUNDER_IV",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER_II"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});ea("HIGH_THUNDER_II",92,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:100,falloff:0,applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:RE("HIGH_THUNDER_II","HIGH_THUNDER_II"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER_II",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_IV"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});ss("RETRACE",96,"cd_RETRACE",{applicationDelay:0,cooldown:40,validateAttempt:X0,onConfirm:(e,t)=>{const n=e.resources.get("LEY_LINES");n.enabled=!0,console.assert(n.pendingChange!==void 0,"LL should def have a timer when Retrace is used"),n.pendingChange.timeTillEvent=Math.floor(n.pendingChange.timeTillEvent)+.5},startOnHotbar:!1});const Z0=["CAUSTIC_BITE","STORMBITE"],iw=Object.keys(RR).filter(e=>!Z0.includes(e));Object.keys(RR).forEach(e=>Gt(e,`BRD/${xe[e].name}.png`));class ow extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[...Z0.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return[...iw.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("PITCH_PERFECT"),l=n.get("REPERTOIRE"),r=[{kind:"counter",name:g({en:"Pitch Perfect"}),color:t.brd.pitchPerfect,currentStacks:o.availableAmount(),maxStacks:o.maxValue},{kind:"counter",name:g({en:"Paeon Repertoire"}),color:t.brd.repertoire,currentStacks:l.availableAmount(),maxStacks:l.maxValue}];if(this.state.hasTraitUnlocked("SOUL_VOICE")){const d=n.get("SOUL_VOICE");r.push({kind:"bar",name:g({en:"Soul Voice"}),color:t.brd.soulVoice,progress:d.availableAmount()/d.maxValue,valueString:d.availableAmount().toFixed(0)})}return this.state.hasTraitUnlocked("MINSTRELS_CODA")&&r.push({kind:"coda",name:g({en:"Coda"}),hasWanderers:this.state.hasResourceAvailable("WANDERERS_CODA"),hasMages:this.state.hasResourceAvailable("MAGES_CODA"),hasArmys:this.state.hasResourceAvailable("ARMYS_CODA"),wanderersColor:t.brd.wanderersCoda,magesColor:t.brd.magesCoda,armysColor:t.brd.armysCoda}),r}}const bt=(e,t,n)=>{je("BRD",e,t,n??{})};bt("SOUL_VOICE",100,{warnOnOvercap:!0});bt("PITCH_PERFECT",3);bt("REPERTOIRE",4);bt("WANDERERS_CODA",1,{warnOnOvercap:!0});bt("MAGES_CODA",1,{warnOnOvercap:!0});bt("ARMYS_CODA",1,{warnOnOvercap:!0});bt("ETHOS_REPERTOIRE",4);bt("MUSE_REPERTOIRE",4);bt("HAWKS_EYE",1,{timeout:30});bt("RAGING_STRIKES",1,{timeout:20});bt("BARRAGE",1,{timeout:10});bt("ARMYS_MUSE",4,{timeout:10});bt("ARMYS_ETHOS",4,{timeout:30});bt("BLAST_ARROW_READY",1,{timeout:10});bt("RESONANT_ARROW_READY",1,{timeout:30});bt("RADIANT_ENCORE_READY",1,{timeout:30});bt("MAGES_BALLAD",1,{timeout:45});bt("ARMYS_PAEON",1,{timeout:45});bt("WANDERERS_MINUET",1,{timeout:45});bt("BATTLE_VOICE",1,{timeout:20});bt("WARDENS_PAEAN",1,{timeout:30});bt("TROUBADOUR",1,{timeout:15});bt("NATURES_MINNE",1,{timeout:15});bt("RADIANT_FINALE",1,{timeout:20});bt("RADIANT_CODA",3);bt("CAUSTIC_BITE",1,{timeout:45});bt("STORMBITE",1,{timeout:45});const Fp=["WANDERERS_MINUET","MAGES_BALLAD","ARMYS_PAEON"],lw=["REFULGENT_ARROW","SHADOWBITE","WIDE_VOLLEY"];class sw extends Kt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_BLOODLETTER")||this.cooldowns.set(new Le("cd_HEARTBREAK_SHOT",15,2,2)),this.hasTraitUnlocked("ENHANCED_TROUBADOUR")||this.cooldowns.set(new Le("cd_TROUBADOUR",120,1,1)),this.registerRecurringEvents([{reportName:ze("STORMBITE"),groupedEffects:[{effectName:"STORMBITE",appliedBy:["STORMBITE","IRON_JAWS"]}]},{reportName:ze("CAUSTIC_BITE"),groupedEffects:[{effectName:"CAUSTIC_BITE",appliedBy:["CAUSTIC_BITE","IRON_JAWS"]}]}])}get statusPropsGenerator(){return new ow(this)}jobSpecificAddDamageBuffCovers(t,n){switch(this.hasResourceAvailable("RAGING_STRIKES")&&t.addBuff(k.RagingStrikes),this.hasResourceAvailable("BATTLE_VOICE")&&t.addBuff(k.BattleVoice),this.resources.get("RADIANT_FINALE").availableAmount()){case 1:t.addBuff(k.RadiantFinale1);break;case 2:t.addBuff(k.RadiantFinale2);break;case 3:t.addBuff(k.RadiantFinale3);break}this.hasResourceAvailable("BARRAGE")&&lw.includes(n.name)&&t.addBuff(k.Barrage),this.hasResourceAvailable("WANDERERS_MINUET")?t.addBuff(k.WanderersMinuet):this.hasResourceAvailable("MAGES_BALLAD")?t.addBuff(k.MagesBallad):this.hasResourceAvailable("ARMYS_PAEON")&&t.addBuff(k.ArmysPaeon)}songTick(t){this.resourceIsSong(t)&&this.hasResourceAvailable(t)&&(this.triggersEffect(.8)&&this.gainRepertoireEffect(t),this.resources.timeTillReady(t)>3+ha.epsilon&&this.addEvent(new Ne(`${t} tick`,3,()=>{this.songTick(t)})))}gainRepertoireEffect(t){if(t||(this.hasResourceAvailable("WANDERERS_MINUET")?t="WANDERERS_MINUET":this.hasResourceAvailable("MAGES_BALLAD")?t="MAGES_BALLAD":this.hasResourceAvailable("ARMYS_PAEON")&&(t="ARMYS_PAEON")),!!t&&this.resourceIsSong(t)){switch(t){case"WANDERERS_MINUET":this.resources.get("PITCH_PERFECT").gain(1);break;case"MAGES_BALLAD":this.cooldowns.get("cd_HEARTBREAK_SHOT").restore(7.5);break;case"ARMYS_PAEON":this.resources.get("REPERTOIRE").gain(1);break}this.hasTraitUnlocked("SOUL_VOICE")&&this.resources.get("SOUL_VOICE").gain(5)}}resourceIsSong(t){return Fp.includes(t)}beginSong(t){if(this.resourceIsSong(t)){if(Fp.forEach(n=>this.tryExpireSong(n)),t!=="ARMYS_PAEON"&&this.hasResourceAvailable("ARMYS_ETHOS")){const n=this.resources.get("ETHOS_REPERTOIRE").availableAmount();this.resources.get("MUSE_REPERTOIRE").gain(n),this.tryConsumeResource("ARMYS_ETHOS"),this.tryConsumeResource("ETHOS_REPERTOIRE",!0),this.gainStatus("ARMYS_MUSE")}if(this.hasTraitUnlocked("MINSTRELS_CODA")){const n=t==="WANDERERS_MINUET"?"WANDERERS_CODA":t==="MAGES_BALLAD"?"MAGES_CODA":"ARMYS_CODA";this.resources.get(n).gain(1)}this.resources.get(t).gain(1),this.resources.addResourceEvent({rscType:t,name:"drop "+t,delay:this.getStatusDuration(t),fnOnRsc:n=>this.tryExpireSong(t)}),this.addEvent(new Ne(`${t} tick`,3,()=>{this.songTick(t)}))}}tryExpireSong(t){if(this.resourceIsSong(t)&&this.hasResourceAvailable(t)){switch(t){case"WANDERERS_MINUET":this.tryConsumeResource("PITCH_PERFECT",!0);break;case"ARMYS_PAEON":if(this.hasTraitUnlocked("ENHANCED_ARMYS_PAEON")){const n=this.resources.get("REPERTOIRE").availableAmount();n>0&&(this.resources.get("ETHOS_REPERTOIRE").gain(n),this.gainStatus("ARMYS_ETHOS")),this.tryConsumeResource("MUSE_REPERTOIRE",!0)}this.tryConsumeResource("REPERTOIRE",!0);break}this.tryConsumeResource(t)}}getCodaCount(){const t=this.resources.get("WANDERERS_CODA").availableAmount(),n=this.resources.get("MAGES_CODA").availableAmount(),o=this.resources.get("ARMYS_CODA").availableAmount();return t+n+o}getJobPotencyModifiers(t){const n=[];if([{rscType:"WANDERERS_MINUET",mod:q.WanderersMinuet},{rscType:"MAGES_BALLAD",mod:q.MagesBallad},{rscType:"ARMYS_PAEON",mod:q.ArmysPaeon},{rscType:"RAGING_STRIKES",mod:q.RagingStrikes},{rscType:"BATTLE_VOICE",mod:q.BattleVoice}].forEach(l=>{this.hasResourceAvailable(l.rscType)&&n.push(l.mod)}),this.hasResourceAvailable("RADIANT_FINALE")){const l=this.resources.get("RADIANT_CODA").availableAmount();l===3?n.push(q.RadiantFinaleThreeCoda):l===2?n.push(q.RadiantFinaleTwoCoda):l===1&&n.push(q.RadiantFinaleOneCoda)}if(this.hasResourceAvailable("BARRAGE"))switch(t){case"REFULGENT_ARROW":n.push(q.BarrageRefulgent);break;case"SHADOWBITE":n.push(q.BarrageShadowbite);break;case"WIDE_VOLLEY":n.push(q.BarrageWideVolley);break}return n}getSpeedModifier(t){if(t==="ARMYS_PAEON")return this.resources.get("REPERTOIRE").availableAmount()*4;if(t==="ARMYS_MUSE"){const n=this.resources.get("MUSE_REPERTOIRE").availableAmount();return n===4?12:n===3?4:n}return 0}}const Fn=(e,t,n)=>$t("BRD",e,t,{...n,recastTime:o=>{let l;o.hasResourceAvailable("ARMYS_PAEON")?l="ARMYS_PAEON":o.hasResourceAvailable("ARMYS_MUSE")&&(l="ARMYS_MUSE");const r=o.getSpeedModifier(l);return o.config.adjustedSksGCD(2.5,r)},jobPotencyModifiers:o=>o.getJobPotencyModifiers(e)}),Al=(e,t,n,o)=>et("BRD",e,t,n,{...o,jobPotencyModifiers:l=>l.getJobPotencyModifiers(e)}),rs=(e,t,n,o)=>we("BRD",e,t,n,o);Fn("HEAVY_SHOT",1,{potency:160,applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),autoUpgrade:{trait:"HEAVY_SHOT_MASTERY",otherSkill:"BURST_SHOT"}});Fn("BURST_SHOT",1,{startOnHotbar:!1,potency:[["NEVER",200],["RANGED_MASTERY",220]],applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});Fn("REFULGENT_ARROW",70,{potency:[["NEVER",260],["RANGED_MASTERY",280]],applicationDelay:1.47,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});const Jm=[{skillName:"CAUSTIC_BITE",dotName:"CAUSTIC_BITE",initialPotency:150,tickPotency:20},{skillName:"STORMBITE",dotName:"STORMBITE",initialPotency:100,tickPotency:25}];Jm.forEach(e=>{Fn(e.skillName,1,{potency:e.initialPotency,applicationDelay:1.29,onConfirm:(t,n)=>t.addDoTPotencies({node:n,effectName:e.dotName,skillName:e.skillName,tickPotency:e.tickPotency,speedStat:"sks",modifiers:t.getJobPotencyModifiers(e.skillName)}),onApplication:(t,n)=>{t.applyDoT(e.dotName,n),t.hasTraitUnlocked("BITE_MASTERY_II")&&t.maybeGainProc("HAWKS_EYE",.35)}})});Fn("IRON_JAWS",56,{potency:100,applicationDelay:.67,onConfirm:(e,t)=>{const n=Jm.map(o=>e.hasResourceAvailable(o.dotName));e.addEvent(new Ne("iron jaws dot refresh",.67,()=>{Jm.forEach((o,l)=>{e.refreshDoT({node:t,effectName:o.dotName,tickPotency:o.tickPotency,skillName:"IRON_JAWS",speedStat:"sks",modifiers:e.getJobPotencyModifiers("IRON_JAWS")},n[l])}),e.hasTraitUnlocked("BITE_MASTERY_II")&&e.maybeGainProc("HAWKS_EYE",.35)}))}});Fn("APEX_ARROW",80,{potency:e=>{const t=e.resources.get("SOUL_VOICE"),n=20,o=e.hasTraitUnlocked("RANGED_MASTERY")?140:100,l=e.hasTraitUnlocked("RANGED_MASTERY")?700:500,r=1*(t.availableAmount()-n)/(t.maxValue-n);return(l-o)*r+o},falloff:0,applicationDelay:1.07,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_APEX_ARROW")&&e.resources.get("SOUL_VOICE").availableAmount()>=80&&e.gainStatus("BLAST_ARROW_READY"),e.tryConsumeResource("SOUL_VOICE",!0)},validateAttempt:e=>e.hasResourceAvailable("SOUL_VOICE",20),highlightIf:e=>e.hasResourceAvailable("SOUL_VOICE",80),replaceIf:[{newSkill:"BLAST_ARROW",condition:e=>e.hasResourceAvailable("BLAST_ARROW_READY")}]});Fn("BLAST_ARROW",86,{startOnHotbar:!1,potency:[["NEVER",600],["RANGED_MASTERY",700]],falloff:.5,applicationDelay:1.65,validateAttempt:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),onConfirm:e=>e.tryConsumeResource("BLAST_ARROW_READY")});Al("EMYPREAL_ARROW",54,"cd_EMPYREAL_ARROW",{potency:[["NEVER",240],["RANGED_MASTERY",260]],cooldown:15,applicationDelay:1.03,onConfirm:e=>e.gainRepertoireEffect()});Al("BLOODLETTER",12,"cd_HEARTBREAK_SHOT",{potency:130,cooldown:15,maxCharges:3,applicationDelay:1.65,autoUpgrade:{otherSkill:"HEARTBREAK_SHOT",trait:"BLOODLETTER_MASTERY"}});Al("HEARTBREAK_SHOT",92,"cd_HEARTBREAK_SHOT",{startOnHotbar:!1,potency:180,cooldown:15,maxCharges:3,applicationDelay:1.65});Al("SIDEWINDER",60,"cd_SIDEWINDER",{potency:[["NEVER",320],["RANGED_MASTERY",400]],cooldown:60,applicationDelay:.53});const rw=[{skillName:"WANDERERS_MINUET",song:"WANDERERS_MINUET",skillLevel:52,cdName:"cd_WANDERERS_MINUET",replaceIf:[{newSkill:"PITCH_PERFECT",condition:e=>e.hasResourceAvailable("WANDERERS_MINUET")}]},{skillName:"MAGES_BALLAD",song:"MAGES_BALLAD",skillLevel:30,cdName:"cd_MAGES_BALLAD"},{skillName:"ARMYS_PAEON",song:"ARMYS_PAEON",skillLevel:40,cdName:"cd_ARMYS_PAEON"}];rw.forEach(e=>{Al(e.skillName,e.skillLevel,e.cdName,{applicationDelay:0,requiresCombat:!0,cooldown:120,replaceIf:e.replaceIf,onConfirm:t=>t.beginSong(e.song)})});Al("PITCH_PERFECT",52,"cd_PITCH_PERFECT",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:e=>{const t=e.resources.get("PITCH_PERFECT").availableAmount();return t===3?360:t===2?220:100},falloff:.5,onConfirm:e=>e.tryConsumeResource("PITCH_PERFECT",!0),validateAttempt:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT"),highlightIf:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT")});rs("BARRAGE",38,"cd_BARRAGE",{rscType:"BARRAGE",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_BARRAGE")&&e.gainStatus("RESONANT_ARROW_READY")},replaceIf:[{newSkill:"RESONANT_ARROW",condition:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")}]});Fn("RESONANT_ARROW",96,{startOnHotbar:!1,potency:640,falloff:.5,applicationDelay:1.16,onConfirm:e=>e.tryConsumeResource("RESONANT_ARROW_READY"),validateAttempt:e=>e.hasResourceAvailable("RESONANT_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")});rs("RADIANT_FINALE",90,"cd_RADIANT_FINALE",{rscType:"RADIANT_FINALE",applicationDelay:.62,cooldown:110,onConfirm:e=>{const t=e.getCodaCount();e.resources.get("RADIANT_CODA").overrideCurrentValue(t),e.tryConsumeResource("WANDERERS_CODA"),e.tryConsumeResource("MAGES_CODA"),e.tryConsumeResource("ARMYS_CODA"),e.hasTraitUnlocked("ENHANCED_RADIANT_FINALE")&&e.gainStatus("RADIANT_ENCORE_READY")},validateAttempt:e=>e.getCodaCount()>0,replaceIf:[{newSkill:"RADIANT_ENCORE",condition:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")}]});Fn("RADIANT_ENCORE",100,{startOnHotbar:!1,potency:e=>{const t=e.resources.get("RADIANT_CODA").availableAmount();return t===3?1100:t===2?800:700},falloff:.5,applicationDelay:1.96,onConfirm:e=>e.tryConsumeResource("RADIANT_ENCORE_READY"),validateAttempt:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY"),highlightIf:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")});rs("RAGING_STRIKES",4,"cd_RAGING_STRIKES",{rscType:"RAGING_STRIKES",applicationDelay:.53,cooldown:120});rs("BATTLE_VOICE",50,"cd_BATTLE_VOICE",{rscType:"BATTLE_VOICE",applicationDelay:.62,cooldown:120});Fn("QUICK_NOCK",18,{potency:110,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),falloff:0,autoUpgrade:{trait:"QUICK_NOCK_MASTERY",otherSkill:"LADONSBITE"}});Fn("LADONSBITE",82,{startOnHotbar:!1,potency:140,falloff:0,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});Fn("WIDE_VOLLEY",18,{potency:140,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),autoUpgrade:{trait:"WIDE_VOLLEY_MASTERY",otherSkill:"SHADOWBITE"}});Fn("SHADOWBITE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});Al("RAIN_OF_DEATH",45,"cd_HEARTBREAK_SHOT",{potency:100,cooldown:15,maxCharges:3,falloff:0,applicationDelay:1.65});rs("WARDENS_PAEAN",35,"cd_WARDENS_PAEAN",{rscType:"WARDENS_PAEAN",cooldown:45,applicationDelay:.62});rs("NATURES_MINNE",35,"cd_NATURES_MINNE",{rscType:"NATURES_MINNE",cooldown:120,applicationDelay:.62});Al("REPELLING_SHOT",15,"cd_REPELLING_SHOT",{cooldown:30,animationLock:jt});rs("TROUBADOUR",56,"cd_TROUBADOUR",{rscType:"TROUBADOUR",maxCharges:1,cooldown:90,applicationDelay:0});Object.keys(TR).filter(e=>!(e==="ESPRIT_PARTNER"||e==="STANDARD_FINISH_PARTNER")).forEach(e=>Gt(e,`DNC/${xe[e].name}.png`));Gt("ESPRIT_PARTNER","DNC/Esprit.png");Gt("STANDARD_FINISH_PARTNER","DNC/Standard Finish.png");const zp=["ESPRIT_TECHNICAL","ESPRIT_PARTNER","STANDARD_FINISH_PARTNER","DANCE_PARTNER"];class cw extends Yt{jobSpecificOtherTargetedBuffViewProps(){return zp.map(t=>t==="DANCE_PARTNER"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(TR).filter(t=>!zp.includes(t)).map(t=>t==="CLOSED_POSITION"||t==="RISING_RHYTHM"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("FEATHER_GAUGE").availableAmount(),l=n.get("STANDARD_DANCE").availableAmount(),r=n.get("TECHNICAL_DANCE").availableAmount(),d=[];if(this.state.hasTraitUnlocked("ESPRIT")){const E=n.get("ESPRIT_GAUGE").availableAmount();d.push({kind:"bar",name:g({en:"Esprit",zh:""}),color:t.dnc.esprit,progress:E/100,valueString:E.toFixed(0)})}return d.push({kind:"counter",name:g({en:"Feathers",zh:""}),color:t.dnc.feathers,currentStacks:o,maxStacks:4},{kind:"dance",name:g({en:"Standard",zh:""}),maxStacks:2,currentStacks:l,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette},{kind:"dance",name:g({en:"Technical",zh:""}),maxStacks:4,currentStacks:r,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette}),d}statusLayoutFn(t){return c.jsxs("div",{children:[c.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[c.jsxs("span",{style:{display:"block",marginBottom:10},children:[g({en:"time: ",zh:"",ja:""}),`${We.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?c.jsx(K0,{data:{level:t.level,resources:t.resources},style:{height:"17em"}}):void 0]}),c.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?c.jsx(Y0,{data:t.resourceLocks}):void 0,c.jsx(Gh,{data:t.enemyBuffs,style:{marginTop:50,marginBottom:"2em"}}),c.jsx(Gh,{data:t.selfBuffs,style:{position:"absolute",right:0,width:"200%"}})]})]})}}const it=(e,t,n)=>{je("DNC",e,t,n??{})};it("ESPRIT_GAUGE",100,{warnOnOvercap:!0});it("FEATHER_GAUGE",4,{warnOnOvercap:!0});it("STANDARD_DANCE",2);it("TECHNICAL_DANCE",4);it("SILKEN_SYMMETRY",1,{timeout:30});it("SILKEN_FLOW",1,{timeout:30});it("FLOURISHING_SYMMETRY",1,{timeout:30});it("FLOURISHING_FLOW",1,{timeout:30});it("THREEFOLD_FAN_DANCE",1,{timeout:30,warnOnOvercap:!0});it("FOURFOLD_FAN_DANCE",1,{timeout:30});it("FINISHING_MOVE_READY",1,{timeout:30});it("FLOURISHING_STARFALL",1,{timeout:20});it("STANDARD_STEP",1,{timeout:15});it("STANDARD_FINISH",1,{timeout:60});it("STANDARD_BONUS",2,{timeout:60});it("ESPRIT",1,{timeout:60});it("TECHNICAL_STEP",1,{timeout:15});it("TECHNICAL_FINISH",1,{timeout:20.5});it("TECHNICAL_BONUS",4,{timeout:20.5});it("LAST_DANCE_READY",1,{timeout:30});it("DANCE_OF_THE_DAWN_READY",1,{timeout:30});it("FLOURISHING_FINISH",1,{timeout:30});it("CLOSED_POSITION",1,{default:1});it("DEVILMENT",1,{timeout:20});it("SHIELD_SAMBA",1,{timeout:15});it("IMPROVISATION",1,{timeout:15});it("RISING_RHYTHM",4,{timeout:15});it("IMPROVISATION_REGEN",1,{timeout:15});it("IMPROVISED_FINISH",1,{timeout:30});it("DANCE_PARTNER",1,{default:1});it("ESPRIT_PARTNER",1,{timeout:60});it("STANDARD_FINISH_PARTNER",1,{timeout:60});it("ESPRIT_TECHNICAL",1,{timeout:20});it("CASCADE_COMBO",1,{timeout:30});it("WINDMILL_COMBO",1,{timeout:30});const uw=["CASCADE","FOUNTAIN","WINDMILL","BLADESHOWER"],dw=["EMBOITE","ENTRECHAT","JETE","PIROUETTE"];class hw extends Kt{constructor(t){super(t),this.hasTraitUnlocked("ESPRIT")||this.resources.set(new Wa("ESPRIT_GAUGE",0,0,!0));const n=this.hasTraitUnlocked("ENHANCED_EN_AVANT_II")?3:2;this.cooldowns.set(new Le("cd_EN_AVANT",30,n,n));const o=this.hasTraitUnlocked("ENHANCED_SHIELD_SAMBA")?90:120;this.cooldowns.set(new Le("cd_SHIELD_SAMBA",o,1,1)),this.registerRecurringEvents()}get statusPropsGenerator(){return new cw(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("TECHNICAL_FINISH")&&t.addBuff(k.TechnicalFinish),this.hasResourceAvailable("DEVILMENT")&&t.addBuff(k.Devilment)}cancelChanneledSkills(){this.tryConsumeResource("IMPROVISATION"),this.tryConsumeResource("RISING_RHYTHM",!0)}processComboStatus(t){if(!uw.includes(t))return;const n=t==="CASCADE",o=t==="WINDMILL";this.setComboState("CASCADE_COMBO",n?1:0),this.setComboState("WINDMILL_COMBO",o?1:0)}getCurrentDanceStatus(){const t=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";return this.resources.get(t).availableAmount()}processDanceStatus(t){if(!dw.includes(t))return;const n=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";let o=0;switch(t){case"ENTRECHAT":o=1;break;case"JETE":o=2;break;case"PIROUETTE":o=3;break}const l=this.resources.get(n);l.availableAmount()===o&&l.gain(1)}gainProc(t){this.gainStatus(t)}maybeGainProc(t,n=.5){super.maybeGainProc(t,n,!0)}gainProcIfCombo(t,n){this.triggersEffect(.5,!0)&&n&&this.gainProc(t)}gainResource(t,n){this.resources.get(t).gain(n)}maybeGainResource(t,n,o=.5){this.triggersEffect(o,!0)&&this.gainResource(t,n)}simulatePartyEspritGain(){if(this.hasResourceAvailable("ESPRIT_TECHNICAL")){for(let t=0;t<this.resources.get("PARTY_SIZE").availableAmount()-1;t++)this.maybeGainResource("ESPRIT_GAUGE",10,.2);return}this.hasResourceAvailable("ESPRIT_PARTNER")&&this.maybeGainResource("ESPRIT_GAUGE",10,.2)}applyStandardFinish(t){t!==0&&(this.gainProc("STANDARD_FINISH"),this.gainStatus("STANDARD_BONUS",t),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("STANDARD_FINISH_PARTNER"),this.hasTraitUnlocked("ESPRIT")&&(this.gainProc("ESPRIT"),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("ESPRIT_PARTNER")),this.hasTraitUnlocked("ENHANCED_STANDARD_FINISH")&&this.gainProc("LAST_DANCE_READY"))}}const ta=e=>e.hasResourceAvailable("STANDARD_STEP")||e.hasResourceAvailable("TECHNICAL_STEP"),Q0={newSkill:"EMBOITE",condition:e=>ta(e)},J0={newSkill:"ENTRECHAT",condition:e=>ta(e)},$0={newSkill:"JETE",condition:e=>ta(e)},eO={newSkill:"PIROUETTE",condition:e=>ta(e)},Vt=(e,t,n)=>{const o=Me(l=>{n.potency&&l.simulatePartyEspritGain()},n.onConfirm,l=>l.processComboStatus(e));return $t("DNC",e,t,{...n,onConfirm:o,jobPotencyModifiers:l=>{const r=[];if(l.hasResourceAvailable("STANDARD_FINISH")){const d=l.resources.get("STANDARD_BONUS").availableAmount()===2?q.DoubleStandardFinish:q.SingleStandardFinish;r.push(d)}if(l.hasResourceAvailable("TECHNICAL_FINISH")){const d=l.resources.get("TECHNICAL_BONUS").availableAmount(),E=d===4?q.QuadrupleTechnicalFinish:d===3?q.TripleTechnicalFinish:q.SingleTechnicalFinish;r.push(E)}return l.hasResourceAvailable("DEVILMENT")&&r.push(q.Devilment),e==="STARFALL_DANCE"&&r.push(q.AutoCDH),r}})},pi=(e,t,n,o)=>et("DNC",e,t,n,{...o,onConfirm:o.onConfirm,jobPotencyModifiers:l=>{const r=[];if(l.hasResourceAvailable("STANDARD_FINISH")){const d=l.resources.get("STANDARD_BONUS").availableAmount()===2?q.DoubleStandardFinish:q.SingleStandardFinish;r.push(d)}if(l.hasResourceAvailable("TECHNICAL_FINISH")){const d=l.resources.get("TECHNICAL_BONUS").availableAmount(),E=d===4?q.QuadrupleTechnicalFinish:d===3?q.TripleTechnicalFinish:q.SingleTechnicalFinish;r.push(E)}return l.hasResourceAvailable("DEVILMENT")&&r.push(q.Devilment),r}}),tO=(e,t,n,o)=>we("DNC",e,t,n,o);Vt("EMBOITE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("EMBOITE"),highlightIf:e=>ta(e)&&e.getCurrentDanceStatus()===0});Vt("ENTRECHAT",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("ENTRECHAT"),highlightIf:e=>ta(e)&&e.getCurrentDanceStatus()===1});Vt("JETE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("JETE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2});Vt("PIROUETTE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("PIROUETTE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3});Vt("CASCADE",1,{replaceIf:[Q0],potency:[["NEVER",200],["DYNAMIC_DANCER",220]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.8,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});Vt("FOUNTAIN",2,{replaceIf:[J0],potency:[["NEVER",100],["DYNAMIC_DANCER",120]],combo:{potency:[["NEVER",260],["DYNAMIC_DANCER",280]],resource:"CASCADE_COMBO",resourceValue:1},recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.98,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("CASCADE_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("CASCADE_COMBO").availableAmount()===1});Vt("REVERSE_CASCADE",20,{replaceIf:[$0],potency:[["NEVER",260],["DYNAMIC_DANCER",280]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});Vt("FOUNTAINFALL",40,{replaceIf:[eO],potency:[["NEVER",320],["DYNAMIC_DANCER",340]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.21,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});pi("FAN_DANCE",30,"cd_FAN_DANCE",{potency:[["NEVER",150],["DYNAMIC_DANCER",180]],cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!ta(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});Vt("SABER_DANCE",76,{replaceIf:[{newSkill:"DANCE_OF_THE_DAWN",condition:e=>e.hasResourceAvailable("DANCE_OF_THE_DAWN_READY")&&e.hasResourceAvailable("ESPRIT_GAUGE",50)}],potency:[["NEVER",500],["DYNAMIC_DANCER",540]],recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!ta(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>e.resources.get("ESPRIT_GAUGE").consume(50)});Vt("DANCE_OF_THE_DAWN",100,{startOnHotbar:!1,potency:1e3,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!ta(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>{e.resources.get("ESPRIT_GAUGE").consume(50),e.tryConsumeResource("DANCE_OF_THE_DAWN_READY")}});Vt("LAST_DANCE",92,{potency:540,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("LAST_DANCE_READY")&&!ta(e),highlightIf:e=>e.hasResourceAvailable("LAST_DANCE_READY"),onConfirm:e=>e.tryConsumeResource("LAST_DANCE_READY")});Vt("STANDARD_STEP",15,{replaceIf:[{newSkill:"STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"FINISHING_MOVE",condition:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")}],validateAttempt:e=>!ta(e),onConfirm:e=>e.gainProc("STANDARD_STEP"),recastTime:1.5,secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1}});Vt("FINISHING_MOVE",96,{startOnHotbar:!1,potency:850,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:2.05,onConfirm:e=>{e.applyStandardFinish(2),e.tryConsumeResource("FINISHING_MOVE_READY")},secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1},validateAttempt:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")&&!ta(e),highlightIf:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")});const Ew=[{skill:"STANDARD_FINISH",potency:360},{skill:"SINGLE_STANDARD_FINISH",potency:540},{skill:"DOUBLE_STANDARD_FINISH",potency:[["NEVER",800],["DYNAMIC_DANCER",850]]}];Ew.forEach(e=>{Vt(e.skill,15,{assetPath:"DNC/Standard Finish.png",startOnHotbar:!1,potency:e.potency,falloff:.6,applicationDelay:.54,onConfirm:t=>{const n=t.getCurrentDanceStatus();t.tryConsumeResource("STANDARD_STEP"),t.tryConsumeResource("STANDARD_DANCE",!0),n!==0&&t.applyStandardFinish(n)},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("STANDARD_STEP"),highlightIf:t=>t.hasResourceAvailable("STANDARD_STEP")&&t.getCurrentDanceStatus()===2})});pi("FLOURISH",72,"cd_FLOURISH",{cooldown:60,requiresCombat:!0,validateAttempt:e=>!ta(e),onConfirm:e=>{e.gainProc("FLOURISHING_SYMMETRY"),e.gainProc("FLOURISHING_FLOW"),e.gainProc("THREEFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH")&&e.gainProc("FOURFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH_II")&&e.gainProc("FINISHING_MOVE_READY")}});pi("FAN_DANCE_III",66,"cd_FAN_DANCE_III",{potency:[["NEVER",200],["DYNAMIC_DANCER",220]],cooldown:1,falloff:.6,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE")&&!ta(e),highlightIf:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("THREEFOLD_FAN_DANCE")});pi("FAN_DANCE_IV",86,"cd_FAN_DANCE_IV",{potency:[["NEVER",300],["DYNAMIC_DANCER",460]],falloff:.6,cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE")&&!ta(e),highlightIf:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("FOURFOLD_FAN_DANCE")});Vt("TECHNICAL_STEP",70,{replaceIf:[{newSkill:"TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"TRIPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3},{newSkill:"QUADRUPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===4},{newSkill:"TILLANA",condition:e=>e.hasResourceAvailable("FLOURISHING_FINISH")}],validateAttempt:e=>!ta(e),onConfirm:e=>e.gainProc("TECHNICAL_STEP"),recastTime:1.5,falloff:.75,secondaryCooldown:{cdName:"cd_TECHNICAL_STEP",cooldown:120,maxCharges:1}});Vt("TILLANA",82,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.84,onConfirm:e=>{e.gainResource("ESPRIT_GAUGE",50),e.tryConsumeResource("FLOURISHING_FINISH")},validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_FINISH")&&!ta(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_FINISH")});Vt("TECHNICAL_FINISH",70,{startOnHotbar:!1,potency:350,applicationDelay:.54,onConfirm:e=>{e.tryConsumeResource("TECHNICAL_STEP"),e.tryConsumeResource("TECHNICAL_DANCE",!0)},recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("TECHNICAL_STEP")});const fw=[{skill:"TECHNICAL_FINISH",potency:350},{skill:"SINGLE_TECHNICAL_FINISH",potency:540},{skill:"DOUBLE_TECHNICAL_FINISH",potency:720},{skill:"TRIPLE_TECHNICAL_FINISH",potency:900},{skill:"QUADRUPLE_TECHNICAL_FINISH",potency:[["NEVER",1200],["DYNAMIC_DANCER",1300]]}];fw.forEach(e=>{Vt(e.skill,70,{assetPath:"DNC/Technical Finish.png",startOnHotbar:!1,potency:e.potency,applicationDelay:.54,falloff:.6,onConfirm:t=>{const n=t.getCurrentDanceStatus();t.tryConsumeResource("TECHNICAL_STEP"),t.tryConsumeResource("TECHNICAL_DANCE",!0),n!==0&&(t.gainProc("TECHNICAL_FINISH"),t.hasTraitUnlocked("ESPRIT")&&t.gainProc("ESPRIT_TECHNICAL"),t.gainStatus("TECHNICAL_BONUS",n),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH")&&t.gainProc("FLOURISHING_FINISH"),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH_II")&&t.gainProc("DANCE_OF_THE_DAWN_READY"))},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("TECHNICAL_STEP"),highlightIf:t=>t.hasResourceAvailable("TECHNICAL_STEP")&&t.getCurrentDanceStatus()===4})});tO("DEVILMENT",62,"cd_DEVILMENT",{replaceIf:[{newSkill:"STARFALL_DANCE",condition:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")}],rscType:"DEVILMENT",applicationDelay:0,cooldown:120,validateAttempt:e=>!ta(e),onApplication:e=>{e.hasTraitUnlocked("ENHANCED_DEVILMENT")&&e.gainProc("FLOURISHING_STARFALL")}});Vt("STARFALL_DANCE",90,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.75,applicationDelay:.89,validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")&&!ta(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_STARFALL"),onConfirm:e=>e.tryConsumeResource("FLOURISHING_STARFALL")});Vt("WINDMILL",15,{replaceIf:[Q0],potency:120,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});Vt("BLADESHOWER",25,{replaceIf:[J0],potency:100,recastTime:e=>e.config.adjustedSksGCD(),combo:{potency:160,resource:"WINDMILL_COMBO",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("WINDMILL_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("WINDMILL_COMBO").availableAmount()===1});Vt("RISING_WINDMILL",35,{replaceIf:[$0],potency:160,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});Vt("BLOODSHOWER",45,{replaceIf:[eO],potency:200,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});pi("FAN_DANCE_II",30,"cd_FAN_DANCE_II",{potency:100,cooldown:1,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!ta(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});pi("CURING_WALTZ",52,"cd_CURING_WALTZ",{cooldown:60,applicationDelay:.58});pi("IMPROVISATION",80,"cd_IMPROVISATION",{replaceIf:[{newSkill:"IMPROVISED_FINISH",condition:e=>e.hasResourceAvailable("IMPROVISATION")}],cooldown:120,applicationDelay:.89,validateAttempt:e=>!ta(e),onConfirm:e=>{e.gainProc("IMPROVISATION"),e.gainProc("IMPROVISATION_REGEN");const t=()=>{e.hasResourceAvailable("IMPROVISATION")&&(e.resources.get("RISING_RHYTHM").gain(1),e.gainProc("IMPROVISATION_REGEN"),e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:n=>t()}))};e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:n=>t()}),e.resources.addResourceEvent({rscType:"IMPROVISATION",name:"improvisation timeout",delay:wt("DNC","IMPROVISATION").maxTimeout,fnOnRsc:n=>{n.consume(1),e.tryConsumeResource("RISING_RHYTHM",!0)}})}});pi("IMPROVISED_FINISH",80,"cd_IMPROVISED_FINISH",{startOnHotbar:!1,cooldown:120,applicationDelay:.71,validateAttempt:e=>!ta(e),onConfirm:e=>e.gainProc("IMPROVISED_FINISH")});pi("EN_AVANT",50,"cd_EN_AVANT",{cooldown:30,maxCharges:3,animationLock:jt});tO("SHIELD_SAMBA",56,"cd_SHIELD_SAMBA",{rscType:"SHIELD_SAMBA",maxCharges:1,cooldown:90,applicationDelay:0});pi("CLOSED_POSITION",60,"cd_CLOSED_POSITION",{replaceIf:[{newSkill:"ENDING",condition:e=>e.hasResourceAvailable("CLOSED_POSITION")}],cooldown:30,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.resources.get("CLOSED_POSITION").gain(1),e.resources.get("DANCE_PARTNER").gain(1)},validateAttempt:e=>!e.hasResourceAvailable("CLOSED_POSITION"),secondaryCooldown:{cdName:"cd_ENDING",cooldown:1,maxCharges:1}});pi("ENDING",60,"cd_ENDING",{startOnHotbar:!1,cooldown:1,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("CLOSED_POSITION",!0),e.tryConsumeResource("DANCE_PARTNER",!0),e.tryConsumeResource("STANDARD_FINISH_PARTNER",!0),e.tryConsumeResource("ESPRIT_PARTNER",!0)},secondaryCooldown:{cdName:"cd_CLOSED_POSITION",cooldown:30,maxCharges:1}});const aO=["CHAOS_THRUST_DOT","CHAOTIC_SPRING_DOT"],Aw=Object.keys(SR).filter(e=>!aO.includes(e));Object.keys(SR).forEach(e=>Gt(e,`DRG/${xe[e].name}.png`));class mw extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[...aO.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return Aw.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("DRG_CHAOS_COMBO_TRACKER"),l=n.get("DRG_HEAVENS_COMBO_TRACKER"),r=n.get("DRG_AOE_COMBO_TRACKER"),d=n.get("FIRSTMINDS_FOCUS").availableAmount(),E=n.get("LIFE_OF_THE_DRAGON"),h=E.available(1)?E.pendingChange?.timeTillEvent:void 0,A=o.available(1)?o.pendingChange?.timeTillEvent:l.available(1)?l.pendingChange?.timeTillEvent:r.available(1)?r.pendingChange?.timeTillEvent:void 0;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.drg.drgComboTimer,progress:A?A/30:0,valueString:A?.toFixed(3)??"N/A"},{kind:"bar",name:g({en:"Life of the Dragon"}),color:t.drg.lifeOfTheDragonBar,progress:h?h/20:0,valueString:h?h.toFixed(3):"N/A"},{kind:"counter",name:g({en:"Firstmind's Focus"}),color:t.drg.firstmindsFocusStacks,currentStacks:d,maxStacks:2}]}}const Xa=(e,t,n)=>{je("DRG",e,t,n??{})};Xa("POWER_SURGE",1,{timeout:30});Xa("LIFE_SURGE",1,{timeout:5.52,warnOnTimeout:!0});Xa("ENHANCED_PIERCING_TALON",1,{timeout:15.62});Xa("LANCE_CHARGE",1,{timeout:20});Xa("DIVE_READY",1,{timeout:15.46,warnOnTimeout:!0});Xa("CHAOS_THRUST_DOT",1,{timeout:24});Xa("BATTLE_LITANY",1,{timeout:20});Xa("LIFE_OF_THE_DRAGON",1,{timeout:20});Xa("NASTROND_READY",1,{timeout:20,warnOnTimeout:!0});Xa("DRACONIAN_FIRE",1,{timeout:30});Xa("CHAOTIC_SPRING_DOT",1,{timeout:24});Xa("FIRSTMINDS_FOCUS",2,{warnOnOvercap:!0});Xa("DRAGONS_FLIGHT",1,{timeout:30.79});Xa("STARCROSS_READY",1,{timeout:20,warnOnTimeout:!0});Xa("DRG_CHAOS_COMBO_TRACKER",4,{timeout:30});Xa("DRG_HEAVENS_COMBO_TRACKER",4,{timeout:30});Xa("DRG_AOE_COMBO_TRACKER",2,{timeout:30});const Rw=["DOOM_SPIKE","SONIC_THRUST","COERTHAN_TORMENT","DRACONIAN_FURY"],jp=new Map([["DISEMBOWEL",1],["SPIRAL_BLOW",1],["CHAOS_THRUST",2],["CHAOTIC_SPRING",2],["WHEELING_THRUST",3]]),Yp=new Map([["VORPAL_THRUST",1],["LANCE_BARRAGE",1],["FULL_THRUST",2],["HEAVENS_THRUST",2],["FANG_AND_CLAW",3]]);class Tw extends Kt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_WINGED_GLIDE")?2:1,o=this.hasTraitUnlocked("ENHANCED_LIFE_SURGE")?2:1;[new Le("cd_WINGED_GLIDE",60,n,n),new Le("cd_LIFE_SURGE",40,o,o)].forEach(l=>this.cooldowns.set(l)),this.registerRecurringEvents([{groupedEffects:[{effectName:"CHAOS_THRUST_DOT",appliedBy:["CHAOS_THRUST"]}]},{groupedEffects:[{effectName:"CHAOTIC_SPRING_DOT",appliedBy:["CHAOTIC_SPRING"]}]}])}get statusPropsGenerator(){return new mw(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("POWER_SURGE")&&t.addBuff(k.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.addBuff(k.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.addBuff(k.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.addBuff(k.BattleLitany),n.name==="PIERCING_TALON"&&this.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&t.addBuff(k.EnhancedPiercingTalon),n.cdName==="cd_GCD"&&this.hasResourceAvailable("LIFE_SURGE")&&t.addBuff(k.LifeSurge)}pushUniversalModifiers(t){this.hasResourceAvailable("POWER_SURGE")&&t.push(q.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.push(q.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.push(q.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.push(q.BattleLitany)}fixDRGComboState(t){if(this.tryConsumeResource("DRACONIAN_FIRE",!0),Rw.includes(t)){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0);let n=0;t==="DOOM_SPIKE"||t==="DRACONIAN_FURY"?n=1:t==="SONIC_THRUST"&&this.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(n=2),this.setComboState("DRG_AOE_COMBO_TRACKER",n);return}if(this.tryConsumeResource("DRG_AOE_COMBO_TRACKER",!0),t==="TRUE_THRUST"||t==="RAIDEN_THRUST"){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",1),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",1);return}if(jp.has(t)){const n=jp.get(t);this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",this.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",n)?n+1:0)}else if(Yp.has(t)){const n=Yp.get(t);this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",this.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",n)?n+1:0)}else t==="DRAKESBANE"&&(this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0))}checkCombo(t){return this.hasResourceAvailable(t)}gainScale(t){this.resources.get("FIRSTMINDS_FOCUS").gain(t)}refreshBuff(t,n){this.addEvent(new Ne("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const ka=(e,t,n)=>{const o=Me(n.onConfirm,l=>{e!=="PIERCING_TALON"&&l.fixDRGComboState(e),l.tryConsumeResource("LIFE_SURGE")});return $t("DRG",e,t,{...n,onConfirm:o,recastTime:l=>l.config.adjustedSksGCD(),jobPotencyModifiers:l=>{const r=n.jobPotencyModifiers?.(l)??[];return e==="PIERCING_TALON"&&l.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&r.push(q.EnhancedPiercingTalon),l.pushUniversalModifiers(r),l.hasResourceAvailable("LIFE_SURGE")&&r.push(q.LifeSurge),r}})},ci=(e,t,n,o)=>et("DRG",e,t,n,{...o,onConfirm:o.onConfirm,jobPotencyModifiers:l=>{const r=[];return l.pushUniversalModifiers(r),r}}),Sw={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)},Iw={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)},_w={newSkill:"RAIDEN_THRUST",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},gw={newSkill:"TRUE_THRUST",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},pw={newSkill:"DRACONIAN_FURY",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},Nw={newSkill:"DOOM_SPIKE",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},Cw={newSkill:"STARCROSS",condition:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON")},Ow={newSkill:"STARDIVER",condition:e=>!e.hasResourceAvailable("STARCROSS_READY")};ka("PIERCING_TALON",15,{potency:[["NEVER",150],["LANCE_MASTERY",200]],applicationDelay:.85,onConfirm:e=>{e.tryConsumeResource("ENHANCED_PIERCING_TALON")},highlightIf:e=>e.hasResourceAvailable("ENHANCED_PIERCING_TALON")});ka("TRUE_THRUST",1,{replaceIf:[_w],potency:[["NEVER",200],["LANCE_MASTERY",230]],applicationDelay:.76});ka("RAIDEN_THRUST",76,{startOnHotbar:!1,replaceIf:[gw],potency:[["NEVER",280],["MELEE_MASTERY_DRG",320]],applicationDelay:.62,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});ka("DISEMBOWEL",18,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"SPIRAL_BLOW"},applicationDelay:1.65,potency:[["NEVER",100],["LANCE_MASTERY",140]],combo:{potency:[["NEVER",220],["LANCE_MASTERY",250]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.63))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});ka("SPIRAL_BLOW",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"DISEMBOWEL"},applicationDelay:1.38,potency:140,combo:{potency:[["NEVER",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.38))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});ka("CHAOS_THRUST",50,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOTIC_SPRING"},applicationDelay:1.65,potency:100,combo:{potency:220,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:140,comboPotency:260,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const n=[];e.pushUniversalModifiers(n),e.addDoTPotencies({node:t,effectName:"CHAOS_THRUST_DOT",skillName:"CHAOS_THRUST",tickPotency:40,speedStat:"sks",modifiers:n}),e.addEvent(new Ne("apply chaos thrust dot",1.65,()=>{e.applyDoT("CHAOS_THRUST_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});ka("CHAOTIC_SPRING",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOS_THRUST"},applicationDelay:.45,potency:140,combo:{potency:300,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:180,comboPotency:340,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const n=[];e.pushUniversalModifiers(n),e.addDoTPotencies({node:t,effectName:"CHAOTIC_SPRING_DOT",skillName:"CHAOTIC_SPRING",tickPotency:45,speedStat:"sks",modifiers:n}),e.addEvent(new Ne("apply chaotic spring dot",.45,()=>{e.applyDoT("CHAOTIC_SPRING_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});ka("WHEELING_THRUST",58,{replaceIf:[Sw],applicationDelay:.67,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"rear"},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",3)});ka("VORPAL_THRUST",4,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"LANCE_BARRAGE"},applicationDelay:1.02,potency:[["NEVER",100],["LANCE_MASTERY",130]],combo:{potency:[["NEVER",250],["LANCE_MASTERY",280]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});ka("LANCE_BARRAGE",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"VORPAL_THRUST"},applicationDelay:.94,potency:130,combo:{potency:340,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});ka("FULL_THRUST",26,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"HEAVENS_THRUST"},applicationDelay:1.12,potency:100,combo:{potency:380,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});ka("HEAVENS_THRUST",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"FULL_THRUST"},applicationDelay:.71,potency:[["NEVER",100],["MELEE_MASTERY_DRG",160]],combo:{potency:[["NEVER",400],["MELEE_MASTERY_DRG",460]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});ka("FANG_AND_CLAW",56,{replaceIf:[Iw],applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"flank"},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",3)});ka("DRAKESBANE",64,{startOnHotbar:!1,applicationDelay:1,potency:[["NEVER",380],["LANCE_MASTERY_II",400],["MELEE_MASTERY_DRG",460]],validateAttempt:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4),onConfirm:e=>{(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4))&&e.refreshBuff("DRACONIAN_FIRE",0)},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)});ka("DOOM_SPIKE",40,{replaceIf:[pw],potency:110,falloff:0,applicationDelay:1.29});ka("DRACONIAN_FURY",82,{replaceIf:[Nw],startOnHotbar:!1,potency:130,falloff:0,applicationDelay:.76,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});ka("SONIC_THRUST",62,{applicationDelay:.8,potency:100,combo:{potency:120,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1),onConfirm:e=>{e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",30.79))}});ka("COERTHAN_TORMENT",72,{applicationDelay:.49,potency:100,combo:{potency:150,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:2},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_COERTHAN_TORMENT")&&e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2)&&e.refreshBuff("DRACONIAN_FIRE",0)}});we("DRG","LIFE_SURGE",6,"cd_LIFE_SURGE",{rscType:"LIFE_SURGE",applicationDelay:0,cooldown:40,maxCharges:2});ci("WYRMWIND_THRUST",90,"cd_WYRMWIND_THRUST",{applicationDelay:1.2,validateAttempt:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),highlightIf:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),potency:[["NEVER",420],["MELEE_MASTERY_DRG",440]],falloff:.5,cooldown:10,onConfirm:e=>{e.tryConsumeResource("FIRSTMINDS_FOCUS",!0)}});we("DRG","LANCE_CHARGE",30,"cd_LANCE_CHARGE",{rscType:"LANCE_CHARGE",applicationDelay:.62,cooldown:60});we("DRG","BATTLE_LITANY",52,"cd_BATTLE_LITANY",{rscType:"BATTLE_LITANY",applicationDelay:.62,cooldown:120});ci("GEIRSKOGUL",60,"cd_GEIRSKOGUL",{applicationDelay:.67,potency:[["NEVER",200],["LANCE_MASTERY_III",280]],falloff:.5,cooldown:60,onConfirm:e=>{e.refreshBuff("LIFE_OF_THE_DRAGON",0),e.refreshBuff("NASTROND_READY",0),e.addEvent(new Ne("drop starcross when life drops",20,()=>{e.tryConsumeResource("STARCROSS_READY")}))}});ci("NASTROND",70,"cd_NASTROND",{applicationDelay:.76,potency:[["NEVER",600],["LANCE_MASTERY_III",720]],falloff:.5,cooldown:2,validateAttempt:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),highlightIf:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),onConfirm:e=>{e.tryConsumeResource("NASTROND_READY")}});ci("JUMP",30,"cd_JUMP",{autoUpgrade:{trait:"JUMP_MASTERY",otherSkill:"HIGH_JUMP"},applicationDelay:.49,animationLock:.8,potency:320,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});ci("HIGH_JUMP",74,"cd_HIGH_JUMP",{autoDowngrade:{trait:"JUMP_MASTERY",otherSkill:"JUMP"},applicationDelay:.49,animationLock:.8,potency:400,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});ci("MIRAGE_DIVE",68,"cd_MIRAGE_DIVE",{applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("DIVE_READY"),highlightIf:e=>e.hasResourceAvailable("DIVE_READY"),potency:380,cooldown:1,onConfirm:e=>{e.tryConsumeResource("DIVE_READY")}});ci("DRAGONFIRE_DIVE",50,"cd_DRAGONFIRE_DIVE",{applicationDelay:.8,animationLock:.8,potency:500,falloff:.5,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_DRAGONFIRE_DIVE")&&e.refreshBuff("DRAGONS_FLIGHT",0)}});ci("RISE_OF_THE_DRAGON",92,"cd_RISE_OF_THE_DRAGON",{applicationDelay:1.16,potency:550,falloff:.5,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),highlightIf:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),onConfirm:e=>{e.tryConsumeResource("DRAGONS_FLIGHT")}});ci("STARDIVER",80,"cd_STARDIVER",{replaceIf:[Cw],applicationDelay:1.29,animationLock:1.5,potency:[["NEVER",720],["MELEE_MASTERY_DRG",840]],falloff:.4,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_STARDIVER")&&e.refreshBuff("STARCROSS_READY",0)}});ci("STARCROSS",100,"cd_STARCROSS",{startOnHotbar:!1,replaceIf:[Ow],applicationDelay:.98,potency:1e3,falloff:.4,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),highlightIf:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.tryConsumeResource("STARCROSS_READY")}});ci("ELUSIVE_JUMP",35,"cd_ELUSIVE_JUMP",{potency:0,applicationDelay:0,animationLock:1,cooldown:30,onConfirm:e=>{e.refreshBuff("ENHANCED_PIERCING_TALON",0)}});ci("WINGED_GLIDE",45,"cd_WINGED_GLIDE",{potency:0,applicationDelay:0,animationLock:jt,cooldown:60,maxCharges:2});const nO=["SONIC_BREAK_DOT","BOW_SHOCK_DOT"],bw=Object.keys(_R).filter(e=>!nO.includes(e));Object.keys(_R).forEach(e=>Gt(e,`GNB/${xe[e].name}.png`));class Dw extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[...nO.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return bw.map(t=>t==="ROYAL_GUARD"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("GNB_COMBO_TRACKER"),l=n.get("GNB_AOE_COMBO_TRACKER"),r=n.get("POWDER_GAUGE").availableAmount(),d=n.get("ROYAL_GUARD").availableAmount(),E=o.available(1)?o.pendingChange?.timeTillEvent:l.available(1)?l.pendingChange?.timeTillEvent:void 0,h=n.get("BLOODFEST").available(1)?2:1;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.rdm.manaStack,progress:E?E/30:0,valueString:E?.toFixed(3)??"N/A"},{kind:"counter",name:g({en:"Royal Guard",zh:""}),color:t.rdm.manaStack,currentStacks:d,maxStacks:1},{kind:"counter",name:g({en:"Powder Gauge",zh:""}),color:t.rdm.manaStack,currentStacks:r,maxStacks:(this.state.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2)*h}]}}const Nt=(e,t,n)=>{je("GNB",e,t,n??{})};Nt("POWDER_GAUGE",3,{warnOnOvercap:!0});Nt("ROYAL_GUARD",1);Nt("NO_MERCY",1,{timeout:20});Nt("AURORA",1,{timeout:18});Nt("BOW_SHOCK_DOT",1,{timeout:15});Nt("CAMOUFLAGE",1,{timeout:20});Nt("HEART_OF_CORUNDUM",1,{timeout:8});Nt("CLARITY_OF_CORUNDUM",1,{timeout:15});Nt("CATHARSIS_OF_CORUNDUM",1,{timeout:20});Nt("NEBULA",1,{timeout:15});Nt("GREAT_NEBULA",1,{timeout:15});Nt("HEART_OF_LIGHT",1,{timeout:15});Nt("HEART_OF_STONE",1,{timeout:8});Nt("READY_TO_BLAST",1,{timeout:10,warnOnTimeout:!0});Nt("READY_TO_BREAK",1,{timeout:30,warnOnTimeout:!0});Nt("READY_TO_GOUGE",1,{timeout:10,warnOnTimeout:!0});Nt("READY_TO_RAZE",1,{timeout:10,warnOnTimeout:!0});Nt("READY_TO_REIGN",1,{timeout:30,warnOnTimeout:!0});Nt("READY_TO_RIP",1,{timeout:10,warnOnTimeout:!0});Nt("READY_TO_TEAR",1,{timeout:10,warnOnTimeout:!0});Nt("SONIC_BREAK_DOT",1,{timeout:15});Nt("SUPERBOLIDE",1,{timeout:10});Nt("BRUTAL_SHELL",1,{timeout:30});Nt("GNB_COMBO_TRACKER",2,{timeout:30});Nt("GNB_AOE_COMBO_TRACKER",1,{timeout:30});Nt("GNB_GNASHING_COMBO_TRACKER",2,{timeout:30});Nt("GNB_REIGN_COMBO_TRACKER",2,{timeout:30});Nt("BLOODFEST",1,{timeout:30});const Kp=["KEEN_EDGE","BRUTAL_SHELL","SOLID_BARREL"],yw=["DEMON_SLICE","DEMON_SLAUGHTER"],Vp=["GNASHING_FANG","SAVAGE_CLAW","WICKED_TALON"],Wp=["REIGN_OF_BEASTS","NOBLE_BLOOD","LION_HEART"];class vw extends Kt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_AURORA")?2:1;[new Le("cd_AURORA",60,n,n)].forEach(l=>this.cooldowns.set(l)),this.cooldowns.set(new Le("cd_DOUBLE_DOWN",this.config.adjustedSksGCD(60),1,1));const o=this.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;this.resources.set(new Wa("POWDER_GAUGE",o,0,!0)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SONIC_BREAK_DOT",appliedBy:["SONIC_BREAK"]}]},{groupedEffects:[{effectName:"BOW_SHOCK_DOT",appliedBy:["BOW_SHOCK"]}]}])}get statusPropsGenerator(){return new Dw(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("NO_MERCY")&&t.addBuff(k.NoMercy)}fixGNBComboState(t){if(yw.includes(t)){this.tryConsumeResource("GNB_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_AOE_COMBO_TRACKER"),t==="DEMON_SLICE"&&this.setComboState("GNB_AOE_COMBO_TRACKER",1);return}let n="GNB_COMBO_TRACKER",o=-1;Kp.includes(t)?(this.tryConsumeResource("GNB_AOE_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),o=Kp.indexOf(t)):Vp.includes(t)?(this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),n="GNB_GNASHING_COMBO_TRACKER",o=Vp.indexOf(t)):Wp.includes(t)&&(this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),n="GNB_REIGN_COMBO_TRACKER",o=Wp.indexOf(t));let l=0;o===0?l=1:o===1&&this.hasResourceExactly(n,1)&&(l=2),this.setComboState(n,l)}gainCartridge(t){this.resources.get("POWDER_GAUGE").gain(t)}refreshBuff(t,n){this.addEvent(new Ne("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const tn=(e,t,n)=>{const o=Me(n.onConfirm,l=>{["SONIC_BREAK","BURST_STRIKE","FATED_CIRCLE","DOUBLE_DOWN","LIGHTNING_SHOT"].includes(e)||l.fixGNBComboState(e),l.tryConsumeResource("READY_TO_BLAST"),l.tryConsumeResource("READY_TO_RAZE"),l.tryConsumeResource("READY_TO_RIP"),l.tryConsumeResource("READY_TO_TEAR"),l.tryConsumeResource("READY_TO_GOUGE")});return $t("GNB",e,t,{...n,onConfirm:o,recastTime:l=>l.config.adjustedSksGCD(),jobPotencyModifiers:l=>l.hasResourceAvailable("NO_MERCY")?[q.NoMercy]:[]})},aa=(e,t,n,o)=>et("GNB",e,t,n,{...o,jobPotencyModifiers:l=>l.hasResourceAvailable("NO_MERCY")?[q.NoMercy]:[]}),iO={newSkill:"GNASHING_FANG",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===0},oO={newSkill:"SAVAGE_CLAW",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===1},lO={newSkill:"WICKED_TALON",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===2},sO={newSkill:"REIGN_OF_BEASTS",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===0},rO={newSkill:"NOBLE_BLOOD",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===1},cO={newSkill:"LION_HEART",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===2},Mw={newSkill:"HYPERVELOCITY",condition:e=>e.hasResourceAvailable("READY_TO_BLAST")},Lw={newSkill:"FATED_BRAND",condition:e=>e.hasResourceAvailable("READY_TO_RAZE")},Hw={newSkill:"JUGULAR_RIP",condition:e=>e.hasResourceAvailable("READY_TO_RIP")},Uw={newSkill:"ABDOMEN_TEAR",condition:e=>e.hasResourceAvailable("READY_TO_TEAR")},kw={newSkill:"EYE_GOUGE",condition:e=>e.hasResourceAvailable("READY_TO_GOUGE")},xw={newSkill:"ROYAL_GUARD",condition:e=>!e.hasResourceAvailable("ROYAL_GUARD")},Pw={newSkill:"RELEASE_ROYAL_GUARD",condition:e=>e.hasResourceAvailable("ROYAL_GUARD")};tn("LIGHTNING_SHOT",15,{potency:150,applicationDelay:.72});tn("KEEN_EDGE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",300]],applicationDelay:.89});tn("BRUTAL_SHELL",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",380]],resource:"GNB_COMBO_TRACKER",resourceValue:1},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",1)&&e.refreshBuff("BRUTAL_SHELL",0)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",1)});tn("SOLID_BARREL",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",460]],resource:"GNB_COMBO_TRACKER",resourceValue:2},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",2)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",2)});tn("DEMON_SLICE",10,{potency:100,falloff:0,applicationDelay:.62});tn("DEMON_SLAUGHTER",40,{potency:100,combo:{potency:160,resource:"GNB_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)});tn("BURST_STRIKE",30,{potency:[["NEVER",340],["MELEE_MASTERY_II_TANK",420]],applicationDelay:.71,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION")&&e.refreshBuff("READY_TO_BLAST",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});tn("FATED_CIRCLE",72,{potency:300,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION_II")&&e.refreshBuff("READY_TO_RAZE",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});aa("BLOODFEST",76,"cd_BLOODFEST",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{const t=e.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;e.gainStatus("BLOODFEST"),e.resources.set(new Wa("POWDER_GAUGE",t*2,e.resources.get("POWDER_GAUGE").availableAmount())),e.addEvent(new Ne("restore bloodfest max stacks",wt("GNB","BLOODFEST").maxTimeout,()=>{e.resources.get("POWDER_GAUGE").availableAmount()>t&&p.reportWarning({kind:"overcap",rsc:"POWDER_GAUGE"}),e.resources.set(new Wa("POWDER_GAUGE",t,Math.min(e.resources.get("POWDER_GAUGE").availableAmount(),t)))})),e.gainCartridge(t),e.hasTraitUnlocked("ENHANCED_BLOODFEST")&&e.refreshBuff("READY_TO_REIGN",0)}});aa("NO_MERCY",2,"cd_NO_MERCY",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.refreshBuff("NO_MERCY",.62),e.refreshBuff("READY_TO_BREAK",0)}});tn("SONIC_BREAK",54,{potency:340,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BREAK"),onConfirm:(e,t)=>{e.tryConsumeResource("READY_TO_BREAK");const n=[];e.hasResourceAvailable("NO_MERCY")&&n.push(q.NoMercy),e.addDoTPotencies({node:t,effectName:"SONIC_BREAK_DOT",skillName:"SONIC_BREAK",tickPotency:120,speedStat:"sks",modifiers:n})},onApplication:(e,t)=>e.applyDoT("SONIC_BREAK_DOT",t),highlightIf:e=>e.hasResourceAvailable("READY_TO_BREAK")});tn("GNASHING_FANG",60,{replaceIf:[oO,lO],potency:[["NEVER",330],["MELEE_MASTERY_II_TANK",440]],applicationDelay:.62,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.refreshBuff("READY_TO_RIP",0),e.tryConsumeResource("POWDER_GAUGE")},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")&&!e.hasResourceAvailable("GNB_REIGN_COMBO_TRACKER"),secondaryCooldown:{cdName:"cd_GNASHING_FANG",cooldown:30,maxCharges:2}});tn("SAVAGE_CLAW",60,{startOnHotbar:!1,replaceIf:[iO,lO],potency:[["NEVER",410],["MELEE_MASTERY_II_TANK",500]],applicationDelay:.62,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1),onConfirm:e=>{e.refreshBuff("READY_TO_TEAR",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1)});tn("WICKED_TALON",60,{startOnHotbar:!1,replaceIf:[iO,oO],potency:[["NEVER",490],["MELEE_MASTERY_II_TANK",560]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2),onConfirm:e=>{e.refreshBuff("READY_TO_GOUGE",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2)});tn("DOUBLE_DOWN",90,{potency:1e3,falloff:.15,applicationDelay:.72,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE",2),onConfirm:e=>{e.resources.get("POWDER_GAUGE").consume(2)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE",2),secondaryCooldown:{cdName:"cd_DOUBLE_DOWN",cooldown:60,maxCharges:1}});tn("REIGN_OF_BEASTS",100,{replaceIf:[rO,cO],potency:800,falloff:.6,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("READY_TO_REIGN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REIGN")},highlightIf:e=>e.hasResourceAvailable("READY_TO_REIGN")});tn("NOBLE_BLOOD",100,{startOnHotbar:!1,replaceIf:[sO,cO],potency:900,falloff:.6,applicationDelay:1.65,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1)});tn("LION_HEART",100,{startOnHotbar:!1,replaceIf:[sO,rO],potency:1e3,falloff:.6,applicationDelay:1.79,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2)});aa("CONTINUATION",70,"cd_CONTINUATION",{replaceIf:[Mw,Lw,Hw,Uw,kw],applicationDelay:0,potency:0,cooldown:1,validateAttempt:e=>!1});aa("HYPERVELOCITY",86,"cd_HYPERVELOCITY",{startOnHotbar:!1,applicationDelay:.76,potency:[["NEVER",140],["MELEE_MASTERY_II_TANK",180]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BLAST"),highlightIf:e=>e.hasResourceAvailable("READY_TO_BLAST"),onConfirm:e=>{e.tryConsumeResource("READY_TO_BLAST")}});aa("FATED_BRAND",96,"cd_FATED_BRAND",{startOnHotbar:!1,applicationDelay:1.16,potency:120,falloff:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RAZE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RAZE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RAZE")}});aa("JUGULAR_RIP",70,"cd_JUGULAR_RIP",{startOnHotbar:!1,applicationDelay:.8,potency:[["NEVER",180],["MELEE_MASTERY_II_TANK",220]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RIP"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RIP"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RIP")}});aa("ABDOMEN_TEAR",70,"cd_ABDOMEN_TEAR",{startOnHotbar:!1,applicationDelay:.76,potency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_TEAR"),highlightIf:e=>e.hasResourceAvailable("READY_TO_TEAR"),onConfirm:e=>{e.tryConsumeResource("READY_TO_TEAR")}});aa("EYE_GOUGE",70,"cd_EYE_GOUGE",{startOnHotbar:!1,applicationDelay:.98,potency:[["NEVER",260],["MELEE_MASTERY_II_TANK",300]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_GOUGE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_GOUGE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_GOUGE")}});aa("DANGER_ZONE",18,"cd_DANGER_ZONE",{autoUpgrade:{trait:"DANGER_ZONE_MASTERY",otherSkill:"BLASTING_ZONE"},applicationDelay:.62,potency:250,cooldown:30});aa("BLASTING_ZONE",80,"cd_BLASTING_ZONE",{startOnHotbar:!1,applicationDelay:.62,potency:800,cooldown:30});aa("BOW_SHOCK",62,"cd_BOW_SHOCK",{applicationDelay:.62,potency:150,falloff:0,cooldown:60,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("NO_MERCY")&&n.push(q.NoMercy),e.addDoTPotencies({node:t,effectName:"BOW_SHOCK_DOT",skillName:"BOW_SHOCK",tickPotency:60,speedStat:"sks",modifiers:n})},onApplication:(e,t)=>e.applyDoT("BOW_SHOCK_DOT",t)});aa("TRAJECTORY",56,"cd_TRAJECTORY",{animationLock:jt,cooldown:30,maxCharges:2,applicationDelay:.66,drawsAggro:!0});aa("HEART_OF_STONE",68,"cd_HEART_OF_STONE",{autoUpgrade:{trait:"HEART_OF_STONE_MASTERY",otherSkill:"HEART_OF_CORUNDUM"},applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("HEART_OF_STONE",0)}});aa("HEART_OF_CORUNDUM",82,"cd_HEART_OF_CORUNDUM",{startOnHotbar:!1,applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("CATHARSIS_OF_CORUNDUM",0),e.refreshBuff("HEART_OF_CORUNDUM",0),e.refreshBuff("CLARITY_OF_CORUNDUM",0)}});aa("SUPERBOLIDE",50,"cd_SUPERBOLIDE",{applicationDelay:0,cooldown:360,onConfirm:e=>{e.refreshBuff("SUPERBOLIDE",0)}});aa("CAMOUFLAGE",6,"cd_CAMOUFLAGE",{applicationDelay:.62,cooldown:90,onConfirm:e=>{e.refreshBuff("CAMOUFLAGE",0)}});aa("NEBULA",38,"cd_NEBULA",{autoUpgrade:{trait:"NEBULA_MASTERY",otherSkill:"GREAT_NEBULA"},applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("NEBULA",0)}});aa("GREAT_NEBULA",38,"cd_GREAT_NEBULA",{startOnHotbar:!1,applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("GREAT_NEBULA",0)}});aa("HEART_OF_LIGHT",64,"cd_HEART_OF_LIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("HEART_OF_LIGHT",0)}});aa("AURORA",45,"cd_AURORA",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("AURORA",0)},maxCharges:2});aa("ROYAL_GUARD",10,"cd_ROYAL_GUARD",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.resources.get("ROYAL_GUARD").gain(1)},replaceIf:[Pw],secondaryCooldown:{cdName:"cd_RELEASE_ROYAL_GUARD",cooldown:1,maxCharges:1}});aa("RELEASE_ROYAL_GUARD",10,"cd_RELEASE_ROYAL_GUARD",{startOnHotbar:!1,replaceIf:[xw],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.tryConsumeResource("ROYAL_GUARD")},secondaryCooldown:{cdName:"cd_ROYAL_GUARD",cooldown:2,maxCharges:1}});Object.keys(gR).forEach(e=>Gt(e,`MCH/${xe[e].name}.png`));class ww extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[...["WILDFIRE","BIOBLASTER"].map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(gR).filter(t=>!(t==="WILDFIRE"||t==="BIOBLASTER")).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("HEAT_GAUGE").availableAmount(),l=n.get("BATTERY_GAUGE").availableAmount(),r=n.get("QUEEN_PUNCHES"),d=n.get("QUEEN_FINISHERS"),E=r.availableAmount()+d.availableAmount(),h=r.maxValue+d.maxValue;return[{kind:"bar",name:g({en:"Heat",zh:""}),color:t.mch.heat,progress:o/100,valueString:o.toFixed(0)},{kind:"bar",name:g({en:"Battery",zh:""}),color:t.mch.battery,progress:l/100,valueString:l.toFixed(0)},{kind:"bar",name:g({en:"Queen Hits",zh:""}),color:t.mch.battery,progress:E/h,valueString:E.toFixed(0)}]}}const xa=(e,t,n)=>{je("MCH",e,t,n??{})};xa("HEAT_GAUGE",100,{warnOnOvercap:!0});xa("BATTERY_GAUGE",100,{warnOnOvercap:!0});xa("REASSEMBLED",1,{timeout:5,warnOnTimeout:!0});xa("OVERHEATED",5,{timeout:10,warnOnTimeout:!0});xa("WILDFIRE",1,{timeout:10});xa("WILDFIRE_SELF",1,{timeout:10});xa("FLAMETHROWER",1,{timeout:10});xa("BIOBLASTER",1,{timeout:15});xa("TACTICIAN",1,{timeout:15});xa("HYPERCHARGED",1,{timeout:30,warnOnTimeout:!0});xa("EXCAVATOR_READY",1,{timeout:30,warnOnTimeout:!0});xa("FULL_METAL_MACHINIST",1,{timeout:30,warnOnTimeout:!0});xa("HEAT_COMBO",2,{timeout:30});xa("QUEEN",7);xa("QUEEN_PUNCHES",5);xa("QUEEN_FINISHERS",2);xa("WILDFIRE_HITS",6);xa("BATTERY_BONUS",50);const Gw=["HEATED_CLEAN_SHOT","HEATED_SLUG_SHOT","HEATED_SPLIT_SHOT","SPREAD_SHOT","SCATTERGUN"],Xp=["CHAIN_SAW","EXCAVATOR","FULL_METAL_FIELD","SCATTERGUN","BIOBLASTER","SPREAD_SHOT"];class Bw extends Kt{constructor(t){super(t),this.cooldowns.set(new Le("cd_AIR_ANCHOR",this.config.adjustedSksGCD(40),1,1)),this.cooldowns.set(new Le("cd_CHAINSAW",this.config.adjustedSksGCD(60),1,1)),this.hasTraitUnlocked("QUEENS_GAMBIT")||(this.resources.set(new Wa("QUEEN_FINISHERS",1,0)),this.resources.set(new Wa("QUEEN",6,0))),this.hasTraitUnlocked("ENHANCED_REASSEMBLE")||this.cooldowns.set(new Le("cd_REASSEMBLE",55,1,1)),this.hasTraitUnlocked("ENHANCED_MULTI_WEAPON")||this.cooldowns.set(new Le("cd_DRILL",this.config.adjustedSksGCD(20),1,1)),this.hasTraitUnlocked("CHARGED_ACTION_MASTERY")||(this.cooldowns.set(new Le("cd_DOUBLE_CHECK",30,2,2)),this.cooldowns.set(new Le("cd_CHECKMATE",30,2,2))),this.hasTraitUnlocked("ENHANCED_TACTICIAN")||this.cooldowns.set(new Le("cd_TACTICIAN",120,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"BIOBLASTER",appliedBy:["BIOBLASTER"]}]},{groupedEffects:[{effectName:"FLAMETHROWER",appliedBy:["FLAMETHROWER"],isGroundTargeted:!0,exclude:!0}]}],["ROOK_AUTOTURRET","AUTOMATON_QUEEN","WILDFIRE"])}get statusPropsGenerator(){return new ww(this)}jobSpecificRegisterRecurringEvents(){const t=()=>{this.handleDoTTick("FLAMETHROWER"),this.getDisplayTime()>=0&&p.reportDotTick(this.time,"FLAMETHROWER"),this.addEvent(new Ne("Flamethrower tick",1,()=>{t()}))};let n=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;n>1;)n--;this.addEvent(new Ne("initial Flamethrower tick",n,t))}cancelChanneledSkills(){this.tryConsumeResource("FLAMETHROWER")}processComboStatus(t){if(!Gw.includes(t))return;const n=this.resources.get("HEAT_COMBO").availableAmount();let o=0;n===0&&t==="HEATED_SPLIT_SHOT"?o=1:n===1&&t==="HEATED_SLUG_SHOT"&&(o=2),this.setComboState("HEAT_COMBO",o)}gainResource(t,n){this.resources.get(t).gain(n)}handleQueenPunch=()=>{if(!this.hasResourceAvailable("QUEEN_PUNCHES")){this.handleQueenFinisher();return}const t=this.resources.get("QUEEN").node;t!==void 0&&this.resolveQueenPotency(t),this.resources.get("QUEEN_PUNCHES").consume(1),this.hasResourceAvailable("QUEEN_PUNCHES")?this.addEvent(new Ne("queen punch",1.56,()=>this.handleQueenPunch())):this.addEvent(new Ne("queen finisher",1.56,()=>this.handleQueenFinisher()))};resolveQueenPotency(t){const n=this.resources.get("QUEEN_PUNCHES").availableAmount()+this.resources.get("QUEEN_FINISHERS").availableAmount(),o=this.resources.get("QUEEN").availableAmount()-n;if(o<0)return;const l=t.getDotPotencies("QUEEN")[o];this.hasResourceAvailable("TINCTURE")&&l.modifiers.push(q.Tincture),l.snapshotTime=this.getDisplayTime(),p.resolvePotency(l)}calculateQueenPotency(t,n){const o=this.resources.get("BATTERY_BONUS").availableAmount(),l=(n-t)*(o/50);return Math.floor((t+l)*.89)}handleQueenFinisher=()=>{if(!this.hasResourceAvailable("QUEEN_FINISHERS"))return;const t=this.resources.get("QUEEN").node;t!==void 0&&this.resolveQueenPotency(t),this.resources.get("QUEEN_FINISHERS").consume(1),this.hasResourceAvailable("QUEEN_FINISHERS")?this.addEvent(new Ne("queen finisher",2,()=>this.handleQueenFinisher())):(this.tryConsumeResource("BATTERY_BONUS",!0),this.addEvent(new Ne("expire queen",5,()=>{this.tryConsumeResource("QUEEN",!0)})))};expireWildfire(){if(!this.hasResourceAvailable("WILDFIRE_HITS"))return;this.tryConsumeResource("WILDFIRE_SELF"),this.tryConsumeResource("WILDFIRE");const t=this.hasTraitUnlocked("ENHANCED_WILD_FIRE")?240:100,n=Math.min(this.resources.get("WILDFIRE_HITS").availableAmount(),6)*t,o=this.resources.get("WILDFIRE").node;if(o===void 0)return;const l=o.getDotPotencies("WILDFIRE")[0];l.base=n,p.resolvePotency(l),this.tryConsumeResource("WILDFIRE_HITS",!0)}}const hn=(e,t,n)=>{const o=Me(n.onConfirm,l=>l.processComboStatus(e),l=>{e!=="FULL_METAL_FIELD"&&l.tryConsumeResource("REASSEMBLED")},l=>{l.hasResourceAvailable("WILDFIRE_SELF")&&l.resources.get("WILDFIRE_HITS").gain(1)},l=>{Xp.includes(e)||l.tryConsumeResource("OVERHEATED")});return $t("MCH",e,t,{...n,onConfirm:o,jobPotencyModifiers:l=>{const r=[];return(l.hasResourceAvailable("REASSEMBLED")||e==="FULL_METAL_FIELD")&&r.push(q.AutoCDH),l.hasResourceAvailable("OVERHEATED")&&!Xp.includes(e)&&r.push(q.Overheated),r}})},Yi=(e,t,n,o)=>et("MCH",e,t,n,o),uT=(e,t,n,o)=>{const l=Me(o.onConfirm);return we("MCH",e,t,n,{...o,onConfirm:l})};hn("HEATED_SPLIT_SHOT",54,{potency:[["NEVER",180],["MARKSMANS_MASTERY",200],["MARKSMANS_MASTERY_II",220]],applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});hn("HEATED_SLUG_SHOT",60,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",140]],combo:{potency:[["NEVER",280],["MARKSMANS_MASTERY",300],["MARKSMANS_MASTERY_II",320]],resource:"HEAT_COMBO",resourceValue:1},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5),highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",1)});hn("HEATED_CLEAN_SHOT",64,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",160]],combo:{potency:[["NEVER",360],["MARKSMANS_MASTERY",380],["MARKSMANS_MASTERY_II",420]],resource:"HEAT_COMBO",resourceValue:2},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("HEAT_GAUGE",5),e.gainResource("BATTERY_GAUGE",10)},highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",2)});uT("REASSEMBLE",10,"cd_REASSEMBLE",{rscType:"REASSEMBLED",applicationDelay:0,cooldown:55,maxCharges:2});const TE=[["NEVER",620],["MARKSMANS_MASTERY_II",660]];hn("DRILL",58,{potency:TE,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2}});hn("HOT_SHOT",4,{autoUpgrade:{trait:"HOT_SHOT_MASTERY",otherSkill:"AIR_ANCHOR"},potency:240,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});hn("AIR_ANCHOR",76,{startOnHotbar:!1,potency:TE,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});hn("CHAIN_SAW",90,{replaceIf:[{newSkill:"EXCAVATOR",condition:e=>e.hasResourceAvailable("EXCAVATOR_READY")}],potency:TE,falloff:.25,applicationDelay:1.03,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.hasTraitUnlocked("ENHANCED_MULTI_WEAPON_II")&&e.gainStatus("EXCAVATOR_READY")},secondaryCooldown:{cdName:"cd_CHAINSAW",cooldown:60,maxCharges:1}});hn("EXCAVATOR",90,{startOnHotbar:!1,potency:TE,falloff:.25,applicationDelay:1.07,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.tryConsumeResource("EXCAVATOR_READY")},validateAttempt:e=>e.hasResourceAvailable("EXCAVATOR_READY"),highlightIf:e=>e.hasResourceAvailable("EXCAVATOR_READY")});Yi("BARREL_STABILIZER",66,"cd_BARREL_STABILIZER",{replaceIf:[{newSkill:"FULL_METAL_FIELD",condition:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")}],applicationDelay:0,cooldown:120,maxCharges:1,requiresCombat:!0,onConfirm:e=>{e.gainStatus("HYPERCHARGED"),e.hasTraitUnlocked("ENHANCED_BARREL_STABILIZER")&&e.gainStatus("FULL_METAL_MACHINIST")}});hn("FULL_METAL_FIELD",100,{startOnHotbar:!1,potency:900,falloff:.25,applicationDelay:1.02,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.tryConsumeResource("FULL_METAL_MACHINIST"),validateAttempt:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST"),highlightIf:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")});uT("HYPERCHARGE",30,"cd_HYPERCHARGE",{rscType:"OVERHEATED",applicationDelay:0,cooldown:10,maxCharges:1,onConfirm:e=>{e.hasResourceAvailable("HYPERCHARGED")?e.tryConsumeResource("HYPERCHARGED"):e.resources.get("HEAT_GAUGE").consume(50)},validateAttempt:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED"),highlightIf:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED")});Yi("WILDFIRE",45,"cd_WILDFIRE",{replaceIf:[{newSkill:"DETONATOR",condition:e=>e.hasResourceAvailable("WILDFIRE_SELF")}],applicationDelay:.67,cooldown:120,maxCharges:1,onConfirm:(e,t)=>{e.gainStatus("WILDFIRE_SELF");const n=e.resources.get("WILDFIRE"),o=new Zt({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"WILDFIRE",aspect:Ie.Physical,basePotency:0,snapshotTime:e.getDisplayTime(),description:"wildfire",targetCount:1});o.modifiers=[q.NoCDH],e.hasResourceAvailable("TINCTURE")&&o.modifiers.push(q.Tincture),t.addDoTPotency(o,"WILDFIRE"),n.gain(1),n.node=t,e.resources.addResourceEvent({rscType:"WILDFIRE",name:"wildfire expiration",delay:wt("MCH","WILDFIRE").maxTimeout,fnOnRsc:l=>e.expireWildfire()})}});Yi("DETONATOR",45,"cd_DETONATOR",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,maxCharges:1,onConfirm:e=>e.expireWildfire(),validateAttempt:e=>e.hasResourceAvailable("WILDFIRE_SELF")});hn("BLAZING_SHOT",68,{potency:[["NEVER",220],["MARKSMANS_MASTERY_II",240]],applicationDelay:.85,recastTime:1.5,onConfirm:e=>{e.cooldowns.get("cd_DOUBLE_CHECK").restore(15),e.cooldowns.get("cd_CHECKMATE").restore(15)},validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});Yi("GAUSS_ROUND",15,"cd_DOUBLE_CHECK",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"DOUBLE_CHECK"},potency:130,applicationDelay:.71,cooldown:30,maxCharges:3});Yi("DOUBLE_CHECK",92,"cd_DOUBLE_CHECK",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});Yi("RICOCHET",50,"cd_CHECKMATE",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"CHECKMATE"},potency:130,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});Yi("CHECKMATE",92,"cd_CHECKMATE",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});const Fw=[{skillName:"ROOK_AUTOTURRET",skillLevel:40,autoUpgrade:{otherSkill:"AUTOMATON_QUEEN",trait:"PROMOTION"}},{skillName:"AUTOMATON_QUEEN",skillLevel:80,startOnHotbar:!1}];Fw.forEach(e=>{Yi(e.skillName,e.skillLevel,"cd_QUEEN",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:6,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("BATTERY_GAUGE",50)&&!t.hasResourceAvailable("QUEEN"),onConfirm:(t,n)=>{const o=t.resources.get("BATTERY_GAUGE").availableAmount();t.resources.get("BATTERY_BONUS").gain(o-50),t.tryConsumeResource("BATTERY_GAUGE",!0);const l=t.resources.get("QUEEN_PUNCHES");l.gain(5);const r=t.hasTraitUnlocked("QUEENS_GAMBIT")?2:1;t.resources.get("QUEEN_FINISHERS").gain(r),t.resources.get("QUEEN").gain(l.availableAmount()+r);let d="VOLLEY_FIRE",E=0;t.hasTraitUnlocked("PROMOTION")?(d="ARM_PUNCH",E=t.calculateQueenPotency(120,240)):E=t.calculateQueenPotency(35,75);for(let h=0;h<l.availableAmount();h++)n.addDoTPotency(new Zt({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:Ie.Physical,description:"",basePotency:E,snapshotTime:void 0,targetCount:n.targetCount}),"QUEEN");d=t.hasTraitUnlocked("PROMOTION")?"PILE_BUNKER":"ROOK_OVERLOAD",d==="PILE_BUNKER"?E=t.calculateQueenPotency(340,680):E=t.calculateQueenPotency(160,320),n.addDoTPotency(new Zt({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:Ie.Physical,description:"",basePotency:E,snapshotTime:void 0,targetCount:n.targetCount}),"QUEEN"),t.hasTraitUnlocked("QUEENS_GAMBIT")&&n.addDoTPotency(new Zt({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:"CROWNED_COLLIDER",aspect:Ie.Physical,description:"",basePotency:t.calculateQueenPotency(390,780),snapshotTime:void 0,targetCount:n.targetCount}),"QUEEN"),t.resources.get("QUEEN").node=n,t.addEvent(new Ne("initial queen punch",5.5,()=>t.handleQueenPunch()))}})});const zw=[{skillName:"ROOK_OVERDRIVE",skillLevel:40,autoUpgrade:{otherSkill:"QUEEN_OVERDRIVE",trait:"PROMOTION"}},{skillName:"QUEEN_OVERDRIVE",skillLevel:80,startOnHotbar:!1}];zw.forEach(e=>{Yi(e.skillName,e.skillLevel,"cd_OVERDRIVE",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:15,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("QUEEN_PUNCHES"),onConfirm:t=>{t.tryConsumeResource("QUEEN_PUNCHES",!0)}})});hn("SPREAD_SHOT",18,{autoUpgrade:{trait:"SPREAD_SHOT_MASTERY",otherSkill:"SCATTERGUN"},potency:110,falloff:0,applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});hn("SCATTERGUN",82,{startOnHotbar:!1,potency:130,falloff:0,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",10)});hn("BIOBLASTER",58,{potency:50,falloff:0,applicationDelay:.97,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2},onConfirm:(e,t)=>e.addDoTPotencies({node:t,effectName:"BIOBLASTER",skillName:"BIOBLASTER",tickPotency:50,speedStat:"sks"}),onApplication:(e,t)=>e.applyDoT("BIOBLASTER",t)});hn("AUTO_CROSSBOW",52,{potency:[["NEVER",140],["MARKSMANS_MASTERY_II",180]],falloff:0,applicationDelay:.89,recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});hn("FLAMETHROWER",70,{applicationDelay:.89,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"FLAMETHROWER",skillName:"FLAMETHROWER",tickPotency:120,tickFrequency:1,speedStat:"sks"})},onApplication:(e,t)=>{e.applyDoT("FLAMETHROWER",t)},secondaryCooldown:{cdName:"cd_FLAMETHROWER",cooldown:60,maxCharges:1}});uT("TACTICIAN",56,"cd_TACTICIAN",{rscType:"TACTICIAN",maxCharges:1,cooldown:90,applicationDelay:.62});Yi("DISMANTLE",62,"cd_DISMANTLE",{maxCharges:1,cooldown:120,applicationDelay:.62});Object.keys(CR).forEach(e=>Gt(e,`PCT/${xe[e].name}.png`));class jw extends Yt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(CR).map(t=>t==="MONOCHROME_TONES"||t==="SUBTRACTIVE_PALETTE"?this.makeCommonTimerless(t):t==="INSPIRATION"?this.makeToggleableTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("PORTRAIT").availableAmount(),l=n.get("DEPICTIONS").availableAmount(),r=n.get("CREATURE_CANVAS").availableAmount(),d=n.get("WEAPON_CANVAS").availableAmount(),E=n.get("LANDSCAPE_CANVAS").availableAmount(),h=n.get("PALETTE_GAUGE").availableAmount(),A=n.get("PAINT").availableAmount(),R=n.get("MONOCHROME_TONES").available(1),T=[{kind:"text",name:g({en:"portrait",zh:""}),text:o===0?"/":g(o===1?{en:"moogle",zh:""}:{en:"madeen",zh:""})},{kind:"text",name:g({en:"depictions",zh:""}),text:l===0?"/":g(l===1?{en:"pom",zh:""}:l===2?{en:"wing",zh:""}:l===3?{en:"fang",zh:""}:{en:"maw",zh:""})},{kind:"counter",name:g({en:"creature",zh:""}),color:t.pct.creatureCanvas,currentStacks:r,maxStacks:1},{kind:"counter",name:g({en:"weapon",zh:""}),color:t.pct.weaponCanvas,currentStacks:d,maxStacks:1},{kind:"counter",name:g({en:"landscape",zh:""}),color:t.pct.landscapeCanvas,currentStacks:E,maxStacks:1},{kind:"bar",name:g({en:"palette gauge",zh:""}),color:t.pct.paletteGauge,progress:h/100,valueString:h.toFixed(0)}];return this.state.hasTraitUnlocked("ENHANCED_ARTISTRY")&&T.push({kind:"paint",name:g({en:"paint gauge",zh:""}),holyColor:t.pct.holyPaint,cometColor:t.pct.cometPaint,currentStacks:A,maxStacks:5,hasComet:this.state.hasTraitUnlocked("ENHANCED_PALETTE")&&R}),T}}const Sa=(e,t,n)=>{je("PCT",e,t,n??{})};Sa("PORTRAIT",2);Sa("DEPICTIONS",3);Sa("CREATURE_CANVAS",1,{default:1});Sa("WEAPON_CANVAS",1,{default:1});Sa("LANDSCAPE_CANVAS",1,{default:1});Sa("PALETTE_GAUGE",100,{warnOnOvercap:!0});Sa("PAINT",5);Sa("AETHERHUES",2,{timeout:30.8});Sa("MONOCHROME_TONES",1);Sa("SUBTRACTIVE_PALETTE",3);Sa("HAMMER_TIME",3,{timeout:30});Sa("INSPIRATION",1,{timeout:30});Sa("SUBTRACTIVE_SPECTRUM",1,{timeout:30,warnOnTimeout:!0});Sa("HYPERPHANTASIA",5,{timeout:30,warnOnTimeout:!0});Sa("RAINBOW_BRIGHT",1,{timeout:30,warnOnTimeout:!0});Sa("STARSTRUCK",1,{timeout:20,warnOnTimeout:!0});Sa("STARRY_MUSE",1,{timeout:20.5});Sa("TEMPERA_COAT",1,{timeout:10});Sa("TEMPERA_GRASSA",1,{timeout:10});Sa("SMUDGE",1,{timeout:5});const Yw=["FIRE_IN_RED","FIRE_II_IN_RED","AERO_IN_GREEN","AERO_II_IN_GREEN","WATER_IN_BLUE","WATER_II_IN_BLUE","HOLY_IN_WHITE","BLIZZARD_IN_CYAN","BLIZZARD_II_IN_CYAN","STONE_IN_YELLOW","STONE_II_IN_YELLOW","THUNDER_IN_MAGENTA","THUNDER_II_IN_MAGENTA","COMET_IN_BLACK","STAR_PRISM"],qp=["POM_MOTIF","WING_MOTIF","CLAW_MOTIF","MAW_MOTIF"],Kw=["HAMMER_BRUSH","HAMMER_STAMP","POLISHING_HAMMER"];class Vw extends Kt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new Le("cd_SWIFTCAST",n,1,1)].forEach(r=>this.cooldowns.set(r));const o=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")?3:2;this.cooldowns.set(new Le("cd_LIVING_MUSE",40,o,o));const l=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")?2:1;this.cooldowns.set(new Le("cd_STEEL_MUSE",60,l,l)),this.registerRecurringEvents()}get statusPropsGenerator(){return new jw(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("STARRY_MUSE")&&t.addBuff(k.StarryMuse)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("INSPIRATION")&&Yw.includes(n.name)&&t.addBuff(k.Hyperphantasia)}captureSpellCastTime(t,n){return qp.includes(t)?n:t==="RAINBOW_DRIP"?this.hasResourceAvailable("RAINBOW_BRIGHT")?0:this.config.adjustedCastTime(n):this.config.adjustedCastTime(n,this.hasResourceAvailable("INSPIRATION")?25:void 0)}captureSpellRecastTime(t,n){if(qp.includes(t))return n;if(t==="RAINBOW_DRIP"){const o=this.config.adjustedGCD(n);return this.hasResourceAvailable("RAINBOW_BRIGHT")?o-3.5:o}return Kw.includes(t)?this.config.adjustedGCD(n):this.config.adjustedGCD(n,this.hasResourceAvailable("INSPIRATION")?25:void 0)}getHammerStacks(){return this.resources.get("HAMMER_TIME").availableAmount()}doFiller(){this.cycleAetherhues(),this.tryConsumeHyperphantasia(),this.tryConsumeResource("SUBTRACTIVE_PALETTE")}cycleAetherhues(){const t=this.resources.get("AETHERHUES").availableAmount();this.tryConsumeResource("AETHERHUES",!0),t===2||(t===1?this.gainStatus("AETHERHUES",2):this.gainStatus("AETHERHUES",1))}tryConsumeHyperphantasia(){this.hasResourceAvailable("INSPIRATION")&&this.tryConsumeResource("HYPERPHANTASIA")&&!this.hasResourceAvailable("HYPERPHANTASIA")&&(this.tryConsumeResource("INSPIRATION"),this.hasTraitUnlocked("ENHANCED_PICTOMANCY_III")&&this.gainStatus("RAINBOW_BRIGHT"))}}const na=(e,t,n)=>{const o=n.baseRecastTime??2.5,l=Me((r,d)=>{e==="RAINBOW_DRIP"&&r.hasResourceAvailable("RAINBOW_BRIGHT")||n.baseCastTime===0||r.tryConsumeResource("SWIFTCAST")},n.onConfirm);return Bn("PCT",e,t,{...n,castTime:r=>r.captureSpellCastTime(e,n.baseCastTime),recastTime:r=>r.captureSpellRecastTime(e,o),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:r=>{const d=[];return r.hasResourceAvailable("STARRY_MUSE")&&d.push(q.Starry),n.jobPotencyModifiers&&d.push(...n.jobPotencyModifiers(r)),d},isInstantFn:r=>e==="RAINBOW_DRIP"&&r.hasResourceAvailable("RAINBOW_BRIGHT")||n.baseCastTime===0||r.hasResourceAvailable("SWIFTCAST"),onConfirm:l})},Ni=(e,t,n,o)=>et("PCT",e,t,n,{...o,jobPotencyModifiers:l=>l.hasResourceAvailable("STARRY_MUSE")?[q.Starry]:[]}),uO={newSkill:"FIRE_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},dO={newSkill:"AERO_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},hO={newSkill:"WATER_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},EO={newSkill:"BLIZZARD_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},fO={newSkill:"STONE_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},AO={newSkill:"THUNDER_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},mO={newSkill:"FIRE_II_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},RO={newSkill:"AERO_II_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},TO={newSkill:"WATER_II_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},SO={newSkill:"BLIZZARD_II_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},IO={newSkill:"STONE_II_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},_O={newSkill:"THUNDER_II_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},dT=[uO,dO,hO],hT=[EO,fO,AO],ET=[mO,RO,TO],fT=[SO,IO,_O],Ww={newSkill:"CREATURE_MOTIF",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")},gO={newSkill:"POM_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},pO={newSkill:"WING_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},NO={newSkill:"CLAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},CO={newSkill:"MAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},Xw={newSkill:"LIVING_MUSE",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")},OO={newSkill:"POM_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},bO={newSkill:"WINGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},DO={newSkill:"CLAWED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},yO={newSkill:"FANGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},qw={newSkill:"MOG_OF_THE_AGES",condition:e=>e.resources.get("PORTRAIT").availableAmount()!==2},Zw={newSkill:"RETRIBUTION_OF_THE_MADEEN",condition:e=>e.resources.get("PORTRAIT").availableAmount()===2},Qw={newSkill:"WEAPON_MOTIF",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},vO={newSkill:"HAMMER_MOTIF",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},Jw={newSkill:"STEEL_MUSE",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},$w={newSkill:"STRIKING_MUSE",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},eG={newSkill:"LANDSCAPE_MOTIF",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")},MO={newSkill:"STARRY_SKY_MOTIF",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},tG={newSkill:"SCENIC_MUSE",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},LO={newSkill:"STARRY_MUSE",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")};na("FIRE_IN_RED",1,{replaceIf:dT,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",380],["PICTOMANCY_MASTERY_III",420],["PICTOMANCY_MASTERY_IV",490]],applicationDelay:.84,validateAttempt:e=>uO.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});na("AERO_IN_GREEN",5,{replaceIf:dT,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",350],["PICTOMANCY_MASTERY_II",420],["PICTOMANCY_MASTERY_III",460],["PICTOMANCY_MASTERY_IV",530]],applicationDelay:.89,validateAttempt:e=>dO.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});na("WATER_IN_BLUE",15,{replaceIf:dT,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",390],["PICTOMANCY_MASTERY_II",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],applicationDelay:.98,validateAttempt:e=>hO.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});na("FIRE_II_IN_RED",25,{replaceIf:ET,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",120],["PICTOMANCY_MASTERY_II",150],["PICTOMANCY_MASTERY_IV",180]],falloff:0,applicationDelay:.84,validateAttempt:e=>mO.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});na("AERO_II_IN_GREEN",35,{replaceIf:ET,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",140],["PICTOMANCY_MASTERY_II",170],["PICTOMANCY_MASTERY_IV",200]],falloff:0,applicationDelay:.89,validateAttempt:e=>RO.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});na("WATER_II_IN_BLUE",45,{replaceIf:ET,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",170],["PICTOMANCY_MASTERY_II",190],["PICTOMANCY_MASTERY_IV",220]],falloff:0,applicationDelay:.89,validateAttempt:e=>TO.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});na("BLIZZARD_IN_CYAN",60,{replaceIf:hT,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",560],["PICTOMANCY_MASTERY_II",680],["PICTOMANCY_MASTERY_III",750],["PICTOMANCY_MASTERY_IV",860]],applicationDelay:.75,validateAttempt:e=>EO.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});na("STONE_IN_YELLOW",60,{replaceIf:hT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",600],["PICTOMANCY_MASTERY_II",720],["PICTOMANCY_MASTERY_III",790],["PICTOMANCY_MASTERY_IV",900]],applicationDelay:.8,validateAttempt:e=>fO.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});na("THUNDER_IN_MAGENTA",60,{replaceIf:hT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",640],["PICTOMANCY_MASTERY_II",760],["PICTOMANCY_MASTERY_III",830],["PICTOMANCY_MASTERY_IV",940]],applicationDelay:.8,validateAttempt:e=>AO.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});na("BLIZZARD_II_IN_CYAN",60,{replaceIf:fT,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",270],["PICTOMANCY_MASTERY_II",330],["PICTOMANCY_MASTERY_IV",360]],falloff:0,applicationDelay:.75,validateAttempt:e=>SO.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});na("STONE_II_IN_YELLOW",60,{replaceIf:fT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",290],["PICTOMANCY_MASTERY_II",350],["PICTOMANCY_MASTERY_IV",380]],falloff:0,applicationDelay:.8,validateAttempt:e=>IO.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});na("THUNDER_II_IN_MAGENTA",60,{replaceIf:fT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",370],["PICTOMANCY_MASTERY_IV",400]],falloff:0,applicationDelay:.8,validateAttempt:e=>_O.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});na("HOLY_IN_WHITE",80,{baseCastTime:0,baseManaCost:300,basePotency:[["NEVER",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],falloff:.65,applicationDelay:1.34,validateAttempt:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeHyperphantasia()},highlightIf:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT")});na("COMET_IN_BLACK",90,{baseCastTime:0,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",830],["PICTOMANCY_MASTERY_IV",940]],falloff:.6,applicationDelay:1.87,validateAttempt:e=>e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeResource("MONOCHROME_TONES"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("MONOCHROME_TONES")});na("RAINBOW_DRIP",92,{baseCastTime:4,baseRecastTime:6,baseManaCost:400,basePotency:1e3,applicationDelay:1.24,falloff:.85,onConfirm:e=>{e.resources.get("PAINT").gain(1),e.tryConsumeResource("RAINBOW_BRIGHT")},highlightIf:e=>e.hasResourceAvailable("RAINBOW_BRIGHT")});na("STAR_PRISM",100,{baseCastTime:0,baseManaCost:0,basePotency:1100,applicationDelay:1.25,falloff:.7,validateAttempt:e=>e.hasResourceAvailable("STARSTRUCK"),onConfirm:e=>{e.tryConsumeResource("STARSTRUCK"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("STARSTRUCK")});Ni("SUBTRACTIVE_PALETTE",60,"cd_SUBTRACTIVE",{cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")&&(e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.hasResourceAvailable("PALETTE_GAUGE",50)),onConfirm:e=>{e.tryConsumeResource("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").consume(50),e.hasResourceAvailable("MONOCHROME_TONES")&&p.reportWarning({kind:"custom",en:"comet overwrite!",zh:""}),e.hasTraitUnlocked("ENHANCED_PALETTE")&&e.gainStatus("MONOCHROME_TONES"),e.gainStatus("SUBTRACTIVE_PALETTE",3)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").available(50)});const aG=[Ww,gO,pO,NO,CO],nG=[["CREATURE_MOTIF",30,e=>!1],["POM_MOTIF",30,gO.condition],["WING_MOTIF",30,pO.condition],["CLAW_MOTIF",96,NO.condition],["MAW_MOTIF",96,CO.condition]];nG.forEach(([e,t,n],o)=>na(e,t,{replaceIf:aG,startOnHotbar:o===0,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:n,onConfirm:l=>l.resources.get("CREATURE_CANVAS").gain(1)}));const iG=[Xw,OO,bO,DO,yO],oG=[["LIVING_MUSE",30,0,0,e=>!1],["POM_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.62,OO.condition],["WINGED_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.98,bO.condition],["CLAWED_MUSE",96,800,.98,DO.condition],["FANGED_MUSE",96,800,1.16,yO.condition]];oG.forEach(([e,t,n,o,l],r)=>Ni(e,t,"cd_LIVING_MUSE",{replaceIf:iG,startOnHotbar:r===0,potency:n,falloff:.7,applicationDelay:o,cooldown:40,validateAttempt:l,onConfirm:d=>{const E=d.resources.get("DEPICTIONS"),h=d.resources.get("PORTRAIT");d.tryConsumeResource("CREATURE_CANVAS"),E.gain(1),e==="WINGED_MUSE"&&(h.overrideCurrentValue(1),d.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")||E.overrideCurrentValue(0)),e==="FANGED_MUSE"&&(h.overrideCurrentValue(2),E.overrideCurrentValue(0))},maxCharges:3,highlightIf:d=>d.hasResourceAvailable("CREATURE_CANVAS")}));Ni("MOG_OF_THE_AGES",30,"cd_PORTRAIT",{replaceIf:[Zw],potency:[["NEVER",800],["PICTOMANCY_MASTERY_III",1e3]],falloff:.7,applicationDelay:1.15,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",1),onConfirm:e=>e.tryConsumeResource("PORTRAIT"),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});Ni("RETRIBUTION_OF_THE_MADEEN",30,"cd_PORTRAIT",{replaceIf:[qw],startOnHotbar:!1,potency:1100,falloff:.7,applicationDelay:1.3,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",2),onConfirm:e=>e.tryConsumeResource("PORTRAIT",!0),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});na("WEAPON_MOTIF",50,{replaceIf:[vO],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});na("HAMMER_MOTIF",50,{replaceIf:[Qw],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>vO.condition(e)&&!e.hasResourceAvailable("HAMMER_TIME"),onConfirm:e=>e.resources.get("WEAPON_CANVAS").gain(1)});Ni("STEEL_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[$w],cooldown:60,maxCharges:2,validateAttempt:e=>!1});Ni("STRIKING_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[Jw],startOnHotbar:!1,requiresCombat:!0,cooldown:60,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("WEAPON_CANVAS"),onConfirm:e=>{e.tryConsumeResource("WEAPON_CANVAS"),e.gainStatus("HAMMER_TIME",3)},highlightIf:e=>e.hasResourceAvailable("WEAPON_CANVAS")});const Zp=[{newSkill:"HAMMER_STAMP",condition:e=>!e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")||e.getHammerStacks()===3},{newSkill:"HAMMER_BRUSH",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===2},{newSkill:"POLISHING_HAMMER",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===1}],lG=[["HAMMER_STAMP",50,[["NEVER",420],["PICTOMANCY_MASTERY_II",500],["PICTOMANCY_MASTERY_III",540],["PICTOMANCY_MASTERY_IV",560]],1.38],["HAMMER_BRUSH",86,[["NEVER",560],["PICTOMANCY_MASTERY_IV",580]],1.25],["POLISHING_HAMMER",86,[["NEVER",580],["PICTOMANCY_MASTERY_IV",600]],2.1]];lG.forEach(([e,t,n,o],l)=>na(e,t,{replaceIf:Zp,baseCastTime:0,startOnHotbar:l===0,basePotency:n,falloff:.7,applicationDelay:o,validateAttempt:r=>Zp[l].condition(r)&&r.hasResourceAvailable("HAMMER_TIME"),onConfirm:r=>r.tryConsumeResource("HAMMER_TIME"),highlightIf:r=>r.hasResourceAvailable("HAMMER_TIME"),jobPotencyModifiers:r=>[q.AutoCDH]}));na("LANDSCAPE_MOTIF",70,{replaceIf:[MO],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});na("STARRY_SKY_MOTIF",70,{replaceIf:[eG],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>MO.condition(e)&&!e.hasResourceAvailable("STARRY_MUSE"),onConfirm:e=>e.resources.get("LANDSCAPE_CANVAS").gain(1)});Ni("SCENIC_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[LO],applicationDelay:0,cooldown:120,validateAttempt:e=>!1});Ni("STARRY_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[tG],startOnHotbar:!1,requiresCombat:!0,applicationDelay:0,cooldown:120,validateAttempt:e=>LO.condition(e),onConfirm:e=>{e.tryConsumeResource("LANDSCAPE_CANVAS"),e.hasTraitUnlocked("ENHANCED_PICTOMANCY")&&(e.gainStatus("HYPERPHANTASIA",5),e.gainStatus("INSPIRATION")),e.hasTraitUnlocked("ENHANCED_PICTOMANCY_V")&&e.gainStatus("STARSTRUCK"),e.gainStatus("STARRY_MUSE"),e.gainStatus("SUBTRACTIVE_SPECTRUM")},highlightIf:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")});we("PCT","TEMPERA_COAT",10,"cd_TEMPERA_COAT",{rscType:"TEMPERA_COAT",replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],applicationDelay:0,cooldown:120});Ni("TEMPERA_GRASSA",88,"cd_GRASSA",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT"),e.gainStatus("TEMPERA_GRASSA")},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});Ni("TEMPERA_COAT_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],startOnHotbar:!1,applicationDelay:0,animationLock:un,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Coat when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-60))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});Ni("TEMPERA_GRASSA_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],startOnHotbar:!1,applicationDelay:0,animationLock:un,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_GRASSA"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_GRASSA");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Grassa when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-30))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_GRASSA")});we("PCT","SMUDGE",20,"cd_SMUDGE",{rscType:"SMUDGE",applicationDelay:0,cooldown:20,animationLock:jt});Object.keys(bR).forEach(e=>Gt(e,`RDM/${xe[e].name}.png`));class sG extends Yt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(bR).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("WHITE_MANA").availableAmount(),l=n.get("BLACK_MANA").availableAmount(),r=n.get("MANA_STACKS").availableAmount();return[{kind:"bar",name:g({en:"white mana",zh:""}),color:t.rdm.whiteMana,progress:o/100,valueString:o.toFixed(0)},{kind:"bar",name:g({en:"black mana",zh:""}),color:t.rdm.blackMana,progress:l/100,valueString:l.toFixed(0)},{kind:"counter",name:g({en:"mana stacks",zh:""}),color:t.rdm.manaStack,currentStacks:r,maxStacks:3}]}}const qa=(e,t,n)=>{je("RDM",e,t,n??{})};qa("WHITE_MANA",100);qa("BLACK_MANA",100);qa("MANA_STACKS",3);qa("ACCELERATION",1,{timeout:20});qa("DUALCAST",1,{timeout:15});qa("EMBOLDEN",1,{timeout:20});qa("GRAND_IMPACT_READY",1,{timeout:30,warnOnTimeout:!0});qa("MAGICK_BARRIER",1,{timeout:10});qa("MAGICKED_SWORDPLAY",3,{timeout:30,warnOnTimeout:!0});qa("MANAFICATION",1,{timeout:30});qa("PREFULGENCE_READY",1,{timeout:30,warnOnTimeout:!0});qa("THORNED_FLOURISH",1,{timeout:30,warnOnTimeout:!0});qa("VERFIRE_READY",1,{timeout:30});qa("VERSTONE_READY",1,{timeout:30});qa("RDM_MELEE_COUNTER",2,{timeout:30});qa("RDM_FINISHER_COUNTER",2,{timeout:30});qa("RDM_AOE_COUNTER",2,{timeout:30});const HO=["IMPACT","VERAERO","VERTHUNDER","VERAERO_III","VERTHUNDER_III"],UO=["VERHOLY","VERFLARE","SCORCH","RESOLUTION"];class rG extends Kt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,o=this.hasTraitUnlocked("RED_MAGIC_MASTERY")?35:45;[new Le("cd_SWIFTCAST",n,1,1),new Le("cd_CONTRE_SIXTE",o,1,1)].forEach(r=>this.cooldowns.set(r));const l=this.hasTraitUnlocked("ENHANCED_ACCELERATION")?2:1;this.cooldowns.set(new Le("cd_ACCELERATION",55,l,l)),this.registerRecurringEvents()}get statusPropsGenerator(){return new sG(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("EMBOLDEN")&&n.aspect!==Ie.Physical&&t.addBuff(k.Embolden),n.name==="IMPACT"&&this.hasResourceAvailable("ACCELERATION")&&t.addBuff(k.Acceleration)}hasThreeManaStacks(){return this.hasResourceAvailable("MANA_STACKS",3)}getFinisherCounter(){return this.resources.get("RDM_FINISHER_COUNTER").availableAmount()}processDualcastAndInstants(t){UO.includes(t)||t==="GRAND_IMPACT"&&this.tryConsumeResource("GRAND_IMPACT_READY")||HO.includes(t)&&this.tryConsumeResource("ACCELERATION")||this.tryConsumeResource("DUALCAST")||this.tryConsumeResource("SWIFTCAST")||this.gainStatus("DUALCAST")}gainColorMana(t){const n=this.resources.get("WHITE_MANA"),o=this.resources.get("BLACK_MANA");if(t.w){const l=o.availableAmount()-n.availableAmount()>30;n.gain(l?Math.floor(t.w/2):t.w)}if(t.b){const l=n.availableAmount()-o.availableAmount()>30;o.gain(l?Math.floor(t.b/2):t.b)}Math.abs(o.availableAmount()-n.availableAmount())>30&&p.reportWarning({kind:"custom",en:"mana difference became more than 30",zh:""})}colorManaExceeds(t){return this.hasResourceAvailable("MAGICKED_SWORDPLAY")||this.hasResourceAvailable("WHITE_MANA",t)&&this.hasResourceAvailable("BLACK_MANA",t)}consumeColorMana(t){this.hasResourceAvailable("MAGICKED_SWORDPLAY")?this.tryConsumeResource("MAGICKED_SWORDPLAY"):(this.resources.get("WHITE_MANA").consume(t),this.resources.get("BLACK_MANA").consume(t))}maybeGainVerproc(t,n=.5){this.maybeGainProc(t,n,!0)}processComboStatus(t){const n=this.resources.get("MANA_STACKS"),o=this.config.level>=80,l=this.config.level>=90,r=this.resources.get("RDM_MELEE_COUNTER").availableAmount(),d=this.resources.get("RDM_FINISHER_COUNTER").availableAmount(),E=this.resources.get("RDM_AOE_COUNTER").availableAmount(),h=r+d+E>0;let A;t==="ENCHANTED_RIPOSTE"||t==="RIPOSTE"?(h&&p.reportComboBreak(),A=[1,0,0],t==="ENCHANTED_RIPOSTE"&&n.gain(1)):t==="ENCHANTED_ZWERCHHAU"||t==="ZWERCHHAU"?(h&&r!==1&&p.reportComboBreak(),A=[r===1?2:0,0,0],t==="ENCHANTED_ZWERCHHAU"&&n.gain(1)):t==="ENCHANTED_REDOUBLEMENT"||t==="REDOUBLEMENT"?(h&&r!==2&&p.reportComboBreak(),A=[0,0,0],t==="ENCHANTED_REDOUBLEMENT"&&n.gain(1)):t==="VERHOLY"||t==="VERFLARE"?(A=[0,o?1:0,0],n.consume(3)):t==="SCORCH"?A=[0,l?2:0,0]:t==="RESOLUTION"?A=[0,0,0]:t==="ENCHANTED_MOULINET"?(r+d>0&&p.reportComboBreak(),A=[0,0,1],n.gain(1)):t==="ENCHANTED_MOULINET_II"?(A=[0,0,2],n.gain(1)):t==="ENCHANTED_MOULINET_III"?(A=[0,0,0],n.gain(1)):t==="ENCHANTED_REPRISE"?A=[r,d,E]:(h&&p.reportComboBreak(),A=[0,0,0],n.consume(n.availableAmount())),this.setComboState("RDM_MELEE_COUNTER",A[0]),this.setComboState("RDM_FINISHER_COUNTER",A[1]),this.setComboState("RDM_AOE_COUNTER",A[2])}}const Pa=(e,t,n)=>{const o=Me(n.onConfirm,l=>l.processDualcastAndInstants(e),l=>l.processComboStatus(e));return Bn("RDM",e,t,{...n,aspect:n.isPhysical?Ie.Physical:void 0,castTime:l=>l.config.adjustedCastTime(n.baseCastTime),recastTime:l=>l.config.adjustedGCD(),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:l=>{const r=[];return l.hasResourceAvailable("EMBOLDEN")&&r.push(q.EmboldenMagic),n.jobPotencyModifiers&&r.push(...n.jobPotencyModifiers(l)),r},isInstantFn:l=>UO.includes(e)||e==="GRAND_IMPACT"||HO.includes(e)&&l.hasResourceAvailable("ACCELERATION")||l.hasResourceAvailable("DUALCAST")||l.hasResourceAvailable("SWIFTCAST"),onConfirm:o})},ui=(e,t,n)=>{const o=!e.toString().startsWith("ENCHANTED"),l=Me(r=>r.processComboStatus(e),n.onConfirm);return $t("RDM",e,t,{...n,aspect:o?Ie.Physical:void 0,onConfirm:l,jobPotencyModifiers:r=>{const d=[];return o||r.hasResourceAvailable("EMBOLDEN")&&d.push(q.EmboldenMagic),d}})},cs=(e,t,n,o)=>et("RDM",e,t,n,{aspect:o.isPhysical?Ie.Physical:void 0,jobPotencyModifiers:l=>!o.isPhysical&&l.hasResourceAvailable("EMBOLDEN")?[q.EmboldenMagic]:[],...o}),kO={newSkill:"SCORCH",condition:e=>e.getFinisherCounter()===1},xO={newSkill:"RESOLUTION",condition:e=>e.getFinisherCounter()===2},Bh={newSkill:"GRAND_IMPACT",condition:e=>e.getFinisherCounter()<1&&e.hasResourceAvailable("GRAND_IMPACT_READY")},Au=[{newSkill:"JOLT_II",condition:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY")},kO,xO,Bh];Pa("JOLT_II",62,{replaceIf:Au,autoUpgrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_III"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:280,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});Pa("JOLT_III",84,{replaceIf:Au,autoDowngrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_II"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:360,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});const PO=[["NEVER",300],["RED_MAGIC_MASTERY_II",340],["RED_MAGIC_MASTERY_III",380]];Pa("VERSTONE",30,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:PO,validateAttempt:e=>e.hasResourceAvailable("VERSTONE_READY"),onConfirm:e=>{e.gainColorMana({w:5}),e.tryConsumeResource("VERSTONE_READY")},highlightIf:e=>e.hasResourceAvailable("VERSTONE_READY")});Pa("VERFIRE",26,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:PO,validateAttempt:e=>e.hasResourceAvailable("VERFIRE_READY"),onConfirm:e=>{e.gainColorMana({b:5}),e.tryConsumeResource("VERFIRE_READY")},highlightIf:e=>e.hasResourceAvailable("VERFIRE_READY")});const AT={newSkill:"VERHOLY",condition:e=>e.hasThreeManaStacks()},mT={newSkill:"VERFLARE",condition:e=>e.hasThreeManaStacks()};Pa("VERAERO",10,{replaceIf:[AT],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});Pa("VERTHUNDER",4,{replaceIf:[mT],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const wO=[["NEVER",380],["ENCHANTED_BLADE_MASTERY",440]];Pa("VERAERO_III",82,{replaceIf:[AT],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:wO,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});Pa("VERTHUNDER_III",82,{replaceIf:[mT],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:wO,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const GO=[["NEVER",100],["RED_MAGIC_MASTERY",120],["RED_MAGIC_MASTERY_III",140]];Pa("VERAERO_II",22,{replaceIf:[AT],baseCastTime:2,baseManaCost:400,applicationDelay:.8,basePotency:GO,falloff:0,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({w:7})});Pa("VERTHUNDER_II",18,{replaceIf:[mT],baseCastTime:2,baseManaCost:400,falloff:0,applicationDelay:.8,basePotency:GO,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({b:7})});Pa("IMPACT",66,{replaceIf:[kO,xO,Bh],baseCastTime:5,baseManaCost:400,falloff:0,applicationDelay:.76,basePotency:[["NEVER",200],["RED_MAGIC_MASTERY_III",210]],jobPotencyModifiers:e=>e.hasResourceAvailable("ACCELERATION")?[q.AccelerationImpact]:[],validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:3,b:3})});Pa("GRAND_IMPACT",96,{replaceIf:Au,startOnHotbar:!1,baseCastTime:0,baseManaCost:0,basePotency:600,falloff:.55,applicationDelay:1.55,validateAttempt:Bh.condition,highlightIf:Bh.condition,onConfirm:e=>e.gainColorMana({w:3,b:3})});ui("RIPOSTE",1,{replaceIf:[{newSkill:"ENCHANTED_RIPOSTE",condition:e=>e.colorManaExceeds(20)}],applicationDelay:.62,potency:130,recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(20)});ui("ZWERCHHAU",35,{replaceIf:[{newSkill:"ENCHANTED_ZWERCHHAU",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:150,resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});ui("REDOUBLEMENT",50,{replaceIf:[{newSkill:"ENCHANTED_REDOUBLEMENT",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:230,resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});ui("ENCHANTED_RIPOSTE",50,{startOnHotbar:!1,replaceIf:[{newSkill:"RIPOSTE",condition:e=>!e.colorManaExceeds(20)}],applicationDelay:.62,potency:[["NEVER",220],["RED_MAGIC_MASTERY_III",280],["ENCHANTED_BLADE_MASTERY",340]],recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(20),onConfirm:e=>e.consumeColorMana(20)});ui("ENCHANTED_ZWERCHHAU",50,{startOnHotbar:!1,replaceIf:[{newSkill:"ZWERCHHAU",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",150],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",380]],resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});ui("ENCHANTED_REDOUBLEMENT",50,{startOnHotbar:!1,replaceIf:[{newSkill:"REDOUBLEMENT",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",130],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",470],["RED_MAGIC_MASTERY_III",500],["ENCHANTED_BLADE_MASTERY",560]],resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.2,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});const Fh=e=>e.resources.get("WHITE_MANA").available(5)&&e.resources.get("BLACK_MANA").available(5);ui("REPRISE",76,{replaceIf:[{newSkill:"ENCHANTED_REPRISE",condition:e=>Fh(e)}],applicationDelay:.62,potency:100,recastTime:2.5,validateAttempt:e=>!Fh(e)});ui("ENCHANTED_REPRISE",76,{startOnHotbar:!1,replaceIf:[{newSkill:"REPRISE",condition:e=>!Fh(e)}],applicationDelay:.62,potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",420]],recastTime:2.5,validateAttempt:e=>Fh(e),onConfirm:e=>{e.resources.get("WHITE_MANA").consume(5),e.resources.get("BLACK_MANA").consume(5)}});const Gi=[{newSkill:"MOULINET",condition:e=>e.resources.get("RDM_AOE_COUNTER").availableAmount()===0&&!e.colorManaExceeds(20)||!e.colorManaExceeds(15)},{newSkill:"ENCHANTED_MOULINET",condition:e=>e.colorManaExceeds(20)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===0},{newSkill:"ENCHANTED_MOULINET_II",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===1},{newSkill:"ENCHANTED_MOULINET_III",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===2}];ui("MOULINET",52,{replaceIf:Gi,falloff:0,applicationDelay:.8,potency:60,recastTime:2.5,validateAttempt:Gi[0].condition});ui("ENCHANTED_MOULINET",52,{startOnHotbar:!1,replaceIf:Gi,falloff:0,applicationDelay:.8,potency:130,recastTime:1.5,validateAttempt:Gi[1].condition,onConfirm:e=>e.consumeColorMana(20)});ui("ENCHANTED_MOULINET_II",52,{startOnHotbar:!1,replaceIf:Gi,falloff:0,applicationDelay:.8,potency:140,recastTime:1.5,validateAttempt:Gi[2].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:Gi[2].condition});ui("ENCHANTED_MOULINET_III",52,{startOnHotbar:!1,replaceIf:Gi,falloff:0,applicationDelay:.8,potency:150,recastTime:1.5,validateAttempt:Gi[3].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:Gi[3].condition});const BO=[["NEVER",600],["ENCHANTED_BLADE_MASTERY",650]];Pa("VERHOLY",70,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:BO,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("WHITE_MANA").availableAmount()<e.resources.get("BLACK_MANA").availableAmount()?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY",.2),e.gainColorMana({w:11})}});Pa("VERFLARE",68,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:BO,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("BLACK_MANA").availableAmount()<e.resources.get("WHITE_MANA").availableAmount()?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY",.2),e.gainColorMana({b:11})}});Pa("SCORCH",80,{startOnHotbar:!1,replaceIf:Au,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.83,basePotency:[["NEVER",680],["ENCHANTED_BLADE_MASTERY",750]],validateAttempt:e=>e.getFinisherCounter()===1,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===1});Pa("RESOLUTION",90,{startOnHotbar:!1,replaceIf:Au,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.56,basePotency:[["NEVER",750],["ENCHANTED_BLADE_MASTERY",850]],validateAttempt:e=>e.getFinisherCounter()===2,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===2});Pa("VERCURE",54,{baseCastTime:2,baseManaCost:500,applicationDelay:.8,basePotency:0});Pa("VERRAISE",64,{baseCastTime:10,baseManaCost:2400,applicationDelay:.81,basePotency:0});we("RDM","EMBOLDEN",58,"cd_EMBOLDEN",{replaceIf:[{newSkill:"VICE_OF_THORNS",condition:e=>e.hasResourceAvailable("THORNED_FLOURISH")}],rscType:"EMBOLDEN",applicationDelay:.62,cooldown:120,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EMBOLDEN")&&e.gainStatus("THORNED_FLOURISH")}});we("RDM","MANAFICATION",60,"cd_MANAFICATION",{replaceIf:[{newSkill:"PREFULGENCE",condition:e=>e.hasResourceAvailable("PREFULGENCE_READY")}],rscType:"MANAFICATION",requiresCombat:!0,applicationDelay:0,cooldown:110,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_MANAFICATION")&&e.gainStatus("PREFULGENCE_READY"),e.gainStatus("MAGICKED_SWORDPLAY",3),(e.hasResourceAvailable("RDM_MELEE_COUNTER")||e.hasResourceAvailable("RDM_FINISHER_COUNTER")||e.hasResourceAvailable("RDM_AOE_COUNTER"))&&p.reportComboBreak(),e.setComboState("RDM_MELEE_COUNTER",0),e.setComboState("RDM_FINISHER_COUNTER",0),e.setComboState("RDM_AOE_COUNTER",0)}});cs("CORPS_A_CORPS",6,"cd_CORPS_A_CORPS",{isPhysical:!0,applicationDelay:.62,potency:130,cooldown:35,maxCharges:2,animationLock:jt});const FO=[["NEVER",130],["ENHANCED_DISPLACEMENT",180]];cs("ENGAGEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:FO,cooldown:35,maxCharges:2});cs("DISPLACEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:FO,cooldown:35,maxCharges:2,animationLock:jt});cs("FLECHE",45,"cd_FLECHE",{isPhysical:!0,applicationDelay:1.16,potency:[["NEVER",460],["ENCHANTED_BLADE_MASTERY",480]],cooldown:25});cs("CONTRE_SIXTE",56,"cd_CONTRE_SIXTE",{isPhysical:!0,falloff:0,applicationDelay:1.16,potency:[["NEVER",380],["ENCHANTED_BLADE_MASTERY",420]],cooldown:35});we("RDM","ACCELERATION",50,"cd_ACCELERATION",{rscType:"ACCELERATION",applicationDelay:0,cooldown:55,maxCharges:2,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ACCELERATION_II")&&(e.hasResourceAvailable("GRAND_IMPACT_READY")&&p.reportWarning({kind:"overwrite",rsc:"GRAND_IMPACT_READY"}),e.gainStatus("GRAND_IMPACT_READY"))}});we("RDM","MAGICK_BARRIER",86,"cd_MAGICK_BARRIER",{rscType:"MAGICK_BARRIER",applicationDelay:0,cooldown:120});cs("VICE_OF_THORNS",92,"cd_VICE_OF_THORNS",{startOnHotbar:!1,falloff:.55,applicationDelay:.8,potency:950,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THORNED_FLOURISH"),onConfirm:e=>e.tryConsumeResource("THORNED_FLOURISH"),highlightIf:e=>e.hasResourceAvailable("THORNED_FLOURISH")});cs("PREFULGENCE",100,"cd_PREFULGENCE",{startOnHotbar:!1,falloff:.55,applicationDelay:1.42,potency:1200,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PREFULGENCE_READY"),onConfirm:e=>e.tryConsumeResource("PREFULGENCE_READY"),highlightIf:e=>e.hasResourceAvailable("PREFULGENCE_READY")});Object.keys(DR).forEach(e=>Gt(e,`RPR/${xe[e].name}.png`));class cG extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("DEATHS_DESIGN",!1)]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(DR).filter(t=>t!=="DEATHS_DESIGN").map(t=>t==="SOULSOW"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("SOUL").availableAmount(),l=n.get("SHROUD").availableAmount(),r=n.get("LEMURE_SHROUD").availableAmount(),d=n.get("VOID_SHROUD").availableAmount(),E=n.get("RPR_COMBO"),h=n.get("RPR_AOE_COMBO"),A=E.available(1)?E.pendingChange?.timeTillEvent:h.available(1)?h.pendingChange?.timeTillEvent:void 0,R=[{kind:"text",name:g({en:"Combo Timer",zh:""}),text:A?.toFixed(3)??"N/A"},{kind:"bar",name:g({en:"Soul Gauge",zh:""}),color:o<50?t.rpr.soulGaugeLow:t.rpr.soulGaugeHigh,progress:o/100,valueString:Math.floor(o)+"/100"}];return this.state.hasTraitUnlocked("SHROUD_GAUGE")&&R.push({kind:"bar",name:g({en:"Shroud Gauge",zh:""}),color:l<50?t.rpr.shroudGaugeLow:t.rpr.shroudGaugeHigh,progress:l/100,valueString:Math.floor(l)+"/100"},{kind:"counter",name:g({en:"Lemure Shroud",zh:""}),color:t.rpr.lemureShroud,currentStacks:r,maxStacks:5}),this.state.hasTraitUnlocked("VOID_SOUL")&&R.push({kind:"counter",name:g({en:"Void Shroud",zh:""}),color:d<2?t.rpr.voidShroudLow:t.rpr.voidShroudHigh,currentStacks:d,maxStacks:5}),R}}function Tt(e,t,n){je("RPR",e,t,n??{})}Tt("SOUL",100);Tt("SHROUD",100);Tt("DEATHS_DESIGN",1,{});Tt("SOUL_REAVER",2,{timeout:30});Tt("ENHANCED_GIBBET",1,{timeout:60});Tt("ENHANCED_GALLOWS",1,{timeout:60});Tt("EXECUTIONER",2,{timeout:30});Tt("ENSHROUDED",1,{timeout:30});Tt("LEMURE_SHROUD",5,{timeout:30});Tt("VOID_SHROUD",5);Tt("OBLATIO",1,{timeout:30});Tt("ENHANCED_VOID_REAPING",1,{timeout:30});Tt("ENHANCED_CROSS_REAPING",1,{timeout:30});Tt("IDEAL_HOST",1,{timeout:30});Tt("PERFECTIO_OCCULTA",1,{timeout:30});Tt("PERFECTIO_PARATA",1,{timeout:30});Tt("ARCANE_CIRCLE",1,{timeout:20});Tt("CIRCLE_OF_SACRIFICE",1,{timeout:5});Tt("BLOODSOWN_CIRCLE",1,{timeout:6});Tt("IMMORTAL_SACRIFICE",8,{timeout:30});Tt("ARCANE_CREST",1,{timeout:5});Tt("CREST_OF_TIME_BORROWED",1,{timeout:5});Tt("CREST_OF_TIME_RETURNED",1,{timeout:15});Tt("SOULSOW",1,{default:1});Tt("THRESHOLD",1,{timeout:10});Tt("ENHANCED_HARPE",1,{timeout:10});Tt("HELLS_INGRESS_USED",1);Tt("RPR_COMBO",2,{timeout:30});Tt("RPR_AOE_COMBO",1,{timeout:30});class uG extends Kt{constructor(t){super(t);const n=this.hasTraitUnlocked("TEMPERED_SOUL")?2:1;this.cooldowns.set(new Le("cd_SOUL_SLICE",30,n,n)),this.registerRecurringEvents()}get statusPropsGenerator(){return new cG(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("ARCANE_CIRCLE")&&t.addBuff(k.ArcaneCircle),this.hasResourceAvailable("DEATHS_DESIGN")&&t.addBuff(k.DeathsDesign)}refreshDeathsDesign(){const t=this.resources.get("DEATHS_DESIGN"),n=Math.min(this.resources.timeTillReady("DEATHS_DESIGN")+30,60);if(t.available(1)){t.overrideTimer(this,n);return}t.gain(1),this.resources.addResourceEvent({rscType:"DEATHS_DESIGN",name:"drop Death's Design",delay:n,fnOnRsc:o=>{o.consume(1)}})}setTimedResource(t,n){this.tryConsumeResource(t),this.resources.get(t).gain(n),this.enqueueResourceDrop(t)}processCombo(t){const n=this.resources.get("RPR_COMBO").availableAmount(),o=this.resources.get("RPR_AOE_COMBO").availableAmount(),[l,r]=new Map([["SLICE",[1,0]],["WAXING_SLICE",[n===1?2:0,0]],["INFERNAL_SLICE",[0,0]],["SPINNING_SCYTHE",[0,1]],["NIGHTMARE_SCYTHE",[0,0]]]).get(t)??[n,o];l!==n&&this.setComboState("RPR_COMBO",l),r!==o&&this.setComboState("RPR_AOE_COMBO",r)}processSoulGauge(t){const n=this.resources.get("SOUL");if(["SLICE","WAXING_SLICE","INFERNAL_SLICE","SPINNING_SCYTHE","NIGHTMARE_SCYTHE","HARPE","HARVEST_MOON"].includes(t)){n.gain(10);return}if(["SOUL_SLICE","SOUL_SCYTHE"].includes(t)){n.gain(50);return}if(["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE","GLUTTONY"].includes(t)){n.consume(50);return}}processShroudGauge(t){const n=this.resources.get("SHROUD");if(["GALLOWS","GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GIBBET","GUILLOTINE","EXECUTIONERS_GUILLOTINE"].includes(t)){n.gain(10);return}t==="ENSHROUD"&&!this.resources.get("IDEAL_HOST").available(1)&&n.consume(50)}processReaversExecutioner(t){const n=this.resources.get("SOUL_REAVER"),o=this.resources.get("EXECUTIONER");if(["GIBBET","GALLOWS","GUILLOTINE"].includes(t)){n.consume(1);return}if(["EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GUILLOTINE"].includes(t)){o.consume(1);return}if(this.skillsList.get(t).cdName==="cd_GCD"&&(n.consume(n.availableAmount()),o.consume(o.availableAmount())),["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE"].includes(t)){n.consume(n.availableAmount()),o.consume(o.availableAmount()),this.setTimedResource("SOUL_REAVER",1);return}if(t==="GLUTTONY"){if(n.consume(n.availableAmount()),o.consume(o.availableAmount()),this.hasTraitUnlocked("ENHANCED_GLUTTONY")){this.setTimedResource("EXECUTIONER",2);return}this.setTimedResource("SOUL_REAVER",2);return}}processGibbetGallows(t){const n=this.resources.get("SOUL_REAVER"),o=this.resources.get("EXECUTIONER");["GIBBET","GALLOWS","EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS"].includes(t)||(n.consume(n.availableAmount()),o.consume(o.availableAmount()));const l=new Map([["GIBBET","ENHANCED_GIBBET"],["EXECUTIONERS_GIBBET","ENHANCED_GIBBET"],["GALLOWS","ENHANCED_GALLOWS"],["EXECUTIONERS_GALLOWS","ENHANCED_GALLOWS"]]),r=new Map([["GIBBET","ENHANCED_GALLOWS"],["EXECUTIONERS_GIBBET","ENHANCED_GALLOWS"],["GALLOWS","ENHANCED_GIBBET"],["EXECUTIONERS_GALLOWS","ENHANCED_GIBBET"]]),d=this.resources.get(l.get(t)),E=this.resources.get(r.get(t));d.consume(d.availableAmount()),E.consume(E.availableAmount()),E.gain(1)}processCircleOfSacrifice(t){if(!this.hasResourceAvailable("CIRCLE_OF_SACRIFICE"))return;al("RPR",t).potencyFn(this)>0&&(this.resources.get("IMMORTAL_SACRIFICE").availableAmount()===0?this.setTimedResource("IMMORTAL_SACRIFICE",1):this.resources.get("IMMORTAL_SACRIFICE").gain(1),this.tryConsumeResource("CIRCLE_OF_SACRIFICE",!0))}enterEnshroud(){this.hasResourceAvailable("IDEAL_HOST")&&this.resources.get("IDEAL_HOST").consume(1),this.hasTraitUnlocked("ENHANCED_ENSHROUD")&&this.setTimedResource("OBLATIO",1),this.setTimedResource("LEMURE_SHROUD",5),this.tryConsumeResource("PERFECTIO_PARATA",!0)}exitEnshroud(){this.tryConsumeResource("ENSHROUDED"),this.tryConsumeResource("OBLATIO"),this.tryConsumeResource("LEMURE_SHROUD"),this.tryConsumeResource("VOID_SHROUD"),this.tryConsumeResource("ENHANCED_CROSS_REAPING"),this.tryConsumeResource("ENHANCED_VOID_REAPING")}}const dG=new Set(["SHADOW_OF_DEATH","WHORL_OF_DEATH","HARVEST_MOON","HARPE","VOID_REAPING","CROSS_REAPING","GRIM_REAPING","LEMURES_SLICE","LEMURES_SCYTHE","SACRIFICIUM","COMMUNIO","ARCANE_CIRCLE","HELLS_EGRESS","HELLS_INGRESS","REGRESS","ARCANE_CREST","FEINT","LEG_SWEEP","BLOODBATH","TRUE_NORTH","ARMS_LENGTH","SECOND_WIND","SPRINT","TINCTURE"]),SE=(e,t)=>n=>{const o=["GIBBET","GALLOWS","GUILLOTINE"].includes(t)?n.resources.get("SOUL_REAVER"):n.resources.get("EXECUTIONER");return n.resources.get(e).available(1)||o.available(1)&&!n.hasResourceAvailable("ENHANCED_GIBBET")&&!n.hasResourceAvailable("ENHANCED_GALLOWS")},RT=e=>e.hasResourceAvailable("SOUL_REAVER"),TT=e=>e.hasResourceAvailable("EXECUTIONER"),Fi=e=>t=>t.resources.get("SOUL").availableAmount()>=e,ST=e=>dG.has(e),IE=e=>Me(t=>t.processCombo(e),t=>t.processSoulGauge(e),t=>t.processShroudGauge(e),t=>t.processReaversExecutioner(e),t=>t.processCircleOfSacrifice(e)),IT=e=>{const t=[];return e.hasResourceAvailable("ARCANE_CIRCLE")&&t.push(q.ArcaneCircle),e.hasResourceAvailable("DEATHS_DESIGN")&&t.push(q.DeathsDesign),t},_E=(e,t,n)=>{const o=Me(IE(e),n.onConfirm),l=hu(r=>!r.resources.get("ENSHROUDED").available(1)||ST(e),n.validateAttempt??(()=>!0));return Bn("RPR",e,t,{...n,recastTime:r=>r.config.adjustedGCD(n.recastTime),onConfirm:o,validateAttempt:l,isInstantFn:r=>!(e==="COMMUNIO"||e==="HARPE"&&!r.hasResourceAvailable("ENHANCED_HARPE")||e==="SOULSOW"&&r.isInCombat()),jobPotencyModifiers:IT})},Ia=(e,t,n)=>{const o=Me(IE(e),n.onConfirm),l=hu(r=>!r.resources.get("ENSHROUDED").available(1)||ST(e),n.validateAttempt??(()=>!0));return $t("RPR",e,t,{...n,onConfirm:o,jobPotencyModifiers:r=>{const d=IT(r);if(["GIBBET","EXECUTIONERS_GIBBET"].includes(e)&&r.hasResourceAvailable("ENHANCED_GIBBET")&&d.push(q.EnhancedGibbetGallows),["GALLOWS","EXECUTIONERS_GALLOWS"].includes(e)&&r.hasResourceAvailable("ENHANCED_GALLOWS")&&d.push(q.EnhancedGibbetGallows),e==="VOID_REAPING"&&r.hasResourceAvailable("ENHANCED_VOID_REAPING")&&d.push(q.EnhancedReaping),e==="CROSS_REAPING"&&r.hasResourceAvailable("ENHANCED_CROSS_REAPING")&&d.push(q.EnhancedReaping),e==="PLENTIFUL_HARVEST"&&r.hasResourceAvailable("IMMORTAL_SACRIFICE"))for(let E=0;E<r.resources.get("IMMORTAL_SACRIFICE").availableAmount();E++)d.push(q.ImmortalSacrifice);return d},validateAttempt:l})},On=(e,t,n,o)=>{const l=Me(IE(e),o.onConfirm),r=hu(d=>!d.resources.get("ENSHROUDED").available(1)||ST(e),o.validateAttempt??(()=>!0));return et("RPR",e,t,n,{...o,onConfirm:l,validateAttempt:r,jobPotencyModifiers:IT})};Ia("SHADOW_OF_DEATH",10,{potency:300,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.15,onConfirm:e=>e.refreshDeathsDesign()});Ia("SLICE",1,{potency:[["NEVER",260],["MELEE_MASTERY_II_RPR",320],["MELEE_MASTERY_III_RPR",460]],aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.49});Ia("WAXING_SLICE",5,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",160],["MELEE_MASTERY_III_RPR",260]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_II_RPR",400],["MELEE_MASTERY_III_RPR",500]],resource:"RPR_COMBO",resourceValue:1},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.58,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",1)});Ia("INFERNAL_SLICE",30,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",180],["MELEE_MASTERY_III_RPR",280]],combo:{potency:[["NEVER",420],["MELEE_MASTERY_II_RPR",500],["MELEE_MASTERY_III_RPR",600]],resource:"RPR_COMBO",resourceValue:2},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.54,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",2)});Ia("SOUL_SLICE",60,{potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",520]],aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.99,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});Ia("GIBBET",70,{replaceIf:[{newSkill:"VOID_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GIBBET",condition:e=>e.hasResourceAvailable("EXECUTIONER")}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"flank"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.5,highlightIf:SE("ENHANCED_GIBBET","GIBBET"),validateAttempt:RT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});Ia("GALLOWS",70,{replaceIf:[{newSkill:"CROSS_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GALLOWS",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"rear"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.53,highlightIf:SE("ENHANCED_GALLOWS","GALLOWS"),validateAttempt:RT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});Ia("EXECUTIONERS_GIBBET",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:SE("ENHANCED_GIBBET","EXECUTIONERS_GIBBET"),validateAttempt:TT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});Ia("EXECUTIONERS_GALLOWS",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:SE("ENHANCED_GALLOWS","EXECUTIONERS_GALLOWS"),validateAttempt:TT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});Ia("PLENTIFUL_HARVEST",88,{potency:720,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.16,highlightIf:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1),validateAttempt:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1)&&!e.hasResourceAvailable("BLOODSOWN_CIRCLE"),onConfirm:e=>{e.tryConsumeResource("IMMORTAL_SACRIFICE",!0),e.setTimedResource("IDEAL_HOST",1),e.setTimedResource("PERFECTIO_OCCULTA",1)}});_E("COMMUNIO",90,{replaceIf:[{condition:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),newSkill:"PERFECTIO"}],potency:1100,aspect:Ie.Other,castTime:1.3,recastTime:2.5,falloff:.2,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("ENSHROUDED"),highlightIf:e=>e.hasResourceAvailable("ENSHROUDED")&&e.resources.get("LEMURE_SHROUD").availableAmount()===1,onConfirm:e=>{e.tryConsumeResource("PERFECTIO_OCCULTA")&&e.setTimedResource("PERFECTIO_PARATA",1),e.exitEnshroud(),e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.tryConsumeResource("ENHANCED_VOID_REAPING")}});_E("HARPE",15,{potency:300,aspect:Ie.Other,castTime:1.3,recastTime:2.5,applicationDelay:.9,highlightIf:e=>e.hasResourceAvailable("ENHANCED_HARPE"),onConfirm:e=>e.tryConsumeResource("ENHANCED_HARPE")});_E("SOULSOW",82,{potency:0,replaceIf:[{condition:e=>e.hasResourceAvailable("SOULSOW"),newSkill:"HARVEST_MOON"}],startOnHotbar:!0,aspect:Ie.Other,castTime:5,recastTime:2.5,applicationDelay:0,onConfirm:e=>e.resources.get("SOULSOW").gain(1)});_E("HARVEST_MOON",82,{potency:[["NEVER",600],["MELEE_MASTERY_III_RPR",800]],startOnHotbar:!1,aspect:Ie.Other,castTime:0,recastTime:2.5,falloff:.4,applicationDelay:.9,validateAttempt:e=>e.hasResourceAvailable("SOULSOW"),highlightIf:e=>e.hasResourceAvailable("SOULSOW"),onConfirm:e=>e.resources.get("SOULSOW").consume(1)});On("GLUTTONY",76,"cd_GLUTTONY",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"SACRIFICIUM"}],isPhysical:!1,potency:520,startOnHotbar:!0,falloff:.25,applicationDelay:1.06,cooldown:60,validateAttempt:Fi(50),highlightIf:Fi(50)});On("BLOOD_STALK",50,"cd_BLOOD_STALK",{replaceIf:[{newSkill:"LEMURES_SLICE",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"UNVEILED_GIBBET",condition:e=>e.hasResourceAvailable("ENHANCED_GIBBET")},{newSkill:"UNVEILED_GALLOWS",condition:e=>e.hasResourceAvailable("ENHANCED_GALLOWS")}],isPhysical:!0,potency:340,startOnHotbar:!0,applicationDelay:.89,cooldown:1,validateAttempt:Fi(50),highlightIf:Fi(50)});On("GRIM_SWATHE",55,"cd_BLOOD_STALK",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"LEMURES_SCYTHE"}],isPhysical:!0,potency:140,startOnHotbar:!0,falloff:0,applicationDelay:.58,cooldown:1,validateAttempt:Fi(50),highlightIf:Fi(50)});On("UNVEILED_GIBBET",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:Fi(50),highlightIf:Fi(50)});On("UNVEILED_GALLOWS",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:Fi(50),highlightIf:Fi(50)});On("LEMURES_SLICE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:[["NEVER",240],["MELEE_MASTERY_III_RPR",280]],startOnHotbar:!1,applicationDelay:.7,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});On("SACRIFICIUM",92,"cd_SACRIFICIUM",{isPhysical:!1,potency:600,startOnHotbar:!1,falloff:.2,applicationDelay:.76,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("OBLATIO"),highlightIf:e=>e.hasResourceAvailable("OBLATIO"),onConfirm:e=>e.tryConsumeResource("OBLATIO")});we("RPR","ARCANE_CIRCLE",72,"cd_ARCANE_CIRCLE",{rscType:"ARCANE_CIRCLE",applicationDelay:.6,startOnHotbar:!0,maxCharges:1,potency:0,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ARCANE_CIRCLE")&&(e.setTimedResource("CIRCLE_OF_SACRIFICE",1),e.setTimedResource("BLOODSOWN_CIRCLE",1))},cooldown:120});Ia("VOID_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:Ie.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_CROSS_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_VOID_REAPING"),e.setTimedResource("ENHANCED_CROSS_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});Ia("CROSS_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:Ie.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_VOID_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.setTimedResource("ENHANCED_VOID_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});we("RPR","ENSHROUD",80,"cd_ENSHROUD",{rscType:"ENSHROUDED",highlightIf:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),applicationDelay:0,startOnHotbar:!0,cooldown:5,validateAttempt:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),onConfirm:Me(IE("ENSHROUD"),e=>e.enterEnshroud())});Ia("PERFECTIO",100,{potency:1300,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.29,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),validateAttempt:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),onConfirm:e=>{e.resources.get("PERFECTIO_PARATA").consume(1)}});On("REGRESS",74,"cd_BLOOD_STALK",{cooldown:1,animationLock:jt,startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("THRESHOLD"),onConfirm:e=>e.resources.get("THRESHOLD").consume(1)});On("HELLS_INGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:jt,onConfirm:e=>{e.resources.get("HELLS_INGRESS_USED").gain(1),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});On("HELLS_EGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&!e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:jt,onConfirm:e=>{e.tryConsumeResource("HELLS_INGRESS_USED"),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});On("ARCANE_CREST",40,"cd_ARCANE_CREST",{replaceIf:[{condition:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),newSkill:"ARCANE_CREST_POP"}],cooldown:30,onConfirm:e=>e.setTimedResource("CREST_OF_TIME_BORROWED",1)});On("ARCANE_CREST_POP",40,"cd_ARCANE_CREST_POP",{cooldown:1,animationLock:un,startOnHotbar:!1,onConfirm:e=>{e.tryConsumeResource("CREST_OF_TIME_BORROWED"),e.setTimedResource("CREST_OF_TIME_RETURNED",1)},validateAttempt:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),highlightIf:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED")});Ia("WHORL_OF_DEATH",35,{potency:100,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:1.15,onConfirm:e=>e.refreshDeathsDesign()});Ia("SPINNING_SCYTHE",25,{potency:140,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62});Ia("NIGHTMARE_SCYTHE",45,{potency:120,combo:{potency:180,resource:"RPR_AOE_COMBO",resourceValue:1},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.8,highlightIf:e=>e.hasResourceExactly("RPR_AOE_COMBO",1)});Ia("SOUL_SCYTHE",65,{potency:180,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.66,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});Ia("EXECUTIONERS_GUILLOTINE",96,{startOnHotbar:!1,potency:260,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.53,highlightIf:e=>e.hasResourceAvailable("EXECUTIONER"),validateAttempt:TT});Ia("GRIM_REAPING",80,{startOnHotbar:!1,potency:200,recastTime:1.5,falloff:0,applicationDelay:.8,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1,validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()},aspect:Ie.Physical});On("LEMURES_SCYTHE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:100,falloff:0,applicationDelay:.66,cooldown:1,startOnHotbar:!1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});Ia("GUILLOTINE",70,{replaceIf:[{newSkill:"GRIM_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GUILLOTINE",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:200,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.49,highlightIf:e=>e.hasResourceAvailable("SOUL_REAVER"),validateAttempt:RT});On("GAIN_SOUL_GAUGE",50,"cd_GAIN_SOUL_GAUGE",{applicationDelay:0,animationLock:un,cooldown:.01,onConfirm:e=>e.resources.get("SOUL").gain(10)});Object.keys(yR).forEach(e=>Gt(e,`SAM/${xe[e].name}.png`));class hG extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("HIGANBANA_DOT",!1)]}jobSpecificSelfTargetedBuffViewProps(){return Object.keys(yR).filter(t=>t!=="HIGANBANA_DOT").map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("KENKI").availableAmount(),l=n.get("MEDITATION").availableAmount();return[{kind:"sen",name:g({en:"sen",zh:""}),hasSetsu:this.state.hasResourceAvailable("SETSU"),hasGetsu:this.state.hasResourceAvailable("GETSU"),hasKa:this.state.hasResourceAvailable("KA_SEN"),setsuColor:t.sam.setsu,getsuColor:t.sam.getsu,kaColor:t.sam.kaSen},{kind:"bar",name:g({en:"kenki",zh:""}),color:t.sam.kenki,progress:o/100,valueString:o.toFixed(0)},{kind:"counter",name:g({en:"meditation",zh:""}),color:t.sam.meditation,currentStacks:l,maxStacks:3}]}}const _a=(e,t,n)=>{je("SAM",e,t,n??{})};_a("MEIKYO_SHISUI",3,{timeout:20,warnOnTimeout:!0});_a("FUGETSU",1,{timeout:40});_a("FUKA",1,{timeout:40});_a("ZANSHIN_READY",1,{timeout:30});_a("TENDO",1,{timeout:30,warnOnTimeout:!0});_a("OGI_READY",1,{timeout:30});_a("TSUBAME_GAESHI_READY",1,{timeout:30,warnOnTimeout:!0});_a("THIRD_EYE",1,{timeout:4});_a("TENGENTSU",1,{timeout:4});_a("TENGENTSUS_FORESIGHT",1,{timeout:9});_a("ENHANCED_ENPI",1,{timeout:15});_a("MEDITATE",1,{timeout:15.2});_a("KENKI",100,{warnOnOvercap:!0});_a("SETSU",1,{warnOnOvercap:!0});_a("GETSU",1,{warnOnOvercap:!0});_a("KA_SEN",1,{warnOnOvercap:!0});_a("MEDITATION",3,{warnOnOvercap:!0});_a("HIGANBANA_DOT",1,{timeout:60});const zO=["SAM_TWO_READY","SAM_TWO_AOE_READY","GEKKO_READY","KASHA_READY","KAESHI_OGI_READY"];zO.forEach(e=>_a(e,1,{timeout:30}));_a("KAESHI_TRACKER",4,{timeout:30});class EG extends Kt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_HISSATSU")?60:120,o=this.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI")?2:1;[new Le("cd_MEIKYO_SHISUI",55,o,o),new Le("cd_SENEI_GUREN",n,1,1)].forEach(l=>this.cooldowns.set(l)),super.registerRecurringEvents([{reportName:ze("HIGANBANA_DOT"),groupedEffects:[{effectName:"HIGANBANA_DOT",appliedBy:["HIGANBANA"]}]}])}get statusPropsGenerator(){return new hG(this)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?13:10}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("ENHANCED_ENPI")&&n.name==="ENPI"&&t.addBuff(k.EnhancedEnpi),this.hasResourceAvailable("FUGETSU")&&t.addBuff(k.Fugetsu)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("FUKA")&&n.cdName==="cd_GCD"&&t.addBuff(k.Fuka)}hitCombo(t){return super.hitCombo(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}cancelChanneledSkills(){const t=this.findNextQueuedEventByTag(nn.MeditateTick);t&&(t.canceled=!0),this.tryConsumeResource("MEDITATE")}getFugetsuModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?q.FugetsuEnhanced:q.FugetsuBase}getFukaModifier(){return this.hasResourceAvailable("FUKA")?this.inherentSpeedModifier():0}checkCombo(t){return this.hasResourceAvailable(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}refreshBuff(t,n){this.addEvent(new Ne(`gain ${t}`,n,()=>{this.gainStatus(t)}))}progressActiveCombo(t){zO.forEach(n=>{t.includes(n)||this.setComboState(n,0)}),t.forEach(n=>this.setComboState(n,1))}tryConsumeMeikyo(){this.tryConsumeResource("MEIKYO_SHISUI")}gainKenki(t){this.resources.get("KENKI").gain(t)}gainMeditation(){this.resources.get("MEDITATION").gain(1)}gainSen(t){this.resources.get(t).gain(1)}countSen(){return["GETSU","SETSU","KA_SEN"].reduce((t,n)=>this.hasResourceAvailable(n)?t+1:t,0)}consumeAllSen(){["GETSU","SETSU","KA_SEN"].forEach(t=>this.tryConsumeResource(t))}startMeditateTimer(){const t=n=>{const o=new Ne("meditate tick",3,()=>{n<5&&(this.isInCombat()&&(p.reportMeditateTick(this.time,"+kenki/meditation"),this.resources.get("KENKI").gain(10),this.resources.get("MEDITATION").gain(1)),this.addEvent(t(n+1)))});return o.addTag(nn.MeditateTick),o};this.addEvent(t(0))}}const Ht=(e,t,n)=>{const o=r=>{const d=r.hasResourceAvailable("FUGETSU")?[r.getFugetsuModifier()]:[];return n.jobPotencyModifiers&&d.push(...n.jobPotencyModifiers(r)),d};let l=n.baseCastTime||0;return l&&(l=r=>r.hasTraitUnlocked("ENHANCED_IAIJUTSU")?n.baseCastTime||0:r.config.adjustedSksCastTime(1.8,r.getFukaModifier())),$t("SAM",e,t,{...n,castTime:l,recastTime:r=>r.config.adjustedSksGCD(n.baseRecastTime??2.5,r.getFukaModifier()),potency:n.basePotency,jobPotencyModifiers:o,isInstantFn:r=>!(n.baseCastTime&&n.baseCastTime>0)})},zn=(e,t,n,o)=>(o.potency&&!o.jobPotencyModifiers&&(o.jobPotencyModifiers=l=>l.hasResourceAvailable("FUGETSU")?[l.getFugetsuModifier()]:[]),et("SAM",e,t,n,o));Ht("ENPI",15,{applicationDelay:.71,basePotency:100,onConfirm:e=>{e.hasResourceAvailable("ENHANCED_ENPI")&&e.tryConsumeResource("ENHANCED_ENPI"),e.gainKenki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("ENHANCED_ENPI")?[e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?q.YatenpiEnhanced:q.YatenpiBase]:[],highlightIf:e=>e.hasResourceAvailable("ENHANCED_ENPI")});Ht("HAKAZE",1,{autoUpgrade:{trait:"HAKAZE_MASTERY",otherSkill:"GYOFU"},applicationDelay:.85,basePotency:200,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});Ht("GYOFU",92,{autoDowngrade:{trait:"HAKAZE_MASTERY",otherSkill:"HAKAZE"},applicationDelay:.85,basePotency:240,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});Ht("YUKIKAZE",50,{applicationDelay:.85,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_II",290],["WAY_OF_THE_SAMURAI_III",340]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")&&(e.gainKenki(15),e.gainSen("SETSU")),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Ht("JINPU",4,{applicationDelay:.62,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUGETSU",.62),e.tryConsumeMeikyo(),e.progressActiveCombo(["GEKKO_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Ht("GEKKO",30,{applicationDelay:.76,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"GEKKO_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"rear"},onConfirm:e=>{e.checkCombo("GEKKO_READY")&&(e.gainKenki(10),e.gainSen("GETSU")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUGETSU",.76),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("GEKKO_READY")});Ht("SHIFU",18,{applicationDelay:.8,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUKA",.8),e.tryConsumeMeikyo(),e.progressActiveCombo(["KASHA_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Ht("KASHA",40,{applicationDelay:.62,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"KASHA_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"flank"},onConfirm:e=>{e.checkCombo("KASHA_READY")&&(e.gainKenki(10),e.gainSen("KA_SEN")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUKA",.62),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("KASHA_READY")});Ht("FUGA",26,{autoUpgrade:{trait:"FUGA_MASTERY",otherSkill:"FUKO"},falloff:0,applicationDelay:.76,basePotency:90,onConfirm:e=>{e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});Ht("FUKO",86,{autoDowngrade:{trait:"FUGA_MASTERY",otherSkill:"FUGA"},falloff:0,applicationDelay:.76,basePotency:100,onConfirm:e=>{e.gainKenki(10),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});Ht("MANGETSU",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUGETSU",.62),e.gainSen("GETSU")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});Ht("OKA",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUKA",.62),e.gainSen("KA_SEN")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});const jO={newSkill:"HIGANBANA",condition:e=>e.countSen()===1},YO={newSkill:"TENKA_GOKEN",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===2},KO={newSkill:"TENDO_GOKEN",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===2},VO={newSkill:"MIDARE_SETSUGEKKA",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===3},WO={newSkill:"TENDO_SETSUGEKKA",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===3},Fr=[jO,YO,KO,VO,WO];Ht("IAIJUTSU",30,{replaceIf:Fr,baseCastTime:1.3,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});Ht("HIGANBANA",30,{startOnHotbar:!1,replaceIf:Fr,baseCastTime:1.3,basePotency:200,applicationDelay:.62,validateAttempt:jO.condition,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("FUGETSU")&&n.push(e.getFugetsuModifier());const o=e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?50:45;e.addDoTPotencies({node:t,effectName:"HIGANBANA_DOT",skillName:"HIGANBANA",tickPotency:o,speedStat:"sks",modifiers:n}),e.consumeAllSen(),e.gainMeditation()},onApplication:(e,t)=>e.applyDoT("HIGANBANA_DOT",t)});const gE=e=>t=>{t.consumeAllSen(),t.gainStatus("KAESHI_TRACKER",e),t.gainMeditation(),t.gainStatus("TSUBAME_GAESHI_READY"),t.tryConsumeResource("TENDO")};Ht("TENKA_GOKEN",30,{startOnHotbar:!1,replaceIf:Fr,baseCastTime:1.3,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:YO.condition,onConfirm:gE(1)});Ht("TENDO_GOKEN",100,{startOnHotbar:!1,replaceIf:Fr,baseCastTime:1.3,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:KO.condition,onConfirm:gE(2)});Ht("MIDARE_SETSUGEKKA",30,{startOnHotbar:!1,replaceIf:Fr,baseCastTime:1.3,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[q.AutoCrit],validateAttempt:VO.condition,onConfirm:gE(3)});Ht("TENDO_SETSUGEKKA",100,{startOnHotbar:!1,replaceIf:Fr,baseCastTime:1.3,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[q.AutoCrit],validateAttempt:WO.condition,onConfirm:gE(4)});const $m={newSkill:"KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",1)},eR={newSkill:"TENDO_KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",2)},tR={newSkill:"KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",3)},aR={newSkill:"TENDO_KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",4)},mu=[$m,eR,tR,aR];Ht("TSUBAME_GAESHI",74,{replaceIf:mu,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});const pE=e=>{e.tryConsumeResource("KAESHI_TRACKER",!0),e.tryConsumeResource("TSUBAME_GAESHI_READY"),e.tryConsumeResource("KAESHI_OGI_READY")};Ht("KAESHI_GOKEN",74,{startOnHotbar:!1,replaceIf:mu,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:$m.condition,onConfirm:pE,highlightIf:$m.condition});Ht("TENDO_KAESHI_GOKEN",100,{startOnHotbar:!1,replaceIf:mu,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:eR.condition,onConfirm:pE,highlightIf:eR.condition});Ht("KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:mu,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[q.AutoCrit],validateAttempt:tR.condition,onConfirm:pE,highlightIf:tR.condition});Ht("TENDO_KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:mu,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[q.AutoCrit],validateAttempt:aR.condition,onConfirm:pE,highlightIf:aR.condition});Ht("OGI_NAMIKIRI",90,{replaceIf:[{newSkill:"KAESHI_NAMIKIRI",condition:e=>e.hasResourceAvailable("KAESHI_OGI_READY")}],falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],baseCastTime:1.3,jobPotencyModifiers:e=>[q.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("OGI_READY"),onConfirm:e=>{e.tryConsumeResource("OGI_READY"),e.gainMeditation(),e.gainStatus("KAESHI_OGI_READY")},highlightIf:e=>e.hasResourceAvailable("OGI_READY")});Ht("KAESHI_NAMIKIRI",90,{startOnHotbar:!1,falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],jobPotencyModifiers:e=>[q.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("KAESHI_OGI_READY"),onConfirm:e=>e.tryConsumeResource("KAESHI_OGI_READY"),highlightIf:e=>e.hasResourceAvailable("KAESHI_OGI_READY")});zn("MEIKYO_SHISUI",50,"cd_MEIKYO_SHISUI",{cooldown:55,maxCharges:2,onConfirm:e=>{e.gainStatus("MEIKYO_SHISUI",3),e.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI_II")&&e.gainStatus("TENDO")}});zn("IKISHOTEN",68,"cd_IKISHOTEN",{replaceIf:[{newSkill:"ZANSHIN",condition:e=>e.hasResourceAvailable("ZANSHIN_READY")}],cooldown:120,requiresCombat:!0,onConfirm:e=>{e.gainKenki(50),e.hasTraitUnlocked("ENHANCED_IKISHOTEN")&&e.gainStatus("OGI_READY"),e.hasTraitUnlocked("ENHANCED_IKISHOTEN_II")&&e.gainStatus("ZANSHIN_READY")}});zn("HISSATSU_SHINTEN",52,"cd_SHINTEN",{cooldown:1,applicationDelay:.62,potency:250,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});zn("HISSATSU_KYUTEN",62,"cd_KYUTEN",{cooldown:1,applicationDelay:.62,potency:100,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});zn("HISSATSU_GYOTEN",54,"cd_GYOTEN",{cooldown:5,applicationDelay:.49,animationLock:jt,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>e.resources.get("KENKI").consume(10),highlightIf:e=>e.resources.get("KENKI").available(10)});zn("HISSATSU_YATEN",56,"cd_YATEN",{cooldown:10,applicationDelay:.45,animationLock:jt,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>{e.resources.get("KENKI").consume(10),e.gainStatus("ENHANCED_ENPI")},highlightIf:e=>e.resources.get("KENKI").available(10)});zn("HISSATSU_SENEI",72,"cd_SENEI_GUREN",{cooldown:60,applicationDelay:.67,potency:800,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});zn("HISSATSU_GUREN",70,"cd_SENEI_GUREN",{cooldown:60,applicationDelay:.62,potency:400,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});zn("HAGAKURE",68,"cd_HAGAKURE",{cooldown:5,validateAttempt:e=>e.countSen()>0,onConfirm:e=>{e.gainKenki(e.countSen()*10),e.consumeAllSen()},highlightIf:e=>e.countSen()===3});zn("SHOHA",80,"cd_SHOHA",{cooldown:15,potency:[["NEVER",560],["WAY_OF_THE_SAMURAI_III",640]],falloff:.4,applicationDelay:.58,validateAttempt:e=>e.resources.get("MEDITATION").available(3),onConfirm:e=>e.tryConsumeResource("MEDITATION",!0),highlightIf:e=>e.resources.get("MEDITATION").available(3)});we("SAM","THIRD_EYE",6,"cd_THIRD_EYE",{rscType:"THIRD_EYE",autoUpgrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"TENGENTSU"},replaceIf:[{newSkill:"THIRD_EYE_POP",condition:e=>e.hasResourceAvailable("THIRD_EYE")}],cooldown:15,applicationDelay:0});we("SAM","TENGENTSU",82,"cd_THIRD_EYE",{rscType:"TENGENTSU",autoDowngrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"THIRD_EYE"},replaceIf:[{newSkill:"TENGENTSU_POP",condition:e=>e.hasResourceAvailable("TENGENTSU")}],cooldown:15,applicationDelay:0});zn("THIRD_EYE_POP",6,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:un,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THIRD_EYE"),onConfirm:e=>{e.tryConsumeResource("THIRD_EYE"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("THIRD_EYE")});zn("TENGENTSU_POP",82,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:un,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TENGENTSU"),onConfirm:e=>{e.tryConsumeResource("TENGENTSU"),e.gainStatus("TENGENTSUS_FORESIGHT"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("TENGENTSU")});zn("ZANSHIN",96,"cd_ZANSHIN",{startOnHotbar:!1,cooldown:1,falloff:.4,applicationDelay:1.03,potency:940,validateAttempt:e=>e.hasResourceAvailable("ZANSHIN_READY")&&e.resources.get("KENKI").available(50),onConfirm:e=>{e.resources.get("KENKI").consume(50),e.tryConsumeResource("ZANSHIN_READY")},highlightIf:e=>e.hasResourceAvailable("ZANSHIN_READY")});we("SAM","MEDITATE",60,"cd_MEDITATE",{rscType:"MEDITATE",cooldown:60,applicationDelay:.62,validateAttempt:e=>e.cooldowns.get("cd_GCD").stacksAvailable()>0,onConfirm:e=>{const t=e.config.adjustedSksGCD(2.5,e.getFukaModifier());e.cooldowns.get("cd_GCD").useStackWithRecast(e.config.getAfterTaxGCD(t))},onApplication:e=>e.startMeditateTimer()});Object.keys(LR).forEach(e=>Gt(e,`SMN/${xe[e].name}.png`));class fG extends Yt{jobSpecificSelfTargetedBuffViewProps(){const t=["AETHERFLOW","IFRITS_FAVOR","TITANS_FAVOR","GARUDAS_FAVOR","CRIMSON_STRIKE_READY"];return[...Object.keys(LR).map(n=>t.includes(n)?this.makeCommonTimerless(n):this.makeCommonTimer(n))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=Math.max(n.timeTillReady("FIRE_ATTUNEMENT"),n.timeTillReady("EARTH_ATTUNEMENT"),n.timeTillReady("WIND_ATTUNEMENT")),l=n.get("ACTIVE_DEMI").availableAmount(),r=n.timeTillReady("ACTIVE_DEMI");n.get("RUBY_ARCANUM").available(1),n.get("TOPAZ_ARCANUM").available(1),n.get("EMERALD_ARCANUM").available(1);const d=l===nR.BAHAMUT?t.smn.bahamut:l===nR.PHOENIX?t.smn.phoenix:t.smn.solar,E=n.get("FIRE_ATTUNEMENT").available(1)?t.smn.ruby:n.get("EARTH_ATTUNEMENT").available(1)?t.smn.topaz:t.smn.emerald,h=this.state.cooldowns.get("cd_SUMMON_LOCKOUT"),A=h.timeTillNextStackAvailable();return[{kind:"counter",name:g({en:"aetherflow",zh:""}),color:t.smn.aetherflow,currentStacks:n.get("AETHERFLOW").availableAmount(),maxStacks:2},{kind:"bar",name:g({en:"demi summon",zh:""}),color:d,progress:r===0?0:1-r/15,valueString:r.toFixed(3)},{kind:"attunement",aetherName:g({en:"aether",zh:""}),attunementName:g({en:"attunement",zh:""}),ruby:n.get("RUBY_ARCANUM").available(1),topaz:n.get("TOPAZ_ARCANUM").available(1),emerald:n.get("EMERALD_ARCANUM").available(1),attunementCount:Math.max(n.get("FIRE_ATTUNEMENT").availableAmount(),n.get("EARTH_ATTUNEMENT").availableAmount(),n.get("WIND_ATTUNEMENT").availableAmount()),timeRemaining:o,rubyColor:t.smn.ruby,topazColor:t.smn.topaz,emeraldColor:t.smn.emerald},{kind:"bar",name:g({en:"summon lock",zh:""}),color:E,progress:A>0?1-h.timeTillNextStackAvailable()/h.currentStackCd():0,valueString:A.toFixed(3)}]}}const Wt=(e,t,n)=>{je("SMN",e,t,n??{})};var nR=(e=>(e[e.NONE=0]="NONE",e[e.SOLAR=1]="SOLAR",e[e.BAHAMUT=2]="BAHAMUT",e[e.PHOENIX=3]="PHOENIX",e))(nR||{});const XO=15;Wt("AETHERFLOW",2,{warnOnOvercap:!0});Wt("RUBY_ARCANUM",1);Wt("TOPAZ_ARCANUM",1);Wt("EMERALD_ARCANUM",1);Wt("FIRE_ATTUNEMENT",2,{timeout:30});Wt("EARTH_ATTUNEMENT",4,{timeout:30});Wt("WIND_ATTUNEMENT",4,{timeout:30});Wt("CRIMSON_STRIKE_READY",1);Wt("EVERLASTING_FLIGHT",1,{timeout:21});Wt("FURTHER_RUIN",1,{timeout:60});Wt("GARUDAS_FAVOR",1);Wt("IFRITS_FAVOR",1);Wt("TITANS_FAVOR",1);Wt("RADIANT_AEGIS",1,{timeout:30});Wt("REFULGENT_LUX",1,{timeout:30});Wt("REKINDLE",1,{timeout:30});Wt("UNDYING_FLAME",1,{timeout:15});Wt("RUBYS_GLIMMER",1,{timeout:30,warnOnTimeout:!0});Wt("SEARING_LIGHT",1,{timeout:20});Wt("SLIPSTREAM",1,{timeout:15});Wt("ACTIVE_DEMI",3,{timeout:XO});Wt("NEXT_DEMI_CYCLE",3);Wt("DEMI_AUTO",4);const Qp=3.163,AG=new Map([["SUMMON_IFRIT_II",2.1],["SUMMON_GARUDA_II",2.1],["SUMMON_TITAN_II",2.1],["SUMMON_IFRIT",2.46],["SUMMON_GARUDA",2.1],["SUMMON_TITAN",2.46]]),Jp=new Map([["SUMMON_IFRIT_II",1.96],["SUMMON_GARUDA_II",1.29],["SUMMON_TITAN_II",1.96],["SUMMON_IFRIT",.936],["SUMMON_GARUDA",.8],["SUMMON_TITAN",.8],["ENKINDLE_BAHAMUT",.894],["ENKINDLE_PHOENIX",1.026],["ENKINDLE_SOLAR_BAHAMUT",.846]]),mG=new Map([["SUMMON_IFRIT_II",6.29],["SUMMON_GARUDA_II",6.29],["SUMMON_TITAN_II",6.29],["SUMMON_IFRIT",4.6],["SUMMON_GARUDA",4.3],["SUMMON_TITAN",4.6]]);class RG extends Kt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60;this.cooldowns.set(new Le("cd_SWIFTCAST",n,1,1));const o=this.hasTraitUnlocked("ENHANCED_RADIANT_AEGIS")?2:1;this.cooldowns.set(new Le("cd_RADIANT_AEGIS",60,o,o)),this.cooldowns.set(new Le("cd_DEMI_SUMMON",this.config.adjustedGCD(60),1,1)),this.cooldowns.set(new Le("cd_SUMMON_LOCKOUT",5,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SLIPSTREAM",appliedBy:["SLIPSTREAM"],isGroundTargeted:!0}]}],["SUMMON_BAHAMUT","SUMMON_PHOENIX","SUMMON_SOLAR_BAHAMUT"])}get statusPropsGenerator(){return new fG(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("SEARING_LIGHT")&&t.addBuff(k.SearingLight)}get activeDemi(){return this.resources.get("ACTIVE_DEMI").availableAmount()}get nextDemi(){const t=this.resources.get("NEXT_DEMI_CYCLE").availableAmount();return this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT_II")?t===1?2:t===3?3:1:this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT")?t%2===0?2:3:2}get hasActivePet(){return this.activeDemi!==0||this.cooldowns.get("cd_SUMMON_LOCKOUT").stacksAvailable()===0}snapSearingAndTincture(t,n){const o=n.modifiers;this.hasResourceAvailable("SEARING_LIGHT")&&o.push(q.SearingLight),this.hasResourceAvailable("TINCTURE")&&(o.push(q.Tincture),t.addBuff(k.Tincture))}makePetPotency(t,n,o,l,r){const d=new Zt({config:this.config,sourceTime:o,sourceSkill:n,aspect:Ie.Other,basePotency:l,snapshotTime:this.getDisplayTime(),description:"",targetCount:t,falloff:r}),E=[q.SmnPet];return d.modifiers=E,d}handleDemiAuto(){if(!this.hasResourceAvailable("DEMI_AUTO"))return;const t=4-this.resources.get("DEMI_AUTO").availableAmount();if(t<0)return;const n=this.resources.get("DEMI_AUTO").node;if(n!==void 0){const o=n.getDotPotencies("DEMI_AUTO")[t];this.snapSearingAndTincture(n,o),o.snapshotTime=this.getDisplayTime(),p.resolvePotency(o)}this.tryConsumeResource("DEMI_AUTO"),this.addEvent(new Ne("demi auto",Qp,()=>this.handleDemiAuto()))}startPetAutos(t,n){const o=this.resources.get("DEMI_AUTO"),l=this.activeDemi===1?160:150;o.gain(4),o.node=t;for(let r=0;r<4;r++)t.addDoTPotency(this.makePetPotency(1,n,this.getDisplayTime(),l),"DEMI_AUTO");this.addEvent(new Ne("first demi auto",Qp,()=>this.handleDemiAuto()))}queuePetDamageEvent(t,n,o,l,r,d){const E=this.getDisplayTime();this.addEvent(new Ne(o+" pet snapshot",r,()=>{const h=this.makePetPotency(t.targetCount,o,E,l,.6);t.addPotency(h),this.snapSearingAndTincture(t,h),this.jobSpecificAddDamageBuffCovers(t,al("SMN",n)),this.addEvent(new Ne(o+" application",d,()=>p.resolvePotency(h)))}))}queueEnkindle(t,n){let o,l;n==="ENKINDLE_BAHAMUT"?(o="AKH_MORN",l=1300):n==="ENKINDLE_PHOENIX"?(o="REVELATION",l=1300):(o="EXODUS",l=1500);const r=this.resources.get("ACTIVE_DEMI").pendingChange;console.assert(r),r&&r.timeTillEvent<2.5&&p.reportWarning({kind:"custom",en:"enkindle used near end of demi window may ghost"}),this.queuePetDamageEvent(t,n,o,l,0,Jp.get(n))}queuePrimalSummon(t,n){let o=600;this.hasTraitUnlocked("ARCANE_MASTERY")?o=800:this.hasTraitUnlocked("ENKINDLE_II")&&(o=750);let l;n.includes("IFRIT")?l="INFERNO":n.includes("TITAN")?l="EARTHEN_FURY":l="AERIAL_BLAST",this.queuePetDamageEvent(t,n,l,o,AG.get(n),Jp.get(n));const r=mG.get(n);this.cooldowns.get("cd_SUMMON_LOCKOUT").useStackWithRecast(r)}}const Qe=(e,t,n)=>{const o=n.baseCastTime??0,l=n.baseRecastTime??2.5,r=o>0?Me(d=>d.tryConsumeResource("SWIFTCAST"),n.onConfirm):n.onConfirm;return Bn("SMN",e,t,{...n,castTime:d=>d.config.adjustedCastTime(o),recastTime:d=>l<=1.5?l:d.config.adjustedGCD(l),potency:n.basePotency,jobPotencyModifiers:d=>{const E=[];return n.isPetAttack&&E.push(q.SmnPet),d.hasResourceAvailable("SEARING_LIGHT")&&E.push(q.SearingLight),E},isInstantFn:d=>d.hasResourceAvailable("SWIFTCAST")||o===0,onConfirm:r})},Ki=(e,t,n,o)=>et("SMN",e,t,n,{...o,jobPotencyModifiers:l=>l.hasResourceAvailable("SEARING_LIGHT")?[q.SearingLight]:[]}),ls=[{newSkill:"RUIN_III",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_IMPULSE",condition:e=>e.activeDemi===2},{newSkill:"FOUNTAIN_OF_FIRE",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_IMPULSE",condition:e=>e.activeDemi===1}];Qe("RUIN_III",54,{basePotency:[["NEVER",300],["RUIN_MASTERY_IV",310],["ARCANE_MASTERY",400]],baseCastTime:1.5,manaCost:300,replaceIf:ls,applicationDelay:.8});Qe("ASTRAL_IMPULSE",58,{basePotency:[["NEVER",440],["ARCANE_MASTERY",500]],manaCost:300,replaceIf:ls,applicationDelay:.67,validateAttempt:ls[1].condition,startOnHotbar:!1});Qe("FOUNTAIN_OF_FIRE",80,{basePotency:[["NEVER",540],["ARCANE_MASTERY",580]],manaCost:300,replaceIf:ls,applicationDelay:1.07,validateAttempt:ls[2].condition,startOnHotbar:!1});Qe("UMBRAL_IMPULSE",100,{basePotency:620,manaCost:300,replaceIf:ls,applicationDelay:.8,validateAttempt:ls[3].condition,startOnHotbar:!1});const cl=[{newSkill:"OUTBURST",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_FLARE",condition:e=>e.activeDemi===2},{newSkill:"BRAND_OF_PURGATORY",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_FLARE",condition:e=>e.activeDemi===1}];Qe("OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TRI_DISASTER"},basePotency:100,baseCastTime:1.5,manaCost:300,replaceIf:cl,applicationDelay:.8,falloff:0});Qe("TRI_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"OUTBURST"},basePotency:120,baseCastTime:1.5,manaCost:300,replaceIf:cl,applicationDelay:.8,falloff:0});Qe("ASTRAL_FLARE",58,{basePotency:180,manaCost:300,replaceIf:cl,applicationDelay:.54,validateAttempt:cl[1].condition,falloff:0,startOnHotbar:!1});Qe("BRAND_OF_PURGATORY",80,{basePotency:240,manaCost:300,replaceIf:cl,applicationDelay:.8,validateAttempt:cl[2].condition,falloff:0,startOnHotbar:!1});Qe("UMBRAL_FLARE",100,{basePotency:280,manaCost:300,replaceIf:cl,applicationDelay:.53,validateAttempt:cl[2].condition,falloff:0,startOnHotbar:!1});const TG=[{newSkill:"RUBY_RUIN_III",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_RUIN_III",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_RUIN_III",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];Qe("GEMSHINE",6,{replaceIf:TG,applicationDelay:0,validateAttempt:e=>!1});Qe("RUBY_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:410,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});Qe("TOPAZ_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RITE"},basePotency:300,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),startOnHotbar:!1});Qe("EMERALD_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RITE"},baseRecastTime:1.5,basePotency:180,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});Qe("RUBY_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:[["NEVER",480],["RUIN_MASTERY_IV",510],["ARCANE_MASTERY",580]],baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});Qe("TOPAZ_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RUIN_III"},basePotency:[["NEVER",320],["RUIN_MASTERY_IV",330],["ARCANE_MASTERY",340]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},startOnHotbar:!1});Qe("EMERALD_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RUIN_III"},baseRecastTime:1.5,basePotency:[["NEVER",220],["RUIN_MASTERY_IV",230],["ARCANE_MASTERY",280]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});const SG=[{newSkill:"RUBY_OUTBURST",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_OUTBURST",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_OUTBURST",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];Qe("PRECIOUS_BRILLIANCE",26,{replaceIf:SG,applicationDelay:0,validateAttempt:e=>!1});Qe("RUBY_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_DISASTER"},basePotency:160,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Qe("TOPAZ_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_DISASTER"},basePotency:110,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Qe("EMERALD_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:70,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Qe("RUBY_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_CATASTROPHE"},basePotency:190,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Qe("TOPAZ_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_CATASTROPHE"},basePotency:130,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Qe("EMERALD_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_CATASTROPHE"},baseRecastTime:1.5,basePotency:90,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Qe("RUBY_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_DISASTER"},basePotency:210,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Qe("TOPAZ_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_DISASTER"},basePotency:140,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},falloff:0,startOnHotbar:!1});Qe("EMERALD_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:100,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});const IG=[{newSkill:"SUMMON_BAHAMUT",condition:e=>e.nextDemi===2},{newSkill:"SUMMON_PHOENIX",condition:e=>e.nextDemi===3},{newSkill:"SUMMON_SOLAR_BAHAMUT",condition:e=>e.nextDemi===1}],_G={cdName:"cd_DEMI_SUMMON",cooldown:60,maxCharges:1};[{name:"SUMMON_BAHAMUT",autoName:"WYRMWAVE",level:70,activeValue:2},{name:"SUMMON_PHOENIX",autoName:"SCARLET_FLAME",level:80,activeValue:3},{name:"SUMMON_SOLAR_BAHAMUT",autoName:"LUXWAVE",level:100,activeValue:1}].forEach((e,t)=>Qe(e.name,e.level,{applicationDelay:.76,replaceIf:IG,secondaryCooldown:_G,validateAttempt:n=>!n.hasActivePet&&n.nextDemi===e.activeValue,drawsAggro:!0,onConfirm:(n,o)=>{n.gainStatus("ACTIVE_DEMI",e.activeValue),n.startPetAutos(o,e.autoName),["RUBY_ARCANUM","TOPAZ_ARCANUM","EMERALD_ARCANUM"].forEach(l=>n.gainStatus(l,1)),["FIRE_ATTUNEMENT","EARTH_ATTUNEMENT","WIND_ATTUNEMENT"].forEach(l=>n.tryConsumeResource(l,!0)),n.tryConsumeResource("IFRITS_FAVOR"),n.tryConsumeResource("CRIMSON_STRIKE_READY"),n.tryConsumeResource("GARUDAS_FAVOR"),n.tryConsumeResource("TITANS_FAVOR"),e.name==="SUMMON_SOLAR_BAHAMUT"&&n.gainStatus("REFULGENT_LUX"),n.addEvent(new Ne("update next demi",XO,()=>{n.resources.get("NEXT_DEMI_CYCLE").gainWrapping(1)}))},onApplication:n=>{n.isInCombat()||n.resources.get("IN_COMBAT").gain(1)},startOnHotbar:t===0}));const zh=e=>!e.hasActivePet&&e.hasResourceAvailable("RUBY_ARCANUM"),jh=e=>!e.hasActivePet&&e.hasResourceAvailable("TOPAZ_ARCANUM"),Yh=e=>!e.hasActivePet&&e.hasResourceAvailable("EMERALD_ARCANUM"),qO=e=>(t,n)=>{t.tryConsumeResource("RUBY_ARCANUM"),t.gainStatus("FIRE_ATTUNEMENT",2),t.queuePrimalSummon(n,e),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("TITANS_FAVOR"),t.tryConsumeResource("GARUDAS_FAVOR")},ZO=e=>(t,n)=>{t.tryConsumeResource("TOPAZ_ARCANUM"),t.gainStatus("EARTH_ATTUNEMENT",4),t.queuePrimalSummon(n,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("GARUDAS_FAVOR")},QO=e=>(t,n)=>{t.tryConsumeResource("EMERALD_ARCANUM"),t.gainStatus("WIND_ATTUNEMENT",4),t.queuePrimalSummon(n,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("TITANS_FAVOR")},zr=.5;Qe("SUMMON_IFRIT",30,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT_II"},applicationDelay:0,highlightIf:zh,validateAttempt:zh,onConfirm:qO("SUMMON_IFRIT"),falloff:zr});Qe("SUMMON_TITAN",35,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN_II"},applicationDelay:0,highlightIf:jh,validateAttempt:jh,onConfirm:ZO("SUMMON_TITAN"),falloff:zr});Qe("SUMMON_GARUDA",45,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA_II"},applicationDelay:0,highlightIf:Yh,validateAttempt:Yh,onConfirm:QO("SUMMON_GARUDA"),falloff:zr});Qe("SUMMON_IFRIT_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT"},applicationDelay:0,highlightIf:zh,validateAttempt:zh,onConfirm:Me(e=>e.gainStatus("IFRITS_FAVOR"),qO("SUMMON_IFRIT_II")),falloff:zr});Qe("SUMMON_TITAN_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN"},applicationDelay:0,highlightIf:jh,validateAttempt:jh,onConfirm:ZO("SUMMON_TITAN_II"),falloff:zr});Qe("SUMMON_GARUDA_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA"},applicationDelay:0,highlightIf:Yh,validateAttempt:Yh,onConfirm:Me(e=>e.gainStatus("GARUDAS_FAVOR"),QO("SUMMON_GARUDA_II")),falloff:zr});const rn=[{newSkill:"DEATHFLARE",condition:e=>e.activeDemi===2},{newSkill:"REKINDLE",condition:e=>e.activeDemi===3},{newSkill:"SUNFLARE",condition:e=>e.activeDemi===1},{newSkill:"CRIMSON_CYCLONE",condition:e=>e.hasResourceAvailable("IFRITS_FAVOR")},{newSkill:"CRIMSON_STRIKE",condition:e=>e.hasResourceAvailable("CRIMSON_STRIKE_READY")},{newSkill:"MOUNTAIN_BUSTER",condition:e=>e.hasResourceAvailable("TITANS_FAVOR")},{newSkill:"SLIPSTREAM",condition:e=>e.hasResourceAvailable("GARUDAS_FAVOR")}];Ki("ASTRAL_FLOW",60,"cd_ASTRAL_FLOW",{applicationDelay:0,cooldown:20,replaceIf:rn,validateAttempt:e=>!1});Ki("DEATHFLARE",60,"cd_ASTRAL_FLOW",{potency:500,applicationDelay:.8,cooldown:20,replaceIf:rn,highlightIf:e=>!0,validateAttempt:rn[0].condition,falloff:.5,startOnHotbar:!1});Ki("REKINDLE",80,"cd_ASTRAL_FLOW",{applicationDelay:1.03,cooldown:20,replaceIf:rn,highlightIf:e=>!0,validateAttempt:rn[1].condition,onConfirm:e=>e.gainStatus("REKINDLE"),startOnHotbar:!1});Ki("SUNFLARE",100,"cd_ASTRAL_FLOW",{potency:800,applicationDelay:.8,cooldown:20,replaceIf:rn,highlightIf:e=>!0,validateAttempt:rn[2].condition,falloff:.5,startOnHotbar:!1});Qe("CRIMSON_CYCLONE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.8,replaceIf:rn,highlightIf:e=>!0,validateAttempt:rn[3].condition,onConfirm:e=>{e.tryConsumeResource("IFRITS_FAVOR"),e.gainStatus("CRIMSON_STRIKE_READY")},falloff:.6,startOnHotbar:!1});Qe("CRIMSON_STRIKE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.76,replaceIf:rn,highlightIf:e=>!0,validateAttempt:rn[4].condition,onConfirm:e=>e.tryConsumeResource("CRIMSON_STRIKE_READY"),falloff:.6,startOnHotbar:!1});Ki("MOUNTAIN_BUSTER",86,"cd_MOUNTAIN_BUSTER",{potency:[["NEVER",150],["ARCANE_MASTERY",160]],cooldown:1,applicationDelay:.76,replaceIf:rn,highlightIf:e=>!0,validateAttempt:rn[5].condition,onConfirm:e=>e.tryConsumeResource("TITANS_FAVOR"),falloff:.6,startOnHotbar:!1});Qe("SLIPSTREAM",86,{baseCastTime:3,baseRecastTime:3.5,basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:1.02,replaceIf:rn,highlightIf:e=>!0,validateAttempt:rn[6].condition,onConfirm:(e,t)=>{e.tryConsumeResource("GARUDAS_FAVOR"),e.addDoTPotencies({node:t,effectName:"SLIPSTREAM",skillName:"SLIPSTREAM",tickPotency:30,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("SLIPSTREAM",t),falloff:.6,startOnHotbar:!1});const gG=[{newSkill:"ENKINDLE_BAHAMUT",condition:e=>[0,2].includes(e.activeDemi)},{newSkill:"ENKINDLE_PHOENIX",condition:e=>e.activeDemi===3},{newSkill:"ENKINDLE_SOLAR_BAHAMUT",condition:e=>e.activeDemi===1}];[{name:"ENKINDLE_BAHAMUT",level:70,activeValue:2,falloff:.5},{name:"ENKINDLE_PHOENIX",level:80,activeValue:3,falloff:.5},{name:"ENKINDLE_SOLAR_BAHAMUT",level:100,activeValue:1,falloff:.5}].forEach((e,t)=>Ki(e.name,e.level,"cd_ENKINDLE",{applicationDelay:0,cooldown:20,replaceIf:gG,validateAttempt:n=>n.activeDemi===e.activeValue,onConfirm:(n,o)=>n.queueEnkindle(o,e.name),startOnHotbar:t===0,falloff:e.falloff}));Qe("RUIN_IV",62,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],manaCost:400,applicationDelay:.8,falloff:.6,highlightIf:e=>e.hasResourceAvailable("FURTHER_RUIN"),validateAttempt:e=>e.hasResourceAvailable("FURTHER_RUIN"),onConfirm:e=>e.tryConsumeResource("FURTHER_RUIN")});[{name:"ENERGY_DRAIN",level:10,potency:200,applicationDelay:1.07},{name:"ENERGY_SIPHON",level:52,potency:100,applicationDelay:1.02,falloff:0}].forEach(e=>Ki(e.name,e.level,"cd_ENERGY_DRAIN",{...e,cooldown:60,onConfirm:t=>{t.gainStatus("AETHERFLOW",2),t.gainStatus("FURTHER_RUIN")}}));[{name:"FESTER",level:10,potency:340,applicationDelay:.71,autoUpgrade:{trait:"ENHANCED_FESTER",otherSkill:"NECROTIZE"}},{name:"PAINFLARE",level:40,potency:150,applicationDelay:.44,falloff:0},{name:"NECROTIZE",level:92,potency:460,applicationDelay:.71,autoDowngrade:{trait:"ENHANCED_FESTER",otherSkill:"FESTER"}}].forEach(e=>Ki(e.name,e.level,"cd_AETHERFLOW",{...e,cooldown:1,validateAttempt:t=>t.hasResourceAvailable("AETHERFLOW"),onConfirm:t=>t.tryConsumeResource("AETHERFLOW")}));we("SMN","SEARING_LIGHT",66,"cd_SEARING_LIGHT",{rscType:"SEARING_LIGHT",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_SEARING_LIGHT")&&e.gainStatus("RUBYS_GLIMMER")},replaceIf:[{newSkill:"SEARING_FLASH",condition:e=>e.hasResourceAvailable("RUBYS_GLIMMER")}]});Ki("SEARING_FLASH",96,"cd_SEARING_FLASH",{potency:600,applicationDelay:.8,cooldown:1,falloff:0,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),validateAttempt:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),onConfirm:e=>e.tryConsumeResource("RUBYS_GLIMMER")});we("SMN","RADIANT_AEGIS",2,"cd_RADIANT_AEGIS",{rscType:"RADIANT_AEGIS",applicationDelay:.45,cooldown:60,maxCharges:2,validateAttempt:e=>!e.hasActivePet});Ki("LUX_SOLARIS",100,"cd_LUX_SOLARIS",{applicationDelay:.62,cooldown:60,highlightIf:e=>e.hasResourceAvailable("REFULGENT_LUX"),validateAttempt:e=>e.hasResourceAvailable("REFULGENT_LUX"),onConfirm:e=>e.tryConsumeResource("REFULGENT_LUX")});Qe("RESURRECTION",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.11,basePotency:0});Object.keys(HN).forEach(e=>Gt(e,`SGE/${xe[e].name}.png`));const pG=["EUKRASIAN_DOSIS","EUKRASIAN_DOSIS_II","EUKRASIAN_DOSIS_III","EUKRASIAN_DYSKRASIA"],NG=["EUKRASIAN_DIAGNOSIS","KRASIS","TAUROCHOLE","HAIMA","HAIMATINON","KARDION"],CG=["EUKRASIA","SOTERIA","ZOE","PHILOSOPHIA","KARDIA"],OG=["EUKRASIAN_PROGNOSIS","PANHAIMA","PANHAIMATINON","KERACHOLE","KERAKEIA","EUDAIMONIA","HOLOS","HOLOSAKOS"];class bG extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[...pG,...NG].map(t=>t==="KARDION"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...OG,...CG].map(t=>t==="KARDIA"||t==="EUKRASIA"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources.get("ADDERSGALL"),o=wt("SGE","ADDERSGALL").maxTimeout,l=n.availableAmount()<n.maxValue?this.state.resources.timeTillReady("ADDERSGALL"):o,r=this.state.resources.get("ADDERSTING");return[{kind:"counter",name:g({en:xe.ADDERSGALL.name,zh:xe.ADDERSGALL.label.zh}),color:t.sge.addersgall,currentStacks:n.availableAmount(),maxStacks:n.maxValue},{kind:"bar",name:g({en:xe.ADDERSGALL.name+" timer",zh:xe.ADDERSGALL.label.zh+""}),color:t.sge.addersgall,progress:1-l/o,valueString:l.toFixed(3)},{kind:"counter",name:g({en:xe.ADDERSTING.name,zh:xe.ADDERSTING.label.zh}),color:t.sge.addersting,currentStacks:r.availableAmount(),maxStacks:r.maxValue}]}}const Ct=(e,t,n)=>{je("SGE",e,t,n??{})};Ct("ADDERSGALL",3,{default:3,timeout:20});Ct("ADDERSTING",3,{default:3});Ct("EUKRASIA",1);Ct("KARDIA",1,{default:1});Ct("KARDION",1,{default:1});Ct("EUKRASIAN_DIAGNOSIS",1,{timeout:30});Ct("DIFFERENTIAL_DIAGNOSIS",1,{timeout:30});Ct("EUKRASIAN_PROGNOSIS",1,{timeout:30});Ct("HAIMA",1,{timeout:15});Ct("HAIMATINON",5,{timeout:15});Ct("PANHAIMA",1,{timeout:15});Ct("PANHAIMATINON",5,{timeout:15});Ct("PHYSIS_II",1,{timeout:15});Ct("AUTOPHYSIS",1,{timeout:15});Ct("PHILOSOPHIA",1,{timeout:20});Ct("EUDAIMONIA",1,{timeout:20});Ct("HOLOS",1,{timeout:20});Ct("HOLOSAKOS",1,{timeout:30});Ct("SOTERIA",4,{timeout:15});Ct("ZOE",1,{timeout:30});Ct("KRASIS",1,{timeout:10});Ct("KERACHOLE",1,{timeout:15});Ct("KERAKEIA",1,{timeout:15});Ct("TAUROCHOLE",1,{timeout:15});Ct("EUKRASIAN_DOSIS",1,{timeout:30});Ct("EUKRASIAN_DOSIS_II",1,{timeout:30});Ct("EUKRASIAN_DOSIS_III",1,{timeout:30});Ct("EUKRASIAN_DYSKRASIA",1,{timeout:30});class DG extends Kt{constructor(t){if(super(t),this.hasTraitUnlocked("ENHANCED_SWIFTCAST")||this.cooldowns.set(new Le("cd_SWIFTCAST",60,1,1)),!this.hasTraitUnlocked("ENHANCED_PHYSIS_II")){const n=Bi(this.job).get("AUTOPHYSIS");n.maxTimeout=10,Bi(this.job).set("AUTOPHYSIS",n)}this.hasTraitUnlocked("ENHANCED_SOTERIA")||this.cooldowns.set(new Le("cd_SOTERIA",90,1,1)),this.hasTraitUnlocked("ENHANCED_ZOE")||this.cooldowns.set(new Le("cd_ZOE",120,1,1)),this.registerRecurringEvents([{reportName:g({en:"Eukrasian DoT"}),groupedEffects:[{effectName:"EUKRASIAN_DOSIS",appliedBy:["EUKRASIAN_DOSIS"]},{effectName:"EUKRASIAN_DOSIS_II",appliedBy:["EUKRASIAN_DOSIS_II"]},{effectName:"EUKRASIAN_DOSIS_III",appliedBy:["EUKRASIAN_DOSIS_III"]},{effectName:"EUKRASIAN_DYSKRASIA",appliedBy:["EUKRASIAN_DYSKRASIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"PHYSIS_II",appliedBy:["PHYSIS_II"]}]},{isHealing:!0,groupedEffects:[{effectName:"KERAKEIA",appliedBy:["KERACHOLE"]}]}])}get statusPropsGenerator(){return new bG(this)}jobSpecificRegisterRecurringEvents(){const t=n=>{const o=wt("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",o.maxValue)||this.resources.get("ADDERSGALL").gain(1),this.resources.addResourceEvent({rscType:"ADDERSGALL",name:"gain addersgall if not currently capped",delay:o.maxTimeout,fnOnRsc:t})};t(this.resources.get("ADDERSGALL"))}jobSpecificAddHealingBuffCovers(t,n){this.hasResourceAvailable("AUTOPHYSIS")&&t.addBuff(k.Autophysis),this.hasResourceAvailable("KRASIS")&&t.addBuff(k.Krasis),n.cdName==="cd_GCD"&&(this.hasResourceAvailable("ZOE")&&t.addBuff(k.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.addBuff(k.Philosophia))}consumeAddersgall(){const t=wt("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",t.maxValue)&&this.resources.get("ADDERSGALL").overrideTimer(this,t.maxTimeout),this.tryConsumeResource("ADDERSGALL"),this.resources.get("MANA").gain(700)}addPepsisPotency(t,n){const o=new Zt({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:Ie.Other,basePotency:t==="EUKRASIAN_DIAGNOSIS"?450:350,description:ze(t),targetCount:t==="EUKRASIAN_DIAGNOSIS"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&o.modifiers.push(q.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&o.modifiers.push(q.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="EUKRASIAN_PROGNOSIS"){const l=new Zt({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:Ie.Other,basePotency:o.base,description:ze(t),targetCount:o.targetCount-1,snapshotTime:this.getDisplayTime()});n.addHoTPotency(l,"PEPSIS"),o.targetCount=1,o.description+=", "+ze("KRASIS")}o.modifiers.push(q.Krasis)}n.addHoTPotency(o,"PEPSIS")}addHaimaExpirationPotency(t,n){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const o=new Zt({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t==="HAIMA"?"HAIMA":"PANHAIMA",aspect:Ie.Other,basePotency:t==="HAIMA"?150:100,description:"",targetCount:t==="HAIMA"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&o.modifiers.push(q.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&o.modifiers.push(q.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="PANHAIMA"){const l=new Zt({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PANHAIMA",aspect:Ie.Other,basePotency:100,description:"",targetCount:this.partySize-1,snapshotTime:this.getDisplayTime()});n.addHoTPotency(l,t),o.targetCount=1}o.modifiers.push(q.Krasis)}n.addHoTPotency(o,t)}handleHaimaExpiration(t,n){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const o=t==="HAIMA"?"HAIMATINON":"PANHAIMATINON",l=this.resources.get(o).availableAmount();l<=0||this.addEvent(new Ne(`${xe[t].name} expiration heal`,.001,()=>{n.getHotPotencies(t).forEach(r=>{r.description=ze(t)+" "+g({en:"expiration"})+" ("+l+" "+g({en:"stacks"})+")",t==="PANHAIMA"&&r.modifiers.includes(q.Krasis)&&(r.description+=", "+ze("KRASIS")),r.base*=l,p.resolveHealingPotency(r)})}))}addHealingMagicPotencyModifiers(t){this.hasResourceAvailable("ZOE")&&t.push(q.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.push(q.Philosophia)}addHealingActionPotencyModifiers(t){this.hasResourceAvailable("AUTOPHYSIS")&&t.push(q.Autophysis),this.hasResourceAvailable("KRASIS")&&t.push(q.Krasis)}}const ia=(e,t,n)=>{const o=E=>E.config.adjustedCastTime(1.5),l=E=>E.config.adjustedGCD(2.5),r=E=>{if(!n.healingPotency)return[];const h=[];return E.addHealingMagicPotencyModifiers(h),E.addHealingActionPotencyModifiers(h),h},d=Me(E=>{n.castTime!==0&&E.tryConsumeResource("SWIFTCAST")},(E,h)=>{if(!(E.hasResourceAvailable("KARDIA")&&h.getInitialPotency()))return;const A=new Zt({config:E.config,sourceTime:E.getDisplayTime(),sourceSkill:e,aspect:Ie.Other,basePotency:E.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?170:130,description:ze("KARDIA"),targetCount:1,snapshotTime:E.getDisplayTime()});E.hasResourceAvailable("TINCTURE")&&A.modifiers.push(q.Tincture),E.hasResourceAvailable("SOTERIA")&&A.modifiers.push(q.Soteria),E.addHealingActionPotencyModifiers(A.modifiers),h.addHoTPotency(A,"KARDION")},(E,h)=>{if(!E.hasResourceAvailable("EUDAIMONIA"))return;const A=new Zt({config:E.config,sourceTime:E.getDisplayTime(),sourceSkill:e,aspect:Ie.Other,basePotency:150,description:ze("EUDAIMONIA"),targetCount:E.partySize,snapshotTime:E.getDisplayTime()});E.hasResourceAvailable("TINCTURE")&&A.modifiers.push(q.Tincture),E.addHealingActionPotencyModifiers(A.modifiers),h.addHoTPotency(A,"EUDAIMONIA")},E=>{n.healingPotency&&E.tryConsumeResource("ZOE")},n.onConfirm);return Bn("SGE",e,t,{...n,castTime:n.castTime??o,recastTime:n.recastTime??l,isInstantFn:E=>E.hasResourceAvailable("SWIFTCAST"),jobHealingPotencyModifiers:r,onConfirm:d,onApplication:Me((E,h)=>{const A=h.getHotPotencies("KARDION"),R=h.getHotPotencies("EUDAIMONIA");A.length>0&&(p.resolveHealingPotency(A[0]),E.tryConsumeResource("SOTERIA")),R.forEach(T=>{p.resolveHealingPotency(T)})},n.onApplication)})},Ca=(e,t,n,o)=>et("SGE",e,t,n,{...o,jobHealingPotencyModifiers:r=>{if(!o.healingPotency)return[];const d=[];return r.addHealingActionPotencyModifiers(d),d}}),_T=(e,t,n,o)=>we("SGE",e,t,n,o);ia("EUKRASIA",30,{castTime:0,recastTime:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.gainStatus("EUKRASIA")});ia("DOSIS",1,{replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"DOSIS_II"},manaCost:300,potency:300,applicationDelay:.67});ia("DOSIS_II",72,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_II"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DOSIS_III"},manaCost:400,potency:320,applicationDelay:.67});const gT=[["NEVER",330],["MAGICK_MASTERY_HEALER",380]];ia("DOSIS_III",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_III"}],manaCost:400,potency:gT,applicationDelay:.67});ia("EUKRASIAN_DOSIS",30,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS",skillName:"EUKRASIAN_DOSIS",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS",t)}});ia("EUKRASIAN_DOSIS_II",72,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_II",skillName:"EUKRASIAN_DOSIS_II",tickPotency:60,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_II",t)}});ia("EUKRASIAN_DOSIS_III",82,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_III",skillName:"EUKRASIAN_DOSIS_III",tickPotency:85,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_III",t)}});ia("TOXIKON",66,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"TOXIKON_II"},potency:[["NEVER",240],["OFFENSIVE_MAGIC_MASTERY",300]],falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});ia("TOXIKON_II",82,{startOnHotbar:!1,potency:gT,falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});ia("PHLEGMA",26,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"PHLEGMA_II"},potency:400,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});ia("PHLEGMA_II",72,{startOnHotbar:!1,autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"PHLEGMA_III"},potency:490,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});ia("PHLEGMA_III",82,{startOnHotbar:!1,potency:600,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});Ca("PSYCHE",92,"cd_PSYCHE",{potency:600,falloff:.5,applicationDelay:2.1,cooldown:60});ia("DYSKRASIA",46,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DYSKRASIA_II"},potency:160,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});ia("DYSKRASIA_II",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DYSKRASIA"}],potency:170,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});ia("EUKRASIAN_DYSKRASIA",82,{startOnHotbar:!1,falloff:0,applicationDelay:1.03,castTime:0,recastTime:1.5,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DYSKRASIA",skillName:"EUKRASIAN_DYSKRASIA",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DYSKRASIA",t)}});ia("DIAGNOSIS",2,{healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DIAGNOSIS"}],manaCost:400});ia("EUKRASIAN_DIAGNOSIS",30,{startOnHotbar:!1,healingPotency:300,applicationDelay:.67,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_DIAGNOSIS")});Ca("EUKRASIAN_DIAGNOSIS_POP",30,"cd_DIAGNOSIS_POP",{animationLock:un,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_DIAGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")});ia("PROGNOSIS",10,{healingPotency:300,aoeHeal:!0,applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA")&&e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS_II"},{condition:e=>e.hasResourceAvailable("EUKRASIA")&&!e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS"}],manaCost:700,castTime:e=>e.config.adjustedCastTime(2)});ia("EUKRASIAN_PROGNOSIS",30,{startOnHotbar:!1,autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II"},healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});ia("EUKRASIAN_PROGNOSIS_II",96,{startOnHotbar:!1,healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});Ca("EUKRASIAN_PROGNOSIS_POP",30,"cd_PROGNOSIS_POP",{autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II_POP"},animationLock:un,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});Ca("EUKRASIAN_PROGNOSIS_II_POP",30,"cd_PROGNOSIS_POP",{startOnHotbar:!1,animationLock:un,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});ia("PNEUMA",90,{potency:gT,falloff:.4,healingPotency:600,aoeHeal:!0,applicationDelay:.58,manaCost:700,secondaryCooldown:{cdName:"cd_PNEUMA",maxCharges:1,cooldown:120}});_T("ZOE",56,"cd_ZOE",{rscType:"ZOE",applicationDelay:0,cooldown:90});Ca("PEPSIS",58,"cd_PEPSIS",{cooldown:30,applicationDelay:1.16,onConfirm:(e,t)=>{e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_DIAGNOSIS",t),e.tryConsumeResource("EUKRASIAN_DIAGNOSIS")),e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_PROGNOSIS",t),e.tryConsumeResource("EUKRASIAN_PROGNOSIS"))},onApplication:(e,t)=>{t.getHotPotencies("PEPSIS").forEach(n=>{p.resolveHealingPotency(n)})}});_T("SOTERIA",35,"cd_SOTERIA",{rscType:"SOTERIA",applicationDelay:.8,cooldown:60});_T("KRASIS",86,"cd_KRASIS",{rscType:"KRASIS",applicationDelay:.76,cooldown:60});Ca("HAIMA",70,"cd_HAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("HAIMA"),newSkill:"HAIMA_POP"}],applicationDelay:.76,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("HAIMA",t),onApplication:(e,t)=>{const n=wt("SGE","HAIMATINON").maxValue;e.gainStatus("HAIMA"),e.gainStatus("HAIMATINON",n),e.addEvent(new Ne("Haima Expiration heal Check",wt("SGE","HAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("HAIMA",t)))}});Ca("HAIMA_POP",70,"cd_HAIMA_POP",{startOnHotbar:!1,animationLock:un,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("HAIMA"),highlightIf:e=>e.hasResourceAvailable("HAIMA"),onConfirm:e=>{e.hasResourceAvailable("HAIMATINON")?e.tryConsumeResource("HAIMATINON"):e.tryConsumeResource("HAIMA")}});Ca("PHYSIS_II",60,"cd_PHYSIS",{aoeHeal:!0,applicationDelay:.85,cooldown:60,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"PHYSIS_II",effectName:"PHYSIS_II",speedStat:"sps",tickPotency:130})},onApplication:(e,t)=>{e.applyHoT("PHYSIS_II",t),e.gainStatus("AUTOPHYSIS")}});Ca("PHILOSOPHIA",100,"cd_PHILOSOPHIA",{applicationDelay:1.83,cooldown:180,onApplication:e=>{e.gainStatus("PHILOSOPHIA"),e.gainStatus("EUDAIMONIA")}});Ca("HOLOS",76,"cd_HOLOS",{applicationDelay:.62,cooldown:120,onApplication:e=>{e.gainStatus("HOLOS"),e.gainStatus("HOLOSAKOS")}});Ca("PANHAIMA",80,"cd_PANHAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("PANHAIMA"),newSkill:"PANHAIMA_POP"}],applicationDelay:.62,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("PANHAIMA",t),onApplication:(e,t)=>{const n=wt("SGE","PANHAIMATINON").maxValue;e.gainStatus("PANHAIMA"),e.gainStatus("PANHAIMATINON",n),e.addEvent(new Ne("Panhaima Expiration heal Check",wt("SGE","PANHAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("PANHAIMA",t)))}});Ca("PANHAIMA_POP",80,"cd_PANHAIMA_POP",{startOnHotbar:!1,animationLock:un,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PANHAIMA"),highlightIf:e=>e.hasResourceAvailable("PANHAIMA"),onConfirm:e=>{e.hasResourceAvailable("PANHAIMATINON")?e.tryConsumeResource("PANHAIMATINON"):e.tryConsumeResource("PANHAIMA")}});Ca("RHIZOMATA",74,"cd_RHIZOMATA",{cooldown:90,onConfirm:e=>e.resources.get("ADDERSGALL").gain(1)});Ca("DRUOCHOLE",45,"cd_DRUOCHOLE",{cooldown:1,healingPotency:600,applicationDelay:.78,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});Ca("IXOCHOLE",52,"cd_IXOCHOLE",{cooldown:30,healingPotency:400,aoeHeal:!0,applicationDelay:.756,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});Ca("TAUROCHOLE",62,"cd_TAUROCHOLE",{cooldown:45,applicationDelay:.67,onConfirm:e=>e.consumeAddersgall(),onApplication:e=>e.gainStatus("TAUROCHOLE")});Ca("KERACHOLE",50,"cd_KERACHOLE",{cooldown:30,aoeHeal:!0,applicationDelay:.81,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:(e,t)=>{e.consumeAddersgall(),e.addHoTPotencies({node:t,skillName:"KERACHOLE",effectName:"KERAKEIA",speedStat:"sps",tickPotency:100})},onApplication:(e,t)=>{e.gainStatus("KERACHOLE"),e.hasTraitUnlocked("ENHANCED_KERACHOLE")&&e.applyHoT("KERAKEIA",t)}});ia("EGEIRO",12,{applicationDelay:.58,manaCost:2400,castTime:8});Ca("KARDIA",4,"cd_KARDIA",{applicationDelay:.62,cooldown:5,onApplication:e=>{e.gainStatus("KARDIA"),e.gainStatus("KARDION")}});Ca("ICARUS",40,"cd_ICARUS",{cooldown:45,animationLock:jt});Object.keys(UR).forEach(e=>Gt(e,`WAR/${xe[e].name}.png`));class yG extends Yt{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(UR).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("BEAST_GAUGE").availableAmount(),l=n.get("STORM_COMBO"),r=n.get("TEMPEST_COMBO"),d=l.available(1)?l.pendingChange?.timeTillEvent:r.available(1)?r.pendingChange?.timeTillEvent:void 0;return[{kind:"text",name:g({en:"Combo Timer",zh:""}),text:d?.toFixed(3)??"N/A"},{kind:"bar",name:g({en:"Beast Gauge",zh:""}),color:t.war.beastGauge,progress:o/100,valueString:o.toFixed(0)}]}}const Ut=(e,t,n)=>{je("WAR",e,t,n??{})};Ut("BEAST_GAUGE",100,{warnOnOvercap:!0});const pT=.74,JO=1.16;Ut("SURGING_TEMPEST",1,{timeout:60});Ut("NASCENT_CHAOS",1,{timeout:30});Ut("INNER_RELEASE",3,{timeout:15+pT});Ut("INNER_STRENGTH",1,{timeout:15+pT});Ut("BURGEONING_FURY",3,{timeout:30});Ut("WRATHFUL",1,{timeout:30});Ut("PRIMAL_REND_READY",1,{timeout:30+pT,warnOnTimeout:!0});Ut("PRIMAL_RUINATION_READY",1,{timeout:20+JO,warnOnTimeout:!0});Ut("THRILL_OF_BATTLE",1,{timeout:10});Ut("EQUILIBRIUM",1,{timeout:15});Ut("RAW_INTUITION",1,{timeout:6});Ut("BLOODWHETTING",1,{timeout:8});Ut("STEM_THE_FLOW",1,{timeout:4});Ut("STEM_THE_TIDE",1,{timeout:20});Ut("NASCENT_FLASH",1,{timeout:8});Ut("VENGEANCE",1,{timeout:15});Ut("DAMNATION",1,{timeout:15});Ut("PRIMEVAL_IMPULSE",1,{timeout:15});Ut("SHAKE_IT_OFF",1,{timeout:30});Ut("SHAKE_IT_OFF_OVER_TIME",1,{timeout:15});Ut("HOLMGANG",1,{timeout:10});Ut("DEFIANCE",1);Ut("STORM_COMBO",2,{timeout:30});Ut("TEMPEST_COMBO",1,{timeout:30});const vG=["HEAVY_SWING","MAIM","STORMS_EYE","STORMS_PATH"],$O=["OVERPOWER","MYTHRIL_TEMPEST"],MG=[...vG,...$O],$p=["FELL_CLEAVE","DECIMATE"],LG=["THRILL_OF_BATTLE","DAMNATION","BLOODWHETTING","VENGEANCE","RAW_INTUITION"];class HG extends Kt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_ONSLAUGHT")&&this.cooldowns.set(new Le("cd_ONSLAUGHT",30,3,3)),this.registerRecurringEvents()}get statusPropsGenerator(){return new yG(this)}processComboStatus(t){if(!MG.includes(t))return;const n=$O.includes(t),o=n?"TEMPEST_COMBO":"STORM_COMBO",l=n?"STORM_COMBO":"TEMPEST_COMBO";this.setComboState(l,0);const r=this.resources.get(o).availableAmount();let d=0;n?t==="OVERPOWER"&&(d=1):t==="HEAVY_SWING"?d=1:r===1&&t==="MAIM"&&(d=2),this.setComboState(o,d)}hasComboStatus(t,n){return this.hasResourceExactly(t,n)}gainBeastGauge(t){this.resources.get("BEAST_GAUGE").gain(t)}gainProc(t,n){const o=wt("WAR",t).maxTimeout;this.hasResourceAvailable(t)?(t==="BURGEONING_FURY"&&this.resources.get(t).gain(1),this.resources.get(t).overrideTimer(this,o)):(this.resources.get(t).gain(n??1),o&&this.enqueueResourceDrop(t,o))}gainSurgingTempest(t){const n=this.resources.get("SURGING_TEMPEST"),o=wt("WAR","SURGING_TEMPEST").maxTimeout,l=(n.pendingChange?.timeTillEvent??0)+t;n.overrideTimer(this,l>=o?o:l)}gainSurgingTempestGCD(t,n,o){this.hasResourceAvailable("SURGING_TEMPEST")?this.addEvent(new Ne("surging tempest refresh",n,()=>{this.hasResourceAvailable("SURGING_TEMPEST")?this.gainSurgingTempest(t):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t))})):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t+o))}}const jn=(e,t,n)=>{const o=Me(n.onConfirm,r=>r.processComboStatus(e),r=>{$p.includes(e)&&r.tryConsumeResource("INNER_RELEASE")&&r.hasTraitUnlocked("ENHANCED_INNER_RELEASE")&&(r.gainProc("BURGEONING_FURY"),r.hasResourceAvailable("BURGEONING_FURY",3)&&(r.gainProc("WRATHFUL"),r.tryConsumeResource("BURGEONING_FURY",!0)))}),l=n.jobPotencyModifiers??(r=>[]);return $t("WAR",e,t,{...n,onConfirm:o,recastTime:r=>r.config.adjustedSksGCD(),jobPotencyModifiers:r=>{const d=l(r);return r.hasResourceAvailable("SURGING_TEMPEST")&&d.push(q.SurgingTempest),r.hasResourceAvailable("INNER_RELEASE")&&$p.includes(e)&&d.push(q.AutoCDH),d}})},jr=(e,t,n,o)=>et("WAR",e,t,n,{...o,jobPotencyModifiers:l=>{const r=[];return l.hasResourceAvailable("SURGING_TEMPEST")&&r.push(q.SurgingTempest),r}});jn("TOMAHAWK",15,{potency:150,applicationDelay:.71});jn("HEAVY_SWING",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",240]],applicationDelay:.53});jn("MAIM",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",150],["MELEE_MASTERY_II_TANK",190]],combo:{potency:[["NEVER",250],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",340]],resource:"STORM_COMBO",resourceValue:1},applicationDelay:.62,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",1)&&e.gainBeastGauge(10)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",1)});jn("STORMS_PATH",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.52,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&e.gainBeastGauge(20)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});jn("STORMS_EYE",50,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.65,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&(e.gainBeastGauge(10),e.gainSurgingTempestGCD(30,1.65,1.7))},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});jn("OVERPOWER",10,{potency:110,falloff:0,applicationDelay:.62});jn("MYTHRIL_TEMPEST",40,{potency:100,combo:{potency:140,resource:"TEMPEST_COMBO",resourceValue:1},falloff:0,applicationDelay:.49,onConfirm:e=>{e.hasComboStatus("TEMPEST_COMBO",1)&&(e.gainBeastGauge(20),e.gainSurgingTempestGCD(30,.49,.45))},highlightIf:e=>e.hasComboStatus("TEMPEST_COMBO",1)});function NE(e){e.cooldowns.get("cd_INFURIATE").restore(5)}jn("FELL_CLEAVE",54,{potency:[["NEVER",520],["MELEE_MASTERY_II_TANK",580]],applicationDelay:.62,validateAttempt:e=>e.resources.get("BEAST_GAUGE").available(50)||e.resources.get("INNER_RELEASE").available(1),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),NE(e)},replaceIf:[{newSkill:"INNER_CHAOS",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}],highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE")});jn("DECIMATE",60,{potency:180,falloff:0,applicationDelay:1.83,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),NE(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),replaceIf:[{newSkill:"CHAOTIC_CYCLONE",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}]});jr("INNER_RELEASE",70,"cd_INNER_RELEASE",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.gainProc("INNER_RELEASE",3),e.gainProc("INNER_STRENGTH"),e.hasResourceAvailable("SURGING_TEMPEST")&&e.gainSurgingTempest(10),e.config.level>=Ze.lvl90&&e.gainProc("PRIMAL_REND_READY")},replaceIf:[{newSkill:"PRIMAL_WRATH",condition:e=>e.hasResourceAvailable("WRATHFUL")}]});jn("PRIMAL_REND",90,{potency:700,applicationDelay:JO,falloff:.5,animationLock:1.2,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_REND_READY"),e.hasTraitUnlocked("ENHANCED_PRIMAL_REND")&&e.gainProc("PRIMAL_RUINATION_READY")},highlightIf:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),replaceIf:[{newSkill:"PRIMAL_RUINATION",condition:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY")}],jobPotencyModifiers:e=>[q.AutoCDH]});jr("PRIMAL_WRATH",96,"cd_PRIMAL_WRATH",{startOnHotbar:!1,potency:700,falloff:.5,applicationDelay:1.15,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("WRATHFUL"),onConfirm:e=>e.tryConsumeResource("WRATHFUL"),highlightIf:e=>!0});jn("PRIMAL_RUINATION",100,{startOnHotbar:!1,potency:780,falloff:.5,applicationDelay:1.06,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_RUINATION_READY")},highlightIf:e=>!0,jobPotencyModifiers:e=>[q.AutoCDH]});jr("INFURIATE",50,"cd_INFURIATE",{applicationDelay:0,requiresCombat:!0,cooldown:60,maxCharges:2,onApplication:e=>{e.gainBeastGauge(50),e.hasTraitUnlocked("NASCENT_CHAOS")&&e.gainProc("NASCENT_CHAOS")}});jn("INNER_CHAOS",80,{startOnHotbar:!1,potency:660,applicationDelay:.94,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),NE(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[q.AutoCDH]});jn("CHAOTIC_CYCLONE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),NE(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[q.AutoCDH]});jr("ONSLAUGHT",62,"cd_ONSLAUGHT",{potency:150,applicationDelay:.63,cooldown:30,maxCharges:2,animationLock:jt});jr("UPHEAVAL",64,"cd_UPHEAVAL",{potency:420,applicationDelay:.62,cooldown:30});jr("OROGENY",86,"cd_UPHEAVAL",{potency:150,falloff:0,applicationDelay:.62,cooldown:30});we("WAR","VENGEANCE",38,"cd_VENGEANCE",{rscType:"VENGEANCE",autoUpgrade:{trait:"VENGEANCE_MASTERY",otherSkill:"DAMNATION"},cooldown:120,applicationDelay:.62});we("WAR","DAMNATION",92,"cd_VENGEANCE",{rscType:"DAMNATION",autoDowngrade:{trait:"VENGEANCE_MASTERY",otherSkill:"VENGEANCE"},cooldown:120,applicationDelay:.62});we("WAR","RAW_INTUITION",56,"cd_RAW_INTUITION",{rscType:"RAW_INTUITION",autoUpgrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"BLOODWHETTING"},cooldown:25,applicationDelay:.45});we("WAR","BLOODWHETTING",82,"cd_RAW_INTUITION",{rscType:"BLOODWHETTING",autoDowngrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"RAW_INTUITION"},onApplication:e=>{e.gainProc("STEM_THE_FLOW"),e.gainProc("STEM_THE_TIDE")},cooldown:25,applicationDelay:.45});et("WAR","NASCENT_FLASH",76,"cd_RAW_INTUITION",{onApplication:e=>{let t=6;e.hasTraitUnlocked("ENHANCED_NASCENT_FLASH")&&(t=8),e.resources.get("NASCENT_FLASH").gain(1),e.enqueueResourceDrop("NASCENT_FLASH",t)},cooldown:25,applicationDelay:.45});we("WAR","HOLMGANG",45,"cd_HOLMGANG",{rscType:"HOLMGANG",cooldown:240,applicationDelay:.45});we("WAR","THRILL_OF_BATTLE",30,"cd_THRILL_OF_BATTLE",{rscType:"THRILL_OF_BATTLE",cooldown:90,applicationDelay:.62});et("WAR","EQUILIBRIUM",58,"cd_EQUILIBRIUM",{cooldown:60,applicationDelay:.62,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EQUILIBRIUM")&&e.gainProc("EQUILIBRIUM")}});we("WAR","SHAKE_IT_OFF",68,"cd_SHAKE_IT_OFF",{rscType:"SHAKE_IT_OFF",cooldown:90,onApplication:(e,t)=>{let n=0;LG.forEach(o=>{e.tryConsumeResource(o)&&(n+=1)}),console.debug(`Shake It Off dispelled ${n} buffs`),e.gainProc("SHAKE_IT_OFF_OVER_TIME")},applicationDelay:0});et("WAR","DEFIANCE",10,"cd_DEFIANCE",{cooldown:2,maxCharges:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.resources.get("DEFIANCE").gain(1),replaceIf:[{newSkill:"RELEASE_DEFIANCE",condition:e=>e.hasResourceAvailable("DEFIANCE")}],secondaryCooldown:{cdName:"cd_RELEASE_DEFIANCE",cooldown:1,maxCharges:1}});et("WAR","RELEASE_DEFIANCE",10,"cd_RELEASE_DEFIANCE",{startOnHotbar:!1,cooldown:1,maxCharges:1,secondaryCooldown:{cdName:"cd_DEFIANCE",cooldown:2,maxCharges:1},applicationDelay:0,validateAttempt:e=>e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.tryConsumeResource("DEFIANCE")});const eb=["CIRCLE_OF_SCORN_DOT"],UG=Object.keys(OR).filter(e=>!eb.includes(e));Object.keys(OR).forEach(e=>Gt(e,`PLD/${xe[e].name}.png`));class kG extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[...eb.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return UG.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("PLD_COMBO_TRACKER"),l=n.get("PLD_AOE_COMBO_TRACKER"),r=n.get("OATH_GAUGE").availableAmount(),d=n.get("IRON_WILL").availableAmount(),E=o.available(1)?o.pendingChange?.timeTillEvent:l.available(1)?l.pendingChange?.timeTillEvent:void 0,h=this.state.findAutoAttackTimerInQueue();let A="";return this.state.hasResourceAvailable("STORED_AUTO")?A="stored":A=h!==-1?h.toFixed(3):"N/A",[{kind:"bar",name:g({en:"Auto Tracker"}),color:t.pld.ironWillColor,progress:h!==-1?(3-h)/3:0,valueString:A},{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.pld.pldComboTimer,progress:E?E/30:0,valueString:E?.toFixed(3)??"N/A"},{kind:"counter",name:g({en:"Iron Will",zh:""}),color:t.pld.ironWillColor,currentStacks:d,maxStacks:1},{kind:"bar",name:g({en:"Oath Gauge",zh:""}),color:t.pld.oathGaugeColor,progress:r/100,valueString:r.toFixed(0)}]}}const St=(e,t,n)=>{je("PLD",e,t,n??{})};St("FIGHT_OR_FLIGHT",1,{timeout:20});St("IRON_WILL",1);St("OATH_GAUGE",100);St("SHELTRON",1,{timeout:6});St("SENTINEL",1,{timeout:15});St("CIRCLE_OF_SCORN_DOT",1,{timeout:15});St("HALLOWED_GROUND",1,{timeout:10});St("BULWARK",1,{timeout:10});St("GORING_BLADE_READY",1,{timeout:30});St("DIVINE_VEIL",1,{timeout:30});St("ATONEMENT_READY",1,{timeout:30,warnOnTimeout:!0});St("DIVINE_MIGHT",1,{timeout:30,warnOnTimeout:!0});St("KNIGHTS_RESOLVE",1,{timeout:4});St("KNIGHTS_BENEDICTION",1,{timeout:12});St("REQUIESCAT",4,{timeout:30,warnOnTimeout:!0});St("CONFITEOR_READY",1,{timeout:30,warnOnTimeout:!0});St("PASSAGE_OF_ARMS",1,{timeout:18});St("SUPPLICATION_READY",1,{timeout:30,warnOnTimeout:!0});St("SEPULCHRE_READY",1,{timeout:30,warnOnTimeout:!0});St("HOLY_SHELTRON",1,{timeout:8});St("BLADE_OF_HONOR_READY",1,{timeout:30,warnOnTimeout:!0});St("GUARDIAN",1,{timeout:15});St("GUARDIANS_WILL",1,{timeout:15});St("PLD_COMBO_TRACKER",2,{timeout:30});St("PLD_CONFITEOR_COMBO_TRACKER",3,{timeout:30});St("PLD_AOE_COMBO_TRACKER",1,{timeout:30});St("INTERVENTION",1,{timeout:8});St("ARMS_UP",1);St("COVER",1,{timeout:12});const gm=new Map([["TOTAL_ECLIPSE",0],["PROMINENCE",1]]),pm=new Map([["FAST_BLADE",0],["RIOT_BLADE",1],["ROYAL_AUTHORITY",2]]),tb=new Map([["CONFITEOR",0],["BLADE_OF_FAITH",1],["BLADE_OF_TRUTH",2],["BLADE_OF_VALOR",3]]),dh=["HOLY_SPIRIT","HOLY_CIRCLE"];class xG extends Kt{constructor(t){super(t),this.resources.get("OATH_GAUGE").gain(100),this.registerRecurringEvents([{groupedEffects:[{effectName:"CIRCLE_OF_SCORN_DOT",appliedBy:["CIRCLE_OF_SCORN"]}]}])}get statusPropsGenerator(){return new kG(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("FIGHT_OR_FLIGHT")&&t.addBuff(k.FightOrFlight);const o=n.name;this.hasResourceAvailable("DIVINE_MIGHT")&&(o==="HOLY_SPIRIT"||o==="HOLY_CIRCLE")?t.addBuff(k.DivineMight):this.hasResourceAvailable("REQUIESCAT")&&(o==="HOLY_SPIRIT"||o==="HOLY_CIRCLE"||o==="CONFITEOR"||o==="BLADE_OF_FAITH"||o==="BLADE_OF_TRUTH"||o==="BLADE_OF_VALOR")&&t.addBuff(k.Requiescat)}cancelChanneledSkills(){this.tryConsumeResource("PASSAGE_OF_ARMS")}jobSpecificOnAutoAttack(){p.reportAutoTick(this.time,"auto"),this.resources.get("OATH_GAUGE").gain(5)}isSpellInstant(t){return t!=="CLEMENCY"?this.hasResourceAvailable("DIVINE_MIGHT")||this.hasResourceAvailable("REQUIESCAT"):this.hasResourceAvailable("REQUIESCAT")}captureSpellCastTime(t,n){return this.isSpellInstant(t)?0:this.config.adjustedCastTime(n)}tryConsumeRequiescat(t){(dh.includes(t)||tb.has(t)||t==="CLEMENCY")&&this.tryConsumeResource("REQUIESCAT")}isHolySpiritCircleGoodForReq(){const t=this.resources.get("REQUIESCAT").availableAmount();return t===0||this.hasResourceAvailable("PLD_CONFITEOR_COMBO_TRACKER")||this.config.level>=90?!1:this.config.level>=80?!this.hasResourceAvailable("CONFITEOR_READY")||this.hasResourceAvailable("CONFITEOR_READY")&&t>1:!0}progressComboTracker(t,n,o){const l=this.resources.get(n).maxValue,r=o.get(t)??-1,d=this.resources.get(n).availableAmount();this.tryConsumeResource(n,!0),(r!==l&&r===d||r===0)&&(this.resources.get(n).gain(r+1),this.enqueueResourceDrop(n))}fixPLDPhysicalComboState(t){gm.has(t)?(this.tryConsumeResource("PLD_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_AOE_COMBO_TRACKER",gm)):pm.has(t)&&(this.tryConsumeResource("PLD_AOE_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_COMBO_TRACKER",pm)),(gm.has(t)||pm.has(t)||t==="SHIELD_BASH")&&this.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0)}getDelayedManaFromAction(t,n){this.addEvent(new Ne("get MP from "+n,this.skillsList.get(n).applicationDelay,()=>{this.resources.get("MANA").gain(t)}))}refreshBuff(t,n){this.addEvent(new Ne("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const Ci=(e,t,n)=>{const o=Me(n.onConfirm,l=>{e!=="SHIELD_LOB"&&e!=="SHIELD_BASH"&&e!=="GORING_BLADE"&&l.fixPLDPhysicalComboState(e)});return $t("PLD",e,t,{...n,onConfirm:o,recastTime:l=>l.config.adjustedSksGCD(),jobPotencyModifiers:l=>l.hasResourceAvailable("FIGHT_OR_FLIGHT")?[q.FightOrFlight]:[]})},us=(e,t,n)=>{const o=Me((l,r)=>{l.hasResourceAvailable("DIVINE_MIGHT")&&dh.includes(e)?l.tryConsumeResource("DIVINE_MIGHT"):l.tryConsumeRequiescat(e)},n.onConfirm);return Bn("PLD",e,t,{...n,castTime:l=>l.captureSpellCastTime(e,n.baseCastTime),recastTime:l=>l.config.adjustedGCD(),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:l=>{const r=[];return dh.includes(e)&&l.hasResourceAvailable("DIVINE_MIGHT")?n.dmPotency&&r.push(uH(Jt(l,n.dmPotency)-Jt(l,n.basePotency))):(dh.includes(e)||tb.has(e))&&l.hasResourceAvailable("REQUIESCAT")&&n.reqPotency&&r.push(cH(Jt(l,n.reqPotency)-Jt(l,n.basePotency))),e!=="CLEMENCY"&&l.hasResourceAvailable("FIGHT_OR_FLIGHT")&&r.push(q.FightOrFlight),n.jobPotencyModifiers&&r.push(...n.jobPotencyModifiers(l)),r},isInstantFn:l=>l.isSpellInstant(e),onConfirm:o})},wa=(e,t,n,o)=>et("PLD",e,t,n,{...o,jobPotencyModifiers:l=>{const r=[];return l.hasResourceAvailable("FIGHT_OR_FLIGHT")&&r.push(q.FightOrFlight),r}}),ab=(e,t,n,o)=>we("PLD",e,t,n,{...o,rscType:o.rscType,cooldown:o.cooldown,applicationDelay:o.applicationDelay}),nb={newSkill:"ATONEMENT",condition:e=>e.hasResourceAvailable("ATONEMENT_READY")},ib={newSkill:"SUPPLICATION",condition:e=>e.hasResourceAvailable("SUPPLICATION_READY")},ob={newSkill:"SEPULCHRE",condition:e=>e.hasResourceAvailable("SEPULCHRE_READY")},NT={newSkill:"CONFITEOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===0},su={newSkill:"BLADE_OF_FAITH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===1},ru={newSkill:"BLADE_OF_TRUTH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===2},cu={newSkill:"BLADE_OF_VALOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===3},iR={newSkill:"BLADE_OF_HONOR",condition:e=>e.hasResourceAvailable("BLADE_OF_HONOR_READY")},PG={newSkill:"IMPERATOR",condition:e=>!e.hasResourceAvailable("BLADE_OF_HONOR_READY")},wG={newSkill:"IRON_WILL",condition:e=>!e.hasResourceAvailable("IRON_WILL")},GG={newSkill:"RELEASE_IRON_WILL",condition:e=>e.hasResourceAvailable("IRON_WILL")};Ci("SHIELD_LOB",15,{potency:100,applicationDelay:.89,startsAuto:!1});Ci("FAST_BLADE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",220]],applicationDelay:.62});Ci("RIOT_BLADE",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",170]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",330]],resource:"PLD_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1,applicationDelay:.76,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1&&e.getDelayedManaFromAction(1e3,"RIOT_BLADE")}});Ci("ROYAL_AUTHORITY",60,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",200]],combo:{potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],resource:"PLD_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2,applicationDelay:.62,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2&&(e.refreshBuff("DIVINE_MIGHT",0),e.hasTraitUnlocked("SWORD_OATH")&&(e.refreshBuff("ATONEMENT_READY",0),e.tryConsumeResource("SUPPLICATION_READY"),e.tryConsumeResource("SEPULCHRE_READY")))}});Ci("ATONEMENT",76,{replaceIf:[ib,ob],potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("ATONEMENT_READY"),highlightIf:e=>e.hasResourceAvailable("ATONEMENT_READY"),onConfirm:e=>{e.tryConsumeResource("ATONEMENT_READY"),e.refreshBuff("SUPPLICATION_READY",0),e.getDelayedManaFromAction(400,"ATONEMENT")}});Ci("SUPPLICATION",76,{startOnHotbar:!1,replaceIf:[nb,ob],potency:[["NEVER",380],["MELEE_MASTERY_TANK",420],["MELEE_MASTERY_II_TANK",500]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("SUPPLICATION_READY"),highlightIf:e=>e.hasResourceAvailable("SUPPLICATION_READY"),onConfirm:e=>{e.tryConsumeResource("SUPPLICATION_READY"),e.refreshBuff("SEPULCHRE_READY",0),e.getDelayedManaFromAction(400,"SUPPLICATION")}});Ci("SEPULCHRE",76,{startOnHotbar:!1,replaceIf:[nb,ib],potency:[["NEVER",400],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",540]],applicationDelay:1.29,validateAttempt:e=>e.hasResourceAvailable("SEPULCHRE_READY"),highlightIf:e=>e.hasResourceAvailable("SEPULCHRE_READY"),onConfirm:e=>{e.tryConsumeResource("SEPULCHRE_READY"),e.getDelayedManaFromAction(400,"SEPULCHRE")}});Ci("TOTAL_ECLIPSE",6,{potency:120,applicationDelay:.76,falloff:0});Ci("PROMINENCE",40,{potency:100,combo:{potency:220,resource:"PLD_AOE_COMBO_TRACKER",resourceValue:1},applicationDelay:.62,falloff:0,highlightIf:e=>e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1,onConfirm:e=>{e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1&&e.hasTraitUnlocked("ENHANCED_PROMINENCE")&&(e.refreshBuff("DIVINE_MIGHT",0),e.getDelayedManaFromAction(500,"PROMINENCE"))}});us("HOLY_SPIRIT",64,{baseCastTime:1.5,applicationDelay:.76,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",300],["MELEE_MASTERY_TANK",350],["MELEE_MASTERY_II_TANK",400]],reqPotency:[["NEVER",600],["MELEE_MASTERY_TANK",650],["MELEE_MASTERY_II_TANK",700]],dmPotency:[["NEVER",400],["MELEE_MASTERY_TANK",450],["MELEE_MASTERY_II_TANK",500]],highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});us("HOLY_CIRCLE",72,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:1e3,basePotency:100,reqPotency:350,dmPotency:250,falloff:0,highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});Ci("GORING_BLADE",54,{applicationDelay:.53,potency:700,validateAttempt:e=>e.hasResourceAvailable("GORING_BLADE_READY"),highlightIf:e=>e.hasResourceAvailable("GORING_BLADE_READY"),onConfirm:e=>{e.tryConsumeResource("GORING_BLADE_READY")}});us("CONFITEOR",80,{replaceIf:[su,ru,cu],baseCastTime:0,applicationDelay:.62,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>e.hasResourceAvailable("CONFITEOR_READY"),highlightIf:e=>e.hasResourceAvailable("CONFITEOR_READY"),onConfirm:e=>{e.tryConsumeResource("CONFITEOR_READY"),e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(1),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});us("BLADE_OF_FAITH",90,{replaceIf:[NT,ru,cu],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,startsAuto:!1,applicationDelay:.62,basePotency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],reqPotency:[["NEVER",720],["MELEE_MASTERY_II_TANK",760]],falloff:.6,validateAttempt:e=>su.condition(e),highlightIf:e=>su.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(2),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});us("BLADE_OF_TRUTH",90,{replaceIf:[NT,su,cu],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",320],["MELEE_MASTERY_II_TANK",380]],reqPotency:[["NEVER",820],["MELEE_MASTERY_II_TANK",880]],falloff:.6,validateAttempt:e=>ru.condition(e),highlightIf:e=>ru.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(3),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});us("BLADE_OF_VALOR",90,{replaceIf:[NT,su,ru],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>cu.condition(e),highlightIf:e=>cu.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.refreshBuff("BLADE_OF_HONOR_READY",0)}});wa("FIGHT_OR_FLIGHT",2,"cd_FIGHT_OR_FLIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("GORING_BLADE_READY",0),e.refreshBuff("FIGHT_OR_FLIGHT",.62)}});wa("REQUIESCAT",68,"cd_REQUIESCAT",{autoUpgrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"IMPERATOR"},applicationDelay:.62,cooldown:60,potency:320,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});wa("IMPERATOR",96,"cd_IMPERATOR",{autoDowngrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"REQUIESCAT"},replaceIf:[iR],applicationDelay:1.29,cooldown:60,potency:580,falloff:.6,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30,4),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});wa("BLADE_OF_HONOR",100,"cd_BLADE_OF_HONOR",{startOnHotbar:!1,cooldown:1,replaceIf:[PG],validateAttempt:iR.condition,highlightIf:iR.condition,applicationDelay:1.16,potency:1e3,startsAuto:!1,falloff:.5,onConfirm:e=>{e.tryConsumeResource("BLADE_OF_HONOR_READY")}});wa("SPIRITS_WITHIN",30,"cd_SPIRITS_WITHIN",{autoUpgrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"EXPIACION"},applicationDelay:.89,cooldown:30,potency:270,onConfirm:e=>{e.getDelayedManaFromAction(500,"SPIRITS_WITHIN")}});wa("EXPIACION",86,"cd_EXPIACION",{autoDowngrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"SPIRITS_WITHIN"},applicationDelay:.36,cooldown:30,potency:450,falloff:.6,onConfirm:e=>{e.getDelayedManaFromAction(500,"EXPIACION")}});wa("CIRCLE_OF_SCORN",50,"cd_CIRCLE_OF_SCORN",{applicationDelay:1.02,cooldown:30,potency:140,falloff:0,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("FIGHT_OR_FLIGHT")&&n.push(q.FightOrFlight),e.addDoTPotencies({node:t,effectName:"CIRCLE_OF_SCORN_DOT",skillName:"CIRCLE_OF_SCORN",tickPotency:30,speedStat:"sks",modifiers:n}),e.addEvent(new Ne("apply CoS dot",1.02,()=>{e.applyDoT("CIRCLE_OF_SCORN_DOT",t)}))}});wa("INTERVENE",66,"cd_INTERVENE",{applicationDelay:.62,cooldown:30,potency:150,maxCharges:2,animationLock:jt});us("CLEMENCY",58,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:2e3,basePotency:0,highlightIf:e=>e.hasResourceAvailable("REQUIESCAT")});wa("SHELTRON",35,"cd_SHELTRON",{autoUpgrade:{trait:"SHELTRON_MASTERY",otherSkill:"HOLY_SHELTRON"},validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,applicationDelay:0,cooldown:5,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50),e.refreshBuff("SHELTRON",0)}});wa("HOLY_SHELTRON",82,"cd_HOLY_SHELTRON",{autoDowngrade:{trait:"SHELTRON_MASTERY",otherSkill:"SHELTRON"},applicationDelay:0,cooldown:5,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.refreshBuff("HOLY_SHELTRON",0),e.refreshBuff("KNIGHTS_RESOLVE",0),e.refreshBuff("KNIGHTS_BENEDICTION",0),e.resources.get("OATH_GAUGE").consume(50)}});wa("INTERVENTION",62,"cd_INTERVENTION",{applicationDelay:.8,cooldown:10,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});ab("HALLOWED_GROUND",50,"cd_HALLOWED_GROUND",{rscType:"HALLOWED_GROUND",applicationDelay:0,cooldown:420});ab("BULWARK",52,"cd_BULWARK",{rscType:"BULWARK",applicationDelay:0,cooldown:90});wa("SENTINEL",38,"cd_SENTINEL",{autoUpgrade:{trait:"SENTINEL_MASTERY",otherSkill:"GUARDIAN"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("SENTINEL",.53)}});wa("GUARDIAN",92,"cd_GUARDIAN",{autoDowngrade:{trait:"SENTINEL_MASTERY",otherSkill:"SENTINEL"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("GUARDIAN",.53),e.refreshBuff("GUARDIANS_WILL",.53)}});wa("DIVINE_VEIL",56,"cd_DIVINE_VEIL",{applicationDelay:0,cooldown:90,onConfirm:e=>{e.refreshBuff("DIVINE_VEIL",0)}});wa("PASSAGE_OF_ARMS",70,"cd_PASSAGE_OF_ARMS",{applicationDelay:.62,cooldown:120,onConfirm:e=>{e.refreshBuff("PASSAGE_OF_ARMS",.62)}});wa("COVER",45,"cd_COVER",{applicationDelay:.62,cooldown:120,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});wa("IRON_WILL",10,"cd_IRON_WILL",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.resources.get("IRON_WILL").gain(1)},replaceIf:[GG],secondaryCooldown:{cdName:"cd_RELEASE_IRON_WILL",cooldown:1,maxCharges:1}});wa("RELEASE_IRON_WILL",10,"cd_RELEASE_IRON_WILL",{startOnHotbar:!1,replaceIf:[wG],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.tryConsumeResource("IRON_WILL")},secondaryCooldown:{cdName:"cd_IRON_WILL",cooldown:2,maxCharges:1}});Ci("SHIELD_BASH",10,{potency:100,applicationDelay:.45});Object.keys(IR).forEach(e=>Gt(e,`DRK/${xe[e].name}.png`));const BG=Object.keys(IR);class FG extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return BG.map(t=>t==="GRIT"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("DRK_COMBO_TRACKER"),l=n.get("DRK_AOE_COMBO_TRACKER"),r=n.get("BLOOD_GAUGE").availableAmount(),d=n.get("GRIT").availableAmount(),E=n.get("DARKSIDE").pendingChange?.timeTillEvent??0,h=n.get("DARK_ARTS").availableAmount(),A=o.available(1)?o.pendingChange?.timeTillEvent:l.available(1)?l.pendingChange?.timeTillEvent:void 0;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.drk.drkComboTimer,progress:A?A/30:0,valueString:A?.toFixed(3)??"N/A"},{kind:"counter",name:ze("GRIT"),color:t.drk.grit,currentStacks:d,maxStacks:1},{kind:"bar",name:ze("DARKSIDE"),color:t.drk.darkside,progress:E?E/60:0,valueString:E.toFixed(3)},{kind:"counter",name:ze("DARK_ARTS"),color:t.drk.darkarts,currentStacks:h,maxStacks:1},{kind:"bar",name:ze("BLOOD_GAUGE"),color:t.drk.blood,progress:r/100,valueString:r.toFixed(0)}]}}const oa=(e,t,n)=>{je("DRK",e,t,n??{})};oa("DARKSIDE",1,{timeout:60});oa("BLOOD_GAUGE",100,{warnOnOvercap:!0});oa("SALTED_EARTH",1,{timeout:15});oa("GRIT",1);oa("SHADOW_WALL",1,{timeout:15});oa("DARK_MIND",1,{timeout:10});oa("LIVING_DEAD",1,{timeout:10});oa("WALKING_DEAD",1,{timeout:10});oa("UNDEAD_REBIRTH",1);oa("DARK_MISSIONARY",1,{timeout:15});oa("DELIRIUM",3,{timeout:15,warnOnTimeout:!0});oa("BLOOD_WEAPON",3,{timeout:15,warnOnTimeout:!0});oa("BLACKEST_NIGHT",1,{timeout:7,warnOnTimeout:!0});oa("SCORN",1,{timeout:30,warnOnTimeout:!0});oa("OBLATION",1,{timeout:10});oa("SHADOWED_VIGIL",1,{timeout:15});oa("VIGILANT",1,{timeout:20});oa("DARK_ARTS",1,{warnOnOvercap:!0});oa("DRK_COMBO_TRACKER",2,{timeout:30});oa("DRK_AOE_COMBO_TRACKER",1,{timeout:30});oa("DRK_DELIRIUM_COMBO_TRACKER",2,{timeout:30});const CT=6;oa("ESTEEM_TRACKER",CT);const zG=6.8,jG=2.18;class YG extends Kt{constructor(t){super(t),this.registerRecurringEvents([{groupedEffects:[{effectName:"SALTED_EARTH",appliedBy:["SALTED_EARTH"],isGroundTargeted:!0}]}],["LIVING_SHADOW"])}get statusPropsGenerator(){return new FG(this)}refreshDarkside(){if(this.hasResourceAvailable("DARKSIDE")){const t=this.resources.get("DARKSIDE"),n=wt("DRK","DARKSIDE").maxTimeout,o=(t.pendingChange?.timeTillEvent??0)+30;t.overrideTimer(this,Math.min(n,o))}else this.resources.get("DARKSIDE").gain(1),this.enqueueResourceDrop("DARKSIDE",30)}gainBloodGauge(t){this.resources.get("BLOOD_GAUGE").gain(t)}bloodWeaponConfirm(t){this.hasResourceAvailable("BLOOD_WEAPON")&&(this.tryConsumeResource("BLOOD_WEAPON"),this.gainBloodGauge(10),this.addEvent(new Ne("gain blood weapon mana",t,()=>{this.resources.get("MANA").gain(600)})))}processComboStatus(t){if(["DISESTEEM","UNMEND","BLOODSPILLER","QUIETUS"].includes(t))return;let n=[this.resources.get("DRK_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_AOE_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_DELIRIUM_COMBO_TRACKER").availableAmount()];t==="HARD_SLASH"?n=[1,0,0]:t==="SYPHON_STRIKE"?n=[n[0]===1?2:0,0,0]:t==="SOULEATER"?n=[0,0,0]:t==="IMPALEMENT"?n[2]=0:t==="SCARLET_DELIRIUM"?n[2]=1:t==="COMEUPPANCE"?n[2]=2:t==="TORCLEAVER"?n[2]=0:t==="UNLEASH"?n=[0,1,0]:t==="STALWART_SOUL"?n=[0,0,0]:n=[0,0,0],this.setComboState("DRK_COMBO_TRACKER",n[0]),this.setComboState("DRK_AOE_COMBO_TRACKER",n[1]),this.setComboState("DRK_DELIRIUM_COMBO_TRACKER",n[2])}handleEsteemAttack(){if(!this.hasResourceAvailable("ESTEEM_TRACKER"))return;const t=this.resources.get("ESTEEM_TRACKER").node;t!==void 0&&this.resolveEsteemPotency(t),this.resources.get("ESTEEM_TRACKER").consume(1),this.hasResourceAvailable("ESTEEM_TRACKER")&&this.addEvent(new Ne("esteem hit",jG,()=>this.handleEsteemAttack()))}resolveEsteemPotency(t){const n=this.resources.get("ESTEEM_TRACKER").availableAmount();if(n===0)return;const o=t.getDotPotencies("ESTEEM_TRACKER")[CT-n];o.modifiers.push(q.DrkPet),this.hasResourceAvailable("TINCTURE")&&o.modifiers.push(q.Tincture),o.snapshotTime=this.getDisplayTime(),p.resolvePotency(o)}}const ml=(e,t,n)=>$t("DRK",e,t,{...n,onConfirm:Me(n.onConfirm,o=>o.bloodWeaponConfirm(n.applicationDelay),o=>o.processComboStatus(e)),recastTime:o=>o.config.adjustedSksGCD(),jobPotencyModifiers:o=>o.hasResourceAvailable("DARKSIDE")?[q.Darkside]:[]}),OT=(e,t,n)=>Bn("DRK",e,t,{...n,onConfirm:Me(n.onConfirm,o=>o.processComboStatus(e)),recastTime:o=>o.config.adjustedGCD(),jobPotencyModifiers:o=>o.hasResourceAvailable("DARKSIDE")?[q.Darkside]:[]}),En=(e,t,n,o)=>et("DRK",e,t,n,{...o,jobPotencyModifiers:l=>l.hasResourceAvailable("DARKSIDE")?[q.Darkside]:[]}),ds=(e,t,n,o)=>we("DRK",e,t,n,o);OT("UNMEND",15,{applicationDelay:.98,potency:150,onConfirm:e=>{if(e.hasTraitUnlocked("ENHANCED_UNMEND")){const t=e.cooldowns.get("cd_SHADOWSTRIDE").timeTillNextStackAvailable();e.cooldowns.get("cd_SHADOWSTRIDE").overrideTimeTillNextStack(Math.max(0,t-5))}}});ml("HARD_SLASH",1,{applicationDelay:.58,potency:[["NEVER",150],["MELEE_MASTERY_TANK",180],["MELEE_MASTERY_II_TANK",300]]});ml("SYPHON_STRIKE",2,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_TANK",120],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",260],["MELEE_MASTERY_II_TANK",380]],resource:"DRK_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRK_COMBO_TRACKER",1)&&e.addEvent(new Ne("gain syphon strike mana",.62,()=>{e.resources.get("MANA").gain(600)}))}});ml("SOULEATER",26,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",2),potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",260]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",480]],resource:"DRK_COMBO_TRACKER",resourceValue:2},onConfirm:e=>{e.hasResourceAvailable("DRK_COMBO_TRACKER",2)&&e.gainBloodGauge(20)}});OT("UNLEASH",6,{applicationDelay:.71,potency:120,falloff:0});OT("STALWART_SOUL",40,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_II_TANK",120]],combo:{potency:[["NEVER",140],["MELEE_MASTERY_II_TANK",160]],resource:"DRK_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,onConfirm:e=>{e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1)&&(e.gainBloodGauge(20),e.addEvent(new Ne("gain stalwart soul mana",.62,()=>{e.resources.get("MANA").gain(600)})))}});const CE=e=>{e.tryConsumeResource("DARK_ARTS"),e.refreshDarkside()},OE=e=>e.hasResourceAvailable("DARK_ARTS"),bE=e=>e.hasResourceAvailable("DARK_ARTS")?0:3e3;En("EDGE_OF_DARKNESS",40,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_SHADOW"},cooldown:1,manaCost:bE,highlightIf:OE,potency:300,onConfirm:CE});En("EDGE_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_DARKNESS"},cooldown:1,manaCost:bE,highlightIf:OE,potency:460,onConfirm:CE});En("FLOOD_OF_DARKNESS",30,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_SHADOW"},cooldown:1,manaCost:bE,highlightIf:OE,potency:100,falloff:0,onConfirm:CE});En("FLOOD_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_DARKNESS"},cooldown:1,manaCost:bE,highlightIf:OE,potency:160,falloff:0,onConfirm:CE});const Kh=e=>e.hasResourceAvailable("BLOOD_GAUGE",50)||e.hasResourceAvailable("DELIRIUM"),hh=[{newSkill:"BLOODSPILLER",condition:e=>!e.hasTraitUnlocked("ENHANCED_DELIRIUM")||!e.hasResourceAvailable("DELIRIUM")},{newSkill:"SCARLET_DELIRIUM",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",0)},{newSkill:"COMEUPPANCE",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",1)},{newSkill:"TORCLEAVER",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",2)}];ml("BLOODSPILLER",62,{applicationDelay:.8,validateAttempt:Kh,highlightIf:Kh,replaceIf:hh,potency:[["NEVER",500],["MELEE_MASTERY_II_TANK",600]],onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});const Eh=e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM");ml("QUIETUS",64,{applicationDelay:.76,validateAttempt:Kh,highlightIf:Kh,replaceIf:[{newSkill:"IMPALEMENT",condition:Eh}],potency:[["NEVER",200],["MELEE_MASTERY_II_TANK",240]],falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});[["SCARLET_DELIRIUM",.62,620],["COMEUPPANCE",.67,720],["TORCLEAVER",.62,820]].forEach((e,t)=>{const[n,o,l]=e;ml(n,96,{startOnHotbar:!1,applicationDelay:o,validateAttempt:hh[t+1].condition,highlightIf:hh[t+1].condition,replaceIf:hh,potency:l,onConfirm:r=>r.tryConsumeResource("DELIRIUM"),onApplication:r=>r.resources.get("MANA").gain(200)})});ml("IMPALEMENT",96,{startOnHotbar:!1,applicationDelay:.98,validateAttempt:Eh,highlightIf:Eh,replaceIf:[{newSkill:"QUIETUS",condition:e=>!Eh(e)}],potency:300,falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM"),onApplication:e=>e.resources.get("MANA").gain(500)});const oR=e=>e.hasResourceAvailable("SCORN");ml("DISESTEEM",100,{startOnHotbar:!1,applicationDelay:1.65,validateAttempt:oR,highlightIf:oR,potency:1e3,falloff:.25,onConfirm:e=>e.tryConsumeResource("SCORN")});En("DELIRIUM",68,"cd_DELIRIUM",{applicationDelay:0,cooldown:60,onConfirm:e=>{e.gainStatus("DELIRIUM",3),e.gainStatus("BLOOD_WEAPON",3)}});En("CARVE_AND_SPIT",60,"cd_ABYSSAL_DRAIN",{applicationDelay:1.47,cooldown:60,potency:[["NEVER",510],["MELEE_MASTERY_II_TANK",540]],healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});En("ABYSSAL_DRAIN",56,"cd_ABYSSAL_DRAIN",{applicationDelay:.98,cooldown:60,potency:240,healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});const lb=e=>e.resources.get("SALTED_EARTH").availableAmountIncludingDisabled()>0;En("SALTED_EARTH",52,"cd_SALTED_EARTH",{applicationDelay:.76,cooldown:90,replaceIf:[{newSkill:"SALT_AND_DARKNESS",condition:lb}],onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"SALTED_EARTH",skillName:"SALTED_EARTH",tickPotency:50,speedStat:"sks"})},falloff:0,onApplication:(e,t)=>{e.applyDoT("SALTED_EARTH",t),e.gainStatus("SALTED_EARTH")}});En("SALT_AND_DARKNESS",86,"cd_SALT_AND_DARKNESS",{startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:lb,applicationDelay:.76,cooldown:20,potency:500,falloff:.25});En("LIVING_SHADOW",80,"cd_LIVING_SHADOW",{applicationDelay:0,replaceIf:[{newSkill:"DISESTEEM",condition:e=>oR(e)}],cooldown:120,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_III")&&e.gainStatus("SCORN"),e.resources.get("ESTEEM_TRACKER").gain(CT);const n=e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW")?420:340;[["ABYSSAL_DRAIN_PET",n,0],["SHADOWSTRIDE_PET",0,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_II")?["SHADOWBRINGER_PET",570,.25]:["FLOOD_OF_SHADOW_PET",n,0],["EDGE_OF_SHADOW_PET",n,void 0],["BLOODSPILLER_PET",n,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_III")?["DISESTEEM_PET",620,.25]:["CARVE_AND_SPIT_PET",n,void 0]].forEach(l=>{const[r,d,E]=l;t.addDoTPotency(new Zt({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:r,aspect:Ie.Other,description:"",basePotency:d,snapshotTime:void 0,targetCount:t.targetCount,falloff:E}),"ESTEEM_TRACKER")}),e.resources.get("ESTEEM_TRACKER").node=t,e.addEvent(new Ne("initial esteem hit",zG,()=>e.handleEsteemAttack()))}});En("SHADOWBRINGER",90,"cd_SHADOWBRINGER",{applicationDelay:.67,cooldown:60,potency:600,falloff:.25,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("DARKSIDE")});En("SHADOWSTRIDE",54,"cd_SHADOWSTRIDE",{applicationDelay:.66,animationLock:jt,cooldown:30,maxCharges:2});ds("THE_BLACKEST_NIGHT",70,"cd_THE_BLACKEST_NIGHT",{rscType:"BLACKEST_NIGHT",manaCost:3e3,replaceIf:[{newSkill:"THE_BLACKEST_NIGHT_POP",condition:e=>e.hasResourceAvailable("BLACKEST_NIGHT")}],applicationDelay:.62,cooldown:15});En("THE_BLACKEST_NIGHT_POP",70,"cd_THE_BLACKEST_NIGHT_POP",{startOnHotbar:!1,highlightIf:e=>!0,applicationDelay:0,animationLock:un,cooldown:1,onConfirm:e=>{e.gainStatus("DARK_ARTS"),e.tryConsumeResource("BLACKEST_NIGHT")}});ds("SHADOW_WALL",38,"cd_SHADOW_WALL",{rscType:"SHADOW_WALL",autoUpgrade:{otherSkill:"SHADOWED_VIGIL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120});ds("SHADOWED_VIGIL",92,"cd_SHADOW_WALL",{rscType:"SHADOWED_VIGIL",autoDowngrade:{otherSkill:"SHADOW_WALL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120,onApplication:e=>e.gainStatus("VIGILANT")});ds("DARK_MIND",45,"cd_DARK_MIND",{rscType:"DARK_MIND",applicationDelay:.62,cooldown:60});ds("LIVING_DEAD",50,"cd_LIVING_DEAD",{rscType:"LIVING_DEAD",applicationDelay:0,cooldown:300});ds("DARK_MISSIONARY",66,"cd_DARK_MISSIONARY",{rscType:"DARK_MISSIONARY",applicationDelay:.62,cooldown:90});ds("OBLATION",82,"cd_OBLATION",{rscType:"OBLATION",applicationDelay:0,maxCharges:2,cooldown:60});En("GRIT",10,"cd_GRIT",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.resources.get("GRIT").gain(1),replaceIf:[{newSkill:"RELEASE_GRIT",condition:e=>e.hasResourceAvailable("GRIT")}],secondaryCooldown:{cdName:"cd_RELEASE_GRIT",cooldown:1,maxCharges:1}});En("RELEASE_GRIT",10,"cd_RELEASE_GRIT",{startOnHotbar:!1,replaceIf:[{newSkill:"GRIT",condition:e=>!e.hasResourceAvailable("GRIT")}],applicationDelay:0,cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.tryConsumeResource("GRIT"),secondaryCooldown:{cdName:"cd_GRIT",cooldown:2,maxCharges:1}});Object.keys(AR).forEach(e=>Gt(e,`AST/${xe[e].name}.png`));const sb=["COMBUST_II","COMBUST_III"],KG=Object.keys(AR).filter(e=>!sb.includes(e));class VG extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[...sb.map(t=>this.makeCommonTimer(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...KG.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){return[{kind:"arcana",name:ze("ARCANA"),currentArcanaColor:this.state.drawnAstral()?t.ast.astralCard:t.ast.umbralCard,activeSlots:["ARCANA_1","ARCANA_2","ARCANA_3","MINOR_ARCANA"].map(n=>this.state.hasResourceAvailable(n))}]}}const tt=(e,t,n)=>{je("AST",e,t,n??{})};tt("ARCANA",1);tt("MINOR_ARCANA",1,{default:1});tt("LIGHTSPEED",1,{timeout:15});tt("THE_BALANCE",1,{timeout:15});tt("THE_ARROW",1,{timeout:15});tt("THE_SPIRE",1,{timeout:30});tt("THE_SPEAR",1,{timeout:15});tt("THE_BOLE",1,{timeout:15});tt("THE_EWER",1,{timeout:15});tt("ASPECTED_BENEFIC",1,{timeout:15});tt("ASPECTED_HELIOS",1,{timeout:15});tt("SYNASTRY",1,{timeout:20});tt("DIVINATION",1,{timeout:20});tt("DIVINING",1,{timeout:30,warnOnTimeout:!0});tt("COLLECTIVE_UNCONSCIOUS",1,{timeout:18});tt("COLLECTIVE_UNCONSCIOUS_MIT",1,{timeout:10});tt("WHEEL_OF_FORTUNE",1,{timeout:15});tt("OPPOSITION",1,{timeout:15});tt("EARTHLY_DOMINANCE",1,{timeout:10});tt("GIANT_DOMINANCE",1,{timeout:10});tt("COMBUST_II",1,{timeout:30});tt("COMBUST_III",1,{timeout:30});tt("INTERSECTION",1,{timeout:30});tt("NEUTRAL_SECT",1,{timeout:20});tt("NEUTRAL_SECT_SHIELD",1,{timeout:30});tt("HOROSCOPE",1,{timeout:10});tt("HOROSCOPE_HELIOS",1,{timeout:30});tt("SUNTOUCHED",1,{timeout:30});tt("EXALTATION",1,{timeout:8});tt("MACROCOSMOS",1,{timeout:15});tt("HELIOS_CONJUNCTION",1,{timeout:15});tt("SUN_SIGN",1,{timeout:15});tt("ARCANA_1",1,{default:1});tt("ARCANA_2",1,{default:1});tt("ARCANA_3",1,{default:1});tt("NEXT_DRAW",1);class WG extends Kt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY_II")?3:this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY")?2:1,o=this.hasTraitUnlocked("ENHANCED_CELESTIAL_INTERSECTION")?2:1;this.cooldowns.set(new Le("cd_ESSENTIAL_DIGNITY",40,n,n)),this.cooldowns.set(new Le("cd_CELESTIAL_INTERSECTION",30,o,o)),this.cooldowns.set(new Le("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:g({en:"Combust DoT",zh:"DoT"}),groupedEffects:[{effectName:"COMBUST_II",appliedBy:["COMBUST_II"]},{effectName:"COMBUST_III",appliedBy:["COMBUST_III"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHEEL_OF_FORTUNE",appliedBy:["COLLECTIVE_UNCONSCIOUS"]}]},{isHealing:!0,groupedEffects:[{effectName:"OPPOSITION",appliedBy:["CELESTIAL_OPPOSITION"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_BENEFIC",appliedBy:["ASPECTED_BENEFIC"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_HELIOS",appliedBy:["ASPECTED_HELIOS"]},{effectName:"HELIOS_CONJUNCTION",appliedBy:["HELIOS_CONJUNCTION"]}]}])}drawnAstral(){return!this.hasResourceAvailable("NEXT_DRAW")}cancelChanneledSkills(){this.tryConsumeResource("COLLECTIVE_UNCONSCIOUS")}jobSpecificAddHealingBuffCovers(t,n){n.cdName==="cd_GCD"&&this.hasResourceAvailable("NEUTRAL_SECT")&&t.addBuff(k.NeutralSect),n.cdName==="cd_GCD"&&!n.aoeHeal&&this.hasResourceAvailable("SYNASTRY")&&t.addBuff(k.Synastry),this.hasResourceAvailable("THE_ARROW")&&t.addBuff(k.TheArrow)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("DIVINATION")&&t.addBuff(k.Divination)}get statusPropsGenerator(){return new VG(this)}}const fn=(e,t,n)=>{const o=r=>{if(!n.healingPotency)return[];const d=[];return r.hasResourceAvailable("SYNASTRY")&&!n.aoeHeal&&d.push(q.Synastry),r.hasResourceAvailable("NEUTRAL_SECT")&&d.push(q.NeutralSect),r.hasResourceAvailable("THE_ARROW")&&d.push(q.TheArrow),d},l=n.baseCastTime??0;return Bn("AST",e,t,{...n,jobHealingPotencyModifiers:o,jobPotencyModifiers:r=>r.hasResourceAvailable("DIVINATION")?[q.Divination]:[],castTime:r=>Math.max(0,r.config.adjustedCastTime(r.hasResourceAvailable("LIGHTSPEED")?l-2.5:l)),recastTime:r=>r.config.adjustedGCD(2.5),isInstantFn:r=>!n.baseCastTime||r.hasResourceAvailable("SWIFTCAST"),onConfirm:Me(l?r=>r.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm)})},An=(e,t,n,o)=>et("AST",e,t,n,{...o,jobHealingPotencyModifiers:o.healingPotency?l=>{const r=[];return l.hasResourceAvailable("THE_ARROW")&&r.push(q.TheArrow),e==="STELLAR_DETONATION"&&r.push(q.AstPet),r}:void 0,jobPotencyModifiers:l=>{const r=[];return l.hasResourceAvailable("DIVINATION")&&r.push(q.Divination),e==="STELLAR_DETONATION"&&r.push(q.AstPet),r}}),hs=(e,t,n,o)=>we("AST",e,t,n,{...o,jobHealingPotencyModifiers:l=>o.healingPotency&&l.hasResourceAvailable("THE_ARROW")?[q.TheArrow]:[],jobPotencyModifiers:o.potency?l=>l.hasResourceAvailable("DIVINATION")?[q.Divination]:[]:void 0});fn("MALEFIC_III",64,{autoUpgrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_III"},baseCastTime:1.5,applicationDelay:1.07,potency:190,manaCost:400});fn("MALEFIC_IV",72,{autoDowngrade:{otherSkill:"MALEFIC_III",trait:"MALEFIC_MASTERY_III"},autoUpgrade:{otherSkill:"FALL_MALEFIC",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:230,manaCost:400});fn("FALL_MALEFIC",82,{autoDowngrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],manaCost:400});fn("COMBUST_II",46,{autoUpgrade:{otherSkill:"COMBUST_III",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_II",skillName:"COMBUST_II",tickPotency:60,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_II",t)});fn("COMBUST_III",72,{autoDowngrade:{otherSkill:"COMBUST_II",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_III",skillName:"COMBUST_III",tickPotency:e.hasTraitUnlocked("MAGICK_MASTERY_HEALER")?70:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_III",t)});fn("GRAVITY",45,{autoUpgrade:{otherSkill:"GRAVITY_II",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:120,falloff:0,manaCost:400});fn("GRAVITY_II",82,{autoDowngrade:{otherSkill:"GRAVITY",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:[["NEVER",130],["MAGICK_MASTERY_HEALER",140]],falloff:0,manaCost:400});fn("MACROCOSMOS",90,{applicationDelay:.75,secondaryCooldown:{cdName:"cd_MACROCOSMOS",cooldown:180,maxCharges:1},potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],falloff:.4,manaCost:600,replaceIf:[{newSkill:"MICROCOSMOS",condition:e=>e.hasResourceAvailable("MACROCOSMOS")}],onConfirm:e=>e.gainStatus("MACROCOSMOS")});An("MICROCOSMOS",90,"cd_MICROCOSMOS",{startOnHotbar:!1,applicationDelay:.045,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("MACROCOSMOS"),onConfirm:e=>e.tryConsumeResource("MACROCOSMOS")});fn("ASPECTED_BENEFIC",34,{applicationDelay:.98,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_BENEFIC",effectName:"ASPECTED_BENEFIC",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200}),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_BENEFIC",t),e.gainStatus("ASPECTED_BENEFIC")}});fn("BENEFIC",2,{baseCastTime:1.5,applicationDelay:.98,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],manaCost:400});fn("BENEFIC_II",26,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:700});fn("ASPECTED_HELIOS",40,{autoUpgrade:{otherSkill:"HELIOS_CONJUNCTION",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_HELIOS",effectName:"ASPECTED_HELIOS",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_HELIOS",t),e.gainStatus("ASPECTED_HELIOS")}});fn("HELIOS_CONJUNCTION",96,{autoDowngrade:{otherSkill:"ASPECTED_HELIOS",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:250,aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"HELIOS_CONJUNCTION",effectName:"HELIOS_CONJUNCTION",speedStat:"sps",tickPotency:175}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("HELIOS_CONJUNCTION",t),e.gainStatus("HELIOS_CONJUNCTION")}});fn("HELIOS",10,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],aoeHeal:!0,manaCost:700,onConfirm:e=>{e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS")}});fn("ASCEND",12,{baseCastTime:8,applicationDelay:1.07,manaCost:2400});const Ru=e=>e.drawnAstral(),Tu=e=>!e.drawnAstral(),rb=e=>{(e.hasResourceAvailable("ARCANA_1")||e.drawnAstral()&&e.hasResourceAvailable("MINOR_ARCANA"))&&p.reportWarning({kind:"custom",en:"damage card overwritten!",zh:""}),e.resources.get("NEXT_DRAW").gainWrapping(1),["MINOR_ARCANA","ARCANA_1","ARCANA_2","ARCANA_3"].forEach(t=>e.resources.get(t).gain(1))},cb=e=>e.resources.get("MANA").gain(2e3);An("ASTRAL_DRAW",30,"cd_ASTRAL_DRAW",{replaceIf:[{newSkill:"UMBRAL_DRAW",condition:Ru}],applicationDelay:0,cooldown:55,validateAttempt:Tu,onConfirm:rb,onApplication:cb});An("UMBRAL_DRAW",30,"cd_ASTRAL_DRAW",{startOnHotbar:!1,replaceIf:[{newSkill:"ASTRAL_DRAW",condition:Tu}],applicationDelay:0,cooldown:55,validateAttempt:Ru,onConfirm:rb,onApplication:cb});const bT=(e,t,n)=>{console.assert(n.length===3);const o=[{newSkill:n[0],condition:l=>!l.hasResourceAvailable(t)},{newSkill:n[1],condition:l=>Ru(l)&&l.hasResourceAvailable(t)},{newSkill:n[2],condition:l=>Tu(l)&&l.hasResourceAvailable(t)}];o.forEach(({newSkill:l,condition:r},d)=>{const E=o.slice();E.splice(d,1),An(l,30,e,{startOnHotbar:d===0,replaceIf:E,applicationDelay:.62,cooldown:1,validateAttempt:d===0?()=>!1:r,onConfirm:d!==0?h=>h.tryConsumeResource(t):void 0,onApplication:d!==0?h=>h.gainStatus(l):void 0})})};bT("cd_PLAY_I","ARCANA_1",["PLAY_I","THE_BALANCE","THE_SPEAR"]);bT("cd_PLAY_II","ARCANA_2",["PLAY_II","THE_ARROW","THE_BOLE"]);bT("cd_PLAY_III","ARCANA_3",["PLAY_III","THE_SPIRE","THE_EWER"]);An("MINOR_ARCANA",70,"cd_MINOR_ARCANA",{applicationDelay:0,replaceIf:[{newSkill:"LORD_OF_CROWNS",condition:e=>Ru(e)&&e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>Tu(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],cooldown:1,validateAttempt:()=>!1});An("LORD_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>Tu(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,potency:400,falloff:0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});An("LADY_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LORD_OF_CROWNS",condition:e=>Ru(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,healingPotency:400,aoeHeal:!0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});hs("LIGHTSPEED",6,"cd_LIGHTSPEED",{rscType:"LIGHTSPEED",applicationDelay:0,cooldown:60,maxCharges:2});const ub=437,db=1015;An("EARTHLY_STAR",62,"cd_EARTHLY_STAR",{applicationDelay:0,cooldown:60,falloff:0,replaceIf:[{newSkill:"STELLAR_DETONATION",condition:e=>e.hasResourceAvailable("EARTHLY_DOMINANCE")||e.hasResourceAvailable("GIANT_DOMINANCE")}],onConfirm:(e,t)=>{e.gainStatus("EARTHLY_DOMINANCE"),e.resources.addResourceEvent({rscType:"EARTHLY_DOMINANCE",name:"expand earthly star",delay:10,fnOnRsc:()=>{e.gainStatus("GIANT_DOMINANCE"),e.resources.addResourceEvent({rscType:"GIANT_DOMINANCE",name:"auto-detonate earthly star",delay:10,fnOnRsc:()=>{const n=[],o=new Zt({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:Ie.Other,basePotency:ub,snapshotTime:e.getDisplayTime(),description:"",targetCount:t.targetCount,falloff:0});e.hasResourceAvailable("TINCTURE")&&n.push(q.Tincture),e.hasResourceAvailable("DIVINATION")&&n.push(q.Divination),n.push(q.AstPet),o.modifiers=n,t.addPotency(o);const l=new Zt({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:Ie.Other,basePotency:db,snapshotTime:e.getDisplayTime(),description:"",targetCount:t.healTargetCount,falloff:0});e.hasResourceAvailable("THE_ARROW"),t.addHealingPotency(l),p.resolvePotency(o),p.resolveHealingPotency(l)}})}})}});An("STELLAR_DETONATION",62,"cd_STELLAR_DETONATION",{startOnHotbar:!1,applicationDelay:.53,cooldown:3,potency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?ub:290,falloff:0,healingPotency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?db:762,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("EARTHLY_DOMINANCE")||e.hasResourceAvailable("GIANT_DOMINANCE"),onConfirm:e=>{e.tryConsumeResource("EARTHLY_DOMINANCE"),e.tryConsumeResource("GIANT_DOMINANCE")}});hs("DIVINATION",50,"cd_DIVINATION",{rscType:"DIVINATION",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"ORACLE",condition:e=>e.hasResourceAvailable("DIVINING")}],onConfirm:e=>e.gainStatus("DIVINING")});An("ORACLE",92,"cd_ORACLE",{startOnHotbar:!1,applicationDelay:1.74,cooldown:1,highlightIf:e=>e.hasResourceAvailable("DIVINING"),validateAttempt:e=>e.hasResourceAvailable("DIVINING"),onConfirm:e=>e.tryConsumeResource("DIVINING")});An("ESSENTIAL_DIGNITY",15,"cd_ESSENTIAL_DIGNITY",{applicationDelay:.62,cooldown:40,maxCharges:3,healingPotency:400});hs("SYNASTRY",50,"cd_SYNASTRY",{rscType:"SYNASTRY",applicationDelay:.62,cooldown:120});hs("EXALTATION",86,"cd_EXALTATION",{rscType:"EXALTATION",applicationDelay:.71,cooldown:60});An("COLLECTIVE_UNCONSCIOUS",58,"cd_COLLECTIVE_UNCONSCIOUS",{applicationDelay:.42,cooldown:60,onConfirm:(e,t)=>{e.gainStatus("COLLECTIVE_UNCONSCIOUS"),e.gainStatus("COLLECTIVE_UNCONSCIOUS_MIT"),e.addHoTPotencies({node:t,skillName:"COLLECTIVE_UNCONSCIOUS",effectName:"WHEEL_OF_FORTUNE",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("WHEEL_OF_FORTUNE")});An("CELESTIAL_OPPOSITION",60,"cd_CELESTIAL_OPPOSITION",{applicationDelay:1.07,cooldown:60,healingPotency:200,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"CELESTIAL_OPPOSITION",effectName:"OPPOSITION",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("OPPOSITION")});An("CELESTIAL_INTERSECTION",74,"cd_CELESTIAL_INTERSECTION",{applicationDelay:0,cooldown:30,maxCharges:1,healingPotency:200,aoeHeal:!0});hs("HOROSCOPE",76,"cd_HOROSCOPE",{rscType:"HOROSCOPE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"HOROSCOPE_RECAST",condition:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE")}]});An("HOROSCOPE_RECAST",76,"cd_HOROSCOPE_RECAST",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,healingPotency:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")?400:200,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE"),onConfirm:e=>e.tryConsumeResource("HOROSCOPE_HELIOS")||e.tryConsumeResource("HOROSCOPE")});hs("NEUTRAL_SECT",80,"cd_NEUTRAL_SECT",{rscType:"NEUTRAL_SECT",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"SUN_SIGN",condition:e=>e.hasResourceAvailable("SUNTOUCHED")}],onConfirm:e=>e.gainStatus("SUNTOUCHED")});hs("SUN_SIGN",100,"cd_SUN_SIGN",{startOnHotbar:!1,rscType:"SUN_SIGN",applicationDelay:1.47,cooldown:1,highlightIf:e=>e.hasResourceAvailable("SUNTOUCHED"),validateAttempt:e=>e.hasResourceAvailable("SUNTOUCHED"),onConfirm:e=>e.tryConsumeResource("SUNTOUCHED")});Object.keys(MR).forEach(e=>Gt(e,`SCH/${xe[e].name}.png`));const hb=["BIO_II","BIOLYSIS","CHAIN_STRATAGEM","BANEFUL_IMPACTION"],XG=Object.keys(MR).filter(e=>!hb.includes(e));class qG extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[...hb.map(t=>this.makeCommonTimer(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...XG.map(t=>t==="FEY_UNION"?this.makeCommonTimerless(t):t==="SACRED_SOIL_ZONE"?this.makeToggleableTimer(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources.get("SERAPH_SUMMON_TIMER"),o=n.available(1)?n.pendingChange?.timeTillEvent:void 0,l=this.state.resources.get("FAERIE_GAUGE").availableAmount(),r=this.state.resources.get("AETHERFLOW").availableAmount();return[{kind:"text",name:ze("SERAPH_SUMMON_TIMER"),text:o?.toFixed(3)??"N/A",color:o?t.sch.seraph:void 0},{kind:"bar",name:ze("FAERIE_GAUGE"),color:t.sch.faerieGauge,progress:l/100,valueString:l.toFixed(0)},{kind:"counter",name:ze("AETHERFLOW"),color:t.sch.aetherflow,currentStacks:r,maxStacks:3,valueString:r.toFixed(0)}]}}const Dt=(e,t,n)=>{je("SCH",e,t,n??{})};Dt("AETHERFLOW",3,{warnOnOvercap:!0});Dt("FAERIE_GAUGE",100);Dt("BIO_II",1,{timeout:30});Dt("CATALYZE",1,{timeout:30});Dt("GALVANIZE",1,{timeout:30});Dt("WHISPERING_DAWN",1,{timeout:21});Dt("ANGELS_WHISPER",1,{timeout:21});Dt("FEY_ILLUMINATION",1,{timeout:20});Dt("SERAPHIC_ILLUMINATION",1,{timeout:20});Dt("SACRED_SOIL_ZONE",1,{timeout:15});Dt("SACRED_SOIL_MIT",1,{timeout:4.96});Dt("EMERGENCY_TACTICS",1,{timeout:15});Dt("DISSIPATION",1,{timeout:30});Dt("EXCOGITATION",1,{timeout:45});Dt("CHAIN_STRATAGEM",1,{timeout:20});Dt("IMPACT_IMMINENT",1,{timeout:30,warnOnTimeout:!0});Dt("BIOLYSIS",1,{timeout:30});Dt("RECITATION",1,{timeout:15});Dt("FEY_UNION",1);Dt("SERAPHIC_VEIL",1,{timeout:30});Dt("PROTRACTION",1,{timeout:10});Dt("EXPEDIENCE",1,{timeout:10});Dt("DESPERATE_MEASURES",1,{timeout:20});Dt("BANEFUL_IMPACTION",1,{timeout:15});Dt("SERAPHISM",1,{timeout:20});Dt("SERAPHISM_REGEN",1,{timeout:5});Dt("SERAPH_SUMMON_TIMER",1,{timeout:22});const Su=.09,Iu=new Map([["FEY_BLESSING",.667],["WHISPERING_DAWN",1.156],["CONSOLATION",.889],["ANGELS_WHISPER",1.029],["AETHERPACT",.668],["FEY_ILLUMINATION",1.205]]);class ZG extends Kt{nextEstimatedPetApplication;constructor(t){super(t),this.nextEstimatedPetApplication=void 0;const n=this.hasTraitUnlocked("ENHANCED_DEPLOYMENT_TACTICS")?90:120,o=this.hasTraitUnlocked("ENHANCED_RECITATION")?60:90;this.cooldowns.set(new Le("cd_DEPLOYMENT_TACTICS",n,1,1)),this.cooldowns.set(new Le("cd_RECITATION",o,1,1)),this.cooldowns.set(new Le("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:g({en:"Bio/Biolysis DoT",zh:"DoT"}),groupedEffects:[{effectName:"BIO_II",appliedBy:["BIO_II"]},{effectName:"BIOLYSIS",appliedBy:["BIOLYSIS"]}]},{groupedEffects:[{effectName:"BANEFUL_IMPACTION",appliedBy:["BANEFUL_IMPACTION"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHISPERING_DAWN",appliedBy:["WHISPERING_DAWN"]},{effectName:"ANGELS_WHISPER",appliedBy:["WHISPERING_DAWN"]}]},{isHealing:!0,groupedEffects:[{effectName:"SACRED_SOIL_MIT",appliedBy:["SACRED_SOIL"],isGroundTargeted:!0}]},{isHealing:!0,groupedEffects:[{effectName:"SERAPHISM_REGEN",appliedBy:["SERAPHISM"]}]}])}jobSpecificAddHealingBuffCovers(t,n){n.cdName==="cd_GCD"&&((this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&t.addBuff(k.FeyIllumination),this.hasResourceAvailable("DISSIPATION")&&t.addBuff(k.Dissipation)),this.hasResourceAvailable("PROTRACTION")&&t.addBuff(k.Protraction);const o=["ADLOQUIUM","SUCCOR","CONCITATION","EXCOGITATION","INDOMITABILITY"];this.hasResourceAvailable("RECITATION")&&o.includes(n.name)&&t.addBuff(k.Recitation)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("CHAIN_STRATAGEM")&&t.addBuff(k.ChainStratagem)}jobSpecificRegisterRecurringEvents(){const t=()=>new Ne("sch special hot ticks",3,()=>{this.hasResourceAvailable("FEY_UNION")&&this.resources.get("FAERIE_GAUGE").available(10)&&this.resources.get("FAERIE_GAUGE").consume(10),this.resources.get("FAERIE_GAUGE").available(10)||this.tryConsumeResource("FEY_UNION"),this.hasResourceAvailable("SACRED_SOIL_ZONE")&&this.gainStatus("SACRED_SOIL_MIT"),this.hasResourceAvailable("SERAPHISM")&&this.gainStatus("SERAPHISM_REGEN"),this.addEvent(t())});this.addEvent(new Ne("begin sch special hot ticks",this.hotTickOffset,()=>this.addEvent(t())))}makePetPotency(t,n,o,l){const r=new Zt({config:this.config,sourceTime:o,sourceSkill:n,aspect:Ie.Other,basePotency:l,snapshotTime:this.getDisplayTime(),description:"",targetCount:t,falloff:void 0}),d=[q.SchPet];return r.modifiers=d,r}queuePetAction(t,n,o,l,r,d){const E=this.getDisplayTime();this.nextEstimatedPetApplication=E+l+r;const h=this.resources.get("SERAPH_SUMMON_TIMER").pendingChange?.timeTillEvent;h!==void 0&&this.nextEstimatedPetApplication>h+E&&p.reportWarning({kind:"custom",en:`${li(n)} is likely to ghost when seraph leaves!`}),this.addEvent(new Ne(o+" pet snapshot",l,()=>{const A=d(this);this.addEvent(new Ne(o+" application",r,()=>{A(this)}))}))}warnLastPetGhost(){this.nextEstimatedPetApplication!==void 0&&this.nextEstimatedPetApplication>this.getDisplayTime()&&p.reportWarning({kind:"custom",en:"previous pet command is likely to ghost!"})}hasRealFairy(){return!this.hasResourceAvailable("DISSIPATION")&&!this.hasResourceAvailable("SERAPH_SUMMON_TIMER")}maybeChainModifier(){return this.hasResourceAvailable("CHAIN_STRATAGEM")?[q.ChainStrat]:[]}maybeGainFaerieGauge(){this.hasResourceAvailable("DISSIPATION")||this.resources.get("FAERIE_GAUGE").gain(10)}addHealingMagicPotencyModifiers(t){(this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&t.push(q.FeyIllum),this.hasResourceAvailable("DISSIPATION")&&t.push(q.Dissipation)}addHealingActionPotencyModifiers(t){this.hasResourceAvailable("PROTRACTION")&&t.push(q.Protraction)}get statusPropsGenerator(){return new qG(this)}}const mn=(e,t,n)=>Bn("SCH",e,t,{...n,castTime:l=>l.config.adjustedCastTime(n.baseCastTime??0),recastTime:l=>l.config.adjustedGCD(2.5),isInstantFn:l=>!n.baseCastTime||l.hasResourceAvailable("SWIFTCAST"),jobPotencyModifiers:l=>l.maybeChainModifier(),jobHealingPotencyModifiers:l=>{if(!n.healingPotency)return[];const r=[];return l.addHealingMagicPotencyModifiers(r),l.addHealingActionPotencyModifiers(r),l.hasResourceAvailable("RECITATION")&&e!=="ACCESSION"&&e!=="MANIFESTATION"&&r.push(q.AutoCrit),r},onConfirm:Me(n.baseCastTime?l=>l.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm)}),bn=(e,t,n,o)=>et("SCH",e,t,n,{...o,jobPotencyModifiers:r=>r.maybeChainModifier(),jobHealingPotencyModifiers:r=>{if(!o.healingPotency)return[];const d=[];return r.addHealingActionPotencyModifiers(d),r.hasResourceAvailable("RECITATION")&&(e==="INDOMITABILITY"||e==="EXCOGITATION")&&d.push(q.AutoCrit),d}}),Rl=(e,t,n,o)=>we("SCH",e,t,n,o),Eb=[{newSkill:"ADLOQUIUM",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"MANIFESTATION",condition:e=>e.hasResourceAvailable("SERAPHISM")}],fb=[{newSkill:"CONCITATION",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"ACCESSION",condition:e=>e.hasResourceAvailable("SERAPHISM")}];mn("BROIL_II",64,{autoUpgrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_III"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:240});mn("BROIL_III",72,{autoDowngrade:{otherSkill:"BROIL_II",trait:"BROIL_MASTERY_III"},autoUpgrade:{otherSkill:"BROIL_IV",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:255});mn("BROIL_IV",82,{autoDowngrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:[["NEVER",295],["TACTICIANS_MASTERY",320]]});mn("BIO_II",26,{autoUpgrade:{otherSkill:"BIOLYSIS",trait:"CORRUPTION_MASTERY_II"},applicationDelay:1.15,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIO_II",skillName:"BIO_II",tickPotency:40,speedStat:"sps",modifiers:e.maybeChainModifier()})},onApplication:(e,t)=>e.applyDoT("BIO_II",t)});mn("BIOLYSIS",72,{autoDowngrade:{otherSkill:"BIO_II",trait:"CORRUPTION_MASTERY_II"},applicationDelay:.67,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIOLYSIS",skillName:"BIOLYSIS",tickPotency:e.hasTraitUnlocked("TACTICIANS_MASTERY")?85:70,speedStat:"sps",modifiers:e.maybeChainModifier()})},onApplication:(e,t)=>e.applyDoT("BIOLYSIS",t)});mn("RUIN_II",38,{applicationDelay:.94,potency:[["NEVER",200],["BROIL_MASTERY_IV",220]],baseCastTime:0,manaCost:400});mn("ART_OF_WAR",46,{autoUpgrade:{otherSkill:"ART_OF_WAR_II",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:165,falloff:0});mn("ART_OF_WAR_II",82,{autoDowngrade:{otherSkill:"ART_OF_WAR",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:180,falloff:0});Rl("CHAIN_STRATAGEM",66,"cd_CHAIN_STRATAGEM",{replaceIf:[{newSkill:"BANEFUL_IMPACTION",condition:e=>e.hasResourceAvailable("IMPACT_IMMINENT")}],rscType:"CHAIN_STRATAGEM",applicationDelay:.8,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_CHAIN_STRATAGEM")&&e.gainStatus("IMPACT_IMMINENT")}});bn("BANEFUL_IMPACTION",92,"cd_BANEFUL_IMPACTION",{startOnHotbar:!1,applicationDelay:1.29,cooldown:1,falloff:0,highlightIf:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),validateAttempt:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),onConfirm:(e,t)=>{e.tryConsumeResource("IMPACT_IMMINENT"),e.addDoTPotencies({node:t,effectName:"BANEFUL_IMPACTION",skillName:"BANEFUL_IMPACTION",tickPotency:140,speedStat:"sps",modifiers:e.maybeChainModifier()})},onApplication:(e,t)=>e.applyDoT("BANEFUL_IMPACTION",t)});bn("ENERGY_DRAIN",45,"cd_ENERGY_DRAIN",{applicationDelay:1.07,cooldown:1,potency:100,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});const eN=900,QG=900;mn("ADLOQUIUM",30,{replaceIf:Eb,applicationDelay:.98,baseCastTime:2,manaCost:eN,healingPotency:300,onConfirm:e=>{const t=e.tryConsumeResource("EMERGENCY_TACTICS");t||e.gainStatus("GALVANIZE"),e.hasResourceAvailable("RECITATION")&&e.resources.get("MANA").gain(eN),(e.tryConsumeResource("RECITATION")||e.triggersEffect(e.config.critRate))&&!t&&e.gainStatus("CATALYZE")}});const Ab=e=>{e.tryConsumeResource("RECITATION")&&e.resources.get("MANA").gain(QG),e.tryConsumeResource("EMERGENCY_TACTICS")||e.gainStatus("GALVANIZE")};mn("SUCCOR",35,{autoUpgrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},applicationDelay:1.12,baseCastTime:2,manaCost:900,healingPotency:200,onConfirm:Ab});mn("CONCITATION",96,{autoDowngrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},replaceIf:fb,applicationDelay:1.12,baseCastTime:2,manaCost:900,healingPotency:200,onConfirm:Ab});mn("PHYSICK",4,{applicationDelay:1.03,healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],baseCastTime:1.5,manaCost:300});mn("RESURRECTION",12,{applicationDelay:.98,baseCastTime:8,manaCost:2400});bn("AETHERFLOW",45,"cd_AETHERFLOW",{applicationDelay:0,cooldown:60,requiresCombat:!0,onConfirm:e=>{e.resources.get("MANA").gain(2e3),e.resources.get("AETHERFLOW").gain(3)}});Rl("DISSIPATION",60,"cd_DISSIPATION",{rscType:"DISSIPATION",applicationDelay:0,cooldown:180,requiresCombat:!0,validateAttempt:e=>!e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:e=>{e.warnLastPetGhost(),e.resources.get("AETHERFLOW").gain(3),e.tryConsumeResource("SERAPHISM")}});bn("LUSTRATE",45,"cd_LUSTRATE",{applicationDelay:.62,cooldown:1,healingPotency:600,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});Rl("SACRED_SOIL",50,"cd_SACRED_SOIL",{rscType:"SACRED_SOIL_ZONE",applicationDelay:.62,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:(e,t)=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW"),e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&e.addHoTPotencies({node:t,skillName:"SACRED_SOIL",effectName:"SACRED_SOIL_MIT",speedStat:"sps",tickPotency:100},34.96+.62)},onApplication:(e,t)=>{e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&(e.applyHoT("SACRED_SOIL_MIT",t,34.96),e.gainStatus("SACRED_SOIL_MIT"))}});Rl("EXCOGITATION",62,"cd_EXCOGITATION",{rscType:"EXCOGITATION",applicationDelay:.8,cooldown:45,healingPotency:800,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});bn("INDOMITABILITY",52,"cd_INDOMITABILITY",{applicationDelay:.62,cooldown:30,healingPotency:400,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});bn("WHISPERING_DAWN",20,"cd_WHISPERING_DAWN",{applicationDelay:0,cooldown:60,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const n=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"ANGELS_WHISPER":"WHISPERING_DAWN",o=l=>(l.addHoTPotencies({node:t,skillName:"WHISPERING_DAWN",effectName:n,speedStat:"sps",tickPotency:80}),r=>{r.applyHoT(n,t),t.getHotPotencies("WHISPERING_DAWN").forEach(d=>{d.modifiers.includes(q.SchPet)||d.modifiers.push(q.SchPet)}),r.gainStatus(n)});e.queuePetAction(t,"WHISPERING_DAWN",n,Su,Iu.get(n),o)}});bn("FEY_ILLUMINATION",40,"cd_FEY_ILLUMINATION",{applicationDelay:0,cooldown:120,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const n=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"SERAPHIC_ILLUMINATION":"FEY_ILLUMINATION",o=l=>r=>r.gainStatus(n);e.queuePetAction(t,"FEY_ILLUMINATION","FEY_ILLUMINATION",Su,Iu.get("FEY_ILLUMINATION"),o)}});bn("DEPLOYMENT_TACTICS",56,"cd_DEPLOYMENT_TACTICS",{applicationDelay:.89,cooldown:120});Rl("EMERGENCY_TACTICS",58,"cd_EMERGENCY_TACTICS",{rscType:"EMERGENCY_TACTICS",applicationDelay:0,cooldown:15});bn("AETHERPACT",70,"cd_AETHERPACT",{replaceIf:[{newSkill:"DISSOLVE_UNION",condition:e=>e.hasResourceAvailable("FEY_UNION")}],applicationDelay:0,cooldown:3,validateAttempt:e=>e.resources.get("FAERIE_GAUGE").available(10)&&e.hasRealFairy(),onConfirm:(e,t)=>{e.gainStatus("FEY_UNION");const n=o=>l=>l.gainStatus("FEY_UNION");e.queuePetAction(t,"AETHERPACT","AETHERPACT",Su,Iu.get("AETHERPACT"),n)}});bn("DISSOLVE_UNION",70,"cd_DISSOLVE_UNION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("FEY_UNION"),onConfirm:e=>e.tryConsumeResource("FEY_UNION")});Rl("RECITATION",74,"cd_RECITATION",{rscType:"RECITATION",applicationDelay:0,cooldown:90});bn("FEY_BLESSING",76,"cd_FEY_BLESSING",{applicationDelay:0,cooldown:60,healingPotency:320,validateAttempt:e=>e.hasRealFairy(),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const n=o=>{const l=o.makePetPotency(t.healTargetCount,"FEY_BLESSING",o.getDisplayTime(),320);return o.addHealingActionPotencyModifiers(l.modifiers),r=>p.resolveHealingPotency(l)};e.queuePetAction(t,"FEY_BLESSING","FEY_BLESSING",Su,Iu.get("FEY_BLESSING"),n)}});bn("SUMMON_SERAPH",80,"cd_SUMMON_SERAPH",{replaceIf:[{newSkill:"CONSOLATION",condition:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER")}],applicationDelay:0,cooldown:120,validateAttempt:e=>e.hasRealFairy(),onConfirm:e=>{e.warnLastPetGhost(),e.gainStatus("SERAPH_SUMMON_TIMER"),e.tryConsumeResource("FEY_UNION")}});bn("CONSOLATION",80,"cd_CONSOLATION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,secondaryCooldown:{cdName:"cd_CONSOLATION_INTERNAL",cooldown:30,maxCharges:2},healingPotency:250,validateAttempt:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:(e,t)=>{const n=o=>{const l=o.makePetPotency(t.healTargetCount,"CONSOLATION",o.getDisplayTime(),250);return r=>{r.gainStatus("SERAPHIC_VEIL"),p.resolveHealingPotency(l)}};e.queuePetAction(t,"CONSOLATION","CONSOLATION",Su,Iu.get("CONSOLATION"),n)}});Rl("PROTRACTION",86,"cd_PROTRACTION",{rscType:"PROTRACTION",applicationDelay:.76,cooldown:60});bn("EXPEDIENT",90,"cd_EXPEDIENT",{applicationDelay:0,cooldown:120,onConfirm:e=>{e.gainStatus("EXPEDIENCE"),e.gainStatus("DESPERATE_MEASURES")}});Rl("SERAPHISM",100,"cd_SERAPHISM",{requiresCombat:!0,rscType:"SERAPHISM",applicationDelay:0,cooldown:180,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{const n=e.cooldowns.get("cd_EMERGENCY_TACTICS");n.restore(15),e.cooldowns.set(new Le("cd_EMERGENCY_TACTICS",1,1,1)),e.addEvent(new Ne("restore etact cd",e.getStatusDuration("SERAPHISM"),()=>e.cooldowns.set(n))),e.addHoTPotencies({node:t,skillName:"SERAPHISM",effectName:"SERAPHISM_REGEN",speedStat:"sps",tickPotency:100},24.96)},onApplication:(e,t)=>{e.applyHoT("SERAPHISM_REGEN",t,24.96),e.gainStatus("SERAPHISM_REGEN")}});mn("MANIFESTATION",100,{startOnHotbar:!1,replaceIf:Eb,applicationDelay:1.16,healingPotency:360,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>{e.tryConsumeResource("EMERGENCY_TACTICS")||(e.gainStatus("GALVANIZE"),e.triggersEffect(e.config.critRate)&&e.gainStatus("CATALYZE"))}});mn("ACCESSION",100,{startOnHotbar:!1,replaceIf:fb,applicationDelay:.98,healingPotency:240,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>!e.tryConsumeResource("EMERGENCY_TACTICS")&&e.gainStatus("GALVANIZE")});Object.keys(kR).forEach(e=>Gt(e,`WHM/${xe[e].name}.png`));const mb=["AERO_II","DIA"],JG=Object.keys(kR).filter(e=>!mb.includes(e));class $G extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[...mb.map(t=>this.makeCommonTimer(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...JG.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("LILLIES"),l=n.get("LILY_TIMER").available(1)?n.timeTillReady("LILY_TIMER"):20,r=o.availableAmount(),d=n.get("BLOOD_LILY").availableAmount(),E=[{kind:"bar",name:ze("LILY_TIMER"),color:t.whm.lily,progress:1-l/20,valueString:l.toFixed(3)},{kind:"counter",name:ze("LILLIES"),color:t.whm.lily,currentStacks:r,maxStacks:3}];return this.state.hasTraitUnlocked("TRANSCENDENT_AFFLATUS")&&E.push({kind:"counter",name:ze("BLOOD_LILY"),color:t.whm.blood,currentStacks:d,maxStacks:3}),E}}const fa=(e,t,n)=>{je("WHM",e,t,n??{})};fa("LILLIES",3,{default:3});fa("LILY_TIMER",1);fa("BLOOD_LILY",3,{default:3,warnOnOvercap:!0});fa("FREECURE",1,{timeout:15});fa("PRESENCE_OF_MIND",1,{timeout:15});fa("SACRED_SIGHT",3,{timeout:30,warnOnTimeout:!0});fa("REGEN",1,{timeout:18});fa("AERO_II",1,{timeout:30});fa("MEDICA_II",1,{timeout:15});fa("ASYLUM",1,{timeout:24});fa("THIN_AIR",1,{timeout:12});fa("DIVINE_BENISON",1,{timeout:15});fa("CONFESSION",1,{timeout:10});fa("DIA",1,{timeout:30});fa("TEMPERANCE",1,{timeout:20});fa("DIVINE_GRACE",1,{timeout:30});fa("AQUAVEIL",1,{timeout:8});fa("LITURGY_OF_THE_BELL",5,{timeout:20});fa("MEDICA_III",1,{timeout:15});fa("DIVINE_CARESS",1,{timeout:10});fa("DIVINE_AURA",1,{timeout:15});class eB extends Kt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_DIVINE_BENISON")?2:1,o=this.hasTraitUnlocked("ENHANCED_TETRAGRAMMATON")?2:1;this.cooldowns.set(new Le("cd_DIVINE_BENISON",30,n,n)),this.cooldowns.set(new Le("cd_TETRAGRAMMATON",60,o,o)),this.cooldowns.set(new Le("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:g({en:"Dia/Aero DoT",zh:"/DoT"}),groupedEffects:[{effectName:"AERO_II",appliedBy:["AERO_II"]},{effectName:"DIA",appliedBy:["DIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"DIVINE_AURA",appliedBy:["DIVINE_CARESS"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASYLUM",appliedBy:["ASYLUM"]}]},{isHealing:!0,groupedEffects:[{effectName:"REGEN",appliedBy:["REGEN"]}]},{isHealing:!0,groupedEffects:[{effectName:"MEDICA_II",appliedBy:["MEDICA_II"]},{effectName:"MEDICA_III",appliedBy:["MEDICA_III"]}]}])}jobSpecificRegisterRecurringEvents(){(this.isInCombat()||this.hasResourceAvailable("LILY_TIMER"))&&!this.hasResourceAvailable("LILLIES",3)&&this.startLilyTimer()}jobSpecificAddHealingBuffCovers(t,n){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.addBuff(k.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.addBuff(k.Temperance),n.cdName==="cd_GCD"&&n.aoeHeal&&this.hasResourceAvailable("CONFESSION")&&t.addBuff(k.Confession)}recurringLilyGain(){this.resources.addResourceEvent({rscType:"LILY_TIMER",name:"gain lily",delay:20,fnOnRsc:()=>{this.resources.get("LILLIES").gain(1),this.hasResourceAvailable("LILLIES",3)?this.tryConsumeResource("LILY_TIMER"):this.recurringLilyGain()}})}startLilyTimer(){this.hasResourceAvailable("LILY_TIMER")||this.hasResourceAvailable("LILLIES",3)||(this.resources.get("LILY_TIMER").gain(1),this.recurringLilyGain())}addHealingActionPotencyModifiers(t){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.push(q.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.push(q.Temperance)}get statusPropsGenerator(){return new $G(this)}}const Oa=(e,t,n)=>{const o=l=>{if(!n.healingPotency)return[];const r=[];return l.hasResourceAvailable("CONFESSION")&&n.aoeHeal&&r.push(q.Confession),l.addHealingActionPotencyModifiers(r),r};return Bn("WHM",e,t,{...n,castTime:l=>l.config.adjustedCastTime(n.baseCastTime??0,l.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),recastTime:l=>l.config.adjustedGCD(2.5,l.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),isInstantFn:l=>!n.baseCastTime||l.hasResourceAvailable("SWIFTCAST"),manaCost:n.manaCost?l=>l.hasResourceAvailable("THIN_AIR")?0:ln(n.manaCost)(l):void 0,jobHealingPotencyModifiers:o,onConfirm:Me(l=>l.tryConsumeResource("THIN_AIR"),n.baseCastTime?l=>l.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm),onApplication:Me(n.potency||e=="AFFLATUS_SOLACE"||e=="AFFLATUS_RAPTURE"?l=>l.startLilyTimer():void 0,n.onApplication)})},Es=(e,t,n,o)=>et("WHM",e,t,n,{...o,jobHealingPotencyModifiers:r=>{if(!o.healingPotency)return[];const d=[];return o.isPetHeal&&d.push(q.WhmPet),r.addHealingActionPotencyModifiers(d),d}}),Tl=(e,t,n,o)=>we("WHM",e,t,n,{...o,jobHealingPotencyModifiers:r=>{if(!o.healingPotency)return[];const d=[];return r.addHealingActionPotencyModifiers(d),d}});Oa("STONE_IV",64,{autoUpgrade:{otherSkill:"GLARE",trait:"STONE_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,potency:260,manaCost:400});Oa("GLARE",72,{autoDowngrade:{otherSkill:"STONE_IV",trait:"STONE_MASTERY_IV"},autoUpgrade:{otherSkill:"GLARE_III",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:290,manaCost:400});Oa("GLARE_III",82,{autoDowngrade:{otherSkill:"GLARE",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:[["NEVER",310],["WHITE_MAGIC_MASTERY",350]],manaCost:400});Oa("AERO_II",46,{autoUpgrade:{otherSkill:"DIA",trait:"AERO_MASTERY_II"},applicationDelay:1.15,potency:50,manaCost:200,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"AERO_II",skillName:"AERO_II",tickPotency:50,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("AERO_II",t)});Oa("DIA",72,{autoDowngrade:{otherSkill:"AERO_II",trait:"AERO_MASTERY_II"},applicationDelay:1.29,potency:[["NEVER",65],["WHITE_MAGIC_MASTERY",85]],manaCost:400,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"DIA",skillName:"DIA",tickPotency:e.hasTraitUnlocked("WHITE_MAGIC_MASTERY")?85:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("DIA",t)});Oa("HOLY",45,{autoUpgrade:{otherSkill:"HOLY_III",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:140,baseCastTime:1.5,falloff:0,manaCost:400});Oa("HOLY_III",82,{autoDowngrade:{otherSkill:"HOLY",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:150,baseCastTime:1.5,falloff:0,manaCost:400});Oa("AFFLATUS_MISERY",74,{applicationDelay:.58,potency:[["NEVER",1240],["WHITE_MAGIC_MASTERY",1400]],falloff:.5,manaCost:0,highlightIf:e=>e.hasResourceExactly("BLOOD_LILY",3),validateAttempt:e=>e.hasResourceExactly("BLOOD_LILY",3),onConfirm:e=>e.tryConsumeResource("BLOOD_LILY",!0)});Oa("AFFLATUS_SOLACE",52,{applicationDelay:.53,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});Oa("AFFLATUS_RAPTURE",76,{applicationDelay:.58,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],manaCost:0,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});Oa("REGEN",35,{applicationDelay:1.02,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"REGEN",effectName:"REGEN",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200})},onApplication:(e,t)=>{e.applyHoT("REGEN",t),e.gainStatus("REGEN")}});Oa("CURE",2,{applicationDelay:1.03,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],baseCastTime:1.5,manaCost:400,onConfirm:e=>e.maybeGainProc("FREECURE",.15)});Oa("CURE_II",30,{applicationDelay:.98,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],baseCastTime:2,manaCost:e=>e.hasResourceAvailable("FREECURE")?0:1e3,highlightIf:e=>e.hasResourceAvailable("FREECURE"),onConfirm:e=>e.tryConsumeResource("FREECURE")});Oa("CURE_III",40,{applicationDelay:.98,healingPotency:[["NEVER",550],["ENHANCED_HEALING_MAGIC",600]],baseCastTime:2,manaCost:1500,aoeHeal:!0});Oa("MEDICA",10,{applicationDelay:1.02,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],baseCastTime:2,manaCost:900,aoeHeal:!0});Oa("MEDICA_II",50,{autoUpgrade:{otherSkill:"MEDICA_III",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_II",effectName:"MEDICA_II",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100})},onApplication:(e,t)=>{e.applyHoT("MEDICA_II",t),e.gainStatus("MEDICA_II")}});Oa("MEDICA_III",96,{autoDowngrade:{otherSkill:"MEDICA_II",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:250,baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_III",effectName:"MEDICA_III",speedStat:"sps",tickPotency:175})},onApplication:(e,t)=>{e.applyHoT("MEDICA_III",t),e.gainStatus("MEDICA_III")}});Oa("RAISE",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.16});Es("ASSIZE",56,"cd_ASSIZE",{applicationDelay:.67,cooldown:40,potency:400,falloff:0,healingPotency:400,onApplication:e=>e.resources.get("MANA").gain(500)});Tl("PRESENCE_OF_MIND",30,"cd_PRESENCE_OF_MIND",{rscType:"PRESENCE_OF_MIND",applicationDelay:.53,cooldown:120,replaceIf:[{newSkill:"GLARE_IV",condition:e=>e.hasResourceAvailable("SACRED_SIGHT")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_PRESENCE_OF_MIND")&&e.gainStatus("SACRED_SIGHT",3)}});Oa("GLARE_IV",92,{startOnHotbar:!1,applicationDelay:.85,potency:640,falloff:.4,manaCost:0,highlightIf:e=>e.hasResourceAvailable("SACRED_SIGHT"),validateAttempt:e=>e.hasResourceAvailable("SACRED_SIGHT"),onConfirm:e=>e.tryConsumeResource("SACRED_SIGHT")});Tl("THIN_AIR",58,"cd_THIN_AIR",{rscType:"THIN_AIR",applicationDelay:0,cooldown:60,maxCharges:2});Es("AETHERIAL_SHIFT",40,"cd_AETHERIAL_SHIFT",{applicationDelay:0,cooldown:60,animationLock:jt});Tl("DIVINE_BENISON",66,"cd_DIVINE_BENISON",{rscType:"DIVINE_BENISON",applicationDelay:.8,cooldown:30,maxCharges:2});Tl("AQUAVEIL",86,"cd_AQUAVEIL",{rscType:"AQUAVEIL",applicationDelay:.62,cooldown:60});Es("TETRAGRAMMATON",60,"cd_TETRAGRAMMATON",{applicationDelay:.53,cooldown:60,maxCharges:2,healingPotency:700});Es("BENEDICTION",50,"cd_BENEDICTION",{applicationDelay:.62,cooldown:180});Es("ASYLUM",52,"cd_ASYLUM",{applicationDelay:.85,cooldown:90,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASYLUM",effectName:"ASYLUM",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("ASYLUM")});Tl("PLENARY_INDULGENCE",70,"cd_PLENARY_INDULGENCE",{rscType:"CONFESSION",applicationDelay:.8,cooldown:60});Tl("TEMPERANCE",80,"cd_TEMPERANCE",{rscType:"TEMPERANCE",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"DIVINE_CARESS",condition:e=>e.hasResourceAvailable("DIVINE_GRACE")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEMPERANCE")&&e.gainStatus("DIVINE_GRACE")}});Tl("LITURGY_OF_THE_BELL",90,"cd_LITURGY_OF_THE_BELL",{rscType:"LITURGY_OF_THE_BELL",applicationDelay:0,cooldown:180,replaceIf:[{newSkill:"LITURGY_POP",condition:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL")}]});Es("LITURGY_TRIGGER",90,"cd_LITURGY_TRIGGER",{applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:425,animationLock:un,validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL")});Es("LITURGY_POP",90,"cd_LITURGY_POP",{startOnHotbar:!1,applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:e=>212*e.resources.get("LITURGY_OF_THE_BELL").availableAmount(),validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL",!0)});Tl("DIVINE_CARESS",100,"cd_DIVINE_CARESS",{startOnHotbar:!1,rscType:"DIVINE_CARESS",applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DIVINE_GRACE"),highlightIf:e=>e.hasResourceAvailable("DIVINE_GRACE"),onConfirm:e=>e.tryConsumeResource("DIVINE_GRACE"),onApplication:e=>{e.resources.addResourceEvent({rscType:"DIVINE_CARESS",name:"trigger divine aura on divine caress expiry",delay:10,fnOnRsc:()=>e.gainStatus("DIVINE_AURA")})}});Object.keys(NR).forEach(e=>Gt(e,`NIN/${xe[e].name}.png`));const Rb=["DOKUMORI","TRICK_ATTACK","KUNAIS_BANE"],tB=Object.keys(NR).filter(e=>!Rb.includes(e));class aB extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[...Rb.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return tB.map(t=>t==="HIDDEN"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("NIN_COMBO_TRACKER"),l=n.get("NIN_AOE_COMBO_TRACKER"),r=n.get("KAZEMATOI").availableAmount(),d=n.get("NINKI").availableAmount(),E=o.available(1)?o.pendingChange?.timeTillEvent:l.available(1)?l.pendingChange?.timeTillEvent:void 0;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.nin.ninComboTimer,progress:E?E/30:0,valueString:E?.toFixed(3)??"N/A"},{kind:"counter",name:ze("KAZEMATOI"),color:t.nin.kazematoi,currentStacks:r,maxStacks:5},{kind:"bar",name:ze("NINKI"),color:t.nin.ninki,progress:d/100,valueString:d.toFixed(0)}]}}const la=(e,t,n)=>{je("NIN",e,t,n??{})};la("KAZEMATOI",5,{warnOnOvercap:!0});la("NINKI",100,{warnOnOvercap:!0});la("SHADE_SHIFT",1,{timeout:20});la("MUDRA",1,{timeout:6});la("HIDDEN",1);la("TRICK_ATTACK",1,{timeout:15.77});la("KASSATSU",1,{timeout:15,warnOnTimeout:!0});la("DOKUMORI",1,{timeout:21});la("TENRI_JINDO_READY",1,{timeout:30,warnOnTimeout:!0});la("TEN_CHI_JIN",1,{timeout:6});la("MEISUI",1,{timeout:30});la("SHADOW_WALKER",1,{timeout:20});la("BUNSHIN",5,{timeout:30,warnOnTimeout:!0});la("PHANTOM_KAMAITACHI_READY",1,{timeout:45,warnOnTimeout:!0});la("RAIJU_READY",3,{timeout:30,warnOnTimeout:!0});la("KUNAIS_BANE",1,{timeout:16.25});la("HIGI",1,{timeout:30});la("DOTON",1,{timeout:18});la("NIN_COMBO_TRACKER",2,{timeout:30});la("NIN_AOE_COMBO_TRACKER",1,{timeout:30});la("MUDRA_TRACKER",1e4);la("BUNNY",1);const nB=["SPINNING_EDGE","GUST_SLASH","AEOLIAN_EDGE","ARMOR_CRUSH","THROWING_DAGGER","DEATH_BLOSSOM","HAKKE_MUJINSATSU","FORKED_RAIJU","FLEETING_RAIJU"];class iB extends Kt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SHUKUCHI_II")?2:1;this.cooldowns.set(new Le("cd_SHUKUCHI",60,n,n)),this.registerRecurringEvents([{groupedEffects:[{effectName:"DOTON",appliedBy:["DOTON","DOTON_CHI"],isGroundTargeted:!0}]}])}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("DOKUMORI")&&t.addBuff(k.Dokumori),this.hasResourceAvailable("TRICK_ATTACK")&&t.addBuff(k.TrickAttack),this.hasResourceAvailable("KUNAIS_BANE")&&t.addBuff(k.KunaisBane),this.hasResourceAvailable("BUNSHIN")&&nB.includes(n.name)&&t.addBuff(k.Bunshin)}inherentSpeedModifier(){return 15}get statusPropsGenerator(){return new aB(this)}stackRaijuReady(){this.resources.get("RAIJU_READY").gain(1),this.enqueueResourceDrop("RAIJU_READY")}gainNinki(t){this.resources.get("NINKI").gain(t)}processComboStatus(t){if(["THROWING_DAGGER","FORKED_RAIJU","FLEETING_RAIJU","PHANTOM_KAMAITACHI"].includes(t))return;let n=[this.resources.get("NIN_COMBO_TRACKER").availableAmount(),this.resources.get("NIN_AOE_COMBO_TRACKER").availableAmount()];t==="SPINNING_EDGE"?n=[1,0]:t==="GUST_SLASH"&&n[0]===1?n=[2,0]:t==="DEATH_BLOSSOM"?n=[0,1]:n=[0,0],this.setComboState("NIN_COMBO_TRACKER",n[0]),this.setComboState("NIN_AOE_COMBO_TRACKER",n[1])}parseMudraTracker(){if(this.hasResourceAvailable("BUNNY"))return;const t=this.resources.get("MUDRA_TRACKER").availableAmount();if(t===0)return[];if(t<10)return console.assert(t<4,`mudra tracker value ${t} was invalid`),[t];if(t<100)return console.assert(t%10!==0,`mudra tracker value ${t} was invalid`),[Math.floor(t/10),t%10];if(t<1e3)return[Math.floor(t/100),Math.floor(t/10)%10,t%10]}isMudraTrackerIn(t){const n=this.parseMudraTracker();return n!==void 0&&t.some(o=>n.length===o.length&&n.every((l,r)=>o[r]===l))}clearMudraInfo(){this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)}pushMudra(t,n){const o=this.resources.get("MUDRA_TRACKER"),l=o.availableAmount();if(l===0&&!n&&(console.assert(this.resources.get("MUDRA_TRACKER").availableAmount()===0),console.assert(this.resources.get("BUNNY").availableAmount()===0),this.gainStatus("MUDRA"),this.resources.get("MUDRA").removeTimer(),this.resources.addResourceEvent({rscType:"MUDRA",name:"clear mudra tracker/bunny",delay:wt("NIN","MUDRA").maxTimeout,fnOnRsc:()=>this.clearMudraInfo()})),l>1e3)return;const r=l*10+t;o.overrideCurrentValue(r),n&&r>100&&(this.tryConsumeResource("TEN_CHI_JIN"),this.clearMudraInfo())}}const tN=e=>!e.hasResourceAvailable("TEN_CHI_JIN"),DT=e=>{e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")},yT=e=>e===void 0?tN:t=>tN(t)&&e(t),Yr=(e,t)=>{e.hasResourceAvailable("DOKUMORI")&&t.push(q.Dokumori),e.hasResourceAvailable("TRICK_ATTACK")&&t.push(q.TrickAttack),e.hasResourceAvailable("KUNAIS_BANE")&&t.push(q.KunaisBane)},Vi=(e,t,n)=>$t("NIN",e,t,{...n,recastTime:o=>o.config.adjustedSksGCD(2.5,o.inherentSpeedModifier()),validateAttempt:yT(n.validateAttempt),onConfirm:Me(DT,(o,l)=>n.onConfirm?.(o,l),o=>{e!=="PHANTOM_KAMAITACHI"&&o.tryConsumeResource("BUNSHIN")&&o.gainNinki(5)},["THROWING_DAGGER","PHANTOM_KAMAITACHI","FORKED_RAIJU","FLEETING_RAIJU"].includes(e)?void 0:o=>o.tryConsumeResource("RAIJU_READY",!0)&&p.reportWarning({kind:"overwrite",rsc:"RAIJU_READY"}),o=>o.processComboStatus(e)),jobPotencyModifiers:o=>{const l=n.jobPotencyModifiers?.(o)??[];return o.hasResourceAvailable("BUNSHIN")&&e!=="PHANTOM_KAMAITACHI"&&(e==="DEATH_BLOSSOM"||e==="HAKKE_MUJINSATSU"?l.push(q.BunshinAOE):l.push(q.BunshinST)),Yr(o,l),l}}),Wi=(e,t,n,o)=>et("NIN",e,t,n,{...o,validateAttempt:yT(o.validateAttempt),onConfirm:Me(DT,(l,r)=>o.onConfirm?.(l,r)),jobPotencyModifiers:l=>{const r=o.jobPotencyModifiers?.(l)??[];return Yr(l,r),r}}),_u=(e,t,n,o)=>we("NIN",e,t,n,{...o,validateAttempt:yT(o.validateAttempt),onConfirm:Me(DT,(l,r)=>o.onConfirm?.(l,r))});Vi("THROWING_DAGGER",15,{applicationDelay:.62,potency:[["NEVER",120],["MELEE_MASTERY_II_NIN",200]],onConfirm:e=>e.gainNinki(5)});Vi("SPINNING_EDGE",1,{applicationDelay:.4,potency:[["NEVER",180],["MELEE_MASTERY_II_NIN",220],["MELEE_MASTERY_III_NIN",300]],onConfirm:e=>e.gainNinki(5)});Vi("GUST_SLASH",4,{applicationDelay:.4,potency:[["NEVER",100],["MELEE_MASTERY_NIN",120],["MELEE_MASTERY_II_NIN",160],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_NIN",280],["MELEE_MASTERY_II_NIN",320],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1)&&e.gainNinki(5)});const Tb=e=>e.gainNinki(e.hasTraitUnlocked("SHUKIHO_III")?15:e.hasTraitUnlocked("SHUKIHO_II")?10:5);Vi("AEOLIAN_EDGE",26,{applicationDelay:.54,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",220]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",280]],comboPotency:[["NEVER",400],["MELEE_MASTERY_III_NIN",460]],location:"rear"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:Tb,jobPotencyModifiers:e=>e.tryConsumeResource("KAZEMATOI")?[q.Kazematoi]:[]});Vi("ARMOR_CRUSH",54,{applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_NIN",360],["MELEE_MASTERY_III_NIN",440]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",300]],comboPotency:[["NEVER",380],["MELEE_MASTERY_NIN",420],["MELEE_MASTERY_III_NIN",500]],location:"flank"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:Me(e=>{e.hasResourceExactly("NIN_COMBO_TRACKER",2)&&e.resources.get("KAZEMATOI").gain(2)},Tb)});Vi("DEATH_BLOSSOM",38,{applicationDelay:.71,potency:100,falloff:0,onConfirm:e=>e.gainNinki(5)});Vi("HAKKE_MUJINSATSU",52,{applicationDelay:.62,potency:100,combo:{potency:120,resource:"NIN_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.gainNinki(5),jobPotencyModifiers:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.hasResourceAvailable("DOTON")?[q.HollowNozuchi]:[]});const _r=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[]]),Sb=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[2],[3]]),Ib=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[3]]),_b=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[2]]),gb=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[3,2],[2,3]]),pb=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,3],[3,1]]),Nb=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,2],[2,1]]),Cb=[{newSkill:"TEN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_TEN",condition:_r},{newSkill:"KATON_TEN",condition:Sb},{newSkill:"HUTON_TEN",condition:gb}],vT=[{newSkill:"CHI",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_CHI",condition:_r},{newSkill:"RAITON_CHI",condition:Ib},{newSkill:"DOTON_CHI",condition:pb}],Ob=[{newSkill:"JIN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_JIN",condition:_r},{newSkill:"HYOTON_JIN",condition:_b},{newSkill:"SUITON_JIN",condition:Nb}],bb=[["FUMA_SHURIKEN",30,.89,[["NEVER",450],["MELEE_MASTERY_III_NIN",500]],void 0],["KATON",35,.94,350,0],["RAITON",35,.71,[["NEVER",650],["MELEE_MASTERY_III_NIN",740]],void 0],["HYOTON",45,1.16,350,void 0],["HUTON",45,.98,240,0],["SUITON",45,.98,[["NEVER",500],["MELEE_MASTERY_III_NIN",580]],void 0],["GOKA_MEKKYAKU",76,.76,850,0],["HYOSHO_RANRYU",76,.62,1300,void 0]],oB=new Map(bb.map(([e,t,n,o,l])=>[e,[t,n,o,l]])),lB=[["FUMA_SHURIKEN_TEN",_r],["FUMA_SHURIKEN_CHI",_r],["FUMA_SHURIKEN_JIN",_r],["KATON_TEN",Sb],["RAITON_CHI",Ib],["HYOTON_JIN",_b],["HUTON_TEN",gb],["SUITON_JIN",Nb]];lB.forEach(([e,t])=>{const[,n,o,l]=oB.get(e.substring(0,e.length-4)),r=e.substring(e.length-3);$t("NIN",e,70,{startOnHotbar:!1,applicationDelay:n,recastTime:e==="HUTON_TEN"||e==="SUITON_JIN"?1.5:1,potency:o,falloff:l,replaceIf:r==="TEN"?Cb:r==="CHI"?vT:Ob,validateAttempt:t,jobPotencyModifiers:E=>{const h=[];return Yr(E,h),e==="KATON"&&E.hasResourceAvailable("DOTON")&&h.push(q.HollowNozuchi),h},onConfirm:Me(E=>E.pushMudra(r==="TEN"?1:r==="CHI"?2:3,!0),e==="RAITON_CHI"?E=>E.stackRaijuReady():e==="SUITON_JIN"||e==="HUTON_TEN"?E=>E.gainStatus("SHADOW_WALKER"):void 0)})});const Db=(e,t)=>{e.applyDoT("DOTON",t),e.gainStatus("DOTON")};$t("NIN","DOTON_CHI",70,{startOnHotbar:!1,recastTime:1.5,replaceIf:vT,falloff:0,validateAttempt:pb,jobPotencyModifiers:e=>{const t=[];return Yr(e,t),t},onConfirm:Me((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.pushMudra(2,!0)),onApplication:Db});[["TEN",30,Cb],["CHI",35,vT],["JIN",45,Ob]].forEach(([e,t,n],o)=>{$t("NIN",e,t,{recastTime:.5,animationLock:.5,replaceIf:n,secondaryCooldown:{cdName:"cd_MUDRA",cooldown:20,maxCharges:2},jobPotencyModifiers:l=>{const r=[];return Yr(l,r),r},validateAttempt:l=>!l.hasResourceAvailable("TEN_CHI_JIN"),onConfirm:l=>l.pushMudra(o+1,!1)})});const sB=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[2,1],[3,1]]),rB=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[1,3],[2,3]]),cB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1],[2],[3]]),uB=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[2,1],[3,1]]),dB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2],[3,2]]),hB=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3],[2,3]]),EB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[3,2,1],[2,3,1]]),fB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3,2],[3,1,2]]),AB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2,3],[2,1,3]]),mB=e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||!e.isMudraTrackerIn([[1],[2],[3],[2,1],[3,1],[1,2],[3,2],[1,3],[2,3],[3,2,1],[2,3,1],[1,3,2],[3,1,2],[1,2,3],[2,1,3]])),DE=[{newSkill:"GOKA_MEKKYAKU",condition:sB},{newSkill:"HYOSHO_RANRYU",condition:rB},{newSkill:"FUMA_SHURIKEN",condition:cB},{newSkill:"KATON",condition:uB},{newSkill:"RAITON",condition:dB},{newSkill:"HYOTON",condition:hB},{newSkill:"HUTON",condition:EB},{newSkill:"DOTON",condition:fB},{newSkill:"SUITON",condition:AB},{newSkill:"RABBIT_MEDIUM",condition:e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||mB(e))},{newSkill:"NINJUTSU",condition:e=>!e.hasResourceAvailable("MUDRA")}],yE=e=>DE.filter(t=>t.newSkill!==e);$t("NIN","NINJUTSU",30,{recastTime:1.5,validateAttempt:e=>!1,replaceIf:yE("NINJUTSU")});$t("NIN","RABBIT_MEDIUM",30,{startOnHotbar:!1,recastTime:1.5,replaceIf:yE("RABBIT_MEDIUM"),validateAttempt:DE.find(e=>e.newSkill==="RABBIT_MEDIUM").condition,onConfirm:e=>e.clearMudraInfo()});bb.forEach(([e,t,n,o,l])=>{$t("NIN",e,t,{startOnHotbar:!1,applicationDelay:n,recastTime:r=>r.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:o,falloff:l,replaceIf:yE(e),validateAttempt:DE.find(r=>r.newSkill===e).condition,onConfirm:Me(["KATON","RAITON","HYOTON"].includes(e)?r=>{r.cooldowns.get("cd_SHUKUCHI").timeTillNextStackAvailable()!==0&&r.cooldowns.get("cd_SHUKUCHI").restore(60)}:void 0,e==="RAITON"?r=>r.stackRaijuReady():e==="SUITON"||e==="HUTON"?r=>r.gainStatus("SHADOW_WALKER"):void 0,r=>r.clearMudraInfo()),jobPotencyModifiers:r=>{const d=[];return r.hasResourceAvailable("KASSATSU")&&d.push(q.Kassatsu),r.hasResourceAvailable("DOTON")&&["KATON","GOKA_MEKKYAKU"].includes(e)&&d.push(q.HollowNozuchi),Yr(r,d),d}})});$t("NIN","DOTON",45,{startOnHotbar:!1,recastTime:e=>e.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:0,falloff:0,replaceIf:yE("DOTON"),validateAttempt:DE.find(e=>e.newSkill==="DOTON").condition,onConfirm:Me((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.clearMudraInfo()),onApplication:Db});const Vh=e=>e.hasResourceAvailable("RAIJU_READY"),yb=[["NEVER",560],["MELEE_MASTERY_III_NIN",700]];Vi("FORKED_RAIJU",90,{applicationDelay:.62,potency:yb,animationLock:jt,highlightIf:Vh,validateAttempt:Vh,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});Vi("FLEETING_RAIJU",90,{applicationDelay:.76,potency:yb,highlightIf:Vh,validateAttempt:Vh,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});Wi("DOKUMORI",66,"cd_DOKUMORI",{applicationDelay:1.07,potency:400,falloff:0,cooldown:120,onConfirm:e=>{e.gainStatus("DOKUMORI"),e.gainNinki(40),e.hasTraitUnlocked("ENHANCED_DOKUMORI")&&e.gainStatus("HIGI")}});const Wh=e=>e.hasResourceAvailable("HIDDEN")||e.hasResourceAvailable("SHADOW_WALKER");Wi("TRICK_ATTACK",18,"cd_TRICK_ATTACK",{autoUpgrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"KUNAIS_BANE"},applicationDelay:.8,potency:300,positional:{potency:400,location:"rear"},cooldown:60,highlightIf:Wh,validateAttempt:Wh,onConfirm:e=>{e.gainStatus("TRICK_ATTACK"),e.tryConsumeResource("SHADOW_WALKER")}});Wi("KUNAIS_BANE",92,"cd_TRICK_ATTACK",{autoDowngrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"TRICK_ATTACK"},startOnHotbar:!1,applicationDelay:1.29,cooldown:60,potency:700,falloff:0,highlightIf:Wh,validateAttempt:Wh,onConfirm:e=>{e.gainStatus("KUNAIS_BANE"),e.tryConsumeResource("SHADOW_WALKER")}});Wi("DREAM_WITHIN_A_DREAM",56,"cd_DREAM_WITHIN_A_DREAM",{applicationDelay:.98,cooldown:60,potency:180*3});_u("KASSATSU",50,"cd_KASSATSU",{rscType:"KASSATSU",cooldown:60,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("TEN_CHI_JIN")});const zi=e=>e.resources.get("NINKI").available(50),gu=e=>e.resources.get("NINKI").consume(50);Wi("BHAVACAKRA",68,"cd_BHAVACAKRA",{applicationDelay:.62,cooldown:1,potency:[["NEVER",350],["MELEE_MASTERY_III_NIN",400]],highlightIf:zi,validateAttempt:zi,replaceIf:[{newSkill:"ZESHO_MEPPO",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:Me(gu,e=>e.tryConsumeResource("MEISUI")),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[q.Meisui]:[]});Wi("ZESHO_MEPPO",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:1.03,cooldown:1,potency:700,highlightIf:e=>e.hasResourceAvailable("HIGI")&&zi(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&zi(e),replaceIf:[{newSkill:"BHAVACAKRA",condition:e=>!e.hasResourceAvailable("HIGI")}],onConfirm:Me(gu,e=>{e.tryConsumeResource("MEISUI"),e.tryConsumeResource("HIGI")}),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[q.Meisui]:[]});Wi("HELLFROG_MEDIUM",62,"cd_BHAVACAKRA",{applicationDelay:.8,cooldown:1,potency:250,falloff:0,highlightIf:zi,validateAttempt:zi,replaceIf:[{newSkill:"DEATHFROG_MEDIUM",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:gu});Wi("DEATHFROG_MEDIUM",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:400,falloff:0,highlightIf:e=>e.hasResourceAvailable("HIGI")&&zi(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&zi(e),onConfirm:Me(gu,e=>e.tryConsumeResource("HIGI"))});_u("MEISUI",72,"cd_MEISUI",{rscType:"MEISUI",cooldown:120,applicationDelay:0,highlightIf:e=>e.hasResourceAvailable("SHADOW_WALKER"),validateAttempt:e=>e.hasResourceAvailable("SHADOW_WALKER"),onConfirm:e=>{e.tryConsumeResource("SHADOW_WALKER"),e.gainNinki(50)}});_u("BUNSHIN",80,"cd_BUNSHIN",{rscType:"BUNSHIN",cooldown:90,applicationDelay:0,replaceIf:[{newSkill:"PHANTOM_KAMAITACHI",condition:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY")}],highlightIf:zi,validateAttempt:zi,onConfirm:Me(gu,e=>e.gainStatus("PHANTOM_KAMAITACHI_READY"))});Vi("PHANTOM_KAMAITACHI",80,{startOnHotbar:!1,potency:700,falloff:0,applicationDelay:1.57,highlightIf:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),validateAttempt:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),onConfirm:e=>{e.tryConsumeResource("PHANTOM_KAMAITACHI_READY"),e.gainNinki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("DOTON")?[q.HollowNozuchi,q.NinPet]:[q.NinPet]});_u("TEN_CHI_JIN",70,"cd_TEN_CHI_JIN",{rscType:"TEN_CHI_JIN",applicationDelay:0,cooldown:120,replaceIf:[{newSkill:"TENRI_JINDO",condition:e=>e.hasResourceAvailable("TENRI_JINDO_READY")}],validateAttempt:e=>!e.hasResourceAvailable("KASSATSU"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEN_CHI_JIN")&&e.gainStatus("TENRI_JINDO_READY"),e.clearMudraInfo()}});Wi("TENRI_JINDO",100,"cd_TENRI_JINDO",{startOnHotbar:!1,applicationDelay:1.69,cooldown:1,potency:1100,falloff:0,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("TENRI_JINDO_READY"),onConfirm:e=>e.tryConsumeResource("TENRI_JINDO_READY")});Wi("SHUKUCHI",40,"cd_SHUKUCHI",{applicationDelay:0,cooldown:60,maxCharges:2,animationLock:jt});_u("SHADE_SHIFT",2,"cd_SHADE_SHIFT",{rscType:"SHADE_SHIFT",applicationDelay:.4,cooldown:120});Object.keys(pR).forEach(e=>Gt(e,`MNK/${LN[e].name}.png`));function RB(e){switch(e){case 1:return"opo";case 2:return"raptor";case 3:return"coeurl"}return null}function TB(e){switch(e){case"opo":return g({en:"o",zh:""});case"raptor":return g({en:"r",zh:""});case"coeurl":return g({en:"c",zh:""})}return null}function aN(e){switch(e){case"lunar":return g({en:e,zh:""});case"solar":return g({en:e,zh:""})}return null}class SB extends Yt{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(pR).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"].map(A=>n.get(A).availableAmount()).map(RB),l=n.get("LUNAR_NADI").available(1),r=n.get("SOLAR_NADI").available(1),d=o.map(TB).filter(A=>A!==null).join("+"),E=[aN(l?"lunar":null),aN(r?"solar":null)].filter(A=>A!==null).join("+");return[{kind:"counter",name:ze("OPO_OPOS_FURY"),color:t.mnk.opo,currentStacks:n.get("OPO_OPOS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:ze("RAPTORS_FURY"),color:t.mnk.raptor,currentStacks:n.get("RAPTORS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:ze("COEURLS_FURY"),color:t.mnk.coeurl,currentStacks:n.get("COEURLS_FURY").availableAmount(),maxStacks:2},{kind:"chakra",name:ze("CHAKRA"),regularColor:t.mnk.chakra,overflowColor:t.mnk.extraChakra,value:n.get("CHAKRA").availableAmount(),wrapCount:5},{kind:"text",name:ze("BEAST_CHAKRA_TIMER"),text:o.every(A=>A!==null)?n.get("BEAST_CHAKRA_1").pendingChange?.timeTillEvent.toFixed(3):"n/a"},{kind:"beast",name:ze("BEAST_CHAKRA"),label:d,chakras:o,opoColor:t.mnk.opo,raptorColor:t.mnk.raptor,coeurlColor:t.mnk.coeurl},{kind:"nadi",name:ze("NADI"),label:E,lunar:l,solar:r,lunarColor:t.mnk.lunar,solarColor:t.mnk.solar}]}}const yt=(e,t,n)=>{je("MNK",e,t,n??{})};yt("CHAKRA",5,{default:5});yt("BEAST_CHAKRA",1);yt("NADI",1);yt("OPO_OPOS_FURY",1,{warnOnOvercap:!0});yt("RAPTORS_FURY",1,{warnOnOvercap:!0});yt("COEURLS_FURY",2,{warnOnOvercap:!0});yt("MANTRA",1,{timeout:15});yt("OPO_OPO_FORM",1,{timeout:30});yt("RAPTOR_FORM",1,{timeout:30});yt("COEURL_FORM",1,{timeout:30});yt("PERFECT_BALANCE",3,{timeout:20});yt("FORMLESS_FIST",1,{timeout:30,default:1});yt("RIDDLE_OF_EARTH",1,{timeout:10});yt("EARTHS_RESOLVE",1,{timeout:15});yt("EARTHS_RUMINATION",1,{timeout:30});yt("RIDDLE_OF_FIRE",1,{timeout:20.72});yt("FIRES_RUMINATION",1,{timeout:20,warnOnTimeout:!0});yt("BROTHERHOOD",1,{timeout:20});yt("MEDITATIVE_BROTHERHOOD",1,{timeout:20});yt("RIDDLE_OF_WIND",1,{timeout:15.78});yt("WINDS_RUMINATION",1,{timeout:15,warnOnTimeout:!0});yt("SIX_SIDED_STAR",1,{timeout:5});const ul=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"];yt("BEAST_CHAKRA_1",3);yt("BEAST_CHAKRA_2",3);yt("BEAST_CHAKRA_3",3);yt("LUNAR_NADI",1);yt("SOLAR_NADI",1);class IB extends Kt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_THUNDERCLAP")?3:2;this.cooldowns.set(new Le("cd_THUNDERCLAP",30,n,n)),this.registerRecurringEvents()}getForm(){if(this.hasResourceAvailable("OPO_OPO_FORM"))return"opo";if(this.hasResourceAvailable("RAPTOR_FORM"))return"raptor";if(this.hasResourceAvailable("COEURL_FORM"))return"coeurl"}setForm(t){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(o=>this.tryConsumeResource(o));const n=t==="opo"?"OPO_OPO_FORM":t==="raptor"?"RAPTOR_FORM":t==="coeurl"?"COEURL_FORM":"FORMLESS_FIST";this.gainStatus(n)}canDoForm(t){return this.hasResourceAvailable("PERFECT_BALANCE")||this.hasResourceAvailable("FORMLESS_FIST")||this.getForm()===t}gainChakra(){this.resources.get("CHAKRA").gain(1)}maybeGainChakra(t){if(this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD"))for(let l=0;l<this.resources.get("PARTY_SIZE").availableAmount()-1;l++)this.triggersEffect(.2,!0)&&this.gainChakra();if(this.hasTraitUnlocked("ENHANCED_BROTHERHOOD")&&this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD")){this.gainChakra();return}const n=t?1:this.config.critRate,o=this.triggersEffect(n,!0);if(t||o){const l=this.hasTraitUnlocked("DEEP_MEDITATION_II")?1:.8,r=this.triggersEffect(l);(l===1||r)&&this.gainChakra()}}consumeFiveChakra(){const t=this.resources.get("CHAKRA");t.consume(Math.min(t.availableAmount(),5))}startPB(){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(t=>this.tryConsumeResource(t)),this.gainStatus("PERFECT_BALANCE")}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("RIDDLE_OF_FIRE")&&t.addBuff(k.RiddleOfFire),this.hasResourceAvailable("BROTHERHOOD")&&t.addBuff(k.Brotherhood)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_GREASED_LIGHTNING_III")?20:15}get statusPropsGenerator(){return new SB(this)}}const Ga=(e,t,n)=>{const o=n.form?l=>n.form.requiredForm===void 0||l.canDoForm(n.form.requiredForm):void 0;return $t("MNK",e,t,{...n,positional:void 0,highlightIf:l=>!o&&!n.ball&&!n.highlightIf?!1:(o?.(l)??!0)&&(n.ball?l.hasResourceAvailable(n.ball.rsc):!0)&&(n.highlightIf?.(l)??!0),validateAttempt:l=>(o?.(l)??!0)&&(n.validateAttempt?.(l)??!0),recastTime:l=>l.config.adjustedSksGCD(n.recastTime??2.5,l.inherentSpeedModifier()),onConfirm:Me(n.onConfirm,e!=="SIX_SIDED_STAR"&&n.potency?(l,r)=>{const d=r.getInitialPotency();d&&l.maybeGainChakra(d.modifiers.includes(q.AutoCrit))}:void 0,n.form?l=>{const r=n.form.nextForm;if(l.tryConsumeResource("PERFECT_BALANCE")){for(const E of ul)if(!l.hasResourceAvailable(E)){let h=3;r==="raptor"?h=1:r==="coeurl"&&(h=2),l.resources.get(E).gain(h),E==="BEAST_CHAKRA_3"&&ul.forEach(A=>l.enqueueResourceDrop(A,20));break}}else l.setForm(r)}:void 0,n.ball?l=>l.tryConsumeResource(n.ball.rsc):void 0),jobPotencyModifiers:l=>{const r=n.jobPotencyModifiers?.(l)??[],d=n.positional&&l.hitPositional(n.positional.location);return l.hasResourceAvailable("BROTHERHOOD")&&r.push(q.Brotherhood),l.hasResourceAvailable("RIDDLE_OF_FIRE")&&r.push(q.RiddleOfFire),n.ball&&l.hasResourceAvailable(n.ball.rsc)?(r.push({kind:"adder",source:x.MNK_BALL,additiveAmount:Jt(l,n.ball.potency)-Jt(l,n.potency)}),n.positional&&d&&r.push(Ih(Jt(l,n.positional.ballPotency)-Jt(l,n.ball.potency)))):n.positional&&d&&r.push(Ih(Jt(l,n.positional.potency)-Jt(l,n.potency))),r}})},vE=(e,t,n,o)=>et("MNK",e,t,n,{...o}),Kr=(e,t,n,o)=>we("MNK",e,t,n,o);[["BOOTSHINE",1,1.11,[["NEVER",180],["MELEE_MASTERY_MNK",220]]],["LEAPING_OPO",92,.62,260]].forEach(([e,t,n,o],l)=>{Ga(e,t,{...l===0?{autoUpgrade:{otherSkill:"LEAPING_OPO",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"BOOTSHINE",trait:"BEAST_CHAKRA_MASTERY"}},form:{nextForm:"raptor"},ball:{potency:l===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"OPO_OPOS_FURY"},applicationDelay:n,potency:o,highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:d=>d.hasResourceAvailable("OPO_OPOS_FURY")?[q.AutoCrit]:[]})});[["TRUE_STRIKE",4,.8,[["NEVER",260],["MELEE_MASTERY_MNK",300]]],["RISING_RAPTOR",92,.89,340]].forEach(([e,t,n,o],l)=>{Ga(e,t,{...l===0?{autoUpgrade:{otherSkill:"RISING_RAPTOR",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"TRUE_STRIKE",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"raptor",nextForm:"coeurl"},ball:{potency:l===0?[["NEVER",460],["MELEE_MASTERY_MNK",500]]:540,rsc:"RAPTORS_FURY"},applicationDelay:n,potency:o})});[["SNAP_PUNCH",6,.76,[["NEVER",230],["MELEE_MASTERY_MNK",270]]],["POUNCING_COEURL",92,1.02,310]].forEach(([e,t,n,o],l)=>{Ga(e,t,{...l===0?{autoUpgrade:{otherSkill:"POUNCING_COEURL",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"SNAP_PUNCH",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"coeurl",nextForm:"opo"},ball:{potency:l===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"COEURLS_FURY"},positional:{potency:l===0?[["NEVER",290],["MELEE_MASTERY_MNK",330]]:370,ballPotency:l===0?[["NEVER",440],["MELEE_MASTERY_MNK",480]]:520,location:"flank"},applicationDelay:n,potency:o})});Ga("DRAGON_KICK",50,{applicationDelay:1.29,potency:[["NEVER",240],["MELEE_MASTERY_MNK",280],["MELEE_MASTERY_II_MNK",320]],form:{nextForm:"raptor"},highlightIf:e=>e.canDoForm("opo")&&!e.hasResourceAvailable("OPO_OPOS_FURY"),onConfirm:e=>e.resources.get("OPO_OPOS_FURY").gain(1)});Ga("TWIN_SNAKES",18,{applicationDelay:.84,potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],form:{requiredForm:"raptor",nextForm:"coeurl"},highlightIf:e=>!e.hasResourceAvailable("RAPTORS_FURY"),onConfirm:e=>e.resources.get("RAPTORS_FURY").gain(1)});Ga("DEMOLISH",30,{applicationDelay:1.6,potency:[["NEVER",280],["MELEE_MASTERY_MNK",320],["MELEE_MASTERY_II_MNK",360]],form:{requiredForm:"coeurl",nextForm:"opo"},positional:{potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],location:"rear"},highlightIf:e=>!e.hasResourceAvailable("COEURLS_FURY"),onConfirm:e=>e.resources.get("COEURLS_FURY").gain(2)});[["ARM_OF_THE_DESTROYER",26,.54,110],["SHADOW_OF_THE_DESTROYER",82,.4,120]].forEach(([e,t,n,o],l)=>{Ga(e,t,{...l===0?{autoUpgrade:{otherSkill:"SHADOW_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}}:{autoDowngrade:{otherSkill:"ARM_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}},applicationDelay:n,potency:o,falloff:0,form:{nextForm:"raptor"},highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:l===1?d=>d.hasResourceAvailable("OPO_OPO_FORM")?[q.AutoCrit]:[]:void 0})});Ga("ROCKBREAKER",30,{applicationDelay:.94,potency:150,falloff:0,form:{requiredForm:"raptor",nextForm:"coeurl"}});Ga("FOUR_POINT_FURY",45,{applicationDelay:.97,potency:140,falloff:0,form:{requiredForm:"coeurl",nextForm:"opo"}});const vb=e=>{const t=ul.map(n=>e.resources.get(n).availableAmount());return e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI")&&t.every(n=>n>0)},MT=e=>{const t=ul.map(l=>e.resources.get(l).availableAmount()),n=t[0];return n>0&&t[1]===n&&t[2]===n&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},LT=e=>{const t=ul.map(o=>e.resources.get(o).availableAmount()),n=[!1,!1,!1];return t.forEach(o=>{console.assert(o<4,"beast chakra had invalid value"),o<4&&o>0&&(n[o-1]=!0)}),n.every(o=>o)&&t.every(o=>o>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},Mb=e=>{const t=ul.map(n=>e.resources.get(n).availableAmount());return!MT(e)&&!LT(e)&&t.every(n=>n>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},_B=e=>!vb(e)&&!MT(e)&&!LT(e)&&!Mb(e),pu=[{newSkill:"MASTERFUL_BLITZ",condition:_B},{newSkill:"ELIXIR_FIELD",condition:MT},{newSkill:"FLINT_STRIKE",condition:LT},{newSkill:"CELESTIAL_REVOLUTION",condition:Mb},{newSkill:"TORNADO_KICK",condition:vb}],ME=e=>{ul.forEach(t=>e.tryConsumeResource(t,!0)),e.setForm("formless")},Lb=e=>t=>t.resources.get(e==="lunar"?"LUNAR_NADI":"SOLAR_NADI").gain(1);Ga("MASTERFUL_BLITZ",60,{applicationDelay:0,replaceIf:pu,validateAttempt:e=>!1});[["TORNADO_KICK",60,1.69,1200],["PHANTOM_RUSH",90,.4,1500]].forEach(([e,t,n,o],l)=>{Ga(e,t,{...l===0?{autoUpgrade:{otherSkill:"PHANTOM_RUSH",trait:"TORNADO_KICK_MASTERY"}}:{autoDowngrade:{otherSkill:"TORNADO_KICK",trait:"TORNADO_KICK_MASTERY"}},startOnHotbar:!1,applicationDelay:n,replaceIf:pu,highlightIf:d=>!0,potency:o,falloff:.35,onConfirm:Me(ME,d=>{d.tryConsumeResource("LUNAR_NADI"),d.tryConsumeResource("SOLAR_NADI")})})});[["ELIXIR_FIELD",60,1.07,800],["ELIXIR_BURST",92,1.42,900]].forEach(([e,t,n,o],l)=>{Ga(e,t,{...l===0?{autoUpgrade:{otherSkill:"ELIXIR_BURST",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"ELIXIR_FIELD",trait:"BEAST_CHAKRA_MASTERY"}},startOnHotbar:!1,applicationDelay:n,replaceIf:pu,highlightIf:d=>!0,potency:o,falloff:.35,onConfirm:Me(ME,Lb("lunar"))})});Ga("CELESTIAL_REVOLUTION",60,{startOnHotbar:!1,applicationDelay:.89,replaceIf:pu,highlightIf:e=>!0,potency:600,onConfirm:Me(ME,e=>e.resources.get(e.hasResourceAvailable("LUNAR_NADI")?"SOLAR_NADI":"LUNAR_NADI").gain(1))});[["FLINT_STRIKE",60,.53,800],["RISING_PHOENIX",86,.76,900]].forEach(([e,t,n,o],l)=>{Ga(e,t,{...l===0?{autoUpgrade:{otherSkill:"RISING_PHOENIX",trait:"FLINT_STRIKE_MASTERY"}}:{autoDowngrade:{otherSkill:"FLINT_STRIKE",trait:"FLINT_STRIKE_MASTERY"}},startOnHotbar:!1,applicationDelay:n,replaceIf:pu,highlightIf:d=>!0,potency:o,falloff:.35,onConfirm:Me(ME,Lb("solar"))})});Ga("SIX_SIDED_STAR",80,{recastTime:5,applicationDelay:.62,potency:[["NEVER",710],["MELEE_MASTERY_II_MNK",780]],onConfirm:e=>{e.tryConsumeResource("CHAKRA",!0),e.gainStatus("SIX_SIDED_STAR")},jobPotencyModifiers:e=>{const t=e.resources.get("CHAKRA").availableAmount();return t>0?[{kind:"adder",additiveAmount:80*t,source:x.SSS_CHAKRA}]:[]}});Ga("FORM_SHIFT",52,{applicationDelay:0,onConfirm:e=>e.setForm("formless")});function HT(e,t,n){return $t("MNK",e,t,{autoUpgrade:n.autoUpgrade,autoDowngrade:n.autoDowngrade,recastTime:1,applicationDelay:0,replaceIf:[{newSkill:n.spender,condition:o=>o.resources.get("CHAKRA").available(5)}],validateAttempt:o=>!o.resources.get("CHAKRA").available(5),onConfirm:o=>o.resources.get("CHAKRA").gain(o.isInCombat()?1:5)})}HT("FORBIDDEN_MEDITATION",54,{spender:"THE_FORBIDDEN_CHAKRA"});HT("INSPIRITED_MEDITATION",40,{autoUpgrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"HOWLING_FIST"});HT("ENLIGHTENED_MEDITATION",74,{autoDowngrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"ENLIGHTENMENT"});[["HOWLING_FIST",40,1.16,100,"cd_THE_FORBIDDEN_CHAKRA"],["ENLIGHTENMENT",74,.76,160,"cd_ENLIGHTENMENT"]].forEach(([e,t,n,o,l],r)=>{vE(e,t,l,{...r===0?{autoUpgrade:{otherSkill:"ENLIGHTENMENT",trait:"HOWLING_FIST_MASTERY"}}:{autoDowngrade:{otherSkill:"HOWLING_FIST",trait:"HOWLING_FIST_MASTERY"}},startOnHotbar:!1,applicationDelay:n,cooldown:1,potency:o,falloff:0,requiresCombat:!0,highlightIf:E=>E.resources.get("CHAKRA").available(5),validateAttempt:E=>E.resources.get("CHAKRA").available(5),onConfirm:E=>E.consumeFiveChakra()})});vE("THE_FORBIDDEN_CHAKRA",54,"cd_THE_FORBIDDEN_CHAKRA",{startOnHotbar:!1,replaceIf:[{newSkill:"FORBIDDEN_MEDITATION",condition:e=>!e.resources.get("CHAKRA").available(5)}],applicationDelay:1.48,cooldown:1,potency:[["NEVER",310],["MELEE_MASTERY_MNK",400]],requiresCombat:!0,highlightIf:e=>e.resources.get("CHAKRA").available(5),validateAttempt:e=>e.resources.get("CHAKRA").available(5),onConfirm:e=>e.consumeFiveChakra()});Kr("PERFECT_BALANCE",50,"cd_PERFECT_BALANCE",{rscType:"PERFECT_BALANCE",applicationDelay:0,cooldown:40,maxCharges:2,requiresCombat:!0,validateAttempt:e=>!ul.map(t=>e.hasResourceAvailable(t)).some(t=>t),onConfirm:e=>e.startPB()});Kr("RIDDLE_OF_FIRE",68,"cd_RIDDLE_OF_FIRE",{rscType:"RIDDLE_OF_FIRE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"FIRES_REPLY",condition:e=>e.hasResourceAvailable("FIRES_RUMINATION")}],onConfirm:e=>e.gainStatus("FIRES_RUMINATION")});Kr("BROTHERHOOD",70,"cd_BROTHERHOOD",{rscType:"BROTHERHOOD",applicationDelay:.76,cooldown:120,onApplication:e=>{e.gainStatus("MEDITATIVE_BROTHERHOOD"),e.resources.set(new Wa("CHAKRA",10,e.resources.get("CHAKRA").availableAmount())),e.addEvent(new Ne("restore BH max stacks",wt("MNK","BROTHERHOOD").maxTimeout,()=>e.resources.set(new Wa("CHAKRA",5,Math.min(e.resources.get("CHAKRA").availableAmount(),5)))))}});Kr("RIDDLE_OF_WIND",72,"cd_RIDDLE_OF_WIND",{rscType:"RIDDLE_OF_WIND",applicationDelay:0,cooldown:90,replaceIf:[{newSkill:"WINDS_REPLY",condition:e=>e.hasResourceAvailable("WINDS_RUMINATION")}],onConfirm:e=>e.gainStatus("WINDS_RUMINATION")});vE("THUNDERCLAP",35,"cd_THUNDERCLAP",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:jt,drawsAggro:!0});Kr("MANTRA",42,"cd_MANTRA",{rscType:"MANTRA",applicationDelay:1.5,cooldown:90});Kr("RIDDLE_OF_EARTH",64,"cd_RIDDLE_OF_EARTH",{rscType:"RIDDLE_OF_EARTH",applicationDelay:0,cooldown:120,healingPotency:100,replaceIf:[{newSkill:"EARTHS_REPLY",condition:e=>e.hasResourceAvailable("EARTHS_RUMINATION")}],onConfirm:e=>e.gainStatus("EARTHS_RUMINATION")});vE("EARTHS_REPLY",64,"cd_EARTHS_REPLY",{startOnHotbar:!1,applicationDelay:1.07,cooldown:1,healingPotency:300,highlightIf:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("EARTHS_RUMINATION")});Ga("WINDS_REPLY",96,{startOnHotbar:!1,applicationDelay:1.2,potency:1040,falloff:.35,highlightIf:e=>e.hasResourceAvailable("WINDS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("WINDS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("WINDS_RUMINATION")});Ga("FIRES_REPLY",100,{startOnHotbar:!1,applicationDelay:1.42,potency:1400,falloff:.35,highlightIf:e=>e.hasResourceAvailable("FIRES_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("FIRES_RUMINATION"),onConfirm:e=>{e.tryConsumeResource("FIRES_RUMINATION"),e.setForm("formless")}});Object.keys(HR).forEach(e=>Gt(e,`VPR/${xe[e].name}.png`));const gB=Object.keys(HR);class pB extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return gB.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("VPR_COMBO"),l=n.get("VPR_AOE_COMBO"),r=["HUNTERS_COIL_READY","SWIFTSKINS_COIL_READY","HUNTERS_DEN_READY","SWIFTSKINS_DEN_READY"],d=n.get("RATTLING_COIL").availableAmount(),E=n.get("SERPENT_OFFERINGS").availableAmount(),h=n.get("ANGUINE_TRIBUTE").availableAmount(),A=o.available(1)?o.pendingChange?.timeTillEvent:l.available(1)?l.pendingChange?.timeTillEvent:void 0,R=r.filter(I=>n.get(I).available(1)),T=R.length>0?Math.max(...R.map(I=>n.get(I).pendingChange.timeTillEvent)):void 0,S=[{kind:"bar",name:g({en:"Dual Wield Combo Timer",zh:""}),color:t.vpr.vprComboTimer,progress:A?A/30:0,valueString:A?.toFixed(3)??"N/A"},{kind:"bar",name:g({en:"Twinblade Combo Timer",zh:""}),color:t.vpr.vprComboTimer,progress:T?T/30:0,valueString:T?.toFixed(3)??"N/A"},{kind:"counter",name:ze("RATTLING_COIL"),color:t.vpr.rattlingCoil,currentStacks:d,maxStacks:n.get("RATTLING_COIL").maxValue}];return this.state.hasTraitUnlocked("SERPENTS_LINEAGE")&&S.push({kind:"bar",name:ze("SERPENT_OFFERINGS"),color:E>=50?t.vpr.anguineTribute:t.vpr.serpentOfferings,progress:E/100,valueString:E.toFixed(0)},{kind:"counter",name:ze("ANGUINE_TRIBUTE"),color:t.vpr.anguineTribute,currentStacks:h,maxStacks:n.get("ANGUINE_TRIBUTE").maxValue}),S}}const ct=(e,t,n)=>{je("VPR",e,t,n??{})};ct("RATTLING_COIL",3,{warnOnOvercap:!0});ct("SERPENT_OFFERINGS",100,{warnOnOvercap:!0});ct("ANGUINE_TRIBUTE",5,{timeout:30});ct("HUNTERS_INSTINCT",1,{timeout:40});ct("SWIFTSCALED",1,{timeout:40});ct("HONED_STEEL",1,{timeout:60});ct("HONED_REAVERS",1,{timeout:60});ct("FLANKSTUNG_VENOM",1,{timeout:60});ct("HINDSTUNG_VENOM",1,{timeout:60});ct("FLANKSBANE_VENOM",1,{timeout:60});ct("HINDSBANE_VENOM",1,{timeout:60});ct("GRIMSKINS_VENOM",1,{timeout:60});ct("GRIMHUNTERS_VENOM",1,{timeout:60});ct("HUNTERS_VENOM",1,{timeout:30});ct("SWIFTSKINS_VENOM",1,{timeout:30});ct("POISED_FOR_TWINFANG",1,{timeout:60});ct("POISED_FOR_TWINBLOOD",1,{timeout:60});ct("FELLHUNTERS_VENOM",1,{timeout:30});ct("FELLSKINS_VENOM",1,{timeout:30});ct("READY_TO_REAWAKEN",1,{timeout:30,warnOnTimeout:!0});ct("REAWAKENED",1,{timeout:30,warnOnTimeout:!0});ct("DEATH_RATTLE_READY",1);ct("COIL_OGCD_READY",2);ct("DEN_OGCD_READY",2);ct("UNCOILED_OGCD_READY",2);ct("HUNTERS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});ct("HUNTERS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});ct("SWIFTSKINS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});ct("SWIFTSKINS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});ct("LAST_LASH_READY",1);ct("LEGACY_READY",4);ct("VPR_COMBO",4,{timeout:30});ct("VPR_AOE_COMBO",2,{timeout:30});ct("REAWAKEN_COMBO",4);const Hb=["DEATH_RATTLE_READY","LAST_LASH_READY","COIL_OGCD_READY","UNCOILED_OGCD_READY","HUNTERS_VENOM","SWIFTSKINS_VENOM","POISED_FOR_TWINFANG","POISED_FOR_TWINBLOOD","DEN_OGCD_READY","LEGACY_READY"],Ub=["FLANKSBANE_VENOM","FLANKSTUNG_VENOM"],kb=["HINDSBANE_VENOM","HINDSTUNG_VENOM"],Lr=[...Ub,...kb];class NB extends Kt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SLITHER")?3:2;this.cooldowns.set(new Le("cd_SLITHER",30,n,n));const o=this.hasTraitUnlocked("ENHANCED_VIPERS_RATTLE")?3:2,l=this.hasTraitUnlocked("ENHANCED_SERPENTS_LINEAGE")?5:4;this.resources.set(new Wa("RATTLING_COIL",o,0,!0)),this.resources.set(new Wa("ANGUINE_TRIBUTE",l,0)),this.registerRecurringEvents()}inherentSpeedModifier(){return 15}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("HUNTERS_INSTINCT")&&t.addBuff(k.HuntersInstinct)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("SWIFTSCALED")&&n.cdName==="cd_GCD"&&t.addBuff(k.Swiftscaled)}get statusPropsGenerator(){return new pB(this)}getSwiftscaledModifier(){return this.hasResourceAvailable("SWIFTSCALED")?this.inherentSpeedModifier():0}isNoReawakenComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_COMBO",t)}isNoReawakenAoeComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_AOE_COMBO",t)}setLegacy(t){this.hasTraitUnlocked("SERPENTS_LEGACY")&&this.resources.get("LEGACY_READY").overrideCurrentValue(t)}gainOfferings(t){this.hasTraitUnlocked("SERPENTS_LINEAGE")&&this.resources.get("SERPENT_OFFERINGS").gain(t)}processCombo(t){if(t==="WRITHING_SNAP"||t==="UNCOILED_FURY")return;const o=["REAWAKEN","FIRST_GENERATION","SECOND_GENERATION","THIRD_GENERATION","FOURTH_GENERATION"].indexOf(t);if(o!==-1){this.setComboState("REAWAKEN_COMBO",(o+1)%5);return}const l=this.resources.get("VPR_COMBO").availableAmount(),r=this.resources.get("VPR_AOE_COMBO").availableAmount(),[d,E]=new Map([["STEEL_FANGS",[1,0]],["REAVING_FANGS",[1,0]],["HUNTERS_STING",[2,0]],["SWIFTSKINS_STING",[3,0]],["FLANKSTING_STRIKE",[0,0]],["FLANKSBANE_FANG",[0,0]],["HINDSTING_STRIKE",[0,0]],["HINDSBANE_FANG",[0,0]],["STEEL_MAW",[0,1]],["REAVING_MAW",[0,1]],["HUNTERS_BITE",[0,2]],["SWIFTSKINS_BITE",[0,2]],["JAGGED_MAW",[0,0]],["BLOODIED_MAW",[0,0]]]).get(t)??[l,r];d!==l&&this.setComboState("VPR_COMBO",d),E!==r&&this.setComboState("VPR_AOE_COMBO",E),this.setComboState("REAWAKEN_COMBO",0)}cancelVicewinderCombo(t){t!=="SWIFTSKINS_COIL"&&this.tryConsumeResource("HUNTERS_COIL_READY"),t!=="HUNTERS_COIL"&&this.tryConsumeResource("SWIFTSKINS_COIL_READY"),t!=="SWIFTSKINS_DEN"&&this.tryConsumeResource("HUNTERS_DEN_READY"),t!=="HUNTERS_DEN"&&this.tryConsumeResource("SWIFTSKINS_DEN_READY")}consumeAnguine(){this.tryConsumeResource("ANGUINE_TRIBUTE"),this.hasResourceAvailable("ANGUINE_TRIBUTE")||this.cancelReawaken()}cancelReawaken(){this.tryConsumeResource("LEGACY_READY",!0),this.tryConsumeResource("ANGUINE_TRIBUTE",!0),this.tryConsumeResource("REAWAKENED"),this.setComboState("REAWAKEN_COMBO",0)}applyExtendedStatus(t,n){Lr.includes(t)&&Lr.forEach(r=>r!==t&&this.tryConsumeResource(r));const o=this.resources.get(t),l=wt("VPR",t);this.hasResourceAvailable(t)?l.maxTimeout>0&&o.overrideTimer(this,l.maxTimeout+n):(o.gain(1),l.maxTimeout>0&&this.enqueueResourceDrop(t,l.maxTimeout+n))}}const sa=(e,t,n)=>{const o=n.replaceIf?.find(l=>l.newSkill===e)?.condition;return $t("VPR",e,t,{...n,recastTime:l=>l.config.adjustedSksGCD(n.baseRecastTime??2.5,l.getSwiftscaledModifier()),validateAttempt:hu(n.validateAttempt,o),onConfirm:Me(l=>{e!=="UNCOILED_FURY"&&e!=="WRITHING_SNAP"&&l.cancelVicewinderCombo(e),Hb.forEach(r=>{l.tryConsumeResource(r,!0)&&p.reportWarning({kind:"overwrite",rsc:r})})},n.onConfirm,n.extendedStatus?l=>l.applyExtendedStatus(n.extendedStatus,n.applicationDelay):void 0,l=>l.processCombo(e)),jobPotencyModifiers:l=>{const r=n.jobPotencyModifiers?.(l)??[];return l.hasResourceAvailable("HUNTERS_INSTINCT")&&r.push(q.HuntersInstinct),r}})},No=(e,t,n,o)=>et("VPR",e,t,n,{...o,jobPotencyModifiers:l=>{const r=o.jobPotencyModifiers?.(l)??[];return l.hasResourceAvailable("HUNTERS_INSTINCT")&&r.push(q.HuntersInstinct),r}}),xb={newSkill:"FIRST_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},Pb={newSkill:"SECOND_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},Hr=[xb];Hr.push(...["STEEL_FANGS","HUNTERS_STING","FLANKSTING_STRIKE","HINDSTING_STRIKE"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenComboAt(t)})));const Ur=[Pb];Ur.push(...["REAVING_FANGS","SWIFTSKINS_STING","FLANKSBANE_FANG","HINDSBANE_FANG"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenComboAt(t)})));const LE=[xb];LE.push(...["STEEL_MAW","HUNTERS_BITE","JAGGED_MAW"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenAoeComboAt(t)})));const HE=[Pb];HE.push(...["REAVING_MAW","SWIFTSKINS_BITE","BLOODIED_MAW"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenAoeComboAt(t)})));const wb=[{newSkill:"HUNTERS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],Gb=[{newSkill:"SWIFTSKINS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],UE=[{newSkill:"SERPENTS_TAIL",condition:e=>!Hb.some(t=>e.hasResourceAvailable(t))},{newSkill:"DEATH_RATTLE",condition:e=>e.hasResourceAvailable("DEATH_RATTLE_READY")},{newSkill:"LAST_LASH",condition:e=>e.hasResourceAvailable("LAST_LASH_READY")},{newSkill:"FIRST_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",1)},{newSkill:"SECOND_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",2)},{newSkill:"THIRD_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",3)},{newSkill:"FOURTH_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",4)}],Bb=[{newSkill:"TWINFANG",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINFANG_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINFANG_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINFANG",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],Fb=[{newSkill:"TWINBLOOD",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINBLOOD_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINBLOOD_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINBLOOD",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],zb=[{newSkill:"REAWAKEN",condition:e=>!e.hasResourceAvailable("ANGUINE_TRIBUTE")},{newSkill:"OUROBOROS",condition:e=>e.hasResourceAvailable("ANGUINE_TRIBUTE")}];sa("WRITHING_SNAP",15,{applicationDelay:.488,potency:200});sa("STEEL_FANGS",1,{replaceIf:Hr,applicationDelay:1.158,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[q.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});sa("REAVING_FANGS",10,{replaceIf:Ur,applicationDelay:1.293,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[q.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});sa("HUNTERS_STING",5,{startOnHotbar:!1,replaceIf:Hr,applicationDelay:.89,potency:[["NEVER",240],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!Lr.some(t=>e.hasResourceAvailable(t))||Ub.some(t=>e.hasResourceAvailable(t)),extendedStatus:"HUNTERS_INSTINCT"});sa("SWIFTSKINS_STING",20,{startOnHotbar:!1,replaceIf:Ur,applicationDelay:1.16,potency:[["NEVER",280],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!Lr.some(t=>e.hasResourceAvailable(t))||kb.some(t=>e.hasResourceAvailable(t)),extendedStatus:"SWIFTSCALED"});const CB=[["FLANKSTING_STRIKE",1.649,"flank","FLANKSTUNG_VENOM","HINDSTUNG_VENOM",Hr],["FLANKSBANE_FANG",1.604,"flank","FLANKSBANE_VENOM","HINDSBANE_VENOM",Ur],["HINDSTING_STRIKE",.98,"rear","HINDSTUNG_VENOM","FLANKSBANE_VENOM",Hr],["HINDSBANE_FANG",1.203,"rear","HINDSBANE_VENOM","FLANKSTUNG_VENOM",Ur]];CB.forEach(([e,t,n,o,l,r])=>{sa(e,30,{startOnHotbar:!1,replaceIf:r,applicationDelay:t,potency:[["NEVER",320],["MELEE_MASTERY_II_VPR",340]],positional:{potency:[["NEVER",380],["MELEE_MASTERY_II_VPR",400]],location:n},jobPotencyModifiers:d=>d.hasResourceAvailable(o)?[q.VenomST]:[],highlightIf:d=>!Lr.some(E=>d.hasResourceAvailable(E))||d.hasResourceAvailable(o),onConfirm:d=>{d.gainStatus("DEATH_RATTLE_READY"),d.resources.get("SERPENT_OFFERINGS").gain(10),Lr.filter(E=>E!==o).some(E=>d.hasResourceAvailable(E))&&p.reportWarning({kind:"custom",en:"incorrect combo ender!"})},extendedStatus:l})});sa("HUNTERS_COIL",65,{replaceIf:wb,applicationDelay:.982,potency:570,positional:{potency:620,location:"flank"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("HUNTERS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&e.gainStatus("SWIFTSKINS_COIL_READY")},extendedStatus:"HUNTERS_INSTINCT"});sa("SWIFTSKINS_COIL",65,{replaceIf:Gb,applicationDelay:1.473,potency:570,positional:{potency:620,location:"rear"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("SWIFTSKINS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_COIL_READY")&&e.gainStatus("HUNTERS_COIL_READY")},extendedStatus:"SWIFTSCALED"});sa("REAWAKEN",90,{replaceIf:zb,applicationDelay:.625,potency:750,falloff:.8,baseRecastTime:2.2,highlightIf:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),validateAttempt:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REAWAKEN")||e.resources.get("SERPENT_OFFERINGS").consume(50),e.gainStatus("ANGUINE_TRIBUTE",e.resources.get("ANGUINE_TRIBUTE").maxValue),e.gainStatus("REAWAKENED"),e.resources.get("REAWAKENED").removeTimer(),e.resources.addResourceEvent({rscType:"REAWAKENED",name:"cancel reawaken",delay:wt("VPR","REAWAKENED").maxTimeout,fnOnRsc:()=>e.cancelReawaken()})}});sa("OUROBOROS",96,{startOnHotbar:!1,replaceIf:zb,applicationDelay:2.313,potency:1150,falloff:.8,baseRecastTime:3,highlightIf:e=>e.hasResourceExactly("ANGUINE_TRIBUTE",1),onConfirm:e=>e.cancelReawaken()});sa("VICEWINDER",65,{applicationDelay:.581,potency:500,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&e.resources.get("RATTLING_COIL").gain(1),e.gainStatus("HUNTERS_COIL_READY"),e.gainStatus("SWIFTSKINS_COIL_READY")}});sa("UNCOILED_FURY",82,{applicationDelay:.804,potency:680,falloff:.75,baseRecastTime:3.5,highlightIf:e=>e.hasResourceAvailable("RATTLING_COIL"),validateAttempt:e=>e.hasResourceAvailable("RATTLING_COIL"),onConfirm:e=>{e.tryConsumeResource("RATTLING_COIL"),e.hasTraitUnlocked("UNCOILED_FANGS")&&(e.gainStatus("POISED_FOR_TWINFANG"),e.gainStatus("UNCOILED_OGCD_READY",2))}});sa("STEEL_MAW",25,{replaceIf:LE,applicationDelay:1.091,potency:120,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[q.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});sa("REAVING_MAW",35,{replaceIf:HE,applicationDelay:.908,potency:120,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[q.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});sa("HUNTERS_BITE",40,{startOnHotbar:!1,replaceIf:LE,applicationDelay:1.134,potency:180,falloff:0,highlightIf:e=>!0,extendedStatus:"HUNTERS_INSTINCT"});sa("SWIFTSKINS_BITE",45,{startOnHotbar:!1,replaceIf:HE,applicationDelay:1.445,potency:180,falloff:0,highlightIf:e=>!0,extendedStatus:"SWIFTSCALED"});sa("JAGGED_MAW",50,{startOnHotbar:!1,replaceIf:LE,applicationDelay:1.127,potency:180,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")?[q.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")||!e.hasResourceAvailable("GRIMHUNTERS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMHUNTERS_VENOM"});sa("BLOODIED_MAW",50,{startOnHotbar:!1,replaceIf:HE,applicationDelay:.866,potency:180,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")?[q.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")||!e.hasResourceAvailable("GRIMSKINS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMSKINS_VENOM"});sa("HUNTERS_DEN",70,{replaceIf:[{newSkill:"HUNTERS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.569,potency:300,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLHUNTERS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_DEN_READY")&&e.gainStatus("SWIFTSKINS_DEN_READY")},extendedStatus:"HUNTERS_INSTINCT"});sa("SWIFTSKINS_DEN",70,{replaceIf:[{newSkill:"SWIFTSKINS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.999,potency:300,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLSKINS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_DEN_READY")&&e.gainStatus("HUNTERS_DEN_READY")},extendedStatus:"SWIFTSCALED"});sa("VICEPIT",70,{applicationDelay:.827,potency:250,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},falloff:0,baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&(p.timeline.duringUntargetable(e.getDisplayTime())||e.resources.get("RATTLING_COIL").gain(1)),e.gainStatus("HUNTERS_DEN_READY"),e.gainStatus("SWIFTSKINS_DEN_READY")}});No("SERPENTS_IRE",86,"cd_SERPENTS_IRE",{applicationDelay:0,cooldown:120,requiresCombat:!0,onConfirm:e=>{e.resources.get("RATTLING_COIL").gain(1),e.hasTraitUnlocked("SERPENTS_LINEAGE")&&e.gainStatus("READY_TO_REAWAKEN")}});No("SLITHER",40,"cd_SLITHER",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:jt});No("SERPENTS_TAIL",55,"cd_SERPENTS_TAIL",{replaceIf:UE,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});No("DEATH_RATTLE",55,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:UE,applicationDelay:1.697,cooldown:1,potency:280,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("DEATH_RATTLE_READY")});No("LAST_LASH",60,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:UE,applicationDelay:1.226,cooldown:1,potency:120,falloff:0,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("LAST_LASH_READY")});No("TWINFANG",75,"cd_TWINFANG",{replaceIf:Bb,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});No("TWINBLOOD",75,"cd_TWINBLOOD",{replaceIf:Fb,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});const OB=[["TWINFANG_BITE",75,"fang",.629,120,void 0,"COIL_OGCD_READY","HUNTERS_VENOM",q.VenomOGCDST,"SWIFTSKINS_VENOM"],["TWINBLOOD_BITE",75,"blood",.714,120,void 0,"COIL_OGCD_READY","SWIFTSKINS_VENOM",q.VenomOGCDST,"HUNTERS_VENOM"],["TWINFANG_THRESH",80,"fang",.666,50,0,"DEN_OGCD_READY","FELLHUNTERS_VENOM",q.VenomOGCDAoE,"FELLSKINS_VENOM"],["TWINBLOOD_THRESH",80,"blood",.764,50,0,"DEN_OGCD_READY","FELLSKINS_VENOM",q.VenomOGCDAoE,"FELLHUNTERS_VENOM"],["UNCOILED_TWINFANG",92,"fang",1.04,120,.75,"UNCOILED_OGCD_READY","POISED_FOR_TWINFANG",q.Poised,"POISED_FOR_TWINBLOOD"],["UNCOILED_TWINBLOOD",92,"blood",.977,120,.75,"UNCOILED_OGCD_READY","POISED_FOR_TWINBLOOD",q.Poised,"POISED_FOR_TWINFANG"]];OB.forEach(([e,t,n,o,l,r,d,E,h,A])=>{No(e,t,n==="fang"?"cd_TWINFANG":"cd_TWINBLOOD",{startOnHotbar:!1,replaceIf:n==="fang"?Bb:Fb,applicationDelay:o,cooldown:1,potency:l,falloff:r,highlightIf:R=>R.hasResourceAvailable(E),jobPotencyModifiers:R=>R.hasResourceAvailable(E)?[h]:[],onConfirm:R=>{R.tryConsumeResource(d),R.hasResourceAvailable(E)||p.reportWarning({kind:"custom",en:`unbuffed twin${n} ability!`}),R.tryConsumeResource(E)&&R.hasResourceAvailable(d)?R.gainStatus(A):R.tryConsumeResource(A)}})});const bB=[["FIRST_GENERATION",1.702,Hr],["SECOND_GENERATION",1.473,Ur],["THIRD_GENERATION",1.473,wb],["FOURTH_GENERATION",1.473,Gb]];bB.forEach(([e,t,n],o)=>{sa(e,90,{replaceIf:n,startOnHotbar:!1,applicationDelay:t,potency:420,falloff:.8,baseRecastTime:2,combo:{resource:"REAWAKEN_COMBO",resourceValue:o+1,potency:680},highlightIf:l=>l.hasResourceExactly("REAWAKEN_COMBO",o+1),onConfirm:l=>{l.setLegacy(o+1),l.consumeAnguine()}})});const DB=[["FIRST_LEGACY",1.289],["SECOND_LEGACY",1.065],["THIRD_LEGACY",1.19],["FOURTH_LEGACY",1.065]];DB.forEach(([e,t])=>{No(e,100,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:UE,applicationDelay:t,cooldown:1,potency:320,falloff:.8,highlightIf:n=>!0,onConfirm:n=>n.tryConsumeResource("LEGACY_READY",!0)})});const jb=["SONG_OF_TORMENT","NIGHTBLOOM","FEATHER_RAIN","MORTAL_FLAME","BREATH_OF_MAGIC","WANING_NOCTURNE","DIAMONDBACK","BRUSH_WITH_DEATH"],yB=Object.keys(xR).filter(e=>!jb.includes(e));Object.keys(xR).forEach(e=>Gt(e,`BLU/${xe[e].name}.png`));class vB extends Yt{jobSpecificOtherTargetedBuffViewProps(){return[...jb.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return yB.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){return[]}}const ba=(e,t,n)=>{je("BLU",e,t,n??{})};ba("NIGHTBLOOM",1,{timeout:60});ba("SONG_OF_TORMENT",1,{timeout:30});ba("FEATHER_RAIN",1,{timeout:6});ba("WAXING_NOCTURNE",1,{timeout:15});ba("WANING_NOCTURNE",1,{timeout:15});ba("DIAMONDBACK",1,{timeout:10});ba("BRISTLE",1,{timeout:30});ba("WHISTLE",1,{timeout:30});ba("TINGLE",1,{timeout:15});ba("COLD_FOG",1,{timeout:5});ba("TOUCH_OF_FROST",1,{timeout:15});ba("PHANTOM_FLURRY",1,{timeout:5});ba("APOKALYPSIS",1,{timeout:10});ba("WINGED_REPROBATION",4);ba("WINGED_REDEMPTION",1,{timeout:10});ba("BREATH_OF_MAGIC",1,{timeout:60});ba("MORTAL_FLAME",1,{timeout:900});ba("SURPANAKHAS_FURY",4,{timeout:3});ba("BRUSH_WITH_DEATH",1,{timeout:600});class MB extends Kt{constructor(t){super(t),this.cooldowns.set(new Le("cd_SWIFTCAST",60,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"NIGHTBLOOM",appliedBy:["NIGHTBLOOM"]},{effectName:"SONG_OF_TORMENT",appliedBy:["SONG_OF_TORMENT"]}]},{groupedEffects:[{effectName:"FEATHER_RAIN",appliedBy:["FEATHER_RAIN"]}]},{groupedEffects:[{effectName:"BREATH_OF_MAGIC",appliedBy:["BREATH_OF_MAGIC"]}]},{groupedEffects:[{effectName:"MORTAL_FLAME",appliedBy:["MORTAL_FLAME"]}]},{groupedEffects:[{effectName:"PHANTOM_FLURRY",appliedBy:["PHANTOM_FLURRY"],isGroundTargeted:!0,exclude:!0},{effectName:"APOKALYPSIS",appliedBy:["APOKALYPSIS"],isGroundTargeted:!0,exclude:!0}]}])}get statusPropsGenerator(){return new vB(this)}refreshBuff(t,n){this.addEvent(new Ne("gain buff",n,()=>{if(this.resources.get(t).gain(1),this.enqueueResourceDrop(t),t==="WANING_NOCTURNE"||t==="DIAMONDBACK"){const o=wt("BLU",t).maxTimeout,l=this.resources.get("NOT_ANIMATION_LOCKED").pendingChange;l!==void 0?this.resources.get("NOT_ANIMATION_LOCKED").overrideTimer(this,Math.max(o,l.timeTillEvent)):this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",o)}}))}jobSpecificRegisterRecurringEvents(){const t=()=>{this.handleDoTTick("PHANTOM_FLURRY"),this.getDisplayTime()>=0&&p.reportDotTick(this.time,"PHANTOM_FLURRY"),this.addEvent(new Ne("kick tick",1,()=>{t()}))},n=()=>{this.handleDoTTick("APOKALYPSIS"),this.getDisplayTime()>=0&&p.reportDotTick(this.time,"APOKALYPSIS"),this.addEvent(new Ne("Apokalypsis tick",1,()=>{n()}))};let o=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;o>1;)o--;this.addEvent(new Ne("initial kick tick",o,t));let l=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;l>1;)l--;this.addEvent(new Ne("initial Apokalypsis tick",l,n))}cancelChanneledSkills(){this.tryConsumeResource("PHANTOM_FLURRY"),this.tryConsumeResource("APOKALYPSIS")}}const UT=e=>e.hasResourceAvailable("WANING_NOCTURNE")||e.hasResourceAvailable("DIAMONDBACK"),LB=e=>e.hasResourceAvailable("PHANTOM_FLURRY"),HB={newSkill:"END_PHANTOM_FLURRY",condition:e=>LB(e)},Bt=(e,t,n)=>{const o=n.basePotency??Number,l=n.aspect??Ie.Other,r=n.baseCastTime??0,d=r>0?Me(h=>h.tryConsumeResource("SWIFTCAST"),n.onConfirm):n.onConfirm,E=n.jobPotencyModifiers??(h=>[]);return Bn("BLU",e,t,{...n,aspect:l,castTime:h=>h.config.adjustedCastTime(r),potency:n.basePotency,validateAttempt:h=>!UT(h)&&(n.validateAttempt?.(h)??!0),jobPotencyModifiers:h=>{const A=E(h);return h.hasResourceAvailable("WAXING_NOCTURNE")&&A.push(q.MoonFlute),o!==0&&h.hasResourceAvailable("BRISTLE")&&A.push(q.Bristle)&&h.tryConsumeResource("BRISTLE"),l===Ie.Physical&&h.hasResourceAvailable("WHISTLE")&&A.push(q.Whistle)&&h.tryConsumeResource("WHISTLE"),l===Ie.Physical&&e!=="TRIPLE_TRIDENT"&&h.hasResourceAvailable("TINGLE")&&A.push(q.TingleA)&&h.tryConsumeResource("TINGLE"),e==="TRIPLE_TRIDENT"&&h.hasResourceAvailable("TINGLE")&&A.push(q.TingleB)&&h.tryConsumeResource("TINGLE"),e==="CONVICTION_MARCATO"&&h.hasResourceAvailable("WINGED_REDEMPTION")&&A.push(q.WingedRedemption)&&h.tryConsumeResource("WINGED_REDEMPTION"),e==="WINGED_REPROBATION"&&h.resources.get("WINGED_REPROBATION").availableAmount()===3&&A.push(q.WingedReprobation),A},isInstantFn:h=>h.hasResourceAvailable("SWIFTCAST")||r===0,onConfirm:d})},Rn=(e,t,n,o)=>et("BLU",e,t,n,{jobPotencyModifiers:l=>{const r=[];return l.hasResourceAvailable("WAXING_NOCTURNE")&&r.push(q.MoonFlute),r},validateAttempt:l=>!UT(l)&&(o.validateAttempt?.(l)??!0),...o});Bt("SONIC_BOOM",1,{basePotency:210,baseCastTime:1,manaCost:200,applicationDelay:.5});Bt("SHARPENED_KNIFE",1,{aspect:Ie.Physical,basePotency:220,baseCastTime:1,manaCost:200,applicationDelay:.5});Bt("GOBLIN_PUNCH",1,{aspect:Ie.Physical,basePotency:220,baseCastTime:0,manaCost:200,applicationDelay:.5});Bt("REVENGE_BLAST",1,{aspect:Ie.Physical,basePotency:500,baseCastTime:2,manaCost:200,applicationDelay:.5});Bt("WILD_RAGE",1,{aspect:Ie.Physical,basePotency:500,baseCastTime:5,manaCost:0,applicationDelay:.5});Bt("CONVICTION_MARCATO",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});Bt("WATER_CANNON",1,{basePotency:200,baseCastTime:2,manaCost:200,applicationDelay:.5});Bt("HYDRO_PULL",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});Bt("THE_ROSE_OF_DESTRUCTION",1,{basePotency:400,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_THE_ROSE_OF_DESTRUCTION",cooldown:30,maxCharges:1}});Bt("MOON_FLUTE",1,{baseCastTime:2,manaCost:500,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")||(e.refreshBuff("WAXING_NOCTURNE",.6),e.addEvent(new Ne("Waxing_Nocturne ended",15.6,()=>{e.hasResourceAvailable("WANING_NOCTURNE")||e.refreshBuff("WANING_NOCTURNE",0)})))}});Bt("DIAMONDBACK",1,{baseCastTime:2,manaCost:3e3,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")&&(e.tryConsumeResource("WAXING_NOCTURNE"),e.refreshBuff("WANING_NOCTURNE",0)),e.refreshBuff("DIAMONDBACK",.6)}});Bt("MATRA_MAGIC",1,{basePotency:800,baseCastTime:2,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_MATRA_MAGIC",cooldown:120,maxCharges:1}});Bt("SONG_OF_TORMENT",1,{basePotency:50,baseCastTime:2,manaCost:400,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(q.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push(q.Bristle),e.addDoTPotencies({node:t,effectName:"SONG_OF_TORMENT",skillName:"SONG_OF_TORMENT",tickPotency:50,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("SONG_OF_TORMENT",t)}});Bt("BREATH_OF_MAGIC",1,{basePotency:0,baseCastTime:2,manaCost:300,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(q.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push(q.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"BREATH_OF_MAGIC",skillName:"BREATH_OF_MAGIC",tickPotency:120,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("BREATH_OF_MAGIC",t)}});Bt("MORTAL_FLAME",1,{basePotency:0,baseCastTime:2,manaCost:500,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(q.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push(q.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"MORTAL_FLAME",skillName:"MORTAL_FLAME",tickPotency:40,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("MORTAL_FLAME",t)}});Bt("WHISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("BRISTLE"),e.refreshBuff("WHISTLE",0)}});Bt("BRISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("WHISTLE"),e.refreshBuff("BRISTLE",0)}});Bt("FINAL_STING",1,{aspect:Ie.Physical,basePotency:2e3,baseCastTime:2,manaCost:0,applicationDelay:.5,validateAttempt:e=>!e.hasResourceAvailable("BRUSH_WITH_DEATH"),onConfirm:e=>{e.refreshBuff("BRUSH_WITH_DEATH",0)}});Bt("TINGLE",1,{basePotency:100,baseCastTime:2,manaCost:200,applicationDelay:.5,onConfirm:e=>{e.refreshBuff("TINGLE",0)}});Bt("TRIPLE_TRIDENT",1,{aspect:Ie.Physical,basePotency:450,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_TRIPLE_TRIDENT",cooldown:90,maxCharges:1}});const UB=e=>e.hasResourceAvailable("COLD_FOG"),kB=e=>e.hasResourceAvailable("TOUCH_OF_FROST"),xB=[{newSkill:"POP_COLD_FOG",condition:e=>UB(e)},{newSkill:"WHITE_DEATH",condition:e=>kB(e)}];Bt("COLD_FOG",1,{replaceIf:xB,baseCastTime:2,cooldown:90,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_COLD_FOG",cooldown:90,maxCharges:1},onConfirm:e=>{e.refreshBuff("COLD_FOG",0)}});Bt("WHITE_DEATH",1,{startOnHotbar:!1,basePotency:400,baseCastTime:0,manaCost:0,applicationDelay:.5,validateAttempt:e=>!UT(e)&&e.hasResourceAvailable("TOUCH_OF_FROST")});Rn("POP_COLD_FOG",1,"cd_COLD_FOG_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:un,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("COLD_FOG"),onConfirm:e=>{e.tryConsumeResource("COLD_FOG"),e.refreshBuff("TOUCH_OF_FROST",0)}});Bt("END_PHANTOM_FLURRY",1,{startOnHotbar:!1,basePotency:600,baseCastTime:0,manaCost:0,applicationDelay:.5});Bt("WINGED_REPROBATION",1,{aspect:Ie.Physical,basePotency:300,baseCastTime:1,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_WINGED_REPROBATION",cooldown:90,maxCharges:1},onConfirm:e=>{e.resources.get("WINGED_REPROBATION").gain(1),e.resources.get("WINGED_REPROBATION").availableAmount()<=3&&e.cooldowns.get("cd_WINGED_REPROBATION").restore(90),e.resources.get("WINGED_REPROBATION").availableAmount()===4&&(e.tryConsumeResource("WINGED_REPROBATION",!0),e.refreshBuff("WINGED_REDEMPTION",0))}});Rn("ERUPTION",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:300,applicationDelay:.62});Rn("FEATHER_RAIN",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:220,applicationDelay:.62,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(q.MoonFlute),e.addDoTPotencies({node:t,effectName:"FEATHER_RAIN",skillName:"FEATHER_RAIN",tickPotency:40,speedStat:"sps",modifiers:n}),e.applyDoT("FEATHER_RAIN",t)}});Rn("MOUNTAIN_BUSTER",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});Rn("SHOCK_STRIKE",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});Rn("GLASS_DANCE",1,"cd_GLASS_DANCE",{cooldown:90,manaCost:500,potency:350,applicationDelay:.62});Rn("QUASAR",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:.62});Rn("J_KICK",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:1,animationLock:1});Rn("BOTH_ENDS",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:600,applicationDelay:.62});Rn("SEA_SHANTY",1,"cd_SEA_SHANTY",{cooldown:120,manaCost:300,potency:500,applicationDelay:.62});Rn("BEING_MORTAL",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:800,applicationDelay:.62});Rn("APOKALYPSIS",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:0,applicationDelay:1.38,animationLock:1.38,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(q.MoonFlute),e.addDoTPotencies({node:t,effectName:"APOKALYPSIS",skillName:"APOKALYPSIS",tickPotency:100,tickFrequency:1,speedStat:"unscaled",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("APOKALYPSIS",t)}});Rn("NIGHTBLOOM",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:400,applicationDelay:.62,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(q.MoonFlute),e.addDoTPotencies({node:t,effectName:"NIGHTBLOOM",skillName:"NIGHTBLOOM",tickPotency:75,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("NIGHTBLOOM",t)}});Rn("PHANTOM_FLURRY",1,"cd_PHANTOM_FLURRY",{replaceIf:[HB],cooldown:120,manaCost:300,potency:0,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(q.MoonFlute),e.addDoTPotencies({node:t,effectName:"PHANTOM_FLURRY",skillName:"PHANTOM_FLURRY",tickPotency:200,tickFrequency:1,speedStat:"unscaled",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("PHANTOM_FLURRY",t)}});Rn("SURPANAKHA",1,"cd_SURPANAKHA_LOCKOUT",{cooldown:1,manaCost:200,potency:e=>200*(1+.5*e.resources.get("SURPANAKHAS_FURY").availableAmount()),applicationDelay:.62,onApplication:e=>{e.resources.get("SURPANAKHAS_FURY").availableAmount()===3?e.tryConsumeResource("SURPANAKHAS_FURY",!0):e.refreshBuff("SURPANAKHAS_FURY",0)},secondaryCooldown:{cdName:"cd_SURPANAKHA",cooldown:30,maxCharges:4}});function fr(e){switch(e.job){case"PLD":return new xG(e);case"WAR":return new HG(e);case"DRK":return new YG(e);case"GNB":return new vw(e);case"WHM":return new eB(e);case"SCH":return new ZG(e);case"AST":return new WG(e);case"SGE":return new DG(e);case"MNK":return new IB(e);case"DRG":return new Tw(e);case"NIN":return new iB(e);case"SAM":return new EG(e);case"RPR":return new uG(e);case"VPR":return new NB(e);case"BRD":return new sw(e);case"MCH":return new Bw(e);case"DNC":return new hw(e);case"BLM":return new nw(e);case"SMN":return new RG(e);case"RDM":return new rG(e);case"PCT":return new Vw(e);case"BLU":return new MB(e)}return new Kt(e)}let Yb=e=>{};function PB(e){return`
		.castTimeTable {
			border-collapse: collapse;
			width: 100%;
		}
		.castTimeTable th, .castTimeTable td {
			text-align: center;
			padding: 0.15em;
			border: 1px solid ${e};
			width: 33%
		}
	`}function wB(e){const t=wt(e.job,e.override.type);let n;const o=ze(e.override.type);if(t.isCoolDown)n=g({en:o+" full in "+e.override.timeTillFullOrDrop+"s",zh:`${o}${e.override.timeTillFullOrDrop}`});else{n=o;const r=g({en:" (",zh:""}),d=g({en:") ",zh:""});(xe[e.override.type].mayBeToggled??!1)&&(n+=r+(e.override.effectOrTimerEnabled?g({en:"enabled",zh:""}):g({en:"disabled",zh:""}))+d),t.maxValue>1&&(n+=g({en:` (amount: ${e.override.stacks})`,zh:`${e.override.stacks}`})),t.maxTimeout>=0&&(e.override.type==="POLYGLOT"?e.override.timeTillFullOrDrop>0&&(n+=g({en:` next stack ready in ${e.override.timeTillFullOrDrop}s`,zh:`${e.override.timeTillFullOrDrop}`})):e.override.effectOrTimerEnabled&&(n+=g({en:` drops in ${e.override.timeTillFullOrDrop}s`,zh:`${e.override.timeTillFullOrDrop}`})))}n+=" ";let l;if(e.deleteFn){const r=e.deleteFn;l=c.jsx(is,{content:"[x]",onClickFn:d=>{r(e.override.type)}})}return c.jsxs("div",{style:{marginTop:10,color:"mediumpurple"},children:[n,l]})}function GB(e){const t=_=>{const O=e.initialResourceOverrides.findIndex(D=>D.type===_);O!==-1&&(e.initialResourceOverrides.splice(O,1),e.setInitialResourceOverrides(e.initialResourceOverrides))},n=e.initialResourceOverrides.map((_,O)=>c.jsx(wB,{job:e.job,override:_,deleteFn:t},O)),o=new Set(e.initialResourceOverrides.map(_=>_.type)),l=Bi(e.job),d=l.entries().flatMap(([_,O])=>o.has(_)?[]:[{rsc:_,isCoolDown:O.isCoolDown?1:0}]).toArray().sort((_,O)=>_.isCoolDown-O.isCoolDown).map((_,O)=>c.jsx("option",{value:_.rsc,children:ze(_.rsc)},O)),E=e.selectedOverrideResource,h=l.get(E);let A,R=!0;if(h!==void 0){let _,O,D="-1",U,H="0",L;h.isCoolDown?(_=!0,O=!1,R=!1,D=e.overrideTimer,U=e.setOverrideTimer):(h.maxTimeout>=0?(_=!0,D=e.overrideTimer,U=e.setOverrideTimer):_=!1,h.maxValue>1||h.maxValue===h.defaultValue?(O=!0,H=e.overrideStacks,L=e.setOverrideStacks):O=!1,R=xe[E].mayBeToggled??!1);const w=h.isCoolDown?g({en:"Time till full: ",zh:"CD"}):g(E==="POLYGLOT"?{en:"Time till next stack: ",zh:""}:{en:"Time till drop: ",zh:" "}),G=g({en:"enabled",zh:""});A=c.jsxs("div",{style:{margin:"6px 0"},children:[c.jsx("div",{hidden:!_,children:c.jsx(Pt,{description:w,defaultValue:D,onChange:U})}),c.jsx("div",{hidden:!O,children:c.jsx(Pt,{description:g({en:"Amount: ",zh:""}),defaultValue:H,onChange:L})}),c.jsxs("div",{hidden:!R,children:[c.jsx("input",{style:{position:"relative",top:3,marginRight:5},type:"checkbox",checked:e.overrideEnabled,onChange:B=>e.setOverrideEnabled(B.target.checked)}),c.jsx("span",{children:G})]})]})}const T=b.useContext(Ea),S=sl(T,"bgMediumContrast"),I=_=>{_.preventDefault();const O=e.selectedOverrideResource,D=Bi(e.job).get(O);let U=parseFloat(e.overrideTimer);const H=parseInt(e.overrideStacks),L=e.overrideEnabled;if(O==="POLYGLOT"&&e.overrideTimer===""&&(U=0),isNaN(H)||isNaN(U)){window.alert("some inputs are not numbers!");return}let w;if(D.isCoolDown){const G=D.maxStacks*D.cdPerStack;if(U<0||U>G){window.alert("invalid input timeout (must be in range [0, "+G+"])");return}w={type:O,timeTillFullOrDrop:U,stacks:D.maxStacks>1?H:1,effectOrTimerEnabled:!0}}else{if((D.maxValue>1||D.maxValue===D.defaultValue)&&(H<0||H>D.maxValue)){window.alert("invalid input amount (must be in range [0, "+D.maxValue+"])");return}if(D.maxTimeout>=0&&(U<0||U>D.maxTimeout)){window.alert("invalid input timeout (must be in range [0, "+D.maxTimeout+"])");return}w={type:O,timeTillFullOrDrop:D.maxTimeout>=0?U:-1,stacks:D.maxValue>1||D.maxValue===D.defaultValue?H:1,effectOrTimerEnabled:R||L}}e.setInitialResourceOverrides([...e.initialResourceOverrides,w])},C=c.jsx("div",{children:c.jsxs("form",{onSubmit:_=>I(_),style:{marginTop:16,outline:"1px solid "+S,outlineOffset:6},children:[c.jsx("select",{value:e.selectedOverrideResource,onChange:_=>{_.target&&e.setSelectedOverrideResource(_.target.value)},children:d}),A,c.jsx("input",{type:"submit",value:g({en:"add override",zh:""})})]})});return c.jsx("div",{style:{marginTop:10},children:c.jsx(ll,{title:"overrideInitialResources",titleNode:c.jsxs("span",{children:[g({en:"Override initial resources",zh:""})," ",c.jsx(Be,{topic:"overrideInitialResources",content:g({en:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",style:{color:"orangered"},children:c.jsx("b",{children:"Can create invalid game states. Go over Instructions/Troubleshoot first and use carefully at your own risk!"})}),c.jsx("div",{className:"paragraph",children:"Also, currently thunder dot buff created this way doesn't actually tick. It just shows the remaining buff timer."}),c.jsx("div",{className:"paragraph",children:"I would recommend saving settings (stats, lines presets, timeline markers etc.) to files first, in case invalid game states really mess up the tool and a complete reset is required."})]}),zh:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",style:{color:"orangered"},children:c.jsx("b",{children:"/"})}),c.jsx("div",{className:"paragraph",children:"dot"}),c.jsx("div",{className:"paragraph",children:""})]})})})]}),content:c.jsxs("div",{children:[c.jsx("button",{onClick:_=>{e.initialResourceOverrides.length>0&&e.setInitialResourceOverrides([]),_.preventDefault()},children:g({en:"clear all overrides",zh:""})}),n,C]})})})}function BB(e){const t=p.game.lucidTickOffset.toFixed(3),n=g({en:"the random time offset of lucid dreaming ticks relative to mp ticks",zh:"buff"}),o=p.game.dotTickOffset.toFixed(3),l=g({en:"the random time offset of DoT ticks relative to mp ticks",zh:"DoT"}),r=p.gameConfig.procMode,d=p.gameConfig.initialResourceOverrides.length,E=p.gameConfig.legacy_casterTax,h=g({en:`WARNING: this record was created in an earlier version of XIV in the Shell and uses the deprecated caster tax of ${E}s instead of calculating from your FPS input below. Hover for details: `,zh:`${E}`}),A=pt().warning,R=(I,C)=>{const _=FN[I];if(_.warningContent)return c.jsx("p",{style:{color:C},children:g(_.warningContent)})},T=g({en:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:"The caster tax config is now replaced by 0.1s + FPS tax and is more precise. You can read more about FPS tax in the Github repository wiki's implementation notes section."}),c.jsx("div",{className:"paragraph",style:{color:A},children:"You are strongly encouraged to create a new record (in another timeline slot or from 'apply and reset') and migrate your fight plan. Support for loading legacy files might drop in the future."})]}),zh:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:"0.1s /"}),c.jsx("div",{className:"paragraph",style:{color:A},children:""})]})}),S=c.jsxs("p",{style:{color:A},children:[h,c.jsx(Be,{topic:"legacy-caster-tax",content:T})]});return c.jsxs("div",{style:{textDecoration:e.dirty?"line-through":"none",marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+pt().bgHighContrast},children:[p.gameConfig.shellVersion<Ao.FpsTax?S:void 0,R(rt[e.job].implementationLevel,A),["CASTER","HEALER"].includes(rt[e.job].role)&&c.jsxs("div",{children:[g({en:"Lucid tick offset ",zh:"& "}),c.jsx(Be,{topic:"lucidTickOffset",content:n}),": ",t]}),p.game.dotResources.length>0&&c.jsxs("div",{children:[g({en:"DoT tick offset ",zh:"& "}),c.jsx(Be,{topic:"dotTickOffset",content:l}),": ",o]}),e.job==="MNK"&&c.jsxs("div",{children:[g({en:"SSS GCD",zh:"GCD"}),":"," ",p.gameConfig.adjustedSksGCD(5,p.game.inherentSpeedModifier()).toFixed(2)]}),c.jsxs("p",{children:[g({en:"Procs",zh:""}),": ",r]}),d>0&&c.jsx("p",{children:g({en:`${d} initial resource override(s)`,zh:`${d}`})})]})}function FB(){const t=(()=>{const T=Rt("playbackSettings");if(T)return JSON.parse(T)})(),[n,o]=b.useState(t?.tickMode??1),[l,r]=b.useState(t?.timeScale??ei.Manual),d=(T,S)=>{const I=JSON.stringify({tickMode:S,timeScale:T});ft("playbackSettings",I)},E=T=>{if(!T||!T.target||isNaN(parseInt(T.target.value)))return;r(parseInt(T.target.value));const S=parseInt(T.target.value);isNaN(S)||(p.setTimeControlSettings({tickMode:S,timeScale:n}),d(n,S))},h=T=>{const S=parseFloat(T);o(S),isNaN(S)||(p.setTimeControlSettings({tickMode:l,timeScale:S}),d(S,n))};b.useEffect(()=>{p.setTimeControlSettings({tickMode:l,timeScale:n})});const A={position:"relative",top:3,marginRight:"0.75em"},R={display:"inline-block",marginRight:"0.5em"};return c.jsxs("div",{children:[c.jsxs("p",{children:[c.jsxs("label",{style:R,children:[c.jsx("input",{style:A,type:"radio",onChange:E,value:ei.RealTimeAutoPause,checked:l===ei.RealTimeAutoPause,name:"tick mode"}),g({en:"real-time auto pause",zh:"("})]}),c.jsx(Be,{topic:"ctrl-realTimeAutoPause",content:c.jsxs("div",{className:"toolTip",children:[g({en:c.jsx("div",{className:"paragraph",children:"*Recommended*"}),zh:c.jsx("div",{className:"paragraph",children:"**"})}),g({en:c.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",c.jsx("br",{}),"- animation locks and cast bars will play out in sped-up real time until done"]}),zh:c.jsx("div",{className:"paragraph",children:"- ; CDCD"})})]})}),c.jsx("br",{}),c.jsxs("label",{style:R,children:[c.jsx("input",{style:A,type:"radio",onChange:E,value:ei.Manual,checked:l===ei.Manual,name:"tick mode"}),g({en:"manual",zh:""})]}),c.jsx(Be,{topic:"ctrl-manual",content:c.jsx("div",{className:"toolTip",children:g({en:c.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",c.jsx("br",{}),"- animation locks and cast times are skipped immediately"]}),zh:c.jsx("div",{className:"paragraph",children:"- ; CDCD"})})})})]}),c.jsx(Pt,{defaultValue:`${n}`,description:c.jsxs("span",{children:[g({en:"time scale ",zh:" "}),c.jsx(Be,{topic:"timeScale",content:c.jsx("div",{children:g({en:"rate at which game time advances automatically (aka when in real-time)",zh:""})})}),":"," "]}),onChange:h})]})}function zB(e){const t=b.useContext(Ea),n=e.imported?sl(t,"success"):sl(t,"text");return c.jsx(Pt,{style:{color:n},defaultValue:e.initial,description:e.description,onChange:o=>{e.dispatch({[e.name]:o}),e.removeImportedField(e.name)}})}function jB(e){const t=Gn(b.useContext(Ea)),[n,o]=b.useState(""),{imported:l,setImported:r}=e,d=async A=>{A.preventDefault();const R=URL.parse(n),T=new Headers;try{if(R&&R.hostname==="etro.gg"){const S=R.pathname.split("/");if(S[1]!=="gearset"&&S.length!==3)throw new Error("Invalid etro gearset link (hover ? in URL input box for details)");T.append("Content-Type","application/json");const I=await fetch("https://etro.gg/api/gearsets/"+S[2],{method:"GET",headers:T});if(I.ok){const C=await I.json(),_=new Map(C.totalParams.map(w=>[w.name,w.value])),O=C.totalParams.length>0?C.totalParams[0].value:0;if(!(C.jobAbbrev in rt))throw new Error("Imported gearset was for a job ("+C.jobAbbrev+") that XIV in the Shell doesn't support");const D=st.getSubstatBase(parseFloat(C.level)).toString(),U=_.get("SPS")??D,H=_.get("SKS")??D,L=["job","level","criticalHit","directHit","determination","main"];_.has("SPS")&&L.push("spellSpeed"),_.has("SKS")&&L.push("skillSpeed"),_.has("PIE")&&L.push("piety"),_.has("TEN")&&L.push("tenacity"),_.has("Weapon Damage")&&L.push("wd"),e.dispatch({job:C.jobAbbrev,level:C.level,spellSpeed:U,skillSpeed:H,wd:_.get("Weapon Damage"),criticalHit:_.get("CRT"),directHit:_.get("DH"),determination:_.get("DET"),piety:_.get("PIE"),tenacity:_.get("TEN"),main:O}),e.setImportedFields(L),r(!0)}else throw console.error(I),new Error("etro load failed (please check your link)")}else if(R&&R.hostname==="xivgear.app"){const S=R.searchParams.get("page");if(!S)throw new Error("xivgear link must be to a specific set (hover ? in URL input box for details)");const I=S.startsWith("sl|")?S.substr(3):S;T.append("Content-Type","application/json");const C=await fetch("https://api.xivgear.app/fulldata/"+I,{method:"GET",headers:T});if(C.ok){const _=await C.json();if(!(_.job in rt))throw new Error("Imported gearset was for a job ("+_.job+") that XIV in the Shell doesn't support");const O=_.sets[0].computedStats,D=Math.max(...["strength","dexterity","intelligence","mind"].map(L=>O[L]??0)).toString(),U=Math.max(O.wdPhys??0,O.wdMag??0).toString(),H={job:_.job,level:_.level,spellSpeed:O.spellspeed,skillSpeed:O.skillspeed,criticalHit:O.crit,directHit:O.dhit,determination:O.determination,piety:O.piety,tenacity:O.tenacity,wd:U,main:D};e.dispatch(H),e.setImportedFields(Object.keys(H)),r(!0)}else throw console.error("xivgear load failed: "+C),new Error("xivgear load failed (please check your link)")}else throw new Error("Invalid gearset link (must be from etro.gg or xivgear.app)")}catch(S){console.error(S),window.alert(S.message)}},E=c.jsx("a",{href:"https://etro.gg",target:"_blank",rel:"noreferrer",children:"etro"}),h=c.jsx("a",{href:"https://xivgear.app",target:"_blank",rel:"noreferrer",children:"xivgear"});return c.jsxs("form",{onSubmit:d,children:[g({en:c.jsxs("span",{children:["Load stats from ",E,"/",h,":"," "]}),zh:c.jsxs("span",{children:["",E,"",h,""]})}),c.jsx(Be,{topic:"gearImport",content:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:g({en:c.jsxs("span",{children:["Enter and ",c.jsx(Ai,{text:"Load"})," a link to a gearset from xivgear.app or etro.gg, edit the rest of config, then"," ",c.jsx(Ai,{text:"apply and reset"}),"."]}),zh:c.jsxs("span",{children:["xivgear.appetro.gg",c.jsx(Ai,{text:""}),"",c.jsx(Ai,{text:""}),""]})})}),c.jsx("p",{children:g({en:"etro: Copy/paste the link to the set (example: https://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e)",zh:"etrohttps://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e"})}),c.jsx("p",{children:g({en:'xivgear: At the top of the page, click "Export" -> "Selected Set" -> "Link to This Set" -> "Generate" (example: https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a)',zh:'xivgear "Export" -> "Selected Set" -> "Link to This Set" -> "Generate"https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a'})})]})}),c.jsxs("div",{style:{position:"relative",marginTop:5},children:[c.jsx(Pt,{style:{display:"inline-block"},width:25,description:"",onChange:A=>o(A)}),c.jsx("span",{children:" "}),c.jsx("input",{style:{display:"inline-block"},type:"submit",value:g({en:"Load",zh:""})}),c.jsx(cM,{style:{display:l?"inline":"none",color:t.success,position:"relative",top:4,marginLeft:8}})]})]})}function nN(e,t,n,o){const l=parseInt(n),r=parseInt(e),d=parseFloat(t);let E,h;if(isNaN(l)||isNaN(r)||isNaN(d)||r<st.getSubstatBase(l))E="n/a",h="n/a";else{const A=st.preTaxGcd(l,r,2.5,o);E=A.toFixed(2),h=st.afterFpsTax(d,A).toFixed(3)}return{gcdStr:E,taxedGcdStr:h}}function YB(e){const t=new Map(e.map(d=>[d.type,d]));if(t.has("ASTRAL_FIRE")&&t.has("UMBRAL_ICE")){const d=t.get("ASTRAL_FIRE").stacks,E=t.get("UMBRAL_ICE").stacks;if(d>0&&E>0)return window.alert("shouldn't have both AF and UI stacks"),!1}let n=0,o=0,l=0;if(t.has("ASTRAL_FIRE")&&(n=t.get("ASTRAL_FIRE").stacks),t.has("UMBRAL_ICE")&&(o=t.get("UMBRAL_ICE").stacks),t.has("UMBRAL_HEART")&&(l=t.get("UMBRAL_HEART").stacks),l>0&&n===0&&o===0)return window.alert("since there's at least one UH stack, there should also be Enochian and AF or UI"),!1;let r=!1;return(n>0||o>0||l>0)&&(r=!0),t.has("POLYGLOT")&&t.get("POLYGLOT").timeTillFullOrDrop>0&&!r?(window.alert("since a timer for polyglot is set (time till next stack > 0), there must also be AF/UI"),!1):!0}function KB(){const e=Gn(b.useContext(Ea)),[t,n]=b.useState(void 0),[o,l]=b.useState(Ao.AllaganGcdFormula),[r,d]=b.useState([]),[E,h]=b.useState("0"),[A,R]=b.useState("0"),[T,S]=b.useState(!0),I=Ae=>{G(!0),d(Ae),O(Ae)},[C,_]=b.useState("NEVER"),O=Ae=>{const be=new Set(Ae.map(ge=>ge.type)),_e=Bi(L.job).keys().find(ge=>!be.has(ge))??"NEVER";_(_e)},[D,U]=b.useState(!1);function H(Ae,be){const _e={...Ae,...be};if(!Object.is(_e,Ae)){if(_e.dirty=be.dirty??!0,be.job!==void 0&&be.job!==Ae.job){const ge=new ti(Qm(be.job,parseInt(be.level??Ae.level))),ye=fr(ge).inherentSpeedModifier();if(n(ye),be.job===p.record.config?.job)Object.assign(_e,p.gameConfig.serialized()),d(p.gameConfig.initialResourceOverrides);else{d([]);const Fe=Bi(be.job).keys().toArray()?.[0]??"NEVER";_(Fe),Object.assign(_e,MP(be.job))}}if(be.level!==void 0&&be.level!==Ae.level){const ge=new ti(Qm(Ae.job,parseInt(be.level))),ye=fr(ge).inherentSpeedModifier();n(ye)}U(parseInt(_e.level)!==p.gameConfig.level||_e.job!==p.gameConfig.job)}return _e}const[L,w]=b.useReducer(H,{job:"BLM",level:`${Ze.lvl100}`,spellSpeed:"0",skillSpeed:"0",criticalHit:"0",directHit:"0",determination:"0",piety:"0",animationLock:"0",fps:"0",gcdSkillCorrection:"0",timeTillFirstManaTick:"0",countdown:"0",randomSeed:"",procMode:on.RNG,tenacity:"0",wd:"0",main:"0",dirty:!1}),G=Ae=>w({dirty:Ae}),B=Ae=>be=>w({[Ae]:be}),[j,Q]=b.useState(!1),ce=Object.fromEntries(Object.keys(L).map(Ae=>[Ae,!1])),[ue,te]=b.useState(ce),ee=Ae=>{te({...ue,...Object.fromEntries(Ae.map(be=>[be,!0]))})},fe=Ae=>{te({...ue,[Ae]:!1})},he=()=>{te(ce),Q(!1)};b.useEffect(()=>{Yb=Ae=>{l(Ae.shellVersion),I(Ae.initialResourceOverrides),w({...Object.fromEntries(Object.entries(Ae).flatMap(([be,_e])=>be!=="initialResourceOverrides"?[[be,_e.toString()]]:[]))}),G(!1),he(),O(Ae.initialResourceOverrides)}});const M=Ae=>ue[Ae]?e.success:e.text,K=c.jsxs("div",{style:{marginBottom:10},children:[c.jsx("span",{children:g({en:"job: ",zh:""})}),c.jsx("select",{style:{outline:"none",color:M("job")},value:L.job,onChange:Ae=>{fe("job"),w({job:Ae.target.value})},children:es.filter(Ae=>rt[Ae].implementationLevel!=="UNIMPLEMENTED").map(Ae=>{const be=g({en:Ae,zh:rt[Ae].zh}),_e=rt[Ae].implementationLevel;return _e!=="LIVE"?c.jsx("option",{value:Ae,children:be+` (${g(FN[_e].label??{en:""})})`},Ae):c.jsx("option",{value:Ae,children:be},Ae)})})]}),{gcdStr:$,taxedGcdStr:de}=nN(L.spellSpeed,L.fps,L.level,t),{gcdStr:y,taxedGcdStr:Y}=nN(L.skillSpeed,L.fps,L.level,t),W=o>=Ao.FpsTax?e.text:e.warning,z=L.job,Z=rt[z].role==="CASTER"||rt[z].role==="HEALER",ne={en:Z?"spell":"skill",zh:Z?"":""},P=Ae=>st.preTaxGcd(parseFloat(L.level),parseFloat(Z?L.spellSpeed:L.skillSpeed),Ae,t),X=Ae=>st.afterFpsTax(parseFloat(L.fps),P(Ae)),se=c.jsxs("div",{children:[c.jsx("style",{children:PB(e.bgHighContrast)}),c.jsx("div",{style:{marginBottom:10},children:g({en:`Preview numbers based on your current ${ne.en} speed and FPS input:`,zh:`${ne.zh}`})}),c.jsx("table",{className:"castTimeTable",children:c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("th",{children:g({en:"GCD time",zh:"GCD"})}),c.jsx("th",{children:g({en:"After FPS tax",zh:""})})]}),[2.5,3,3.5,4].map((Ae,be)=>c.jsxs("tr",{children:[c.jsxs("td",{children:[P(Ae).toFixed(2)," (",Ae.toFixed(2)," ",g({en:"base",zh:""}),")"]}),c.jsx("td",{children:X(Ae).toFixed(3)})]},"gcdPreview"+be.toString()))]})})]}),Ee=(Ae,be)=>{if(Ae.preventDefault(),!be&&D){console.error("attempted to apply w/o reset, but job or level changed");return}if(YB(r)){let _e=L.randomSeed;if(_e.length===0){for(let Aa=0;Aa<4;Aa++)_e+=Math.floor(Math.random()*10).toString();w({randomSeed:_e})}const ge=["spellSpeed","skillSpeed","criticalHit","directHit","determination","animationLock","fps","gcdSkillCorrection","timeTillFirstManaTick","countdown","level","wd","main","tenacity"];if(ge.map(Aa=>isNaN(parseFloat(L[Aa].toString()))).some(Aa=>Aa)){window.alert("Some config fields are not numbers!");return}if(!(L.job in rt)){window.alert("Invalid job: "+L.job);return}const ye=p.gameConfig.serialized(),Fe=p.record.serialized();p.setConfigAndRestart({job:L.job,randomSeed:_e.trim(),procMode:L.procMode,initialResourceOverrides:r,...Object.fromEntries(ge.map(Aa=>[Aa,parseFloat(L[Aa].toString())]))},be),p.undoStack.push(new OP(ye,p.gameConfig.serialized(),be?Fe:void 0)),G(!1),U(!1),he(),p.updateAllDisplay(),p.scrollToTime()}},Oe=["criticalHit","directHit","determination","piety","animationLock"].map(Ae=>c.jsx(zB,{name:Ae,description:Kc(Ae),initial:L[Ae].toString(),dispatch:w,imported:ue[Ae],removeImportedField:be=>fe(be)},Ae)),Ue=c.jsxs("div",{style:{marginBottom:16},children:[c.jsxs("div",{children:[c.jsx("span",{children:g({en:"level: ",zh:""})}),c.jsxs("select",{style:{outline:"none",color:M("level")},value:L.level,onChange:Ae=>w({level:Ae.target.value}),children:[(L.level==="100"||z!=="BLU")&&c.jsx("option",{value:Ze.lvl100,children:"100"},Ze.lvl100),(L.level==="90"||z!=="BLU")&&c.jsx("option",{value:Ze.lvl90,children:"90"},Ze.lvl90),c.jsx("option",{value:Ze.lvl80,children:"80"},Ze.lvl80),c.jsx("option",{value:Ze.lvl70,children:"70"},Ze.lvl70)]})]}),c.jsxs("div",{children:[c.jsx(Pt,{style:{display:"inline-block",color:M("spellSpeed")},defaultValue:L.spellSpeed,description:Kc("spellSpeed"),onChange:B("spellSpeed")}),c.jsxs("span",{children:[" ","(GCD: ",$," ",c.jsx(Be,{topic:"gcdPreview",content:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:g({en:"Preview of displayed GCD based on your spell speed.",zh:"GCD."})}),c.jsx("p",{children:g({en:`Measured average GCD should be ${de} due to FPS tax.`,zh:`GCD${de}`})})]})}),")"]})]}),c.jsxs("div",{children:[c.jsx(Pt,{style:{display:"inline-block",color:M("skillSpeed")},defaultValue:L.skillSpeed,description:Kc("skillSpeed"),onChange:B("skillSpeed")}),c.jsxs("span",{children:[" ","(GCD: ",y," ",c.jsx(Be,{topic:"sksGcdPreview",content:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:g({en:"Preview of displayed GCD based on your skill speed.",zh:"GCD."})}),c.jsx("p",{children:g({en:`Measured average GCD should be ${Y} due to FPS tax.`,zh:`GCD${Y}`})})]})}),")"]})]}),Oe,c.jsxs("div",{children:[c.jsx(Pt,{componentColor:W,style:{display:"inline-block"},defaultValue:L.fps,description:Kc("fps"),onChange:B("fps")}),c.jsxs("span",{children:[" ","(",g({en:`${P(2.5).toFixed(2)}s w/ tax`,zh:`${P(2.5).toFixed(2)}s+`}),": ",X(2.5).toFixed(3)," ",c.jsx(Be,{topic:"gcdTaxPreview",content:se}),")"]})]}),c.jsx(Pt,{componentColor:W,defaultValue:L.gcdSkillCorrection,description:c.jsxs("span",{children:[g({en:"GCD correction",zh:"GCD"})," ",c.jsx(Be,{topic:"cast-time-correction",content:g({en:"Leaving this at 0 will probably give you the most accurate simulation. But if you want to manually correct your GCD skill durations (including casts) for whatever reason, you can put a small number (can be negative)",zh:"0GCD"})}),":"," "]}),onChange:B("gcdSkillCorrection")}),c.jsx(Pt,{defaultValue:L.timeTillFirstManaTick,description:g({en:"time till first MP tick: ",zh:""}),onChange:B("timeTillFirstManaTick")}),c.jsx(Pt,{defaultValue:L.countdown,description:c.jsxs("span",{children:[g({en:"countdown ",zh:" "}),c.jsx(Be,{topic:"countdown",content:g({en:"can use a negative countdown to start from a specific time of fight",zh:""})}),":"," "]}),onChange:B("countdown")}),c.jsx(Pt,{defaultValue:L.randomSeed,description:c.jsxs("span",{children:[g({en:"random seed ",zh:" "}),c.jsx(Be,{topic:"randomSeed",content:g({en:"can be anything, or leave empty to get 4 random digits.",zh:"4"})}),":"," "]}),onChange:B("randomSeed")}),c.jsxs("div",{children:[c.jsxs("span",{children:[g({en:"proc mode ",zh:"BUFF "}),c.jsx(Be,{topic:"procMode",content:g({en:"Default RNG: 40% Firestarter",zh:"RNG40%AlwaysNever"})}),":"," "]}),c.jsxs("select",{style:{outline:"none"},value:L.procMode,onChange:Ae=>w({procMode:Ae.target.value}),children:[c.jsx("option",{value:on.RNG,children:"RNG"},on.RNG),c.jsx("option",{value:on.Never,children:"Never"},on.Never),c.jsx("option",{value:on.Always,children:"Always"},on.Always)]})]}),c.jsx(GB,{job:L.job,initialResourceOverrides:r,overrideTimer:E,overrideStacks:A,overrideEnabled:T,setInitialResourceOverrides:I,selectedOverrideResource:C,setSelectedOverrideResource:_,setOverrideTimer:h,setOverrideStacks:R,setOverrideEnabled:S})]});return c.jsxs("div",{style:{marginBottom:20},children:[c.jsx(jB,{imported:j,setImported:Q,setImportedFields:ee,dispatch:w}),c.jsx("br",{}),K,c.jsx(BB,{job:p.getActiveJob(),dirty:L.dirty}),Ue,c.jsx("p",{style:{paddingBottom:5},children:g({en:"You can also import/export fights from/to local files at the bottom of the page.",zh:""})}),c.jsx("div",{className:"invisibleScrollbar",style:{boxSizing:"border-box",width:"100%",position:"absolute",paddingRight:5,paddingLeft:5,bottom:0,left:0,overflowY:"scroll"},children:c.jsxs("div",{style:{width:"100%",boxSizing:"border-box",backgroundColor:e.background,borderTop:"1px solid "+e.bgMediumContrast,paddingTop:5,paddingBottom:5,display:"flex",flexDirection:"row",justifyContent:"space-between",gap:5},children:[c.jsxs("button",{onClick:Ae=>Ee(Ae,!1),style:{width:"100%",fontWeight:!D&&L.dirty?"bold":"normal",textDecoration:D?"line-through":void 0},disabled:D,children:[g({en:"apply",zh:""}),D&&" ",D&&c.jsx(Be,{topic:"applyWithoutReset",content:g({en:"Must reset timeline because job or level changed.",zh:""})}),!D&&L.dirty?"*":""]}),c.jsxs("button",{onClick:Ae=>Ee(Ae,!0),style:{width:"100%",fontWeight:L.dirty?"bold":"normal"},children:[g({en:"apply and reset",zh:""}),L.dirty?"*":""]})]})})]})}function Kb(e){let t=es[0],n=0;return es.forEach(o=>{const l=e.reduce((r,d)=>pH(o,d)?r+1:r,0);l>n&&(t=o,n=l)}),t}class VB{presetLines=[];constructor(){this.#t()}#e(){ft("presetLines",JSON.stringify(this.serialized()))}#t(){const t=Rt("presetLines");if(t!==null){const n=JSON.parse(t);return this.deserializeAndAppend(n),!0}return!1}serialized(){return{fileType:ni.SkillSequencePresets,presets:this.presetLines.map(({actions:t,job:n})=>t.serialized())}}deserializeAndAppend(t){for(const n of t.presets){const o=Cr.deserialize(n.actions);o.name=n.name;const l=o.actions.flatMap(r=>r.info.type===Ge.Skill?[r.info.skillName]:[]);this.addLine(o,n.job??Kb(l))}}getLinesForJob(t){return this.presetLines.flatMap(({actions:n,job:o})=>o===t?[n]:[])}addLine(t,n){this.presetLines.push({actions:t,job:n}),il(),this.#e()}deleteLine(t){for(let n=0;n<this.presetLines.length;n++)if(this.presetLines[n].actions===t){this.presetLines.splice(n,1),il(),this.#e();return}console.assert(!1)}deleteAllLines(){this.presetLines=[],il(),this.#e()}}const WB=new Set(["BLIZZARD","FIRE","BLIZZARD_II","FIRE_II","BLIZZARD_III","FIRE_III","FREEZE","FLARE","BLIZZARD_IV","FIRE_IV","DESPAIR","HIGH_FIRE_II","HIGH_BLIZZARD_II","FLARE_STAR"]),XB=new Set(["FOUL","XENOGLOSSY","PARADOX"]),Zo=new Set([]),Va=e=>p.getUntargetableMask()&&p.timeline.duringUntargetable(e),kr=(e,t)=>p.getUntargetableMask()?p.timeline.getTargetableDurationBetween(e,t):t-e;function Yl(e){return e.info.type===Ge.Skill&&p.game.dotSkills.includes(e.info.skillName)}function qB(e,t,n){console.assert(Yl(e),`${e.getNameForMessage()} is not registered as a dot skill`);const o=e.getInitialPotency(),l={castTime:e.tmp_startLockTime?e.tmp_startLockTime-p.gameConfig.countdown:0,applicationTime:e.applicationTime?e.applicationTime-p.gameConfig.countdown:0,displayedModifiers:[],gap:0,override:0,mainPotencyHit:!0,baseMainPotency:0,baseDotPotency:0,initialHitCalculationModifiers:[],tickCalculationModifiers:[],totalNumTicks:0,numHitTicks:0,potencyWithoutPot:0,potPotency:0,partyBuffPotency:0,targetCount:e.targetCount,mainHitFalloff:o?.falloff??0};l.gap=e.getOverTimeGap(t,"damage"),l.override=e.getOverTimeOverrideAmount(t,"damage"),l.baseMainPotency=o?.base??0,l.initialHitCalculationModifiers=o?.modifiers??[],l.mainPotencyHit=e.hitBoss(Va),l.tickCalculationModifiers=l.initialHitCalculationModifiers.filter(h=>h.source!==x.COMBO&&h.source!==x.POSITIONAL),t==="WILDFIRE"&&l.displayedModifiers.push(x.NO_CDH);for(let h=0;h<l.initialHitCalculationModifiers.length;h++){const A=l.initialHitCalculationModifiers[h].source;[x.ENO,x.FUGETSU,x.NO_MERCY,x.POWER_SURGE,x.LANCE_CHARGE,x.LIFE_OF_THE_DRAGON,x.BATTLE_LITANY,x.FIGHT_OR_FLIGHT,x.MOON_FLUTE,x.WHISTLE,x.BRISTLE,x.TINGLEA,x.TINGLEB,x.DIVINATION,x.CHAIN_STRAT].includes(A)&&l.displayedModifiers.push(A)}e.getDotPotencies(t).forEach((h,A)=>{h.hasResolved()&&(l.totalNumTicks++,l.baseDotPotency=h.base,h.hasHitBoss(Va)&&l.numHitTicks++)});const r=e.getPotency({tincturePotencyMultiplier:1,includePartyBuffs:!1,untargetable:Va,includeSplash:!0}).applied,d=e.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),includePartyBuffs:!1,untargetable:Va,includeSplash:!0}).applied,E=e.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),includePartyBuffs:!0,untargetable:Va,includeSplash:!0}).applied;return l.potencyWithoutPot=r,l.potPotency=d-r,l.partyBuffPotency=E-d,l}function ZB(e){const t={basePotency:0,displayedModifiers:[],calculationModifiers:[],falloff:1,targetCount:1};if(e.info.type===Ge.Skill){const n=e.info.skillName,o=e.getInitialPotency();if(o)if(t.targetCount=e.targetCount,t.falloff=o.falloff??1,WB.has(n)){t.basePotency=o.base,t.calculationModifiers=o.modifiers;for(const l of o.modifiers){const r=l.source;if(r!==x.ENO&&r!==x.POT){t.displayedModifiers.push(r);break}}}else if(XB.has(n))for(const l of o.modifiers){const r=l.source;if(r===x.ENO){t.basePotency=o.base,t.displayedModifiers=[r],t.calculationModifiers=o.modifiers;break}}else if(Yl(e))t.basePotency=o.base,e.info.targetCount=o.targetCount;else{t.basePotency=o.base;for(const l of o.modifiers){const r=l.source;r!==x.POT&&(t.displayedModifiers.push(r),t.calculationModifiers.push(l))}}return t}else return console.assert(!1),t}function QB(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function JB(e,t){const n=ZB(t),o={mainTableIndex:-1,expandedNode:n};for(let l=0;l<e.length;l++)if(t.info.type===Ge.Skill&&t.info.skillName===e[l].skillName&&QB(n.displayedModifiers,e[l].displayedModifiers)&&t.targetCount===e[l].targetCount)return o.mainTableIndex=l,o;return o}function ai(e){return!Zo.has(e)}function $B(){return Zo.size===0}function iN(e){e.include&&Zo.has(e.skillNameOrDoT)?(Zo.delete(e.skillNameOrDoT),e.skillNameOrDoT==="DoT"?p.game.dotSkills.forEach(t=>Zo.delete(t)):p.game.dotSkills.includes(e.skillNameOrDoT)&&Zo.delete("DoT")):(Zo.add(e.skillNameOrDoT),e.skillNameOrDoT!=="DoT"&&p.game.dotSkills.includes(e.skillNameOrDoT)&&Zo.add("DoT")),p.displayCurrentState(),p.updateStats()}function e2(e){const t={totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}},n=p.record.getFirstSelection(),o=p.record.getLastSelection();if(n&&o&&n.tmp_startLockTime!==void 0&&o.tmp_endLockTime!==void 0){t.totalDuration=o.tmp_endLockTime-n.tmp_startLockTime;const l=p.gameConfig.countdown;t.targetableDuration=kr(n.tmp_startLockTime-l,o.tmp_endLockTime-l)}return p.record.iterateSelected(l=>{if(l.info.type===Ge.Skill&&!(l.info.skillName in mo)){const r=ai(l.info.skillName);p.game.skillsList.get(l.info.skillName).cdName==="cd_GCD"&&r&&(l.hitBoss(Va)?t.gcdSkills.applied++:l.resolved()||t.gcdSkills.pending++);const E=l.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:Va,includePartyBuffs:!0,excludeDoT:Yl(l)&&!ai("DoT"),includeSplash:!0});r&&(t.potency.applied+=E.applied,t.potency.pending+=E.snapshottedButPending)}}),t}function t2(e){let t=Zc.Normal;p.displayingUpToDateGameState||(t=Zc.Historical),p.record.getFirstSelection()&&(t=Zc.Selected);const n={applied:0,pending:0},o={applied:0,pending:0},l=[],r={totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},d=new Map,E=new Map,h=A=>{if(A.info.type===Ge.Skill){const R=A.info.skillName,T=ai(R),S=R in mo;p.game.skillsList.get(R).cdName==="cd_GCD"&&T&&(A.hitBoss(Va)?o.applied++:A.resolved()||o.pending++);const C=A.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:Va,includePartyBuffs:!0,includeSplash:!0,excludeDoT:Yl(A)&&!ai("DoT")});if(T&&!S&&(n.applied+=C.applied,n.pending+=C.snapshottedButPending),A.resolved()){const _=JB(l,A);_.mainTableIndex<0&&(l.push({skillName:R,displayedModifiers:_.expandedNode.displayedModifiers,basePotency:S?0:_.expandedNode.basePotency,calculationModifiers:_.expandedNode.calculationModifiers,usageCount:0,hitCount:0,totalPotencyWithoutPot:0,showPotency:A.anyPotencies(),potPotency:0,potCount:0,partyBuffPotency:0,falloff:_.expandedNode.falloff,targetCount:_.expandedNode.targetCount}),_.mainTableIndex=l.length-1);const O=A.hitBoss(Va);if(l[_.mainTableIndex].usageCount+=1,O&&(l[_.mainTableIndex].hitCount+=1),S)return;const D=A.getPotency({tincturePotencyMultiplier:1,untargetable:Va,includePartyBuffs:!1,excludeDoT:Yl(A)&&!ai("DoT"),includeSplash:!0}).applied,U=A.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:Va,includePartyBuffs:!1,excludeDoT:Yl(A)&&!ai("DoT"),includeSplash:!0}).applied,H=A.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:Va,includePartyBuffs:!0,excludeDoT:Yl(A)&&!ai("DoT"),includeSplash:!0}).applied;l[_.mainTableIndex].totalPotencyWithoutPot+=D,l[_.mainTableIndex].potPotency+=U-D,l[_.mainTableIndex].partyBuffPotency+=H-U,O&&A.hasBuff(k.Tincture)&&(l[_.mainTableIndex].potCount+=1);let L=E.get(R)??0;L+=H,E.set(R,L),T&&(r.totalPotencyWithoutPot+=D,r.totalPotPotency+=U-D,r.totalPartyBuffPotency+=H-U),A.getAllDotPotencies().forEach((w,G)=>{let B=d.get(G);const j=p.game.excludedDoTs.includes(G);B||(B={tableRows:[],summary:{cumulativeGap:0,cumulativeOverride:0,timeSinceLastDoTDropped:0,totalTicks:0,maxTicks:p.getMaxTicks(p.game.time,G,j),dotCoverageTimeFraction:p.getDotCoverageTimeFraction(p.game.getDisplayTime(),G),totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},lastDoT:void 0},d.set(G,B));const Q=qB(A,G,B.lastDoT);B.tableRows.push(Q),B.lastDoT=A,B.summary.cumulativeGap+=Q.gap,B.summary.cumulativeOverride+=Q.override,B.summary.totalTicks+=Q.numHitTicks,B.summary.totalPotencyWithoutPot+=Q.potencyWithoutPot,B.summary.totalPotPotency+=Q.potPotency,B.summary.totalPartyBuffPotency+=Q.partyBuffPotency})}}};return t===Zc.Selected?p.record.iterateSelected(h):p.record.iterateAll(h),d.forEach((A,R)=>{if(A.lastDoT){const T=A.lastDoT.applicationTime;console.assert(T!==void 0,`DoT node for ${R} was not resolved`);const S=T+p.game.getStatusDuration(R),I=kr(S,p.game.getDisplayTime()),C=p.game.getDisplayTime()-S;C>0&&(A.summary.cumulativeGap+=I,A.summary.timeSinceLastDoTDropped=C)}else{const T=kr(0,Math.max(0,p.game.getDisplayTime()));A.summary.cumulativeGap=T,A.summary.timeSinceLastDoTDropped=T}}),l.sort((A,R)=>{if(A.showPotency!==R.showPotency){const T=A.showPotency?1:0;return(R.showPotency?1:0)-T}else if(A.skillName!==R.skillName){const T=E.get(A.skillName)??0;return(E.get(R.skillName)??0)-T}else{if(A.targetCount!==R.targetCount)return R.targetCount-A.targetCount;if(A.displayedModifiers.length!==R.displayedModifiers.length)return R.displayedModifiers.length-A.displayedModifiers.length;for(let T=0;T<A.displayedModifiers.length;T++){const S=A.displayedModifiers[T]-R.displayedModifiers[T];if(S!==0)return S}return 0}}),{time:p.game.time,tinctureBuffPercentage:e.tinctureBuffPercentage,totalPotency:n,lastDamageApplicationTime:e.lastDamageApplicationTime,countdown:p.gameConfig.countdown,gcdSkills:o,mainTable:l,mainTableSummary:r,dotTables:d,mode:t}}var Zc=(e=>(e[e.Normal=0]="Normal",e[e.Historical=1]="Historical",e[e.Selected=2]="Selected",e))(Zc||{});let lR=e=>{},Vb=e=>{};function oN(e){const t=TH(e.buff),n=EH(e.buff);return c.jsx("span",{style:{borderRadius:2,border:"1px solid "+n,fontSize:11,marginRight:4,padding:"1px 4px",background:n+"1f"},children:c.jsx("b",{style:{color:n},children:t})})}function Nm(e){let t=e.basePotency,n=e.basePotency.toFixed(2)+g({en:"(base)",zh:"()"});e.explainUntargetable&&(n+=g({en:"(untargetable)",zh:"()"}));let o="";if(e.calc.forEach(l=>{l.kind==="adder"&&l.additiveAmount>0&&(t+=l.additiveAmount,o+=" + "+l.additiveAmount+"("+wg(l.source)+")")}),o&&(n="[ "+n+o+" ]"),e.calc.forEach(l=>{l.kind==="multiplier"&&l.potencyFactor!==1&&(t*=l.potencyFactor,n+="  "+l.potencyFactor+"("+wg(l.source)+")")}),e.targetCount&&e.falloff!==void 0&&e.targetCount>1){const l=1+(1-e.falloff)*(e.targetCount-1);n=`[ ${n} ]  ${l}(${e.targetCount}${g({en:" targets",zh:""})})`,t*=l}return c.jsxs("span",{style:{textDecoration:e.includeInStats?"none":"line-through"},children:[t.toFixed(2)," ",c.jsx(Be,{topic:e.helpTopic,content:n})]})}function a2(){const[e,t]=b.useState("8"),n=l=>{t(l);const r=parseFloat(l);isNaN(r)||(p.setTinctureBuffPercentage(r),ft("tinctureBuffPercentage",l))};b.useEffect(()=>{const l=Rt("tinctureBuffPercentage");l!==null&&n(l)},[]);const o=c.jsxs("span",{children:[g({en:"exclude damage when untargetable",zh:"Boss0"})," ",c.jsx(Be,{topic:"untargetableMask",content:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:g({en:"Having this checked will exclude damages from untargetable phases.",zh:"Boss"})}),c.jsx("div",{className:"paragraph",children:g({en:'You can mark up such phases using timeline markers of type "Untargetable".',zh:"  "})}),c.jsx("div",{className:"paragraph",children:g({en:"This is just a statistics helper though. For example it doesn't prevent you from using skills when the boss is untargetable.",zh:"  "})})]})})]});return c.jsxs("div",{children:[c.jsx(Pt,{defaultValue:e,description:g({en:" tincture potency buff ",zh:" "}),onChange:n,width:2,style:{display:"inline"}}),c.jsx("span",{children:"%"}),c.jsx(Xc,{uniqueName:"untargetableMask",label:o,onChange:l=>{p.setUntargetableMask(l)}})]})}const lN="0.375em 0.75em";class n2 extends sn.Component{selected={totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}};data={time:0,tinctureBuffPercentage:0,countdown:0,totalPotency:{applied:0,pending:0},lastDamageApplicationTime:0,gcdSkills:{applied:0,pending:0},mainTable:[],mainTableSummary:{totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},dotTables:new Map,mode:0};static contextType=Ea;constructor(t){super(t),lR=n=>{this.data={...this.data,...n},this.forceUpdate()},Vb=n=>{this.selected={...this.selected,...n},this.forceUpdate()}}componentWillUnmount(){lR=t=>{}}render(){const t=Gn(this.context),n=$B(),o=g({en:": ",zh:""}),l=g({en:" (",zh:""}),r=g({en:") ",zh:""}),d=n?"":g({en:" (checked only)",zh:""}),E=this.data.lastDamageApplicationTime-this.data.countdown,h=kr(0,E),A=this.data.lastDamageApplicationTime>-this.data.countdown,R=A?E.toFixed(3).toString():"N/A";let T=g({en:"Total potency",zh:""}),S=g({en:"Selected potency",zh:""});if(this.data.tinctureBuffPercentage>0){const M=l+g({en:"pot +",zh:" +"})+this.data.tinctureBuffPercentage+"%"+r;T+=M,S+=M}T+=d,S+=d,T+=o+this.data.totalPotency.applied.toFixed(2),S+=o+this.selected.potency.applied.toFixed(2),this.data.totalPotency.pending>0&&(T+=l+this.data.totalPotency.pending.toFixed(2)+g({en:" pending",zh:""})+r),this.selected.potency.pending>0&&(S+=l+this.selected.potency.pending.toFixed(2)+g({en:" pending",zh:""})+r);let I=g({en:"GCD skills",zh:"GCD"})+d+o+this.data.gcdSkills.applied,C=g({en:"Selected GCD skills",zh:"GCD"})+d+o+this.selected.gcdSkills.applied;this.data.gcdSkills.pending>0&&(I+=l+"+"+this.data.gcdSkills.pending+g({en:" not yet applied",zh:""})+r),this.selected.gcdSkills.pending>0&&(C+=l+"+"+this.selected.gcdSkills.pending+g({en:" not yet applied",zh:""})+r);const _=p.game.overTimeEffectGroups.filter(M=>M.reportName&&!M.isHealing).map(M=>{let K=M.reportName+g({en:" uptime",zh:""})+o,$=0,de=0,y=0;return M.groupedEffects.forEach(Y=>{const W=this.data.dotTables.get(Y.effectName);W&&($+=W.summary.dotCoverageTimeFraction,de+=W.summary.totalTicks,y=Math.max(y,W.summary.maxTicks))}),K+=($*100).toFixed(2)+"%",K+=l+g({en:"ticks",zh:""})+o+de+"/"+y+r,c.jsx("div",{children:K},`dot-uptime-${M.reportName}`)});let O;const D=this.selected.targetableDuration>0;this.selected.totalDuration>0&&(O=c.jsxs("div",{style:{flex:1,color:t.accent},children:[c.jsxs("div",{children:[g({en:"Selected duration",zh:""}),o,this.selected.totalDuration.toFixed(3)]}),c.jsx("div",{children:S}),c.jsxs("div",{children:[g({en:"Selected PPS",zh:"PPS"}),o,D?(this.selected.potency.applied/this.selected.targetableDuration).toFixed(2):"N/A"]}),c.jsx("div",{children:C})]}));const U=c.jsxs("div",{style:{display:"flex",marginBottom:10,flexDirection:"row"},children:[c.jsxs("div",{style:{flex:1},children:[c.jsxs("div",{style:{color:this.data.mode!==0?t.historical:t.text},children:[c.jsxs("div",{children:[g({en:"Last damage application time",zh:""}),o,R]}),c.jsx("div",{children:T}),c.jsxs("div",{children:["PPS"," ",c.jsx(Be,{topic:"ppsNotes",content:c.jsxs("div",{className:"toolTip",children:[c.jsx("div",{className:"paragraph",children:g({en:"(total applied potency of checked skills) / (total targetable duration from 0s until last damage application time).",zh:" / (0s - )"})}),c.jsx("div",{className:"paragraph",children:g({en:"could be inaccurate if any damage happens before pull, or if some damage's not applied yet",zh:"0sPPS"})})]})}),o,A?(this.data.totalPotency.applied/h).toFixed(2):"N/A"]}),c.jsx("div",{children:I}),_]}),c.jsxs("div",{style:{marginTop:10},children:[c.jsx(a2,{}),c.jsx(ol,{fileFormat:To.Csv,getContentFn:()=>({body:p.getDamageLogCsv()}),filename:"damage-log",displayName:g({en:"download detailed damage log as CSV file",zh:"CSV"})})]})]}),O]}),H=function(M){return{verticalAlign:"middle",boxSizing:"border-box",display:"inline-block",width:M+"%",padding:lN}},L=function(M){return p.game.dotSkills.includes(M)},w=function(M){return L(M)?!0:["AUTOMATON_QUEEN","WILDFIRE",...Object.keys(mo)].includes(M)},G=function(M){const K=M.row.skillName===M.lastRowSkill,$=[];$.push(M.row.displayedModifiers.map((se,Ee)=>c.jsx(oN,{buff:se},Ee)));const de=ai(M.row.skillName),y=[];!K&&M.row.basePotency>0&&!(M.row.skillName in mo)&&y.push(c.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:de,onChange:()=>{iN({skillNameOrDoT:M.row.skillName,include:!de})}},"main")),!K&&L(M.row.skillName)&&y.push(c.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:ai("DoT"),onChange:()=>{iN({skillNameOrDoT:"DoT",include:!ai("DoT")})}},"dot"));let Y;K||(Y=c.jsxs("span",{children:[c.jsxs("span",{style:{textDecoration:de?"none":"line-through",color:de?t.text:t.bgHighContrast},children:[li(M.row.skillName)," ",L(M.row.skillName)?c.jsx(Be,{topic:"potencyStats-thunder",content:g({en:"See table below for details",zh:""})}):void 0]}),L(M.row.skillName)?c.jsxs("span",{style:{textDecoration:ai("DoT")?"none":"line-through",color:ai("DoT")?t.text:t.bgHighContrast},children:[c.jsx("br",{}),g({en:"(DoT)",zh:"DoT"})," "]}):void 0]}));let W;M.row.targetCount&&M.row.basePotency>0&&(W=c.jsx("span",{style:{textDecoration:de?"none":"line-through"},children:M.row.targetCount}));let z;M.row.basePotency>0&&!w(M.row.skillName)&&(z=c.jsx(Nm,{includeInStats:de,basePotency:M.row.basePotency,helpTopic:"mainTable-potencyCalc-"+M.key,calc:M.row.calculationModifiers,falloff:M.row.falloff,targetCount:M.row.targetCount}));const Z=M.row.usageCount-M.row.hitCount,ne=c.jsxs("span",{style:{textDecoration:de?"none":"line-through"},children:[M.row.hitCount,Z>0?c.jsxs("span",{style:{color:t.timeline.untargetableDamageMark+"af"},children:[" ","+",Z," ",c.jsx(Be,{topic:"mainTable-numUntargetableUsages-"+M.key,content:g({en:"usage(s) when untargetable",zh:"Boss"})})]}):void 0]});let P;M.row.showPotency&&!(M.row.skillName in mo)&&(P=c.jsxs("span",{style:{textDecoration:de?"none":"line-through"},children:[M.row.totalPotencyWithoutPot.toFixed(2),M.row.potPotency>0?c.jsxs("span",{style:{color:de?t.timeline.potCover:t.bgHighContrast},children:[" ","+",M.row.potPotency.toFixed(2),"(",g({en:"pot",zh:""}),")(",M.row.potCount,")"]}):void 0,M.row.partyBuffPotency>0?c.jsxs("span",{style:{color:de?t.accent:t.bgHighContrast},children:[" ","+",M.row.partyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]}));const X={textAlign:"left",position:"relative",borderTop:K?"none":"1px solid "+t.bgMediumContrast};return de||(X.color=t.bgHighContrast),c.jsxs("div",{style:X,children:[c.jsx("div",{style:H(3),children:y}),c.jsx("div",{style:H(18),children:Y}),c.jsx("div",{style:H(8),children:W}),c.jsx("div",{style:H(19),children:$}),c.jsx("div",{style:H(14),children:z}),c.jsx("div",{style:H(8),children:ne}),c.jsx("div",{style:H(30),children:P})]},M.key)},B=[];for(let M=0;M<this.data.mainTable.length;M++)B.push(G({row:this.data.mainTable[M],key:M,lastRowSkill:M===0?void 0:this.data.mainTable[M-1].skillName}));const j=function(M){const K=[];K.push(M.row.displayedModifiers.map((X,se)=>c.jsx(oN,{buff:X},se)));const $=M.row.gap.toFixed(3),de=M.row.gap>0?c.jsx("span",{children:$}):c.jsx("span",{}),y=M.row.override.toFixed(3),Y=M.row.override>0?c.jsx("span",{children:y}):c.jsx("span",{}),W=c.jsx(Nm,{basePotency:M.row.mainPotencyHit?M.row.baseMainPotency:0,includeInStats:!0,explainUntargetable:!M.row.mainPotencyHit,helpTopic:M.name+"Table-main-"+M.key,calc:M.row.initialHitCalculationModifiers,targetCount:M.row.targetCount,falloff:M.row.mainHitFalloff}),z=c.jsx(Nm,{basePotency:M.row.baseDotPotency,includeInStats:!0,helpTopic:M.name+"Table-dot-"+M.key,calc:M.row.tickCalculationModifiers,targetCount:M.row.targetCount,falloff:0}),Z=M.row.totalNumTicks-M.row.numHitTicks,ne=c.jsxs("span",{children:[M.row.numHitTicks,Z>0?c.jsxs("span",{style:{color:t.timeline.untargetableDamageMark+"af"},children:[" ","+",Z," ",c.jsx(Be,{topic:"thunderTable-numUntargetableTicks-"+M.key,content:g({en:"tick(s) when untargetable",zh:"BossDoT"})})]}):void 0]}),P=c.jsxs("span",{children:[M.row.potencyWithoutPot.toFixed(2),M.row.potPotency>0?c.jsxs("span",{style:{color:t.timeline.potCover},children:[" ","+",M.row.potPotency.toFixed(2),"(",g({en:"pot",zh:""}),")"]}):void 0,M.row.partyBuffPotency>0?c.jsxs("span",{style:{color:t.accent},children:[" ","+",M.row.partyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]});return c.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+t.bgMediumContrast},children:[c.jsx("div",{style:H(8),children:M.row.castTime.toFixed(3)}),c.jsx("div",{style:H(8),children:M.row.applicationTime.toFixed(3)}),c.jsx("div",{style:H(12),children:K}),c.jsx("div",{style:H(10),children:de}),c.jsx("div",{style:H(10),children:Y}),c.jsx("div",{style:H(10),children:W}),c.jsx("div",{style:H(10),children:z}),c.jsx("div",{style:H(8),children:ne}),c.jsx("div",{style:H(24),children:P})]},M.key)},Q=[];this.data.dotTables.forEach((M,K)=>{const $=[];for(let de=0;de<M.tableRows.length;de++)$.push(j({name:K,row:M.tableRows[de],key:de}));Q.push({dotName:K,tableRows:$})});const ce={display:"inline-block",padding:lN};let ue=g(n?{en:"Applied Skills",zh:""}:{en:"Applied Skills (Checked Only)",zh:""}),te="";if(this.data.mode===1){const M=(this.data.time-this.data.countdown).toFixed(3)+"s",K=l+g({en:"up till "+M,zh:""+M})+r;ue+=K,te=K}else if(this.data.mode===2){const M=l+g({en:"from selected skills",zh:""})+r;ue+=M,te+=M}let ee=t.text;this.data.mode===1?ee=t.historical:this.data.mode===2&&(ee=t.accent);const fe=c.jsxs("div",{id:"damageTable",style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[c.jsx("div",{style:{...H(100),textAlign:"center",marginBottom:10},children:c.jsx("b",{style:{color:ee},children:ue})}),c.jsxs("div",{style:{outline:"1px solid "+t.bgMediumContrast},children:[c.jsxs("div",{children:[c.jsx("div",{style:{display:"inline-block",width:"21%"},children:c.jsx("span",{style:ce,children:c.jsx("b",{children:g({en:"skill",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"27%"},children:c.jsx("span",{style:ce,children:c.jsx("b",{children:g({en:"targets",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"14%"},children:c.jsx("span",{style:ce,children:c.jsx("b",{children:g({en:"potency",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"8%"},children:c.jsx("span",{style:ce,children:c.jsx("b",{children:g({en:"count",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"30%"},children:c.jsx("span",{style:ce,children:c.jsx("b",{children:g({en:"total",zh:""})})})})]}),B,c.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+t.bgMediumContrast},children:[c.jsx("div",{style:H(70)}),c.jsx("div",{style:H(30),children:c.jsxs("span",{children:[this.data.mainTableSummary.totalPotencyWithoutPot.toFixed(2),this.data.mainTableSummary.totalPotPotency>0?c.jsxs("span",{style:{color:t.timeline.potCover},children:[" ","+",this.data.mainTableSummary.totalPotPotency.toFixed(2),g({en:" (pot +"+this.data.tinctureBuffPercentage+"%)",zh:"( +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,this.data.mainTableSummary.totalPartyBuffPotency>0?c.jsxs("span",{style:{color:t.accent},children:[" ","+",this.data.mainTableSummary.totalPartyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]})})]})]})]}),he=Q.map(M=>{const K=M.tableRows,$=this.data.dotTables.get(M.dotName)?.summary;if($===void 0)return c.jsx(c.Fragment,{});const de=ze(M.dotName)+te;return c.jsxs("div",{style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[c.jsx("div",{style:{...H(100),textAlign:"center",marginBottom:10},children:c.jsx("b",{style:{color:ee},children:de})}),c.jsxs("div",{style:{outline:"1px solid "+t.bgMediumContrast},children:[c.jsxs("div",{children:[c.jsx("div",{style:{display:"inline-block",width:"8%"},children:c.jsx("span",{style:ce,children:c.jsx("b",{children:g({en:"cast time",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"8%"},children:c.jsx("span",{style:ce,children:c.jsx("b",{children:g({en:"application time",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"12%"},children:c.jsx("span",{style:ce})}),c.jsx("div",{style:{display:"inline-block",width:"10%"},children:c.jsxs("span",{style:ce,children:[c.jsxs("b",{children:[g({en:"gap",zh:"DoT"})," "]}),c.jsx(Be,{topic:"dot-gap-title",content:g({en:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:"DoT coverage time gap since pull or previous application"}),c.jsx("div",{className:"paragraph",children:"The last row also includes gap at the beginning and end of the fight"})]}),zh:c.jsx("div",{children:"DoTDoT"})})})]})}),c.jsx("div",{style:{display:"inline-block",width:"10%"},children:c.jsxs("span",{style:ce,children:[c.jsxs("b",{children:[g({en:"override",zh:"DoT"})," "]}),c.jsx(Be,{topic:"dot-override-title",content:g({en:c.jsx("div",{children:"Overridden DoT time from previous application"}),zh:c.jsx("div",{children:"DoT"})})})]})}),c.jsx("div",{style:{display:"inline-block",width:"10%"},children:c.jsx("span",{style:ce,children:c.jsx("b",{children:g({en:"initial",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"10%"},children:c.jsx("span",{style:ce,children:c.jsx("b",{children:g({en:"DoT",zh:"DoT"})})})}),c.jsx("div",{style:{display:"inline-block",width:"8%"},children:c.jsx("span",{style:ce,children:c.jsx("b",{children:g({en:"ticks",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"24%"},children:c.jsx("span",{style:ce,children:c.jsx("b",{children:g({en:"total",zh:""})})})})]}),K,c.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+t.bgMediumContrast},children:[c.jsx("div",{style:H(28)}),c.jsx("div",{style:H(10),children:$.cumulativeGap.toFixed(3)}),c.jsx("div",{style:H(10),children:$.cumulativeOverride.toFixed(3)}),c.jsx("div",{style:H(20)}),c.jsx("div",{style:H(8),children:p.game.fullTimeDoTs.includes(M.dotName)?c.jsxs(c.Fragment,{children:[$.totalTicks,"/",$.maxTicks]}):c.jsx(c.Fragment,{children:$.totalTicks})}),c.jsxs("div",{style:H(24),children:[$.totalPotencyWithoutPot.toFixed(2),$.totalPotPotency>0?c.jsxs("span",{style:{color:t.timeline.potCover},children:[" ","+",$.totalPotPotency.toFixed(2),g({en:"(pot +"+this.data.tinctureBuffPercentage+"%)",zh:"( +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,$.totalPartyBuffPotency>0?c.jsxs("span",{style:{color:t.accent},children:[" ","+",$.totalPartyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]})]})]})]},`dot-table-${M.dotName}`)});return c.jsxs("div",{children:[U,c.jsxs("div",{children:[fe,he]})]})}}const Nu=e=>{e.job==="RDM"&&e.tryConsumeResource("DUALCAST")&&p.reportWarning({kind:"custom",en:"dualcast dropped"})},Oi=e=>e.job!=="NIN"||!e.hasResourceAvailable("TEN_CHI_JIN"),bi=e=>{e.job==="NIN"&&e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")};et(cn,"INTERJECT",18,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Interject.png",startsAuto:!0});et(dl,"HEAD_GRAZE",24,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Head Graze.png"});cn.forEach(e=>{je(e,"REPRISAL",1,{timeout:15})});we(cn,"REPRISAL",22,"cd_REPRISAL",{rscType:"REPRISAL",applicationDelay:.62,cooldown:60,duration:e=>e.hasTraitUnlocked("ENHANCED_REPRISAL")&&15||10,assetPath:"Role/Reprisal.png",startsAuto:!0});$a.forEach(e=>{je(e,"FEINT",1,{timeout:15})});we($a,"FEINT",22,"cd_FEINT",{rscType:"FEINT",applicationDelay:.537,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_FEINT")&&15||10,assetPath:"Role/Feint.png",validateAttempt:Oi,onConfirm:bi});[...xr,...ri].forEach(e=>{je(e,"ADDLE",1,{timeout:15})});we([...ri,...xr],"ADDLE",8,"cd_ADDLE",{rscType:"ADDLE",applicationDelay:.621,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_ADDLE")&&15||10,assetPath:"Role/Addle.png"});cn.forEach(e=>{je(e,"RAMPART",1,{timeout:20})});we(cn,"RAMPART",8,"cd_RAMPART",{rscType:"RAMPART",applicationDelay:.62,cooldown:90,assetPath:"Role/Rampart.png"});$a.forEach(e=>{je(e,"TRUE_NORTH",1,{timeout:10})});we($a,"TRUE_NORTH",50,"cd_TRUE_NORTH",{rscType:"TRUE_NORTH",applicationDelay:0,cooldown:45,maxCharges:2,assetPath:"Role/True North.png",validateAttempt:Oi,onConfirm:bi});[...si,...ri,...xr].forEach(e=>{je(e,"SWIFTCAST",1,{timeout:10})});we([...si,...ri,...xr],"SWIFTCAST",18,"cd_SWIFTCAST",{rscType:"SWIFTCAST",applicationDelay:0,cooldown:40,assetPath:"Role/Swiftcast.png"});[...si,...ri,...xr].forEach(e=>{je(e,"LUCID_DREAMING",1,{timeout:21})});we([...si,...ri,...xr],"LUCID_DREAMING",14,"cd_LUCID_DREAMING",{rscType:"LUCID_DREAMING",applicationDelay:.623,cooldown:60,assetPath:"Role/Lucid Dreaming.png",onApplication:(e,t)=>{const n=e.resources.get("LUCID_DREAMING");n.node=t,n.tickCount=0;const o=e.findNextQueuedEventByTag(nn.LucidTick);o&&o.addTag(nn.ManaGain)}});[...cn,...$a,...dl].forEach(e=>{je(e,"ARMS_LENGTH",1,{timeout:6.5})});we([...cn,...$a,...dl],"ARMS_LENGTH",32,"cd_ARMS_LENGTH",{rscType:"ARMS_LENGTH",applicationDelay:.62,cooldown:120,assetPath:"Role/Arms Length.png",validateAttempt:Oi,onConfirm:bi});[...si,...ri].forEach(e=>{je(e,"SURECAST",1,{timeout:6.5})});we([...si,...ri],"SURECAST",44,"cd_SURECAST",{rscType:"SURECAST",applicationDelay:0,cooldown:120,assetPath:"Role/Surecast.png"});$a.forEach(e=>{je(e,"BLOODBATH",1,{timeout:20})});we($a,"BLOODBATH",8,"cd_BLOODBATH",{rscType:"BLOODBATH",applicationDelay:.625,cooldown:90,assetPath:"Role/Bloodbath.png",validateAttempt:Oi,onConfirm:bi});et([...$a,...dl],"SECOND_WIND",12,"cd_SECOND_WIND",{healingPotency:600,applicationDelay:.625,cooldown:120,assetPath:"Role/Second Wind.png",validateAttempt:Oi,onConfirm:bi});et(cn,"PROVOKE",15,"cd_PROVOKE",{applicationDelay:.62,cooldown:30,assetPath:"Role/Provoke.png",drawsAggro:!0,startsAuto:!0});et(cn,"SHIRK",48,"cd_SHIRK",{applicationDelay:0,cooldown:120,assetPath:"Role/Shirk.png"});et(cn,"LOW_BLOW",25,"cd_LOW_BLOW",{applicationDelay:.62,cooldown:25,assetPath:"Role/Low Blow.png",startsAuto:!0});Bn(si,"ESUNA",10,{manaCost:400,castTime:0,applicationDelay:1.14,assetPath:"Role/Esuna.png"});et(si,"RESCUE",48,"cd_RESCUE",{applicationDelay:0,cooldown:120,assetPath:"Role/Rescue.png"});et($a,"LEG_SWEEP",10,"cd_LEG_SWEEP",{applicationDelay:.625,cooldown:40,assetPath:"Role/Leg Sweep.png",validateAttempt:Oi,onConfirm:bi});we(es,"TINCTURE",1,"cd_TINCTURE",{rscType:"TINCTURE",applicationDelay:.64,cooldown:270,assetPath:"General/Tincture.png",validateAttempt:Oi,onConfirm:Me(Nu,bi)});we(es,"SPRINT",1,"cd_SPRINT",{rscType:"SPRINT",applicationDelay:.133,cooldown:60,assetPath:"General/Sprint.png",validateAttempt:Oi,onConfirm:Me(Nu,bi)});cn.forEach(e=>{je(e,"SHIELD_WALL",1,{timeout:10}),je(e,"STRONGHOLD",1,{timeout:12})});const kT=e=>Object.keys(kN).forEach(t=>{t!=="UNKNOWN"&&e.tryConsumeResource(t)});dn(cn,"SHIELD_WALL","cd_LIMIT_BREAK_1",{tier:"1",applicationDelay:.45,animationLock:1.93,onApplication:e=>{kT(e),e.gainStatus("SHIELD_WALL")}});dn(cn,"STRONGHOLD","cd_LIMIT_BREAK_2",{tier:"2",applicationDelay:.89,animationLock:3.86,onApplication:e=>{kT(e),e.gainStatus("STRONGHOLD")}});cn.forEach(e=>{const t=rt[e].limitBreak??"UNKNOWN",n=rt[e].limitBreakBuff??"UNKNOWN";je(e,n,1,{timeout:8}),dn(e,t,"cd_LIMIT_BREAK_3",{tier:"3",applicationDelay:1.34,animationLock:3.86,onApplication:o=>{kT(o),o.gainStatus(n)}})});dn(si,"HEALING_WIND","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,healingPotency:25,applicationDelay:.76,animationLock:2.1});dn(si,"BREATH_OF_THE_EARTH","cd_LIMIT_BREAK_2",{tier:"2",castTime:2,healingPotency:50,applicationDelay:.8,animationLock:5.13});si.forEach(e=>{const t=rt[e].limitBreak??"UNKNOWN";dn(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:2,healingPotency:100,applicationDelay:.8,animationLock:8.1})});dn($a,"BRAVER","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.86,potency:1e3,validateAttempt:Oi,onConfirm:bi});dn($a,"BLADEDANCE","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.28,animationLock:3.86,potency:2200,validateAttempt:Oi,onConfirm:bi});$a.forEach(e=>{const t=rt[e].limitBreak??"UNKNOWN";dn(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:2.26,animationLock:3.7,potency:3500,validateAttempt:Oi,onConfirm:bi})});dn(dl,"BIGSHOT","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.1,potency:540});dn(dl,"DESPERADO","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:2.49,animationLock:3.1,potency:1170});dl.forEach(e=>{const t=rt[e].limitBreak??"UNKNOWN";dn(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:3.16,animationLock:3.7,potency:1890})});dn(ri,"SKYSHARD","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:1.64,animationLock:3.1,onConfirm:Nu,potency:600});dn(ri,"STARSTORM","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.75,animationLock:5.1,onConfirm:Nu,potency:1300});ri.forEach(e=>{const t=rt[e].limitBreak??"UNKNOWN";dn(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:4.5,animationLock:8.1,onConfirm:e==="RDM"?Nu:void 0,potency:2100})});const sN="stdtick";class i2{timeScale;shouldLoop;tickMode;timeline;#e;gameConfig;record;imageExportConfig;timelineDrawOptions=cP;queuedPastes;clipboardMode;game;#t=0;#a=!0;#n;#i=[];#c=[];#s=[];#r=new Map;#u=new Map;#m=new Map;#R=new Map;savedHistoricalGame;savedHistoricalRecord;#T=!1;#o=!1;#I=!1;#d=!1;displayingUpToDateGameState=!0;#A=0;lastSkillTime=0;undoStack;constructor(){this.timeScale=1,this.shouldLoop=!1,this.queuedPastes=0,this.tickMode=ei.RealTimeAutoPause,this.timeline=new Hx,this.timeline.reset(),this.#e=new VB,this.gameConfig=new ti(ah),this.game=fr(this.gameConfig),this.record=new Eo,this.record.config=this.gameConfig,this.imageExportConfig={wrapThresholdSeconds:JSON.parse(Rt("img: wrapThresholdSeconds")??"0"),includeTime:JSON.parse(Rt("img: includeTime")??"true")},this.clipboardMode=Rt("radio: clipboardMode")??"plain",this.#n=-this.gameConfig.countdown,this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.undoStack=new IP,this.#E()}get inputLocked(){return this.shouldLoop||this.queuedPastes>0}updateStats(){this.#S(),this.#g()}updateAllDisplay(t=this.game){Yb(t.config.serialized()),this.updateStatusDisplay(t),this.updateSkillButtons(t),this.updateTimelineDisplay(),this.updateStats(),Zh(this.getActiveJob())}#h(t){const n=t.initialResourceOverrides;for(let o=0;o<n.length;o++)n[o].applyTo(this.game)}#C(t){const n=this.#o;this.displayingUpToDateGameState=!1,this.#o=!0;const o=this.game,l=this.record,r=this.#n;t(),this.#o=n,this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.game=o,this.record=l,this.#n=r}checkRecordValidity(t,n,o=!1){console.assert(t.config!==void 0);const l={isValid:!0,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0};if(n===void 0)return console.log("no edit happened"),l;this.#E(!1);const r=t.config??this.gameConfig;this.game=fr(r),this.record=new Eo,this.record.config=r,this.#n=-r.countdown,this.#h(this.record.config);const d=this.#f({line:t,replayMode:Na.Edited,firstEditedNodeIndex:n,selectionStart:t.getFirstSelection(),selectionEnd:t.getLastSelection()});return this.record.selectionStartIndex=t.selectionStartIndex,this.record.selectionStartIndex=t.selectionStartIndex,l.isValid=d.invalidActions.length===0,l.invalidActions=d.invalidActions,l.skillUseTimes=d.skillUseTimes,d.success&&(l.straightenedIfValid=this.record),this.displayingUpToDateGameState=o,l}displayHistoricalState(t,n){const o=t+this.gameConfig.countdown,l=this.record.getFirstSelection()!==void 0;this.#C(()=>{const r=this.record;this.game=fr(this.gameConfig),this.record=new Eo,this.record.config=this.gameConfig,this.#n=-this.gameConfig.countdown,this.#h(this.record.config),this.#f({line:r,replayMode:Na.Exact,maxReplayTime:o,cutoffIndex:n}),this.timeline.updateElem({type:at.s_HistoricalCursor,time:this.game.time,displayTime:this.game.getDisplayTime(),enabled:!0}),this.updateStatusDisplay(this.game),this.updateSkillButtons(this.game),il(),this.#S(),this.timeline.drawElements()}),Jh(!0),l&&this.#S(!0),this.#g()}displayCurrentState(){this.displayingUpToDateGameState=!0,this.timeline.updateElem({type:at.s_HistoricalCursor,enabled:!1,time:0,displayTime:0}),Jh(!1),this.updateAllDisplay(this.game)}restart(){this.#E(),this.#h(this.gameConfig)}#E(t=!0){this.game=fr(this.gameConfig),this.#_({shouldLoop:!1}),this.timeline.reset(),t&&this.record.unselectAll(),this.#n=-this.gameConfig.countdown,this.#i=[],this.#s=[],this.#r=new Map,this.#m=new Map,this.#u=new Map,this.#R=new Map,this.#T=!1,this.displayingUpToDateGameState=!0}getPresetLines(){return this.#e.getLinesForJob(this.getActiveJob())}serializedPresets(){return this.#e.serialized()}addSelectionToPreset(t="(untitled)"){console.assert(this.record.getFirstSelection());const n=this.record.getSelected();n.name=t,this.#e.addLine(n,this.getActiveJob())}appendFilePresets(t){this.#e.deserializeAndAppend(t)}loadBattleRecordFromFile(t){t.config===void 0&&(window.alert("Error loading record: saved record had no config object"),console.error(t)),t.config.procMode===void 0&&(t.config.rngProcs!==void 0?t.config.procMode=t.config.rngProcs?on.RNG:on.Never:t.config.procMode=on.RNG),t.config.fps===void 0&&(t.config.fps=ah.fps),t.config.gcdSkillCorrection===void 0&&(t.config.gcdSkillCorrection=ah.gcdSkillCorrection),t.config.level&&(t.config.level=parseInt(t.config.level)),t.config.skillSpeed===void 0&&(t.config.skillSpeed=st.getSubstatBase(t.config.level)),t.config.shellVersion===void 0&&(t.config.shellVersion=Ao.Initial),t.config.job===void 0&&(t.config.job=Kb(t.actions.flatMap(n=>n.skillName?[BR(n.skillName)]:[]))),$a.includes(t.config.job)||(t.config.initialResourceOverrides=t.config.initialResourceOverrides.filter(n=>![xe.FLANK_POSITIONAL.name,xe.REAR_POSITIONAL.name].includes(n.type))),qc(()=>{const n=new ti(t.config);this.gameConfig=n,this.record=new Eo,this.record.config=n,this.#E(),this.#h(this.gameConfig);const o=Cr.deserialize(t.actions),l=this.#f({line:o,replayMode:Na.Exact});if(!l.success){let r=`Error loading record- 
`;if(l.invalidActions.length>0){const d=l.invalidActions[0].node;if(d.info.type===Ge.Skill){const E=d.info.skillName?li(d.info.skillName):"(unknown)";r+=`Stopped here because the next action ${E} can't be added: `}else r+=`Stopped here because the next action ${d.info.type} can't be added: `}r+=l.invalidActions[0].reason,window.alert(r)}})}applyEditedRecord(){const t=this.record;this.record=new Eo,this.record.config=t.config,this.#E(),this.#h(this.gameConfig);const n=this.#f({line:t,replayMode:Na.Exact,removeTrailingIdleTime:!0});console.assert(n.success),t.selectionStartIndex!==void 0&&(this.record.selectSingle(t.selectionStartIndex),this.record.selectUntil(t.selectionEndIndex)),this.autoSave()}deleteSelectedSkills(){const t=this.record.selectionStartIndex;if(t!==void 0){this.record.deleteSelected();const n=Ka();t<this.record.length?(this.record.selectSingle(t),this.displayHistoricalState(n.skillUseTimes[t],t)):this.displayCurrentState(),this.autoSave()}}#S(t=!1){if(!this.#d){let n=t2({tinctureBuffPercentage:this.#t,lastDamageApplicationTime:this.#n});t&&(n={mainTable:n.mainTable,mainTableSummary:n.mainTableSummary,dotTables:n.dotTables,mode:n.mode}),lR(n)}}#g(){if(!this.#d){const t=e2({tinctureBuffPercentage:this.#t,lastDamageApplicationTime:this.#n});Vb(t)}}getTincturePotencyMultiplier(){return 1+this.#t*.01}setTinctureBuffPercentage(t){this.#t=t,this.displayCurrentState(),go()}setUntargetableMask(t){this.#a=t,this.displayCurrentState(),go()}getUntargetableMask(){return this.#a}getMaxTicks(t,n,o){let l=0;const r=[n];return o||r.push(sN),r.forEach(d=>{this.#r.get(d)?.forEach(E=>{!Va(E-this.gameConfig.countdown)&&E<=t&&l++})}),l}getDotCoverageTimeFraction(t,n){return this.getOverTimeCoverageTimeFraction(t,n,this.#m)}getHotCoverageTimeFraction(t,n){return this.getOverTimeCoverageTimeFraction(t,n,this.#R)}getOverTimeCoverageTimeFraction(t,n,o){if(t<=ha.epsilon)return 0;const l=o.get(n);if(!l)return 0;let r=0;l.forEach(E=>{if(E.tStartDisplay<=t){const h=Math.max(0,E.tStartDisplay);let A=E.tEndDisplay!==void 0&&E.tEndDisplay<=t?E.tEndDisplay:t;A=Math.max(0,A),r+=kr(h,A)}});const d=kr(0,t);return r/d}setTimelineOptions(t){this.timelineDrawOptions={...this.timelineDrawOptions,...t},this.updateTimelineDisplay()}getTimelineRenderingProps(){const t=this.record.getFirstSelection()!=null&&this.record.getLastSelection()!=null;let n=this.gameConfig.countdown;const o=this.timeline.getAllSlotsTimeInfo();return o!==null&&(n=Math.max(n,o.countdown)),{timelineWidth:this.timeline.getCanvasWidth(),timelineHeight:this.timeline.getCanvasHeight(),scale:this.timeline.scale,countdown:n,tincturePotencyMultiplier:this.getTincturePotencyMultiplier(),untargetableMask:this.#a,sharedElements:this.timeline.sharedElements,slots:this.timeline.slots,activeSlotIndex:this.timeline.activeSlotIndex,allMarkers:this.timeline.getAllMarkers(),untargetableMarkers:this.timeline.getUntargetableMarkers(),buffMarkers:this.timeline.getBuffMarkers(),showSelection:t,selectionStartDisplayTime:(this.record.getFirstSelection()?.tmp_startLockTime??0)-this.gameConfig.countdown,selectionEndDisplayTime:(this.record.getLastSelection()?.tmp_endLockTime??0)-this.gameConfig.countdown,drawOptions:this.timelineDrawOptions}}reportWarning(t){this.#o||this.timeline.addElement({type:at.WarningMark,warningType:t,time:this.game.time,displayTime:this.game.getDisplayTime()})}reportComboBreak(){this.reportWarning({kind:"combobreak"})}resolvePotency(t){this.resolveAnyPotency(t,at.DamageMark,this.#i),this.#S()}resolveHealingPotency(t){this.resolveAnyPotency(t,at.HealingMark,this.#c)}resolveOverTimePotency(t,n){n==="damage"?this.resolveAnyPotency(t,at.DamageMark,this.#i):this.resolveAnyPotency(t,at.HealingMark,this.#c)}resolveAnyPotency(t,n,o){if(t===void 0)return;t.resolve(this.game.getDisplayTime()),this.#n=this.game.time,t.base===0&&(n=at.AggroMark);let l=!1;if(t.modifiers.forEach(r=>{r.source===x.POT&&(l=!0)}),!this.#o){let r="{skill}@"+t.sourceTime.toFixed(3);t.description.length>0&&(r+=" "+t.description);const d={potency:t,sourceDesc:r,sourceSkill:t.sourceSkill},E=this.timeline.tryGetElement(this.game.time,n);E?(E.potencyInfos.push(d),l&&!E.buffs.includes("TINCTURE")&&E.buffs.push("TINCTURE")):this.timeline.addElement({type:n,potencyInfos:[d],buffs:l?["TINCTURE"]:[],time:this.game.time,displayTime:this.game.getDisplayTime()}),o.push({time:this.game.getDisplayTime(),source:t.sourceSkill+"@"+t.sourceTime,potency:t.getAmount({tincturePotencyMultiplier:1,includePartyBuffs:!0,includeSplash:!0}),buffs:l?["TINCTURE"]:[]})}}reportLucidTick(t,n){this.#o||this.timeline.addElement({type:at.LucidMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportManaTick(t,n){this.#o||this.timeline.addElement({type:at.MPTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportMeditateTick(t,n){this.#o||this.timeline.addElement({type:at.MeditateTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportAutoTick(t,n){this.#o||this.timeline.addElement({type:at.AutoTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportDotTick(t,n){this.reportOverTimeTick(t,this.#r,n)}reportHotTick(t,n){this.reportOverTimeTick(t,this.#u,n)}reportOverTimeTick(t,n,o){if(!this.#o){const l=o??sN;let r=n.get(l);r||(r=[],n.set(l,r)),r.push(t),this.updateStats()}}reportDotStart(t,n){this.reportOverTimeStart(t,n,"damage")}reportHotStart(t,n){this.reportOverTimeStart(t,n,"healing")}reportOverTimeStart(t,n,o){if(!this.#o){const l=o==="damage"?this.#m:this.#R;let r=l.get(n);r||(r=[],l.set(n,r));const d=r.length;console.assert(d===0||r[d-1].tEndDisplay!==void 0),r.push({tStartDisplay:t,tEndDisplay:void 0})}}reportDotDrop(t,n){this.reportOverTimeDrop(t,n,"damage")}reportHotDrop(t,n){this.reportOverTimeDrop(t,n,"healing")}reportOverTimeDrop(t,n,o){if(!this.#o){const r=(o==="damage"?this.#m:this.#R).get(n);if(console.assert(r,`Reported dropping ${n} when no coverage was detected`),!r)return;const d=r.length;console.assert(d>0&&r[d-1].tEndDisplay===void 0),r[d-1].tEndDisplay=t}}updateStatusDisplay(t){const n=t.resources.get("NOT_CASTER_TAXED"),o=t.resources.get("NOT_ANIMATION_LOCKED"),l=t.cooldowns.get("cd_GCD"),r={gcdReady:l.stacksAvailable()>0,gcd:l.currentStackCd(),timeTillGCDReady:t.cooldowns.timeTillAnyStackAvailable("cd_GCD"),castLocked:t.resources.timeTillReady("NOT_CASTER_TAXED")>0,castLockTotalDuration:n.pendingChange?n.pendingChange.delay:0,castLockCountdown:t.resources.timeTillReady("NOT_CASTER_TAXED"),animLocked:t.resources.timeTillReady("NOT_ANIMATION_LOCKED")>0,animLockTotalDuration:o.pendingChange?o.pendingChange.delay:0,animLockCountdown:t.resources.timeTillReady("NOT_ANIMATION_LOCKED"),canMove:t.resources.get("MOVEMENT").available(1)},d=t.statusPropsGenerator;V0(E=>({time:t.getDisplayTime(),resources:d.getAllResourceViewProps(E),resourceLocks:r,enemyBuffs:d.getAllOtherTargetedBuffViewProps(),selfBuffs:d.getAllSelfTargetedBuffViewProps(),level:t.config.level}),d.statusLayoutFn)}updateTimelineDisplay(){this.timeline.setTimeSegment(0,this.game.time),il(),lu(),this.#o||this.timeline.updateElem({type:at.s_Cursor,time:this.game.time,displayTime:this.game.getDisplayTime()}),this.timeline.drawElements()}updateSkillButtons(t){o0(this.game.displayedSkills.getCurrentSkillNames(this.game).map(n=>t.getSkillAvailabilityStatus(n)))}#l(t){const n=this.game.time,o=t.deltaTime+this.game.getDisplayTime();if(t.deltaTime>0){this.#A=t.deltaTime;const l=this.game.tick(t.deltaTime,t.prematureStopCondition?t.prematureStopCondition:()=>!1);let r;return t.waitKind==="duration"?r=mr(l):t.waitKind==="target"?r=el(o):t.waitKind==="mp"&&(r=tC()),r!==void 0&&(r.tmp_startLockTime=n,r.tmp_endLockTime=t.deltaTime+n,this.record.addActionNode(r)),r}}setTimeControlSettings(t){this.timeScale=t.timeScale,this.tickMode=t.tickMode,this.shouldLoop=!1}setConfigAndRestart(t,n=!0){const o=this.gameConfig.job!==t.job,l=this.gameConfig.countdown,r=l<t.countdown;o&&!n&&(console.error("attempted to apply config without reset even though job changed; forcing reset"),n=!0),qc(()=>{this.gameConfig=new ti({...t,shellVersion:fR.version}),n?this.record=new Eo:r&&this.record.prependActionNode(el(-l)),this.record.config=this.gameConfig,this.#E(),this.#h(this.gameConfig),o&&Zh(t.job)}),this.autoSave()}getDisplayedGame(){return this.displayingUpToDateGameState?this.game:this.savedHistoricalGame}getActiveJob(){return this.game.job}getSkillInfo(t){return t.game.getSkillAvailabilityStatus(t.skillName)}#_(t){const n=t.shouldLoop;this.shouldLoop!==n&&(this.shouldLoop=n,this.shouldLoop&&this.#N(()=>this.shouldLoop))}#O(t){let n=this.game.timeTillAnySkillAvailable();t>=0&&(n=Math.min(t-this.game.time,n)),this.#l({deltaTime:n})}#p(t,n,o=this.tickMode,l=-1,r=!0,d=!1){let E=this.game.getSkillAvailabilityStatus(t);const h=this.game.time,A=E.timeTillAvailable,R=this.#l({deltaTime:A});d&&R&&this.undoStack.push(new Bl(R,this.record.tailIndex)),t=eC(t,this.game),E=this.game.getSkillAvailabilityStatus(t);const T=Wl(t,n);let S;if(E.status.ready())T.tmp_startLockTime=this.game.time,this.record.addActionNode(T),S=this.record.tailIndex,d&&T&&this.undoStack.push(new Bl(T,this.record.tailIndex)),this.game.useSkill(t,T,S),T.tmp_invalid_reasons=[],o===ei.RealTimeAutoPause&&(this.shouldLoop=!0,this.#N(()=>this.game.timeTillAnySkillAvailable()>0,!0));else{if(!r){if(A>0){const C=mr(A);C.tmp_startLockTime=h,C.tmp_endLockTime=this.game.time,this.record.addActionNode(C)}return E}this.record.addActionNode(T),S=this.record.tailIndex,this.game.useInvalidSkill(t,T),T.tmp_invalid_reasons=E.status.unavailableReasons}const I=this.game.timeTillAnySkillAvailable();if(T.tmp_startLockTime=this.game.time,T.tmp_endLockTime=this.game.time+I,!this.#o){this.lastSkillTime=this.game.time;const C=this.game.getSkillAvailabilityStatus(t,!0);let O=this.game.skillsList.get(t).cdName==="cd_GCD";const D=E.castTime>0&&!E.instantCast,U=D?E.castTime-ti.getSlidecastWindow(E.castTime):0;let H=C.cdRecastTime;t==="MEDITATE"&&(O=!0,H=this.game.getSkillAvailabilityStatus("YUKIKAZE").cdRecastTime),this.timeline.addElement({type:at.Skill,displayTime:this.game.getDisplayTime(),skillName:t,isGCD:O,isSpellCast:D,time:this.game.time,relativeSnapshotTime:U,lockDuration:I,recastDuration:H,node:T,actionIndex:S}),this.#s.push({time:this.game.getDisplayTime(),action:Ta[t].name,isGCD:O?1:0,castTime:E.instantCast?0:E.castTime,targetCount:T.targetCount,isDamaging:T.anyPotencies()})}return o!==ei.RealTimeAutoPause&&this.#O(l),this.#d||lu(),E}#f(t){const n=this.#d;this.#d=!0,t.removeTrailingIdleTime===void 0&&(t.removeTrailingIdleTime=!1);const o=t.maxReplayTime??-1;let l=t.replayMode;t.replayMode===Na.Edited&&(l=Na.Exact);const r=t.line,d=[],E=[];if(r.length===0)return this.#d=n,{success:!0,firstAddedIndex:void 0,invalidActions:d,skillUseTimes:E};let h=this.record.length,A;const R=t.cutoffIndex??r.actions.length,T=r.actions.slice();for(let C=0;C<R;C++){const _=T[C];t.replayMode===Na.Edited&&l===Na.Exact&&C===t.firstEditedNodeIndex&&(l=Na.Edited);let O=0;if(_.info.type===Ge.Wait?O=_.info.waitDuration:_.info.type===Ge.JumpToTimestamp?O=_.info.targetTime-this.game.getDisplayTime():_.info.type===Ge.WaitForMP?O=this.game.timeTillNextMpGainEvent():_.info.type===Ge.Skill&&(O=this.game.getSkillAvailabilityStatus(_.info.skillName).timeTillAvailable),C>0){const U=T[C-1].legacyWaitDuration;if(U!==void 0&&Math.abs(U-this.#A)>ha.epsilon){const H=U-this.#A;if(H>0&&_.info.type!==Ge.Wait){let L;if(_.info.type===Ge.Skill){const w=this.game.getSkillAvailabilityStatus(_.info.skillName).timeTillAvailable;Math.abs(w-H)>ha.epsilon&&(L="duration")}L&&(this.#l({deltaTime:H,waitKind:L}),h++)}else _.info.type===Ge.Wait&&(O+=H)}}if(o>=0&&o-this.game.time<O&&l===Na.Exact)return this.#l({deltaTime:o-this.game.time,waitKind:"duration"}),this.#d=!1,this.updateAllDisplay(),{success:!0,firstAddedIndex:A,invalidActions:d,skillUseTimes:E};if(E.push(this.game.getDisplayTime()),[Ge.Wait,Ge.JumpToTimestamp,Ge.WaitForMP].includes(_.info.type))if(O>=0)this.#l({deltaTime:O,waitKind:_.info.type===Ge.Wait?"duration":_.info.type===Ge.JumpToTimestamp?"target":"mp"});else{const D=Jc();if(_.info.type===Ge.JumpToTimestamp){const U=el(_.info.targetTime);U.tmp_startLockTime=this.game.time,U.tmp_endLockTime=U.tmp_startLockTime,this.record.addActionNode(U)}else console.error("non-jump wait somehow failed: "+_.info.type);D.addUnavailableReason(dt.PastTargetTime),d.push({node:_,index:C,reason:D})}else if(_.info.type===Ge.Skill){let D=_.info.skillName;t.replayMode===Na.SkillSequence&&(D=Nr(this.game.job,D,this.gameConfig.level));const U=this.#p(D,_.info.targetCount,ei.Manual,o);E[E.length-1]=U.usedAt,U.status.ready()||d.push({node:_,index:C,reason:U.status.clone()}),this.#T&&(this.#T=!1,this.shouldLoop||(U.status.addUnavailableReason(dt.CastCanceled),d.push({node:_,index:C,reason:U.status})))}else if(_.info.type===Ge.SetResourceEnabled&&(l===Na.Exact||l===Na.Edited)){const D=this.requestToggleBuff(_.info.buffName),U=l===Na.Exact;if(D)this.#l({deltaTime:U?O:Math.min(O,this.game.timeTillAnySkillAvailable())});else{const H=Jc();H.addUnavailableReason(dt.BuffNoLongerAvailable),d.push({node:_,index:C,reason:H})}}else if(_.info.type===Ge.Unknown){const{skillName:D,targetCount:U}=_.info,H=bH(D,U);this.record.addActionNode(H);const L=Jc();L.addUnavailableReason(dt.UnknownSkill),d.push({node:_,index:C,reason:L}),H.tmp_invalid_reasons=L.unavailableReasons;const w=this.gameConfig.animationLock;this.#o||(this.lastSkillTime=this.game.time,this.timeline.addElement({type:at.Skill,displayTime:this.game.getDisplayTime(),skillName:D,isGCD:!1,isSpellCast:!1,time:this.game.time,relativeSnapshotTime:this.game.time,lockDuration:w,recastDuration:0,node:H,actionIndex:C}),this.#s.push({time:this.game.getDisplayTime(),action:D,isGCD:0,castTime:0,targetCount:H.targetCount,isDamaging:!1})),this.#l({deltaTime:w})}else console.error("did not process ActionNode "+JSON.stringify(_.info));if(t.replayMode===Na.Edited){const D=this.record.tailIndex;_===t.selectionStart&&D>=0?this.record.selectSingle(D):_===t.selectionEnd&&D>=0&&this.record.selectUntil(D)}this.record.length!==h&&A===void 0&&(A=this.record.tailIndex)}if(t.cutoffIndex!==void 0){const C=T[t.cutoffIndex].info;if(C.type===Ge.Skill){const _=this.game.getSkillAvailabilityStatus(C.skillName);this.#l({deltaTime:_.timeTillAvailable})}}const S=T[T.length-1],I=S.legacyWaitDuration;if(I!==void 0&&(S.info.type===Ge.Skill||S.info.type===Ge.SetResourceEnabled)&&Math.abs(I-this.#A)>ha.epsilon){const C=I-this.#A;this.#l({deltaTime:C,waitKind:"duration"})}return this.#d=n,this.updateAllDisplay(),{success:!0,firstAddedIndex:A,invalidActions:d,skillUseTimes:E}}autoSave(){const t=this.record.serialized();this.timeline.saveCurrentSlot(t,this.gameConfig.countdown,this.game.time)}tryAutoLoad(){const t=Rt("gameRecord");t!==null&&(console.log("migrating existing record to slot 0"),ft("gameRecord0",t),Hm("gameRecord"));for(let l=0;l<mi;l++)this.timeline.loadSlot(l);this.timeline.slots.length>0||this.timeline.addSlot();const o=parseInt(Rt("activeSlotIndex")??"0");this.setActiveSlot(o>=mi?0:o),this.undoStack.clear()}setActiveSlot(t){this.#_({shouldLoop:!1}),qc(()=>{this.autoSave(),this.record.unselectAll(),this.timeline.loadSlot(t)||console.error(`failed to load timeline in cached active slot ${t}`)}),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.displayCurrentState(),ft("activeSlotIndex",t.toString())}cloneActiveSlot(){if(this.timeline.activeSlotIndex<0||this.timeline.activeSlotIndex>=this.timeline.slots.length){console.error("tried to clone slot with invalid activeSlotIndex "+this.timeline.activeSlotIndex);return}this.#_({shouldLoop:!1}),qc(()=>{const t=this.record.serialized();this.timeline.addSlot(),this.loadBattleRecordFromFile(t),this.autoSave(),this.timeline.loadSlot(this.timeline.slots.length-1)}),this.displayCurrentState()}getDamageLogCsv(){const t=this.#i.map(n=>{let o=!1;n.buffs.forEach(r=>{r==="TINCTURE"&&(o=!0)});let l=n.potency;return o&&(l*=this.getTincturePotencyMultiplier()),[n.time,n.source,l]});return[["time","damageSource","potency"]].concat(t)}getActionsLogCsv(){const t=this.#s.map(n=>[n.time,n.action,n.isGCD,n.castTime]);return[["time","action","isGCD","castTime"]].concat(t)}getAmaSimCsv(){const t=O=>O===Ta.TINCTURE.name?"Grade 4 Gemdraught":O.endsWith("(Ten)")||O.endsWith("(Chi)")||O.endsWith("(Jin)")?O.substring(0,O.length-6):O.replace(" 2"," II").replace(" 3"," III").replace(" 4"," IV"),n=this.getActiveJob(),o=cn.includes(n)||$a.includes(n),l=this.timeline.getBuffMarkers().map(O=>{const D=new Ph(O.description);let U=D.info.name;D.info.name===k.Card_TheSpear?U="The Spear":D.info.name===k.Card_TheBalance?U="The Balance":[k.RadiantFinale1,k.RadiantFinale2,k.RadiantFinale3].includes(D.info.name)&&(U="Radiant Finale");const H=D.info.name===k.Dokumori||D.info.name===k.ChainStratagem,L=()=>H?"Debuff Only":D.info.name===k.RadiantFinale1?'"1 Coda, Buff Only"':D.info.name===k.RadiantFinale2?'"2 Coda, Buff Only"':D.info.name===k.RadiantFinale3?'"3 Coda, Buff Only"':[k.ArmysPaeon,k.MagesBallad,k.WanderersMinuet,k.StandardFinish,k.TechnicalFinish].includes(D.info.name)?"Buff Only":D.info.name===k.Card_TheSpear?o?"Small":"Big":D.info.name===k.Card_TheBalance?o?"Big":"Small":"";return[O.time,U,D.info.job,L(),H?"Boss0":""]});let r=this.gameConfig.getOverrideStacks("MAGES_CODA")??0,d=this.gameConfig.getOverrideStacks("WANDERERS_CODA")??0,E=this.gameConfig.getOverrideStacks("ARMYS_CODA")??0,h=this.gameConfig.getOverrideStacks("RADIANT_CODA")??0;const A=this.#s.filter(O=>!O.action.includes("Toggle buff")).map(O=>{let D="";if(O.isDamaging&&O.targetCount!==void 0){D='"';for(let L=0;L<O.targetCount;L++)L!==0&&(D+=", "),D+="Boss"+L.toString();D+='"'}let U="";const H=r+d+E;return O.action==="Mage's Ballad"?r=1:O.action==="The Wanderer's Minuet"?d=1:O.action==="Army's Paeon"?E=1:O.action==="Radiant Finale"?H>0&&(h=H,U=`${H} Coda`,r=0,d=0,E=0):O.action==="Radiant Encore"&&h>0&&(U=`${h} Encore`,h=0),[O.time,t(O.action),"",U,D]}),R=["use_strict_skill_naming = False"],T=!(o||dl.includes(n)),S={[Ze.lvl70]:new Map([["WHM",162],["SCH",264],["AST",148],["SGE",177],["BLM",133],["SMN",264],["RDM",162],["PCT",148]]),[Ze.lvl80]:new Map([["WHM",189],["SCH",308],["AST",172],["SGE",206],["BLM",155],["SMN",308],["RDM",189],["PCT",172]]),[Ze.lvl90]:new Map([["WHM",216],["SCH",353],["AST",197],["SGE",236],["BLM",177],["SMN",353],["RDM",216],["PCT",197]]),[Ze.lvl100]:new Map([["WHM",244],["SCH",398],["AST",222],["SGE",266],["BLM",200],["SMN",398],["RDM",244],["PCT",222]])};let I={job_class:n,det_stat:this.gameConfig.determination,crit_stat:this.gameConfig.criticalHit,dh_stat:this.gameConfig.directHit,tenacity:this.gameConfig.tenacity,speed_stat:T?this.gameConfig.spellSpeed:this.gameConfig.skillSpeed,version:hM,level:this.gameConfig.level,wd:this.gameConfig.wd,main_stat:this.gameConfig.main};S[this.gameConfig.level].has(n)&&(I={...I,healer_or_caster_strength:S[this.gameConfig.level].get(n)}),R.push("stats = "+JSON.stringify(I));const C=this.timeline.getUntargetableMarkers().map(O=>`(${O.time}, ${O.time+O.duration}),`);C.length>0&&R.push("downtime_windows = ("+C.join(" ")+")");const _=["time","skill_name","job_class","skill_conditional","targets"];return _.push("players_to_buff","overriding_skill_conditional_for_other_players"),l.forEach(O=>O.push("","")),A.forEach(O=>O.push("","")),{meta:R,body:[_].concat(l,A)}}tryAddLine(t,n=Na.SkillSequence){const o=p.record.length,l=this.#f({line:t,replayMode:n});return l.success?(this.undoStack.push(new sT(t.actions,o,"preset")),this.autoSave(),Ka(),!0):(this.rewindUntilBefore(l.firstAddedIndex,!1),window.alert('Failed to add line "'+t.name+'" due to insufficient resources and/or stats mismatch.'),!1)}deleteLine(t){this.#e.deleteLine(t)}deleteAllLines(){this.#e.deleteAllLines()}reportInterruption(t){if(this.#I||this.tickMode===ei.RealTimeAutoPause&&this.shouldLoop){const n=t.failNode.getNameForMessage();window.alert("Cast interrupted! Resources for "+n+" are no longer available"),console.warn("failed: "+n);const o=this.game.time,l=this.shouldLoop;this.rewindUntilBefore(t.failIndex,!1),this.autoSave(),this.#l({deltaTime:o-this.game.time,waitKind:"duration"}),this.shouldLoop=l}else this.#T=!0,this.#o||this.timeline.invalidateLastElement()}rewindUntilBefore(t,n){const o=this.record;this.record=new Eo,this.record.config=this.gameConfig,this.#E(),this.#h(this.gameConfig),t!==void 0&&(o.spliceUpTo(t),this.#f({line:o,replayMode:Na.Exact,removeTrailingIdleTime:n}))}removeTrailingIdleTime(){let t;for(let o=this.record.tailIndex;o>=0;o--)if(this.record.actions[o].info.type===Ge.Skill){t=o;break}const n=t===void 0?this.record.actions.slice():this.record.actions.slice(t+1);n.length>0&&this.undoStack.push(new Er((t??-1)+1,n,"delete")),t===void 0?this.rewindUntilBefore(0,!0):this.rewindUntilBefore(t+1,!0),Ka()}waitTillNextMpOrLucidTick(){const t=this.#l({deltaTime:this.game.timeTillNextMpGainEvent(),waitKind:"mp"});t!==void 0&&this.undoStack.push(new Bl(t,this.record.tailIndex)),Ka(),this.updateAllDisplay()}insertRecordNodes(t,n){this.record.insertActionNodes(t,n),this.autoSave();const o=Ka();let l;t.length>1?(l=Math.min(n,this.record.tailIndex),this.record.selectSingle(l),this.record.selectUntil(l+t.length-1)):(l=Math.min(n+1,this.record.tailIndex),this.record.selectSingle(l)),this.displayHistoricalState(o.skillUseTimes[l],l)}insertRecordNode(t,n){this.insertRecordNodes([t],n)}requestUseSkill(t,n=!1){if(this.#I=!0,!this.inputLocked)if(this.displayingUpToDateGameState)this.#p(t.skillName,t.targetCount,this.tickMode,-1,!1,n).status.ready()&&(this.scrollToTime(this.game.time),this.autoSave(),this.tickMode!==ei.RealTimeAutoPause&&Ka());else{const o=this.record.selectionStartIndex;if(o!==void 0){const l=Wl(t.skillName,t.targetCount);this.insertRecordNode(l,o),n&&this.undoStack.push(new Bl(l,o))}}this.#I=!1}requestToggleBuff(t,n=!1){if(!this.game.requestToggleBuff(t))return!1;const l=km(t);return l.tmp_startLockTime=this.game.time,l.tmp_endLockTime=l.tmp_startLockTime,this.record.addActionNode(l),n&&this.undoStack.push(new Bl(l,this.record.tailIndex)),this.#s.push({time:this.game.getDisplayTime(),action:"Toggle buff: "+xe[t].name,isGCD:0,castTime:0,isDamaging:!1}),!0}scrollToTime(t){const n=t===void 0?this.game.time:t;setTimeout(()=>{bD(We.positionFromTimeAndScale(n,this.timeline.scale))},0)}#N(t,n=!1){let o=0;const l=this,r=function(d){o===0&&(o=d);const E=(d-o)/1e3*l.timeScale,h=l.game.timeTillAnySkillAvailable();h>=E?l.#l({deltaTime:E,prematureStopCondition:()=>!t()}):(l.#l({deltaTime:h,prematureStopCondition:()=>!t()}),l.#l({deltaTime:E-h,prematureStopCondition:()=>!t()})),l.updateAllDisplay(),o=d,t()?requestAnimationFrame(r):(l.shouldLoop=!1,l.autoSave(),Qh(!1),n&&Ka())};Qh(!0),requestAnimationFrame(r)}step(t,n=!1){let o,l=this.record.length;this.displayingUpToDateGameState?(o=this.#l({deltaTime:t,waitKind:"duration"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(l=this.record.selectionStartIndex,o=mr(t),this.insertRecordNode(o,l)),n&&o&&this.undoStack.push(new Bl(o,l))}stepUntil(t,n=!1){let o,l=this.record.length;this.displayingUpToDateGameState?(o=this.#l({deltaTime:t-this.game.getDisplayTime(),waitKind:"target"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(l=this.record.selectionStartIndex,o=el(t),this.insertRecordNode(o,l)),n&&o&&this.undoStack.push(new Bl(o,l))}handleKeyboardEvent(t){if(this.inputLocked)return;const n=t.ctrlKey||t.metaKey,o=p.record.selectionStartIndex,l=o!==void 0;let r=!1;this.displayingUpToDateGameState&&t.key==="u"&&(this.undoStack.doThenPush(new Er(this.record.tailIndex,[this.record.actions[this.record.tailIndex]],"delete")),r=!0),t.key==="z"&&n?(this.undoStack.undo(),r=!0):t.key==="Z"&&n||t.key==="y"&&n?(this.undoStack.redo(),r=!0):t.key==="Paste"||t.key==="v"&&n?(F0(),r=!0):t.key==="Copy"||t.key==="c"&&n?l&&(Zm(),r=!0):(t.key==="Cut"||t.key==="x"&&n)&&l&&(Zm(),p.undoStack.push(new Er(o,p.record.getSelected().actions,"delete")),p.deleteSelectedSkills(),r=!0),r&&t.preventDefault()}handleTimelineKeyboardEvent(t){if(!this.inputLocked){const n=t.ctrlKey||t.metaKey,o=p.record.selectionStartIndex,l=p.record.selectionEndIndex,r=o!==void 0;let d=!1,E=!1;t.key==="Backspace"||t.key==="Delete"?r&&(p.undoStack.push(new Er(o,p.record.getSelected().actions,"delete")),p.deleteSelectedSkills()):t.key==="ArrowUp"?r?(t.shiftKey?p.timeline.resizeSelection(!0):p.timeline.onClickTimelineAction(o-1,!1),d=!0,t.preventDefault()):p.record.length>0&&(p.timeline.onClickTimelineAction(p.record.tailIndex,!1),d=!0,t.preventDefault()):t.key==="ArrowDown"?r?(t.shiftKey?p.timeline.resizeSelection(!1):p.timeline.onClickTimelineAction(l+1,!1),E=!0,t.preventDefault()):p.record.length>0&&(p.timeline.onClickTimelineAction(0,!1),E=!0,t.preventDefault()):t.key==="Home"?(p.timeline.onClickTimelineAction(0,t.shiftKey),d=!0):t.key==="End"?(p.timeline.onClickTimelineAction(p.record.tailIndex,t.shiftKey),E=!0):t.key==="Escape"?(p.record.unselectAll(),p.displayCurrentState()):t.key==="a"&&n&&(p.timeline.onClickTimelineAction(0,!1),p.timeline.onClickTimelineAction(p.record.tailIndex,!0),t.preventDefault()),d?(this.scrollToTime(this.record.selectionStart?.tmp_startLockTime),oT()):E&&(this.scrollToTime(this.record.selectionEnd?.tmp_startLockTime),k0())}}setImageExportConfig(t){this.imageExportConfig=t}}const p=new i2;function Wd(e){const t=Ii();return t==="en"?e==="fieldop"?"Field Operations":e==="dungeon"?"Dungeons":e==="ultimate"?"Ultimates":e[0].toUpperCase()+e.substring(1):t==="zh"?e==="savage"?"":e==="extreme"?"":e==="ultimate"?"":"":e}function qe(e,t,n,o,l){return{name:typeof e=="string"?{en:e,zh:e}:e,fightKind:t,supportedLanguages:typeof n=="string"?[n]:n,authors:typeof o=="string"?[o]:o,phased:l??!1}}const Cm=new Map([["m5s",qe("M5S","savage","en","shanzhe")],["m6s",qe("M6S","savage","en","shanzhe")],["m7s",qe("M7S","savage","en","shanzhe")],["m8s_full",qe("M8S","savage","en","shanzhe",!0)],["final_verse_q40",qe("The Final Verse Q40","dungeon","en","shanzhe")],["dsr_p2",qe("DSR P2","ultimate","en","Caro")],["dsr_p6",qe("DSR P6","ultimate","en","Tischel")],["dsr_p7",qe("DSR P7","ultimate","en","Tischel")],["TOP_2023_04_02",qe("TOP","ultimate","en","Santa")],["m2s",qe("M2S","savage","en","shanzhe")],["m3s",qe("M3S","savage","en","shanzhe")],["m4s",qe("M4S","savage","en","shanzhe")],["m1s_zh",qe("M1S","savage","zh","kiyozero")],["m2s_zh",qe("M2S","savage","zh","kiyozero")],["m3s_zh",qe("M3S","savage","zh","kiyozero")],["m4s_zh",qe("M4S","savage","zh","kiyozero")],["fru_en_full",qe({en:"FRU",zh:""},"ultimate","en",["Yara","shanzhe"],!0)],["fru_zh",qe({en:"FRU",zh:""},"ultimate","zh",["","czmm"])],["queen_eternal",qe({en:"Queen Eternal",zh:""},"extreme","zh","")],["p1s_aetherial_shackles_first",qe("P1S Aetherial Shackles first","savage","en")],["p1s_shackles_of_time_first",qe("P1S Shackles of Time first","savage","en")],["p2s",qe("P2S","savage","en")],["p5s_zh",qe("P5S","savage","zh","3")],["p6s_zh",qe("P6S","savage","zh","3")],["p7s_zh",qe("P7S","savage","zh","3")],["p8s_p1_snake_zh",qe({en:"P8S P1 snake first",zh:"P8S"},"savage","zh","3")],["p8s_p1_beast_zh",qe({en:"P8S P1 dog first",zh:"P8S"},"savage","zh","3")],["p8s_p2_zh",qe({en:"P8S P2",zh:"P8S"},"savage","zh","3")],["p9s",qe("P9S","savage","en","Lilian")],["p10s",qe("P10S","savage","en","Tischel")],["p11s",qe("P11S","savage","en","Lilian")],["p12s_p1",qe("P12S P1","savage","en","Yara")],["p12s_p2",qe("P12S P2","savage","en","Yara")],["p9s_zh",qe("P9S","savage","zh","3")],["p10s_zh",qe("P10S","savage","zh","3")],["p11s_zh",qe("P11S","savage","zh","3")],["p12s_p1_zh",qe("P12S","savage","zh","3")],["p12s_p2_zh",qe("P12S","savage","zh","3")]]),o2=["final_verse_q40","fru_en_full","fru_zh"],l2=["dsr_p2","dsr_p6","dsr_p7","TOP_2023_04_02"],s2=new Map([["7.0-7.3",["m2s","m3s","m4s","m1s_zh","m2s_zh","m3s_zh","m4s_zh","fru_en_full","fru_zh","queen_eternal","m5s","m6s","m7s","m8s_full","final_verse_q40"]],["6.X",["p1s_aetherial_shackles_first","p1s_shackles_of_time_first","p2s","dsr_p2","dsr_p6","dsr_p7","p5s_zh","p6s_zh","p7s_zh","p8s_p1_snake_zh","p8s_p1_beast_zh","p8s_p2_zh","p9s","p9s_zh","TOP_2023_04_02","p9s","p10s","p11s","p12s_p1","p12s_p2","p9s_zh","p10s_zh","p11s_zh","p12s_p1_zh","p12s_p2_zh"]]]);let Wb=e=>{};const fh="/presets/markers/",gr=20,pr=0,Ql=5;function r2(e){const t=pt();return c.jsx("hr",{style:{marginTop:e.marginTop,marginBottom:e.marginBottom,border:"none",borderTop:"1px solid "+t.bgHighContrast}})}const sR=function(e,t){D0(e,n=>{try{const o=JSON.parse(n);t(o)}catch(o){console.log("Error fetching/parsing JSON "+e),console.error(o)}})},uu=b.createContext(""),Jl=b.createContext({trackIndices:[],setTrackIndices:()=>{}});function Xb(e,t,n){let o=xi(n?.globalOffset??"");o=isNaN(o)?0:o;const l=xi(n?.localOffset??"");p.timeline.loadCombinedTracksPreset(e,o+(isNaN(l)?0:l),n?.cutoff!==void 0?o+n.cutoff:void 0),t(p.timeline.getTrackIndices()),p.updateStats(),p.timeline.drawElements()}function qb(e){const t=b.useContext(uu),{setTrackIndices:n}=b.useContext(Jl);return c.jsx("button",{onClick:o=>sR(e.url,l=>Xb(l,n,{globalOffset:t,localOffset:e.offsetStr})),children:e.displayName})}function Zb(e,t){return{en:(e.authors?.length??0)>0&&t?`${e.name.en} by ${e.authors?.join(" & ")}`:e.name.en,zh:(e.authors?.length??0)>0&&t?`${e.name.zh}${e.authors?.join("+")}`:e.name.zh}}function c2(e){return c.jsx("div",{style:{marginBlock:1},children:c.jsx(qb,{displayName:g(Zb(e.meta,e.showAuthors)),url:fh+e.fileName+".txt"})})}function u2(e){const t=b.useContext(uu),{setTrackIndices:n}=b.useContext(Jl),o=Gn(b.useContext(Ea)),[l,r]=b.useState(new Map),[d,E]=b.useState(void 0);b.useEffect(()=>{sR(fh+e.fileName+".txt",A=>{A.fileType!==ni.MarkerTrackSet?console.error(`while parsing ${e.fileName}, got invalid file type ${A.fileType}`):E(A.phasedTracks)})},[]);const h=c.jsx("div",{style:{display:"grid",gridTemplateColumns:"2fr 3fr",gap:Ql},children:d?.map(({offset:A,label:R,fileName:T},S)=>{let I=l.get(T);return I?.length||(I=A.toString()),T===void 0&&console.error("missing fileName for phase",R,"of",e.fileName),c.jsxs(sn.Fragment,{children:[c.jsx("div",{style:{gridRow:S+1,gridColumn:1},children:c.jsx(Pt,{description:"@",defaultValue:l.get(T)?.toString()??"",onChange:C=>{const _=new Map(l);C===void 0?_.delete(T):_.set(T,C),r(_)},width:8,placeholder:A.toString()})}),c.jsx("div",{style:{gridRow:S+1,gridColumn:2},children:c.jsx(qb,{displayName:g(R),url:fh+T,offsetStr:I})})]},S)})??g({en:"loading phases...",zh:""})});return c.jsx("div",{style:{display:"flex",flexDirection:"column",marginBlock:Ql,marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+o.bgHighContrast,minWidth:240},children:c.jsx(ll,{title:`trackPresets-phase-${e.fileName}`,titleNode:c.jsxs("div",{style:{display:"inline-flex",flexDirection:"row",gap:Ql,alignItems:"baseline",marginBottom:4},children:[c.jsx("div",{children:g(Zb(e.meta,e.showAuthors))}),c.jsx("span",{tabIndex:-1,children:" "}),c.jsx("div",{children:c.jsx("button",{onClick:A=>{A.stopPropagation();const R=new Map;d?.forEach((T,S)=>{let I;for(let C=S+1;C<d.length;C++){const _=l.get(d[C].fileName);if(_){const O=xi(_);(I===void 0||O<I)&&(I=O)}}I!==void 0&&R.set(T.fileName,I)}),d?.forEach(T=>sR(fh+T.fileName,S=>{Xb(S,n,{globalOffset:t,localOffset:l.get(T.fileName)??T.offset.toString(),cutoff:R.get(T.fileName)})}))},children:g({en:"Load all phases",zh:""})})})]}),noMargin:!0,autoIndent:!1,content:h})})}function Om(e){const t=new Map,n=r=>{const d=Cm.get(r);if(!d){console.error("missing track metadata declaration for "+r);return}t.has(d.fightKind)||t.set(d.fightKind,new Map);const E=t.get(d.fightKind);d.supportedLanguages.forEach(h=>{E.has(h)||E.set(h,{unphased:[],phased:[],commonAuthors:d.authors});const A=E.get(h);(d.phased?A.phased:A.unphased).push(r),d.authors?.join("+")!==A.commonAuthors?.join("+")&&(A.commonAuthors=void 0)})};e.trackList.map(n);const o={marginBlock:1},l=c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:Ql,paddingInlineStart:6,marginInlineStart:10},children:t.entries().map(([r,d],E)=>d.entries().flatMap(([h,A])=>[c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:Ql,alignItems:"baseline"},children:[g({en:A.commonAuthors?c.jsxs("p",{style:o,children:[Wd(r)," (",Gd(h),") by"," ",A.commonAuthors.join(" & "),":"]}):c.jsxs("p",{style:o,children:[Wd(r)," (",Gd(h),"):"]}),zh:A.commonAuthors?c.jsxs("p",{style:o,children:[Wd(r),"",Gd(h),"",A.commonAuthors.join("+"),""]}):c.jsxs("p",{style:o,children:[Wd(r),"",Gd(h),""]})}),A.unphased.map((R,T)=>c.jsx(c2,{meta:Cm.get(R),fileName:R,showAuthors:!A.commonAuthors},T))]}),c.jsx("div",{children:A.phased.map((R,T)=>c.jsx(u2,{meta:Cm.get(R),fileName:R,showAuthors:!A.commonAuthors},T))})]},`${E}-${h}`)]).toArray()).toArray()});return c.jsx(ll,{title:`trackPresets-${e.label.en}`,titleNode:g(e.label),titleBodyGap:Ql,defaultShow:e.defaultShow,autoIndent:!1,content:l})}function d2(){const[e,t]=b.useState(Ya.Info),[n,o]=b.useState(ut.Blue),[l,r]=b.useState("0"),[d,E]=b.useState("1"),[h,A]=b.useState("0"),[R,T]=b.useState(""),[S,I]=b.useState(!1),[C,_]=b.useState(k.TechnicalFinish),O={display:"inline-block",marginRight:"1em",marginBottom:6},{setTrackIndices:D}=b.useContext(Jl);b.useEffect(()=>{Wb=j=>{t(j.markerType),r(j.time.toString()),E(j.duration.toString()),j.markerType===Ya.Info?(o(j.color),r(j.time.toString()),E(j.duration.toString()),A(j.track.toString()),T(j.description),I(j.showText)):j.markerType===Ya.Buff&&(A(j.track.toString()),_(j.description))};const B=Rt("radio: markerType");B!==null&&(t(B),B===Ya.Buff&&L(C))},[]);const U=(B,j)=>c.jsx("option",{value:B,children:j},B),H=c.jsxs("div",{children:[c.jsx(Pt,{defaultValue:R,description:g({en:"Description: ",zh:""}),width:40,onChange:T}),c.jsx(Pt,{defaultValue:h,description:g({en:"Track: ",zh:""}),width:4,style:O,onChange:A}),c.jsxs("div",{style:{display:"inline-block",marginTop:"4px"},children:[c.jsx("span",{children:g({en:"Color: ",zh:""})}),c.jsx("select",{style:{display:"inline-block",outline:"none"},value:n,onChange:B=>{B.target&&o(B.target.value)},children:[U(ut.Red,g({en:"red",zh:""})),U(ut.Orange,g({en:"orange",zh:""})),U(ut.Yellow,g({en:"yellow",zh:""})),U(ut.Green,g({en:"green",zh:""})),U(ut.Cyan,g({en:"cyan",zh:""})),U(ut.Blue,g({en:"blue",zh:""})),U(ut.Purple,g({en:"purple",zh:""})),U(ut.Pink,g({en:"pink",zh:""}))]}),c.jsx("div",{style:{background:n,marginLeft:"4px",display:"inline-block",verticalAlign:"middle",height:"1em",width:"4em"}})]}),c.jsxs("div",{style:{display:"inline-block",marginTop:"4px",marginLeft:"10px"},children:[c.jsx("input",{type:"checkbox",style:{position:"relative",top:3},checked:S,onChange:B=>{B.target&&I(B.target.checked)}}),c.jsx("span",{style:{marginLeft:4},children:g({en:"show text",zh:""})})]})]}),L=B=>{const j=new Ph(B);E(j.info.duration.toString())},w=rT.map(B=>c.jsx("option",{value:B.name,children:GN(B.name)},B.name)),G=c.jsxs("div",{children:[c.jsx("span",{children:g({en:"Buff: ",zh:""})}),c.jsx("select",{value:C,onChange:B=>{if(B.target){const j=B.target.value;_(j),L(j)}},children:w}),c.jsx("div",{style:{marginTop:5},children:c.jsx(Pt,{defaultValue:h,description:g({en:"Track: ",zh:""}),width:4,style:O,onChange:A})})]});return c.jsxs("div",{children:[c.jsx("p",{children:c.jsx("b",{children:g({en:"Add buffs/markers",zh:"buff"})})}),c.jsxs("form",{children:[c.jsxs("fieldset",{style:{display:"flex",alignItems:"baseline",paddingTop:0,paddingLeft:0,paddingBottom:0,marginLeft:0,marginBottom:10,border:0},children:[c.jsx("legend",{style:{float:"left",marginRight:"0.5rem",position:"relative",top:"1px"},children:g({en:"Type: ",zh:""})}),c.jsx(v0,{containerStyle:{display:"flex",flexDirection:"row",gap:"0.8rem"},uniqueName:"markerType",selected:e,onChange:B=>{t(B),B===Ya.Buff&&L(C)},options:[[Ya.Info,g({en:"Info",zh:""})],[Ya.Buff,g({en:"Buff",zh:""})],[Ya.Untargetable,g({en:"Untargetable",zh:""})]]})]}),c.jsx("span",{children:" "}),c.jsx(Pt,{defaultValue:l,description:g({en:"Time: ",zh:""}),width:8,style:O,onChange:r}),c.jsx(Pt,{defaultValue:d,description:g({en:"Duration: ",zh:""}),width:8,style:O,onChange:E}),e===Ya.Info?H:void 0,e===Ya.Buff?G:void 0,c.jsx("button",{type:"submit",style:{display:"block",marginTop:"0.5em"},onClick:B=>{const j={type:at.Marker,markerType:e,time:xi(l),duration:parseFloat(d),color:n,track:parseInt(h),description:R,showText:S};let Q;if(e===Ya.Untargetable&&(j.color=ut.Grey,j.track=wi,j.description="",j.showText=!0),e===Ya.Buff){const ce=new Ph(C),ue=parseFloat(d);!isNaN(ue)&&ue>ce.info.duration&&(Q=g({en:`this buff can't last longer than ${ce.info.duration}s`,zh:`${ce.info.duration}`})),j.color=ce.info.color,j.description=ce.name,j.duration=ue,j.showText=!0}if((isNaN(j.duration)||isNaN(j.time)||isNaN(j.track))&&(Q=g({en:"some input(s) are invalid",zh:""})),j.track!==wi&&(j.track<pr||j.track>gr)&&(Q=g({en:`marker track number must be between ${pr} and ${gr}`,zh:`${pr}${gr}`})),Q){window.alert(Q),B.preventDefault();return}p.timeline.addMarker(j),p.updateStats(),D(p.timeline.getTrackIndices()),e===Ya.Untargetable&&Ka(),B.preventDefault()},children:g({en:"add marker",zh:""})})]})]})}function h2(){const{trackIndices:e,setTrackIndices:t}=b.useContext(Jl),n=parseInt(b.useContext(uu)),o=isNaN(n)?0:n,l=Gn(b.useContext(Ea)),[r,d]=b.useState("0"),E=c.jsx("input",{style:{color:l.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+l.text},size:2,type:"text",value:r,onChange:T=>d(T.target.value)}),h=g({en:c.jsxs("span",{children:["Load into individual track ",E,": "]}),zh:c.jsxs("span",{children:["",E,""]})}),A=c.jsxs(c.Fragment,{children:[c.jsx(kh,{allowLoadFromUrl:!1,defaultLoadUrl:"",label:g({en:"Load multiple tracks combined: ",zh:""}),onLoadFn:T=>{p.timeline.loadCombinedTracksPreset(T,o),p.updateStats(),t(p.timeline.getTrackIndices()),p.timeline.drawElements()}}),c.jsx("div",{className:"paragraph",children:c.jsx(kh,{allowLoadFromUrl:!1,label:h,onLoadFn:T=>{const S=parseInt(r);if(isNaN(S)||S!==wi&&(S<pr||S>gr)){window.alert(g({en:`marker track number must be between ${pr} and ${gr}`,zh:`${pr}${gr}`}));return}p.timeline.loadIndividualTrackPreset(T,S,o),p.updateStats(),t(p.timeline.getTrackIndices()),p.timeline.drawElements()}})})]}),R=c.jsxs(c.Fragment,{children:[c.jsx(ol,{fileFormat:To.Json,getContentFn:()=>p.timeline.serializedCombinedMarkerTracks(),filename:"tracks_all",displayName:g({en:"all tracks combined",zh:""})},"combined"),e.map(T=>{let S=T.toString(),I=g({en:"track ",zh:""})+S;return T===wi&&(S="untargetable",I=g({en:"track untargetable",zh:""})),c.jsx(ol,{fileFormat:To.Json,getContentFn:()=>{const C=p.timeline.serializedSeparateMarkerTracks();for(let _=0;_<C.length;_++)if(C[_].track===T)return C[_];return console.assert(!1),[]},filename:"track_"+S,displayName:I},T)})]});return c.jsxs("div",{children:[c.jsxs("p",{children:[c.jsx("b",{children:g({en:"Load marker tracks from file",zh:""})})," ",c.jsx(Be,{topic:"load tracks",content:g({en:"when loading additional markers, current markers will not be deleted",zh:""})})]}),A,c.jsx("p",{style:{marginTop:16},children:c.jsx("b",{children:g({en:"Save marker tracks to file",zh:""})})}),R]})}function E2(){const[e,t]=b.useState([]);b.useEffect(()=>{t(p.timeline.getTrackIndices())},[]);const[n,o]=b.useState(""),l=xi(n),r=c.jsx(Pt,{defaultValue:n,description:c.jsxs(c.Fragment,{children:[c.jsx("span",{style:{color:isNaN(l)||l===0?"":ut.Purple},children:g({en:"Load tracks with time offset ",zh:" "})}),c.jsx(Be,{topic:"trackLoadOffset",content:g({en:c.jsxs("div",{children:[c.jsx("p",{children:"When specified, all imported and preset tracks will start from the specified timestamp. Use this to combine markers for multi-phase fights with varying kill times."}),c.jsx("p",{children:"Loading preset tracks that already have phase timestamps will add this start value on top of the phase-specific timing."})]}),zh:c.jsxs("div",{children:[c.jsx("p",{children:"P"}),c.jsx("p",{children:"P"})]})})}),":"]}),width:4,onChange:o}),d=c.jsxs(c.Fragment,{children:[c.jsx("p",{children:c.jsx("b",{children:g({en:"Remove buffs/markers",zh:"buff"})})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"max-content max-content",columnGap:2,rowGap:Ql,alignItems:"center"},children:[c.jsx("div",{children:c.jsx("button",{onClick:()=>{p.timeline.deleteAllMarkers(),p.updateStats(),t([])},children:g({en:"clear all markers",zh:""})})}),c.jsx("div",{children:c.jsx("button",{onClick:()=>{const E=p.timeline.sortAndRemoveDuplicateMarkers();E>0?alert("removed "+E+" duplicate markers"):alert("no duplicate markers found"),p.timeline.updateTimelineMarkers()},children:g({en:"remove duplicates",zh:""})})}),c.jsx("div",{style:{gridColumn:"1 / 3"},children:g({en:"click a marker in the timeline to delete it",zh:""})})]})]});return c.jsx(iT,{contentHeight:wT,children:[{defaultSize:35,content:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:c.jsx("b",{children:g({en:"Presets",zh:""})})}),c.jsx("div",{children:r}),c.jsx(uu.Provider,{value:n,children:c.jsxs(Jl.Provider,{value:{trackIndices:e,setTrackIndices:t},children:[c.jsx(Om,{label:{en:"Current content",zh:""},trackList:o2,defaultShow:!0}),c.jsx(Om,{label:{en:"Legacy ultimates",zh:""},trackList:l2,defaultShow:!0}),c.jsx("p",{children:c.jsx("b",{children:g({en:"Archive",zh:""})})}),Array.from(s2.entries().map(([E,h],A)=>c.jsx("div",{children:c.jsx(Om,{label:{en:E},trackList:h})},A)))]})})]})},{defaultSize:30,content:c.jsxs(c.Fragment,{children:[d,c.jsx(r2,{marginTop:15,marginBottom:15}),c.jsx(Jl.Provider,{value:{trackIndices:e,setTrackIndices:t},children:c.jsx(d2,{})})]})},{defaultSize:35,content:c.jsx(c.Fragment,{children:c.jsx(uu.Provider,{value:n,children:c.jsx(Jl.Provider,{value:{trackIndices:e,setTrackIndices:t},children:c.jsx(h2,{})})})})}]})}const De=new Map;De.set(k.LeyLines,"Buffs/BLM/Ley Lines.png");De.set(k.Tincture,"Buffs/General/Tincture.png");De.set(k.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");De.set(k.ArmysPaeon,"Buffs/BRD/Army's Paeon.png");De.set(k.BattleLitany,"PartyBuffs/battle_litany.png");De.set(k.BattleVoice,"Buffs/BRD/Battle Voice.png");De.set(k.Brotherhood,"PartyBuffs/brotherhood.png");De.set(k.Card_TheBalance,"PartyBuffs/the_balance.png");De.set(k.Card_TheSpear,"PartyBuffs/the_spear.png");De.set(k.ChainStratagem,"PartyBuffs/chain_stratagem.png");De.set(k.Devilment,"Buffs/DNC/Devilment.png");De.set(k.Divination,"PartyBuffs/divination.png");De.set(k.Dokumori,"PartyBuffs/dokumori.png");De.set(k.Embolden,"PartyBuffs/Embolden.png");De.set(k.MagesBallad,"Buffs/BRD/Mage's Ballad.png");De.set(k.RadiantFinale1,"Buffs/BRD/Radiant Finale.png");De.set(k.RadiantFinale2,"Buffs/BRD/Radiant Finale.png");De.set(k.RadiantFinale3,"Buffs/BRD/Radiant Finale.png");De.set(k.SearingLight,"PartyBuffs/searing_light.png");De.set(k.StandardFinish,"Buffs/DNC/Standard Finish.png");De.set(k.StarryMuse,"Buffs/PCT/Starry Muse.png");De.set(k.TechnicalFinish,"Buffs/DNC/Technical Finish.png");De.set(k.WanderersMinuet,"Buffs/BRD/Wanderer's Minuet.png");De.set(k.Acceleration,"Buffs/RDM/Acceleration.png");De.set(k.Fuka,"Buffs/SAM/Fuka.png");De.set(k.Fugetsu,"Buffs/SAM/Fugetsu.png");De.set(k.EnhancedEnpi,"Buffs/SAM/Enhanced Enpi.png");De.set(k.DeathsDesign,"Buffs/RPR/Death's Design.png");De.set(k.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");De.set(k.RagingStrikes,"Buffs/BRD/Raging Strikes.png");De.set(k.Barrage,"Buffs/BRD/Barrage.png");De.set(k.NoMercy,"Buffs/GNB/No Mercy.png");De.set(k.EnhancedPiercingTalon,"Buffs/DRG/Enhanced Piercing Talon.png");De.set(k.PowerSurge,"Buffs/DRG/Power Surge.png");De.set(k.LanceCharge,"Buffs/DRG/Lance Charge.png");De.set(k.LifeOfTheDragon,"Buffs/DRG/Life of the Dragon.png");De.set(k.LifeSurge,"Buffs/DRG/Life Surge.png");De.set(k.DivineMight,"Buffs/PLD/Divine Might.png");De.set(k.Requiescat,"Buffs/PLD/Requiescat Zero.png");De.set(k.FightOrFlight,"Buffs/PLD/Fight or Flight.png");De.set(k.Zoe,"Buffs/SGE/Zoe.png");De.set(k.Autophysis,"Buffs/SGE/Autophysis.png");De.set(k.Krasis,"Buffs/SGE/Krasis.png");De.set(k.Philosophia,"Buffs/SGE/Philosophia.png");De.set(k.Soteria,"Buffs/SGE/Soteria.png");De.set(k.TrickAttack,"Buffs/NIN/Trick Attack.png");De.set(k.KunaisBane,"Buffs/NIN/Kunai's Bane.png");De.set(k.Bunshin,"Buffs/NIN/Bunshin.png");De.set(k.RiddleOfFire,"Buffs/MNK/Riddle of Fire.png");De.set(k.NeutralSect,"Buffs/AST/Neutral Sect.png");De.set(k.Synastry,"Buffs/AST/Synastry.png");De.set(k.TheArrow,"Buffs/AST/The Arrow.png");De.set(k.Confession,"Buffs/WHM/Confession.png");De.set(k.Asylum,"Buffs/WHM/Asylum.png");De.set(k.Temperance,"Buffs/WHM/Temperance.png");De.set(k.HuntersInstinct,"Buffs/VPR/Hunter's Instinct.png");De.set(k.Swiftscaled,"Buffs/VPR/Swiftscaled.png");De.set(k.FeyIllumination,"Buffs/SCH/Fey Illumination.png");De.set(k.Dissipation,"Buffs/SCH/Dissipation.png");De.set(k.Protraction,"Buffs/SCH/Protraction.png");De.set(k.Recitation,"Buffs/SCH/Recitation.png");const $l=new Map;De.forEach((e,t)=>{const n=new Image;n.src="assets/"+e,n.onload=function(){go()},$l.set(t,n)});const Xh=400,Nn=28,Qb=e=>{e.setDraggedSkillElem(void 0),p.record.unselectAll(),p.displayCurrentState(),e.setBgSelecting(!0)};function f2(e){const{ctx:t,lines:n,images:o,viewInfo:l}=e;let{mouseX:r,mouseY:d}=e;const{colors:E,visibleWidth:h,renderingProps:A}=l;if(!n.length)return;const R=14,T=24,S=8,I=4;t.font="12px "+_o;let C=-1;n.forEach(G=>{C=Math.max(C,t.measureText(G).width)});let[_,O]=[C+2*S,R*n.length+2*I];o&&o.length>0&&(_=Math.max(_,S+o.length*(T+S)),O+=T+I);const D=4,U=11;let H=!1;d>=O+D?d=d-O-D:d+O<=A.timelineHeight?d=d+U+D:H=!0,H?(d=d-O/2,r=r+U+D):r-_/2>=0&&r+_/2<h?r=r-_/2:r-_/2<0?r=0:r=h-_,t.strokeStyle=E.bgHighContrast,t.lineWidth=1,t.fillStyle=E.tipBackground,t.fillRect(r,d,_,O),t.strokeRect(r,d,_,O),t.fillStyle=E.emphasis,t.textBaseline="top",t.textAlign="left";for(let G=0;G<n.length;G++)t.fillText(n[G],r+S,d+G*R+2+I);const L=r+S,w=d+n.length*R+2+I;if(o)for(let G=0;G<o.length;G++)o[G]&&t.drawImage(o[G],L+G*T,w,T*.75,T)}function A2(e){const{ctx:t,viewInfo:n,markerTracksTopY:o,markerTracksBottomY:l,timelineOrigin:r,trackBins:d,testInteraction:E}=e,h=n.colors,{countdown:A,scale:R}=n.renderingProps;t.lineCap="round",t.lineWidth=4,t.font="11px "+_o,t.textAlign="left",d.forEach((T,S)=>{let I=l-(S+1)*pe.trackHeight;S===wi&&(I=o);for(let C=0;C<T.length;C++){const _=T[C];let O=_.description;_.markerType===Ya.Untargetable?O=g({en:"Untargetable",zh:""}):_.markerType===Ya.Buff&&(O=GN(_.description));const D=r+We.positionFromTimeAndScale(_.time+A,R),U=()=>{const H=p.timeline.deleteMarker(_);console.assert(H),p.updateStats(),Wb(_)};if(_.duration>0){const H=We.positionFromTimeAndScale(_.duration,R);if(_.markerType===Ya.Buff){t.fillStyle=_.color+h.timeline.markerAlpha,t.fillRect(D,I,H,pe.trackHeight);const w=$l.get(_.description);w&&t.drawImage(w,D,I,pe.trackHeight*.75,pe.trackHeight),t.fillStyle=h.emphasis,t.fillText(O,D+pe.trackHeight*1.5,I+10)}else _.showText?(t.fillStyle=_.color+h.timeline.markerAlpha,t.fillRect(D,I,H,pe.trackHeight),t.fillStyle=h.emphasis,t.fillText(O,D+pe.trackHeight/2,I+10)):(t.strokeStyle=_.color,t.beginPath(),t.moveTo(D,I+pe.trackHeight/2),t.lineTo(D+H,I+pe.trackHeight/2),t.stroke());const L=_.time+" - "+parseFloat((_.time+_.duration).toFixed(3));E({x:D,y:I,w:Math.max(H,pe.trackHeight),h:pe.trackHeight},{hoverTip:[`[${L}] ${O}`],onMouseUp:U})}else t.fillStyle=_.color,t.beginPath(),t.ellipse(D,I+pe.trackHeight/2,4,4,0,0,2*Math.PI),t.fill(),_.showText&&(t.fillStyle=h.emphasis,t.beginPath(),t.fillText(O,D+pe.trackHeight/2,I+10)),E({x:D-pe.trackHeight/2,y:I,w:pe.trackHeight,h:pe.trackHeight},{hoverTip:[`[${_.time}] ${O}`],onMouseUp:U})}})}function m2(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:l,elems:r,testInteraction:d}=e,E=n.colors,h=n.renderingProps.scale;t.lineWidth=1,t.strokeStyle=E.timeline.mpTickMark,t.beginPath(),r.forEach(A=>{const R=o+We.positionFromTimeAndScale(A.displayTime,h);t.moveTo(R,l),t.lineTo(R,l+pe.renderSlotHeight()),d({x:R-2,y:l,w:4,h:pe.renderSlotHeight()},{hoverTip:[`[${A.displayTime.toFixed(3)}] ${A.sourceDesc}`]})}),t.stroke()}function R2(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:l,elems:r,testInteraction:d}=e,E=n.colors,h=n.renderingProps.scale;t.lineWidth=1,t.strokeStyle=E.sam.meditation,t.beginPath(),r.forEach(A=>{const R=o+We.positionFromTimeAndScale(A.displayTime,h);t.moveTo(R,l),t.lineTo(R,l+pe.renderSlotHeight()),d({x:R-2,y:l,w:4,h:pe.renderSlotHeight()},{hoverTip:[`[${A.displayTime.toFixed(3)}] ${A.sourceDesc}`]})}),t.stroke()}function T2(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:l,elems:r,testInteraction:d}=e,E=n.colors,h=n.renderingProps.scale;t.lineWidth=1,t.strokeStyle=E.pld.ironWillColor,t.beginPath(),r.forEach(A=>{const R=o+We.positionFromTimeAndScale(A.displayTime,h);t.moveTo(R,l),t.lineTo(R,l+pe.renderSlotHeight()),d({x:R-2,y:l,w:4,h:pe.renderSlotHeight()},{hoverTip:[`[${A.displayTime.toFixed(3)}] ${A.sourceDesc}`]})}),t.stroke()}function S2(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:l,elems:r,testInteraction:d}=e,E=n.colors,h=n.renderingProps.scale;t.font="bold 10px "+_o,r.forEach(A=>{const R=o+We.positionFromTimeAndScale(A.displayTime,h),T=12,S=l+T;t.beginPath(),t.textAlign="center",t.moveTo(R,S-T),t.lineTo(R-T/2,S),t.lineTo(R+T/2,S),t.fillStyle=E.timeline.warningMark,t.fill(),t.fillStyle="white",t.fillText("!",R,S-1);let I="["+A.displayTime.toFixed(3)+"] ";switch(A.warningType.kind){case"combobreak":I+=g({en:"broken combo!",zh:""}).toString();break;case"overcap":I+=ze(A.warningType.rsc).toString()+g({en:" overcap!",zh:""}).toString();break;case"overwrite":I+=ze(A.warningType.rsc).toString()+g({en:" overwrite!",zh:""}).toString();break;case"timeout":I+=ze(A.warningType.rsc).toString()+g({en:" expired!",zh:""});break;default:I+=g({en:A.warningType.en,zh:A.warningType.zh});break}d({x:R-T/2,y:S-T,w:T,h:T},{hoverTip:[I]})})}function bm(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:l,elems:r,testInteraction:d}=e,{colors:E,renderingProps:h}=n,A=h.scale;r.forEach(R=>{const T=R.type===at.DamageMark&&Va(R.displayTime),S=o+We.positionFromTimeAndScale(R.displayTime,A);let I="["+R.displayTime.toFixed(3)+"] ";const C=g({en:"Untargetable",zh:""});switch(R.type){case at.AggroMark:t.fillStyle=E.timeline.aggroMark,I+=g({en:"aggro"});break;case at.HealingMark:t.fillStyle=E.timeline.healingMark,I+=g({en:"healing potency",zh:""});break;default:t.fillStyle=T?E.timeline.untargetableDamageMark:E.timeline.damageMark,I+=g({en:"damage potency",zh:""})}t.beginPath(),R.type===at.AggroMark||R.type===at.DamageMark?(t.moveTo(S-3,l),t.lineTo(S+3,l),t.lineTo(S,l+6)):(t.moveTo(S-3,l+12),t.lineTo(S+3,l+12),t.lineTo(S,l+6)),t.fill();const _=R.buffs.filter(H=>H==="TINCTURE").length>0,O=[],D=[];R.potencyInfos.forEach(H=>{const L=H.sourceDesc.replace("{skill}",li(H.sourceSkill));if(T)O.push(0 .toFixed(3)+" ("+L+")");else if(H.sourceSkill in mo){const w=g({en:"LB"});O.push(w+" ("+L+")")}else{const w=H.potency.getAmount({tincturePotencyMultiplier:h.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!1});if(H.potency.targetCount>1){const G=w*(1-(H.potency.falloff??1)),B=H.potency.targetCount-1,j=G.toFixed(2)+(B>1?` x ${B}`:""),Q=B>1?g({en:`${L}, ${B} additional targets`,zh:`${L}, ${B} `}):g({en:`${L}, 1 additional target`,zh:`${L}, 1 `});O.push(w.toFixed(2)+" ("+g({en:`${L}, primary target`,zh:`${L}, `})+")"),O.push(j+` (${Q})`)}else O.push(w.toFixed(2)+" ("+L+")");_&&!D.includes($l.get(k.Tincture))&&D.push($l.get(k.Tincture)),H.potency.getPartyBuffs().forEach(G=>{const B=$l.get(G);D.includes(B)||D.push()})}});const U=R.type===at.HealingMark?{x:S-3,y:l+6,w:6,h:6}:{x:S-3,y:l,w:6,h:6};d(U,{hoverTip:T?[I,...O,C]:[I,...O],hoverImages:D})})}function I2(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:l,elems:r,testInteraction:d}=e,E=n.colors,h=n.renderingProps.scale;t.fillStyle=E.timeline.lucidTickMark,r.forEach(A=>{const R=o+We.positionFromTimeAndScale(A.displayTime,h);t.beginPath(),t.moveTo(R-3,l),t.lineTo(R+3,l),t.lineTo(R,l+6),t.fill();const T=`[${A.displayTime.toFixed(3)}] ${A.sourceDesc.replace("{skill}",li("LUCID_DREAMING"))}`;d({x:R-3,y:l,w:6,h:6},{hoverTip:[T]})})}function _2(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:l,elems:r,interactive:d,testInteraction:E}=e,{colors:h,renderingProps:A}=n,R=A.scale,T=[],S=[],I=[],C=[],_=[],O=new Map([[k.Tincture,{color:h.timeline.potCover,showImage:!0}],[k.LeyLines,{color:h.timeline.llCover,showImage:!0}],[k.SearingLight,{color:h.smn.searing,showImage:!0}],[k.Hyperphantasia,{color:h.timeline.llCover,showImage:!1}],[k.StarryMuse,{color:h.timeline.buffCover,showImage:!0}],[k.Embolden,{color:h.rdm.emboldenBuff,showImage:!0}],[k.Acceleration,{color:h.rdm.accelBuff,showImage:!0}],[k.TechnicalFinish,{color:h.dnc.esprit,showImage:!0}],[k.Devilment,{color:h.dnc.feathers,showImage:!0}],[k.Fuka,{color:h.timeline.llCover,showImage:!0}],[k.Fugetsu,{color:h.sam.fugetsu,showImage:!0}],[k.NoMercy,{color:h.sam.fugetsu,showImage:!0}],[k.EnhancedPiercingTalon,{color:h.drg.enhancedPiercingTalon,showImage:!0}],[k.PowerSurge,{color:h.drg.powerSurge,showImage:!0}],[k.LifeSurge,{color:h.drg.lifeSurge,showImage:!0}],[k.LanceCharge,{color:h.drg.lanceCharge,showImage:!0}],[k.LifeOfTheDragon,{color:h.drg.lifeOfTheDragon,showImage:!0}],[k.BattleLitany,{color:h.drg.battleLitany,showImage:!0}],[k.DivineMight,{color:h.pld.divineMight,showImage:!0}],[k.Requiescat,{color:h.pld.requiescat,showImage:!0}],[k.FightOrFlight,{color:h.pld.fightOrFlight,showImage:!0}],[k.EnhancedEnpi,{color:h.rdm.accelBuff,showImage:!0}],[k.ArcaneCircle,{color:h.rpr.arcaneCircle,showImage:!0}],[k.DeathsDesign,{color:h.rpr.deathsDesign,showImage:!0}],[k.WanderersMinuet,{color:h.brd.wanderersCoda,showImage:!0}],[k.MagesBallad,{color:h.brd.magesCoda,showImage:!0}],[k.ArmysPaeon,{color:h.brd.armysCoda,showImage:!0}],[k.RagingStrikes,{color:h.brd.ragingStrikes,showImage:!0}],[k.Barrage,{color:h.brd.barrage,showImage:!0}],[k.BattleVoice,{color:h.brd.battleVoice,showImage:!0}],[k.RadiantFinale1,{color:h.brd.radiantFinale,showImage:!0}],[k.RadiantFinale2,{color:h.brd.radiantFinale,showImage:!0}],[k.RadiantFinale3,{color:h.brd.radiantFinale,showImage:!0}],[k.Zoe,{color:h.sge.zoe,showImage:!0}],[k.Autophysis,{color:h.sge.autophysis,showImage:!0}],[k.Krasis,{color:h.sge.krasis,showImage:!0}],[k.Soteria,{color:h.sge.soteria,showImage:!0}],[k.Philosophia,{color:h.sge.philosophia,showImage:!0}],[k.WaxingNocturne,{color:h.blu.moonflute,showImage:!0}],[k.Bristle,{color:h.blu.bristle,showImage:!0}],[k.Whistle,{color:h.blu.whistle,showImage:!0}],[k.TingleA,{color:h.blu.tinglea,showImage:!0}],[k.TingleB,{color:h.blu.tingleb,showImage:!0}],[k.Dokumori,{color:h.nin.dokumori,showImage:!0}],[k.TrickAttack,{color:h.nin.trick,showImage:!0}],[k.KunaisBane,{color:h.nin.trick,showImage:!0}],[k.Bunshin,{color:h.nin.bunshin,showImage:!0}],[k.RiddleOfFire,{color:h.mnk.riddleOfFire,showImage:!0}],[k.Brotherhood,{color:h.mnk.brotherhood,showImage:!0}],[k.Divination,{color:h.ast.div,showImage:!0}],[k.NeutralSect,{color:h.ast.neutral,showImage:!0}],[k.Synastry,{color:h.ast.synastry,showImage:!0}],[k.TheArrow,{color:h.ast.arrow,showImage:!0}],[k.Confession,{color:h.whm.confession,showImage:!0}],[k.Asylum,{color:h.whm.asylum,showImage:!0}],[k.Temperance,{color:h.whm.temperance,showImage:!0}],[k.HuntersInstinct,{color:h.vpr.huntersInstinct,showImage:!0}],[k.Swiftscaled,{color:h.vpr.swiftscaled,showImage:!0}],[k.ChainStratagem,{color:h.sch.chain,showImage:!0}],[k.FeyIllumination,{color:h.sch.feyIllumination,showImage:!0}],[k.Dissipation,{color:h.sch.dissipation,showImage:!0}],[k.Protraction,{color:h.sch.protraction,showImage:!0}],[k.Recitation,{color:h.sch.recitation,showImage:!0}]]),D=new Map;O.forEach((j,Q)=>D.set(Q,[]));const U=[],H=[],L=[],w=l+pe.skillButtonHeight/2;r.forEach(j=>{const Q=j,ce=o+We.positionFromTimeAndScale(Q.displayTime,R),ue=Q.isGCD?w+pe.skillButtonHeight/2:w,te=Q.node.targetCount;te>1&&T.push({count:te,x:ce+pe.skillButtonHeight/2,y:ue-5});const ee=2,fe=We.positionFromTimeAndScale(Q.lockDuration,R);if(Q.isSpellCast?(I.push({x:ce+ee,y:ue,w:fe-ee,h:pe.skillButtonHeight/2}),_.push(ce+We.positionFromTimeAndScale(Q.relativeSnapshotTime,R))):S.push({x:ce+ee,y:ue,w:fe-ee,h:pe.skillButtonHeight}),Q.isGCD){const $=We.positionFromTimeAndScale(Q.recastDuration,R);C.push({x:ce+ee,y:ue+pe.skillButtonHeight/2,w:$-ee,h:pe.skillButtonHeight/2})}if(Q.skillName in mo){const $=We.positionFromTimeAndScale(Q.recastDuration,R);S.push({x:ce+ee,y:ue+pe.skillButtonHeight/2,w:$-ee,h:pe.skillButtonHeight/2})}Q.node.tmp_invalid_reasons.length>0&&H.push({x:ce,y:l+pe.slotPaddingTop,w:We.positionFromTimeAndScale(Q.isGCD?Math.max(Q.recastDuration,Q.lockDuration):Q.lockDuration,R),h:pe.renderSlotHeight()-pe.slotPaddingBottom-pe.slotPaddingTop});let he=0;D.forEach(($,de)=>{Q.node.hasBuff(de)&&(he+=M(he,$))}),Q.node.hasPartyBuff()&&M(he,U);function M($,de){return A.drawOptions.drawBuffIndicators&&de.push({x:ce,y:ue+Nn+$*4,w:Nn,h:4}),1}Wm(Q.skillName)&&L.push({elem:j,x:ce,y:ue})}),t.font="13px "+_o,t.fillStyle=h.text,t.textAlign="center",T.forEach(j=>{t.fillText("x"+j.count.toString(),j.x,j.y)});const G=j=>{t.rect(j.x,j.y,j.w,j.h),d&&E(j,{onMouseDown:Qb})};t.fillStyle=h.timeline.castBar,t.beginPath(),I.forEach(G),t.fill(),t.lineWidth=1,t.strokeStyle="rgba(151, 85, 239, 0.4)",t.beginPath(),_.forEach(j=>{t.moveTo(j,w+Nn/2),t.lineTo(j,w+Nn)}),t.stroke(),t.fillStyle=h.timeline.gcdBar,t.beginPath(),C.forEach(G),t.fill(),t.fillStyle=h.timeline.lockBar,t.beginPath(),S.forEach(G),t.fill(),D.forEach((j,Q)=>{t.fillStyle=O.get(Q).color,t.beginPath(),j.forEach(G),t.fill()}),t.fillStyle=h.timeline.buffCover,t.beginPath(),U.forEach(G),t.fill(),t.beginPath(),L.forEach(j=>{t.drawImage(Wm(j.elem.skillName),j.x,j.y,Nn,Nn);const Q=j.elem.node,ce=[],ue=[],te=li(j.elem.skillName)+"@"+j.elem.displayTime.toFixed(3);if(ce.push(te),!((Q.maybeGetActionKey()??"NEVER")in mo)){if(Q.getInitialPotency()){const fe=Q.getPotency({tincturePotencyMultiplier:A.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!0,untargetable:Va}).applied;ce.push(g({en:"potency: ",zh:""})+fe.toFixed(2))}if(Q.getInitialHealingPotency()){const fe=Q.getHealingPotency({tincturePotencyMultiplier:A.tincturePotencyMultiplier,includeSplash:!0,includePartyBuffs:!0,untargetable:Va}).applied;ce.push(g({en:"healing potency: "})+fe.toFixed(2))}}let ee=0;Q.tmp_endLockTime!==void 0&&Q.tmp_startLockTime!==void 0&&(ee=Q.tmp_endLockTime-Q.tmp_startLockTime),ce.push(g({en:"duration: ",zh:""})+ee.toFixed(3)),Q.tmp_invalid_reasons.length>0&&(ce.push(""),ce.push(g({en:"skill is invalid:",zh:""}).toString()),Q.tmp_invalid_reasons.forEach(fe=>ce.push("- "+Vl(fe)))),O.forEach((fe,he)=>{fe.showImage&&Q.hasBuff(he)&&ue.push($l.get(he))}),Q.getPartyBuffs().forEach(fe=>{const he=$l.get(fe);he&&ue.push(he)}),d?E({x:j.x,y:j.y,w:Nn,h:Nn},{hoverTip:ce,onMouseUp:fe=>{fe.draggedSkillElem===void 0&&(fe.bgSelecting||(p.timeline.onClickTimelineAction(j.elem.actionIndex,fe.shiftKey),oT()))},onMouseDown:fe=>{fe.dragLock||fe.setDraggedSkillElem(j.elem)},pointerMouse:!0,hoverImages:ue}):E({x:j.x,y:j.y,w:Nn,h:Nn},{hoverTip:ce,pointerMouse:!1,hoverImages:ue})});const B=t.globalAlpha;return t.fillStyle=h.timeline.invalidBg,t.globalAlpha=.2,t.beginPath(),H.forEach(j=>{t.rect(j.x,j.y,j.w,j.h)}),t.fill(),t.globalAlpha=B,new Map(d?L.map(j=>[j.elem.actionIndex,{x:j.x,y:j.y,w:Nn,h:Nn}]):[])}function rR(e){const{ctx:t,color:n,x:o,y1:l,y2:r,y3:d,tip:E,width:h,testInteraction:A}=e;t.fillStyle=n,t.beginPath(),t.moveTo(o-3,0),t.lineTo(o+3,0),t.lineTo(o,6),t.fill(),t.lineWidth=1,t.strokeStyle=n,t.setLineDash([]),t.beginPath(),t.moveTo(o,0),t.lineTo(o,l),t.stroke(),t.strokeStyle=n+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(o,l),t.lineTo(o,r),t.stroke();const R=t.lineWidth;h!==void 0&&(t.lineWidth=h),t.strokeStyle=n,t.setLineDash([]),t.beginPath(),t.moveTo(o,r),t.lineTo(o,d),t.stroke(),t.lineWidth=R,t.strokeStyle=n+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(o,d),t.lineTo(o,Xh),t.stroke(),E!==void 0&&A?.({x:o-3,y:0,w:6,h:Xh},{hoverTip:[E]}),t.setLineDash([])}function Jb(e){const{ctx:t,viewInfo:n,originX:o,testInteraction:l}=e,r=e.ignoreVisibleX??!1,{colors:d,renderingProps:E,visibleWidth:h}=n,A=r?We.positionFromTimeAndScale(p.game.time+E.countdown,E.scale):h;t.fillStyle=d.timeline.ruler,t.fillRect(0,0,A,pe.rulerHeight),l({x:pe.leftBufferWidth,y:0,w:A-pe.leftBufferWidth,h:pe.rulerHeight},{hoverTip:C=>[(We.timeFromPositionAndScale(C.x-o,E.scale)-E.countdown).toFixed(3)],onMouseDown:C=>{const _=We.timeFromPositionAndScale(C.x-o,E.scale)-E.countdown;_<p.game.getDisplayTime()&&_>=-p.game.config.countdown?p.displayHistoricalState(_,void 0):p.displayCurrentState()}}),t.lineCap="butt",t.beginPath();const R=E.scale*100,T=E.countdown*R;t.lineWidth=1,t.strokeStyle=d.text,t.textBaseline="alphabetic",t.font="13px "+_o,t.textAlign="center",t.fillStyle=d.text;const S=50,I=function(C,_,O){const D=C*R,U=o+D+T;U>=-S&&U<=A+S&&(t.moveTo(U,0),t.lineTo(U,_),O&&t.fillText(We.displayTime(D/R,0),U,23))};if(R>=6){for(let C=0;C*R<E.timelineWidth-T;C+=1)C%5!==0&&I(C,6,!1);for(let C=-1;C*R>=-T;C-=1)C%5!==0&&I(C,6,!1)}for(let C=0;C*R<E.timelineWidth-T;C+=5)I(C,10,!0);for(let C=-5;C*R>=-T;C-=5)I(C,10,!0);return t.stroke(),pe.rulerHeight}function $b(e){const{ctx:t,viewInfo:n,originX:o,originY:l,testInteraction:r}=e,d=e.ignoreVisibleX??!1,{colors:E,renderingProps:h,visibleWidth:A}=n,R=d?We.positionFromTimeAndScale(p.game.time+h.countdown,h.scale):A,T=new Map;h.allMarkers.forEach(_=>{let O=T.get(_.track);O===void 0&&(O=[]),O.push(_),T.set(_.track,O)}),t.beginPath();let S=0,I=!1;for(const _ of T.keys())S=Math.max(S,_+1),_===wi&&(I=!0);I&&(S+=1);const C=l+S*pe.trackHeight;t.fillStyle=E.timeline.tracks;for(let _=0;_<S;_+=2){const O=C-(_+1)*pe.trackHeight;t.rect(0,O,R,pe.trackHeight)}return t.fill(),A2({ctx:t,viewInfo:n,markerTracksTopY:l,markerTracksBottomY:C,timelineOrigin:o,trackBins:T,testInteraction:r}),S*pe.trackHeight}function eD(e,t){e.fillStyle="rgba(147, 112, 219, 0.15)",e.fillRect(t.x,t.y,t.w,t.h),e.strokeStyle="rgba(147, 112, 219, 0.5)",e.lineWidth=1,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x,t.y+t.h),e.moveTo(t.x+t.w,t.y),e.lineTo(t.x+t.w,t.y+t.h),e.stroke()}function tD(e){const{ctx:t,viewInfo:n,originX:o,originY:l,isImageExportMode:r,testInteraction:d}=e,{colors:E,renderingProps:h}=n,A=o+We.positionFromTimeAndScale(h.countdown,h.scale);let R=new Map;for(let I=0;I<h.slots.length;I++){const C=I===h.activeSlotIndex,_=new Map;if(r&&!C)continue;h.slots[I].elements.forEach(H=>{const L=_.get(H.type)??[];L.push(H),_.set(H.type,L)});let O=l+I*pe.renderSlotHeight();r&&(O=l);const D={ctx:t,viewInfo:n,timelineOriginX:A,timelineOriginY:O,testInteraction:d};h.drawOptions.drawMPTickMarks&&m2({...D,elems:_.get(at.MPTickMark)??[]}),h.drawOptions.drawHealingMarks&&bm({...D,elems:_.get(at.HealingMark)??[]}),h.drawOptions.drawDamageMarks&&(bm({...D,elems:_.get(at.DamageMark)??[]}),bm({...D,elems:_.get(at.AggroMark)??[]})),h.drawOptions.drawMPTickMarks&&I2({...D,elems:_.get(at.LucidMark)??[]}),R2({...D,elems:_.get(at.MeditateTickMark)??[]}),T2({...D,elems:_.get(at.AutoTickMark)??[]}),S2({...D,elems:_.get(at.WarningMark)??[]});const U=_2({...D,elems:_.get(at.Skill)??[],interactive:C});if(C&&(R=U),h.showSelection&&C&&!r){const H=A+We.positionFromTimeAndScale(h.selectionStartDisplayTime,h.scale),L=We.positionFromTimeAndScale(h.selectionEndDisplayTime-h.selectionStartDisplayTime,h.scale);eD(t,{x:H,y:O,w:L,h:pe.renderSlotHeight()})}}const T=We.positionFromTimeAndScale(h.countdown,h.scale);let S=pe.renderSlotHeight()*h.slots.length;if(h.slots.length<mi&&(S+=pe.addSlotButtonHeight),t.fillStyle=E.timeline.countdown,t.fillRect(o-pe.leftBufferWidth,l,T+pe.leftBufferWidth,S),r)return new Map;for(let I=0;I<h.slots.length;I++){const _={x:0,y:l+I*pe.renderSlotHeight()+1,w:14,h:pe.renderSlotHeight()-2};if(t.fillStyle=I===h.activeSlotIndex?E.accent:E.bgMediumContrast,t.fillRect(_.x,_.y,_.w,_.h),d(_,{hoverTip:I===h.activeSlotIndex?void 0:[g({en:"set active",zh:""})],onMouseUp:(O,D)=>{D&&p.undoStack.doThenPush(new gP(h.activeSlotIndex,I))},pointerMouse:!0}),h.slots.length>1&&I===h.activeSlotIndex){t.fillStyle=E.emphasis,t.font="bold 14px "+_o,t.textAlign="center",t.fillText("",_.x+_.w/2,_.y+_.h-4);const O={x:_.x,y:_.y+_.h-_.w,w:_.w,h:_.w};d(O,{hoverTip:[g({en:"delete",zh:""})],onMouseUp:(D,U)=>{U&&p.undoStack.doThenPush(new pP(h.activeSlotIndex,p.record.serialized()))},pointerMouse:!0})}}return R}function g2(e){const{ctx:t,viewInfo:n,originX:o,timelineStartY:l,testInteraction:r}=e,{colors:d,renderingProps:E}=n,h=o+We.positionFromTimeAndScale(E.countdown,E.scale),A=pe.renderSlotHeight(),R=l+E.activeSlotIndex*A,T=new Map;E.sharedElements.forEach(I=>{const C=T.get(I.type)??[];C.push(I),T.set(I.type,C)});const S={y1:l,y2:R,y3:R+A};(T.get(at.s_HistoricalCursor)??[]).forEach(I=>{const C=I;if(C.enabled){const _=h+We.positionFromTimeAndScale(I.displayTime,E.scale);rR({ctx:t,color:d.historical,x:_,...S,tip:g({en:"cursor: ",zh:""})+C.displayTime.toFixed(3),testInteraction:r})}}),(T.get(at.s_Cursor)??[]).forEach(I=>{const C=I,_=h+We.positionFromTimeAndScale(C.displayTime,E.scale);rR({ctx:t,color:d.emphasis,x:_,...S,tip:g({en:"cursor: ",zh:""})+C.displayTime.toFixed(3),testInteraction:r})})}function p2(e){const{ctx:t,viewInfo:n,timelineStartY:o,mouseX:l,mouseY:r,selectStartX:d,selectStartY:E,interactionInfo:h,dragTargetTime:A}=e,{bgSelecting:R,draggedSkillElem:T}=h,{colors:S,visibleLeft:I,renderingProps:C}=n;if(R){const U={x:Math.min(d,l),y:Math.min(E,r),w:Math.abs(d-l),h:Math.abs(E-r)};eD(t,U)}const O=-I+pe.leftBufferWidth+We.positionFromTimeAndScale(C.countdown,C.scale);if(T){const U=t.globalAlpha;t.globalAlpha=.4,t.drawImage(Wm(T.skillName),l,r,Nn,Nn),t.globalAlpha=U}const D=A;if(D!==null){const U=pe.renderSlotHeight(),H=o+C.activeSlotIndex*U,L=O+We.positionFromTimeAndScale(D,C.scale);rR({ctx:t,color:S.dropTarget,x:L,y1:o,y2:H,y3:H+U,width:4})}}function N2(e){const{ctx:t,viewInfo:{colors:n,renderingProps:o},originY:l,testInteraction:r}=e;if(o.slots.length<mi){const h={x:4,y:l+2,w:192,h:pe.addSlotButtonHeight-4};t.fillStyle=n.bgLowContrast,t.fillRect(h.x,h.y,h.w,h.h),t.strokeStyle=n.bgHighContrast,t.lineWidth=1,t.strokeRect(h.x,h.y,h.w,h.h),t.font="13px "+_o,t.fillStyle=n.text,t.textAlign="center",t.fillText(g({en:"Add timeline slot",zh:""}),h.x+h.w/2,h.y+h.h-4),r(h,{onMouseUp:(R,T)=>{T&&p.undoStack.doThenPush(new NP(o.activeSlotIndex))},pointerMouse:!0});const A={x:2*4+192,y:l+2,w:192,h:pe.addSlotButtonHeight-4};return t.fillStyle=n.bgLowContrast,t.fillRect(A.x,A.y,A.w,A.h),t.strokeStyle=n.bgHighContrast,t.lineWidth=1,t.strokeRect(A.x,A.y,A.w,A.h),t.font="13px "+_o,t.fillStyle=n.text,t.textAlign="center",t.fillText(g({en:"Clone timeline slot",zh:""}),A.x+A.w/2,A.y+A.h-4),r(A,{onMouseUp:(R,T)=>{T&&p.undoStack.doThenPush(new CP(o.activeSlotIndex))},pointerMouse:!0}),pe.addSlotButtonHeight}return 0}function aD(){let e=0,t=!1;for(const n of p.timeline.getAllMarkers()){const o=n.track;e=Math.max(e,o+1),o===wi&&(t=!0)}return t&&(e+=1),e*pe.trackHeight}function nD(){return pe.rulerHeight+aD()}function C2(e){const{ctx:t,viewInfo:n,testInteraction:o}=e,{renderingProps:l,colors:r,visibleLeft:d,visibleWidth:E}=n,h=-d+pe.leftBufferWidth;let A=0;return t.fillStyle=r.background,t.fillRect(0,0,E+1,l.timelineHeight+1),o({x:0,y:0,w:E,h:Xh},{onMouseDown:Qb}),A+=Jb({ctx:t,originX:h,viewInfo:n,testInteraction:o}),A+=aD(),tD({ctx:t,viewInfo:n,originX:h,originY:A,isImageExportMode:!1,testInteraction:o})}function O2(e){const{ctx:t,viewInfo:n,testInteraction:o}=e,l=-n.visibleLeft+pe.leftBufferWidth,r=$b({ctx:t,viewInfo:n,originX:l,originY:pe.rulerHeight,testInteraction:o});return N2({ctx:t,viewInfo:n,originY:nD()+pe.renderSlotHeight()*n.renderingProps.slots.length,testInteraction:o}),r}function rN(e){const{ctx:t,viewInfo:n,dragTargetTime:o,activeHoverTip:l,activeHoverImages:r,mouseX:d,mouseY:E,selectStartX:h,selectStartY:A,mouseInteractionInfo:R,testInteraction:T}=e,S=-n.visibleLeft+pe.leftBufferWidth,I=nD();g2({ctx:t,viewInfo:n,originX:S,timelineStartY:I,testInteraction:T}),R&&p2({ctx:t,viewInfo:n,timelineStartY:I,mouseX:d,mouseY:E,selectStartX:h,selectStartY:A,interactionInfo:R,dragTargetTime:o}),l!==void 0&&f2({ctx:t,viewInfo:n,lines:l,images:r,mouseX:d,mouseY:E})}function cN(e,t){const n=e.x+e.w<t.x,o=e.x>t.x+t.w,l=e.y+e.h<t.y,r=e.y>t.y+t.h;return!(n||o||l||r)}function iD(e,t){const[n,o]=e;return n!==void 0&&o!==void 0&&n>t.x&&n<t.x+t.w&&o>t.y&&o<t.y+t.h}function Dm(e,t,n){const o=oD(e,t,n);return o!==void 0?o[0]:void 0}function oD(e,t,n){for(const[o,l]of Array.from(n.entries()).reverse())if(iD([e,t],o))return[l,o]}function ym(){return{mouseDown:new Map,mouseUp:new Map,mouseHover:new Map,pointer:new Map}}function Xd(e){["mouseDown","mouseHover","mouseUp","pointer"].forEach(t=>e[t].clear())}function b2(e){const t=b.useRef(null),n=b.useRef(null),o=b.useRef(null),l=window.devicePixelRatio,r=e.visibleWidth*l,d=e.timelineHeight*l,E=b.useContext(Ea),h=b.useContext(xE),A=b.useContext(Cu),R=b.useRef([null,null]),T=b.useRef(0),S=b.useRef(0),I=b.useRef(void 0),C=b.useRef(void 0),_=b.useRef(0),O=b.useRef(0),D=b.useRef({}),[U,H]=b.useState(0),L=b.useRef(new Map),w=b.useRef({live:ym(),interactive:ym(),lowUpdate:ym()});function G(y){const Y=w.current;return new Map([...Y.live[y],...Y.interactive[y],...Y.lowUpdate[y]])}const B=b.useRef(void 0),j=y=>{B.current=y},Q=b.useRef(!1),ce=y=>{Q.current=y},ue=y=>(Y,W)=>{const{hoverTip:z,onMouseUp:Z,onMouseDown:ne,pointerMouse:P,hoverImages:X}=W,se=w.current[y];(z||X)&&se.mouseHover.set(Y,{tip:z,images:X}),Z&&se.mouseUp.set(Y,Z),ne&&se.mouseDown.set(Y,ne),P!==void 0&&se.pointer.set(Y,P)},te=y=>{const Y=-e.visibleLeft-pe.leftBufferWidth,W=e.visibleWidth-Y;y.clearRect(Y,0,W,Xh+U)},ee=()=>{const y=D.current.tip,Y={x:T.current,y:S.current,shiftKey:!1,dragLock:A.value,draggedSkillElem:B.current,bgSelecting:Q.current,setDraggedSkillElem:j,setBgSelecting:ce};return{viewInfo:{renderingProps:p.getTimelineRenderingProps(),colors:Gn(E),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth},dragTargetTime:h.dragTargetTime,mouseX:T.current,mouseY:S.current,selectStartX:_.current,selectStartY:O.current,activeHoverTip:y!==void 0?Array.isArray(y)?y:y(Y):void 0,activeHoverImages:D.current.images,mouseInteractionInfo:Y}},fe=()=>{const y=n.current?.getContext("2d",{alpha:!0});y&&(y.scale(l,l),te(y),Xd(w.current.interactive),rN({ctx:y,...ee(),testInteraction:ue("interactive")}),y.scale(1/l,1/l))},he={onMouseMove:(y,Y)=>{if(T.current=y,S.current=Y,D.current=Dm(y,Y,G("mouseHover"))??{},Q.current){const W={x:Math.min(_.current,y),y:Math.min(O.current,Y),w:Math.abs(_.current-y),h:Math.abs(O.current-Y)};let z=null,Z=null;for(const[ne,P]of L.current.entries())if(cN(P,W)){z=ne,Z=ne;break}if(Z!==null)for(const[ne,P]of Array.from(L.current.entries()).reverse()){if(Z>=ne)break;if(cN(P,W)){Z=ne;break}}(z!==R.current[0]||Z!==R.current[1])&&(R.current=[z,Z],z!==null&&Z!==null?(p.record.selectSingle(z),p.record.selectUntil(Z)):p.record.unselectAll(),p.displayCurrentState())}if(B.current){p.record.isInSelection(B.current.actionIndex)||p.timeline.onClickTimelineAction(B.current.actionIndex,!1);const W=-e.visibleLeft+pe.leftBufferWidth;let z=1/0,Z=-1,ne;const P=L.current,X=Array.from(P.entries());for(let _e=0;_e<X.length;_e++){const[ge,ye]=X[_e],Fe=Math.abs(T.current-ye.x);if(ne!==void 0&&Fe>ne)break;Fe<z&&(z=Fe,Z=ge),ne=Fe}let se=1/0;const Ee=p.getTimelineRenderingProps(),Se=Ee.sharedElements.filter(_e=>_e.type==at.s_Cursor);let Oe;const Ue=Se[Se.length-1].displayTime+Ee.countdown;Se.length>0&&(Oe=W+We.positionFromTimeAndScale(Ue,Ee.scale),se=Math.abs(T.current-Oe));let Ae=null;const be=Array.from(P.keys());Oe!==void 0&&se<z&&P.size>0&&Z===be[be.length-1]&&(Z=be[be.length-1]+1,Ae=Ue-Ee.countdown),Z!==-1&&h.dragTargetIndex!==Z&&(Ae===null&&(Z>0&&!B.current.isGCD?Ae=p.record.actions[Z-1].tmp_endLockTime??null:Ae=p.record.actions[Z].tmp_startLockTime??null,Ae!==null&&(Ae-=p.gameConfig.countdown)),h.setDragTarget(Z,Ae))}e.setPointerMouse(Dm(y,Y,G("pointer"))??!1),fe()},onMouseEnter:()=>{},onMouseLeave:()=>{I.current=void 0,C.current=void 0,Q.current=!1,(D.current.tip!==void 0||D.current.images!==void 0)&&(D.current={tip:void 0,images:void 0},fe())},onMouseUp:(y,Y,W)=>{if(T.current=Y,S.current=W,B.current){const z=h.dragTargetIndex;h.setDragTarget(null,null),j(void 0);let Z=!0;if(z!==null){const ne=p.record.selectionStartIndex??0;let P=z-(ne??0);if(P>0&&(P-=p.record.getSelectionLength()),P!==0){p.undoStack.push(new th(ne,p.record.getSelectionLength(),P)),p.record.moveSelected(P),p.autoSave();const X=Ka();go();const se=p.record.selectionStartIndex;se!==void 0?p.displayHistoricalState(X.skillUseTimes[se],se):p.displayCurrentState(),Z=!1}}Z&&fe()}if(!p.inputLocked){const z=oD(Y,W,G("mouseUp"));if(z!==void 0){const[Z,ne]=z;Z({x:Y,y:W,shiftKey:y.shiftKey,dragLock:A.value,bgSelecting:Q.current,setDraggedSkillElem:j,setBgSelecting:ce},iD([I.current,C.current],ne))}}Q.current=!1},onMouseDown:(y,Y)=>{if(I.current=y,C.current=Y,T.current=y,S.current=Y,!p.inputLocked){const W=G("mouseDown");_.current=y,O.current=Y,Dm(y,Y,W)?.({x:y,y:Y,shiftKey:!1,dragLock:A.value,bgSelecting:Q.current,setDraggedSkillElem:j,setBgSelecting:ce})}},onKeyDown:y=>{p.handleTimelineKeyboardEvent(y),p.inputLocked||y.key==="Escape"&&(h.setDragTarget(null,null),j(void 0))}};b.useEffect(()=>e.setCallbacks(he),[h.dragTargetTime,A.value]);const M=()=>{const[y,Y,W]=[t,n,o].map((z,Z)=>z.current?.getContext("2d",{alpha:Z!==0}));if(y&&Y&&W){[y,Y,W].forEach(Z=>Z.scale(l,l)),Xd(w.current.live),Xd(w.current.interactive),Xd(w.current.lowUpdate),[Y,W].forEach(Z=>te(Z));const z={renderingProps:p.getTimelineRenderingProps(),colors:Gn(E),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth};L.current=C2({ctx:y,viewInfo:z,testInteraction:ue("live")}),rN({ctx:Y,...ee(),testInteraction:ue("interactive")}),H(O2({ctx:W,viewInfo:z,testInteraction:ue("lowUpdate")})),[y,Y,W].forEach(Z=>Z.scale(1/l,1/l))}};b.useEffect(fe,[h.dragTargetTime]),b.useEffect(()=>{A.value||(fe(),h.setDragTarget(null,null),j(void 0))},[A.value]),b.useEffect(M,[T,S,e.version,l]),b.useEffect(()=>{M(),e.setCallbacks(he)},[e.visibleLeft,e.visibleWidth]);const K={width:e.visibleWidth,height:e.timelineHeight,position:"absolute",pointerEvents:"none",cursor:e.pointerMouse?"pointer":"default",left:0,top:0},$=Math.ceil(r),de=Math.ceil(d);return c.jsxs("div",{style:{position:"relative"},children:[c.jsx("canvas",{ref:t,width:$,height:de,tabIndex:0,style:{...K,zIndex:0}}),c.jsx("canvas",{ref:o,width:$,height:de,tabIndex:-1,style:{...K,zIndex:1,backgroundColor:"transparent"}}),c.jsx("canvas",{ref:n,width:$,height:de,tabIndex:-1,style:{...K,zIndex:2,backgroundColor:"transparent"}})]})}const xT=b.createContext(void 0),PT=b.createContext(void 0);function D2(){const e=b.useContext(PT),t=b.useContext(xT);if(!(t===void 0&&e===void 0))return{...e,...t}}function fs(){const e=b.useContext(PT),t=b.useContext(xT);if(t===void 0)throw new Error("Base UI: DialogRootContext is missing. Dialog parts must be placed within <Dialog.Root>.");return{...e,...t}}const y2={...hE,...JR},lD=b.forwardRef(function(t,n){const{render:o,className:l,forceRender:r=!1,...d}=t,{open:E,nested:h,mounted:A,transitionStatus:R,backdropRef:T}=fs(),S=b.useMemo(()=>({open:E,transitionStatus:R}),[E,R]);return po("div",t,{state:S,ref:[T,n],customStyleHookMapping:y2,props:[{role:"presentation",hidden:!A,style:{userSelect:"none",WebkitUserSelect:"none"}},d],enabled:r||!h})}),v2=b.createContext(void 0);function M2(e=!1){const t=b.useContext(v2);if(t===void 0&&!e)throw new Error("Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.");return t}function L2(e){const{focusableWhenDisabled:t,disabled:n,composite:o=!1,tabIndex:l=0,isNativeButton:r}=e,d=o&&t!==!1,E=o&&t===!1;return{props:b.useMemo(()=>{const A={onKeyDown(R){n&&t&&R.key!=="Tab"&&R.preventDefault()}};return o||(A.tabIndex=l,!r&&n&&(A.tabIndex=t?l:-1)),(r&&(t||d)||!r&&n)&&(A["aria-disabled"]=n),r&&(!t||E)&&(A.disabled=n),A},[o,n,t,d,E,r,l])}}function sD(e={}){const{disabled:t=!1,focusableWhenDisabled:n,tabIndex:o=0,native:l=!0}=e,r=b.useRef(null),d=M2(!0)!==void 0,E=nt(()=>{const R=r.current;return!!(R?.tagName==="A"&&R?.href)}),{props:h}=L2({focusableWhenDisabled:n,disabled:t,composite:d,tabIndex:o,isNativeButton:l});return Lt(()=>{const R=r.current;R instanceof HTMLButtonElement&&d&&t&&h.disabled===void 0&&R.disabled&&(R.disabled=!1)},[t,h.disabled,d]),{getButtonProps:b.useCallback((R={})=>{const{onClick:T,onMouseDown:S,onKeyUp:I,onKeyDown:C,onPointerDown:_,...O}=R;return $R({type:l?"button":void 0,onClick(U){if(t){U.preventDefault();return}T?.(U)},onMouseDown(U){t||S?.(U)},onKeyDown(U){if(t||(Vm(U),C?.(U)),U.baseUIHandlerPrevented)return;const H=U.target===U.currentTarget&&!l&&!E()&&!t,L=U.key==="Enter",w=U.key===" ";H&&((w||L)&&U.preventDefault(),L&&T?.(U))},onKeyUp(U){t||(Vm(U),I?.(U)),!U.baseUIHandlerPrevented&&U.target===U.currentTarget&&!l&&!t&&U.key===" "&&T?.(U)},onPointerDown(U){if(t){U.preventDefault();return}_?.(U)}},l?void 0:{role:"button"},h,O)},[t,h,l,E]),buttonRef:r}}function H2(e){const{open:t,setOpen:n,disabled:o,nativeButton:l}=e,r=nt(A=>{t&&n(!1,A.nativeEvent,"close-press")}),{getButtonProps:d,buttonRef:E}=sD({disabled:o,native:l});return{getRootProps:A=>$R({onClick:r},A,d),ref:E}}const rD=b.forwardRef(function(t,n){const{render:o,className:l,disabled:r=!1,nativeButton:d=!0,...E}=t,{open:h,setOpen:A}=fs(),{getRootProps:R,ref:T}=H2({disabled:r,open:h,setOpen:A,nativeButton:d}),S=b.useMemo(()=>({disabled:r}),[r]);return po("button",t,{state:S,ref:[n,T],props:[E,R]})});function cD(e){return rE(e,"base-ui")}const uD=b.forwardRef(function(t,n){const{render:o,className:l,id:r,...d}=t,{setDescriptionElementId:E}=fs(),h=cD(r);return Lt(()=>(E(h),()=>{E(void 0)}),[h,E]),po("p",t,{ref:n,props:[{id:h},d]})});function U2(e){return WC(19)?e:e?"true":void 0}const dD="ArrowUp",hD="ArrowDown",ED="ArrowLeft",fD="ArrowRight",AD="Home",mD="End",k2=new Set([ED,fD]),x2=new Set([dD,hD]),P2=new Set([...k2,...x2]);[...P2];const w2=new Set([dD,hD,ED,fD,AD,mD]);function G2(e){const{descriptionElementId:t,initialFocus:n,mounted:o,openMethod:l,ref:r,setPopupElement:d,titleElementId:E}=e,h=b.useRef(null),A=Mr(r,h,d),R=b.useCallback(I=>I==="touch"?h:0,[]),T=b.useMemo(()=>n==null?R(l??""):typeof n=="function"?n(l??""):n,[R,n,l]);return{popupProps:{"aria-labelledby":E??void 0,"aria-describedby":t??void 0,role:"dialog",tabIndex:-1,ref:A,hidden:!o,onKeyDown(I){w2.has(I.key)&&I.stopPropagation()}},resolvedInitialFocus:T}}let B2=function(e){return e.nestedDialogs="--nested-dialogs",e}({}),F2=function(e){return e[e.open=jl.open]="open",e[e.closed=jl.closed]="closed",e[e.startingStyle=jl.startingStyle]="startingStyle",e[e.endingStyle=jl.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e}({});const z2=b.forwardRef(function(t,n){const{cutout:o,...l}=t;let r;if(o){const d=o?.getBoundingClientRect();r=`polygon(
      0% 0%,
      100% 0%,
      100% 100%,
      0% 100%,
      0% 0%,
      ${d.left}px ${d.top}px,
      ${d.left}px ${d.bottom}px,
      ${d.right}px ${d.bottom}px,
      ${d.right}px ${d.top}px,
      ${d.left}px ${d.top}px
    )`}return c.jsx("div",{ref:n,role:"presentation","data-base-ui-inert":"",...l,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none",clipPath:r}})}),RD=b.createContext(void 0);function j2(){const e=b.useContext(RD);if(e===void 0)throw new Error("Base UI: <Dialog.Portal> is missing.");return e}const Y2={...hE,...JR,nestedDialogOpen(e){return e?{[F2.nestedDialogOpen]:""}:null}},TD=b.forwardRef(function(t,n){const{className:o,finalFocus:l,initialFocus:r,render:d,...E}=t,{descriptionElementId:h,dismissible:A,floatingRootContext:R,getPopupProps:T,modal:S,mounted:I,nested:C,nestedOpenDialogCount:_,open:O,openMethod:D,popupRef:U,setPopupElement:H,titleElementId:L,transitionStatus:w,onOpenChangeComplete:G,internalBackdropRef:B}=fs();j2(),dE({open:O,ref:U,onComplete(){O&&G?.(!0)}});const j=Mr(n,U),{popupProps:Q,resolvedInitialFocus:ce}=G2({descriptionElementId:h,initialFocus:r,mounted:I,openMethod:D,ref:j,setPopupElement:H,titleElementId:L}),ue=_>0,te=b.useMemo(()=>({open:O,nested:C,transitionStatus:w,nestedDialogOpen:ue}),[O,C,w,ue]),ee=po("div",t,{state:te,props:[T(),Q,{style:{[B2.nestedDialogs]:_}},E],customStyleHookMapping:Y2});return c.jsxs(b.Fragment,{children:[I&&S===!0&&c.jsx(z2,{ref:B,inert:U2(!O)}),c.jsx(XU,{context:R,disabled:!I,closeOnFocusOut:A,initialFocus:ce,returnFocus:l,modal:S!==!1,children:ee})]})});function SD(e){const{children:t,keepMounted:n=!1,container:o}=e,{mounted:l}=fs();return l||n?c.jsx(RD.Provider,{value:n,children:c.jsx(jU,{root:o,children:t})}):null}const K2=()=>{};let uN={},dN={},hN="";function V2(e){if(typeof document>"u")return!1;const t=Br(e);return Ua(t).innerWidth-t.documentElement.clientWidth>0}function W2(e){const n=Br(e).documentElement,o=n.style.overflow;return n.style.overflow="hidden",()=>{n.style.overflow=o}}function X2(e){const t=Br(e),n=t.documentElement,o=t.body,l=Ua(n);let r=0,d=0;const E=ki.create();if(rC&&(l.visualViewport?.scale??1)!==1)return()=>{};function h(){const T=l.getComputedStyle(n),S=l.getComputedStyle(o);r=n.scrollTop,d=n.scrollLeft,uN={scrollbarGutter:n.style.scrollbarGutter,overflowY:n.style.overflowY,overflowX:n.style.overflowX},hN=n.style.scrollBehavior,dN={position:o.style.position,height:o.style.height,width:o.style.width,boxSizing:o.style.boxSizing,overflowY:o.style.overflowY,overflowX:o.style.overflowX,scrollBehavior:o.style.scrollBehavior};const I=typeof CSS<"u"&&CSS.supports?.("scrollbar-gutter","stable"),C=n.scrollHeight>n.clientHeight,_=n.scrollWidth>n.clientWidth,O=T.overflowY==="scroll"||S.overflowY==="scroll",D=T.overflowX==="scroll"||S.overflowX==="scroll",U=Math.max(0,l.innerWidth-n.clientWidth),H=Math.max(0,l.innerHeight-n.clientHeight),L=parseFloat(S.marginTop)+parseFloat(S.marginBottom),w=parseFloat(S.marginLeft)+parseFloat(S.marginRight);Object.assign(n.style,{scrollbarGutter:"stable",overflowY:!I&&(C||O)?"scroll":"hidden",overflowX:!I&&(_||D)?"scroll":"hidden"}),Object.assign(o.style,{position:"relative",height:L||H?`calc(100dvh - ${L+H}px)`:"100dvh",width:w||U?`calc(100vw - ${w+U}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),o.scrollTop=r,o.scrollLeft=d,n.setAttribute("data-base-ui-scroll-locked",""),n.style.scrollBehavior="unset"}function A(){Object.assign(n.style,uN),Object.assign(o.style,dN),n.scrollTop=r,n.scrollLeft=d,n.removeAttribute("data-base-ui-scroll-locked"),n.style.scrollBehavior=hN}function R(){A(),E.request(h)}return h(),l.addEventListener("resize",R),()=>{E.cancel(),A(),l.removeEventListener("resize",R)}}class q2{lockCount=0;restore=null;timeoutLock=rl.create();timeoutUnlock=rl.create();acquire(t){return this.lockCount+=1,this.lockCount===1&&this.restore===null&&this.timeoutLock.start(0,()=>this.lock(t)),this.release}release=()=>{this.lockCount-=1,this.lockCount===0&&this.restore&&this.timeoutUnlock.start(0,this.unlock)};unlock=()=>{this.lockCount===0&&this.restore&&(this.restore?.(),this.restore=null)};lock(t){if(this.lockCount===0||this.restore!==null)return;const o=Br(t).documentElement,l=Ua(o).getComputedStyle(o).overflowY;if(l==="hidden"||l==="clip"){this.restore=K2;return}const r=jH||!V2(t);this.restore=r?W2(t):X2(t)}}const Z2=new q2;function Q2(e){const{enabled:t=!0,mounted:n,open:o,referenceElement:l=null}=e;Lt(()=>{if(t&&rC&&n&&!o){const r=Br(l),d=r.body.style.userSelect,E=r.body.style.webkitUserSelect;return r.body.style.userSelect="none",r.body.style.webkitUserSelect="none",()=>{r.body.style.userSelect=d,r.body.style.webkitUserSelect=E}}},[t,n,o,l]),Lt(()=>{if(t)return Z2.acquire(l)},[t,l])}function J2(e){const t=b.useRef(""),n=b.useCallback(l=>{l.defaultPrevented||(t.current=l.pointerType,e(l,l.pointerType))},[e]);return{onClick:b.useCallback(l=>{if(l.detail===0){e(l,"keyboard");return}"pointerType"in l&&e(l,l.pointerType),e(l,t.current),t.current=""},[e]),onPointerDown:n}}function $2(e){const[t,n]=b.useState(null),o=nt((E,h)=>{e||n(h)}),l=nt(()=>{n(null)}),{onClick:r,onPointerDown:d}=J2(o);return b.useMemo(()=>({openMethod:t,reset:l,triggerProps:{onClick:r,onPointerDown:d}}),[t,l,r,d])}function eF(e){const{defaultOpen:t,dismissible:n,modal:o,onNestedDialogClose:l,onNestedDialogOpen:r,onOpenChange:d,open:E,onOpenChangeComplete:h}=e,[A,R]=aC({controlled:E,default:t,name:"DialogRoot",state:"open"}),T=b.useRef(null),S=b.useRef(null),I=b.useRef(null),[C,_]=b.useState(void 0),[O,D]=b.useState(void 0),[U,H]=b.useState(null),[L,w]=b.useState(null),{mounted:G,setMounted:B,transitionStatus:j}=jC(A),{openMethod:Q,triggerProps:ce,reset:ue}=$2(A),te=nt((X,se,Ee)=>{d?.(X,se,Ee),R(X)}),ee=nt(()=>{B(!1),h?.(!1),ue()});dE({enabled:!e.actionsRef,open:A,ref:T,onComplete(){A||ee()}}),b.useImperativeHandle(e.actionsRef,()=>({unmount:ee}),[ee]);const he=QR({elements:{reference:U,floating:L},open:A,onOpenChange:(X,se,Ee)=>{te(X,se,YC(Ee))}}),[M,K]=b.useState(0),$=M===0,de=jk(he),y=ZU(he),Y=FC(he,{outsidePressEvent:"intentional",outsidePress(X){if(X.button!==0)return!1;const se=xn(X);if($&&n){const Ee=se;return o?Ee?I.current===Ee||S.current===Ee:!1:!0}return!1},escapeKey:$});Q2({enabled:A&&o===!0,mounted:G,open:A,referenceElement:L});const{getReferenceProps:W,getFloatingProps:z}=zC([de,y,Y]);b.useEffect(()=>(r&&A&&r(M),l&&!A&&l(),()=>{l&&A&&l()}),[A,l,r,M]);const Z=b.useCallback(X=>{K(X+1)},[]),ne=b.useCallback(()=>{K(0)},[]),P=b.useMemo(()=>W(ce),[W,ce]);return b.useMemo(()=>({modal:o,setOpen:te,open:A,titleElementId:C,setTitleElementId:_,descriptionElementId:O,setDescriptionElementId:D,onNestedDialogOpen:Z,onNestedDialogClose:ne,nestedOpenDialogCount:M,openMethod:Q,mounted:G,transitionStatus:j,triggerProps:P,getPopupProps:z,setTriggerElement:H,setPopupElement:w,popupRef:T,backdropRef:S,internalBackdropRef:I,floatingRootContext:he}),[o,te,A,C,O,Z,ne,M,Q,G,j,P,z,he])}const ID=function(t){const{children:n,defaultOpen:o=!1,dismissible:l=!0,modal:r=!0,onOpenChange:d,open:E,actionsRef:h,onOpenChangeComplete:A}=t,R=D2(),T=eF({open:E,defaultOpen:o,onOpenChange:d,modal:r,dismissible:l,actionsRef:h,onOpenChangeComplete:A,onNestedDialogClose:R?.onNestedDialogClose,onNestedDialogOpen:R?.onNestedDialogOpen}),S=!!R,I=b.useMemo(()=>({...T,nested:S,onOpenChangeComplete:A}),[T,S,A]),C=b.useMemo(()=>({dismissible:l}),[l]);return c.jsx(xT.Provider,{value:I,children:c.jsx(PT.Provider,{value:C,children:n})})},_D=b.forwardRef(function(t,n){const{render:o,className:l,id:r,...d}=t,{setTitleElementId:E}=fs(),h=cD(r);return Lt(()=>(E(h),()=>{E(void 0)}),[h,E]),po("h2",t,{ref:n,props:[{id:h},d]})}),gD=b.forwardRef(function(t,n){const{render:o,className:l,disabled:r=!1,nativeButton:d=!0,...E}=t,{open:h,setTriggerElement:A,triggerProps:R}=fs(),T=b.useMemo(()=>({disabled:r,open:h}),[r,h]),{getButtonProps:S,buttonRef:I}=sD({disabled:r,native:d});return po("button",t,{state:T,ref:[I,n,A],props:[R,{[MC]:""},E,S],customStyleHookMapping:VC})}),pD=window.location.hostname==="xivintheshell.com"?"a023d800-1740-426a-8134-915efc395aa3":window.location.hostname==="beta.xivintheshell.com"?"a0281008-3d39-4afc-81b4-a8ddbf7cbd44":window.location.host==="localhost:3000"?"a028101a-803b-4ad4-99b6-bacb8484e214":window.location.host==="localhost:4173"?"a0281237-7471-47d4-b33c-52a6cbaed4c1":"",tF="https://www.fflogs.com/oauth/authorize",aF="https://www.fflogs.com/oauth/token";function nF(){const e=new Uint8Array(64);return window.crypto.getRandomValues(e),Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")}async function iF(e){const n=new TextEncoder().encode(e),o=await window.crypto.subtle.digest("SHA-256",n);return btoa(String.fromCharCode(...new Uint8Array(o))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const qh="pkceCodeVerifier",du="pkceStateBlob";async function EN(){const e=nF(),t=await iF(e),n=window.crypto.randomUUID();localStorage.getItem(qh)===null&&window.localStorage.setItem(qh,e),window.localStorage.getItem(du)===null&&window.localStorage.setItem(du,n);const o=new URLSearchParams({client_id:pD,code_challenge:t,code_challenge_method:"S256",state:n,redirect_uri:window.location.origin,response_type:"code"});window.location.href=`${tF}?${o.toString()}`}function Ah(){window.localStorage.removeItem(qh),window.localStorage.removeItem(du)}var mh=(e=>(e[e.UNAUTHORIZED=0]="UNAUTHORIZED",e[e.NO_PKCE_VERIFIER=1]="NO_PKCE_VERIFIER",e[e.BAD_PKCE_STATE=2]="BAD_PKCE_STATE",e[e.SUCCESS=3]="SUCCESS",e[e.FAILURE=4]="FAILURE",e))(mh||{});async function fN(){const e=new URLSearchParams(window.location.search);window.history.replaceState({},"",window.location.pathname);const t=e.get("code"),n=window.localStorage.getItem(qh),o=window.localStorage.getItem(du);if(!t)return 0;if(!n)return console.error("PKCE verifier could not be retrieved"),Ah(),1;e.get("state")!==o&&(console.error("PKCE response did not have expected state; force setting new value"),console.log("expected:",o),console.log("actual:",e.get("state")),window.localStorage.setItem(du,e.get("state")));const l=new URLSearchParams({client_id:pD,code_verifier:n,redirect_uri:window.location.origin,grant_type:"authorization_code",code:t});try{const r=await fetch(aF,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l.toString()});if(r.ok){const d=await r.json();return window.sessionStorage.setItem("fflogsAuthToken",d.access_token),console.log("saved auth tokens to sessionStorage"),3}else return console.log("PKCE response was not ok; clearing intermediate state"),console.error(r),Ah(),4}catch(r){return console.log("PKCE exchange failed; clearing intermediate state"),console.error(r),Ah(),4}}function oF(e){const t=URL.parse(e.replace("#","?"));if(t===null)return{apiBaseUrl:"",reportCode:"",error:{en:"invalid URL",zh:""}};if(t.hostname!=="www.fflogs.com"&&t.hostname!=="cn.fflogs.com")return{apiBaseUrl:"",reportCode:"",error:{en:"must be a link to www.fflogs.com or cn.fflogs.com",zh:"www.fflogs.comcn.fflogs.com"}};const n=t.pathname.split("/").filter(A=>A.length>0);if(n.length!==2)return console.error("parsed link parts:",n),{apiBaseUrl:"",reportCode:"",error:{en:"link must contain a single report",zh:""}};console.assert(n.length>0);const o=n[n.length-1],l=t.searchParams,r=parseInt(l.get("fight")??"NaN"),d=isNaN(r)?void 0:r,E=parseInt(l.get("source")??"NaN"),h=isNaN(E)?void 0:E;return{apiBaseUrl:`https://${t.hostname}/api/v2/user/`,reportCode:o,fightID:d,playerID:h}}const ND=new Map([["Paladin","PLD"],["Warrior","WAR"],["DarkKnight","DRK"],["Gunbreaker","GNB"],["WhiteMage","WHM"],["Scholar","SCH"],["Astrologian","AST"],["Sage","SGE"],["Monk","MNK"],["Dragoon","DRG"],["Ninja","NIN"],["Viper","VPR"],["Samurai","SAM"],["Reaper","RPR"],["Bard","BRD"],["Machinist","MCH"],["Dancer","DNC"],["BlackMage","BLM"],["Summoner","SMN"],["RedMage","RDM"],["Pictomancer","PCT"],["BlueMage","BLU"]]),AN=new Set([7,8,33218,34682]),Fl={TEMPERA_COAT:1003686,TEMPERA_GRASSA:1003687,BLACKEST_NIGHT:1001178,TENGENTSU:1003853,THIRD_EYE:1001232,CREST_OF_TIME_BORROWED:1002596},lF=new Map([["TEMPERA_COAT_POP","TEMPERA_COAT"],["TEMPERA_GRASSA_POP","TEMPERA_GRASSA"],["THE_BLACKEST_NIGHT_POP","THE_BLACKEST_NIGHT"],["TENGENTSU_POP","TENGENTSU"],["THIRD_EYE_POP","THIRD_EYE"],["ARCANE_CREST_POP","ARCANE_CREST"]]),sF=`
query ListReportFights($reportCode: String) {
	reportData {
		report(code: $reportCode) {
			fights {
				bossPercentage
				encounterID
				id
				name
				kill
				startTime
			}
			startTime
		}
	}
}`,rF=`
query ListReportFightIDs($reportCode: String) {
	reportData {
		report(code: $reportCode) {
			fights {
				id
			}
		}
	}
}`,cF=`
query ListFightPlayers($reportCode: String, $fightID: Int) {
	reportData {
		report(code: $reportCode) {
			fights(fightIDs: [$fightID]) {
				bossPercentage
				encounterID
				id
				name
				kill
				startTime
			}
			startTime
			playerDetails(fightIDs: [$fightID])
		}
	}
}`,uF=`
query GetPlayerEvents($reportCode: String, $fightID: Int, $playerID: Int) {
	reportData {
		report(code: $reportCode) {
			events(sourceID: $playerID, fightIDs: [$fightID]) {
				data
				nextPageTimestamp
			}
			fights(fightIDs: [$fightID]) {
				name
				combatTime
				startTime
				endTime
			}
			playerDetails(fightIDs: [$fightID])
		}
	}
}`;async function kE(e,t,n){const o={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${window.sessionStorage.getItem("fflogsAuthToken")}`},body:JSON.stringify({query:t,variables:n})};return fetch(e,o).then(l=>l.json()).then(l=>{if(l.error!==void 0)throw new Error(l.error);if(l.errors!==void 0)throw new Error(l.errors);return l.data})}const mN=new Map;function CD(e,t){const n=t.bossPercentage===null?g({en:"(trash)",zh:""}).toString():t.bossPercentage.toFixed(1)+"%";return{label:{en:`${t.name} - ${t.kill?"kill":n}`,zh:`${t.name} - ${t.kill?"":n}`},id:t.id,unixStartTime:e+t.startTime}}async function dF(e,t){const n=mN.get(t);if(n!==void 0)return n;const o=await kE(e,sF,{reportCode:t}),l=o.reportData.report.startTime,r=o.reportData.report.fights.map(d=>CD(l,d));return mN.set(t,r),r}async function hF(e,t){const o=(await kE(e,rF,{reportCode:t})).reportData.report.fights.map(l=>l.id);return Math.max(...o)}function OD(e){return`${e.name??g({en:"(name unknown)",zh:""})} @ ${e.server??g({en:"(world unknown)",zh:""})}`}const qd=new Map;async function RN(e,t,n){const o=qd.get(t)?.get(n);if(o!==void 0)return o;const l=await kE(e,cF,{reportCode:t,fightID:n}),r=Object.values(l.reportData.report.playerDetails.data.playerDetails).flat().map(h=>({id:h.id,name:OD(h),job:ND.get(h.type)??"???"})),d=l.reportData.report.startTime,E=CD(d,l.reportData.report.fights[0]);return qd.has(t)?qd.get(t).set(n,[E,r]):qd.set(t,new Map([[n,[E,r]]])),[E,r]}const rr=new Map;async function TN(e){const t=rr.get(e.reportCode)?.get(e.fightID)?.get(e.playerID);if(t!==void 0)return console.log("query cache hit for",e),t;const n=await kE(e.apiBaseUrl,uF,e),o=Object.values(n.reportData.report.playerDetails.data.playerDetails).flat().filter(O=>O.id===e.playerID)[0],l=ND.get(o.type),r=OD(o);let d,E;const h=n.reportData.report.fights[0],A=[],R=[];let T;const S=new Map,I=new Map;for(let O of n.reportData.report.events.data)if(O.sourceID===e.playerID)if(O.type==="cast"&&!AN.has(O.abilityGameID))T!==void 0&&(T.abilityGameID===O.abilityGameID&&(O=T),T=void 0),A.push(O),R.push(O.timestamp);else if(O.type==="begincast"&&!AN.has(O.abilityGameID))T=O;else if(O.type==="combatantinfo")d=O.level,E={main:O[rt[l].mainStat],spellSpeed:O.spellSpeed,skillSpeed:O.skillSpeed,criticalHit:O.criticalHit,directHit:O.directHit,determination:O.determination,piety:O.piety,tenacity:O.tenacity};else if(O.type==="removebuff"){let D;const U=O.timestamp,H=O.abilityGameID;l==="PCT"&&O.targetID===e.playerID?H===Fl.TEMPERA_COAT?D="TEMPERA_COAT_POP":H===Fl.TEMPERA_GRASSA&&(D="TEMPERA_GRASSA_POP"):l==="DRK"?H===Fl.BLACKEST_NIGHT&&(D="THE_BLACKEST_NIGHT_POP"):l==="SAM"&&O.targetID===e.playerID?H===Fl.TENGENTSU?D="TENGENTSU_POP":H===Fl.THIRD_EYE&&(D="THIRD_EYE_POP"):l==="RPR"&&O.targetID===e.playerID&&H===Fl.CREST_OF_TIME_BORROWED&&(D="ARCANE_CREST_POP"),D!==void 0&&(S.has(D)?S.get(D).add(U):S.set(D,new Set([U])))}else O.type==="applybuff"&&O.targetID===e.playerID&&l==="PCT"&&O.abilityGameID===Fl.TEMPERA_GRASSA&&(I.has("TEMPERA_GRASSA")||I.set("TEMPERA_GRASSA",new Set),I.get("TEMPERA_GRASSA").add(O.timestamp));I.get("TEMPERA_GRASSA")?.forEach(O=>S.get("TEMPERA_COAT_POP")?.delete(O));const C=A.map(O=>{const D=O.abilityGameID,U=hl.get(D)??(D>34e6?"TINCTURE":"NEVER");return U==="NEVER"&&console.error("unknown action id",D),{type:Ge.Skill,skillName:U,targetCount:1,healTargetCount:void 0}}),_={playerName:r,job:l,level:d,statsInLog:E!==void 0&&Object.values(E).every(O=>O!==void 0),inferredConfig:E,buffRemovalActions:Array.from(S.entries().flatMap(([O,D])=>D.entries().map(([U])=>({popKey:O,applyKey:lF.get(O),timestamp:U})))).sort((O,D)=>O.timestamp-D.timestamp),actions:C,timestamps:R,combatStartTime:h.endTime-h.combatTime};return rr.has(e.reportCode)?rr.get(e.reportCode).has(e.fightID)?rr.get(e.reportCode).get(e.fightID).set(e.playerID,_):rr.get(e.reportCode).set(e.fightID,new Map([[e.playerID,_]])):rr.set(e.reportCode,new Map([[e.fightID,new Map([[e.playerID,_]])]])),_}const Zd={width:"100%",height:"1.6em",outline:"none"};function*EF(e,t){const n=p.gameConfig.serialized(),o={...n,procMode:on.Always,job:e.job,initialResourceOverrides:e.job===n.job?n.initialResourceOverrides:[]};for(const[D,U]of Object.entries(e.inferredConfig??{}))typeof U=="number"&&(o[D]=U);e.level!==void 0&&(o.level=e.level),p.setConfigAndRestart(o,t||o.job!==n.job||n.procMode!==o.procMode);const l=p.record.length,r=e.actions;if(console.assert(r.length===e.timestamps.length),r.length===0)return yield{processed:0,total:0,deltas:[],spilledDeltas:0},[];const d=r.map(D=>new wn(D)),h=(e.timestamps[0]-e.combatStartTime)/1e3,A=p.game.getSkillAvailabilityStatus(r[0].skillName).castTime,R=A>0?h-A+ti.getSlidecastWindow(A):h;d.unshift(el(R)),console.log("initial jump time:",h),-R>p.gameConfig.countdown&&p.setConfigAndRestart({...o,countdown:-Math.floor(R)}),p.insertRecordNodes(d,l);const T={processed:1,total:r.length,deltas:[],spilledDeltas:0};let S=1;const I=p.gameConfig.countdown,C=e.buffRemovalActions[Symbol.iterator]();let _=C.next();for(let D=1;D<r.length;D++){const U=r[D],H=l+D+S,L=p.record.actions[H],w=(e.timestamps[D]-e.combatStartTime)/1e3,G=U.skillName;console.assert(L.info.type===Ge.Skill&&L.tmp_startLockTime);const B=L.tmp_startLockTime-I,j=p.record.actions[H-1],Q=j.tmp_endLockTime-I;if(!_.done){const{popKey:te,applyKey:ee,timestamp:fe}=_.value,he=(fe-e.combatStartTime)/1e3;let M;if(Q>he?j.info.type===Ge.Skill&&j.info.skillName===ee?M=H:M=H-1:w>he&&(M=H),M!==void 0){p.insertRecordNode(Wl(te),M),_=C.next(),D--,S++;continue}}const ce=w-B,ue=.05;if(ce>3.5)p.insertRecordNode(el(w),H),S++;else if(ce>ue){const te=w-Q;console.assert(te>0),p.insertRecordNode(mr(te),H),S++}else ce<-ue&&(T.deltas.length>=10?T.spilledDeltas++:T.deltas.push({skill:G,logTime:w,simTime:B}));T.processed++,yield T}const O=p.record.actions.slice(l);return console.log(`inserted ${S} non-skill nodes`),p.undoStack.push(new _P(O,l,n,o)),p.autoSave(),Ka().invalidActions}const cr={textAlign:"left",paddingLeft:"0.3em"},fF=["spellSpeed","skillSpeed","criticalHit","directHit","determination","piety","fps"];function AF(e){const t=pt(),n=p.gameConfig[e.field];return c.jsx(Pt,{style:{display:"inline-block",color:t.text},defaultValue:e.inferredStateValue?.toString()??"",description:Kc(e.field),onChange:o=>{o.length===0&&e.setValue(void 0);const l=parseInt(o);isNaN(l)||e.setValue(l)},placeholder:n.toString()})}function mF(){const[e,t]=b.useState(new URLSearchParams(window.location.search).has("code")),n={},o=b.useContext(Ea)==="Light",l=pt(),[r,d]=b.useState(!0),E=b.useRef(null),[h,A]=b.useState(""),[R,T]=b.useState(0),S=_e=>{R===8&&(C(null),d(!0),O([])),_e!==6&&_e!==7&&B(void 0),_e!==4&&_e!==5&&(H.current=[],w.current=[],L.current=void 0),[2,4,5].includes(_e)||(U.current=void 0),T(_e)},[I,C]=b.useState(null),[_,O]=b.useState([]),D=_e=>{(_e||R!==7)&&(!_e&&R===8&&S(2),t(_e))};b.useEffect(()=>{if(!new URLSearchParams(window.location.search).has("code")&&window.sessionStorage.getItem("fflogsAuthToken")!==null){S(2),console.log("already authorized to fflogs");return}S(1);async function _e(){let ge=0;try{const ye=await fN();if(ye===mh.SUCCESS)ge=2;else if(e&&ye===mh.UNAUTHORIZED){await EN();const Fe=await fN();console.log(Fe),Fe===mh.SUCCESS&&(ge=2)}}catch(ye){console.log("Error during automatic FFLogs authentication"),console.error(ye)}S(ge)}_e()},[]);const U=b.useRef(void 0),H=b.useRef([]),L=b.useRef(void 0),w=b.useRef([]),[G,B]=b.useState(void 0),j={color:l.emphasis,backgroundColor:l.accent},Q=c.jsx("button",{onClick:()=>S(2),children:g({en:"cancel",zh:""})}),ce=c.jsxs("div",{className:"importPage",children:[c.jsx("div",{children:c.jsx("button",{onClick:()=>{EN(),S(1)},children:g({en:"click here to authorize your fflogs account",zh:"fflogs"})})}),c.jsx("span",{children:g({en:"(will redirect to www.fflogs.com)",zh:"www.fflogs.com"})})]}),ue=c.jsx("div",{className:"importPage",children:c.jsx("p",{children:g({en:"verifying authorization...",zh:"..."})})}),te=c.jsxs(c.Fragment,{children:[c.jsx("div",{children:c.jsx("b",{children:g({en:"Limitations",zh:""})})}),c.jsxs("div",{children:[g({en:"Log import is currently subject to the following limitations:",zh:"logs"}),c.jsxs("ul",{children:[c.jsx("li",{children:g({en:"FFLogs only records combat stats for the creator of the log, so stats must be manually entered for other players.",zh:"FFLogs"})}),c.jsx("li",{children:g({en:"FFLogs cannot record actions that were performed before combat began. Pre-pull actions must be entered manually before import.",zh:"FFLogslogs"})}),c.jsx("li",{children:g({en:"Manual buff click-offs, and buff toggles from entering/leaving a zone (for example: leaving Ley Lines or Sacred Soil) are not currently processed by XIV in the Shell.",zh:"XIV in the Shellbuff/buff"})}),c.jsx("li",{children:g({en:"The offset of MP and Lucid Dreaming ticks are not currently synchronized in XIV in the Shell.",zh:"XIV in the Shelllogs"})}),c.jsx("li",{children:g({en:"XIV in the Shell currently does not track when multiple enemies are hit by an ability.",zh:"XIV in the Shell"})}),c.jsx("li",{children:g({en:"XIV in the Shell does not reflect job gauge updates that are affected by random factors, or by whether an enemy is hit or killed.",zh:"XIV in the Shell//"})})]}),g({en:"These may change in future updates.",zh:""})]})]}),ee=R!==2||!h,fe=c.jsxs("div",{className:"importPage",children:[c.jsxs("form",{onSubmit:async _e=>{if(_e.preventDefault(),R===2)try{const ge=oF(h);if(ge.error)throw new Error(g(ge.error).toString());if(S(3),new URL(h).searchParams.get("fight")==="last"){console.log("querying last fight ID");const ye=await hF(ge.apiBaseUrl,ge.reportCode);ge.fightID=ye}if(U.current=ge,ge.fightID===void 0){const ye=await dF(ge.apiBaseUrl,ge.reportCode);H.current=ye,console.log("choosing from",ye.length,"fights"),S(4)}else if(ge.playerID===void 0){const ye=await RN(ge.apiBaseUrl,ge.reportCode,ge.fightID);H.current=[],[L.current,w.current]=ye,console.log("choosing from",w.current.length,"players"),S(5)}else{const ye=await TN({apiBaseUrl:ge.apiBaseUrl,reportCode:ge.reportCode,fightID:ge.fightID,playerID:ge.playerID});B(ye),console.log(`preparing to import ${ye.actions.length} skills`),S(6)}}catch(ge){console.error(ge),window.alert(ge),S(2)}},children:[c.jsx(Pt,{description:c.jsx("div",{children:g({en:"enter an FFLogs report link",zh:"FFLogs"})}),style:{width:"100%"},onChange:A,defaultValue:h,fullWidthInput:!0,autoFocus:!0}),c.jsxs("div",{className:"buttonHolder",style:{marginTop:10},children:[c.jsx("button",{style:ee?{}:j,type:"submit",disabled:ee,children:g({en:"import",zh:""})}),c.jsx("button",{type:"button",onClick:()=>S(0),children:g({en:"back to authorization",zh:""})})]})]}),c.jsx("hr",{}),te]}),he=c.jsx("div",{className:"importPage",children:c.jsx("p",{children:g({en:"retrieving log...",zh:"logs"})})}),M=b.useRef(!1),K=c.jsxs("div",{className:"importPage",children:[c.jsx("b",{children:g({en:"Choose a fight",zh:""})}),c.jsx("ul",{children:H.current.map((_e,ge)=>c.jsx("li",{onClick:()=>{if(M.current)return;const ye=U.current;if(ye===void 0){console.error("log info was undefined in fight choice state"),S(2);return}M.current=!0,RN(ye.apiBaseUrl,ye.reportCode,_e.id).then(Fe=>{[L.current,w.current]=Fe,ye.fightID=_e.id,console.log("choosing from",w.current.length,"players"),S(5)}).catch(Fe=>{console.error(Fe),window.alert(Fe),S(2)}).finally(()=>{M.current=!1})},children:c.jsxs("span",{className:"clickableLinkLike",children:[new Date(_e.unixStartTime).toLocaleString()," - ",g(_e.label)]})},ge))}),c.jsx("div",{children:Q})]}),$=c.jsxs("div",{className:"importPage",children:[L.current&&c.jsxs("span",{children:[new Date(L.current.unixStartTime).toLocaleString()," - ",g(L.current.label)]}),c.jsx("b",{children:g({en:"Choose a player",zh:""})}),c.jsx("ul",{children:w.current.map((_e,ge)=>c.jsx("li",{onClick:()=>{if(M.current)return;const ye=U.current;if(ye===void 0){console.error("log info was undefined in player choice state"),S(2);return}if(ye.fightID===void 0){console.error("fight ID was undefined in player choice state"),S(2);return}M.current=!0,TN({apiBaseUrl:ye.apiBaseUrl,reportCode:ye.reportCode,fightID:ye.fightID,playerID:_e.id}).then(Fe=>{B(Fe),console.log(`preparing to import ${Fe.actions.length} skills`),S(6)}).catch(Fe=>{console.error(Fe),window.alert(Fe),S(2)}).finally(()=>{M.current=!1})},children:c.jsxs("span",{className:"clickableLinkLike",children:[_e.job," - ",_e.name]})},ge))}),H.current.length===0?c.jsx("div",{children:Q}):c.jsx("div",{children:c.jsx("button",{onClick:()=>{S(4),w.current=[]},children:g({en:"back to fight selection",zh:""})})})]}),de=()=>p.gameConfig.job!==G?.job,y=c.jsx(Be,{container:E,topic:"fflogsConfigReset",content:g({en:c.jsxs("div",{children:['FFLogs only records exact combat stats for the player that created the log. All other stats must be entered manually. Any configuration not specified in this dialog, including initial resource overrides, will use the values set in the main "Config" panel.',c.jsx("br",{}),'After a log import, the "proc mode" field is set to "Always". You can manually adjust this later.']})})}),Y=c.jsx(Be,{container:E,topic:"fflogsConfigResetActive",content:g({en:c.jsxs("div",{children:[c.jsx("i",{children:"Actions in the current timeline will be cleared and replaced with those imported from the log."}),c.jsx("br",{}),"FFLogs does not record actions performed before combat begins. To add pre-pull actions, manually insert them after importing, or add them beforehand and uncheck this option."]}),zh:c.jsxs("div",{children:[c.jsx("i",{children:"logs"}),c.jsx("br",{}),"FFLogslogs"]})})}),W=c.jsx(Be,{container:E,topic:"fflogsConfigResetActive",content:g({en:c.jsx("span",{children:c.jsx("i",{children:"Actions imported from the log will be added to the end of the existing timeline."})}),zh:c.jsx("span",{children:c.jsx("i",{children:"logs"})})})}),z=c.jsxs("div",{className:"importPage",children:[g({en:c.jsxs("p",{children:["Reading ",G?.actions.length??0," skills for"," ",c.jsx("b",{children:G?.playerName})]}),zh:c.jsxs("p",{children:["",c.jsx("b",{children:G?.playerName}),"",G?.actions.length??0,""]})}),c.jsxs("div",{children:[G?.statsInLog?g({en:"Using stats found in log. Please adjust as needed.",zh:"logs"}):g({en:"Exact stats not found in log; using values in current game config. Please enter manually or adjust with the Config pane after import. ",zh:"Logs"}),y]}),c.jsx("hr",{}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5},children:[c.jsxs("div",{children:[c.jsx("span",{children:g({en:"job: ",zh:""})}),G?.job??p.game.job]}),G&&c.jsxs("div",{children:[c.jsx("span",{children:g({en:"level: ",zh:""})}),c.jsxs("select",{style:{outline:"none",color:l.text},value:G.level,onChange:_e=>B({...G,level:parseInt(_e.target.value)}),children:[c.jsx("option",{value:Ze.lvl100,children:"100"},Ze.lvl100),c.jsx("option",{value:Ze.lvl90,children:"90"},Ze.lvl90),c.jsx("option",{value:Ze.lvl80,children:"80"},Ze.lvl80),c.jsx("option",{value:Ze.lvl70,children:"70"},Ze.lvl70)]})]})]}),c.jsx("div",{style:{display:"flex",gap:5,flexDirection:"column"},children:fF.map(_e=>c.jsx("div",{children:c.jsx(AF,{field:_e,inferredStateValue:G?.inferredConfig?.[_e],setValue:ge=>{G?.inferredConfig!==void 0&&B({...G,inferredConfig:{...G.inferredConfig,[_e]:ge}})}})},_e))}),c.jsx("hr",{}),de()?c.jsx("div",{children:c.jsx("span",{children:g({en:"Imported actions will replace the current timeline.",zh:""})})}):c.jsxs("div",{children:[c.jsx("input",{className:"shellCheckbox",type:"checkbox",onChange:_e=>{d(_e.currentTarget.checked)},checked:r}),c.jsxs("span",{children:[g({en:"Reset timeline on import",zh:""})," "]}),r?Y:W]}),c.jsxs("div",{className:"buttonHolder",children:[c.jsx("button",{style:j,onClick:()=>{if(G){S(7);const _e=EF(G,r||de());setTimeout(()=>{let ge=_e.next();for(;!ge.done;)C({...ge.value}),ge=_e.next();O(ge.value),S(8)},0)}else console.error("intermediate state was undefined when confirming import"),S(2),D(!1)},children:g({en:"go",zh:""})}),Q]})]}),Z={position:"relative",width:"100%",borderCollapse:"collapse",borderColor:l.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},ne={backgroundColor:l.timelineEditor.headerFooter,...Zl(l)},P=_e=>_e%2===1?l.timelineEditor.bgAlternateRow:"transparent",X=I?.deltas.length?c.jsxs(c.Fragment,{children:[c.jsx("hr",{}),c.jsx("div",{children:g({en:"Some simulated actions had timestamps in XIV in the Shell different from the recorded values in FFLogs. Minor differences are normal, but if you see a very large discrepancy, this means there's either a bug in XIV in the Shell, or the configured spell speed/skill speed/fps was incorrect.",zh:"XIV in the Shell/logsXIV in the Shellbug//"})}),c.jsxs("table",{style:Z,children:[c.jsx("thead",{children:c.jsxs("tr",{style:Zd,children:[c.jsx("th",{style:{...ne,...cr,width:"35%"},children:g({en:"skill",zh:""})}),c.jsx("th",{style:{...ne,...qo},children:g({en:"log time",zh:""})}),c.jsx("th",{style:{...ne,...qo},children:g({en:"shell time",zh:""})}),c.jsx("th",{style:{...ne,...qo},children:g({en:"difference",zh:""})})]})}),c.jsx("tbody",{children:I.deltas.map((_e,ge)=>c.jsxs("tr",{style:{...Zd,background:P(ge)},children:[c.jsx("td",{style:{...cr,width:"35%"},children:li(_e.skill)}),c.jsx("td",{style:qo,children:We.displayTime(_e.logTime,3)}),c.jsx("td",{style:qo,children:We.displayTime(_e.simTime,3)}),c.jsx("td",{style:qo,children:We.displayTime(_e.logTime-_e.simTime,3)})]},ge))})]}),I.spilledDeltas?c.jsx("span",{children:g({en:`...and ${I.spilledDeltas} more`,zh:`${I.spilledDeltas}`})}):void 0]}):c.jsx(c.Fragment,{}),se=c.jsxs("div",{className:"importPage",children:[c.jsx("div",{children:g({en:"processing actions (this may take a moment)...",zh:""})}),I&&c.jsxs("div",{children:[c.jsxs("span",{children:[I.processed," / ",I.total]}),c.jsx("br",{}),X]})]}),Ee=_.length>0?c.jsxs(c.Fragment,{children:[g({en:`The imported timeline produced ${_.length} invalid action${_.length===1?"":"s"}:`,zh:`${_.length}`}),c.jsxs("table",{style:Z,children:[c.jsx("thead",{children:c.jsxs("tr",{style:Zd,children:[c.jsx("th",{style:{...ne,...Ir},children:"#"}),c.jsx("th",{style:{...ne,...cr},children:g({en:"action",zh:""})}),c.jsx("th",{style:{...ne,...cr},children:g({en:"reason",zh:""})})]})}),c.jsx("tbody",{children:_.slice(0,10).map((_e,ge)=>c.jsxs("tr",{style:{...Zd,background:P(ge)},children:[c.jsx("td",{style:Ir,children:_e.index}),c.jsx("td",{style:cr,children:_e.node.toLocalizedString()}),c.jsx("td",{style:cr,children:_e.reason.unavailableReasons.map(Vl).join(g({en:"; ",zh:""}).toString())})]},ge))})]}),_.length>10?c.jsx("span",{children:g({en:`...and ${_.length-10} more`,zh:`...${_.length-10}`})}):void 0]}):void 0,Se=c.jsxs("div",{className:"importPage",children:[c.jsxs("p",{children:[c.jsx("b",{children:g({en:"Import successful!",zh:""})}),g({en:" You may now close this dialog.",zh:""})]}),X,c.jsx("br",{}),Ee,c.jsx("br",{}),c.jsx("div",{children:c.jsx("button",{onClick:()=>D(!1),children:g({en:"finish",zh:""})})})]}),Oe=R===0?ce:R===1?ue:R===2?fe:R===3?he:R===4?K:R===5?$:R===6?z:R===7?se:R===8?Se:c.jsxs("div",{children:["Bad state: ",R,". Please contact us with a bug report."]}),Ue=c.jsxs("div",{ref:E,children:[c.jsx("style",{children:`
			button {
				min-width: 35%;
			}
			.buttonHolder {
				width: 100%;
				display: flex;
				flex-direction: column;
				gap: 0.8em;
				align-items: start;
			}
		`}),Oe]}),Ae=c.jsx("div",{className:"clickable",children:c.jsx("span",{style:n,children:c.jsx("span",{className:"clickableLinkLike",children:g({en:"Click to open dialog",zh:""})})})}),be=c.jsx(DN,{className:"dialogExit",style:{color:l.bgHighContrast}});return c.jsxs(ID,{open:e,onOpenChange:D,children:[c.jsx(gD,{render:Ae,nativeButton:!1}),c.jsxs(SD,{children:[c.jsx(lD,{className:"Backdrop",style:{opacity:o?.2:.7}}),c.jsxs(TD,{className:"Popup visibleScrollbar",id:"dialogPopup",style:{backgroundColor:l.background,border:"1px solid "+l.bgMediumContrast,color:l.text},children:[c.jsx(_D,{render:c.jsx("h3",{children:g({en:"Import from FFLogs",zh:"FFLogs"})})}),c.jsx(rD,{render:be,nativeButton:!1}),c.jsx(uD,{className:"Description",render:Ue})]})]})]})}function RF(e,t){const n=p.getTimelineRenderingProps();let o=n.selectionStartDisplayTime,l=n.selectionEndDisplayTime;o===l&&(o=-n.countdown,l=p.game.time-n.countdown+4);const r=p.imageExportConfig;let d,E;r.wrapThresholdSeconds===0?(d=1,E=l-o):(d=Math.ceil((l-o)/r.wrapThresholdSeconds),E=r.wrapThresholdSeconds);const h=document.createElement("canvas"),A=document.createElement("canvas"),R=pe.trackHeight/2,T=p.timeline,S=T.positionFromTime(n.countdown);h.width=T.positionFromTime(l)+S;let I=pe.renderSlotHeight();e&&(I+=pe.rulerHeight,I+=pe.trackHeight*T.getNumMarkerTracks()),h.height=I;const C=h.getContext("2d",{willReadFrequently:!0}),_=0;C.fillStyle=t.background,C.fillRect(0,0,h.width,h.height);let O=0;const D={renderingProps:p.getTimelineRenderingProps(),colors:t,visibleLeft:0,visibleWidth:100};e&&(O+=Jb({ctx:C,viewInfo:D,originX:0,ignoreVisibleX:!0,testInteraction:()=>{}}),O+=$b({ctx:C,viewInfo:D,originX:_,originY:O,ignoreVisibleX:!0,testInteraction:()=>{}})),tD({ctx:C,viewInfo:D,isImageExportMode:!0,originX:_,originY:O,testInteraction:()=>{}});const U=T.positionFromTime(o)+S,H=T.positionFromTime(l)+S;A.height=(R+I)*(d-1)+I,A.width=d===1?H-U:T.positionFromTime(E);const L=A.getContext("2d");for(let w=0;w<d;w++){const G=T.positionFromTime(E);if(U>H)break;const B=Math.min(H-(U+w*G),G),j=C.getImageData(U+w*G,0,B+1,h.height+1);L.putImageData(j,0,w*(R+I)),w>0&&B<G&&(L.fillStyle=t.background,L.fillRect(B,w*(R+I),G-B,h.height+1))}return A}function TF(){const[e,t]=b.useState(p.imageExportConfig),n=(h,A)=>{const R=Object.assign({},e);R[h]=A,p.setImageExportConfig(R),t(R),ft("img: "+h,JSON.stringify(A))},o={position:"relative",top:3,marginRight:"0.25em"},l=(h,A)=>c.jsxs("div",{style:{marginBottom:5},children:[c.jsx("input",{type:"checkbox",onClick:R=>n(h,R.currentTarget.checked),value:e[h]?"on":"off",style:o,defaultChecked:e[h]}),c.jsx("span",{children:g(A)})]}),r=h=>{Number.isNaN(parseFloat(h))||n("wrapThresholdSeconds",parseFloat(h))},d=c.jsxs(c.Fragment,{children:[c.jsx("div",{children:c.jsx(Pt,{defaultValue:e.wrapThresholdSeconds.toString(),description:c.jsxs("span",{children:[g({en:"seconds before wrapping ",zh:" "}),c.jsx(Be,{topic:"png-wrap",content:g({en:"number of elapsed seconds, including the countdown, in each row in the image (set to 0 to never wrap)",zh:"0"})}),":"," "]}),onChange:r,style:{margin:"10px 0"}})}),l("includeTime",{en:"include time and markers",zh:""})]}),E=pt();return c.jsxs("div",{children:[c.jsx("p",{children:g({en:c.jsx("span",{children:"export the selected part of the timeline as a png according to the current display settings, or the whole timeline if nothing is selected"}),zh:"png"})}),d,c.jsx("p",{children:c.jsx(ol,{filename:"fight",fileFormat:To.Png,getContentFn:()=>RF(e.includeTime,E),displayName:g({en:"export selection as png",zh:"png"})})})]})}function SF(){const e=b.useContext(Ea),t=E=>{E.fileType===ni.Record?p.undoStack.doThenPush(new bP(p.record.serialized(),E)):E.fileType===ni.MarkerTrackIndividual||E.fileType===ni.MarkerTracksCombined?window.alert("wrong file type '"+E.fileType+`'; use the "Timeline markers" section instead if you meant import markers.`):window.alert("wrong file type '"+E.fileType+"'.")},n=g({en:"Export fight to file",zh:""}),o=c.jsxs("div",{children:[c.jsx("p",{children:g({en:"for sharing and importing:",zh:""})}),c.jsx(ol,{fileFormat:To.Json,getContentFn:()=>p.record.serialized(),filename:"fight",displayName:g({en:"txt format",zh:"txt"})}),c.jsx("p",{children:g({en:c.jsxs("span",{children:["for external tools such as excel and"," ",c.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel's plugin"}),":"]}),zh:c.jsxs("span",{children:["excel",c.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel"}),""]})})}),c.jsx(ol,{fileFormat:To.Csv,getContentFn:()=>({body:p.getActionsLogCsv()}),filename:"fight",displayName:g({en:"csv format",zh:"csv"})}),c.jsx("p",{children:g({en:c.jsxs("span",{children:["for use with"," ",c.jsx("a",{href:"https://colab.research.google.com/github/zqsz-xiv/xivintheshell-ama-sim-notebook/blob/main/in_the_shell_with_ama_sim.ipynb",children:"Amarantine's combat simulator"}),":"]}),zh:c.jsxs("span",{children:["",c.jsx("a",{href:"https://github.com/Amarantine-xiv/Amas-FF14-Combat-Sim",children:"Amarantine"}),""]})})}),c.jsx(ol,{fileFormat:To.Csv,getContentFn:()=>p.getAmaSimCsv(),filename:"fight",displayName:g({en:"csv format",zh:"csv"})})]}),l=g({en:"Import fight from file",zh:""}),r=c.jsxs(c.Fragment,{children:[c.jsx(kh,{allowLoadFromUrl:!1,onLoadFn:t}),c.jsx("hr",{style:{marginTop:15,border:"none",borderTop:"1px solid "+sl(e,"bgHighContrast")}}),c.jsx("div",{style:{marginTop:15,marginBottom:10},children:c.jsx("b",{children:g({en:"Import fight from FFLogs",zh:"FFLogs"})})}),c.jsx(mF,{})]}),d=c.jsx(c.Fragment,{children:g({en:"Image Export",zh:""})});return c.jsx(iT,{contentHeight:wT,children:[{defaultSize:25,title:l,content:r},{defaultSize:30,title:n,content:o},{defaultSize:45,title:d,content:c.jsx(TF,{})}]})}function IF(){const e=(d,E)=>c.jsxs("div",{style:{marginBottom:5},children:[c.jsx("b",{children:g(d)})," ",E]}),t=c.jsx(Be,{topic:"settings-display",content:g({en:"Configure how elements are displayed in the visual timeline and image exports.",zh:""})}),n=c.jsx(Be,{topic:"settings-copypaste",content:g({en:c.jsxs("div",{children:["Configure the format used when copying a sequence of skills from XIV in the Shell to paste in other applications.",c.jsx("br",{}),"Any of the provided formats can be pasted ",c.jsx("i",{children:"from"})," external applications to XIV in the Shell at any time, regardless of the value of this setting."]}),zh:c.jsxs("div",{children:["",c.jsx("br",{}),""]})})}),o=c.jsx(Be,{topic:"settings-copypaste-plain",content:g({en:c.jsxs("div",{children:["A comma-separated list of skill names.",c.jsx("br",{}),c.jsx("br",{}),"Example:",c.jsx("br",{}),c.jsx("span",{children:"Fire 3, Fire 4, Despair"})]}),zh:c.jsxs("div",{children:["",c.jsx("br",{}),c.jsx("br",{}),"",c.jsx("br",{}),c.jsx("span",{children:"34"})]})})}),l=c.jsx(Be,{topic:"settings-copypaste-plain",content:g({en:c.jsxs("div",{children:["A tab-separated list of usage timestamps, target counts, and skill names, for use with external spreadsheet applications.",c.jsx("br",{}),c.jsx("br",{}),"Example:",c.jsx("table",{children:c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"-3.500"}),c.jsx("td",{children:"1"}),c.jsx("td",{children:"Fire 3"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"0.042"}),c.jsx("td",{children:"1"}),c.jsx("td",{children:"Fire 4"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"2.500"}),c.jsx("td",{children:"1"}),c.jsx("td",{children:"Despair"})]})]})})]}),zh:c.jsxs("div",{children:["",c.jsx("br",{}),c.jsx("br",{}),"",c.jsx("table",{children:c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"-3.500"}),c.jsx("td",{children:"1"}),c.jsx("td",{children:"3"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"0.042"}),c.jsx("td",{children:"1"}),c.jsx("td",{children:"4"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"2.500"}),c.jsx("td",{children:"1"}),c.jsx("td",{children:""})]})]})})]})})}),r=c.jsx(Be,{topic:"settings-copypaste-discord",content:g({en:c.jsxs("div",{children:["A sequence of Discord emotes (only verified for BLM and PCT). Requires access to a server with appropriately-named emotes to use.",c.jsx("br",{}),c.jsx("br",{}),"Example:",c.jsx("br",{}),c.jsx("span",{children:":F3: :F4: :Despair:"})]}),zh:c.jsxs("div",{children:["Discord)Discord",c.jsx("br",{}),c.jsx("br",{}),"",c.jsx("br",{}),c.jsx("span",{children:":F3: :F4: :Despair:"})]})})});return c.jsxs("div",{children:[e({en:"Display settings",zh:""},t),c.jsx(Xc,{uniqueName:"showDamageMarks",label:g({en:"show damage marks",zh:""}),onChange:d=>{p.setTimelineOptions({drawDamageMarks:d})}}),c.jsx(Xc,{uniqueName:"showHealingMarks",label:g({en:"show healing marks",zh:""}),onChange:d=>{p.setTimelineOptions({drawHealingMarks:d})}}),c.jsx(Xc,{uniqueName:"showMPAndLucidTickMarks",label:g({en:"show MP and lucid ticks",zh:""}),onChange:d=>{p.setTimelineOptions({drawMPTickMarks:d})}}),c.jsx(Xc,{uniqueName:"showBuffIndicators",label:g({en:"show buff indicators",zh:"buff"}),onChange:d=>{p.setTimelineOptions({drawBuffIndicators:d})}}),c.jsx("br",{}),e({en:"Clipboard copy mode",zh:""},n),c.jsx(v0,{uniqueName:"clipboardMode",onChange:d=>p.clipboardMode=d,options:[["plain",c.jsxs("span",{children:[g({en:"plain text",zh:""})," ",o]})],["tsv",c.jsxs("span",{children:[g({en:"tab-separated lines",zh:""})," ",l]})],["discord",c.jsxs("span",{children:["discord",g({en:" emotes",zh:""})," ",r]})]]})]})}let go=()=>{},bD=e=>{};const DD="dragLock",_F=Rt(DD),yD=_F==="true",Cu=b.createContext({value:yD,setter:e=>{}}),xE=b.createContext({dragTargetIndex:null,dragTargetTime:null,setDragTarget:(e,t)=>{}});function gF(){const e=b.useRef(null),[t,n]=b.useState(11),[o,l]=b.useState(300),[r,d]=b.useState(23),[E,h]=b.useState(66),[A,R]=b.useState(0),[T,S]=b.useState(!1),[I,C]=b.useState({onMouseMove:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},onMouseUp:()=>{},onMouseDown:()=>{},onKeyDown:()=>{}}),_=()=>{e.current&&(d(e.current.scrollLeft),h(e.current.clientWidth))};go=()=>{n(p.timeline.getCanvasWidth()),l(p.timeline.getCanvasHeight()),R(A+1)},bD=L=>{if(e.current!=null){const w=e.current.clientWidth;e.current.scrollLeft=L-w*.6}_()},b.useEffect(()=>{n(p.timeline.getCanvasWidth()),l(p.timeline.getCanvasHeight()),_()},[]);const O=c.jsx(b2,{timelineHeight:o,visibleLeft:r,visibleWidth:E,version:A,pointerMouse:T,setCallbacks:C,setPointerMouse:S}),D=b.useContext(Ea),U=sl(D,"bgMediumContrast"),H=b0?c.jsx("div",{style:{height:8},tabIndex:-1}):void 0;return c.jsxs("div",{style:{position:"relative"},children:[O,c.jsxs("div",{tabIndex:0,className:"visibleScrollbar",style:{position:"relative",width:"100%",overflowX:"scroll",overflowY:"clip",outline:"1px solid "+U,cursor:T?"pointer":"default"},ref:e,onScroll:()=>{e.current&&(e.current.scrollLeft=Math.min(e.current.scrollWidth-e.current.clientWidth,e.current.scrollLeft),d(e.current.scrollLeft),h(e.current.clientWidth))},onMouseMove:L=>{if(e.current){const w=e.current.getBoundingClientRect(),G=L.clientX-w.left,B=L.clientY-w.top;I.onMouseMove(G,B)}},onMouseDown:L=>{if(e.current){const w=e.current.getBoundingClientRect(),G=L.clientX-w.left,B=L.clientY-w.top;I.onMouseDown(G,B)}},onMouseEnter:()=>I.onMouseEnter(),onMouseLeave:()=>I.onMouseLeave(),onMouseUp:L=>{if(e.current){const w=e.current.getBoundingClientRect(),G=L.clientX-w.left,B=L.clientY-w.top;I.onMouseUp(L,G,B)}},onKeyDown:L=>I.onKeyDown(L),children:[c.jsx("div",{style:{position:"relative",backgroundColor:"transparent",width:t,height:o,pointerEvents:"none"}}),H]})]})}const vD=320,wT=vD-40;function pF(){const{value:e,setter:t}=b.useContext(Cu),n=b.useContext(Ea),o=window.innerWidth>1024,l=window.innerWidth>800;return c.jsxs("div",{style:{position:"relative",margin:6},children:[c.jsx(y0,{uniqueName:"timeline",maxWidth:1440,content:[{titleNode:g({en:"Timeline markers",zh:""}),contentNode:c.jsx(E2,{})},{titleNode:c.jsxs("div",{style:{position:"relative"},children:[g({en:"Timeline editor ",zh:" "}),c.jsx(Be,{topic:"timeline editor",content:c.jsx("div",{children:c.jsx("div",{className:"paragraph",children:g({en:'Table view for editing the current timeline. Changes made here are not saved until the "apply changes" button is pressed.',zh:""})})})})]}),contentNode:c.jsx(TP,{})},{titleNode:g({en:"Import/Export",zh:"/"}),contentNode:c.jsx("div",{children:c.jsx(SF,{})})},{titleNode:g({en:"Settings",zh:""}),contentNode:c.jsx(IF,{})}],collapsible:!0,scrollable:!1,height:vD,defaultSelectedIndex:void 0}),c.jsxs("div",{style:{position:"absolute",top:0,right:6,display:"flex",flexDirection:"row",gap:20},children:[o&&c.jsxs("div",{style:{height:hr,lineHeight:`${hr}px`,verticalAlign:"middle",cursor:"pointer",userSelect:"none"},onClick:r=>{r.preventDefault(),t(!e)},children:[g({en:"drag lock",zh:""})," ",c.jsx(Be,{topic:"dragLock",content:g({en:c.jsx("div",{children:"When locked, disables click/drag to rearrange timeline skills."}),zh:c.jsx("div",{children:""})})})," ",c.jsx(Ar.Provider,{value:{color:e?sl(n,"accent"):void 0,style:{width:12,height:12,verticalAlign:"baseline"}},children:e?c.jsx(dM,{}):c.jsx(uM,{})})]}),l&&c.jsx(AP,{uniqueName:"timelineDisplayScale",description:g({en:"horizontal scale ",zh:" "}),defaultValue:"0.4",style:{height:hr,lineHeight:`${hr}px`,verticalAlign:"middle"},onChange:r=>{p.timeline.setHorizontalScale(parseFloat(r)),p.scrollToTime()}})]})]})}function NF(){const[e,t]=b.useState(yD),[[n,o],l]=b.useState([null,null]),r=(d,E)=>{if(e)d=null,E=null;else{const h=p.record.selectionStartIndex??0;let A=(d??0)-(h??0);A>0&&(A-=p.record.getSelectionLength()),(A===0||d!==null&&p.record.isInSelection(d))&&(d=null,E=null)}(d!==n||E!==o)&&l([d,E])};return c.jsx("div",{style:{bottom:0,left:0,right:0,paddingLeft:0,paddingRight:0,borderTop:"2px solid "+pt().bgHighContrast,flex:0},children:c.jsx(Cu.Provider,{value:{value:e,setter:d=>{ft(DD,d.toString()),t(d)}},children:c.jsxs(xE.Provider,{value:{dragTargetIndex:n,dragTargetTime:o,setDragTarget:r},children:[c.jsx(gF,{}),c.jsx(pF,{})]})})})}const Cn=JSON.parse(`[{"date":"1/11/25","changes":["[SCH] Fixed a bug where using Adloquium, Succor, or Concitation under the effect of Recitation consumed MP.","[BLU] Enabled FFLogs import.","Fixed a bug where importing an FFLogs report link with a fight ID would sometimes not pick the specified fight.","Removed marker presets for M5S-M8S from current content. These can still be found in the \\"archive\\" section of marker presets.","Limited the maximum marker track number to 20."]},{"date":"1/5/25","changes":["[NIN] Fixed a bug where using Doton under the effect of Ten Chi Jin did not apply AoE damage.","New developer blog post (English only): https://blog.xivintheshell.com/posts/the-night-before-heavyweight/"]},{"date":"1/2/25","changes":["[MCH] Adjusted the potency of Wildfire to reflect its inability to CDH.","[SCH][AST] Fixed a bug where DoT effects with no on-hit potency did not receive the player's own Chain Stratagem or Divination buffs.","[DRK] Fixed a bug where Living Shadow granted Scorn below level 100."]},{"date":"12/31/25","changes":["Fixed a visual bug where deleting a marker did not set the correct marker type in the marker creation menu.","[SCH] Fixed a bug where Sacred Soil incorrectly had a 30-second duration.","[SCH] Fixed a bug where Expedient did not grant buffs."]},{"date":"12/30/25","changes":["Changed font specification to improve display on computers with Chinese browser/OS.","Updated the site to automatically use Chinese if your browser is set to use it. Manually using the language selector overrides this.","[BLM] Fixed a bug where overriding the initial AF/UI state gave an extra Polyglot stack."],"changes_zh":["/","",".",""]},{"date":"12/29/25","changes":["[SAM] Added missing application delay values for Hissatsu: Shinten, Kyuten, Gyoten, Yaten, Senei, and Guren.","Updated export to Ama's combat sim to use Grade 4 Gemdraughts for potions.","Added support QQ group to Introductions section."],"changes_zh":["QQ","changelog"]},{"date":"12/26/25","changes":["[AST] Fixed a bug where Stellar Detonation could be repeatedly cast.","[AST] Fixed a bug where automatically-detonated Earthly Star did not receive a pet potency modifier."]},{"date":"12/22/25","changes":["[WAR] Fixed Inner Release being unusable before combat."]},{"date":"12/21/25","changes":["Fixed a bug where importing from FFLogs while resource overrides were active for a different job would crash the site.","[SMN] Fixed a bug where SMN logs could not be imported."]},{"date":"12/19/25","changes":["[RDM] Fixed log imports with Enchanted melee combo actions under the effect of Manafication.","Fixed a bug where importing from FFLogs would sometimes crash the site.","[BRD] Fixed a bug where auto-attacks appeared as an action in log import."]},{"date":"12/16/25","changes":["Updated for patch 7.4."],"changes_zh":["7.4"],"level":"major"},{"date":"12/14/25","changes":["Fixed a bug where the graphical timeline did not render properly when fight markers were loaded and all timeline slots were filled."]},{"date":"12/10/25","changes":["Adjusted the layout of marker presets and input."],"changes_zh":[""]},{"date":"12/7/25","changes":["Adjusted the appearance of scroll bars in Firefox."]},{"date":"11/15/25","changes":["Consumables like Pilgrim's Potions and Super-Ethers in FFLogs imports now display as unknown skills instead of Tinctures."]},{"date":"11/11/25","changes":["Fixed a bug where timeline skill tooltips would be acidentally cut off.","[SCH] Fixed a bug where Energy Drain and Physick were not recognized during log import."],"changes_zh":["","log"]},{"date":"11/7/25","changes":["Added the ability to import fights from FFLogs! You can find it in the Import/Export tab at the bottom of the page.","[WAR] Fixed a typo in the name of Storm's Path and Storm's Eye"],"changes_zh":["FFLogs/"],"level":"major"},{"date":"10/13/25","changes":["Added tracks for The Final Verse (Quantum) Q40."],"level":"minor"},{"date":"9/29/25","changes":["Updated the text of the timeline editor help tooltip.","New developer blog post (English only): https://blog.xivintheshell.com/posts/progressive-ux-improvements/"],"changes_zh":[""],"level":"minor"},{"date":"9/20/25","changes":["[!] Skills can now be inserted in the middle of a timeline.","[!] Pressing backspace/delete now deletes only the selected skills.","Using the up and down arrow keys changes the selected skills.","Most actions can now be undone/redone with ctrl/cmd+z and ctrl/cmd+y.","Actions can now be copy/pasted both within and outside the site (see \\"Settings\\" at the bottom of the page for details).","Adjusted the appearance of some website elements on Firefox."],"changes_zh":["[!]","[!]backspacedelete","    ","ctrl/cmd+zctrl/cmd+y/","",""],"level":"major"},{"date":"9/14/25","changes":["Fixed a bug where certain config stats couldn't be changed."]},{"date":"9/12/25","changes":["Added an \\"apply\\" button to the configuration section, which can be used to change configuration without resetting the timeline."],"changes_zh":[""]},{"date":"9/8/25","changes":["Fixed a crash when loading xivgear/etro links from a job different from the active one.","Fixed an issue where speed effects and certain sps/sks values were displayed incorrectly at level 70 (this was only a cosmetic issue in the configuration panel).","Changing jobs now uses the last saved stats you set for that job.","Creating a new timeline with a different job will now use one of The Balance's best-in-slot gear sets for the current patch."]},{"date":"9/2/25","changes":["Added different tincture images for each job.","Timelines with invalid skill names can now be loaded."]},{"date":"9/1/25","changes":["Added DSR P2 markers from Caro."]},{"date":"8/28/25","changes":["[BRD] Fixed typos in the names of Apex Arrow, The Wanderer's Minuet, and Rain of Death.","[BRD] Export to Ama's combat sim now tracks codas for Radiant Finale and Radiant Encore.","Updated export to Ama's combat sim to include hard-coded STR stats for healer/caster auto-attacks."]},{"date":"8/19/25","changes":["[WHM] Fixed a bug where Lillies would continue to generate even when at full stacks.","Fixed a bug where clicking on the timeline ruler would not immediately display historical state."],"level":"minor"},{"date":"8/17/25","changes":["Changed timeline slot buttons to trigger only if the mouse was both pressed and released on top of them."],"level":"minor"},{"date":"8/11/25","changes":["Made some internal adjustments to the implementation of click/drag selection and skill arrangements.","[WAR] Fixed a bug where Decimate consumed 2 stacks of Inner Release, and failed to grant Burgeoning Fury.","[WAR] Fixed Storm's Eye using an incorrect application delay.","[WAR] Extended the duration of the Inner Release, Primal Rend Ready, and Primal Ruination buffs to match in-game behavior.","[NIN] Fixed a bug where using Gust Slash without an active combo incorrectly advanced combo state.","[NIN] Fixed a bug where damage from Doton ticks was not computed.","[NIN] Fixed a bug where using Katon under Ten Chi Jin did not trigger Hollow Nozuchi."],"level":"minor"},{"date":"8/10/25","changes":["[NIN] Fixed a bug where Ninjutsu abilities were not buffed by Kunai's Bane and Dokumori."],"level":"minor"},{"date":"8/8/25","changes":["Added quick links to our GitHub, Bluesky, and (new) developer blog.","Added Bluesky, the dev blog, and the legacy game version site to the links in the \\"about\\" section."],"level":"minor"},{"date":"8/4/25","changes":["Updated for patch 7.3."],"changes_zh":["7.3"],"level":"major"},{"date":"8/3/25","changes":["The active timeline slot is now saved across page reloads.","Click and drag to rearrange skills, both in the visual timeline and timeline editor table.","Click and drag on the background of the visual timeline to select multiple skills.","Use the \\"drag lock\\" switch to the right of the display settings tabs to disable click+drag behavior."],"changes_zh":["","","",""],"level":"major"},{"date":"7/27/25","changes":["Updated FPS adjustment preview tooltip to use GCD time instead of cast times."]},{"date":"7/26/25","changes":["[WHM][AST][SCH] Fixed a bug where Swiftcast's cooldown was set to 40s below level 100."]},{"date":"7/25/25","changes":["[SCH] Initial SCH implementation. Thanks to Caro for help with numbers and some mechanics.","That's every job now in the shell! Stay tuned for more features and improvements to come."],"changes_zh":["Caro",""],"level":"major"},{"date":"7/22/25","changes":["[DNC] Fixed a bug where Fountain and Bladeshower could grant Silken Flow when used without combo."]},{"date":"7/20/25","changes":["[VPR] Added initial support for VPR. Thanks to Verra for help testing.","[BLU] Using an action while Waning Nocturne or Diamondback are active now uses the action as soon as the debuff expires."],"changes_zh":[" Verra","\\"\\"\\"\\""],"level":"major"},{"date":"7/15/25","changes":["Fixed \\"real-time auto pause\\" display.","[GNB] Fixed a bug where Fated Circle broke combos."],"changes_zh":["\\"(\\"",""],"level":"minor"},{"date":"7/14/25","changes":["[BLU] Fixed a bug where Apokalypsis and Phantom Flurry's potencies were incorrect.","[BLU] Fixed a bug where Surpanakha's 30-second cooldown was not applied."],"changes_zh":["\\"\\"\\"\\"","\\"\\"30CD"],"level":"minor"},{"date":"7/10/25","changes":["[MNK] Now begins encounters with Formless Fist active by default.","[DRG][NIN] Fixed a bug where using combo actions out of sequence granted combo potency bonus.","[AST] Fixed Macrocosmos/Microcosmos."],"changes_zh":["\\"\\"","",""],"level":"minor"},{"date":"7/8/25","changes":["[AST] Added initial support for AST.","[WHM] Addd initial support for WHM.","[SAM][NIN][MNK] GCD calculations in the configuration panel now account for jobs' natural speed buffs."],"changes_zh":[" "," ","GCD"],"level":"major"},{"date":"7/5/25","changes":["[MNK] Added initial support for MNK."],"changes_zh":[" "],"level":"major"},{"date":"6/25/25","changes":["Fixed a bug where timestamps would not appear for wait events in the timeline editor.","Fixed a bug where selecting a skill in the visual canvas did not cause the editor table to scroll to its location."],"level":"minor"},{"date":"6/24/25","changes":["[NIN] Added initial support for NIN."],"changes_zh":[" "],"level":"major"},{"date":"6/19/25","changes":["[DRK] Added initial support for DRK."],"changes_zh":[" "],"level":"major"},{"date":"6/18/25","changes":["Fixed a bug where the \\"wait until timestamp\\" events would change times unexpectedly."],"changes_zh":["\\"\\""],"level":"minor"},{"date":"6/17/25","changes":["Fixed timestamps not appearing in the timeline editor when a new skill is added.","Fixed skill selections ending on \\"wait\\" events not rendering correctly in the graphical timeline.","Fixed skill tooltips in the graphical timeline not displaying AoE potency."],"changes_zh":["","\\"\\"","aoe"],"level":"minor"},{"date":"6/16/25","changes":["[BLU] Added support for Blue Mage."],"changes_zh":[""],"level":"minor"},{"date":"6/6/25","changes":["[GNB][SGE] Chinese localization."],"changes_zh":[""],"level":"minor"},{"date":"6/3/25","changes":["Added the ability to save invalid timelines on the visual canvas. Changes in the timeline editor now reflect in the graphical timeline as well.","The \\"jump to timestamp\\" and \\"wait for MP tick\\" buttons will now always look for the specified timestamp/next MP tick, even when actions are shifted in the timeline editor.","Added a \\"Clone timeline slot\\" button.","See our \\"known bugs\\" page on GitHub for limitations: https://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"changes_zh":["","","","GitHubhttps://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"level":"major"},{"date":"5/29/25","changes":["[PLD] Chinese localization adjustments.","[SMN] Chinese localization; fix summon lock bar not showing progress."],"changes_zh":["",""],"level":"minor"},{"date":"5/28/25","changes":["[PLD] Chinese localization first draft."],"changes_zh":[""],"level":"minor"},{"date":"5/27/25","changes":["[BRD][MCH][SMN] Adjusted AoE potencies to reflect patch 7.25."],"changes_zh":["7.25"],"level":"minor"},{"date":"5/26/25","changes":["Fixed a bug where damage log CSV export didn't work (thanks ryxiv)."],"level":"minor"},{"date":"5/23/25","changes":["Adjusted the calculations for the effect of crit/DH party buffs on auto-crit/DH hits, like PCT's Hammer combo.","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"changes_zh":["","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"level":"minor"},{"date":"5/18/25","changes":["Updated the site to automatically use dark mode if your system is set to use it. Manually using the theme selector overrides this.","[GNB] Fixed a typo where \\"Lightning Shot\\" was incorrectly called \\"Lightning Shock.\\"","[GNB] Updated the application delay of Trajectory from 0.22 to 0.66 to match the current version of the game."],"level":"minor"},{"date":"5/17/25","changes":["We've made some big updates to the tools we use to build XIV in the Shell. The site should work the same as before, but if you notice anything broken or slow, please let us know posthaste.","We're planning on adding some large features in the near feature, so we've also made the changelog more prominent in anticipation. Please look forward to it."],"changes_zh":["XIV in the Shell",""],"level":"major"},{"date":"5/10/25","changes":["[PLD] Added initial support for PLD"],"changes_zh":[" "],"level":"major"},{"date":"5/9/25","changes":["[RPR] Fixed a bug where Regress wasn't usable in enshroud","[RPR] Fixed a bug where Grim Swathe was replaced with Lemure's Slice instead of Lemure's Scythe","[RPR] Fixed a bug where Perfectio was usable in enshroud","[RPR] Fixed a bug where Executioner's Gibbet/Gallows weren't replaced with Void/Cross Reaping while in enshroud","[SMN] Fixed a bug where Slipstream's initial hit falloff was displayed incorrectly in the DoT table (thanks omor1)","[SMN] Fixed the potency of Mountain Buster (was incorrectly listed as 170 instead of 160, thanks omor1)"]},{"date":"5/2/25","changes":["Changed Ama's combat sim export to disable auto-attacks for healer/caster jobs."]},{"date":"4/28/25","changes":["Refactored cooldown logic. Changes should not affect end users, but let us know if anything is off.","Added a few missing translations"]},{"date":"4/21/25","changes":["Updated compatibility with Ama's combat sim for newly-supported jobs."]},{"date":"4/17/25","changes":["[RPR] Added a button to gain +10 Soul Gauge to simulate a target dying with Death's Design active","[BRD] Fixed a bug where Iron Jaws checked the dot status at application time instead of confirmation time (thanks Yumiya)","[BRD] Fixed a bug where Empyreal Arrow applied repertoire at application time instead of confirmation time (also thanks Yumiya)"]},{"date":"4/13/25","changes":["Added English-language markers for M8S"]},{"date":"4/7/25","changes":["Added English-language markers for M7S"]},{"date":"4/6/25","changes":["Added English-language markers for M5S + M6S"]},{"date":"3/29/25","changes":["[BLM] Removed \\"outdated\\" status"]},{"date":"3/26/25","changes":["Added user survey link"]},{"date":"3/24/25","changes":["We have updated the site in accordance with the 7.2 patch notes. Goodbye to the Enochian timer o7","[BLM] will remain in \\"outdated\\" status until we have a change to play with the changes in-game.","Since most jobs received only potency changes, your old 7.1 plans should work, but as usual, please let us know if anything seems incorrect."]},{"date":"3/20/25","changes":["[DNC] Fixed an issue where the icons for Finishing Move Ready and Last Dance Ready were swapped, and an issue where Last Dance Ready was not consumed by Last Dance (thank you bluke)"]},{"date":"3/16/25","changes":["Fixed an issue where resource toggles were shown in the timeline editor with their internal keys rather than localized text.","Fixed mistakes in DoT effect override calculations.","In anticipation of patch 7.2, we're working on some changes to make it easier to migrate timelines after site or game changes. The following things have changed:","- Single-clicking an action will now try to use it as soon as the current animation lock/skill cooldown is over (this used to require double-clicking). If the action cannot be used, a wait is automatically added to the timeilne.","- In \\"manual\\" control mode, you no longer need to press space to advance past an action's animation lock (it will now advance automatically when a skill is used).","- Displayed wait durations are now always calculated from the end of the previous animation lock. Any existing timelines will automatically be adjusted--the shown wait times may be different, but the times where actions are used will remain the same.","- Skill sequence presets now include wait durations. This lets you load/save sequences that use late weaves or wait for MP ticks (assuming ticks still line up correctly).","As a consequence of these changes, you actually might now be able to load BLM timelines from 7.05/7.0 that previously were broken as a result of Despair becoming instant. Despair will still be instant and other buff usage will be unchanged, but the time between abilities should be correct.","These changes are very large, and while we've tested to make sure they won't break your existing timelines, there might still be some bugs that slipped through the cracks. As always, please reach out to us if you encounter any problems."]},{"date":"3/1/25","changes":["Make it so that you can only delete the currently active slot, to hopefully reduce the chance of accidentally deleting a slot when switching"]},{"date":"2/26/25","changes":["Updated the GCD formula because the old formula may be off by 0.01s when there is haste buff. Thank you Yuyuka for spotting the error. Note: old timelines (including timelines in browser localStorage) aren't affected; only newly created timelines use the new formula."]},{"date":"2/22/25","changes":["Added Queen Eternal markers by "]},{"date":"2/21/25","changes":["[BRD][GNB][SMN] Removed testing tag"]},{"date":"2/20/25","changes":["[SGE] Initial implementation for SGE","- Some rough edges still exist around Krasis' healing potency modification and Eukrasian shield handling.","- Basic functionality should be reasonably complete.","[RDM] Fixed a bug where Manafication could be used before combat"]},{"date":"2/16/25","changes":["[SAM] Fixed Hagakure only being usable at 3 sen"]},{"date":"2/15/25","changes":["[BLM] Fixed Manafont CD at lvl80 and below: should be 120s"]},{"date":"2/13/25","changes":["Updated English FRU tracks to more accurately reflect downtime between phases. We previously used the \\"death\\" event in a log as the end of a phase, but it turns out this is inaccurate as the last damage application to the boss occurs ~2 seconds before its recorded death.","- P1 to P2 untargetable duration increased by 2 seconds","- P2 to intermission untargetable duration decreased to align with the \\"crystals become targetable\\" mark","- Intermission to P3 downtime increased to match Gaia's attack killing the crystal","In order to not break existing timelines, the preset EN full fight track now treats P1 as dying 2 seconds before the end of the enrage cast. The start times of all phases are unaffected."]},{"date":"2/4/25","changes":["[SAM] Fixed AoE combo actions not ending the combo","[DRG] Added initial support for DRG"]},{"date":"2/2/25","changes":["[BRD][DNC] Fixed bonuses given from certain crit/DH buffs not applying in total potency calculations"]},{"date":"2/1/25","changes":["[WAR][SAM][RPR][MCH][DNC] Implemented localization for some recently added jobs"]},{"date":"1/27/25","changes":["[SMN] Added initial support for SMN"]},{"date":"1/26/25","changes":["[WAR][GNB] Fixed missing icon for tank LB3s"]},{"date":"1/18/25","changes":["[GNB] Added initial support for GNB"]},{"date":"1/17/25","changes":["Added \\"move end of selection to start of selection\\" button to the timeline editor"]},{"date":"1/12/25","changes":["[RPR] Fixed a bug where oGCDs would improperly consume Reaver/Executioner stacks"]},{"date":"1/8/25","changes":["[WAR] Fixed surging tempest text not showing up in potency modifier tooltip","[MCH] Fixed Overheated potency modifier not being applied"]},{"date":"1/5/25","changes":["Fixed a bug where multi-target spells lost their target counts when using the timeline editor"]},{"date":"1/4/25","changes":["Added support for multi-target abilities"]},{"date":"1/3/25","changes":["[WAR][SAM][RPR] Removed testing tag"]},{"date":"1/1/25","changes":["Added combined English FRU tracks"]},{"date":"12/28/24","changes":["[PCT] Fixed warning for Palette Gauge overcap"]},{"date":"12/24/24","changes":["[MCH] Added support for Flamethrower"]},{"date":"12/22/24","changes":["[BRD] Added initial support for BRD","Overhaul DoT tracking to provide better usage statistics","[BLM] Added High Thunder II"]},{"date":"12/20/24","changes":["Fixed stats tables not including party buff potencies for most skills","Removed flank/rear positional resources for non-melee jobs"]},{"date":"12/19/24","changes":["[WAR] Adjusted animation lock of Primal Rend","Fixed Down for the Count timing in FRU P4 (thanks xi12570)"]},{"date":"12/16/24","changes":["Limit breaks for all jobs!","[MCH][DNC] Removed testing tag","Updated \\"About this tool\\" section","More underlying implementation changes","[PCT] Made Hammer combo expire with Hammer Time buff (changed in 7.1)"]},{"date":"12/13/24","changes":["Fixed sometimes unable to use skills in manual mode with double click","[RPR] Added timer for Immortal Sacrifice","[RPR] Removed enhanced reapings whenever shroud is exited","[RPR] Separated cooldowns of Sacrificium and Lemure's Slice","[RPR] Fixed sks scaling","[WAR] Added initial WAR support"]},{"date":"12/12/24","changes":["Updated English FRU tracks and added P4 + P5"]},{"date":"12/8/24","changes":["Updated Chinese FRU tracks to latest (12/8 ver)","Make stats tables only include selected skills when there is selection"]},{"date":"12/7/24","changes":["Updated positional buff icons","Misc cleanups and optimizations (hey devs: rerun npm install)","[BLM] Fixed Retrace button not changing back to LL if LL is disabled when the buff drops"]},{"date":"12/5/24","changes":["Updated Chinese FRU tracks to latest (12/2 version)","Additional Chinese localization changes (preset lines; initial resource overrides section; many resource names)","New skill icon progress bar visuals "]},{"date":"12/4/24","changes":["Added English FRU P3 tracks by Yara","[RDM] Fixed Swiftcast being consumed before Dualcast when both are active"]},{"date":"12/2/24","changes":["Added English FRU P2 tracks by Yara","Fixed a bug where 'Load tracks starting at timestamp' did not accept some time formats","[RDM] Removed the 'testing' label"]},{"date":"12/1/24","changes":["Updated full FRU tracks in Chinese by  & czmm"]},{"date":"11/30/24","changes":["[MCH] Fixed Scattergun's heat generation (thanks Kairos)","[PCT] Fixed Monochrome Tones appearing when synced to level 80 and other internal trait logic (thanks misterperson)"]},{"date":"11/29/24","changes":["[MCH] Fixed bugs with MCH Overheat consumption on AoE abilities (thanks FloatingGhost)"]},{"date":"11/28/24","changes":["Added some Chinese tracks (M1S-M4S, FRU before P2.5)"]},{"date":"11/27/24","changes":["Added the ability to override stacks to 0 for 1-stack resources that start present by default","Added preliminary FRU P1 tracks by Yara"]},{"date":"11/26/24","changes":["Added the ability to load marker tracks starting from a particular timestamp"]},{"date":"11/25/24","changes":["[RPR] Added initial RPR support"]},{"date":"11/24/24","changes":["[MCH] Added initial MCH support"]},{"date":"11/21/24","changes":["[SAM] Fixed a bug where Fuka haste was doubly applied","[SAM] Added GCD under Fuka in playback control"]},{"date":"11/20/24","changes":["[DNC] Added initial DNC support","[SAM] Added initial SAM support (thank you Sterling Sylva for the initial work)","Added support for skill speed in addition to spell speed"]},{"date":"11/17/24","changes":["[RDM] Fix Manafication CD (thanks )","[all casters] Fix Surecast duration: previously 10s, now 6.5s (ty erii)"]},{"date":"11/16/24","changes":["Make DET use main stat formula and default to 440","Add hyperlinks for xivgear and etro"]},{"date":"11/15/24","changes":["(thank you Yuyuka for reporting a bunch of RDM bugs)","[RDM] Added some additional warnings on unintended buff drops, overwrites, and combo breaks","[RDM] Fixed the duration of the Acceleration buff","[RDM] Fixed the MP costs of Veraero II/Verthunder II","[RDM] Fixed Manafication failing to interrupt combos","[RDM] Fixed Manafication being usable out of combat","[RDM] Fixed Enchanted Reprise clearing mana stacks","[RDM] Made Prefulgence and Vice of Thorns into button replacements"]},{"date":"11/14/24","changes":["(thank you Wan Shott for reporting a bunch of RDM bugs)","[RDM] Fixed bugs where Verfire and Grand Impact didn't grant correct mana","[RDM] Fixed a bug where it was possible to use un-enchanted Moulinet under certain incorrect conditions","mark newly-implemented jobs as in testing and display a warning message when using those jobs"]},{"date":"11/13/24","changes":["Fixed a bug where party buff potencies were not displayed","[PCT] Fixed a bug where using two hammer combos within 30s of each other caused the combo to break","[RDM] Fixed a bug where level synced RDM still received Grand Impact Ready from Acceleration","[RDM] Fixed a bug where Acceleration did not always grant a Verstone/Verfire proc","[RDM] Fixed a bug where certain role buffs were not being displayed on the hotbar","[RDM] Fixed a bug where buffs were overlapping the hotbar","[RDM] Fixed a bug where Contre Sixte's cooldown was improperly affected by traits","Removed debug and implementation notes sections (see repository wiki for implementation notes)"]},{"date":"11/12/24","changes":["Initial XIV in the Shell! Supporting patch 7.1 BLM and PCT, plus preliminary RDM"]}]`);function vm(){return Cn[0].date}function SN(e){const t=pt();return c.jsxs("div",{className:"changelogGroup",children:[c.jsx("div",{children:e.date}),c.jsx("div",{children:g({en:c.jsx(c.Fragment,{children:e.changes.map((n,o)=>c.jsx("div",{className:"changelogLine",style:{color:n.substring(1,5)==="BETA"?t.warning:t.text},children:n},o))}),zh:e.changes_zh!==void 0?c.jsx(c.Fragment,{children:e.changes_zh.map((n,o)=>c.jsx("div",{className:"changelogLine",style:{color:n.substring(1,5)==="BETA"?t.warning:t.text},children:n},o))}):void 0})})]})}const CF=`
.changelogGroup {
	margin-top: 1em;
	margin-bottom: 1em;
}

.changelogLine {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
	margin-left: 0.5em;
}
`;function OF(){let e,t,n={};const o=b.useRef(5),[l,r]=b.useState(!1),[d,E]=b.useState(!1),h=b.useContext(Ea)==="Light",A=pt();b.useEffect(()=>{let I=Rt("changelogLastRead"),C=Rt("changelogLastReadChangeCount");!AM&&(I===null||C===null)&&(I="5/10/25",C="1");const _=I===null||C===null||I===Cn[0].date&&C===Cn[0].changes.length.toString();if(r(_),I!==null&&C!==null){if(!_){let O=0,D=!1;for(;O<Cn.length-1;O++){if(I===Cn[O].date){C!==Cn[O].changes.length.toString()&&O++;break}D=D||Cn[O].level==="major"}E(D),o.current=O}}else ft("changelogLastRead",Cn[0].date),ft("changelogLastReadChangeCount",Cn[0].changes.length.toString())},[]);const R=I=>{I||(o.current=5,l||(ft("changelogLastRead",Cn[0].date),ft("changelogLastReadChangeCount",Cn[0].changes.length.toString())),r(!0))};if(l)e=g({en:"Changelog",zh:"",ja:""}),t="";else{const I=pt();e=g({en:"Changelog (new updates"+(d?"!!":"")+")",zh:""+(d?"":"")+""}),t="!",d?n={color:I.warning,fontWeight:"bold"}:n={fontWeight:"bold"}}const T=c.jsx("div",{className:"clickable",children:c.jsxs("span",{style:n,children:[c.jsxs("span",{children:[t," "]}),c.jsx("span",{className:"clickableLinkLike",children:e})]})}),S=c.jsx(DN,{className:"dialogExit",style:{color:A.bgHighContrast}});return c.jsxs(c.Fragment,{children:[c.jsx("style",{children:CF}),c.jsxs(ID,{onOpenChange:R,children:[c.jsx(gD,{render:T,nativeButton:!1}),c.jsxs(SD,{children:[c.jsx(lD,{className:"Backdrop",style:{opacity:h?.2:.7}}),c.jsxs(TD,{className:"Popup visibleScrollbar",id:"changelogPopup",style:{backgroundColor:A.background,border:"1px solid "+A.bgMediumContrast,color:A.text},children:[c.jsx(_D,{render:c.jsx("h3",{children:e})}),c.jsx(rD,{render:S,nativeButton:!1}),c.jsx(uD,{className:"Description",render:c.jsx(bF,{hiddenStartIndex:o.current,newChanges:!l})})]})]})]})]})}function bF(e){const t=[],n=[];for(let A=0;A<e.hiddenStartIndex;A++)t.push(SN(Cn[A]));for(let A=e.hiddenStartIndex;A<Cn.length;A++)n.push(SN(Cn[A]));const o=g({en:e.newChanges?"New Changes":"Recent Changes",zh:e.newChanges?"":""}),l=c.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[c.jsx("span",{style:{marginTop:10,marginBottom:10},children:c.jsx("b",{children:o})}),c.jsx("div",{style:{margin:10,paddingLeft:6},children:t.map((A,R)=>c.jsx("div",{children:A},R))})]}),[r,d]=b.useState(!1),E=g({en:"Older Changes",zh:""}),h=c.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[c.jsx(is,{content:c.jsxs("span",{children:[c.jsx("span",{children:r?"- ":"+ "}),c.jsx("b",{children:E})]}),onClickFn:()=>d(!r)}),c.jsx("div",{style:{position:"relative",display:r?"block":"none"},children:c.jsxs("div",{style:{margin:10,paddingLeft:6,marginBottom:20},children:[c.jsx("div",{children:n.map((A,R)=>c.jsx("div",{children:A},R))}),c.jsxs("div",{children:["For older changelog entries before the BLM/PCT in the Shell rejoining, see",c.jsx("b",{children:"About this site/Changelog"})," on the old sites:",c.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://miyehn.me/ffxiv-blm-rotation/",children:"BLM in the Shell"}),",",c.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://picto.zqsz.me/",children:"PCT in the Shell"})]})]})})]});return c.jsxs("div",{children:[l,h]})}const Mm=Qc?"https://beta.xivintheshell.com":"https://xivintheshell.com",Rh="https://github.com/xivintheshell/xivintheshell",cR="https://bsky.app/profile/xivintheshell.com",uR="https://blog.xivintheshell.com",dR="https://discord.com/channels/277897135515762698/1307922201726685236",IN="913451994",Lm="https://discord.gg/thebalanceffxiv",DF=()=>c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"paragraph",children:g({en:c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"This tool was initially Black Mage in the Shell, "}),c.jsxs("span",{children:["ideated by ",c.jsx("b",{children:"Eshiya (Galahad)"})," and developed by ",c.jsx("b",{children:"miyehn"})," specifically for BLM during Endwalker since around February 2022."," "]}),c.jsx("span",{children:"After Dawntrail's release, it was expanded to support other jobs and is now maintained by a small team of developers:"})]}),zh:c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"miyehn202226.x"}),c.jsx("span",{children:"7.0"})]})})}),g({en:c.jsxs("ul",{children:[c.jsxs("li",{children:["Tool design and core systems: ",c.jsx("b",{children:"shanzhe"}),", ",c.jsx("b",{children:"miyehn"}),", ",c.jsx("b",{children:"Turtle"}),","," ",c.jsx("b",{children:"Akairyu"})]}),c.jsxs("li",{children:["BLM: ",c.jsx("b",{children:"shanzhe"}),", ",c.jsx("b",{children:"Akairyu"}),", ",c.jsx("b",{children:"Turtle"}),", ",c.jsx("b",{children:"miyehn"})]}),c.jsxs("li",{children:["PCT, RDM, SMN, DRK, NIN, MNK, WHM, AST, SCH: ",c.jsx("b",{children:"shanzhe"})]}),c.jsxs("li",{children:["SAM: ",c.jsx("b",{children:"Sterling"}),", ",c.jsx("b",{children:"shanzhe"})]}),c.jsxs("li",{children:["DNC, MCH, BRD, SGE: ",c.jsx("b",{children:"Akairyu"})]}),c.jsxs("li",{children:["RPR: ",c.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),c.jsxs("li",{children:["WAR: ",c.jsx("b",{children:"misterperson"})]}),c.jsxs("li",{children:["GNB, DRG, PLD: ",c.jsx("b",{children:"Sterling"})]}),c.jsxs("li",{children:["BLU: ",c.jsx("b",{children:""})]}),c.jsxs("li",{children:["VPR: ",c.jsx("b",{children:"shanzhe"}),", ",c.jsx("b",{children:"misterperson"})]}),c.jsxs("li",{children:["Framework for adding new jobs: ",c.jsx("b",{children:"shanzhe"})]}),c.jsxs("li",{children:["Chinese localization: ",c.jsx("b",{children:"miyehn"}),", ",c.jsx("b",{children:"Eshiya"}),", ",c.jsx("b",{children:"Yuyuka"}),", ",c.jsx("b",{children:"shanzhe"}),","," ",c.jsx("b",{children:""}),", ",c.jsx("b",{children:""}),", ",c.jsx("b",{children:""}),", ",c.jsx("b",{children:""}),", ",c.jsx("b",{children:""}),", ",c.jsx("b",{children:""})]})]}),zh:c.jsxs("ul",{children:[c.jsxs("li",{children:["",c.jsx("b",{children:"shanzhe"}),"",c.jsx("b",{children:"miyehn"}),"",c.jsx("b",{children:"Turtle"}),"",c.jsx("b",{children:"Akairyu"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"shanzhe"}),"",c.jsx("b",{children:"Akairyu"}),"",c.jsx("b",{children:"Turtle"}),"",c.jsx("b",{children:"miyehn"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"shanzhe"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"Sterling"}),"",c.jsx("b",{children:"shanzhe"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"Akairyu"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"misterperson"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"Sterling"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:""})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"shanzhe"}),"",c.jsx("b",{children:"misterperson"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"shanzhe"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"miyehn"}),"",c.jsx("b",{children:""}),"",c.jsx("b",{children:""}),"",c.jsx("b",{children:"shanzhe"}),"",c.jsx("b",{children:""}),"",c.jsx("b",{children:""}),"",c.jsx("b",{children:""}),"",c.jsx("b",{children:""}),"",c.jsx("b",{children:""}),"",c.jsx("b",{children:""})]})]})}),c.jsx("div",{className:"paragraph",children:g({en:"And many thanks to Yara, Spider, Santa, players in , kiyozero, czmm, and other players and groups who contributed feature suggestions, timeline markers, bug reports, etc.",zh:"YaraSpiderSantakiyozeroczmmbug"})}),g({en:c.jsxs("div",{className:"paragraph",children:["If you have questions or would like to provide feedback, you can message in"," ",c.jsx("a",{target:"_blank",href:dR,rel:"noreferrer",children:"this channel in The Balance"})," ",'(requires the "Misc. Support" role), or join QQ group ',IN,' where you can use Chinese. In case of sending a bug report, attaching the fight record (download "fight.txt" from the bottom or name it anything else) would be very helpful.']}),zh:c.jsxs("div",{className:"paragraph",children:[c.jsxs("span",{children:["bugQQ:"," ",IN," Discord The Balance ",c.jsx("a",{target:"_blank",href:dR,rel:"noreferrer",children:""}),' "Misc. Support" role ']}),c.jsx("span",{children:"bugbugfight.txt"})]}),ja:c.jsx("div",{className:"paragraph",children:"[outdated (ja)] Discordmiyehnellyn.waterford@gmail.com fight.txt"})})]});function yF(e){const t={marginBottom:5},n=pt(),o=e.job,l=d=>c.jsx(Ai,{text:d}),r=l(navigator.platform.includes("Mac")?"cmd":"ctrl");return c.jsxs("div",{children:[c.jsx(OF,{}),c.jsx(ll,{defaultShow:!0,title:"instructions",titleNode:c.jsxs("span",{children:[g({en:"Instructions ",zh:" ",ja:" "}),c.jsx(Be,{topic:"expandable",content:g({en:"click me to expand or collapse",zh:"/",ja:""})})]}),content:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:c.jsx("b",{children:g({en:"General Usage",zh:"",ja:""})})}),g({en:c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:["Set your stats in ",c.jsx("b",{children:"Config"})," on the right, then"," ",l("apply and reset"),"."]}),c.jsx("li",{style:t,children:"Click on a skill to use it at the selected point in the timeline. The simulation will always jump to when the last animation lock ends and the skill's cooldown becomes available."}),c.jsxs("li",{style:t,children:["Press ",l("u")," to delete the last added action (effective when not running in real-time). Use ",r,"+",l("z"),"and ",r,"+",l("y")," to undo/redo."]}),c.jsx("li",{style:t,children:"Click on a buff applied to self to remove it. Clicking on certain ground-targeted buffs like BLM's Ley Lines, DRK's Salt and Darkness, and SCH's Sacred Soil temporarily disables their effects. Clicking again re-enables them."}),c.jsx("li",{style:t,children:'Click and drag in the visual timeline or use the "Timeline Editor" tab at the bottom of the page to re-arrange skills.'})]}),zh:c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:["",c.jsx("b",{children:""}),""," ",l("")," "]}),c.jsx("li",{style:t,children:"CD"}),c.jsxs("li",{style:t,children:[" ",l("u")," "," ",r,"+",l("z"),"  ",r,"+",l("y")," "]}),c.jsx("li",{style:t,children:"buffbuff"}),c.jsx("li",{style:t,children:""})]}),ja:c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:["",c.jsx("b",{children:""}),"",c.jsx(Ai,{text:""}),""]}),c.jsx("li",{style:t,children:""}),c.jsxs("li",{style:t,children:[c.jsx(Ai,{text:"u"}),""]}),c.jsx("li",{style:t,children:""})]})}),c.jsx("div",{className:"paragraph",children:c.jsx("b",{children:g({en:"Timeline",zh:"",ja:""})})}),g({en:c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:["Holding ",l("shift")," lets you scroll horizontally."]}),c.jsxs("li",{style:t,children:["Click to select/unselect a single skill on the timeline."," ",l("shift"),"+click or click/drag to select a sequence of skills."]}),c.jsxs("li",{style:t,children:["Use ",l("backspace")," or ",l("delete")," to delete the selected skill(s)."]}),c.jsxs("li",{style:t,children:["Use ",r,"+",l("c")," and ",r,"+",l("v")," to copy/paste skills."]}),c.jsx("li",{style:t,children:"Click on the timeline's ruler-like header to view historical game states. Click on somewhere else on the timeline to return to the most recent game state."})]}),zh:c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:[" ",l("shift")," "]}),c.jsxs("li",{style:t,children:[" shift  ",l("shift")," ",""]}),c.jsxs("li",{style:t,children:[" ",l("backspace"),"  ",l("delete")," "]}),c.jsxs("li",{style:t,children:[" ",r,"+",l("c"),"  ",r,"+",l("v")," ",""]}),c.jsx("li",{style:t,children:""})]}),ja:c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:[c.jsx(Ai,{text:"shift"}),""]}),c.jsxs("li",{style:t,children:["",c.jsx(Ai,{text:"shift"}),""]}),c.jsxs("li",{style:t,children:[c.jsx(Ai,{text:"backspace"}),"",c.jsx(Ai,{text:"delete"}),""]}),c.jsxs("li",{style:t,children:["",c.jsx("b",{style:{color:"darkorange"},children:""})," "]})]})}),g({en:c.jsxs("div",{className:"paragraph",children:[c.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:c.jsx("u",{children:"[these]"})})," ","are file download links. Click to download, or right click to choose save location."]}),zh:c.jsxs("div",{className:"paragraph",children:[c.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:c.jsx("u",{children:"[]"})})," ",""]}),ja:c.jsxs("div",{className:"paragraph",children:[c.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:c.jsx("u",{children:"[]"})}),""]})}),g({en:c.jsxs("div",{className:"paragraph",children:["You can save/load fight records at the bottom, under the"," ",c.jsx("b",{children:"Import/Export"})," tab. Most edits are also automatically saved in your browser cache, so it's generally okay to refresh the page and not worry about losing progress."]}),zh:c.jsxs("div",{className:"paragraph",children:[" ",c.jsx("b",{children:"/"})," ","/"]})}),g({en:c.jsxs("div",{className:"paragraph",children:["Hover over ",c.jsx(Be,{topic:"sampleTips",content:"sample tip"})," ","everywhere to see more tips."]}),zh:c.jsxs("div",{className:"paragraph",children:[" ",c.jsx(Be,{topic:"sampleTips",content:""})," ",""]}),ja:c.jsxs("div",{className:"paragraph",children:[c.jsx(Be,{topic:"sampleTips",content:""}),""]})}),c.jsx("div",{className:"paragraph",style:{marginTop:16},children:c.jsx(ll,{title:"Troubleshoot",titleNode:g({en:c.jsx("b",{children:"troubleshoot"}),zh:c.jsx("b",{children:""}),ja:c.jsx("b",{children:""})}),content:c.jsxs(c.Fragment,{children:[g({en:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:"I can't guarantee that my updates are always backward compatible. If your fight record files aren't loading properly but you don't understand why, contact me and I'll try my best to help."}),c.jsxs("div",{className:"paragraph",children:["If the browser cache is somehow messed up (likely due to invalid game states), this is how to reset it:",c.jsx("br",{}),"Enter this tool from"," ",c.jsx("b",{children:Mm+"?{command}"})," replacing"," ",c.jsx("b",{children:"{command}"})," with one of the following:",c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:[c.jsx("b",{children:"resetResourceOverrides"}),": delete all resource overrides and all actions on the current timeline."]}),c.jsxs("li",{style:t,children:[c.jsx("b",{children:"resetAll"}),": delete all browser-cached settings."]})]})]})]}),zh:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:""}),c.jsxs("div",{className:"paragraph",children:["",c.jsx("br",{}),"",c.jsx("b",{children:Mm+"?{command}"}),"",c.jsx("b",{children:"{command}"}),"",c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:[c.jsx("b",{children:"resetResourceOverrides"}),": "]}),c.jsxs("li",{style:t,children:[c.jsx("b",{children:"resetAll"}),": "]})]})]})]}),ja:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:""}),c.jsxs("div",{className:"paragraph",children:["",c.jsx("br",{}),c.jsx("b",{children:Mm+"?{command}"})," ",c.jsx("b",{children:"{command}"})," ","",c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:[c.jsx("b",{children:"resetResourceOverrides"}),": "]}),c.jsxs("li",{style:t,children:[c.jsx("b",{children:"resetAll"}),": "]})]})]})]})}),c.jsxs("div",{children:[g({en:"Or just: ",zh:""}),c.jsx("button",{className:"dangerButton",onClick:()=>{vN(),window.location.reload()},children:g({en:"[DANGER!] clear browser cache and reload",zh:"[] ",ja:"[] "})})]})]})})})]})}),c.jsx(ll,{defaultShow:!1,title:"About this tool",titleNode:g({en:"About this tool",zh:"",ja:""}),content:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:g({en:"This is a FFXIV simulator & rotation planner.",zh:"FF14/",ja:"FF14"})}),DF(),c.jsx("div",{className:"paragraph",children:g({en:"Some links:",zh:"",ja:""})}),g({en:c.jsxs("ul",{children:[c.jsx("li",{children:c.jsx("a",{href:Rh,children:"Github repository"})}),c.jsxs("li",{children:[c.jsx("a",{href:cR,children:"Bluesky account"})," and our"," ",c.jsx("a",{href:uR,children:"developer blog"})]}),c.jsxs("li",{children:[c.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:"XIV in the Shell (Legacy)"}),": a snapshot of this tool at the end of the previous major game patch (currently 7.25)."]}),c.jsxs("li",{children:[c.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"Black Mage in the Shell (Endwalker)"}),": a snapshot of this tool at the end of Endwalker. It also contains some notable fight plans from Endwalker, as memoir."]}),c.jsxs("li",{children:[c.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": a variation for Save the Queens areas, created by"," ",c.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),c.jsx("li",{children:c.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:"Official FFXIV job guides"})}),c.jsxs("li",{children:["The Balance's community"," ",c.jsx("a",{href:"https://www.thebalanceffxiv.com/",children:"job guides"})," and"," ",c.jsx("a",{href:Lm,children:"Discord"})]})]}),zh:c.jsxs("ul",{children:[c.jsx("li",{children:c.jsx("a",{href:Rh,children:"Github"})}),c.jsxs("li",{children:[c.jsx("a",{href:cR,children:""}),"",c.jsx("a",{href:uR,children:""}),""]}),c.jsxs("li",{children:[c.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:""}),"FF147.25"]}),c.jsxs("li",{children:[c.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"6.x"}),"6.x"]}),c.jsxs("li",{children:[c.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": /"," ",c.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),c.jsx("li",{children:c.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:""})}),c.jsxs("li",{children:["The Balance",c.jsxs("a",{href:"https://www.thebalanceffxiv.com/",children:[" ",""]})," ",c.jsx("a",{href:Lm,children:"Discord"})]})]}),ja:c.jsx("ul",{children:c.jsxs(c.Fragment,{children:[c.jsx("li",{children:c.jsx("a",{href:Rh,children:"Github repository"})}),c.jsxs("li",{children:[c.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": ",c.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),c.jsx("li",{children:c.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/blackmage/",children:"Official FFXIV black mage job guide"})}),c.jsxs("li",{children:[c.jsxs("a",{target:"_blank",href:Lm,rel:"noreferrer",children:[o," resources channel on The Balance"]})," ","Discord"," "]})]})})})]})})]})}function vF(){const e=b.useContext(Ea),t=sl(e,"text");return c.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[c.jsx("style",{children:`
		.linkOption {
			display: inline-block;
			cursor: pointer;
			vertical-align: top;
			margin-top: 1px;
		}
		.linkOption:hover {
			border-bottom: 1px solid;
		}
		`}),c.jsxs("div",{style:{display:"inline-block"},children:[c.jsx(Ar.Provider,{value:{color:t,className:"linkOption"},children:c.jsx("a",{href:cR,title:g({en:"Bluesky",zh:""}),children:c.jsx(lM,{})})}),"|",c.jsx(Ar.Provider,{value:{color:t,className:"linkOption"},children:c.jsx("a",{href:Rh,title:g({en:"GitHub",zh:"GitHub"}),children:c.jsx(sM,{})})}),"|",c.jsx(Ar.Provider,{value:{color:t,className:"linkOption"},children:c.jsx("a",{href:uR,title:g({en:"Blog",zh:""}),children:c.jsx(rM,{})})})]})]})}var MF={};let Zh=e=>{},Qh=e=>{},Jh=e=>{};function LF(e){if(e==="resetAll")vN();else if(e==="resetResourceOverrides"){const t=Rt("gameRecord");for(let n=0;n<mi;n++){let o=Rt("gameRecord"+n.toString());if(n===0&&o===null&&t!==null&&(o=t),o!==null){const l=JSON.parse(o);console.log(l),l.config&&(l.config.initialResourceOverrides=[]),l.actions=[],ft("gameRecord"+n.toString(),JSON.stringify(l))}}}else e==="code"?console.log("FFLogs authorization triggered."):e==="resetFFLogsAuth"?(console.log("Reset FFLogs PKCE authorization state and session token."),window.sessionStorage.removeItem("fflogsAuthToken"),Ah()):e!==void 0&&console.log("unrecognized command '"+e+"'")}function HF(e){return c.jsx("div",{style:{flex:3,height:e.height,marginLeft:6,position:"relative",verticalAlign:"top"},children:c.jsx(y0,{uniqueName:"mainConfig",content:[{titleNode:g({en:"Config",zh:""}),contentNode:c.jsx(KB,{})},{titleNode:g({en:"Control",zh:""}),contentNode:c.jsx(FB,{})}],collapsible:!1,scrollable:!0,height:e.height,defaultSelectedIndex:0})})}function _N(e){const t=e.color??pt().accent;return c.jsx("div",{style:{display:e.hidden===!0?"none":"block",color:t,border:"1px solid "+t,borderRadius:4,padding:"10px 10px 0 10px"},children:e.children})}const gN=Qc?"[BETA] ":"";class UF extends sn.Component{controlRegionRef;gameplayKeyCapture;setColorTheme;state;constructor(t){super(t),LF(t.command),this.state={job:p.getActiveJob(),hasFocus:!1,historical:!1,realTime:!1,controlRegionHeight:0,colorTheme:wN()},this.controlRegionRef=sn.createRef(),this.gameplayKeyCapture=n=>{p.handleKeyboardEvent(n)},Zh=n=>{this.setState({job:n});const o=document.querySelector("link[rel~='icon']");o&&(Qc?o.href="/favicons/beta.ico":n in rt?o.href="/favicons/"+n.toString().toLocaleLowerCase()+".ico":o.href=MF.PUBLIC_URL+"/favicon.ico");const l=document.getElementById("pageTitle");l&&(l.text=`${gN}XIV in the Shell (${n})`)},Qh=n=>{this.setState({realTime:n})},Jh=n=>{this.setState({historical:n})},this.setColorTheme=n=>{n!==this.state.colorTheme&&(p.updateAllDisplay(),this.setState({colorTheme:n}),ft("colorTheme",n))}}componentDidMount(){p.tryAutoLoad(),p.updateAllDisplay(),this.controlRegionRef.current&&new ResizeObserver(()=>{const t=this.controlRegionRef.current?.clientHeight??0;this.setState({controlRegionHeight:t})}).observe(this.controlRegionRef.current)}componentWillUnmount(){Zh=t=>{},Qh=t=>{},Jh=t=>{}}render(){const t=Gn(this.state.colorTheme),n={height:"100%",accentColor:t.accent,fontFamily:_o,fontSize:13,color:t.text,backgroundColor:t.background,display:"flex",flexDirection:"column"};let o;this.state.historical?o="2px solid "+t.historical:this.state.hasFocus?this.state.realTime?o="2px solid "+t.realTime:o="2px solid "+t.accent:o="1px solid "+t.bgMediumContrast;const l={marginBottom:"5px"},r=c.jsx("div",{style:{flex:7,display:"inline-block",position:"relative"},children:c.jsxs("div",{onFocus:()=>{this.setState({hasFocus:!0})},onBlur:()=>{this.setState({hasFocus:!1})},style:{display:"inline-block",padding:8,outline:o},tabIndex:-1,ref:this.controlRegionRef,children:[c.jsx(kP,{}),c.jsx(Dx,{})]})}),d=window.innerWidth>1024;return c.jsxs("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,outline:"none"},tabIndex:-1,onKeyDown:this.gameplayKeyCapture,children:[c.jsx("style",{children:`
				@supports selector(::-webkit-scrollbar) {
					.visibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: ${t.bgLowContrast};
						height: 8px;
						width: 5px;
					}
					.visibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${t.bgHighContrast};
					}
					.invisibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: clear;
						height: 8px;
						width: 5px;
					}
					.invisibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${t.bgHighContrast};
					}
				}
				@supports not selector(::-webkit-scrollbar) {
					.visibleScrollbar {
						scrollbar-color: ${t.bgHighContrast} ${t.bgLowContrast};
						scrollbar-width: auto;
					}
					.invisibleScrollbar {
						scrollbar-width: none;
					}
				}
				a {
					color: ${t.accent};
				}
				b, h1, h2, h3, h4 {
					color: ${t.emphasis};
				}
				p {
					margin-block-start: 10px;
					margin-block-end: 10px;
				}
				p:first-child {
					margin-block-start: 0px;
				}
				::selection {
					background: rgba(147, 112, 219, 0.4);
				}
				option, select {
					color: ${t.text};
					background-color: ${t.background};
				}
				button, input[type="submit"], ::-webkit-file-upload-button {
					color: ${t.text};
					background-color: ${t.bgLowContrast};
					border: 1px solid ${t.bgHighContrast};
				}
				input[type="radio"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${t.bgHighContrast};
					border-radius: 50%;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="radio"]:checked {
					background-color: ${t.accent};
				}
				input[type="checkbox"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${t.bgHighContrast};
					border-radius: 1px;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="checkbox"]:checked:after {
					content: '\\2714';
					color: ${t.accent};
					position: absolute;
					font-size: 22px;
					top: -6px;
					left: -2px;
				}
				input[type="range"] {
					appearance: none;
					background-color: transparent;
					border: 1px solid ${t.bgHighContrast};
					vertical-align: middle;
					height: 0.9em;
					border-radius: 0.45em;
					overflow: hidden;
					padding: 0.05em;
				}
				input[type="range"]::-webkit-slider-thumb {
					appearance: none;
					background-color: ${t.accent};
					width: 0.8em;
					height: 0.8em;
					border-radius: 0.4em;
				}
				.help-tooltip {
					color: ${t.text};
					background-color: ${t.tipBackground};
					opacity: 0.98;
					max-width: 300px;
					outline: 1px solid ${t.bgHighContrast};
					transition: none;
					font-size: 100%;
					z-index: 10;
				}
				button:disabled {
					background-color: ${t.background};
				}
			`}),c.jsx(Ea.Provider,{value:this.state.colorTheme,children:c.jsxs("div",{style:n,id:"globalHelpTooltipAnchor",children:[c.jsx("div",{style:{flex:1,overflowY:"scroll",overscrollBehaviorY:"contain"},children:c.jsxs("div",{style:{position:"relative",maxWidth:1060,margin:"0 auto",marginTop:40,display:"grid"},children:[c.jsxs("div",{style:{position:"absolute",display:"flex",flexWrap:"wrap",justifySelf:"right",justifyContent:"space-between",alignItems:"flex-start",gap:"1.4em"},children:[d&&c.jsx(vF,{}),c.jsx(SH,{}),c.jsx(fH,{setColorTheme:this.setColorTheme})]}),c.jsxs("div",{children:[c.jsxs("h3",{style:{marginTop:0,marginBottom:6},children:[gN,"XIV in the Shell"]}),g({en:c.jsxs("div",{style:{marginBottom:16},children:["Last updated: ",vm()," (see ",c.jsx("b",{children:"Changelog"}),")"]}),zh:c.jsxs("div",{style:{marginBottom:16},children:["",vm(),"",c.jsx("b",{children:""}),""]}),ja:c.jsxs("div",{style:{marginBottom:16},children:["",AH(vm()),"",c.jsx("b",{children:""}),"",c.jsx("a",{href:"https://coda.io/d/_d-N3WFoMZ8e/Black-Mage-in-the-Shell_suRLF",children:""}),""]})}),fM()?c.jsx("div",{style:{margin:"10px 0",padding:"10px",border:"1px solid "+t.warning,color:t.warning,borderRadius:4},children:g({en:c.jsxs("div",{children:["NOTE: Your browser cache contains data from BLM in the Shell before it's updated for Dawntrail. Visit the Endwalker archive at"," ",c.jsx("a",{style:{color:t.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"})," ","to access and automatically re-save it. Once you do that, this notice will also go away."]}),zh:c.jsxs("div",{children:["7.06.0",c.jsx("a",{style:{color:t.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"}),""]})})}):void 0,Qc&&c.jsx(_N,{color:t.warning,children:g({en:c.jsxs("div",{style:{marginBottom:"10px"},children:[c.jsx("span",{children:c.jsx("b",{style:{color:t.warning},children:"You're currently using the BETA version of XIV in the Shell."})}),c.jsxs("ul",{children:[c.jsx("li",{style:l,children:"Things may break in unexpected ways at any time. Use at your own peril, and make sure to export in-progress files frequently."}),c.jsx("li",{style:l,children:"Application data is not shared with the main site. Anything you do here stays here. Files created on the BETA site may not work on the main site, but files made on the main site should be importable here (if they are not, please report this as a bug)."}),c.jsx("li",{style:l,children:"If the page becomes un-loadable, please contact us and tell us what your last actions on the site were, and we can help you debug what went wrong. You can also try resetting your browser's localStorage data for beta.xivintheshell.com."}),c.jsxs("li",{style:l,children:["To report an issue, you can contact us on Discord in The Balance (",c.jsx("a",{href:dR,children:"#xiv_in_the_shell_support"}),"), or file an issue on"," ",c.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"our GitHub"}),"."]})]})]}),zh:c.jsxs("div",{style:{marginBottom:"10px"},children:[c.jsx("span",{children:c.jsx("b",{style:{color:t.warning},children:"XIV in the ShellBETA"})}),c.jsxs("ul",{children:[c.jsx("li",{style:l,children:""}),c.jsx("li",{style:l,children:"BETABETAbug"}),c.jsx("li",{style:l,children:"beta.xivintheshell.comlocalStorage"}),c.jsxs("li",{style:l,children:["miyehnQQ870340705",c.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"GitHub"}),"issue"]})]})]})})}),Qc&&c.jsx("div",{style:{margin:"10px"}}),c.jsx(yF,{job:this.state.job}),c.jsx(ll,{defaultShow:!0,title:"7-2-user-survey",titleNode:c.jsx("span",{children:g({en:"7.2 User Survey",zh:"7.2"})}),content:c.jsx(_N,{children:g({en:c.jsx(c.Fragment,{children:c.jsxs("p",{children:["Help us improve XIV in the Shell! Please take our user survey:"," ",c.jsx("b",{children:c.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://forms.gle/eKVygxxZVd894323A",children:"https://forms.gle/eKVygxxZVd894323A"})})]})}),zh:c.jsx(c.Fragment,{children:c.jsxs("p",{children:[""," ",c.jsx("b",{children:c.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://www.wjx.cn/vm/mQ1gV2b.aspx",children:"https://www.wjx.cn/vm/mQ1gV2b.aspx"})})]})})})})})]}),c.jsxs("div",{style:{display:"flex",flexDirection:"row",position:"relative",marginBottom:"20px"},children:[r,c.jsx(HF,{height:this.state.controlRegionHeight})]}),c.jsx(Mx,{}),c.jsx("hr",{style:{margin:"30px 0px",border:"none",borderTop:"1px solid "+t.bgHighContrast}}),c.jsx(n2,{})]})}),c.jsx(NF,{})]})})]})}}const kF=Jv.createRoot(document.getElementById("root")),xF=new URLSearchParams(document.location.search),pN=Array.from(xF.keys());kF.render(c.jsx(UF,{command:pN.length>0?pN[0]:void 0}));
