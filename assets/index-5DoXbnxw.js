var l1=Object.defineProperty;var cN=e=>{throw TypeError(e)};var s1=(e,t,n)=>t in e?l1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var J=(e,t,n)=>s1(e,typeof t!="symbol"?t+"":t,n),fR=(e,t,n)=>t.has(e)||cN("Cannot "+n);var se=(e,t,n)=>(fR(e,t,"read from private field"),n?n.call(e):t.get(e)),Ve=(e,t,n)=>t.has(e)?cN("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ke=(e,t,n,a)=>(fR(e,t,"write to private field"),a?a.call(e,n):t.set(e,n),n),Oe=(e,t,n)=>(fR(e,t,"access private method"),n);function r1(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const c=Object.getOwnPropertyDescriptor(a,s);c&&Object.defineProperty(e,s,c.get?c:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}})();function YT(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function c1(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var s=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,s.get?s:{enumerable:!0,get:function(){return e[a]}})}),n}var ER={exports:{}},ku={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uN;function u1(){if(uN)return ku;uN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(a,s,c){var d=null;if(c!==void 0&&(d=""+c),s.key!==void 0&&(d=""+s.key),"key"in s){c={};for(var f in s)f!=="key"&&(c[f]=s[f])}else c=s;return s=c.ref,{$$typeof:e,type:a,key:d,ref:s!==void 0?s:null,props:c}}return ku.Fragment=t,ku.jsx=n,ku.jsxs=n,ku}var dN;function d1(){return dN||(dN=1,ER.exports=u1()),ER.exports}var l=d1(),mR={exports:{}},Uu={},AR={exports:{}},RR={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hN;function h1(){return hN||(hN=1,function(e){function t(j,G){var Z=j.length;j.push(G);e:for(;0<Z;){var te=Z-1>>>1,D=j[te];if(0<s(D,G))j[te]=G,j[Z]=D,Z=te;else break e}}function n(j){return j.length===0?null:j[0]}function a(j){if(j.length===0)return null;var G=j[0],Z=j.pop();if(Z!==G){j[0]=Z;e:for(var te=0,D=j.length,F=D>>>1;te<F;){var Y=2*(te+1)-1,B=j[Y],W=Y+1,re=j[W];if(0>s(B,Z))W<D&&0>s(re,B)?(j[te]=re,j[W]=Z,te=W):(j[te]=B,j[Y]=Z,te=Y);else if(W<D&&0>s(re,Z))j[te]=re,j[W]=Z,te=W;else break e}}return G}function s(j,G){var Z=j.sortIndex-G.sortIndex;return Z!==0?Z:j.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var h=[],m=[],R=1,T=null,S=3,I=!1,C=!1,_=!1,O=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function v(j){for(var G=n(m);G!==null;){if(G.callback===null)a(m);else if(G.startTime<=j)a(m),G.sortIndex=G.expirationTime,t(h,G);else break;G=n(m)}}function P(j){if(_=!1,v(j),!C)if(n(h)!==null)C=!0,k||(k=!0,he());else{var G=n(m);G!==null&&Q(P,G.startTime-j)}}var k=!1,w=-1,K=5,ne=-1;function fe(){return O?!0:!(e.unstable_now()-ne<K)}function ue(){if(O=!1,k){var j=e.unstable_now();ne=j;var G=!0;try{e:{C=!1,_&&(_=!1,x(w),w=-1),I=!0;var Z=S;try{t:{for(v(j),T=n(h);T!==null&&!(T.expirationTime>j&&fe());){var te=T.callback;if(typeof te=="function"){T.callback=null,S=T.priorityLevel;var D=te(T.expirationTime<=j);if(j=e.unstable_now(),typeof D=="function"){T.callback=D,v(j),G=!0;break t}T===n(h)&&a(h),v(j)}else a(h);T=n(h)}if(T!==null)G=!0;else{var F=n(m);F!==null&&Q(P,F.startTime-j),G=!1}}break e}finally{T=null,S=Z,I=!1}G=void 0}}finally{G?he():k=!1}}}var he;if(typeof L=="function")he=function(){L(ue)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,q=Ee.port2;Ee.port1.onmessage=ue,he=function(){q.postMessage(null)}}else he=function(){y(ue,0)};function Q(j,G){w=y(function(){j(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_next=function(j){switch(S){case 1:case 2:case 3:var G=3;break;default:G=S}var Z=S;S=G;try{return j()}finally{S=Z}},e.unstable_requestPaint=function(){O=!0},e.unstable_runWithPriority=function(j,G){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Z=S;S=j;try{return G()}finally{S=Z}},e.unstable_scheduleCallback=function(j,G,Z){var te=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?te+Z:te):Z=te,j){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=Z+D,j={id:R++,callback:G,priorityLevel:j,startTime:Z,expirationTime:D,sortIndex:-1},Z>te?(j.sortIndex=Z,t(m,j),n(h)===null&&j===n(m)&&(_?(x(w),w=-1):_=!0,Q(P,Z-te))):(j.sortIndex=D,t(h,j),C||I||(C=!0,k||(k=!0,he()))),j},e.unstable_shouldYield=fe,e.unstable_wrapCallback=function(j){var G=S;return function(){var Z=S;S=G;try{return j.apply(this,arguments)}finally{S=Z}}}}(RR)),RR}var fN;function f1(){return fN||(fN=1,AR.exports=h1()),AR.exports}var TR={exports:{}},et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EN;function E1(){if(EN)return et;EN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),T=Symbol.iterator;function S(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,_={};function O(D,F,Y){this.props=D,this.context=F,this.refs=_,this.updater=Y||I}O.prototype.isReactComponent={},O.prototype.setState=function(D,F){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,F,"setState")},O.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function y(){}y.prototype=O.prototype;function x(D,F,Y){this.props=D,this.context=F,this.refs=_,this.updater=Y||I}var L=x.prototype=new y;L.constructor=x,C(L,O.prototype),L.isPureReactComponent=!0;var v=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function w(D,F,Y,B,W,re){return Y=re.ref,{$$typeof:e,type:D,key:F,ref:Y!==void 0?Y:null,props:re}}function K(D,F){return w(D.type,F,void 0,void 0,void 0,D.props)}function ne(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function fe(D){var F={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Y){return F[Y]})}var ue=/\/+/g;function he(D,F){return typeof D=="object"&&D!==null&&D.key!=null?fe(""+D.key):F.toString(36)}function Ee(){}function q(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(Ee,Ee):(D.status="pending",D.then(function(F){D.status==="pending"&&(D.status="fulfilled",D.value=F)},function(F){D.status==="pending"&&(D.status="rejected",D.reason=F)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Q(D,F,Y,B,W){var re=typeof D;(re==="undefined"||re==="boolean")&&(D=null);var oe=!1;if(D===null)oe=!0;else switch(re){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(D.$$typeof){case e:case t:oe=!0;break;case R:return oe=D._init,Q(oe(D._payload),F,Y,B,W)}}if(oe)return W=W(D),oe=B===""?"."+he(D,0):B,v(W)?(Y="",oe!=null&&(Y=oe.replace(ue,"$&/")+"/"),Q(W,F,Y,"",function(Ce){return Ce})):W!=null&&(ne(W)&&(W=K(W,Y+(W.key==null||D&&D.key===W.key?"":(""+W.key).replace(ue,"$&/")+"/")+oe)),F.push(W)),1;oe=0;var Ae=B===""?".":B+":";if(v(D))for(var me=0;me<D.length;me++)B=D[me],re=Ae+he(B,me),oe+=Q(B,F,Y,re,W);else if(me=S(D),typeof me=="function")for(D=me.call(D),me=0;!(B=D.next()).done;)B=B.value,re=Ae+he(B,me++),oe+=Q(B,F,Y,re,W);else if(re==="object"){if(typeof D.then=="function")return Q(q(D),F,Y,B,W);throw F=String(D),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return oe}function j(D,F,Y){if(D==null)return D;var B=[],W=0;return Q(D,B,"","",function(re){return F.call(Y,re,W++)}),B}function G(D){if(D._status===-1){var F=D._result;F=F(),F.then(function(Y){(D._status===0||D._status===-1)&&(D._status=1,D._result=Y)},function(Y){(D._status===0||D._status===-1)&&(D._status=2,D._result=Y)}),D._status===-1&&(D._status=0,D._result=F)}if(D._status===1)return D._result.default;throw D._result}var Z=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function te(){}return et.Children={map:j,forEach:function(D,F,Y){j(D,function(){F.apply(this,arguments)},Y)},count:function(D){var F=0;return j(D,function(){F++}),F},toArray:function(D){return j(D,function(F){return F})||[]},only:function(D){if(!ne(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},et.Component=O,et.Fragment=n,et.Profiler=s,et.PureComponent=x,et.StrictMode=a,et.Suspense=h,et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,et.__COMPILER_RUNTIME={__proto__:null,c:function(D){return P.H.useMemoCache(D)}},et.cache=function(D){return function(){return D.apply(null,arguments)}},et.cloneElement=function(D,F,Y){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var B=C({},D.props),W=D.key,re=void 0;if(F!=null)for(oe in F.ref!==void 0&&(re=void 0),F.key!==void 0&&(W=""+F.key),F)!k.call(F,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&F.ref===void 0||(B[oe]=F[oe]);var oe=arguments.length-2;if(oe===1)B.children=Y;else if(1<oe){for(var Ae=Array(oe),me=0;me<oe;me++)Ae[me]=arguments[me+2];B.children=Ae}return w(D.type,W,void 0,void 0,re,B)},et.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},et.createElement=function(D,F,Y){var B,W={},re=null;if(F!=null)for(B in F.key!==void 0&&(re=""+F.key),F)k.call(F,B)&&B!=="key"&&B!=="__self"&&B!=="__source"&&(W[B]=F[B]);var oe=arguments.length-2;if(oe===1)W.children=Y;else if(1<oe){for(var Ae=Array(oe),me=0;me<oe;me++)Ae[me]=arguments[me+2];W.children=Ae}if(D&&D.defaultProps)for(B in oe=D.defaultProps,oe)W[B]===void 0&&(W[B]=oe[B]);return w(D,re,void 0,void 0,null,W)},et.createRef=function(){return{current:null}},et.forwardRef=function(D){return{$$typeof:f,render:D}},et.isValidElement=ne,et.lazy=function(D){return{$$typeof:R,_payload:{_status:-1,_result:D},_init:G}},et.memo=function(D,F){return{$$typeof:m,type:D,compare:F===void 0?null:F}},et.startTransition=function(D){var F=P.T,Y={};P.T=Y;try{var B=D(),W=P.S;W!==null&&W(Y,B),typeof B=="object"&&B!==null&&typeof B.then=="function"&&B.then(te,Z)}catch(re){Z(re)}finally{P.T=F}},et.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},et.use=function(D){return P.H.use(D)},et.useActionState=function(D,F,Y){return P.H.useActionState(D,F,Y)},et.useCallback=function(D,F){return P.H.useCallback(D,F)},et.useContext=function(D){return P.H.useContext(D)},et.useDebugValue=function(){},et.useDeferredValue=function(D,F){return P.H.useDeferredValue(D,F)},et.useEffect=function(D,F,Y){var B=P.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return B.useEffect(D,F)},et.useId=function(){return P.H.useId()},et.useImperativeHandle=function(D,F,Y){return P.H.useImperativeHandle(D,F,Y)},et.useInsertionEffect=function(D,F){return P.H.useInsertionEffect(D,F)},et.useLayoutEffect=function(D,F){return P.H.useLayoutEffect(D,F)},et.useMemo=function(D,F){return P.H.useMemo(D,F)},et.useOptimistic=function(D,F){return P.H.useOptimistic(D,F)},et.useReducer=function(D,F,Y){return P.H.useReducer(D,F,Y)},et.useRef=function(D){return P.H.useRef(D)},et.useState=function(D){return P.H.useState(D)},et.useSyncExternalStore=function(D,F,Y){return P.H.useSyncExternalStore(D,F,Y)},et.useTransition=function(){return P.H.useTransition()},et.version="19.1.0",et}var mN;function KT(){return mN||(mN=1,TR.exports=E1()),TR.exports}var SR={exports:{}},ci={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AN;function m1(){if(AN)return ci;AN=1;var e=KT();function t(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)m+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(h,m,R){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:T==null?null:""+T,children:h,containerInfo:m,implementation:R}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return ci.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,ci.createPortal=function(h,m){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return c(h,m,null,R)},ci.flushSync=function(h){var m=d.T,R=a.p;try{if(d.T=null,a.p=2,h)return h()}finally{d.T=m,a.p=R,a.d.f()}},ci.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,a.d.C(h,m))},ci.prefetchDNS=function(h){typeof h=="string"&&a.d.D(h)},ci.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var R=m.as,T=f(R,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,I=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;R==="style"?a.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:I}):R==="script"&&a.d.X(h,{crossOrigin:T,integrity:S,fetchPriority:I,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},ci.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var R=f(m.as,m.crossOrigin);a.d.M(h,{crossOrigin:R,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&a.d.M(h)},ci.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var R=m.as,T=f(R,m.crossOrigin);a.d.L(h,R,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},ci.preloadModule=function(h,m){if(typeof h=="string")if(m){var R=f(m.as,m.crossOrigin);a.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:R,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else a.d.m(h)},ci.requestFormReset=function(h){a.d.r(h)},ci.unstable_batchedUpdates=function(h,m){return h(m)},ci.useFormState=function(h,m,R){return d.H.useFormState(h,m,R)},ci.useFormStatus=function(){return d.H.useHostTransitionStatus()},ci.version="19.1.0",ci}var RN;function S0(){if(RN)return SR.exports;RN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),SR.exports=m1(),SR.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TN;function A1(){if(TN)return Uu;TN=1;var e=f1(),t=KT(),n=S0();function a(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)o+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function c(i){var o=i,r=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(r=o.return),i=o.return;while(i)}return o.tag===3?r:null}function d(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(c(i)!==i)throw Error(a(188))}function h(i){var o=i.alternate;if(!o){if(o=c(i),o===null)throw Error(a(188));return o!==i?null:i}for(var r=i,u=o;;){var E=r.return;if(E===null)break;var A=E.alternate;if(A===null){if(u=E.return,u!==null){r=u;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===r)return f(E),i;if(A===u)return f(E),o;A=A.sibling}throw Error(a(188))}if(r.return!==u.return)r=E,u=A;else{for(var b=!1,M=E.child;M;){if(M===r){b=!0,r=E,u=A;break}if(M===u){b=!0,u=E,r=A;break}M=M.sibling}if(!b){for(M=A.child;M;){if(M===r){b=!0,r=A,u=E;break}if(M===u){b=!0,u=A,r=E;break}M=M.sibling}if(!b)throw Error(a(189))}}if(r.alternate!==u)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var R=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),L=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),fe=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function he(i){return i===null||typeof i!="object"?null:(i=ue&&i[ue]||i["@@iterator"],typeof i=="function"?i:null)}var Ee=Symbol.for("react.client.reference");function q(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Ee?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case C:return"Fragment";case O:return"Profiler";case _:return"StrictMode";case P:return"Suspense";case k:return"SuspenseList";case ne:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case I:return"Portal";case L:return(i.displayName||"Context")+".Provider";case x:return(i._context.displayName||"Context")+".Consumer";case v:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case w:return o=i.displayName||null,o!==null?o:q(i.type)||"Memo";case K:o=i._payload,i=i._init;try{return q(i(o))}catch{}}return null}var Q=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},te=[],D=-1;function F(i){return{current:i}}function Y(i){0>D||(i.current=te[D],te[D]=null,D--)}function B(i,o){D++,te[D]=i.current,i.current=o}var W=F(null),re=F(null),oe=F(null),Ae=F(null);function me(i,o){switch(B(oe,o),B(re,i),B(W,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?wp(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=wp(o),i=Pp(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Y(W),B(W,i)}function Ce(){Y(W),Y(re),Y(oe)}function Be(i){i.memoizedState!==null&&B(Ae,i);var o=W.current,r=Pp(o,i.type);o!==r&&(B(re,i),B(W,r))}function Ne(i){re.current===i&&(Y(W),Y(re)),Ae.current===i&&(Y(Ae),vu._currentValue=Z)}var pe=Object.prototype.hasOwnProperty,le=e.unstable_scheduleCallback,ge=e.unstable_cancelCallback,Ie=e.unstable_shouldYield,be=e.unstable_requestPaint,ye=e.unstable_now,Ue=e.unstable_getCurrentPriorityLevel,Je=e.unstable_ImmediatePriority,It=e.unstable_UserBlockingPriority,nn=e.unstable_NormalPriority,$l=e.unstable_LowPriority,ar=e.unstable_IdlePriority,Md=e.log,Ld=e.unstable_setDisableYieldValue,Pc=null,Yi=null;function qo(i){if(typeof Md=="function"&&Ld(i),Yi&&typeof Yi.setStrictMode=="function")try{Yi.setStrictMode(Pc,i)}catch{}}var Ki=Math.clz32?Math.clz32:Vv,Yv=Math.log,Kv=Math.LN2;function Vv(i){return i>>>=0,i===0?32:31-(Yv(i)/Kv|0)|0}var xd=256,Hd=4194304;function Ql(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function kd(i,o,r){var u=i.pendingLanes;if(u===0)return 0;var E=0,A=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var M=u&134217727;return M!==0?(u=M&~A,u!==0?E=Ql(u):(b&=M,b!==0?E=Ql(b):r||(r=M&~i,r!==0&&(E=Ql(r))))):(M=u&~A,M!==0?E=Ql(M):b!==0?E=Ql(b):r||(r=u&~i,r!==0&&(E=Ql(r)))),E===0?0:o!==0&&o!==E&&(o&A)===0&&(A=E&-E,r=o&-o,A>=r||A===32&&(r&4194048)!==0)?o:E}function Gc(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Wv(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function II(){var i=xd;return xd<<=1,(xd&4194048)===0&&(xd=256),i}function _I(){var i=Hd;return Hd<<=1,(Hd&62914560)===0&&(Hd=4194304),i}function nm(i){for(var o=[],r=0;31>r;r++)o.push(i);return o}function Bc(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Xv(i,o,r,u,E,A){var b=i.pendingLanes;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=r,i.entangledLanes&=r,i.errorRecoveryDisabledLanes&=r,i.shellSuspendCounter=0;var M=i.entanglements,z=i.expirationTimes,ae=i.hiddenUpdates;for(r=b&~r;0<r;){var Re=31-Ki(r),Se=1<<Re;M[Re]=0,z[Re]=-1;var ce=ae[Re];if(ce!==null)for(ae[Re]=null,Re=0;Re<ce.length;Re++){var de=ce[Re];de!==null&&(de.lane&=-536870913)}r&=~Se}u!==0&&gI(i,u,0),A!==0&&E===0&&i.tag!==0&&(i.suspendedLanes|=A&~(b&~o))}function gI(i,o,r){i.pendingLanes|=o,i.suspendedLanes&=~o;var u=31-Ki(o);i.entangledLanes|=o,i.entanglements[u]=i.entanglements[u]|1073741824|r&4194090}function pI(i,o){var r=i.entangledLanes|=o;for(i=i.entanglements;r;){var u=31-Ki(r),E=1<<u;E&o|i[u]&o&&(i[u]|=o),r&=~E}}function im(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function am(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function NI(){var i=G.p;return i!==0?i:(i=window.event,i===void 0?32:iN(i.type))}function qv(i,o){var r=G.p;try{return G.p=i,o()}finally{G.p=r}}var Zo=Math.random().toString(36).slice(2),si="__reactFiber$"+Zo,Li="__reactProps$"+Zo,or="__reactContainer$"+Zo,om="__reactEvents$"+Zo,Zv="__reactListeners$"+Zo,$v="__reactHandles$"+Zo,CI="__reactResources$"+Zo,Fc="__reactMarker$"+Zo;function lm(i){delete i[si],delete i[Li],delete i[om],delete i[Zv],delete i[$v]}function lr(i){var o=i[si];if(o)return o;for(var r=i.parentNode;r;){if(o=r[or]||r[si]){if(r=o.alternate,o.child!==null||r!==null&&r.child!==null)for(i=jp(i);i!==null;){if(r=i[si])return r;i=jp(i)}return o}i=r,r=i.parentNode}return null}function sr(i){if(i=i[si]||i[or]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function jc(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(a(33))}function rr(i){var o=i[CI];return o||(o=i[CI]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Pn(i){i[Fc]=!0}var bI=new Set,OI={};function Jl(i,o){cr(i,o),cr(i+"Capture",o)}function cr(i,o){for(OI[i]=o,i=0;i<o.length;i++)bI.add(o[i])}var Qv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),DI={},yI={};function Jv(i){return pe.call(yI,i)?!0:pe.call(DI,i)?!1:Qv.test(i)?yI[i]=!0:(DI[i]=!0,!1)}function Ud(i,o,r){if(Jv(o))if(r===null)i.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+r)}}function wd(i,o,r){if(r===null)i.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+r)}}function Io(i,o,r,u){if(u===null)i.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttributeNS(o,r,""+u)}}var sm,vI;function ur(i){if(sm===void 0)try{throw Error()}catch(r){var o=r.stack.trim().match(/\n( *(at )?)/);sm=o&&o[1]||"",vI=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sm+i+vI}var rm=!1;function cm(i,o){if(!i||rm)return"";rm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(de){var ce=de}Reflect.construct(i,[],Se)}else{try{Se.call()}catch(de){ce=de}i.call(Se.prototype)}}else{try{throw Error()}catch(de){ce=de}(Se=i())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(de){if(de&&ce&&typeof de.stack=="string")return[de.stack,ce.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=u.DetermineComponentFrameRoot(),b=A[0],M=A[1];if(b&&M){var z=b.split(`
`),ae=M.split(`
`);for(E=u=0;u<z.length&&!z[u].includes("DetermineComponentFrameRoot");)u++;for(;E<ae.length&&!ae[E].includes("DetermineComponentFrameRoot");)E++;if(u===z.length||E===ae.length)for(u=z.length-1,E=ae.length-1;1<=u&&0<=E&&z[u]!==ae[E];)E--;for(;1<=u&&0<=E;u--,E--)if(z[u]!==ae[E]){if(u!==1||E!==1)do if(u--,E--,0>E||z[u]!==ae[E]){var Re=`
`+z[u].replace(" at new "," at ");return i.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",i.displayName)),Re}while(1<=u&&0<=E);break}}}finally{rm=!1,Error.prepareStackTrace=r}return(r=i?i.displayName||i.name:"")?ur(r):""}function eM(i){switch(i.tag){case 26:case 27:case 5:return ur(i.type);case 16:return ur("Lazy");case 13:return ur("Suspense");case 19:return ur("SuspenseList");case 0:case 15:return cm(i.type,!1);case 11:return cm(i.type.render,!1);case 1:return cm(i.type,!0);case 31:return ur("Activity");default:return""}}function MI(i){try{var o="";do o+=eM(i),i=i.return;while(i);return o}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function sa(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function LI(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function tM(i){var o=LI(i)?"checked":"value",r=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),u=""+i[o];if(!i.hasOwnProperty(o)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var E=r.get,A=r.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return E.call(this)},set:function(b){u=""+b,A.call(this,b)}}),Object.defineProperty(i,o,{enumerable:r.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Pd(i){i._valueTracker||(i._valueTracker=tM(i))}function xI(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var r=o.getValue(),u="";return i&&(u=LI(i)?i.checked?"true":"false":i.value),i=u,i!==r?(o.setValue(i),!0):!1}function Gd(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var nM=/[\n"\\]/g;function ra(i){return i.replace(nM,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function um(i,o,r,u,E,A,b,M){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),o!=null?b==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+sa(o)):i.value!==""+sa(o)&&(i.value=""+sa(o)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),o!=null?dm(i,b,sa(o)):r!=null?dm(i,b,sa(r)):u!=null&&i.removeAttribute("value"),E==null&&A!=null&&(i.defaultChecked=!!A),E!=null&&(i.checked=E&&typeof E!="function"&&typeof E!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?i.name=""+sa(M):i.removeAttribute("name")}function HI(i,o,r,u,E,A,b,M){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.type=A),o!=null||r!=null){if(!(A!=="submit"&&A!=="reset"||o!=null))return;r=r!=null?""+sa(r):"",o=o!=null?""+sa(o):r,M||o===i.value||(i.value=o),i.defaultValue=o}u=u??E,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=M?i.checked:!!u,i.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b)}function dm(i,o,r){o==="number"&&Gd(i.ownerDocument)===i||i.defaultValue===""+r||(i.defaultValue=""+r)}function dr(i,o,r,u){if(i=i.options,o){o={};for(var E=0;E<r.length;E++)o["$"+r[E]]=!0;for(r=0;r<i.length;r++)E=o.hasOwnProperty("$"+i[r].value),i[r].selected!==E&&(i[r].selected=E),E&&u&&(i[r].defaultSelected=!0)}else{for(r=""+sa(r),o=null,E=0;E<i.length;E++){if(i[E].value===r){i[E].selected=!0,u&&(i[E].defaultSelected=!0);return}o!==null||i[E].disabled||(o=i[E])}o!==null&&(o.selected=!0)}}function kI(i,o,r){if(o!=null&&(o=""+sa(o),o!==i.value&&(i.value=o),r==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=r!=null?""+sa(r):""}function UI(i,o,r,u){if(o==null){if(u!=null){if(r!=null)throw Error(a(92));if(Q(u)){if(1<u.length)throw Error(a(93));u=u[0]}r=u}r==null&&(r=""),o=r}r=sa(o),i.defaultValue=r,u=i.textContent,u===r&&u!==""&&u!==null&&(i.value=u)}function hr(i,o){if(o){var r=i.firstChild;if(r&&r===i.lastChild&&r.nodeType===3){r.nodeValue=o;return}}i.textContent=o}var iM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wI(i,o,r){var u=o.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":u?i.setProperty(o,r):typeof r!="number"||r===0||iM.has(o)?o==="float"?i.cssFloat=r:i[o]=(""+r).trim():i[o]=r+"px"}function PI(i,o,r){if(o!=null&&typeof o!="object")throw Error(a(62));if(i=i.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var E in o)u=o[E],o.hasOwnProperty(E)&&r[E]!==u&&wI(i,E,u)}else for(var A in o)o.hasOwnProperty(A)&&wI(i,A,o[A])}function hm(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bd(i){return oM.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var fm=null;function Em(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var fr=null,Er=null;function GI(i){var o=sr(i);if(o&&(i=o.stateNode)){var r=i[Li]||null;e:switch(i=o.stateNode,o.type){case"input":if(um(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),o=r.name,r.type==="radio"&&o!=null){for(r=i;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ra(""+o)+'"][type="radio"]'),o=0;o<r.length;o++){var u=r[o];if(u!==i&&u.form===i.form){var E=u[Li]||null;if(!E)throw Error(a(90));um(u,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(o=0;o<r.length;o++)u=r[o],u.form===i.form&&xI(u)}break e;case"textarea":kI(i,r.value,r.defaultValue);break e;case"select":o=r.value,o!=null&&dr(i,!!r.multiple,o,!1)}}}var mm=!1;function BI(i,o,r){if(mm)return i(o,r);mm=!0;try{var u=i(o);return u}finally{if(mm=!1,(fr!==null||Er!==null)&&(Ch(),fr&&(o=fr,i=Er,Er=fr=null,GI(o),i)))for(o=0;o<i.length;o++)GI(i[o])}}function zc(i,o){var r=i.stateNode;if(r===null)return null;var u=r[Li]||null;if(u===null)return null;r=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(r&&typeof r!="function")throw Error(a(231,o,typeof r));return r}var _o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Am=!1;if(_o)try{var Yc={};Object.defineProperty(Yc,"passive",{get:function(){Am=!0}}),window.addEventListener("test",Yc,Yc),window.removeEventListener("test",Yc,Yc)}catch{Am=!1}var $o=null,Rm=null,Fd=null;function FI(){if(Fd)return Fd;var i,o=Rm,r=o.length,u,E="value"in $o?$o.value:$o.textContent,A=E.length;for(i=0;i<r&&o[i]===E[i];i++);var b=r-i;for(u=1;u<=b&&o[r-u]===E[A-u];u++);return Fd=E.slice(i,1<u?1-u:void 0)}function jd(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function zd(){return!0}function jI(){return!1}function xi(i){function o(r,u,E,A,b){this._reactName=r,this._targetInst=E,this.type=u,this.nativeEvent=A,this.target=b,this.currentTarget=null;for(var M in i)i.hasOwnProperty(M)&&(r=i[M],this[M]=r?r(A):A[M]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?zd:jI,this.isPropagationStopped=jI,this}return R(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=zd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=zd)},persist:function(){},isPersistent:zd}),o}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yd=xi(es),Kc=R({},es,{view:0,detail:0}),lM=xi(Kc),Tm,Sm,Vc,Kd=R({},Kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_m,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Vc&&(Vc&&i.type==="mousemove"?(Tm=i.screenX-Vc.screenX,Sm=i.screenY-Vc.screenY):Sm=Tm=0,Vc=i),Tm)},movementY:function(i){return"movementY"in i?i.movementY:Sm}}),zI=xi(Kd),sM=R({},Kd,{dataTransfer:0}),rM=xi(sM),cM=R({},Kc,{relatedTarget:0}),Im=xi(cM),uM=R({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),dM=xi(uM),hM=R({},es,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),fM=xi(hM),EM=R({},es,{data:0}),YI=xi(EM),mM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TM(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=RM[i])?!!o[i]:!1}function _m(){return TM}var SM=R({},Kc,{key:function(i){if(i.key){var o=mM[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=jd(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?AM[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_m,charCode:function(i){return i.type==="keypress"?jd(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?jd(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),IM=xi(SM),_M=R({},Kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KI=xi(_M),gM=R({},Kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_m}),pM=xi(gM),NM=R({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),CM=xi(NM),bM=R({},Kd,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),OM=xi(bM),DM=R({},es,{newState:0,oldState:0}),yM=xi(DM),vM=[9,13,27,32],gm=_o&&"CompositionEvent"in window,Wc=null;_o&&"documentMode"in document&&(Wc=document.documentMode);var MM=_o&&"TextEvent"in window&&!Wc,VI=_o&&(!gm||Wc&&8<Wc&&11>=Wc),WI=" ",XI=!1;function qI(i,o){switch(i){case"keyup":return vM.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZI(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var mr=!1;function LM(i,o){switch(i){case"compositionend":return ZI(o);case"keypress":return o.which!==32?null:(XI=!0,WI);case"textInput":return i=o.data,i===WI&&XI?null:i;default:return null}}function xM(i,o){if(mr)return i==="compositionend"||!gm&&qI(i,o)?(i=FI(),Fd=Rm=$o=null,mr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return VI&&o.locale!=="ko"?null:o.data;default:return null}}var HM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $I(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!HM[i.type]:o==="textarea"}function QI(i,o,r,u){fr?Er?Er.push(u):Er=[u]:fr=u,o=Mh(o,"onChange"),0<o.length&&(r=new Yd("onChange","change",null,r,u),i.push({event:r,listeners:o}))}var Xc=null,qc=null;function kM(i){Lp(i,0)}function Vd(i){var o=jc(i);if(xI(o))return i}function JI(i,o){if(i==="change")return o}var e_=!1;if(_o){var pm;if(_o){var Nm="oninput"in document;if(!Nm){var t_=document.createElement("div");t_.setAttribute("oninput","return;"),Nm=typeof t_.oninput=="function"}pm=Nm}else pm=!1;e_=pm&&(!document.documentMode||9<document.documentMode)}function n_(){Xc&&(Xc.detachEvent("onpropertychange",i_),qc=Xc=null)}function i_(i){if(i.propertyName==="value"&&Vd(qc)){var o=[];QI(o,qc,i,Em(i)),BI(kM,o)}}function UM(i,o,r){i==="focusin"?(n_(),Xc=o,qc=r,Xc.attachEvent("onpropertychange",i_)):i==="focusout"&&n_()}function wM(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Vd(qc)}function PM(i,o){if(i==="click")return Vd(o)}function GM(i,o){if(i==="input"||i==="change")return Vd(o)}function BM(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Vi=typeof Object.is=="function"?Object.is:BM;function Zc(i,o){if(Vi(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var r=Object.keys(i),u=Object.keys(o);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var E=r[u];if(!pe.call(o,E)||!Vi(i[E],o[E]))return!1}return!0}function a_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function o_(i,o){var r=a_(i);i=0;for(var u;r;){if(r.nodeType===3){if(u=i+r.textContent.length,i<=o&&u>=o)return{node:r,offset:o-i};i=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=a_(r)}}function l_(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?l_(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function s_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Gd(i.document);o instanceof i.HTMLIFrameElement;){try{var r=typeof o.contentWindow.location.href=="string"}catch{r=!1}if(r)i=o.contentWindow;else break;o=Gd(i.document)}return o}function Cm(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var FM=_o&&"documentMode"in document&&11>=document.documentMode,Ar=null,bm=null,$c=null,Om=!1;function r_(i,o,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Om||Ar==null||Ar!==Gd(u)||(u=Ar,"selectionStart"in u&&Cm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),$c&&Zc($c,u)||($c=u,u=Mh(bm,"onSelect"),0<u.length&&(o=new Yd("onSelect","select",null,o,r),i.push({event:o,listeners:u}),o.target=Ar)))}function ts(i,o){var r={};return r[i.toLowerCase()]=o.toLowerCase(),r["Webkit"+i]="webkit"+o,r["Moz"+i]="moz"+o,r}var Rr={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionrun:ts("Transition","TransitionRun"),transitionstart:ts("Transition","TransitionStart"),transitioncancel:ts("Transition","TransitionCancel"),transitionend:ts("Transition","TransitionEnd")},Dm={},c_={};_o&&(c_=document.createElement("div").style,"AnimationEvent"in window||(delete Rr.animationend.animation,delete Rr.animationiteration.animation,delete Rr.animationstart.animation),"TransitionEvent"in window||delete Rr.transitionend.transition);function ns(i){if(Dm[i])return Dm[i];if(!Rr[i])return i;var o=Rr[i],r;for(r in o)if(o.hasOwnProperty(r)&&r in c_)return Dm[i]=o[r];return i}var u_=ns("animationend"),d_=ns("animationiteration"),h_=ns("animationstart"),jM=ns("transitionrun"),zM=ns("transitionstart"),YM=ns("transitioncancel"),f_=ns("transitionend"),E_=new Map,ym="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ym.push("scrollEnd");function La(i,o){E_.set(i,o),Jl(o,[i])}var m_=new WeakMap;function ca(i,o){if(typeof i=="object"&&i!==null){var r=m_.get(i);return r!==void 0?r:(o={value:i,source:o,stack:MI(o)},m_.set(i,o),o)}return{value:i,source:o,stack:MI(o)}}var ua=[],Tr=0,vm=0;function Wd(){for(var i=Tr,o=vm=Tr=0;o<i;){var r=ua[o];ua[o++]=null;var u=ua[o];ua[o++]=null;var E=ua[o];ua[o++]=null;var A=ua[o];if(ua[o++]=null,u!==null&&E!==null){var b=u.pending;b===null?E.next=E:(E.next=b.next,b.next=E),u.pending=E}A!==0&&A_(r,E,A)}}function Xd(i,o,r,u){ua[Tr++]=i,ua[Tr++]=o,ua[Tr++]=r,ua[Tr++]=u,vm|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Mm(i,o,r,u){return Xd(i,o,r,u),qd(i)}function Sr(i,o){return Xd(i,null,null,o),qd(i)}function A_(i,o,r){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r);for(var E=!1,A=i.return;A!==null;)A.childLanes|=r,u=A.alternate,u!==null&&(u.childLanes|=r),A.tag===22&&(i=A.stateNode,i===null||i._visibility&1||(E=!0)),i=A,A=A.return;return i.tag===3?(A=i.stateNode,E&&o!==null&&(E=31-Ki(r),i=A.hiddenUpdates,u=i[E],u===null?i[E]=[o]:u.push(o),o.lane=r|536870912),A):null}function qd(i){if(50<gu)throw gu=0,wA=null,Error(a(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Ir={};function KM(i,o,r,u){this.tag=i,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wi(i,o,r,u){return new KM(i,o,r,u)}function Lm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function go(i,o){var r=i.alternate;return r===null?(r=Wi(i.tag,o,i.key,i.mode),r.elementType=i.elementType,r.type=i.type,r.stateNode=i.stateNode,r.alternate=i,i.alternate=r):(r.pendingProps=o,r.type=i.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=i.flags&65011712,r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,o=i.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},r.sibling=i.sibling,r.index=i.index,r.ref=i.ref,r.refCleanup=i.refCleanup,r}function R_(i,o){i.flags&=65011714;var r=i.alternate;return r===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,i.type=r.type,o=r.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Zd(i,o,r,u,E,A){var b=0;if(u=i,typeof i=="function")Lm(i)&&(b=1);else if(typeof i=="string")b=WL(i,r,W.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case ne:return i=Wi(31,r,o,E),i.elementType=ne,i.lanes=A,i;case C:return is(r.children,E,A,o);case _:b=8,E|=24;break;case O:return i=Wi(12,r,o,E|2),i.elementType=O,i.lanes=A,i;case P:return i=Wi(13,r,o,E),i.elementType=P,i.lanes=A,i;case k:return i=Wi(19,r,o,E),i.elementType=k,i.lanes=A,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case y:case L:b=10;break e;case x:b=9;break e;case v:b=11;break e;case w:b=14;break e;case K:b=16,u=null;break e}b=29,r=Error(a(130,i===null?"null":typeof i,"")),u=null}return o=Wi(b,r,o,E),o.elementType=i,o.type=u,o.lanes=A,o}function is(i,o,r,u){return i=Wi(7,i,u,o),i.lanes=r,i}function xm(i,o,r){return i=Wi(6,i,null,o),i.lanes=r,i}function Hm(i,o,r){return o=Wi(4,i.children!==null?i.children:[],i.key,o),o.lanes=r,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var _r=[],gr=0,$d=null,Qd=0,da=[],ha=0,as=null,po=1,No="";function os(i,o){_r[gr++]=Qd,_r[gr++]=$d,$d=i,Qd=o}function T_(i,o,r){da[ha++]=po,da[ha++]=No,da[ha++]=as,as=i;var u=po;i=No;var E=32-Ki(u)-1;u&=~(1<<E),r+=1;var A=32-Ki(o)+E;if(30<A){var b=E-E%5;A=(u&(1<<b)-1).toString(32),u>>=b,E-=b,po=1<<32-Ki(o)+E|r<<E|u,No=A+i}else po=1<<A|r<<E|u,No=i}function km(i){i.return!==null&&(os(i,1),T_(i,1,0))}function Um(i){for(;i===$d;)$d=_r[--gr],_r[gr]=null,Qd=_r[--gr],_r[gr]=null;for(;i===as;)as=da[--ha],da[ha]=null,No=da[--ha],da[ha]=null,po=da[--ha],da[ha]=null}var Ai=null,an=null,_t=!1,ls=null,Za=!1,wm=Error(a(519));function ss(i){var o=Error(a(418,""));throw eu(ca(o,i)),wm}function S_(i){var o=i.stateNode,r=i.type,u=i.memoizedProps;switch(o[si]=i,o[Li]=u,r){case"dialog":ct("cancel",o),ct("close",o);break;case"iframe":case"object":case"embed":ct("load",o);break;case"video":case"audio":for(r=0;r<Nu.length;r++)ct(Nu[r],o);break;case"source":ct("error",o);break;case"img":case"image":case"link":ct("error",o),ct("load",o);break;case"details":ct("toggle",o);break;case"input":ct("invalid",o),HI(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Pd(o);break;case"select":ct("invalid",o);break;case"textarea":ct("invalid",o),UI(o,u.value,u.defaultValue,u.children),Pd(o)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||o.textContent===""+r||u.suppressHydrationWarning===!0||Up(o.textContent,r)?(u.popover!=null&&(ct("beforetoggle",o),ct("toggle",o)),u.onScroll!=null&&ct("scroll",o),u.onScrollEnd!=null&&ct("scrollend",o),u.onClick!=null&&(o.onclick=Lh),o=!0):o=!1,o||ss(i)}function I_(i){for(Ai=i.return;Ai;)switch(Ai.tag){case 5:case 13:Za=!1;return;case 27:case 3:Za=!0;return;default:Ai=Ai.return}}function Qc(i){if(i!==Ai)return!1;if(!_t)return I_(i),_t=!0,!1;var o=i.tag,r;if((r=o!==3&&o!==27)&&((r=o===5)&&(r=i.type,r=!(r!=="form"&&r!=="button")||JA(i.type,i.memoizedProps)),r=!r),r&&an&&ss(i),I_(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(r=i.data,r==="/$"){if(o===0){an=Ha(i.nextSibling);break e}o--}else r!=="$"&&r!=="$!"&&r!=="$?"||o++;i=i.nextSibling}an=null}}else o===27?(o=an,fl(i.type)?(i=iR,iR=null,an=i):an=o):an=Ai?Ha(i.stateNode.nextSibling):null;return!0}function Jc(){an=Ai=null,_t=!1}function __(){var i=ls;return i!==null&&(Ui===null?Ui=i:Ui.push.apply(Ui,i),ls=null),i}function eu(i){ls===null?ls=[i]:ls.push(i)}var Pm=F(null),rs=null,Co=null;function Qo(i,o,r){B(Pm,o._currentValue),o._currentValue=r}function bo(i){i._currentValue=Pm.current,Y(Pm)}function Gm(i,o,r){for(;i!==null;){var u=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),i===r)break;i=i.return}}function Bm(i,o,r,u){var E=i.child;for(E!==null&&(E.return=i);E!==null;){var A=E.dependencies;if(A!==null){var b=E.child;A=A.firstContext;e:for(;A!==null;){var M=A;A=E;for(var z=0;z<o.length;z++)if(M.context===o[z]){A.lanes|=r,M=A.alternate,M!==null&&(M.lanes|=r),Gm(A.return,r,i),u||(b=null);break e}A=M.next}}else if(E.tag===18){if(b=E.return,b===null)throw Error(a(341));b.lanes|=r,A=b.alternate,A!==null&&(A.lanes|=r),Gm(b,r,i),b=null}else b=E.child;if(b!==null)b.return=E;else for(b=E;b!==null;){if(b===i){b=null;break}if(E=b.sibling,E!==null){E.return=b.return,b=E;break}b=b.return}E=b}}function tu(i,o,r,u){i=null;for(var E=o,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var b=E.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var M=E.type;Vi(E.pendingProps.value,b.value)||(i!==null?i.push(M):i=[M])}}else if(E===Ae.current){if(b=E.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(i!==null?i.push(vu):i=[vu])}E=E.return}i!==null&&Bm(o,i,r,u),o.flags|=262144}function Jd(i){for(i=i.firstContext;i!==null;){if(!Vi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function cs(i){rs=i,Co=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ri(i){return g_(rs,i)}function eh(i,o){return rs===null&&cs(i),g_(i,o)}function g_(i,o){var r=o._currentValue;if(o={context:o,memoizedValue:r,next:null},Co===null){if(i===null)throw Error(a(308));Co=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Co=Co.next=o;return r}var VM=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(r,u){i.push(u)}};this.abort=function(){o.aborted=!0,i.forEach(function(r){return r()})}},WM=e.unstable_scheduleCallback,XM=e.unstable_NormalPriority,Mn={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fm(){return{controller:new VM,data:new Map,refCount:0}}function nu(i){i.refCount--,i.refCount===0&&WM(XM,function(){i.controller.abort()})}var iu=null,jm=0,pr=0,Nr=null;function qM(i,o){if(iu===null){var r=iu=[];jm=0,pr=YA(),Nr={status:"pending",value:void 0,then:function(u){r.push(u)}}}return jm++,o.then(p_,p_),o}function p_(){if(--jm===0&&iu!==null){Nr!==null&&(Nr.status="fulfilled");var i=iu;iu=null,pr=0,Nr=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function ZM(i,o){var r=[],u={status:"pending",value:null,reason:null,then:function(E){r.push(E)}};return i.then(function(){u.status="fulfilled",u.value=o;for(var E=0;E<r.length;E++)(0,r[E])(o)},function(E){for(u.status="rejected",u.reason=E,E=0;E<r.length;E++)(0,r[E])(void 0)}),u}var N_=j.S;j.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&qM(i,o),N_!==null&&N_(i,o)};var us=F(null);function zm(){var i=us.current;return i!==null?i:Bt.pooledCache}function th(i,o){o===null?B(us,us.current):B(us,o.pool)}function C_(){var i=zm();return i===null?null:{parent:Mn._currentValue,pool:i}}var au=Error(a(460)),b_=Error(a(474)),nh=Error(a(542)),Ym={then:function(){}};function O_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function ih(){}function D_(i,o,r){switch(r=i[r],r===void 0?i.push(o):r!==o&&(o.then(ih,ih),o=r),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,v_(i),i;default:if(typeof o.status=="string")o.then(ih,ih);else{if(i=Bt,i!==null&&100<i.shellSuspendCounter)throw Error(a(482));i=o,i.status="pending",i.then(function(u){if(o.status==="pending"){var E=o;E.status="fulfilled",E.value=u}},function(u){if(o.status==="pending"){var E=o;E.status="rejected",E.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,v_(i),i}throw ou=o,au}}var ou=null;function y_(){if(ou===null)throw Error(a(459));var i=ou;return ou=null,i}function v_(i){if(i===au||i===nh)throw Error(a(483))}var Jo=!1;function Km(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vm(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function el(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function tl(i,o,r){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Nt&2)!==0){var E=u.pending;return E===null?o.next=o:(o.next=E.next,E.next=o),u.pending=o,o=qd(i),A_(i,null,r),o}return Xd(i,u,o,r),qd(i)}function lu(i,o,r){if(o=o.updateQueue,o!==null&&(o=o.shared,(r&4194048)!==0)){var u=o.lanes;u&=i.pendingLanes,r|=u,o.lanes=r,pI(i,r)}}function Wm(i,o){var r=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var E=null,A=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};A===null?E=A=b:A=A.next=b,r=r.next}while(r!==null);A===null?E=A=o:A=A.next=o}else E=A=o;r={baseState:u.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:u.shared,callbacks:u.callbacks},i.updateQueue=r;return}i=r.lastBaseUpdate,i===null?r.firstBaseUpdate=o:i.next=o,r.lastBaseUpdate=o}var Xm=!1;function su(){if(Xm){var i=Nr;if(i!==null)throw i}}function ru(i,o,r,u){Xm=!1;var E=i.updateQueue;Jo=!1;var A=E.firstBaseUpdate,b=E.lastBaseUpdate,M=E.shared.pending;if(M!==null){E.shared.pending=null;var z=M,ae=z.next;z.next=null,b===null?A=ae:b.next=ae,b=z;var Re=i.alternate;Re!==null&&(Re=Re.updateQueue,M=Re.lastBaseUpdate,M!==b&&(M===null?Re.firstBaseUpdate=ae:M.next=ae,Re.lastBaseUpdate=z))}if(A!==null){var Se=E.baseState;b=0,Re=ae=z=null,M=A;do{var ce=M.lane&-536870913,de=ce!==M.lane;if(de?(Et&ce)===ce:(u&ce)===ce){ce!==0&&ce===pr&&(Xm=!0),Re!==null&&(Re=Re.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Ke=i,je=M;ce=o;var Mt=r;switch(je.tag){case 1:if(Ke=je.payload,typeof Ke=="function"){Se=Ke.call(Mt,Se,ce);break e}Se=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=je.payload,ce=typeof Ke=="function"?Ke.call(Mt,Se,ce):Ke,ce==null)break e;Se=R({},Se,ce);break e;case 2:Jo=!0}}ce=M.callback,ce!==null&&(i.flags|=64,de&&(i.flags|=8192),de=E.callbacks,de===null?E.callbacks=[ce]:de.push(ce))}else de={lane:ce,tag:M.tag,payload:M.payload,callback:M.callback,next:null},Re===null?(ae=Re=de,z=Se):Re=Re.next=de,b|=ce;if(M=M.next,M===null){if(M=E.shared.pending,M===null)break;de=M,M=de.next,de.next=null,E.lastBaseUpdate=de,E.shared.pending=null}}while(!0);Re===null&&(z=Se),E.baseState=z,E.firstBaseUpdate=ae,E.lastBaseUpdate=Re,A===null&&(E.shared.lanes=0),cl|=b,i.lanes=b,i.memoizedState=Se}}function M_(i,o){if(typeof i!="function")throw Error(a(191,i));i.call(o)}function L_(i,o){var r=i.callbacks;if(r!==null)for(i.callbacks=null,i=0;i<r.length;i++)M_(r[i],o)}var Cr=F(null),ah=F(0);function x_(i,o){i=xo,B(ah,i),B(Cr,o),xo=i|o.baseLanes}function qm(){B(ah,xo),B(Cr,Cr.current)}function Zm(){xo=ah.current,Y(Cr),Y(ah)}var nl=0,nt=null,yt=null,Nn=null,oh=!1,br=!1,ds=!1,lh=0,cu=0,Or=null,$M=0;function Tn(){throw Error(a(321))}function $m(i,o){if(o===null)return!1;for(var r=0;r<o.length&&r<i.length;r++)if(!Vi(i[r],o[r]))return!1;return!0}function Qm(i,o,r,u,E,A){return nl=A,nt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,j.H=i===null||i.memoizedState===null?Ag:Rg,ds=!1,A=r(u,E),ds=!1,br&&(A=k_(o,r,u,E)),H_(i),A}function H_(i){j.H=hh;var o=yt!==null&&yt.next!==null;if(nl=0,Nn=yt=nt=null,oh=!1,cu=0,Or=null,o)throw Error(a(300));i===null||Gn||(i=i.dependencies,i!==null&&Jd(i)&&(Gn=!0))}function k_(i,o,r,u){nt=i;var E=0;do{if(br&&(Or=null),cu=0,br=!1,25<=E)throw Error(a(301));if(E+=1,Nn=yt=null,i.updateQueue!=null){var A=i.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}j.H=aL,A=o(r,u)}while(br);return A}function QM(){var i=j.H,o=i.useState()[0];return o=typeof o.then=="function"?uu(o):o,i=i.useState()[0],(yt!==null?yt.memoizedState:null)!==i&&(nt.flags|=1024),o}function Jm(){var i=lh!==0;return lh=0,i}function eA(i,o,r){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~r}function tA(i){if(oh){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}oh=!1}nl=0,Nn=yt=nt=null,br=!1,cu=lh=0,Or=null}function Hi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?nt.memoizedState=Nn=i:Nn=Nn.next=i,Nn}function Cn(){if(yt===null){var i=nt.alternate;i=i!==null?i.memoizedState:null}else i=yt.next;var o=Nn===null?nt.memoizedState:Nn.next;if(o!==null)Nn=o,yt=i;else{if(i===null)throw nt.alternate===null?Error(a(467)):Error(a(310));yt=i,i={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Nn===null?nt.memoizedState=Nn=i:Nn=Nn.next=i}return Nn}function nA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uu(i){var o=cu;return cu+=1,Or===null&&(Or=[]),i=D_(Or,i,o),o=nt,(Nn===null?o.memoizedState:Nn.next)===null&&(o=o.alternate,j.H=o===null||o.memoizedState===null?Ag:Rg),i}function sh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return uu(i);if(i.$$typeof===L)return ri(i)}throw Error(a(438,String(i)))}function iA(i){var o=null,r=nt.updateQueue;if(r!==null&&(o=r.memoCache),o==null){var u=nt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(E){return E.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),r===null&&(r=nA(),nt.updateQueue=r),r.memoCache=o,r=o.data[o.index],r===void 0)for(r=o.data[o.index]=Array(i),u=0;u<i;u++)r[u]=fe;return o.index++,r}function Oo(i,o){return typeof o=="function"?o(i):o}function rh(i){var o=Cn();return aA(o,yt,i)}function aA(i,o,r){var u=i.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=r;var E=i.baseQueue,A=u.pending;if(A!==null){if(E!==null){var b=E.next;E.next=A.next,A.next=b}o.baseQueue=E=A,u.pending=null}if(A=i.baseState,E===null)i.memoizedState=A;else{o=E.next;var M=b=null,z=null,ae=o,Re=!1;do{var Se=ae.lane&-536870913;if(Se!==ae.lane?(Et&Se)===Se:(nl&Se)===Se){var ce=ae.revertLane;if(ce===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),Se===pr&&(Re=!0);else if((nl&ce)===ce){ae=ae.next,ce===pr&&(Re=!0);continue}else Se={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},z===null?(M=z=Se,b=A):z=z.next=Se,nt.lanes|=ce,cl|=ce;Se=ae.action,ds&&r(A,Se),A=ae.hasEagerState?ae.eagerState:r(A,Se)}else ce={lane:Se,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},z===null?(M=z=ce,b=A):z=z.next=ce,nt.lanes|=Se,cl|=Se;ae=ae.next}while(ae!==null&&ae!==o);if(z===null?b=A:z.next=M,!Vi(A,i.memoizedState)&&(Gn=!0,Re&&(r=Nr,r!==null)))throw r;i.memoizedState=A,i.baseState=b,i.baseQueue=z,u.lastRenderedState=A}return E===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function oA(i){var o=Cn(),r=o.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=i;var u=r.dispatch,E=r.pending,A=o.memoizedState;if(E!==null){r.pending=null;var b=E=E.next;do A=i(A,b.action),b=b.next;while(b!==E);Vi(A,o.memoizedState)||(Gn=!0),o.memoizedState=A,o.baseQueue===null&&(o.baseState=A),r.lastRenderedState=A}return[A,u]}function U_(i,o,r){var u=nt,E=Cn(),A=_t;if(A){if(r===void 0)throw Error(a(407));r=r()}else r=o();var b=!Vi((yt||E).memoizedState,r);b&&(E.memoizedState=r,Gn=!0),E=E.queue;var M=G_.bind(null,u,E,i);if(du(2048,8,M,[i]),E.getSnapshot!==o||b||Nn!==null&&Nn.memoizedState.tag&1){if(u.flags|=2048,Dr(9,ch(),P_.bind(null,u,E,r,o),null),Bt===null)throw Error(a(349));A||(nl&124)!==0||w_(u,o,r)}return r}function w_(i,o,r){i.flags|=16384,i={getSnapshot:o,value:r},o=nt.updateQueue,o===null?(o=nA(),nt.updateQueue=o,o.stores=[i]):(r=o.stores,r===null?o.stores=[i]:r.push(i))}function P_(i,o,r,u){o.value=r,o.getSnapshot=u,B_(o)&&F_(i)}function G_(i,o,r){return r(function(){B_(o)&&F_(i)})}function B_(i){var o=i.getSnapshot;i=i.value;try{var r=o();return!Vi(i,r)}catch{return!0}}function F_(i){var o=Sr(i,2);o!==null&&Qi(o,i,2)}function lA(i){var o=Hi();if(typeof i=="function"){var r=i;if(i=r(),ds){qo(!0);try{r()}finally{qo(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:i},o}function j_(i,o,r,u){return i.baseState=r,aA(i,yt,typeof u=="function"?u:Oo)}function JM(i,o,r,u,E){if(dh(i))throw Error(a(485));if(i=o.action,i!==null){var A={payload:E,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){A.listeners.push(b)}};j.T!==null?r(!0):A.isTransition=!1,u(A),r=o.pending,r===null?(A.next=o.pending=A,z_(o,A)):(A.next=r.next,o.pending=r.next=A)}}function z_(i,o){var r=o.action,u=o.payload,E=i.state;if(o.isTransition){var A=j.T,b={};j.T=b;try{var M=r(E,u),z=j.S;z!==null&&z(b,M),Y_(i,o,M)}catch(ae){sA(i,o,ae)}finally{j.T=A}}else try{A=r(E,u),Y_(i,o,A)}catch(ae){sA(i,o,ae)}}function Y_(i,o,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){K_(i,o,u)},function(u){return sA(i,o,u)}):K_(i,o,r)}function K_(i,o,r){o.status="fulfilled",o.value=r,V_(o),i.state=r,o=i.pending,o!==null&&(r=o.next,r===o?i.pending=null:(r=r.next,o.next=r,z_(i,r)))}function sA(i,o,r){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=r,V_(o),o=o.next;while(o!==u)}i.action=null}function V_(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function W_(i,o){return o}function X_(i,o){if(_t){var r=Bt.formState;if(r!==null){e:{var u=nt;if(_t){if(an){t:{for(var E=an,A=Za;E.nodeType!==8;){if(!A){E=null;break t}if(E=Ha(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){an=Ha(E.nextSibling),u=E.data==="F!";break e}}ss(u)}u=!1}u&&(o=r[0])}}return r=Hi(),r.memoizedState=r.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:W_,lastRenderedState:o},r.queue=u,r=fg.bind(null,nt,u),u.dispatch=r,u=lA(!1),A=hA.bind(null,nt,!1,u.queue),u=Hi(),E={state:o,dispatch:null,action:i,pending:null},u.queue=E,r=JM.bind(null,nt,E,A,r),E.dispatch=r,u.memoizedState=i,[o,r,!1]}function q_(i){var o=Cn();return Z_(o,yt,i)}function Z_(i,o,r){if(o=aA(i,o,W_)[0],i=rh(Oo)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=uu(o)}catch(b){throw b===au?nh:b}else u=o;o=Cn();var E=o.queue,A=E.dispatch;return r!==o.memoizedState&&(nt.flags|=2048,Dr(9,ch(),eL.bind(null,E,r),null)),[u,A,i]}function eL(i,o){i.action=o}function $_(i){var o=Cn(),r=yt;if(r!==null)return Z_(o,r,i);Cn(),o=o.memoizedState,r=Cn();var u=r.queue.dispatch;return r.memoizedState=i,[o,u,!1]}function Dr(i,o,r,u){return i={tag:i,create:r,deps:u,inst:o,next:null},o=nt.updateQueue,o===null&&(o=nA(),nt.updateQueue=o),r=o.lastEffect,r===null?o.lastEffect=i.next=i:(u=r.next,r.next=i,i.next=u,o.lastEffect=i),i}function ch(){return{destroy:void 0,resource:void 0}}function Q_(){return Cn().memoizedState}function uh(i,o,r,u){var E=Hi();u=u===void 0?null:u,nt.flags|=i,E.memoizedState=Dr(1|o,ch(),r,u)}function du(i,o,r,u){var E=Cn();u=u===void 0?null:u;var A=E.memoizedState.inst;yt!==null&&u!==null&&$m(u,yt.memoizedState.deps)?E.memoizedState=Dr(o,A,r,u):(nt.flags|=i,E.memoizedState=Dr(1|o,A,r,u))}function J_(i,o){uh(8390656,8,i,o)}function eg(i,o){du(2048,8,i,o)}function tg(i,o){return du(4,2,i,o)}function ng(i,o){return du(4,4,i,o)}function ig(i,o){if(typeof o=="function"){i=i();var r=o(i);return function(){typeof r=="function"?r():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function ag(i,o,r){r=r!=null?r.concat([i]):null,du(4,4,ig.bind(null,o,i),r)}function rA(){}function og(i,o){var r=Cn();o=o===void 0?null:o;var u=r.memoizedState;return o!==null&&$m(o,u[1])?u[0]:(r.memoizedState=[i,o],i)}function lg(i,o){var r=Cn();o=o===void 0?null:o;var u=r.memoizedState;if(o!==null&&$m(o,u[1]))return u[0];if(u=i(),ds){qo(!0);try{i()}finally{qo(!1)}}return r.memoizedState=[u,o],u}function cA(i,o,r){return r===void 0||(nl&1073741824)!==0?i.memoizedState=o:(i.memoizedState=r,i=cp(),nt.lanes|=i,cl|=i,r)}function sg(i,o,r,u){return Vi(r,o)?r:Cr.current!==null?(i=cA(i,r,u),Vi(i,o)||(Gn=!0),i):(nl&42)===0?(Gn=!0,i.memoizedState=r):(i=cp(),nt.lanes|=i,cl|=i,o)}function rg(i,o,r,u,E){var A=G.p;G.p=A!==0&&8>A?A:8;var b=j.T,M={};j.T=M,hA(i,!1,o,r);try{var z=E(),ae=j.S;if(ae!==null&&ae(M,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var Re=ZM(z,u);hu(i,o,Re,$i(i))}else hu(i,o,u,$i(i))}catch(Se){hu(i,o,{then:function(){},status:"rejected",reason:Se},$i())}finally{G.p=A,j.T=b}}function tL(){}function uA(i,o,r,u){if(i.tag!==5)throw Error(a(476));var E=cg(i).queue;rg(i,E,o,Z,r===null?tL:function(){return ug(i),r(u)})}function cg(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:Z},next:null};var r={};return o.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:r},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function ug(i){var o=cg(i).next.queue;hu(i,o,{},$i())}function dA(){return ri(vu)}function dg(){return Cn().memoizedState}function hg(){return Cn().memoizedState}function nL(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var r=$i();i=el(r);var u=tl(o,i,r);u!==null&&(Qi(u,o,r),lu(u,o,r)),o={cache:Fm()},i.payload=o;return}o=o.return}}function iL(i,o,r){var u=$i();r={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},dh(i)?Eg(o,r):(r=Mm(i,o,r,u),r!==null&&(Qi(r,i,u),mg(r,o,u)))}function fg(i,o,r){var u=$i();hu(i,o,r,u)}function hu(i,o,r,u){var E={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(dh(i))Eg(o,E);else{var A=i.alternate;if(i.lanes===0&&(A===null||A.lanes===0)&&(A=o.lastRenderedReducer,A!==null))try{var b=o.lastRenderedState,M=A(b,r);if(E.hasEagerState=!0,E.eagerState=M,Vi(M,b))return Xd(i,o,E,0),Bt===null&&Wd(),!1}catch{}finally{}if(r=Mm(i,o,E,u),r!==null)return Qi(r,i,u),mg(r,o,u),!0}return!1}function hA(i,o,r,u){if(u={lane:2,revertLane:YA(),action:u,hasEagerState:!1,eagerState:null,next:null},dh(i)){if(o)throw Error(a(479))}else o=Mm(i,r,u,2),o!==null&&Qi(o,i,2)}function dh(i){var o=i.alternate;return i===nt||o!==null&&o===nt}function Eg(i,o){br=oh=!0;var r=i.pending;r===null?o.next=o:(o.next=r.next,r.next=o),i.pending=o}function mg(i,o,r){if((r&4194048)!==0){var u=o.lanes;u&=i.pendingLanes,r|=u,o.lanes=r,pI(i,r)}}var hh={readContext:ri,use:sh,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useLayoutEffect:Tn,useInsertionEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useSyncExternalStore:Tn,useId:Tn,useHostTransitionStatus:Tn,useFormState:Tn,useActionState:Tn,useOptimistic:Tn,useMemoCache:Tn,useCacheRefresh:Tn},Ag={readContext:ri,use:sh,useCallback:function(i,o){return Hi().memoizedState=[i,o===void 0?null:o],i},useContext:ri,useEffect:J_,useImperativeHandle:function(i,o,r){r=r!=null?r.concat([i]):null,uh(4194308,4,ig.bind(null,o,i),r)},useLayoutEffect:function(i,o){return uh(4194308,4,i,o)},useInsertionEffect:function(i,o){uh(4,2,i,o)},useMemo:function(i,o){var r=Hi();o=o===void 0?null:o;var u=i();if(ds){qo(!0);try{i()}finally{qo(!1)}}return r.memoizedState=[u,o],u},useReducer:function(i,o,r){var u=Hi();if(r!==void 0){var E=r(o);if(ds){qo(!0);try{r(o)}finally{qo(!1)}}}else E=o;return u.memoizedState=u.baseState=E,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:E},u.queue=i,i=i.dispatch=iL.bind(null,nt,i),[u.memoizedState,i]},useRef:function(i){var o=Hi();return i={current:i},o.memoizedState=i},useState:function(i){i=lA(i);var o=i.queue,r=fg.bind(null,nt,o);return o.dispatch=r,[i.memoizedState,r]},useDebugValue:rA,useDeferredValue:function(i,o){var r=Hi();return cA(r,i,o)},useTransition:function(){var i=lA(!1);return i=rg.bind(null,nt,i.queue,!0,!1),Hi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,r){var u=nt,E=Hi();if(_t){if(r===void 0)throw Error(a(407));r=r()}else{if(r=o(),Bt===null)throw Error(a(349));(Et&124)!==0||w_(u,o,r)}E.memoizedState=r;var A={value:r,getSnapshot:o};return E.queue=A,J_(G_.bind(null,u,A,i),[i]),u.flags|=2048,Dr(9,ch(),P_.bind(null,u,A,r,o),null),r},useId:function(){var i=Hi(),o=Bt.identifierPrefix;if(_t){var r=No,u=po;r=(u&~(1<<32-Ki(u)-1)).toString(32)+r,o=""+o+"R"+r,r=lh++,0<r&&(o+="H"+r.toString(32)),o+=""}else r=$M++,o=""+o+"r"+r.toString(32)+"";return i.memoizedState=o},useHostTransitionStatus:dA,useFormState:X_,useActionState:X_,useOptimistic:function(i){var o=Hi();o.memoizedState=o.baseState=i;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=r,o=hA.bind(null,nt,!0,r),r.dispatch=o,[i,o]},useMemoCache:iA,useCacheRefresh:function(){return Hi().memoizedState=nL.bind(null,nt)}},Rg={readContext:ri,use:sh,useCallback:og,useContext:ri,useEffect:eg,useImperativeHandle:ag,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:lg,useReducer:rh,useRef:Q_,useState:function(){return rh(Oo)},useDebugValue:rA,useDeferredValue:function(i,o){var r=Cn();return sg(r,yt.memoizedState,i,o)},useTransition:function(){var i=rh(Oo)[0],o=Cn().memoizedState;return[typeof i=="boolean"?i:uu(i),o]},useSyncExternalStore:U_,useId:dg,useHostTransitionStatus:dA,useFormState:q_,useActionState:q_,useOptimistic:function(i,o){var r=Cn();return j_(r,yt,i,o)},useMemoCache:iA,useCacheRefresh:hg},aL={readContext:ri,use:sh,useCallback:og,useContext:ri,useEffect:eg,useImperativeHandle:ag,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:lg,useReducer:oA,useRef:Q_,useState:function(){return oA(Oo)},useDebugValue:rA,useDeferredValue:function(i,o){var r=Cn();return yt===null?cA(r,i,o):sg(r,yt.memoizedState,i,o)},useTransition:function(){var i=oA(Oo)[0],o=Cn().memoizedState;return[typeof i=="boolean"?i:uu(i),o]},useSyncExternalStore:U_,useId:dg,useHostTransitionStatus:dA,useFormState:$_,useActionState:$_,useOptimistic:function(i,o){var r=Cn();return yt!==null?j_(r,yt,i,o):(r.baseState=i,[i,r.queue.dispatch])},useMemoCache:iA,useCacheRefresh:hg},yr=null,fu=0;function fh(i){var o=fu;return fu+=1,yr===null&&(yr=[]),D_(yr,i,o)}function Eu(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Eh(i,o){throw o.$$typeof===T?Error(a(525)):(i=Object.prototype.toString.call(o),Error(a(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Tg(i){var o=i._init;return o(i._payload)}function Sg(i){function o($,V){if(i){var ee=$.deletions;ee===null?($.deletions=[V],$.flags|=16):ee.push(V)}}function r($,V){if(!i)return null;for(;V!==null;)o($,V),V=V.sibling;return null}function u($){for(var V=new Map;$!==null;)$.key!==null?V.set($.key,$):V.set($.index,$),$=$.sibling;return V}function E($,V){return $=go($,V),$.index=0,$.sibling=null,$}function A($,V,ee){return $.index=ee,i?(ee=$.alternate,ee!==null?(ee=ee.index,ee<V?($.flags|=67108866,V):ee):($.flags|=67108866,V)):($.flags|=1048576,V)}function b($){return i&&$.alternate===null&&($.flags|=67108866),$}function M($,V,ee,Te){return V===null||V.tag!==6?(V=xm(ee,$.mode,Te),V.return=$,V):(V=E(V,ee),V.return=$,V)}function z($,V,ee,Te){var Le=ee.type;return Le===C?Re($,V,ee.props.children,Te,ee.key):V!==null&&(V.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===K&&Tg(Le)===V.type)?(V=E(V,ee.props),Eu(V,ee),V.return=$,V):(V=Zd(ee.type,ee.key,ee.props,null,$.mode,Te),Eu(V,ee),V.return=$,V)}function ae($,V,ee,Te){return V===null||V.tag!==4||V.stateNode.containerInfo!==ee.containerInfo||V.stateNode.implementation!==ee.implementation?(V=Hm(ee,$.mode,Te),V.return=$,V):(V=E(V,ee.children||[]),V.return=$,V)}function Re($,V,ee,Te,Le){return V===null||V.tag!==7?(V=is(ee,$.mode,Te,Le),V.return=$,V):(V=E(V,ee),V.return=$,V)}function Se($,V,ee){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=xm(""+V,$.mode,ee),V.return=$,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return ee=Zd(V.type,V.key,V.props,null,$.mode,ee),Eu(ee,V),ee.return=$,ee;case I:return V=Hm(V,$.mode,ee),V.return=$,V;case K:var Te=V._init;return V=Te(V._payload),Se($,V,ee)}if(Q(V)||he(V))return V=is(V,$.mode,ee,null),V.return=$,V;if(typeof V.then=="function")return Se($,fh(V),ee);if(V.$$typeof===L)return Se($,eh($,V),ee);Eh($,V)}return null}function ce($,V,ee,Te){var Le=V!==null?V.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Le!==null?null:M($,V,""+ee,Te);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case S:return ee.key===Le?z($,V,ee,Te):null;case I:return ee.key===Le?ae($,V,ee,Te):null;case K:return Le=ee._init,ee=Le(ee._payload),ce($,V,ee,Te)}if(Q(ee)||he(ee))return Le!==null?null:Re($,V,ee,Te,null);if(typeof ee.then=="function")return ce($,V,fh(ee),Te);if(ee.$$typeof===L)return ce($,V,eh($,ee),Te);Eh($,ee)}return null}function de($,V,ee,Te,Le){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return $=$.get(ee)||null,M(V,$,""+Te,Le);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case S:return $=$.get(Te.key===null?ee:Te.key)||null,z(V,$,Te,Le);case I:return $=$.get(Te.key===null?ee:Te.key)||null,ae(V,$,Te,Le);case K:var at=Te._init;return Te=at(Te._payload),de($,V,ee,Te,Le)}if(Q(Te)||he(Te))return $=$.get(ee)||null,Re(V,$,Te,Le,null);if(typeof Te.then=="function")return de($,V,ee,fh(Te),Le);if(Te.$$typeof===L)return de($,V,ee,eh(V,Te),Le);Eh(V,Te)}return null}function Ke($,V,ee,Te){for(var Le=null,at=null,Pe=V,ze=V=0,Fn=null;Pe!==null&&ze<ee.length;ze++){Pe.index>ze?(Fn=Pe,Pe=null):Fn=Pe.sibling;var St=ce($,Pe,ee[ze],Te);if(St===null){Pe===null&&(Pe=Fn);break}i&&Pe&&St.alternate===null&&o($,Pe),V=A(St,V,ze),at===null?Le=St:at.sibling=St,at=St,Pe=Fn}if(ze===ee.length)return r($,Pe),_t&&os($,ze),Le;if(Pe===null){for(;ze<ee.length;ze++)Pe=Se($,ee[ze],Te),Pe!==null&&(V=A(Pe,V,ze),at===null?Le=Pe:at.sibling=Pe,at=Pe);return _t&&os($,ze),Le}for(Pe=u(Pe);ze<ee.length;ze++)Fn=de(Pe,$,ze,ee[ze],Te),Fn!==null&&(i&&Fn.alternate!==null&&Pe.delete(Fn.key===null?ze:Fn.key),V=A(Fn,V,ze),at===null?Le=Fn:at.sibling=Fn,at=Fn);return i&&Pe.forEach(function(Tl){return o($,Tl)}),_t&&os($,ze),Le}function je($,V,ee,Te){if(ee==null)throw Error(a(151));for(var Le=null,at=null,Pe=V,ze=V=0,Fn=null,St=ee.next();Pe!==null&&!St.done;ze++,St=ee.next()){Pe.index>ze?(Fn=Pe,Pe=null):Fn=Pe.sibling;var Tl=ce($,Pe,St.value,Te);if(Tl===null){Pe===null&&(Pe=Fn);break}i&&Pe&&Tl.alternate===null&&o($,Pe),V=A(Tl,V,ze),at===null?Le=Tl:at.sibling=Tl,at=Tl,Pe=Fn}if(St.done)return r($,Pe),_t&&os($,ze),Le;if(Pe===null){for(;!St.done;ze++,St=ee.next())St=Se($,St.value,Te),St!==null&&(V=A(St,V,ze),at===null?Le=St:at.sibling=St,at=St);return _t&&os($,ze),Le}for(Pe=u(Pe);!St.done;ze++,St=ee.next())St=de(Pe,$,ze,St.value,Te),St!==null&&(i&&St.alternate!==null&&Pe.delete(St.key===null?ze:St.key),V=A(St,V,ze),at===null?Le=St:at.sibling=St,at=St);return i&&Pe.forEach(function(o1){return o($,o1)}),_t&&os($,ze),Le}function Mt($,V,ee,Te){if(typeof ee=="object"&&ee!==null&&ee.type===C&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case S:e:{for(var Le=ee.key;V!==null;){if(V.key===Le){if(Le=ee.type,Le===C){if(V.tag===7){r($,V.sibling),Te=E(V,ee.props.children),Te.return=$,$=Te;break e}}else if(V.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===K&&Tg(Le)===V.type){r($,V.sibling),Te=E(V,ee.props),Eu(Te,ee),Te.return=$,$=Te;break e}r($,V);break}else o($,V);V=V.sibling}ee.type===C?(Te=is(ee.props.children,$.mode,Te,ee.key),Te.return=$,$=Te):(Te=Zd(ee.type,ee.key,ee.props,null,$.mode,Te),Eu(Te,ee),Te.return=$,$=Te)}return b($);case I:e:{for(Le=ee.key;V!==null;){if(V.key===Le)if(V.tag===4&&V.stateNode.containerInfo===ee.containerInfo&&V.stateNode.implementation===ee.implementation){r($,V.sibling),Te=E(V,ee.children||[]),Te.return=$,$=Te;break e}else{r($,V);break}else o($,V);V=V.sibling}Te=Hm(ee,$.mode,Te),Te.return=$,$=Te}return b($);case K:return Le=ee._init,ee=Le(ee._payload),Mt($,V,ee,Te)}if(Q(ee))return Ke($,V,ee,Te);if(he(ee)){if(Le=he(ee),typeof Le!="function")throw Error(a(150));return ee=Le.call(ee),je($,V,ee,Te)}if(typeof ee.then=="function")return Mt($,V,fh(ee),Te);if(ee.$$typeof===L)return Mt($,V,eh($,ee),Te);Eh($,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,V!==null&&V.tag===6?(r($,V.sibling),Te=E(V,ee),Te.return=$,$=Te):(r($,V),Te=xm(ee,$.mode,Te),Te.return=$,$=Te),b($)):r($,V)}return function($,V,ee,Te){try{fu=0;var Le=Mt($,V,ee,Te);return yr=null,Le}catch(Pe){if(Pe===au||Pe===nh)throw Pe;var at=Wi(29,Pe,null,$.mode);return at.lanes=Te,at.return=$,at}finally{}}}var vr=Sg(!0),Ig=Sg(!1),fa=F(null),$a=null;function il(i){var o=i.alternate;B(Ln,Ln.current&1),B(fa,i),$a===null&&(o===null||Cr.current!==null||o.memoizedState!==null)&&($a=i)}function _g(i){if(i.tag===22){if(B(Ln,Ln.current),B(fa,i),$a===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&($a=i)}}else al()}function al(){B(Ln,Ln.current),B(fa,fa.current)}function Do(i){Y(fa),$a===i&&($a=null),Y(Ln)}var Ln=F(0);function mh(i){for(var o=i;o!==null;){if(o.tag===13){var r=o.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||nR(r)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function fA(i,o,r,u){o=i.memoizedState,r=r(u,o),r=r==null?o:R({},o,r),i.memoizedState=r,i.lanes===0&&(i.updateQueue.baseState=r)}var EA={enqueueSetState:function(i,o,r){i=i._reactInternals;var u=$i(),E=el(u);E.payload=o,r!=null&&(E.callback=r),o=tl(i,E,u),o!==null&&(Qi(o,i,u),lu(o,i,u))},enqueueReplaceState:function(i,o,r){i=i._reactInternals;var u=$i(),E=el(u);E.tag=1,E.payload=o,r!=null&&(E.callback=r),o=tl(i,E,u),o!==null&&(Qi(o,i,u),lu(o,i,u))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var r=$i(),u=el(r);u.tag=2,o!=null&&(u.callback=o),o=tl(i,u,r),o!==null&&(Qi(o,i,r),lu(o,i,r))}};function gg(i,o,r,u,E,A,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,A,b):o.prototype&&o.prototype.isPureReactComponent?!Zc(r,u)||!Zc(E,A):!0}function pg(i,o,r,u){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(r,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(r,u),o.state!==i&&EA.enqueueReplaceState(o,o.state,null)}function hs(i,o){var r=o;if("ref"in o){r={};for(var u in o)u!=="ref"&&(r[u]=o[u])}if(i=i.defaultProps){r===o&&(r=R({},r));for(var E in i)r[E]===void 0&&(r[E]=i[E])}return r}var Ah=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Ng(i){Ah(i)}function Cg(i){console.error(i)}function bg(i){Ah(i)}function Rh(i,o){try{var r=i.onUncaughtError;r(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function Og(i,o,r){try{var u=i.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function mA(i,o,r){return r=el(r),r.tag=3,r.payload={element:null},r.callback=function(){Rh(i,o)},r}function Dg(i){return i=el(i),i.tag=3,i}function yg(i,o,r,u){var E=r.type.getDerivedStateFromError;if(typeof E=="function"){var A=u.value;i.payload=function(){return E(A)},i.callback=function(){Og(o,r,u)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){Og(o,r,u),typeof E!="function"&&(ul===null?ul=new Set([this]):ul.add(this));var M=u.stack;this.componentDidCatch(u.value,{componentStack:M!==null?M:""})})}function oL(i,o,r,u,E){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=r.alternate,o!==null&&tu(o,r,E,!0),r=fa.current,r!==null){switch(r.tag){case 13:return $a===null?GA():r.alternate===null&&on===0&&(on=3),r.flags&=-257,r.flags|=65536,r.lanes=E,u===Ym?r.flags|=16384:(o=r.updateQueue,o===null?r.updateQueue=new Set([u]):o.add(u),FA(i,u,E)),!1;case 22:return r.flags|=65536,u===Ym?r.flags|=16384:(o=r.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=o):(r=o.retryQueue,r===null?o.retryQueue=new Set([u]):r.add(u)),FA(i,u,E)),!1}throw Error(a(435,r.tag))}return FA(i,u,E),GA(),!1}if(_t)return o=fa.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=E,u!==wm&&(i=Error(a(422),{cause:u}),eu(ca(i,r)))):(u!==wm&&(o=Error(a(423),{cause:u}),eu(ca(o,r))),i=i.current.alternate,i.flags|=65536,E&=-E,i.lanes|=E,u=ca(u,r),E=mA(i.stateNode,u,E),Wm(i,E),on!==4&&(on=2)),!1;var A=Error(a(520),{cause:u});if(A=ca(A,r),_u===null?_u=[A]:_u.push(A),on!==4&&(on=2),o===null)return!0;u=ca(u,r),r=o;do{switch(r.tag){case 3:return r.flags|=65536,i=E&-E,r.lanes|=i,i=mA(r.stateNode,u,i),Wm(r,i),!1;case 1:if(o=r.type,A=r.stateNode,(r.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(ul===null||!ul.has(A))))return r.flags|=65536,E&=-E,r.lanes|=E,E=Dg(E),yg(E,i,r,u),Wm(r,E),!1}r=r.return}while(r!==null);return!1}var vg=Error(a(461)),Gn=!1;function Xn(i,o,r,u){o.child=i===null?Ig(o,null,r,u):vr(o,i.child,r,u)}function Mg(i,o,r,u,E){r=r.render;var A=o.ref;if("ref"in u){var b={};for(var M in u)M!=="ref"&&(b[M]=u[M])}else b=u;return cs(o),u=Qm(i,o,r,b,A,E),M=Jm(),i!==null&&!Gn?(eA(i,o,E),yo(i,o,E)):(_t&&M&&km(o),o.flags|=1,Xn(i,o,u,E),o.child)}function Lg(i,o,r,u,E){if(i===null){var A=r.type;return typeof A=="function"&&!Lm(A)&&A.defaultProps===void 0&&r.compare===null?(o.tag=15,o.type=A,xg(i,o,A,u,E)):(i=Zd(r.type,null,u,o,o.mode,E),i.ref=o.ref,i.return=o,o.child=i)}if(A=i.child,!pA(i,E)){var b=A.memoizedProps;if(r=r.compare,r=r!==null?r:Zc,r(b,u)&&i.ref===o.ref)return yo(i,o,E)}return o.flags|=1,i=go(A,u),i.ref=o.ref,i.return=o,o.child=i}function xg(i,o,r,u,E){if(i!==null){var A=i.memoizedProps;if(Zc(A,u)&&i.ref===o.ref)if(Gn=!1,o.pendingProps=u=A,pA(i,E))(i.flags&131072)!==0&&(Gn=!0);else return o.lanes=i.lanes,yo(i,o,E)}return AA(i,o,r,u,E)}function Hg(i,o,r){var u=o.pendingProps,E=u.children,A=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((o.flags&128)!==0){if(u=A!==null?A.baseLanes|r:r,i!==null){for(E=o.child=i.child,A=0;E!==null;)A=A|E.lanes|E.childLanes,E=E.sibling;o.childLanes=A&~u}else o.childLanes=0,o.child=null;return kg(i,o,u,r)}if((r&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&th(o,A!==null?A.cachePool:null),A!==null?x_(o,A):qm(),_g(o);else return o.lanes=o.childLanes=536870912,kg(i,o,A!==null?A.baseLanes|r:r,r)}else A!==null?(th(o,A.cachePool),x_(o,A),al(),o.memoizedState=null):(i!==null&&th(o,null),qm(),al());return Xn(i,o,E,r),o.child}function kg(i,o,r,u){var E=zm();return E=E===null?null:{parent:Mn._currentValue,pool:E},o.memoizedState={baseLanes:r,cachePool:E},i!==null&&th(o,null),qm(),_g(o),i!==null&&tu(i,o,u,!0),null}function Th(i,o){var r=o.ref;if(r===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(i===null||i.ref!==r)&&(o.flags|=4194816)}}function AA(i,o,r,u,E){return cs(o),r=Qm(i,o,r,u,void 0,E),u=Jm(),i!==null&&!Gn?(eA(i,o,E),yo(i,o,E)):(_t&&u&&km(o),o.flags|=1,Xn(i,o,r,E),o.child)}function Ug(i,o,r,u,E,A){return cs(o),o.updateQueue=null,r=k_(o,u,r,E),H_(i),u=Jm(),i!==null&&!Gn?(eA(i,o,A),yo(i,o,A)):(_t&&u&&km(o),o.flags|=1,Xn(i,o,r,A),o.child)}function wg(i,o,r,u,E){if(cs(o),o.stateNode===null){var A=Ir,b=r.contextType;typeof b=="object"&&b!==null&&(A=ri(b)),A=new r(u,A),o.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=EA,o.stateNode=A,A._reactInternals=o,A=o.stateNode,A.props=u,A.state=o.memoizedState,A.refs={},Km(o),b=r.contextType,A.context=typeof b=="object"&&b!==null?ri(b):Ir,A.state=o.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(fA(o,r,b,u),A.state=o.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(b=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),b!==A.state&&EA.enqueueReplaceState(A,A.state,null),ru(o,u,A,E),su(),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(i===null){A=o.stateNode;var M=o.memoizedProps,z=hs(r,M);A.props=z;var ae=A.context,Re=r.contextType;b=Ir,typeof Re=="object"&&Re!==null&&(b=ri(Re));var Se=r.getDerivedStateFromProps;Re=typeof Se=="function"||typeof A.getSnapshotBeforeUpdate=="function",M=o.pendingProps!==M,Re||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(M||ae!==b)&&pg(o,A,u,b),Jo=!1;var ce=o.memoizedState;A.state=ce,ru(o,u,A,E),su(),ae=o.memoizedState,M||ce!==ae||Jo?(typeof Se=="function"&&(fA(o,r,Se,u),ae=o.memoizedState),(z=Jo||gg(o,r,z,u,ce,ae,b))?(Re||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(o.flags|=4194308)):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=ae),A.props=u,A.state=ae,A.context=b,u=z):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{A=o.stateNode,Vm(i,o),b=o.memoizedProps,Re=hs(r,b),A.props=Re,Se=o.pendingProps,ce=A.context,ae=r.contextType,z=Ir,typeof ae=="object"&&ae!==null&&(z=ri(ae)),M=r.getDerivedStateFromProps,(ae=typeof M=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(b!==Se||ce!==z)&&pg(o,A,u,z),Jo=!1,ce=o.memoizedState,A.state=ce,ru(o,u,A,E),su();var de=o.memoizedState;b!==Se||ce!==de||Jo||i!==null&&i.dependencies!==null&&Jd(i.dependencies)?(typeof M=="function"&&(fA(o,r,M,u),de=o.memoizedState),(Re=Jo||gg(o,r,Re,u,ce,de,z)||i!==null&&i.dependencies!==null&&Jd(i.dependencies))?(ae||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(u,de,z),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(u,de,z)),typeof A.componentDidUpdate=="function"&&(o.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof A.componentDidUpdate!="function"||b===i.memoizedProps&&ce===i.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&ce===i.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=de),A.props=u,A.state=de,A.context=z,u=Re):(typeof A.componentDidUpdate!="function"||b===i.memoizedProps&&ce===i.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&ce===i.memoizedState||(o.flags|=1024),u=!1)}return A=u,Th(i,o),u=(o.flags&128)!==0,A||u?(A=o.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:A.render(),o.flags|=1,i!==null&&u?(o.child=vr(o,i.child,null,E),o.child=vr(o,null,r,E)):Xn(i,o,r,E),o.memoizedState=A.state,i=o.child):i=yo(i,o,E),i}function Pg(i,o,r,u){return Jc(),o.flags|=256,Xn(i,o,r,u),o.child}var RA={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function TA(i){return{baseLanes:i,cachePool:C_()}}function SA(i,o,r){return i=i!==null?i.childLanes&~r:0,o&&(i|=Ea),i}function Gg(i,o,r){var u=o.pendingProps,E=!1,A=(o.flags&128)!==0,b;if((b=A)||(b=i!==null&&i.memoizedState===null?!1:(Ln.current&2)!==0),b&&(E=!0,o.flags&=-129),b=(o.flags&32)!==0,o.flags&=-33,i===null){if(_t){if(E?il(o):al(),_t){var M=an,z;if(z=M){e:{for(z=M,M=Za;z.nodeType!==8;){if(!M){M=null;break e}if(z=Ha(z.nextSibling),z===null){M=null;break e}}M=z}M!==null?(o.memoizedState={dehydrated:M,treeContext:as!==null?{id:po,overflow:No}:null,retryLane:536870912,hydrationErrors:null},z=Wi(18,null,null,0),z.stateNode=M,z.return=o,o.child=z,Ai=o,an=null,z=!0):z=!1}z||ss(o)}if(M=o.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return nR(M)?o.lanes=32:o.lanes=536870912,null;Do(o)}return M=u.children,u=u.fallback,E?(al(),E=o.mode,M=Sh({mode:"hidden",children:M},E),u=is(u,E,r,null),M.return=o,u.return=o,M.sibling=u,o.child=M,E=o.child,E.memoizedState=TA(r),E.childLanes=SA(i,b,r),o.memoizedState=RA,u):(il(o),IA(o,M))}if(z=i.memoizedState,z!==null&&(M=z.dehydrated,M!==null)){if(A)o.flags&256?(il(o),o.flags&=-257,o=_A(i,o,r)):o.memoizedState!==null?(al(),o.child=i.child,o.flags|=128,o=null):(al(),E=u.fallback,M=o.mode,u=Sh({mode:"visible",children:u.children},M),E=is(E,M,r,null),E.flags|=2,u.return=o,E.return=o,u.sibling=E,o.child=u,vr(o,i.child,null,r),u=o.child,u.memoizedState=TA(r),u.childLanes=SA(i,b,r),o.memoizedState=RA,o=E);else if(il(o),nR(M)){if(b=M.nextSibling&&M.nextSibling.dataset,b)var ae=b.dgst;b=ae,u=Error(a(419)),u.stack="",u.digest=b,eu({value:u,source:null,stack:null}),o=_A(i,o,r)}else if(Gn||tu(i,o,r,!1),b=(r&i.childLanes)!==0,Gn||b){if(b=Bt,b!==null&&(u=r&-r,u=(u&42)!==0?1:im(u),u=(u&(b.suspendedLanes|r))!==0?0:u,u!==0&&u!==z.retryLane))throw z.retryLane=u,Sr(i,u),Qi(b,i,u),vg;M.data==="$?"||GA(),o=_A(i,o,r)}else M.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=z.treeContext,an=Ha(M.nextSibling),Ai=o,_t=!0,ls=null,Za=!1,i!==null&&(da[ha++]=po,da[ha++]=No,da[ha++]=as,po=i.id,No=i.overflow,as=o),o=IA(o,u.children),o.flags|=4096);return o}return E?(al(),E=u.fallback,M=o.mode,z=i.child,ae=z.sibling,u=go(z,{mode:"hidden",children:u.children}),u.subtreeFlags=z.subtreeFlags&65011712,ae!==null?E=go(ae,E):(E=is(E,M,r,null),E.flags|=2),E.return=o,u.return=o,u.sibling=E,o.child=u,u=E,E=o.child,M=i.child.memoizedState,M===null?M=TA(r):(z=M.cachePool,z!==null?(ae=Mn._currentValue,z=z.parent!==ae?{parent:ae,pool:ae}:z):z=C_(),M={baseLanes:M.baseLanes|r,cachePool:z}),E.memoizedState=M,E.childLanes=SA(i,b,r),o.memoizedState=RA,u):(il(o),r=i.child,i=r.sibling,r=go(r,{mode:"visible",children:u.children}),r.return=o,r.sibling=null,i!==null&&(b=o.deletions,b===null?(o.deletions=[i],o.flags|=16):b.push(i)),o.child=r,o.memoizedState=null,r)}function IA(i,o){return o=Sh({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Sh(i,o){return i=Wi(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function _A(i,o,r){return vr(o,i.child,null,r),i=IA(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Bg(i,o,r){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o),Gm(i.return,o,r)}function gA(i,o,r,u,E){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:E}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=r,A.tailMode=E)}function Fg(i,o,r){var u=o.pendingProps,E=u.revealOrder,A=u.tail;if(Xn(i,o,u.children,r),u=Ln.current,(u&2)!==0)u=u&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Bg(i,r,o);else if(i.tag===19)Bg(i,r,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(B(Ln,u),E){case"forwards":for(r=o.child,E=null;r!==null;)i=r.alternate,i!==null&&mh(i)===null&&(E=r),r=r.sibling;r=E,r===null?(E=o.child,o.child=null):(E=r.sibling,r.sibling=null),gA(o,!1,E,r,A);break;case"backwards":for(r=null,E=o.child,o.child=null;E!==null;){if(i=E.alternate,i!==null&&mh(i)===null){o.child=E;break}i=E.sibling,E.sibling=r,r=E,E=i}gA(o,!0,r,null,A);break;case"together":gA(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function yo(i,o,r){if(i!==null&&(o.dependencies=i.dependencies),cl|=o.lanes,(r&o.childLanes)===0)if(i!==null){if(tu(i,o,r,!1),(r&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(a(153));if(o.child!==null){for(i=o.child,r=go(i,i.pendingProps),o.child=r,r.return=o;i.sibling!==null;)i=i.sibling,r=r.sibling=go(i,i.pendingProps),r.return=o;r.sibling=null}return o.child}function pA(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Jd(i)))}function lL(i,o,r){switch(o.tag){case 3:me(o,o.stateNode.containerInfo),Qo(o,Mn,i.memoizedState.cache),Jc();break;case 27:case 5:Be(o);break;case 4:me(o,o.stateNode.containerInfo);break;case 10:Qo(o,o.type,o.memoizedProps.value);break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(il(o),o.flags|=128,null):(r&o.child.childLanes)!==0?Gg(i,o,r):(il(o),i=yo(i,o,r),i!==null?i.sibling:null);il(o);break;case 19:var E=(i.flags&128)!==0;if(u=(r&o.childLanes)!==0,u||(tu(i,o,r,!1),u=(r&o.childLanes)!==0),E){if(u)return Fg(i,o,r);o.flags|=128}if(E=o.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),B(Ln,Ln.current),u)break;return null;case 22:case 23:return o.lanes=0,Hg(i,o,r);case 24:Qo(o,Mn,i.memoizedState.cache)}return yo(i,o,r)}function jg(i,o,r){if(i!==null)if(i.memoizedProps!==o.pendingProps)Gn=!0;else{if(!pA(i,r)&&(o.flags&128)===0)return Gn=!1,lL(i,o,r);Gn=(i.flags&131072)!==0}else Gn=!1,_t&&(o.flags&1048576)!==0&&T_(o,Qd,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var u=o.elementType,E=u._init;if(u=E(u._payload),o.type=u,typeof u=="function")Lm(u)?(i=hs(u,i),o.tag=1,o=wg(null,o,u,i,r)):(o.tag=0,o=AA(null,o,u,i,r));else{if(u!=null){if(E=u.$$typeof,E===v){o.tag=11,o=Mg(null,o,u,i,r);break e}else if(E===w){o.tag=14,o=Lg(null,o,u,i,r);break e}}throw o=q(u)||u,Error(a(306,o,""))}}return o;case 0:return AA(i,o,o.type,o.pendingProps,r);case 1:return u=o.type,E=hs(u,o.pendingProps),wg(i,o,u,E,r);case 3:e:{if(me(o,o.stateNode.containerInfo),i===null)throw Error(a(387));u=o.pendingProps;var A=o.memoizedState;E=A.element,Vm(i,o),ru(o,u,null,r);var b=o.memoizedState;if(u=b.cache,Qo(o,Mn,u),u!==A.cache&&Bm(o,[Mn],r,!0),su(),u=b.element,A.isDehydrated)if(A={element:u,isDehydrated:!1,cache:b.cache},o.updateQueue.baseState=A,o.memoizedState=A,o.flags&256){o=Pg(i,o,u,r);break e}else if(u!==E){E=ca(Error(a(424)),o),eu(E),o=Pg(i,o,u,r);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(an=Ha(i.firstChild),Ai=o,_t=!0,ls=null,Za=!0,r=Ig(o,null,u,r),o.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Jc(),u===E){o=yo(i,o,r);break e}Xn(i,o,u,r)}o=o.child}return o;case 26:return Th(i,o),i===null?(r=Vp(o.type,null,o.pendingProps,null))?o.memoizedState=r:_t||(r=o.type,i=o.pendingProps,u=xh(oe.current).createElement(r),u[si]=o,u[Li]=i,Zn(u,r,i),Pn(u),o.stateNode=u):o.memoizedState=Vp(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Be(o),i===null&&_t&&(u=o.stateNode=zp(o.type,o.pendingProps,oe.current),Ai=o,Za=!0,E=an,fl(o.type)?(iR=E,an=Ha(u.firstChild)):an=E),Xn(i,o,o.pendingProps.children,r),Th(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&_t&&((E=u=an)&&(u=HL(u,o.type,o.pendingProps,Za),u!==null?(o.stateNode=u,Ai=o,an=Ha(u.firstChild),Za=!1,E=!0):E=!1),E||ss(o)),Be(o),E=o.type,A=o.pendingProps,b=i!==null?i.memoizedProps:null,u=A.children,JA(E,A)?u=null:b!==null&&JA(E,b)&&(o.flags|=32),o.memoizedState!==null&&(E=Qm(i,o,QM,null,null,r),vu._currentValue=E),Th(i,o),Xn(i,o,u,r),o.child;case 6:return i===null&&_t&&((i=r=an)&&(r=kL(r,o.pendingProps,Za),r!==null?(o.stateNode=r,Ai=o,an=null,i=!0):i=!1),i||ss(o)),null;case 13:return Gg(i,o,r);case 4:return me(o,o.stateNode.containerInfo),u=o.pendingProps,i===null?o.child=vr(o,null,u,r):Xn(i,o,u,r),o.child;case 11:return Mg(i,o,o.type,o.pendingProps,r);case 7:return Xn(i,o,o.pendingProps,r),o.child;case 8:return Xn(i,o,o.pendingProps.children,r),o.child;case 12:return Xn(i,o,o.pendingProps.children,r),o.child;case 10:return u=o.pendingProps,Qo(o,o.type,u.value),Xn(i,o,u.children,r),o.child;case 9:return E=o.type._context,u=o.pendingProps.children,cs(o),E=ri(E),u=u(E),o.flags|=1,Xn(i,o,u,r),o.child;case 14:return Lg(i,o,o.type,o.pendingProps,r);case 15:return xg(i,o,o.type,o.pendingProps,r);case 19:return Fg(i,o,r);case 31:return u=o.pendingProps,r=o.mode,u={mode:u.mode,children:u.children},i===null?(r=Sh(u,r),r.ref=o.ref,o.child=r,r.return=o,o=r):(r=go(i.child,u),r.ref=o.ref,o.child=r,r.return=o,o=r),o;case 22:return Hg(i,o,r);case 24:return cs(o),u=ri(Mn),i===null?(E=zm(),E===null&&(E=Bt,A=Fm(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=r),E=A),o.memoizedState={parent:u,cache:E},Km(o),Qo(o,Mn,E)):((i.lanes&r)!==0&&(Vm(i,o),ru(o,null,null,r),su()),E=i.memoizedState,A=o.memoizedState,E.parent!==u?(E={parent:u,cache:u},o.memoizedState=E,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=E),Qo(o,Mn,u)):(u=A.cache,Qo(o,Mn,u),u!==E.cache&&Bm(o,[Mn],r,!0))),Xn(i,o,o.pendingProps.children,r),o.child;case 29:throw o.pendingProps}throw Error(a(156,o.tag))}function vo(i){i.flags|=4}function zg(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!$p(o)){if(o=fa.current,o!==null&&((Et&4194048)===Et?$a!==null:(Et&62914560)!==Et&&(Et&536870912)===0||o!==$a))throw ou=Ym,b_;i.flags|=8192}}function Ih(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?_I():536870912,i.lanes|=o,Hr|=o)}function mu(i,o){if(!_t)switch(i.tailMode){case"hidden":o=i.tail;for(var r=null;o!==null;)o.alternate!==null&&(r=o),o=o.sibling;r===null?i.tail=null:r.sibling=null;break;case"collapsed":r=i.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function qt(i){var o=i.alternate!==null&&i.alternate.child===i.child,r=0,u=0;if(o)for(var E=i.child;E!==null;)r|=E.lanes|E.childLanes,u|=E.subtreeFlags&65011712,u|=E.flags&65011712,E.return=i,E=E.sibling;else for(E=i.child;E!==null;)r|=E.lanes|E.childLanes,u|=E.subtreeFlags,u|=E.flags,E.return=i,E=E.sibling;return i.subtreeFlags|=u,i.childLanes=r,o}function sL(i,o,r){var u=o.pendingProps;switch(Um(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(o),null;case 1:return qt(o),null;case 3:return r=o.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),bo(Mn),Ce(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(Qc(o)?vo(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,__())),qt(o),null;case 26:return r=o.memoizedState,i===null?(vo(o),r!==null?(qt(o),zg(o,r)):(qt(o),o.flags&=-16777217)):r?r!==i.memoizedState?(vo(o),qt(o),zg(o,r)):(qt(o),o.flags&=-16777217):(i.memoizedProps!==u&&vo(o),qt(o),o.flags&=-16777217),null;case 27:Ne(o),r=oe.current;var E=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==u&&vo(o);else{if(!u){if(o.stateNode===null)throw Error(a(166));return qt(o),null}i=W.current,Qc(o)?S_(o):(i=zp(E,u,r),o.stateNode=i,vo(o))}return qt(o),null;case 5:if(Ne(o),r=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&vo(o);else{if(!u){if(o.stateNode===null)throw Error(a(166));return qt(o),null}if(i=W.current,Qc(o))S_(o);else{switch(E=xh(oe.current),i){case 1:i=E.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:i=E.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":i=E.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":i=E.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":i=E.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?E.createElement(r,{is:u.is}):E.createElement(r)}}i[si]=o,i[Li]=u;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)i.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=i;e:switch(Zn(i,r,u),r){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&vo(o)}}return qt(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==u&&vo(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(a(166));if(i=oe.current,Qc(o)){if(i=o.stateNode,r=o.memoizedProps,u=null,E=Ai,E!==null)switch(E.tag){case 27:case 5:u=E.memoizedProps}i[si]=o,i=!!(i.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||Up(i.nodeValue,r)),i||ss(o)}else i=xh(i).createTextNode(u),i[si]=o,o.stateNode=i}return qt(o),null;case 13:if(u=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(E=Qc(o),u!==null&&u.dehydrated!==null){if(i===null){if(!E)throw Error(a(318));if(E=o.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(a(317));E[si]=o}else Jc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;qt(o),E=!1}else E=__(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=E),E=!0;if(!E)return o.flags&256?(Do(o),o):(Do(o),null)}if(Do(o),(o.flags&128)!==0)return o.lanes=r,o;if(r=u!==null,i=i!==null&&i.memoizedState!==null,r){u=o.child,E=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(E=u.alternate.memoizedState.cachePool.pool);var A=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(A=u.memoizedState.cachePool.pool),A!==E&&(u.flags|=2048)}return r!==i&&r&&(o.child.flags|=8192),Ih(o,o.updateQueue),qt(o),null;case 4:return Ce(),i===null&&XA(o.stateNode.containerInfo),qt(o),null;case 10:return bo(o.type),qt(o),null;case 19:if(Y(Ln),E=o.memoizedState,E===null)return qt(o),null;if(u=(o.flags&128)!==0,A=E.rendering,A===null)if(u)mu(E,!1);else{if(on!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(A=mh(i),A!==null){for(o.flags|=128,mu(E,!1),i=A.updateQueue,o.updateQueue=i,Ih(o,i),o.subtreeFlags=0,i=r,r=o.child;r!==null;)R_(r,i),r=r.sibling;return B(Ln,Ln.current&1|2),o.child}i=i.sibling}E.tail!==null&&ye()>ph&&(o.flags|=128,u=!0,mu(E,!1),o.lanes=4194304)}else{if(!u)if(i=mh(A),i!==null){if(o.flags|=128,u=!0,i=i.updateQueue,o.updateQueue=i,Ih(o,i),mu(E,!0),E.tail===null&&E.tailMode==="hidden"&&!A.alternate&&!_t)return qt(o),null}else 2*ye()-E.renderingStartTime>ph&&r!==536870912&&(o.flags|=128,u=!0,mu(E,!1),o.lanes=4194304);E.isBackwards?(A.sibling=o.child,o.child=A):(i=E.last,i!==null?i.sibling=A:o.child=A,E.last=A)}return E.tail!==null?(o=E.tail,E.rendering=o,E.tail=o.sibling,E.renderingStartTime=ye(),o.sibling=null,i=Ln.current,B(Ln,u?i&1|2:i&1),o):(qt(o),null);case 22:case 23:return Do(o),Zm(),u=o.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(r&536870912)!==0&&(o.flags&128)===0&&(qt(o),o.subtreeFlags&6&&(o.flags|=8192)):qt(o),r=o.updateQueue,r!==null&&Ih(o,r.retryQueue),r=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==r&&(o.flags|=2048),i!==null&&Y(us),null;case 24:return r=null,i!==null&&(r=i.memoizedState.cache),o.memoizedState.cache!==r&&(o.flags|=2048),bo(Mn),qt(o),null;case 25:return null;case 30:return null}throw Error(a(156,o.tag))}function rL(i,o){switch(Um(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return bo(Mn),Ce(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Ne(o),null;case 13:if(Do(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(a(340));Jc()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Y(Ln),null;case 4:return Ce(),null;case 10:return bo(o.type),null;case 22:case 23:return Do(o),Zm(),i!==null&&Y(us),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return bo(Mn),null;case 25:return null;default:return null}}function Yg(i,o){switch(Um(o),o.tag){case 3:bo(Mn),Ce();break;case 26:case 27:case 5:Ne(o);break;case 4:Ce();break;case 13:Do(o);break;case 19:Y(Ln);break;case 10:bo(o.type);break;case 22:case 23:Do(o),Zm(),i!==null&&Y(us);break;case 24:bo(Mn)}}function Au(i,o){try{var r=o.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var E=u.next;r=E;do{if((r.tag&i)===i){u=void 0;var A=r.create,b=r.inst;u=A(),b.destroy=u}r=r.next}while(r!==E)}}catch(M){kt(o,o.return,M)}}function ol(i,o,r){try{var u=o.updateQueue,E=u!==null?u.lastEffect:null;if(E!==null){var A=E.next;u=A;do{if((u.tag&i)===i){var b=u.inst,M=b.destroy;if(M!==void 0){b.destroy=void 0,E=o;var z=r,ae=M;try{ae()}catch(Re){kt(E,z,Re)}}}u=u.next}while(u!==A)}}catch(Re){kt(o,o.return,Re)}}function Kg(i){var o=i.updateQueue;if(o!==null){var r=i.stateNode;try{L_(o,r)}catch(u){kt(i,i.return,u)}}}function Vg(i,o,r){r.props=hs(i.type,i.memoizedProps),r.state=i.memoizedState;try{r.componentWillUnmount()}catch(u){kt(i,o,u)}}function Ru(i,o){try{var r=i.ref;if(r!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof r=="function"?i.refCleanup=r(u):r.current=u}}catch(E){kt(i,o,E)}}function Qa(i,o){var r=i.ref,u=i.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(E){kt(i,o,E)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(E){kt(i,o,E)}else r.current=null}function Wg(i){var o=i.type,r=i.memoizedProps,u=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(E){kt(i,i.return,E)}}function NA(i,o,r){try{var u=i.stateNode;yL(u,i.type,r,o),u[Li]=o}catch(E){kt(i,i.return,E)}}function Xg(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&fl(i.type)||i.tag===4}function CA(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Xg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&fl(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bA(i,o,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(i,o):(o=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.appendChild(i),r=r._reactRootContainer,r!=null||o.onclick!==null||(o.onclick=Lh));else if(u!==4&&(u===27&&fl(i.type)&&(r=i.stateNode,o=null),i=i.child,i!==null))for(bA(i,o,r),i=i.sibling;i!==null;)bA(i,o,r),i=i.sibling}function _h(i,o,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?r.insertBefore(i,o):r.appendChild(i);else if(u!==4&&(u===27&&fl(i.type)&&(r=i.stateNode),i=i.child,i!==null))for(_h(i,o,r),i=i.sibling;i!==null;)_h(i,o,r),i=i.sibling}function qg(i){var o=i.stateNode,r=i.memoizedProps;try{for(var u=i.type,E=o.attributes;E.length;)o.removeAttributeNode(E[0]);Zn(o,u,r),o[si]=i,o[Li]=r}catch(A){kt(i,i.return,A)}}var Mo=!1,Sn=!1,OA=!1,Zg=typeof WeakSet=="function"?WeakSet:Set,Bn=null;function cL(i,o){if(i=i.containerInfo,$A=Gh,i=s_(i),Cm(i)){if("selectionStart"in i)var r={start:i.selectionStart,end:i.selectionEnd};else e:{r=(r=i.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var E=u.anchorOffset,A=u.focusNode;u=u.focusOffset;try{r.nodeType,A.nodeType}catch{r=null;break e}var b=0,M=-1,z=-1,ae=0,Re=0,Se=i,ce=null;t:for(;;){for(var de;Se!==r||E!==0&&Se.nodeType!==3||(M=b+E),Se!==A||u!==0&&Se.nodeType!==3||(z=b+u),Se.nodeType===3&&(b+=Se.nodeValue.length),(de=Se.firstChild)!==null;)ce=Se,Se=de;for(;;){if(Se===i)break t;if(ce===r&&++ae===E&&(M=b),ce===A&&++Re===u&&(z=b),(de=Se.nextSibling)!==null)break;Se=ce,ce=Se.parentNode}Se=de}r=M===-1||z===-1?null:{start:M,end:z}}else r=null}r=r||{start:0,end:0}}else r=null;for(QA={focusedElem:i,selectionRange:r},Gh=!1,Bn=o;Bn!==null;)if(o=Bn,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,Bn=i;else for(;Bn!==null;){switch(o=Bn,A=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&A!==null){i=void 0,r=o,E=A.memoizedProps,A=A.memoizedState,u=r.stateNode;try{var Ke=hs(r.type,E,r.elementType===r.type);i=u.getSnapshotBeforeUpdate(Ke,A),u.__reactInternalSnapshotBeforeUpdate=i}catch(je){kt(r,r.return,je)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,r=i.nodeType,r===9)tR(i);else if(r===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":tR(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(a(163))}if(i=o.sibling,i!==null){i.return=o.return,Bn=i;break}Bn=o.return}}function $g(i,o,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:ll(i,r),u&4&&Au(5,r);break;case 1:if(ll(i,r),u&4)if(i=r.stateNode,o===null)try{i.componentDidMount()}catch(b){kt(r,r.return,b)}else{var E=hs(r.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(E,o,i.__reactInternalSnapshotBeforeUpdate)}catch(b){kt(r,r.return,b)}}u&64&&Kg(r),u&512&&Ru(r,r.return);break;case 3:if(ll(i,r),u&64&&(i=r.updateQueue,i!==null)){if(o=null,r.child!==null)switch(r.child.tag){case 27:case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}try{L_(i,o)}catch(b){kt(r,r.return,b)}}break;case 27:o===null&&u&4&&qg(r);case 26:case 5:ll(i,r),o===null&&u&4&&Wg(r),u&512&&Ru(r,r.return);break;case 12:ll(i,r);break;case 13:ll(i,r),u&4&&ep(i,r),u&64&&(i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(r=TL.bind(null,r),UL(i,r))));break;case 22:if(u=r.memoizedState!==null||Mo,!u){o=o!==null&&o.memoizedState!==null||Sn,E=Mo;var A=Sn;Mo=u,(Sn=o)&&!A?sl(i,r,(r.subtreeFlags&8772)!==0):ll(i,r),Mo=E,Sn=A}break;case 30:break;default:ll(i,r)}}function Qg(i){var o=i.alternate;o!==null&&(i.alternate=null,Qg(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&lm(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Yt=null,ki=!1;function Lo(i,o,r){for(r=r.child;r!==null;)Jg(i,o,r),r=r.sibling}function Jg(i,o,r){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(Pc,r)}catch{}switch(r.tag){case 26:Sn||Qa(r,o),Lo(i,o,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Sn||Qa(r,o);var u=Yt,E=ki;fl(r.type)&&(Yt=r.stateNode,ki=!1),Lo(i,o,r),bu(r.stateNode),Yt=u,ki=E;break;case 5:Sn||Qa(r,o);case 6:if(u=Yt,E=ki,Yt=null,Lo(i,o,r),Yt=u,ki=E,Yt!==null)if(ki)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(r.stateNode)}catch(A){kt(r,o,A)}else try{Yt.removeChild(r.stateNode)}catch(A){kt(r,o,A)}break;case 18:Yt!==null&&(ki?(i=Yt,Fp(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.stateNode),Hu(i)):Fp(Yt,r.stateNode));break;case 4:u=Yt,E=ki,Yt=r.stateNode.containerInfo,ki=!0,Lo(i,o,r),Yt=u,ki=E;break;case 0:case 11:case 14:case 15:Sn||ol(2,r,o),Sn||ol(4,r,o),Lo(i,o,r);break;case 1:Sn||(Qa(r,o),u=r.stateNode,typeof u.componentWillUnmount=="function"&&Vg(r,o,u)),Lo(i,o,r);break;case 21:Lo(i,o,r);break;case 22:Sn=(u=Sn)||r.memoizedState!==null,Lo(i,o,r),Sn=u;break;default:Lo(i,o,r)}}function ep(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Hu(i)}catch(r){kt(o,o.return,r)}}function uL(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Zg),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Zg),o;default:throw Error(a(435,i.tag))}}function DA(i,o){var r=uL(i);o.forEach(function(u){var E=SL.bind(null,i,u);r.has(u)||(r.add(u),u.then(E,E))})}function Xi(i,o){var r=o.deletions;if(r!==null)for(var u=0;u<r.length;u++){var E=r[u],A=i,b=o,M=b;e:for(;M!==null;){switch(M.tag){case 27:if(fl(M.type)){Yt=M.stateNode,ki=!1;break e}break;case 5:Yt=M.stateNode,ki=!1;break e;case 3:case 4:Yt=M.stateNode.containerInfo,ki=!0;break e}M=M.return}if(Yt===null)throw Error(a(160));Jg(A,b,E),Yt=null,ki=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)tp(o,i),o=o.sibling}var xa=null;function tp(i,o){var r=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Xi(o,i),qi(i),u&4&&(ol(3,i,i.return),Au(3,i),ol(5,i,i.return));break;case 1:Xi(o,i),qi(i),u&512&&(Sn||r===null||Qa(r,r.return)),u&64&&Mo&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(r=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var E=xa;if(Xi(o,i),qi(i),u&512&&(Sn||r===null||Qa(r,r.return)),u&4){var A=r!==null?r.memoizedState:null;if(u=i.memoizedState,r===null)if(u===null)if(i.stateNode===null){e:{u=i.type,r=i.memoizedProps,E=E.ownerDocument||E;t:switch(u){case"title":A=E.getElementsByTagName("title")[0],(!A||A[Fc]||A[si]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(u),E.head.insertBefore(A,E.querySelector("head > title"))),Zn(A,u,r),A[si]=i,Pn(A),u=A;break e;case"link":var b=qp("link","href",E).get(u+(r.href||""));if(b){for(var M=0;M<b.length;M++)if(A=b[M],A.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&A.getAttribute("rel")===(r.rel==null?null:r.rel)&&A.getAttribute("title")===(r.title==null?null:r.title)&&A.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(M,1);break t}}A=E.createElement(u),Zn(A,u,r),E.head.appendChild(A);break;case"meta":if(b=qp("meta","content",E).get(u+(r.content||""))){for(M=0;M<b.length;M++)if(A=b[M],A.getAttribute("content")===(r.content==null?null:""+r.content)&&A.getAttribute("name")===(r.name==null?null:r.name)&&A.getAttribute("property")===(r.property==null?null:r.property)&&A.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&A.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(M,1);break t}}A=E.createElement(u),Zn(A,u,r),E.head.appendChild(A);break;default:throw Error(a(468,u))}A[si]=i,Pn(A),u=A}i.stateNode=u}else Zp(E,i.type,i.stateNode);else i.stateNode=Xp(E,u,i.memoizedProps);else A!==u?(A===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):A.count--,u===null?Zp(E,i.type,i.stateNode):Xp(E,u,i.memoizedProps)):u===null&&i.stateNode!==null&&NA(i,i.memoizedProps,r.memoizedProps)}break;case 27:Xi(o,i),qi(i),u&512&&(Sn||r===null||Qa(r,r.return)),r!==null&&u&4&&NA(i,i.memoizedProps,r.memoizedProps);break;case 5:if(Xi(o,i),qi(i),u&512&&(Sn||r===null||Qa(r,r.return)),i.flags&32){E=i.stateNode;try{hr(E,"")}catch(de){kt(i,i.return,de)}}u&4&&i.stateNode!=null&&(E=i.memoizedProps,NA(i,E,r!==null?r.memoizedProps:E)),u&1024&&(OA=!0);break;case 6:if(Xi(o,i),qi(i),u&4){if(i.stateNode===null)throw Error(a(162));u=i.memoizedProps,r=i.stateNode;try{r.nodeValue=u}catch(de){kt(i,i.return,de)}}break;case 3:if(Uh=null,E=xa,xa=Hh(o.containerInfo),Xi(o,i),xa=E,qi(i),u&4&&r!==null&&r.memoizedState.isDehydrated)try{Hu(o.containerInfo)}catch(de){kt(i,i.return,de)}OA&&(OA=!1,np(i));break;case 4:u=xa,xa=Hh(i.stateNode.containerInfo),Xi(o,i),qi(i),xa=u;break;case 12:Xi(o,i),qi(i);break;case 13:Xi(o,i),qi(i),i.child.flags&8192&&i.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(HA=ye()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,DA(i,u)));break;case 22:E=i.memoizedState!==null;var z=r!==null&&r.memoizedState!==null,ae=Mo,Re=Sn;if(Mo=ae||E,Sn=Re||z,Xi(o,i),Sn=Re,Mo=ae,qi(i),u&8192)e:for(o=i.stateNode,o._visibility=E?o._visibility&-2:o._visibility|1,E&&(r===null||z||Mo||Sn||fs(i)),r=null,o=i;;){if(o.tag===5||o.tag===26){if(r===null){z=r=o;try{if(A=z.stateNode,E)b=A.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{M=z.stateNode;var Se=z.memoizedProps.style,ce=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;M.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(de){kt(z,z.return,de)}}}else if(o.tag===6){if(r===null){z=o;try{z.stateNode.nodeValue=E?"":z.memoizedProps}catch(de){kt(z,z.return,de)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;r===o&&(r=null),o=o.return}r===o&&(r=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=i.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,DA(i,r))));break;case 19:Xi(o,i),qi(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,DA(i,u)));break;case 30:break;case 21:break;default:Xi(o,i),qi(i)}}function qi(i){var o=i.flags;if(o&2){try{for(var r,u=i.return;u!==null;){if(Xg(u)){r=u;break}u=u.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var E=r.stateNode,A=CA(i);_h(i,A,E);break;case 5:var b=r.stateNode;r.flags&32&&(hr(b,""),r.flags&=-33);var M=CA(i);_h(i,M,b);break;case 3:case 4:var z=r.stateNode.containerInfo,ae=CA(i);bA(i,ae,z);break;default:throw Error(a(161))}}catch(Re){kt(i,i.return,Re)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function np(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;np(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function ll(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)$g(i,o.alternate,o),o=o.sibling}function fs(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:ol(4,o,o.return),fs(o);break;case 1:Qa(o,o.return);var r=o.stateNode;typeof r.componentWillUnmount=="function"&&Vg(o,o.return,r),fs(o);break;case 27:bu(o.stateNode);case 26:case 5:Qa(o,o.return),fs(o);break;case 22:o.memoizedState===null&&fs(o);break;case 30:fs(o);break;default:fs(o)}i=i.sibling}}function sl(i,o,r){for(r=r&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,E=i,A=o,b=A.flags;switch(A.tag){case 0:case 11:case 15:sl(E,A,r),Au(4,A);break;case 1:if(sl(E,A,r),u=A,E=u.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ae){kt(u,u.return,ae)}if(u=A,E=u.updateQueue,E!==null){var M=u.stateNode;try{var z=E.shared.hiddenCallbacks;if(z!==null)for(E.shared.hiddenCallbacks=null,E=0;E<z.length;E++)M_(z[E],M)}catch(ae){kt(u,u.return,ae)}}r&&b&64&&Kg(A),Ru(A,A.return);break;case 27:qg(A);case 26:case 5:sl(E,A,r),r&&u===null&&b&4&&Wg(A),Ru(A,A.return);break;case 12:sl(E,A,r);break;case 13:sl(E,A,r),r&&b&4&&ep(E,A);break;case 22:A.memoizedState===null&&sl(E,A,r),Ru(A,A.return);break;case 30:break;default:sl(E,A,r)}o=o.sibling}}function yA(i,o){var r=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==r&&(i!=null&&i.refCount++,r!=null&&nu(r))}function vA(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&nu(i))}function Ja(i,o,r,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ip(i,o,r,u),o=o.sibling}function ip(i,o,r,u){var E=o.flags;switch(o.tag){case 0:case 11:case 15:Ja(i,o,r,u),E&2048&&Au(9,o);break;case 1:Ja(i,o,r,u);break;case 3:Ja(i,o,r,u),E&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&nu(i)));break;case 12:if(E&2048){Ja(i,o,r,u),i=o.stateNode;try{var A=o.memoizedProps,b=A.id,M=A.onPostCommit;typeof M=="function"&&M(b,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(z){kt(o,o.return,z)}}else Ja(i,o,r,u);break;case 13:Ja(i,o,r,u);break;case 23:break;case 22:A=o.stateNode,b=o.alternate,o.memoizedState!==null?A._visibility&2?Ja(i,o,r,u):Tu(i,o):A._visibility&2?Ja(i,o,r,u):(A._visibility|=2,Mr(i,o,r,u,(o.subtreeFlags&10256)!==0)),E&2048&&yA(b,o);break;case 24:Ja(i,o,r,u),E&2048&&vA(o.alternate,o);break;default:Ja(i,o,r,u)}}function Mr(i,o,r,u,E){for(E=E&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var A=i,b=o,M=r,z=u,ae=b.flags;switch(b.tag){case 0:case 11:case 15:Mr(A,b,M,z,E),Au(8,b);break;case 23:break;case 22:var Re=b.stateNode;b.memoizedState!==null?Re._visibility&2?Mr(A,b,M,z,E):Tu(A,b):(Re._visibility|=2,Mr(A,b,M,z,E)),E&&ae&2048&&yA(b.alternate,b);break;case 24:Mr(A,b,M,z,E),E&&ae&2048&&vA(b.alternate,b);break;default:Mr(A,b,M,z,E)}o=o.sibling}}function Tu(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var r=i,u=o,E=u.flags;switch(u.tag){case 22:Tu(r,u),E&2048&&yA(u.alternate,u);break;case 24:Tu(r,u),E&2048&&vA(u.alternate,u);break;default:Tu(r,u)}o=o.sibling}}var Su=8192;function Lr(i){if(i.subtreeFlags&Su)for(i=i.child;i!==null;)ap(i),i=i.sibling}function ap(i){switch(i.tag){case 26:Lr(i),i.flags&Su&&i.memoizedState!==null&&qL(xa,i.memoizedState,i.memoizedProps);break;case 5:Lr(i);break;case 3:case 4:var o=xa;xa=Hh(i.stateNode.containerInfo),Lr(i),xa=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=Su,Su=16777216,Lr(i),Su=o):Lr(i));break;default:Lr(i)}}function op(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Iu(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];Bn=u,sp(u,i)}op(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)lp(i),i=i.sibling}function lp(i){switch(i.tag){case 0:case 11:case 15:Iu(i),i.flags&2048&&ol(9,i,i.return);break;case 3:Iu(i);break;case 12:Iu(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,gh(i)):Iu(i);break;default:Iu(i)}}function gh(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];Bn=u,sp(u,i)}op(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:ol(8,o,o.return),gh(o);break;case 22:r=o.stateNode,r._visibility&2&&(r._visibility&=-3,gh(o));break;default:gh(o)}i=i.sibling}}function sp(i,o){for(;Bn!==null;){var r=Bn;switch(r.tag){case 0:case 11:case 15:ol(8,r,o);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:nu(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,Bn=u;else e:for(r=i;Bn!==null;){u=Bn;var E=u.sibling,A=u.return;if(Qg(u),u===r){Bn=null;break e}if(E!==null){E.return=A,Bn=E;break e}Bn=A}}}var dL={getCacheForType:function(i){var o=ri(Mn),r=o.data.get(i);return r===void 0&&(r=i(),o.data.set(i,r)),r}},hL=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Bt=null,rt=null,Et=0,Ct=0,Zi=null,rl=!1,xr=!1,MA=!1,xo=0,on=0,cl=0,Es=0,LA=0,Ea=0,Hr=0,_u=null,Ui=null,xA=!1,HA=0,ph=1/0,Nh=null,ul=null,qn=0,dl=null,kr=null,Ur=0,kA=0,UA=null,rp=null,gu=0,wA=null;function $i(){if((Nt&2)!==0&&Et!==0)return Et&-Et;if(j.T!==null){var i=pr;return i!==0?i:YA()}return NI()}function cp(){Ea===0&&(Ea=(Et&536870912)===0||_t?II():536870912);var i=fa.current;return i!==null&&(i.flags|=32),Ea}function Qi(i,o,r){(i===Bt&&(Ct===2||Ct===9)||i.cancelPendingCommit!==null)&&(wr(i,0),hl(i,Et,Ea,!1)),Bc(i,r),((Nt&2)===0||i!==Bt)&&(i===Bt&&((Nt&2)===0&&(Es|=r),on===4&&hl(i,Et,Ea,!1)),eo(i))}function up(i,o,r){if((Nt&6)!==0)throw Error(a(327));var u=!r&&(o&124)===0&&(o&i.expiredLanes)===0||Gc(i,o),E=u?mL(i,o):BA(i,o,!0),A=u;do{if(E===0){xr&&!u&&hl(i,o,0,!1);break}else{if(r=i.current.alternate,A&&!fL(r)){E=BA(i,o,!1),A=!1;continue}if(E===2){if(A=o,i.errorRecoveryDisabledLanes&A)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){o=b;e:{var M=i;E=_u;var z=M.current.memoizedState.isDehydrated;if(z&&(wr(M,b).flags|=256),b=BA(M,b,!1),b!==2){if(MA&&!z){M.errorRecoveryDisabledLanes|=A,Es|=A,E=4;break e}A=Ui,Ui=E,A!==null&&(Ui===null?Ui=A:Ui.push.apply(Ui,A))}E=b}if(A=!1,E!==2)continue}}if(E===1){wr(i,0),hl(i,o,0,!0);break}e:{switch(u=i,A=E,A){case 0:case 1:throw Error(a(345));case 4:if((o&4194048)!==o)break;case 6:hl(u,o,Ea,!rl);break e;case 2:Ui=null;break;case 3:case 5:break;default:throw Error(a(329))}if((o&62914560)===o&&(E=HA+300-ye(),10<E)){if(hl(u,o,Ea,!rl),kd(u,0,!0)!==0)break e;u.timeoutHandle=Gp(dp.bind(null,u,r,Ui,Nh,xA,o,Ea,Es,Hr,rl,A,2,-0,0),E);break e}dp(u,r,Ui,Nh,xA,o,Ea,Es,Hr,rl,A,0,-0,0)}}break}while(!0);eo(i)}function dp(i,o,r,u,E,A,b,M,z,ae,Re,Se,ce,de){if(i.timeoutHandle=-1,Se=o.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(yu={stylesheets:null,count:0,unsuspend:XL},ap(o),Se=ZL(),Se!==null)){i.cancelPendingCommit=Se(Tp.bind(null,i,o,A,r,u,E,b,M,z,Re,1,ce,de)),hl(i,A,b,!ae);return}Tp(i,o,A,r,u,E,b,M,z)}function fL(i){for(var o=i;;){var r=o.tag;if((r===0||r===11||r===15)&&o.flags&16384&&(r=o.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var E=r[u],A=E.getSnapshot;E=E.value;try{if(!Vi(A(),E))return!1}catch{return!1}}if(r=o.child,o.subtreeFlags&16384&&r!==null)r.return=o,o=r;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function hl(i,o,r,u){o&=~LA,o&=~Es,i.suspendedLanes|=o,i.pingedLanes&=~o,u&&(i.warmLanes|=o),u=i.expirationTimes;for(var E=o;0<E;){var A=31-Ki(E),b=1<<A;u[A]=-1,E&=~b}r!==0&&gI(i,r,o)}function Ch(){return(Nt&6)===0?(pu(0),!1):!0}function PA(){if(rt!==null){if(Ct===0)var i=rt.return;else i=rt,Co=rs=null,tA(i),yr=null,fu=0,i=rt;for(;i!==null;)Yg(i.alternate,i),i=i.return;rt=null}}function wr(i,o){var r=i.timeoutHandle;r!==-1&&(i.timeoutHandle=-1,ML(r)),r=i.cancelPendingCommit,r!==null&&(i.cancelPendingCommit=null,r()),PA(),Bt=i,rt=r=go(i.current,null),Et=o,Ct=0,Zi=null,rl=!1,xr=Gc(i,o),MA=!1,Hr=Ea=LA=Es=cl=on=0,Ui=_u=null,xA=!1,(o&8)!==0&&(o|=o&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=o;0<u;){var E=31-Ki(u),A=1<<E;o|=i[E],u&=~A}return xo=o,Wd(),r}function hp(i,o){nt=null,j.H=hh,o===au||o===nh?(o=y_(),Ct=3):o===b_?(o=y_(),Ct=4):Ct=o===vg?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Zi=o,rt===null&&(on=1,Rh(i,ca(o,i.current)))}function fp(){var i=j.H;return j.H=hh,i===null?hh:i}function Ep(){var i=j.A;return j.A=dL,i}function GA(){on=4,rl||(Et&4194048)!==Et&&fa.current!==null||(xr=!0),(cl&134217727)===0&&(Es&134217727)===0||Bt===null||hl(Bt,Et,Ea,!1)}function BA(i,o,r){var u=Nt;Nt|=2;var E=fp(),A=Ep();(Bt!==i||Et!==o)&&(Nh=null,wr(i,o)),o=!1;var b=on;e:do try{if(Ct!==0&&rt!==null){var M=rt,z=Zi;switch(Ct){case 8:PA(),b=6;break e;case 3:case 2:case 9:case 6:fa.current===null&&(o=!0);var ae=Ct;if(Ct=0,Zi=null,Pr(i,M,z,ae),r&&xr){b=0;break e}break;default:ae=Ct,Ct=0,Zi=null,Pr(i,M,z,ae)}}EL(),b=on;break}catch(Re){hp(i,Re)}while(!0);return o&&i.shellSuspendCounter++,Co=rs=null,Nt=u,j.H=E,j.A=A,rt===null&&(Bt=null,Et=0,Wd()),b}function EL(){for(;rt!==null;)mp(rt)}function mL(i,o){var r=Nt;Nt|=2;var u=fp(),E=Ep();Bt!==i||Et!==o?(Nh=null,ph=ye()+500,wr(i,o)):xr=Gc(i,o);e:do try{if(Ct!==0&&rt!==null){o=rt;var A=Zi;t:switch(Ct){case 1:Ct=0,Zi=null,Pr(i,o,A,1);break;case 2:case 9:if(O_(A)){Ct=0,Zi=null,Ap(o);break}o=function(){Ct!==2&&Ct!==9||Bt!==i||(Ct=7),eo(i)},A.then(o,o);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:O_(A)?(Ct=0,Zi=null,Ap(o)):(Ct=0,Zi=null,Pr(i,o,A,7));break;case 5:var b=null;switch(rt.tag){case 26:b=rt.memoizedState;case 5:case 27:var M=rt;if(!b||$p(b)){Ct=0,Zi=null;var z=M.sibling;if(z!==null)rt=z;else{var ae=M.return;ae!==null?(rt=ae,bh(ae)):rt=null}break t}}Ct=0,Zi=null,Pr(i,o,A,5);break;case 6:Ct=0,Zi=null,Pr(i,o,A,6);break;case 8:PA(),on=6;break e;default:throw Error(a(462))}}AL();break}catch(Re){hp(i,Re)}while(!0);return Co=rs=null,j.H=u,j.A=E,Nt=r,rt!==null?0:(Bt=null,Et=0,Wd(),on)}function AL(){for(;rt!==null&&!Ie();)mp(rt)}function mp(i){var o=jg(i.alternate,i,xo);i.memoizedProps=i.pendingProps,o===null?bh(i):rt=o}function Ap(i){var o=i,r=o.alternate;switch(o.tag){case 15:case 0:o=Ug(r,o,o.pendingProps,o.type,void 0,Et);break;case 11:o=Ug(r,o,o.pendingProps,o.type.render,o.ref,Et);break;case 5:tA(o);default:Yg(r,o),o=rt=R_(o,xo),o=jg(r,o,xo)}i.memoizedProps=i.pendingProps,o===null?bh(i):rt=o}function Pr(i,o,r,u){Co=rs=null,tA(o),yr=null,fu=0;var E=o.return;try{if(oL(i,E,o,r,Et)){on=1,Rh(i,ca(r,i.current)),rt=null;return}}catch(A){if(E!==null)throw rt=E,A;on=1,Rh(i,ca(r,i.current)),rt=null;return}o.flags&32768?(_t||u===1?i=!0:xr||(Et&536870912)!==0?i=!1:(rl=i=!0,(u===2||u===9||u===3||u===6)&&(u=fa.current,u!==null&&u.tag===13&&(u.flags|=16384))),Rp(o,i)):bh(o)}function bh(i){var o=i;do{if((o.flags&32768)!==0){Rp(o,rl);return}i=o.return;var r=sL(o.alternate,o,xo);if(r!==null){rt=r;return}if(o=o.sibling,o!==null){rt=o;return}rt=o=i}while(o!==null);on===0&&(on=5)}function Rp(i,o){do{var r=rL(i.alternate,i);if(r!==null){r.flags&=32767,rt=r;return}if(r=i.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!o&&(i=i.sibling,i!==null)){rt=i;return}rt=i=r}while(i!==null);on=6,rt=null}function Tp(i,o,r,u,E,A,b,M,z){i.cancelPendingCommit=null;do Oh();while(qn!==0);if((Nt&6)!==0)throw Error(a(327));if(o!==null){if(o===i.current)throw Error(a(177));if(A=o.lanes|o.childLanes,A|=vm,Xv(i,r,A,b,M,z),i===Bt&&(rt=Bt=null,Et=0),kr=o,dl=i,Ur=r,kA=A,UA=E,rp=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,IL(nn,function(){return pp(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=j.T,j.T=null,E=G.p,G.p=2,b=Nt,Nt|=4;try{cL(i,o,r)}finally{Nt=b,G.p=E,j.T=u}}qn=1,Sp(),Ip(),_p()}}function Sp(){if(qn===1){qn=0;var i=dl,o=kr,r=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||r){r=j.T,j.T=null;var u=G.p;G.p=2;var E=Nt;Nt|=4;try{tp(o,i);var A=QA,b=s_(i.containerInfo),M=A.focusedElem,z=A.selectionRange;if(b!==M&&M&&M.ownerDocument&&l_(M.ownerDocument.documentElement,M)){if(z!==null&&Cm(M)){var ae=z.start,Re=z.end;if(Re===void 0&&(Re=ae),"selectionStart"in M)M.selectionStart=ae,M.selectionEnd=Math.min(Re,M.value.length);else{var Se=M.ownerDocument||document,ce=Se&&Se.defaultView||window;if(ce.getSelection){var de=ce.getSelection(),Ke=M.textContent.length,je=Math.min(z.start,Ke),Mt=z.end===void 0?je:Math.min(z.end,Ke);!de.extend&&je>Mt&&(b=Mt,Mt=je,je=b);var $=o_(M,je),V=o_(M,Mt);if($&&V&&(de.rangeCount!==1||de.anchorNode!==$.node||de.anchorOffset!==$.offset||de.focusNode!==V.node||de.focusOffset!==V.offset)){var ee=Se.createRange();ee.setStart($.node,$.offset),de.removeAllRanges(),je>Mt?(de.addRange(ee),de.extend(V.node,V.offset)):(ee.setEnd(V.node,V.offset),de.addRange(ee))}}}}for(Se=[],de=M;de=de.parentNode;)de.nodeType===1&&Se.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<Se.length;M++){var Te=Se[M];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Gh=!!$A,QA=$A=null}finally{Nt=E,G.p=u,j.T=r}}i.current=o,qn=2}}function Ip(){if(qn===2){qn=0;var i=dl,o=kr,r=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||r){r=j.T,j.T=null;var u=G.p;G.p=2;var E=Nt;Nt|=4;try{$g(i,o.alternate,o)}finally{Nt=E,G.p=u,j.T=r}}qn=3}}function _p(){if(qn===4||qn===3){qn=0,be();var i=dl,o=kr,r=Ur,u=rp;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?qn=5:(qn=0,kr=dl=null,gp(i,i.pendingLanes));var E=i.pendingLanes;if(E===0&&(ul=null),am(r),o=o.stateNode,Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(Pc,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=j.T,E=G.p,G.p=2,j.T=null;try{for(var A=i.onRecoverableError,b=0;b<u.length;b++){var M=u[b];A(M.value,{componentStack:M.stack})}}finally{j.T=o,G.p=E}}(Ur&3)!==0&&Oh(),eo(i),E=i.pendingLanes,(r&4194090)!==0&&(E&42)!==0?i===wA?gu++:(gu=0,wA=i):gu=0,pu(0)}}function gp(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,nu(o)))}function Oh(i){return Sp(),Ip(),_p(),pp()}function pp(){if(qn!==5)return!1;var i=dl,o=kA;kA=0;var r=am(Ur),u=j.T,E=G.p;try{G.p=32>r?32:r,j.T=null,r=UA,UA=null;var A=dl,b=Ur;if(qn=0,kr=dl=null,Ur=0,(Nt&6)!==0)throw Error(a(331));var M=Nt;if(Nt|=4,lp(A.current),ip(A,A.current,b,r),Nt=M,pu(0,!1),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(Pc,A)}catch{}return!0}finally{G.p=E,j.T=u,gp(i,o)}}function Np(i,o,r){o=ca(r,o),o=mA(i.stateNode,o,2),i=tl(i,o,2),i!==null&&(Bc(i,2),eo(i))}function kt(i,o,r){if(i.tag===3)Np(i,i,r);else for(;o!==null;){if(o.tag===3){Np(o,i,r);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ul===null||!ul.has(u))){i=ca(r,i),r=Dg(2),u=tl(o,r,2),u!==null&&(yg(r,u,o,i),Bc(u,2),eo(u));break}}o=o.return}}function FA(i,o,r){var u=i.pingCache;if(u===null){u=i.pingCache=new hL;var E=new Set;u.set(o,E)}else E=u.get(o),E===void 0&&(E=new Set,u.set(o,E));E.has(r)||(MA=!0,E.add(r),i=RL.bind(null,i,o,r),o.then(i,i))}function RL(i,o,r){var u=i.pingCache;u!==null&&u.delete(o),i.pingedLanes|=i.suspendedLanes&r,i.warmLanes&=~r,Bt===i&&(Et&r)===r&&(on===4||on===3&&(Et&62914560)===Et&&300>ye()-HA?(Nt&2)===0&&wr(i,0):LA|=r,Hr===Et&&(Hr=0)),eo(i)}function Cp(i,o){o===0&&(o=_I()),i=Sr(i,o),i!==null&&(Bc(i,o),eo(i))}function TL(i){var o=i.memoizedState,r=0;o!==null&&(r=o.retryLane),Cp(i,r)}function SL(i,o){var r=0;switch(i.tag){case 13:var u=i.stateNode,E=i.memoizedState;E!==null&&(r=E.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(o),Cp(i,r)}function IL(i,o){return le(i,o)}var Dh=null,Gr=null,jA=!1,yh=!1,zA=!1,ms=0;function eo(i){i!==Gr&&i.next===null&&(Gr===null?Dh=Gr=i:Gr=Gr.next=i),yh=!0,jA||(jA=!0,gL())}function pu(i,o){if(!zA&&yh){zA=!0;do for(var r=!1,u=Dh;u!==null;){if(i!==0){var E=u.pendingLanes;if(E===0)var A=0;else{var b=u.suspendedLanes,M=u.pingedLanes;A=(1<<31-Ki(42|i)+1)-1,A&=E&~(b&~M),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(r=!0,yp(u,A))}else A=Et,A=kd(u,u===Bt?A:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(A&3)===0||Gc(u,A)||(r=!0,yp(u,A));u=u.next}while(r);zA=!1}}function _L(){bp()}function bp(){yh=jA=!1;var i=0;ms!==0&&(vL()&&(i=ms),ms=0);for(var o=ye(),r=null,u=Dh;u!==null;){var E=u.next,A=Op(u,o);A===0?(u.next=null,r===null?Dh=E:r.next=E,E===null&&(Gr=r)):(r=u,(i!==0||(A&3)!==0)&&(yh=!0)),u=E}pu(i)}function Op(i,o){for(var r=i.suspendedLanes,u=i.pingedLanes,E=i.expirationTimes,A=i.pendingLanes&-62914561;0<A;){var b=31-Ki(A),M=1<<b,z=E[b];z===-1?((M&r)===0||(M&u)!==0)&&(E[b]=Wv(M,o)):z<=o&&(i.expiredLanes|=M),A&=~M}if(o=Bt,r=Et,r=kd(i,i===o?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,r===0||i===o&&(Ct===2||Ct===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&ge(u),i.callbackNode=null,i.callbackPriority=0;if((r&3)===0||Gc(i,r)){if(o=r&-r,o===i.callbackPriority)return o;switch(u!==null&&ge(u),am(r)){case 2:case 8:r=It;break;case 32:r=nn;break;case 268435456:r=ar;break;default:r=nn}return u=Dp.bind(null,i),r=le(r,u),i.callbackPriority=o,i.callbackNode=r,o}return u!==null&&u!==null&&ge(u),i.callbackPriority=2,i.callbackNode=null,2}function Dp(i,o){if(qn!==0&&qn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var r=i.callbackNode;if(Oh()&&i.callbackNode!==r)return null;var u=Et;return u=kd(i,i===Bt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(up(i,u,o),Op(i,ye()),i.callbackNode!=null&&i.callbackNode===r?Dp.bind(null,i):null)}function yp(i,o){if(Oh())return null;up(i,o,!0)}function gL(){LL(function(){(Nt&6)!==0?le(Je,_L):bp()})}function YA(){return ms===0&&(ms=II()),ms}function vp(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Bd(""+i)}function Mp(i,o){var r=o.ownerDocument.createElement("input");return r.name=o.name,r.value=o.value,i.id&&r.setAttribute("form",i.id),o.parentNode.insertBefore(r,o),i=new FormData(i),r.parentNode.removeChild(r),i}function pL(i,o,r,u,E){if(o==="submit"&&r&&r.stateNode===E){var A=vp((E[Li]||null).action),b=u.submitter;b&&(o=(o=b[Li]||null)?vp(o.formAction):b.getAttribute("formAction"),o!==null&&(A=o,b=null));var M=new Yd("action","action",null,u,E);i.push({event:M,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ms!==0){var z=b?Mp(E,b):new FormData(E);uA(r,{pending:!0,data:z,method:E.method,action:A},null,z)}}else typeof A=="function"&&(M.preventDefault(),z=b?Mp(E,b):new FormData(E),uA(r,{pending:!0,data:z,method:E.method,action:A},A,z))},currentTarget:E}]})}}for(var KA=0;KA<ym.length;KA++){var VA=ym[KA],NL=VA.toLowerCase(),CL=VA[0].toUpperCase()+VA.slice(1);La(NL,"on"+CL)}La(u_,"onAnimationEnd"),La(d_,"onAnimationIteration"),La(h_,"onAnimationStart"),La("dblclick","onDoubleClick"),La("focusin","onFocus"),La("focusout","onBlur"),La(jM,"onTransitionRun"),La(zM,"onTransitionStart"),La(YM,"onTransitionCancel"),La(f_,"onTransitionEnd"),cr("onMouseEnter",["mouseout","mouseover"]),cr("onMouseLeave",["mouseout","mouseover"]),cr("onPointerEnter",["pointerout","pointerover"]),cr("onPointerLeave",["pointerout","pointerover"]),Jl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nu));function Lp(i,o){o=(o&4)!==0;for(var r=0;r<i.length;r++){var u=i[r],E=u.event;u=u.listeners;e:{var A=void 0;if(o)for(var b=u.length-1;0<=b;b--){var M=u[b],z=M.instance,ae=M.currentTarget;if(M=M.listener,z!==A&&E.isPropagationStopped())break e;A=M,E.currentTarget=ae;try{A(E)}catch(Re){Ah(Re)}E.currentTarget=null,A=z}else for(b=0;b<u.length;b++){if(M=u[b],z=M.instance,ae=M.currentTarget,M=M.listener,z!==A&&E.isPropagationStopped())break e;A=M,E.currentTarget=ae;try{A(E)}catch(Re){Ah(Re)}E.currentTarget=null,A=z}}}}function ct(i,o){var r=o[om];r===void 0&&(r=o[om]=new Set);var u=i+"__bubble";r.has(u)||(xp(o,i,2,!1),r.add(u))}function WA(i,o,r){var u=0;o&&(u|=4),xp(r,i,u,o)}var vh="_reactListening"+Math.random().toString(36).slice(2);function XA(i){if(!i[vh]){i[vh]=!0,bI.forEach(function(r){r!=="selectionchange"&&(bL.has(r)||WA(r,!1,i),WA(r,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[vh]||(o[vh]=!0,WA("selectionchange",!1,o))}}function xp(i,o,r,u){switch(iN(o)){case 2:var E=JL;break;case 8:E=e1;break;default:E=rR}r=E.bind(null,o,r,i),E=void 0,!Am||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(E=!0),u?E!==void 0?i.addEventListener(o,r,{capture:!0,passive:E}):i.addEventListener(o,r,!0):E!==void 0?i.addEventListener(o,r,{passive:E}):i.addEventListener(o,r,!1)}function qA(i,o,r,u,E){var A=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var M=u.stateNode.containerInfo;if(M===E)break;if(b===4)for(b=u.return;b!==null;){var z=b.tag;if((z===3||z===4)&&b.stateNode.containerInfo===E)return;b=b.return}for(;M!==null;){if(b=lr(M),b===null)return;if(z=b.tag,z===5||z===6||z===26||z===27){u=A=b;continue e}M=M.parentNode}}u=u.return}BI(function(){var ae=A,Re=Em(r),Se=[];e:{var ce=E_.get(i);if(ce!==void 0){var de=Yd,Ke=i;switch(i){case"keypress":if(jd(r)===0)break e;case"keydown":case"keyup":de=IM;break;case"focusin":Ke="focus",de=Im;break;case"focusout":Ke="blur",de=Im;break;case"beforeblur":case"afterblur":de=Im;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=zI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=rM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=pM;break;case u_:case d_:case h_:de=dM;break;case f_:de=CM;break;case"scroll":case"scrollend":de=lM;break;case"wheel":de=OM;break;case"copy":case"cut":case"paste":de=fM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=KI;break;case"toggle":case"beforetoggle":de=yM}var je=(o&4)!==0,Mt=!je&&(i==="scroll"||i==="scrollend"),$=je?ce!==null?ce+"Capture":null:ce;je=[];for(var V=ae,ee;V!==null;){var Te=V;if(ee=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ee===null||$===null||(Te=zc(V,$),Te!=null&&je.push(Cu(V,Te,ee))),Mt)break;V=V.return}0<je.length&&(ce=new de(ce,Ke,null,r,Re),Se.push({event:ce,listeners:je}))}}if((o&7)===0){e:{if(ce=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",ce&&r!==fm&&(Ke=r.relatedTarget||r.fromElement)&&(lr(Ke)||Ke[or]))break e;if((de||ce)&&(ce=Re.window===Re?Re:(ce=Re.ownerDocument)?ce.defaultView||ce.parentWindow:window,de?(Ke=r.relatedTarget||r.toElement,de=ae,Ke=Ke?lr(Ke):null,Ke!==null&&(Mt=c(Ke),je=Ke.tag,Ke!==Mt||je!==5&&je!==27&&je!==6)&&(Ke=null)):(de=null,Ke=ae),de!==Ke)){if(je=zI,Te="onMouseLeave",$="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(je=KI,Te="onPointerLeave",$="onPointerEnter",V="pointer"),Mt=de==null?ce:jc(de),ee=Ke==null?ce:jc(Ke),ce=new je(Te,V+"leave",de,r,Re),ce.target=Mt,ce.relatedTarget=ee,Te=null,lr(Re)===ae&&(je=new je($,V+"enter",Ke,r,Re),je.target=ee,je.relatedTarget=Mt,Te=je),Mt=Te,de&&Ke)t:{for(je=de,$=Ke,V=0,ee=je;ee;ee=Br(ee))V++;for(ee=0,Te=$;Te;Te=Br(Te))ee++;for(;0<V-ee;)je=Br(je),V--;for(;0<ee-V;)$=Br($),ee--;for(;V--;){if(je===$||$!==null&&je===$.alternate)break t;je=Br(je),$=Br($)}je=null}else je=null;de!==null&&Hp(Se,ce,de,je,!1),Ke!==null&&Mt!==null&&Hp(Se,Mt,Ke,je,!0)}}e:{if(ce=ae?jc(ae):window,de=ce.nodeName&&ce.nodeName.toLowerCase(),de==="select"||de==="input"&&ce.type==="file")var Le=JI;else if($I(ce))if(e_)Le=GM;else{Le=wM;var at=UM}else de=ce.nodeName,!de||de.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?ae&&hm(ae.elementType)&&(Le=JI):Le=PM;if(Le&&(Le=Le(i,ae))){QI(Se,Le,r,Re);break e}at&&at(i,ce,ae),i==="focusout"&&ae&&ce.type==="number"&&ae.memoizedProps.value!=null&&dm(ce,"number",ce.value)}switch(at=ae?jc(ae):window,i){case"focusin":($I(at)||at.contentEditable==="true")&&(Ar=at,bm=ae,$c=null);break;case"focusout":$c=bm=Ar=null;break;case"mousedown":Om=!0;break;case"contextmenu":case"mouseup":case"dragend":Om=!1,r_(Se,r,Re);break;case"selectionchange":if(FM)break;case"keydown":case"keyup":r_(Se,r,Re)}var Pe;if(gm)e:{switch(i){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else mr?qI(i,r)&&(ze="onCompositionEnd"):i==="keydown"&&r.keyCode===229&&(ze="onCompositionStart");ze&&(VI&&r.locale!=="ko"&&(mr||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&mr&&(Pe=FI()):($o=Re,Rm="value"in $o?$o.value:$o.textContent,mr=!0)),at=Mh(ae,ze),0<at.length&&(ze=new YI(ze,i,null,r,Re),Se.push({event:ze,listeners:at}),Pe?ze.data=Pe:(Pe=ZI(r),Pe!==null&&(ze.data=Pe)))),(Pe=MM?LM(i,r):xM(i,r))&&(ze=Mh(ae,"onBeforeInput"),0<ze.length&&(at=new YI("onBeforeInput","beforeinput",null,r,Re),Se.push({event:at,listeners:ze}),at.data=Pe)),pL(Se,i,ae,r,Re)}Lp(Se,o)})}function Cu(i,o,r){return{instance:i,listener:o,currentTarget:r}}function Mh(i,o){for(var r=o+"Capture",u=[];i!==null;){var E=i,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=zc(i,r),E!=null&&u.unshift(Cu(i,E,A)),E=zc(i,o),E!=null&&u.push(Cu(i,E,A))),i.tag===3)return u;i=i.return}return[]}function Br(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Hp(i,o,r,u,E){for(var A=o._reactName,b=[];r!==null&&r!==u;){var M=r,z=M.alternate,ae=M.stateNode;if(M=M.tag,z!==null&&z===u)break;M!==5&&M!==26&&M!==27||ae===null||(z=ae,E?(ae=zc(r,A),ae!=null&&b.unshift(Cu(r,ae,z))):E||(ae=zc(r,A),ae!=null&&b.push(Cu(r,ae,z)))),r=r.return}b.length!==0&&i.push({event:o,listeners:b})}var OL=/\r\n?/g,DL=/\u0000|\uFFFD/g;function kp(i){return(typeof i=="string"?i:""+i).replace(OL,`
`).replace(DL,"")}function Up(i,o){return o=kp(o),kp(i)===o}function Lh(){}function vt(i,o,r,u,E,A){switch(r){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||hr(i,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&hr(i,""+u);break;case"className":wd(i,"class",u);break;case"tabIndex":wd(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":wd(i,r,u);break;case"style":PI(i,u,A);break;case"data":if(o!=="object"){wd(i,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||r!=="href")){i.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=Bd(""+u),i.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(r==="formAction"?(o!=="input"&&vt(i,o,"name",E.name,E,null),vt(i,o,"formEncType",E.formEncType,E,null),vt(i,o,"formMethod",E.formMethod,E,null),vt(i,o,"formTarget",E.formTarget,E,null)):(vt(i,o,"encType",E.encType,E,null),vt(i,o,"method",E.method,E,null),vt(i,o,"target",E.target,E,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=Bd(""+u),i.setAttribute(r,u);break;case"onClick":u!=null&&(i.onclick=Lh);break;case"onScroll":u!=null&&ct("scroll",i);break;case"onScrollEnd":u!=null&&ct("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(r=u.__html,r!=null){if(E.children!=null)throw Error(a(60));i.innerHTML=r}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}r=Bd(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""+u):i.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""):i.removeAttribute(r);break;case"capture":case"download":u===!0?i.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,u):i.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(r,u):i.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(r):i.setAttribute(r,u);break;case"popover":ct("beforetoggle",i),ct("toggle",i),Ud(i,"popover",u);break;case"xlinkActuate":Io(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Io(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Io(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Io(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Io(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Io(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Io(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Io(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Io(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ud(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=aM.get(r)||r,Ud(i,r,u))}}function ZA(i,o,r,u,E,A){switch(r){case"style":PI(i,u,A);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(r=u.__html,r!=null){if(E.children!=null)throw Error(a(60));i.innerHTML=r}}break;case"children":typeof u=="string"?hr(i,u):(typeof u=="number"||typeof u=="bigint")&&hr(i,""+u);break;case"onScroll":u!=null&&ct("scroll",i);break;case"onScrollEnd":u!=null&&ct("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Lh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!OI.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(E=r.endsWith("Capture"),o=r.slice(2,E?r.length-7:void 0),A=i[Li]||null,A=A!=null?A[r]:null,typeof A=="function"&&i.removeEventListener(o,A,E),typeof u=="function")){typeof A!="function"&&A!==null&&(r in i?i[r]=null:i.hasAttribute(r)&&i.removeAttribute(r)),i.addEventListener(o,u,E);break e}r in i?i[r]=u:u===!0?i.setAttribute(r,""):Ud(i,r,u)}}}function Zn(i,o,r){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",i),ct("load",i);var u=!1,E=!1,A;for(A in r)if(r.hasOwnProperty(A)){var b=r[A];if(b!=null)switch(A){case"src":u=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,o));default:vt(i,o,A,b,r,null)}}E&&vt(i,o,"srcSet",r.srcSet,r,null),u&&vt(i,o,"src",r.src,r,null);return;case"input":ct("invalid",i);var M=A=b=E=null,z=null,ae=null;for(u in r)if(r.hasOwnProperty(u)){var Re=r[u];if(Re!=null)switch(u){case"name":E=Re;break;case"type":b=Re;break;case"checked":z=Re;break;case"defaultChecked":ae=Re;break;case"value":A=Re;break;case"defaultValue":M=Re;break;case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(a(137,o));break;default:vt(i,o,u,Re,r,null)}}HI(i,A,M,z,ae,b,E,!1),Pd(i);return;case"select":ct("invalid",i),u=b=A=null;for(E in r)if(r.hasOwnProperty(E)&&(M=r[E],M!=null))switch(E){case"value":A=M;break;case"defaultValue":b=M;break;case"multiple":u=M;default:vt(i,o,E,M,r,null)}o=A,r=b,i.multiple=!!u,o!=null?dr(i,!!u,o,!1):r!=null&&dr(i,!!u,r,!0);return;case"textarea":ct("invalid",i),A=E=u=null;for(b in r)if(r.hasOwnProperty(b)&&(M=r[b],M!=null))switch(b){case"value":u=M;break;case"defaultValue":E=M;break;case"children":A=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(a(91));break;default:vt(i,o,b,M,r,null)}UI(i,u,E,A),Pd(i);return;case"option":for(z in r)if(r.hasOwnProperty(z)&&(u=r[z],u!=null))switch(z){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:vt(i,o,z,u,r,null)}return;case"dialog":ct("beforetoggle",i),ct("toggle",i),ct("cancel",i),ct("close",i);break;case"iframe":case"object":ct("load",i);break;case"video":case"audio":for(u=0;u<Nu.length;u++)ct(Nu[u],i);break;case"image":ct("error",i),ct("load",i);break;case"details":ct("toggle",i);break;case"embed":case"source":case"link":ct("error",i),ct("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in r)if(r.hasOwnProperty(ae)&&(u=r[ae],u!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,o));default:vt(i,o,ae,u,r,null)}return;default:if(hm(o)){for(Re in r)r.hasOwnProperty(Re)&&(u=r[Re],u!==void 0&&ZA(i,o,Re,u,r,void 0));return}}for(M in r)r.hasOwnProperty(M)&&(u=r[M],u!=null&&vt(i,o,M,u,r,null))}function yL(i,o,r,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,b=null,M=null,z=null,ae=null,Re=null;for(de in r){var Se=r[de];if(r.hasOwnProperty(de)&&Se!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":z=Se;default:u.hasOwnProperty(de)||vt(i,o,de,null,u,Se)}}for(var ce in u){var de=u[ce];if(Se=r[ce],u.hasOwnProperty(ce)&&(de!=null||Se!=null))switch(ce){case"type":A=de;break;case"name":E=de;break;case"checked":ae=de;break;case"defaultChecked":Re=de;break;case"value":b=de;break;case"defaultValue":M=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(a(137,o));break;default:de!==Se&&vt(i,o,ce,de,u,Se)}}um(i,b,M,z,ae,Re,A,E);return;case"select":de=b=M=ce=null;for(A in r)if(z=r[A],r.hasOwnProperty(A)&&z!=null)switch(A){case"value":break;case"multiple":de=z;default:u.hasOwnProperty(A)||vt(i,o,A,null,u,z)}for(E in u)if(A=u[E],z=r[E],u.hasOwnProperty(E)&&(A!=null||z!=null))switch(E){case"value":ce=A;break;case"defaultValue":M=A;break;case"multiple":b=A;default:A!==z&&vt(i,o,E,A,u,z)}o=M,r=b,u=de,ce!=null?dr(i,!!r,ce,!1):!!u!=!!r&&(o!=null?dr(i,!!r,o,!0):dr(i,!!r,r?[]:"",!1));return;case"textarea":de=ce=null;for(M in r)if(E=r[M],r.hasOwnProperty(M)&&E!=null&&!u.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:vt(i,o,M,null,u,E)}for(b in u)if(E=u[b],A=r[b],u.hasOwnProperty(b)&&(E!=null||A!=null))switch(b){case"value":ce=E;break;case"defaultValue":de=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:E!==A&&vt(i,o,b,E,u,A)}kI(i,ce,de);return;case"option":for(var Ke in r)if(ce=r[Ke],r.hasOwnProperty(Ke)&&ce!=null&&!u.hasOwnProperty(Ke))switch(Ke){case"selected":i.selected=!1;break;default:vt(i,o,Ke,null,u,ce)}for(z in u)if(ce=u[z],de=r[z],u.hasOwnProperty(z)&&ce!==de&&(ce!=null||de!=null))switch(z){case"selected":i.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:vt(i,o,z,ce,u,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in r)ce=r[je],r.hasOwnProperty(je)&&ce!=null&&!u.hasOwnProperty(je)&&vt(i,o,je,null,u,ce);for(ae in u)if(ce=u[ae],de=r[ae],u.hasOwnProperty(ae)&&ce!==de&&(ce!=null||de!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(a(137,o));break;default:vt(i,o,ae,ce,u,de)}return;default:if(hm(o)){for(var Mt in r)ce=r[Mt],r.hasOwnProperty(Mt)&&ce!==void 0&&!u.hasOwnProperty(Mt)&&ZA(i,o,Mt,void 0,u,ce);for(Re in u)ce=u[Re],de=r[Re],!u.hasOwnProperty(Re)||ce===de||ce===void 0&&de===void 0||ZA(i,o,Re,ce,u,de);return}}for(var $ in r)ce=r[$],r.hasOwnProperty($)&&ce!=null&&!u.hasOwnProperty($)&&vt(i,o,$,null,u,ce);for(Se in u)ce=u[Se],de=r[Se],!u.hasOwnProperty(Se)||ce===de||ce==null&&de==null||vt(i,o,Se,ce,u,de)}var $A=null,QA=null;function xh(i){return i.nodeType===9?i:i.ownerDocument}function wp(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pp(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function JA(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var eR=null;function vL(){var i=window.event;return i&&i.type==="popstate"?i===eR?!1:(eR=i,!0):(eR=null,!1)}var Gp=typeof setTimeout=="function"?setTimeout:void 0,ML=typeof clearTimeout=="function"?clearTimeout:void 0,Bp=typeof Promise=="function"?Promise:void 0,LL=typeof queueMicrotask=="function"?queueMicrotask:typeof Bp<"u"?function(i){return Bp.resolve(null).then(i).catch(xL)}:Gp;function xL(i){setTimeout(function(){throw i})}function fl(i){return i==="head"}function Fp(i,o){var r=o,u=0,E=0;do{var A=r.nextSibling;if(i.removeChild(r),A&&A.nodeType===8)if(r=A.data,r==="/$"){if(0<u&&8>u){r=u;var b=i.ownerDocument;if(r&1&&bu(b.documentElement),r&2&&bu(b.body),r&4)for(r=b.head,bu(r),b=r.firstChild;b;){var M=b.nextSibling,z=b.nodeName;b[Fc]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&b.rel.toLowerCase()==="stylesheet"||r.removeChild(b),b=M}}if(E===0){i.removeChild(A),Hu(o);return}E--}else r==="$"||r==="$?"||r==="$!"?E++:u=r.charCodeAt(0)-48;else u=0;r=A}while(r);Hu(o)}function tR(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var r=o;switch(o=o.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":tR(r),lm(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}i.removeChild(r)}}function HL(i,o,r,u){for(;i.nodeType===1;){var E=r;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Fc])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(A=i.getAttribute("rel"),A==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(A!==E.rel||i.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||i.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||i.getAttribute("title")!==(E.title==null?null:E.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(A=i.getAttribute("src"),(A!==(E.src==null?null:E.src)||i.getAttribute("type")!==(E.type==null?null:E.type)||i.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&i.getAttribute("name")===A)return i}else return i;if(i=Ha(i.nextSibling),i===null)break}return null}function kL(i,o,r){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Ha(i.nextSibling),i===null))return null;return i}function nR(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function UL(i,o){var r=i.ownerDocument;if(i.data!=="$?"||r.readyState==="complete")o();else{var u=function(){o(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Ha(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var iR=null;function jp(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var r=i.data;if(r==="$"||r==="$!"||r==="$?"){if(o===0)return i;o--}else r==="/$"&&o++}i=i.previousSibling}return null}function zp(i,o,r){switch(o=xh(r),i){case"html":if(i=o.documentElement,!i)throw Error(a(452));return i;case"head":if(i=o.head,!i)throw Error(a(453));return i;case"body":if(i=o.body,!i)throw Error(a(454));return i;default:throw Error(a(451))}}function bu(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);lm(i)}var ma=new Map,Yp=new Set;function Hh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ho=G.d;G.d={f:wL,r:PL,D:GL,C:BL,L:FL,m:jL,X:YL,S:zL,M:KL};function wL(){var i=Ho.f(),o=Ch();return i||o}function PL(i){var o=sr(i);o!==null&&o.tag===5&&o.type==="form"?ug(o):Ho.r(i)}var Fr=typeof document>"u"?null:document;function Kp(i,o,r){var u=Fr;if(u&&typeof o=="string"&&o){var E=ra(o);E='link[rel="'+i+'"][href="'+E+'"]',typeof r=="string"&&(E+='[crossorigin="'+r+'"]'),Yp.has(E)||(Yp.add(E),i={rel:i,crossOrigin:r,href:o},u.querySelector(E)===null&&(o=u.createElement("link"),Zn(o,"link",i),Pn(o),u.head.appendChild(o)))}}function GL(i){Ho.D(i),Kp("dns-prefetch",i,null)}function BL(i,o){Ho.C(i,o),Kp("preconnect",i,o)}function FL(i,o,r){Ho.L(i,o,r);var u=Fr;if(u&&i&&o){var E='link[rel="preload"][as="'+ra(o)+'"]';o==="image"&&r&&r.imageSrcSet?(E+='[imagesrcset="'+ra(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(E+='[imagesizes="'+ra(r.imageSizes)+'"]')):E+='[href="'+ra(i)+'"]';var A=E;switch(o){case"style":A=jr(i);break;case"script":A=zr(i)}ma.has(A)||(i=R({rel:"preload",href:o==="image"&&r&&r.imageSrcSet?void 0:i,as:o},r),ma.set(A,i),u.querySelector(E)!==null||o==="style"&&u.querySelector(Ou(A))||o==="script"&&u.querySelector(Du(A))||(o=u.createElement("link"),Zn(o,"link",i),Pn(o),u.head.appendChild(o)))}}function jL(i,o){Ho.m(i,o);var r=Fr;if(r&&i){var u=o&&typeof o.as=="string"?o.as:"script",E='link[rel="modulepreload"][as="'+ra(u)+'"][href="'+ra(i)+'"]',A=E;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=zr(i)}if(!ma.has(A)&&(i=R({rel:"modulepreload",href:i},o),ma.set(A,i),r.querySelector(E)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Du(A)))return}u=r.createElement("link"),Zn(u,"link",i),Pn(u),r.head.appendChild(u)}}}function zL(i,o,r){Ho.S(i,o,r);var u=Fr;if(u&&i){var E=rr(u).hoistableStyles,A=jr(i);o=o||"default";var b=E.get(A);if(!b){var M={loading:0,preload:null};if(b=u.querySelector(Ou(A)))M.loading=5;else{i=R({rel:"stylesheet",href:i,"data-precedence":o},r),(r=ma.get(A))&&aR(i,r);var z=b=u.createElement("link");Pn(z),Zn(z,"link",i),z._p=new Promise(function(ae,Re){z.onload=ae,z.onerror=Re}),z.addEventListener("load",function(){M.loading|=1}),z.addEventListener("error",function(){M.loading|=2}),M.loading|=4,kh(b,o,u)}b={type:"stylesheet",instance:b,count:1,state:M},E.set(A,b)}}}function YL(i,o){Ho.X(i,o);var r=Fr;if(r&&i){var u=rr(r).hoistableScripts,E=zr(i),A=u.get(E);A||(A=r.querySelector(Du(E)),A||(i=R({src:i,async:!0},o),(o=ma.get(E))&&oR(i,o),A=r.createElement("script"),Pn(A),Zn(A,"link",i),r.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},u.set(E,A))}}function KL(i,o){Ho.M(i,o);var r=Fr;if(r&&i){var u=rr(r).hoistableScripts,E=zr(i),A=u.get(E);A||(A=r.querySelector(Du(E)),A||(i=R({src:i,async:!0,type:"module"},o),(o=ma.get(E))&&oR(i,o),A=r.createElement("script"),Pn(A),Zn(A,"link",i),r.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},u.set(E,A))}}function Vp(i,o,r,u){var E=(E=oe.current)?Hh(E):null;if(!E)throw Error(a(446));switch(i){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(o=jr(r.href),r=rr(E).hoistableStyles,u=r.get(o),u||(u={type:"style",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){i=jr(r.href);var A=rr(E).hoistableStyles,b=A.get(i);if(b||(E=E.ownerDocument||E,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(i,b),(A=E.querySelector(Ou(i)))&&!A._p&&(b.instance=A,b.state.loading=5),ma.has(i)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ma.set(i,r),A||VL(E,i,r,b.state))),o&&u===null)throw Error(a(528,""));return b}if(o&&u!==null)throw Error(a(529,""));return null;case"script":return o=r.async,r=r.src,typeof r=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=zr(r),r=rr(E).hoistableScripts,u=r.get(o),u||(u={type:"script",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,i))}}function jr(i){return'href="'+ra(i)+'"'}function Ou(i){return'link[rel="stylesheet"]['+i+"]"}function Wp(i){return R({},i,{"data-precedence":i.precedence,precedence:null})}function VL(i,o,r,u){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=i.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Zn(o,"link",r),Pn(o),i.head.appendChild(o))}function zr(i){return'[src="'+ra(i)+'"]'}function Du(i){return"script[async]"+i}function Xp(i,o,r){if(o.count++,o.instance===null)switch(o.type){case"style":var u=i.querySelector('style[data-href~="'+ra(r.href)+'"]');if(u)return o.instance=u,Pn(u),u;var E=R({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Pn(u),Zn(u,"style",E),kh(u,r.precedence,i),o.instance=u;case"stylesheet":E=jr(r.href);var A=i.querySelector(Ou(E));if(A)return o.state.loading|=4,o.instance=A,Pn(A),A;u=Wp(r),(E=ma.get(E))&&aR(u,E),A=(i.ownerDocument||i).createElement("link"),Pn(A);var b=A;return b._p=new Promise(function(M,z){b.onload=M,b.onerror=z}),Zn(A,"link",u),o.state.loading|=4,kh(A,r.precedence,i),o.instance=A;case"script":return A=zr(r.src),(E=i.querySelector(Du(A)))?(o.instance=E,Pn(E),E):(u=r,(E=ma.get(A))&&(u=R({},r),oR(u,E)),i=i.ownerDocument||i,E=i.createElement("script"),Pn(E),Zn(E,"link",u),i.head.appendChild(E),o.instance=E);case"void":return null;default:throw Error(a(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,kh(u,r.precedence,i));return o.instance}function kh(i,o,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=u.length?u[u.length-1]:null,A=E,b=0;b<u.length;b++){var M=u[b];if(M.dataset.precedence===o)A=M;else if(A!==E)break}A?A.parentNode.insertBefore(i,A.nextSibling):(o=r.nodeType===9?r.head:r,o.insertBefore(i,o.firstChild))}function aR(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function oR(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Uh=null;function qp(i,o,r){if(Uh===null){var u=new Map,E=Uh=new Map;E.set(r,u)}else E=Uh,u=E.get(r),u||(u=new Map,E.set(r,u));if(u.has(i))return u;for(u.set(i,null),r=r.getElementsByTagName(i),E=0;E<r.length;E++){var A=r[E];if(!(A[Fc]||A[si]||i==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var b=A.getAttribute(o)||"";b=i+b;var M=u.get(b);M?M.push(A):u.set(b,[A])}}return u}function Zp(i,o,r){i=i.ownerDocument||i,i.head.insertBefore(r,o==="title"?i.querySelector("head > title"):null)}function WL(i,o,r){if(r===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function $p(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var yu=null;function XL(){}function qL(i,o,r){if(yu===null)throw Error(a(475));var u=yu;if(o.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var E=jr(r.href),A=i.querySelector(Ou(E));if(A){i=A._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=wh.bind(u),i.then(u,u)),o.state.loading|=4,o.instance=A,Pn(A);return}A=i.ownerDocument||i,r=Wp(r),(E=ma.get(E))&&aR(r,E),A=A.createElement("link"),Pn(A);var b=A;b._p=new Promise(function(M,z){b.onload=M,b.onerror=z}),Zn(A,"link",r),o.instance=A}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(u.count++,o=wh.bind(u),i.addEventListener("load",o),i.addEventListener("error",o))}}function ZL(){if(yu===null)throw Error(a(475));var i=yu;return i.stylesheets&&i.count===0&&lR(i,i.stylesheets),0<i.count?function(o){var r=setTimeout(function(){if(i.stylesheets&&lR(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(r)}}:null}function wh(){if(this.count--,this.count===0){if(this.stylesheets)lR(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ph=null;function lR(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ph=new Map,o.forEach($L,i),Ph=null,wh.call(i))}function $L(i,o){if(!(o.state.loading&4)){var r=Ph.get(i);if(r)var u=r.get(null);else{r=new Map,Ph.set(i,r);for(var E=i.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var b=E[A];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),u=b)}u&&r.set(null,u)}E=o.instance,b=E.getAttribute("data-precedence"),A=r.get(b)||u,A===u&&r.set(null,E),r.set(b,E),this.count++,u=wh.bind(this),E.addEventListener("load",u),E.addEventListener("error",u),A?A.parentNode.insertBefore(E,A.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(E,i.firstChild)),o.state.loading|=4}}var vu={$$typeof:L,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function QL(i,o,r,u,E,A,b,M){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nm(0),this.hiddenUpdates=nm(null),this.identifierPrefix=u,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Qp(i,o,r,u,E,A,b,M,z,ae,Re,Se){return i=new QL(i,o,r,b,M,z,ae,Se),o=1,A===!0&&(o|=24),A=Wi(3,null,null,o),i.current=A,A.stateNode=i,o=Fm(),o.refCount++,i.pooledCache=o,o.refCount++,A.memoizedState={element:u,isDehydrated:r,cache:o},Km(A),i}function Jp(i){return i?(i=Ir,i):Ir}function eN(i,o,r,u,E,A){E=Jp(E),u.context===null?u.context=E:u.pendingContext=E,u=el(o),u.payload={element:r},A=A===void 0?null:A,A!==null&&(u.callback=A),r=tl(i,u,o),r!==null&&(Qi(r,i,o),lu(r,i,o))}function tN(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var r=i.retryLane;i.retryLane=r!==0&&r<o?r:o}}function sR(i,o){tN(i,o),(i=i.alternate)&&tN(i,o)}function nN(i){if(i.tag===13){var o=Sr(i,67108864);o!==null&&Qi(o,i,67108864),sR(i,67108864)}}var Gh=!0;function JL(i,o,r,u){var E=j.T;j.T=null;var A=G.p;try{G.p=2,rR(i,o,r,u)}finally{G.p=A,j.T=E}}function e1(i,o,r,u){var E=j.T;j.T=null;var A=G.p;try{G.p=8,rR(i,o,r,u)}finally{G.p=A,j.T=E}}function rR(i,o,r,u){if(Gh){var E=cR(u);if(E===null)qA(i,o,u,Bh,r),aN(i,u);else if(n1(E,i,o,r,u))u.stopPropagation();else if(aN(i,u),o&4&&-1<t1.indexOf(i)){for(;E!==null;){var A=sr(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var b=Ql(A.pendingLanes);if(b!==0){var M=A;for(M.pendingLanes|=2,M.entangledLanes|=2;b;){var z=1<<31-Ki(b);M.entanglements[1]|=z,b&=~z}eo(A),(Nt&6)===0&&(ph=ye()+500,pu(0))}}break;case 13:M=Sr(A,2),M!==null&&Qi(M,A,2),Ch(),sR(A,2)}if(A=cR(u),A===null&&qA(i,o,u,Bh,r),A===E)break;E=A}E!==null&&u.stopPropagation()}else qA(i,o,u,null,r)}}function cR(i){return i=Em(i),uR(i)}var Bh=null;function uR(i){if(Bh=null,i=lr(i),i!==null){var o=c(i);if(o===null)i=null;else{var r=o.tag;if(r===13){if(i=d(o),i!==null)return i;i=null}else if(r===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Bh=i,null}function iN(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ue()){case Je:return 2;case It:return 8;case nn:case $l:return 32;case ar:return 268435456;default:return 32}default:return 32}}var dR=!1,El=null,ml=null,Al=null,Mu=new Map,Lu=new Map,Rl=[],t1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function aN(i,o){switch(i){case"focusin":case"focusout":El=null;break;case"dragenter":case"dragleave":ml=null;break;case"mouseover":case"mouseout":Al=null;break;case"pointerover":case"pointerout":Mu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lu.delete(o.pointerId)}}function xu(i,o,r,u,E,A){return i===null||i.nativeEvent!==A?(i={blockedOn:o,domEventName:r,eventSystemFlags:u,nativeEvent:A,targetContainers:[E]},o!==null&&(o=sr(o),o!==null&&nN(o)),i):(i.eventSystemFlags|=u,o=i.targetContainers,E!==null&&o.indexOf(E)===-1&&o.push(E),i)}function n1(i,o,r,u,E){switch(o){case"focusin":return El=xu(El,i,o,r,u,E),!0;case"dragenter":return ml=xu(ml,i,o,r,u,E),!0;case"mouseover":return Al=xu(Al,i,o,r,u,E),!0;case"pointerover":var A=E.pointerId;return Mu.set(A,xu(Mu.get(A)||null,i,o,r,u,E)),!0;case"gotpointercapture":return A=E.pointerId,Lu.set(A,xu(Lu.get(A)||null,i,o,r,u,E)),!0}return!1}function oN(i){var o=lr(i.target);if(o!==null){var r=c(o);if(r!==null){if(o=r.tag,o===13){if(o=d(r),o!==null){i.blockedOn=o,qv(i.priority,function(){if(r.tag===13){var u=$i();u=im(u);var E=Sr(r,u);E!==null&&Qi(E,r,u),sR(r,u)}});return}}else if(o===3&&r.stateNode.current.memoizedState.isDehydrated){i.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Fh(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var r=cR(i.nativeEvent);if(r===null){r=i.nativeEvent;var u=new r.constructor(r.type,r);fm=u,r.target.dispatchEvent(u),fm=null}else return o=sr(r),o!==null&&nN(o),i.blockedOn=r,!1;o.shift()}return!0}function lN(i,o,r){Fh(i)&&r.delete(o)}function i1(){dR=!1,El!==null&&Fh(El)&&(El=null),ml!==null&&Fh(ml)&&(ml=null),Al!==null&&Fh(Al)&&(Al=null),Mu.forEach(lN),Lu.forEach(lN)}function jh(i,o){i.blockedOn===o&&(i.blockedOn=null,dR||(dR=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,i1)))}var zh=null;function sN(i){zh!==i&&(zh=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){zh===i&&(zh=null);for(var o=0;o<i.length;o+=3){var r=i[o],u=i[o+1],E=i[o+2];if(typeof u!="function"){if(uR(u||r)===null)continue;break}var A=sr(r);A!==null&&(i.splice(o,3),o-=3,uA(A,{pending:!0,data:E,method:r.method,action:u},u,E))}}))}function Hu(i){function o(z){return jh(z,i)}El!==null&&jh(El,i),ml!==null&&jh(ml,i),Al!==null&&jh(Al,i),Mu.forEach(o),Lu.forEach(o);for(var r=0;r<Rl.length;r++){var u=Rl[r];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Rl.length&&(r=Rl[0],r.blockedOn===null);)oN(r),r.blockedOn===null&&Rl.shift();if(r=(i.ownerDocument||i).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var E=r[u],A=r[u+1],b=E[Li]||null;if(typeof A=="function")b||sN(r);else if(b){var M=null;if(A&&A.hasAttribute("formAction")){if(E=A,b=A[Li]||null)M=b.formAction;else if(uR(E)!==null)continue}else M=b.action;typeof M=="function"?r[u+1]=M:(r.splice(u,3),u-=3),sN(r)}}}function hR(i){this._internalRoot=i}Yh.prototype.render=hR.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(a(409));var r=o.current,u=$i();eN(r,u,i,o,null,null)},Yh.prototype.unmount=hR.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;eN(i.current,2,null,i,null,null),Ch(),o[or]=null}};function Yh(i){this._internalRoot=i}Yh.prototype.unstable_scheduleHydration=function(i){if(i){var o=NI();i={blockedOn:null,target:i,priority:o};for(var r=0;r<Rl.length&&o!==0&&o<Rl[r].priority;r++);Rl.splice(r,0,i),r===0&&oN(i)}};var rN=t.version;if(rN!=="19.1.0")throw Error(a(527,rN,"19.1.0"));G.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(a(188)):(i=Object.keys(i).join(","),Error(a(268,i)));return i=h(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var a1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kh.isDisabled&&Kh.supportsFiber)try{Pc=Kh.inject(a1),Yi=Kh}catch{}}return Uu.createRoot=function(i,o){if(!s(i))throw Error(a(299));var r=!1,u="",E=Ng,A=Cg,b=bg,M=null;return o!=null&&(o.unstable_strictMode===!0&&(r=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(E=o.onUncaughtError),o.onCaughtError!==void 0&&(A=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks)),o=Qp(i,1,!1,null,null,r,u,E,A,b,M,null),i[or]=o.current,XA(i),new hR(o)},Uu.hydrateRoot=function(i,o,r){if(!s(i))throw Error(a(299));var u=!1,E="",A=Ng,b=Cg,M=bg,z=null,ae=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(E=r.identifierPrefix),r.onUncaughtError!==void 0&&(A=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(M=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(z=r.unstable_transitionCallbacks),r.formState!==void 0&&(ae=r.formState)),o=Qp(i,1,!0,o,r??null,u,E,A,b,M,z,ae),o.context=Jp(null),r=o.current,u=$i(),u=im(u),E=el(u),E.callback=null,tl(r,E,u),r=u,o.current.lanes=r,Bc(o,r),eo(o),i[or]=o.current,XA(i),new Yh(o)},Uu.version="19.1.0",Uu}var SN;function R1(){if(SN)return mR.exports;SN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),mR.exports=A1(),mR.exports}var T1=R1(),N=KT();const di=YT(N),dE=r1({__proto__:null,default:di},[N]);var I0={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_s=di.createContext&&di.createContext(I0),S1=["attr","size","title"];function I1(e,t){if(e==null)return{};var n=_1(e,t),a,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)a=c[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function _1(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Df(){return Df=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Df.apply(this,arguments)}function IN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function yf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IN(Object(n),!0).forEach(function(a){g1(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IN(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function g1(e,t,n){return t=p1(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p1(e){var t=N1(e,"string");return typeof t=="symbol"?t:t+""}function N1(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _0(e){return e&&e.map((t,n)=>di.createElement(t.tag,yf({key:n},t.attr),_0(t.child)))}function Ca(e){return t=>di.createElement(C1,Df({attr:yf({},e.attr)},t),_0(e.child))}function C1(e){var t=n=>{var{attr:a,size:s,title:c}=e,d=I1(e,S1),f=s||n.size||"1em",h;return n.className&&(h=n.className),e.className&&(h=(h?h+" ":"")+e.className),di.createElement("svg",Df({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,d,{className:h,style:yf(yf({color:e.color||n.color},n.style),e.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),c&&di.createElement("title",null,c),e.children)};return _s!==void 0?di.createElement(_s.Consumer,null,n=>t(n)):t(I0)}function b1(e){return Ca({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M407.8 294.7c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3zM288 227.1C261.9 176.4 190.9 81.9 124.9 35.3C61.6-9.4 37.5-1.7 21.6 5.5C3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7c3.3-.5 6.6-.9 10-1.4c-3.3 .5-6.6 1-10 1.4C74.3 308.6-9.1 342.8 100.3 464.5C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4c102.4-103.4 28.1-156-65.8-169.9c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3c64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1z"},child:[]}]})(e)}function O1(e){return Ca({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(e)}function D1(e){return Ca({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M192 32c0 17.7 14.3 32 32 32c123.7 0 224 100.3 224 224c0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32c70.7 0 128 57.3 128 128c0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192c-17.7 0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5 0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144H128v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48s-48-21.5-48-48V144z"},child:[]}]})(e)}function y1(e){return Ca({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M249.6 471.5c10.8 3.8 22.4-4.1 22.4-15.5V78.6c0-4.2-1.6-8.4-5-11C247.4 52 202.4 32 144 32C93.5 32 46.3 45.3 18.1 56.1C6.8 60.5 0 71.7 0 83.8V454.1c0 11.9 12.8 20.2 24.1 16.5C55.6 460.1 105.5 448 144 448c33.9 0 79 14 105.6 23.5zm76.8 0C353 462 398.1 448 432 448c38.5 0 88.4 12.1 119.9 22.6c11.3 3.8 24.1-4.6 24.1-16.5V83.8c0-12.1-6.8-23.3-18.1-27.6C529.7 45.3 482.5 32 432 32c-58.4 0-103.4 20-123 35.6c-3.3 2.6-5 6.8-5 11V456c0 11.4 11.7 19.3 22.4 15.5z"},child:[]}]})(e)}function v1(e){return Ca({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(e)}function M1(e){return Ca({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32V144C576 64.5 511.5 0 432 0S288 64.5 288 144v48H64c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64H352V144z"},child:[]}]})(e)}function L1(e){return Ca({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"},child:[]}]})(e)}function g0(e){return Ca({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},child:[]}]})(e)}const x1="7.41",H1=16;var xn=(e=>(e.Exact="Exact",e.SkillSequence="SkillSequence",e.Edited="Edited",e))(xn||{}),Ia=(e=>(e.Record="Record",e.SkillSequencePresets="SkillSequencePresets",e.MarkerTrackIndividual="MarkerTrackIndividual",e.MarkerTracksCombined="MarkerTracksCombined",e.MarkerTrackSet="MarkerTrackSet",e))(Ia||{}),Ra=(e=>(e[e.RealTime=0]="RealTime",e[e.RealTimeAutoPause=1]="RealTimeAutoPause",e[e.Manual=2]="Manual",e))(Ra||{}),Fo=(e=>(e[e.Initial=0]="Initial",e[e.FpsTax=1]="FpsTax",e[e.AllaganGcdFormula=2]="AllaganGcdFormula",e))(Fo||{});const VT={version:2};let p0=!1;function k1(){return p0}const hE="DT",Vu=window.location.hostname.startsWith("beta"),U1=localStorage.length===0;function gt(e){const t=localStorage.getItem(hE+"."+e);return localStorage.getItem(e)!==null&&(p0=!0),t}function pt(e,t){localStorage.setItem(hE+"."+e,t)}function oT(e){localStorage.removeItem(hE+"."+e)}function N0(){Object.keys(localStorage).forEach(e=>{e.startsWith(hE+".")&&localStorage.removeItem(e)})}function C0(e,t){const n=e in IR?IR[e]:IR.NEVER;return t>=n.level}const ie=()=>e=>e,w1=ie()({BENEFIC:{id:3594,name:"Benefic",label:{zh:"",ja:""}},LIGHTSPEED:{id:3606,name:"Lightspeed",label:{zh:"",ja:""}},HELIOS:{id:3600,name:"Helios",label:{zh:"",ja:""}},ASCEND:{id:3603,name:"Ascend",label:{zh:"",ja:""}},ESSENTIAL_DIGNITY:{id:3614,name:"Essential Dignity",label:{zh:"",ja:""}},BENEFIC_II:{id:3610,name:"Benefic II",label:{zh:"",ja:""}},ASTRAL_DRAW:{id:37017,name:"Astral Draw",label:{zh:"",ja:""}},UMBRAL_DRAW:{id:37018,name:"Umbral Draw",label:{zh:"",ja:""}},PLAY_I:{id:37019,name:"Play I",label:{zh:"I",ja:"I"}},PLAY_II:{id:37020,name:"Play II",label:{zh:"II",ja:"II"}},PLAY_III:{id:37021,name:"Play III",label:{zh:"III",ja:"III"}},ASPECTED_BENEFIC:{id:3595,name:"Aspected Benefic",label:{zh:"",ja:""}},ASPECTED_HELIOS:{id:3601,name:"Aspected Helios",label:{zh:"",ja:""}},GRAVITY:{id:3615,name:"Gravity",label:{zh:"",ja:""}},COMBUST_II:{id:3608,name:"Combust II",label:{zh:"",ja:""}},SYNASTRY:{id:3612,name:"Synastry",label:{zh:"",ja:""}},DIVINATION:{id:16552,name:"Divination",label:{zh:"",ja:""}},COLLECTIVE_UNCONSCIOUS:{id:3613,name:"Collective Unconscious",label:{zh:"",ja:""}},CELESTIAL_OPPOSITION:{id:16553,name:"Celestial Opposition",label:{zh:"",ja:""}},EARTHLY_STAR:{id:7439,name:"Earthly Star",label:{zh:"",ja:""}},STELLAR_DETONATION:{id:8324,name:"Stellar Detonation",label:{zh:"",ja:""}},MALEFIC_III:{id:7442,name:"Malefic III",label:{zh:"",ja:""}},MINOR_ARCANA:{id:37022,name:"Minor Arcana",label:{zh:"",ja:""}},COMBUST_III:{id:16554,name:"Combust III",label:{zh:"",ja:""}},MALEFIC_IV:{id:16555,name:"Malefic IV",label:{zh:"",ja:""}},CELESTIAL_INTERSECTION:{id:16556,name:"Celestial Intersection",label:{zh:"",ja:""}},HOROSCOPE:{id:16557,name:"Horoscope",label:{zh:"",ja:""}},HOROSCOPE_RECAST:{id:16558,name:"Horoscope (Recast)",label:{zh:"",ja:""}},NEUTRAL_SECT:{id:16559,name:"Neutral Sect",label:{zh:"",ja:""}},FALL_MALEFIC:{id:25871,name:"Fall Malefic",label:{zh:"",ja:""}},GRAVITY_II:{id:25872,name:"Gravity II",label:{zh:"",ja:""}},EXALTATION:{id:25873,name:"Exaltation",label:{zh:"",ja:""}},MACROCOSMOS:{id:25874,name:"Macrocosmos",label:{zh:"",ja:""}},MICROCOSMOS:{id:25875,name:"Microcosmos",label:{zh:"",ja:""}},ORACLE:{id:37029,name:"Oracle",label:{zh:"",ja:""}},HELIOS_CONJUNCTION:{id:37030,name:"Helios Conjunction",label:{zh:"",ja:""}},SUN_SIGN:{id:37031,name:"Sun Sign",label:{zh:"",ja:""}},THE_BALANCE:{id:37023,name:"The Balance",label:{zh:"",ja:""}},THE_ARROW:{id:37024,name:"The Arrow",label:{zh:"",ja:""}},THE_SPIRE:{id:37025,name:"The Spire",label:{zh:"",ja:""}},THE_SPEAR:{id:37026,name:"The Spear",label:{zh:"",ja:""}},THE_BOLE:{id:37027,name:"The Bole",label:{zh:"",ja:""}},THE_EWER:{id:37028,name:"The Ewer",label:{zh:"",ja:""}},LORD_OF_CROWNS:{id:7444,name:"Lord of Crowns",label:{zh:"",ja:""}},LADY_OF_CROWNS:{id:7445,name:"Lady of Crowns",label:{zh:"",ja:""}}}),P1=ie()({cd_LIGHTSPEED:{name:"cd_Lightspeed"},cd_ESSENTIAL_DIGNITY:{name:"cd_EssentialDignity"},cd_ASTRAL_DRAW:{name:"cd_AstralDraw"},cd_PLAY_I:{name:"cd_PlayI"},cd_PLAY_II:{name:"cd_PlayII"},cd_PLAY_III:{name:"cd_PlayIII"},cd_SYNASTRY:{name:"cd_Synastry"},cd_DIVINATION:{name:"cd_Divination"},cd_COLLECTIVE_UNCONSCIOUS:{name:"cd_CollectiveUnconscious"},cd_CELESTIAL_OPPOSITION:{name:"cd_CelestialOpposition"},cd_EARTHLY_STAR:{name:"cd_EarthlyStar"},cd_STELLAR_DETONATION:{name:"cd_StellarDetonation"},cd_MINOR_ARCANA:{name:"cd_MinorArcana"},cd_CELESTIAL_INTERSECTION:{name:"cd_CelestialIntersection"},cd_HOROSCOPE:{name:"cd_Horoscope"},cd_HOROSCOPE_RECAST:{name:"cd_HoroscopeRecast"},cd_NEUTRAL_SECT:{name:"cd_NeutralSect"},cd_EXALTATION:{name:"cd_Exaltation"},cd_MACROCOSMOS:{name:"cd_Macrocosmos"},cd_MICROCOSMOS:{name:"cd_Microcosmos"},cd_ORACLE:{name:"cd_Oracle"},cd_SUN_SIGN:{name:"cd_SunSign"}}),G1=ie()({ARCANA:{name:"Arcana",label:{zh:""}},MINOR_ARCANA:{name:"Minor Arcana",label:{zh:""}}}),WT=ie()({LIGHTSPEED:{name:"Lightspeed",label:{zh:""}},THE_BALANCE:{name:"The Balance",label:{zh:""}},THE_ARROW:{name:"The Arrow",label:{zh:""}},THE_SPIRE:{name:"The Spire",label:{zh:""}},THE_SPEAR:{name:"The Spear",label:{zh:""}},THE_BOLE:{name:"The Bole",label:{zh:""}},THE_EWER:{name:"The Ewer",label:{zh:""}},ASPECTED_BENEFIC:{name:"Aspected Benefic",label:{zh:""}},ASPECTED_HELIOS:{name:"Aspected Helios",label:{zh:""}},SYNASTRY:{name:"Synastry",label:{zh:""}},DIVINATION:{name:"Divination",label:{zh:""}},DIVINING:{name:"Divining",label:{zh:""}},COLLECTIVE_UNCONSCIOUS:{name:"Collective Unconscious",label:{zh:""}},COLLECTIVE_UNCONSCIOUS_MIT:{name:"Collective Unconscious (Mitigation)",label:{zh:""}},WHEEL_OF_FORTUNE:{name:"Wheel of Fortune",label:{zh:""}},OPPOSITION:{name:"Opposition",label:{zh:""}},EARTHLY_DOMINANCE:{name:"Earthly Dominance",mayNotBeCanceled:!0,label:{zh:""}},GIANT_DOMINANCE:{name:"Giant Dominance",mayNotBeCanceled:!0,label:{zh:""}},COMBUST_II:{name:"Combust II",label:{zh:""}},COMBUST_III:{name:"Combust III",label:{zh:""}},INTERSECTION:{name:"Intersection",label:{zh:""}},HOROSCOPE:{name:"Horoscope",label:{zh:""}},HOROSCOPE_HELIOS:{name:"Horoscope Helios",label:{zh:""}},NEUTRAL_SECT:{name:"Neutral Sect",label:{zh:""}},NEUTRAL_SECT_SHIELD:{name:"Neutral Sect (Shield)",label:{zh:""}},SUNTOUCHED:{name:"Suntouched",label:{zh:""}},EXALTATION:{name:"Exaltation",label:{zh:""}},MACROCOSMOS:{name:"Macrocosmos",label:{zh:""}},HELIOS_CONJUNCTION:{name:"Helios Conjunction",label:{zh:""}},SUN_SIGN:{name:"Sun Sign",label:{zh:""}}}),B1=ie()({ARCANA_1:{name:"Arcana 1",label:{zh:"1"}},ARCANA_2:{name:"Arcana 2",label:{zh:"2"}},ARCANA_3:{name:"Arcana 3",label:{zh:"3"}},NEXT_DRAW:{name:"Next Draw",label:{zh:""}}}),F1=ie()({COMBUST_MASTERY_II:{name:"Combust Mastery II",level:72},MALEFIC_MASTERY_III:{name:"Malefic Mastery III",level:82},ENHANCED_ESSENTIAL_DIGNITY:{name:"Enhanced Essential Dignity",level:78},MALEFIC_MASTERY_IV:{name:"Malefic Mastery IV",level:82},GRAVITY_MASTERY:{name:"Gravity Mastery",level:82},ENHANCED_CELESTIAL_INTERSECTION:{name:"Enhanced Celestial Intersection",level:88},ENHANCED_DIVINATION:{name:"Enhanced Divination",level:92},ASPECTED_HELIOS_MASTERY:{name:"Aspected Helios Mastery",level:96},ENHANCED_ESSENTIAL_DIGNITY_II:{name:"Enhanced Essential Dignity_II",level:98},ENHANCED_NEUTRAL_SECT:{name:"Enhanced Neutral Sect",level:100}}),j1={...G1,...WT,...B1},z1=ie()({BLIZZARD:{id:142,name:"Blizzard",label:{zh:"1",ja:""},discordEmote:"B1"},FIRE:{id:141,name:"Fire",label:{zh:"1",ja:""},discordEmote:"F1"},BLIZZARD_II:{id:25793,name:"Blizzard 2",label:{zh:"2",ja:""},discordEmote:"F2"},FIRE_II:{id:147,name:"Fire 2",label:{zh:"2",ja:""},discordEmote:"F2"},TRANSPOSE:{id:149,name:"Transpose",label:{zh:"",ja:""},discordEmote:"Transpose"},THUNDER_III:{id:153,name:"Thunder 3",label:{zh:"3",ja:""},discordEmote:"T3"},THUNDER_IV:{id:7420,name:"Thunder 4",label:{zh:""},discordEmote:"T4"},MANAWARD:{id:157,name:"Manaward",label:{zh:"",ja:""},discordEmote:"Manaward"},MANAFONT:{id:158,name:"Manafont",label:{zh:"",ja:""},discordEmote:"Manafont"},LEY_LINES:{id:3573,name:"Ley Lines",label:{zh:"",ja:""},discordEmote:"LL"},FIRE_III:{id:152,name:"Fire 3",label:{zh:"3",ja:""},discordEmote:"F3"},BLIZZARD_III:{id:154,name:"Blizzard 3",label:{zh:"3",ja:""},discordEmote:"B3"},FREEZE:{id:159,name:"Freeze",label:{zh:"",ja:""},discordEmote:"Freeze"},FLARE:{id:162,name:"Flare",label:{zh:"",ja:""},discordEmote:"Flare"},BLIZZARD_IV:{id:3576,name:"Blizzard 4",label:{zh:"4",ja:""},discordEmote:"B4"},FIRE_IV:{id:3577,name:"Fire 4",label:{zh:"4",ja:""},discordEmote:"F4"},BETWEEN_THE_LINES:{id:7419,name:"Between the Lines",label:{zh:"",ja:""},discordEmote:"BtL"},AETHERIAL_MANIPULATION:{id:155,name:"Aetherial Manipulation",label:{zh:"",ja:""},discordEmote:"AM"},TRIPLECAST:{id:7421,name:"Triplecast",label:{zh:"",ja:""},discordEmote:"Triple"},FOUL:{id:7422,name:"Foul",label:{zh:"",ja:""},discordEmote:"Foul"},DESPAIR:{id:16505,name:"Despair",label:{zh:"",ja:""},discordEmote:"Despair"},UMBRAL_SOUL:{id:16506,name:"Umbral Soul",label:{zh:"",ja:""},discordEmote:"Soul"},XENOGLOSSY:{id:16507,name:"Xenoglossy",label:{zh:"",ja:""},discordEmote:"Xeno"},HIGH_FIRE_II:{id:25794,name:"High Fire 2",label:{zh:"2",ja:""},discordEmote:"HF2"},HIGH_BLIZZARD_II:{id:25795,name:"High Blizzard 2",label:{zh:"2",ja:""},discordEmote:"HB2"},AMPLIFIER:{id:25796,name:"Amplifier",label:{zh:"",ja:""},discordEmote:"Amplifier"},PARADOX:{id:25797,name:"Paradox",label:{zh:"",ja:""},discordEmote:"Para"},HIGH_THUNDER:{id:36986,name:"High Thunder",label:{zh:"",ja:""},discordEmote:"HThunder"},HIGH_THUNDER_II:{id:36987,name:"High Thunder 2",label:{zh:""},discordEmote:"HThunder2"},FLARE_STAR:{id:36989,name:"Flare Star",label:{zh:"",ja:""},discordEmote:"FS"},RETRACE:{id:36988,name:"Retrace",label:{zh:"",ja:""}}}),Y1=ie()({cd_TRANSPOSE:{name:"cd_Transpose"},cd_LEY_LINES:{name:"cd_LeyLines"},cd_MANAWARD:{name:"cd_Manaward"},cd_BETWEEN_THE_LINES:{name:"cd_BetweenTheLines"},cd_AETHERIAL_MANIPULATION:{name:"cd_AetherialManipulation"},cd_TRIPLECAST:{name:"cd_Triplecast"},cd_MANAFONT:{name:"cd_Manafont"},cd_AMPLIFIER:{name:"cd_Amplifier"},cd_RETRACE:{name:"cd_Retrace"}}),K1=ie()({POLYGLOT:{name:"Polyglot",label:{zh:""}},ASTRAL_FIRE:{name:"Astral Fire",label:{zh:""}},UMBRAL_ICE:{name:"Umbral Ice",label:{zh:""}},UMBRAL_HEART:{name:"Umbral Heart",label:{zh:""}},ENOCHIAN:{name:"Enochian",label:{zh:""}},PARADOX:{name:"Paradox",label:{zh:""}},ASTRAL_SOUL:{name:"Astral Soul",label:{zh:""}}}),XT=ie()({LEY_LINES:{name:"Ley Lines",label:{zh:""},mayBeToggled:!0},TRIPLECAST:{name:"Triplecast",label:{zh:""},maximumStacks:3},FIRESTARTER:{name:"Firestarter",label:{zh:""}},THUNDERHEAD:{name:"Thunderhead",label:{zh:""}},THUNDER_III:{name:"Thunder III",label:{zh:""}},THUNDER_IV:{name:"Thunder IV",label:{zh:""}},HIGH_THUNDER:{name:"High Thunder",label:{zh:""}},HIGH_THUNDER_II:{name:"High Thunder II",label:{zh:""}},MANAWARD:{name:"Manaward",label:{zh:""}}}),V1=ie()({}),W1=ie()({ENHANCED_ENOCHIAN_II:{name:"Enhanced Enochian II",level:78},ENHANCED_POLYGLOT:{name:"Enhanced Polyglot",level:80},ENHANCED_FOUL:{name:"Enhanced Foul",level:80},ASPECT_MASTERY_IV:{name:"Aspect Mastery IV",level:82},ENHANCED_MANAFONT:{name:"Enhanced Manafont",level:84},ENHANCED_ENOCHIAN_III:{name:"Enhanced Enochian III",level:86},ASPECT_MASTERY_V:{name:"Aspect Mastery V",level:90},THUNDER_MASTERY_III:{name:"Thunder Mastery III",level:92},ENHANCED_LEYLINES:{name:"Enhanced Ley Lines",level:96},ENHANCED_ENOCHIAN_IV:{name:"Enhanced Enochian IV",level:96},ENHANCED_POLYGLOT_II:{name:"Enhanced Polyglot II",level:98},ENHANCED_ASTRAL_FIRE:{name:"Enhanced Astral Fire",level:100}}),X1={...K1,...XT,...V1},q1=ie()({HEAVY_SHOT:{id:97,name:"Heavy Shot"},QUICK_NOCK:{id:100,name:"Quick Nock"},BLOODLETTER:{id:110,name:"Bloodletter"},BARRAGE:{id:107,name:"Barrage"},RAGING_STRIKES:{id:101,name:"Raging Strikes"},REPELLING_SHOT:{id:112,name:"Repelling Shot"},WIDE_VOLLEY:{id:111,name:"Wide Volley"},MAGES_BALLAD:{id:114,name:"Mage's Ballad"},ARMYS_PAEON:{id:116,name:"Army's Paeon"},RAIN_OF_DEATH:{id:117,name:"Rain of Death"},BATTLE_VOICE:{id:118,name:"Battle Voice"},EMYPREAL_ARROW:{id:3558,name:"Empyreal Arrow"},WANDERERS_MINUET:{id:3559,name:"The Wanderer's Minuet"},IRON_JAWS:{id:3560,name:"Iron Jaws"},WARDENS_PAEAN:{id:3561,name:"Warden's Paean"},SIDEWINDER:{id:3562,name:"Sidewinder"},PITCH_PERFECT:{id:7404,name:"Pitch Perfect"},TROUBADOUR:{id:7405,name:"Troubadour"},CAUSTIC_BITE:{id:7406,name:"Caustic Bite"},STORMBITE:{id:7407,name:"Stormbite"},NATURES_MINNE:{id:7408,name:"Nature's Minne"},REFULGENT_ARROW:{id:7409,name:"Refulgent Arrow"},SHADOWBITE:{id:16494,name:"Shadowbite"},BURST_SHOT:{id:16495,name:"Burst Shot"},APEX_ARROW:{id:16496,name:"Apex Arrow"},LADONSBITE:{id:25783,name:"Ladonsbite"},BLAST_ARROW:{id:25784,name:"Blast Arrow"},RADIANT_FINALE:{id:25785,name:"Radiant Finale"},HEARTBREAK_SHOT:{id:36975,name:"Heartbreak Shot"},RESONANT_ARROW:{id:36976,name:"Resonant Arrow"},RADIANT_ENCORE:{id:36977,name:"Radiant Encore"}}),Z1=ie()({cd_RAGING_STRIKES:{name:"cd_RagingStrikes"},cd_BARRAGE:{name:"cd_Barrage"},cd_EMPYREAL_ARROW:{name:"cd_EmpyrealArrow"},cd_HEARTBREAK_SHOT:{name:"cd_HeartbreakShot"},cd_SIDEWINDER:{name:"cd_Sidewinder"},cd_WANDERERS_MINUET:{name:"cd_WanderersMinuet"},cd_MAGES_BALLAD:{name:"cd_MagesBallad"},cd_ARMYS_PAEON:{name:"cd_ArmysPaeon"},cd_WARDENS_PAEAN:{name:"cd_WardensPaean"},cd_NATURES_MINNE:{name:"cd_NaturesMinne"},cd_REPELLING_SHOT:{name:"cd_RepellingShot"},cd_BATTLE_VOICE:{name:"cd_BattleVoice"},cd_RADIANT_FINALE:{name:"cd_RadiantFinale"},cd_TROUBADOUR:{name:"cd_Troubadour"},cd_PITCH_PERFECT:{name:"cd_PitchPerfect"}}),$1=ie()({SONG_TIMER:{name:"SongTimer"},SOUL_VOICE:{name:"Soul Voice"},PITCH_PERFECT:{name:"Pitch Perfect"},REPERTOIRE:{name:"Repertoire"},WANDERERS_CODA:{name:"Wanderer's Coda"},MAGES_CODA:{name:"Mage's Coda"},ARMYS_CODA:{name:"Army's Coda"}}),qT=ie()({HAWKS_EYE:{name:"Hawk's Eye"},RAGING_STRIKES:{name:"Raging Strikes"},BARRAGE:{name:"Barrage"},ARMYS_MUSE:{name:"Army's Muse"},ARMYS_ETHOS:{name:"Army's Ethos"},BLAST_ARROW_READY:{name:"Blast Arrow Ready"},RESONANT_ARROW_READY:{name:"Resonant Arrow Ready"},RADIANT_ENCORE_READY:{name:"Radiant Encore Ready"},CAUSTIC_BITE:{name:"Caustic Bite"},STORMBITE:{name:"Stormbite"},MAGES_BALLAD:{name:"Mage's Ballad"},ARMYS_PAEON:{name:"Army's Paeon"},WANDERERS_MINUET:{name:"Wanderer's Minuet"},BATTLE_VOICE:{name:"Battle Voice"},WARDENS_PAEAN:{name:"Warden's Paean"},TROUBADOUR:{name:"Troubadour"},NATURES_MINNE:{name:"Nature's Minne"},RADIANT_FINALE:{name:"Radiant Finale"}}),Q1=ie()({RADIANT_CODA:{name:"Radiant Coda"},MUSE_REPERTOIRE:{name:"Muse Repertoire"},ETHOS_REPERTOIRE:{name:"Ethos Repertoire"}}),J1=ie()({WIDE_VOLLEY_MASTERY:{name:"Wide Volley Mastery",level:72},BITE_MASTERY_II:{name:"Bite Mastery II",level:76},HEAVY_SHOT_MASTERY:{name:"Heavy Shot Mastery",level:76},ENHANCED_ARMYS_PAEON:{name:"Enhanced Army's Paeon",level:78},SOUL_VOICE:{name:"Soul Voice",level:80},QUICK_NOCK_MASTERY:{name:"Quick Nock Mastery",level:82},ENHANCED_BLOODLETTER:{name:"Enhanced Bloodletter",level:84},ENHANCED_APEX_ARROW:{name:"Enhanced Apex Arrow",level:86},ENHANCED_TROUBADOUR:{name:"Enhanced Troubadour",level:88},MINSTRELS_CODA:{name:"Minstrel's Coda",level:90},BLOODLETTER_MASTERY:{name:"Bloodletter Mastery",level:92},RANGED_MASTERY:{name:"Ranged Mastery",level:94},ENHANCED_BARRAGE:{name:"Enhanced Barrage",level:96},ENHANCED_RADIANT_FINALE:{name:"Enhanced Radiant Finale",level:100}}),ex={...$1,...qT,...Q1},tx=ie()({STANDARD_FINISH:{id:16003,name:"Standard Finish",label:{zh:""}},SINGLE_STANDARD_FINISH:{id:16191,name:"Single Standard Finish",label:{zh:""}},DOUBLE_STANDARD_FINISH:{id:16192,name:"Double Standard Finish",label:{zh:""}},FINISHING_MOVE:{id:36984,name:"Finishing Move",label:{zh:""}},LAST_DANCE:{id:36983,name:"Last Dance",label:{zh:""}},TECHNICAL_FINISH:{id:16004,name:"Technical Finish",label:{zh:""}},SINGLE_TECHNICAL_FINISH:{id:16193,name:"Single Technical Finish",label:{zh:""}},DOUBLE_TECHNICAL_FINISH:{id:16194,name:"Double Technical Finish",label:{zh:""}},TRIPLE_TECHNICAL_FINISH:{id:16195,name:"Triple Technical Finish",label:{zh:""}},QUADRUPLE_TECHNICAL_FINISH:{id:16196,name:"Quadruple Technical Finish",label:{zh:""}},TILLANA:{id:25790,name:"Tillana",label:{zh:""}},CASCADE:{id:15989,name:"Cascade",label:{zh:""}},FOUNTAIN:{id:15990,name:"Fountain",label:{zh:""}},REVERSE_CASCADE:{id:15991,name:"Reverse Cascade",label:{zh:""}},FOUNTAINFALL:{id:15992,name:"Fountainfall",label:{zh:""}},WINDMILL:{id:15993,name:"Windmill",label:{zh:""}},BLADESHOWER:{id:15994,name:"Bladeshower",label:{zh:""}},RISING_WINDMILL:{id:15995,name:"Rising Windmill",label:{zh:""}},BLOODSHOWER:{id:15996,name:"Bloodshower",label:{zh:""}},STANDARD_STEP:{id:15997,name:"Standard Step",label:{zh:""}},TECHNICAL_STEP:{id:15998,name:"Technical Step",label:{zh:""}},EMBOITE:{id:15999,name:"Emboite",label:{zh:""}},ENTRECHAT:{id:16e3,name:"Entrechat",label:{zh:""}},JETE:{id:16001,name:"Jete",label:{zh:""}},PIROUETTE:{id:16002,name:"Pirouette",label:{zh:""}},SABER_DANCE:{id:16005,name:"Saber Dance",label:{zh:""}},DANCE_OF_THE_DAWN:{id:36985,name:"Dance of the Dawn",label:{zh:""}},CLOSED_POSITION:{id:16006,name:"Closed Position",label:{zh:""}},FAN_DANCE:{id:16007,name:"Fan Dance",label:{zh:""}},FAN_DANCE_II:{id:16008,name:"Fan Dance II",label:{zh:""}},FAN_DANCE_III:{id:16009,name:"Fan Dance III",label:{zh:""}},FAN_DANCE_IV:{id:25791,name:"Fan Dance IV",label:{zh:""}},EN_AVANT:{id:16010,name:"En Avant",label:{zh:""}},DEVILMENT:{id:16011,name:"Devilment",label:{zh:""}},STARFALL_DANCE:{id:25792,name:"Starfall Dance",label:{zh:""}},SHIELD_SAMBA:{id:16012,name:"Shield Samba",label:{zh:""}},FLOURISH:{id:16013,name:"Flourish",label:{zh:""}},IMPROVISATION:{id:16014,name:"Improvisation",label:{zh:""}},IMPROVISED_FINISH:{id:25789,name:"Improvised Finish",label:{zh:""}},CURING_WALTZ:{id:16015,name:"Curing Waltz",label:{zh:""}},ENDING:{id:18073,name:"Ending",label:{zh:""}}}),nx=ie()({cd_STANDARD_STEP:{name:"cd_StandardStep"},cd_TECHNICAL_STEP:{name:"cd_TechnicalStep"},cd_CLOSED_POSITION:{name:"cd_ClosedPosition"},cd_FAN_DANCE:{name:"cd_FanDance"},cd_FAN_DANCE_II:{name:"cd_FanDanceII",label:{zh:"CD"}},cd_FAN_DANCE_III:{name:"cd_FanDanceIII",label:{zh:"CD"}},cd_FAN_DANCE_IV:{name:"cd_FanDanceIV",label:{zh:"CD"}},cd_EN_AVANT:{name:"cd_EnAvant"},cd_DEVILMENT:{name:"cd_Devilment"},cd_SHIELD_SAMBA:{name:"cd_ShieldSamba"},cd_FLOURISH:{name:"cd_Flourish"},cd_IMPROVISATION:{name:"cd_Improvisation"},cd_IMPROVISED_FINISH:{name:"cd_ImprovisedFinish"},cd_CURING_WALTZ:{name:"cd_CuringWaltz"},cd_ENDING:{name:"cd_Ending"}}),ix=ie()({ESPRIT_GAUGE:{name:"EspritGauge",label:{zh:""}},FEATHER_GAUGE:{name:"Feathers",label:{zh:""}},STANDARD_DANCE:{name:"Standard Dance",label:{zh:""}},TECHNICAL_DANCE:{name:"Technical Dance",label:{zh:""}}}),ZT=ie()({SILKEN_SYMMETRY:{name:"Silken Symmetry",label:{zh:""}},SILKEN_FLOW:{name:"Silken Flow",label:{zh:""}},FLOURISHING_SYMMETRY:{name:"Flourishing Symmetry",label:{zh:""}},FLOURISHING_FLOW:{name:"Flourishing Flow",label:{zh:""}},THREEFOLD_FAN_DANCE:{name:"Threefold Fan Dance",label:{zh:""}},FOURFOLD_FAN_DANCE:{name:"Fourfold Fan Dance",label:{zh:""}},FINISHING_MOVE_READY:{name:"Finishing Move Ready",label:{zh:""}},FLOURISHING_STARFALL:{name:"Flourishing Starfall",label:{zh:""}},STANDARD_STEP:{name:"Standard Step",label:{zh:""},mayNotBeCanceled:!0},TECHNICAL_STEP:{name:"Technical Step",label:{zh:""},mayNotBeCanceled:!0},LAST_DANCE_READY:{name:"Last Dance Ready",label:{zh:""}},DANCE_OF_THE_DAWN_READY:{name:"Dance of the Dawn Ready",label:{zh:""}},FLOURISHING_FINISH:{name:"Flourishing Finish",label:{zh:""}},SHIELD_SAMBA:{name:"Shield Samba",label:{zh:""}},IMPROVISATION:{name:"Improvisation",label:{zh:""},mayNotBeCanceled:!0},RISING_RHYTHM:{name:"Rising Rhythm",label:{zh:""},maximumStacks:4},IMPROVISATION_REGEN:{name:"Improvisation Regen",label:{zh:""}},IMPROVISED_FINISH:{name:"Improvised Finish",label:{zh:""}},DEVILMENT:{name:"Devilment",label:{zh:""}},TECHNICAL_FINISH:{name:"Technical Finish",label:{zh:""}},ESPRIT:{name:"Esprit",label:{zh:""},mayNotBeCanceled:!0},STANDARD_FINISH:{name:"Standard Finish",label:{zh:""}},CLOSED_POSITION:{name:"Closed Position",label:{zh:""},mayNotBeCanceled:!0},DANCE_PARTNER:{name:"Dance Partner",label:{zh:""}},STANDARD_FINISH_PARTNER:{name:"Standard Finish Partner",label:{zh:"buff"}},ESPRIT_PARTNER:{name:"Esprit Partner",label:{zh:"buff"}},ESPRIT_TECHNICAL:{name:"Esprit Technical",label:{zh:"buff"}}}),ax=ie()({CASCADE_COMBO:{name:"CascadeCombo",label:{zh:""}},WINDMILL_COMBO:{name:"WindmillCombo",label:{zh:""}},STANDARD_BONUS:{name:"StandardBonus",label:{zh:""}},TECHNICAL_BONUS:{name:"TechnicalBonus",label:{zh:""}}}),ox=ie()({ESPRIT:{name:"Esprit",level:76},ENHANCED_EN_AVANT_II:{name:"Enhanced En Avant II",level:78},ENHANCED_TECHNICAL_FINISH:{name:"Enhanced Technical Finish",level:82},ENHANCED_ESPRIT:{name:"Enhanced Esprit",level:84},ENHANCED_FLOURISH:{name:"Enhanced Flourish",level:86},ENHANCED_SHIELD_SAMBA:{name:"Enhanced Shield Samba",level:88},ENHANCED_DEVILMENT:{name:"Enhanced Devilment",level:90},ENHANCED_STANDARD_FINISH:{name:"Enhanced Standard Finish",level:92},DYNAMIC_DANCER:{name:"Dynamic Dancer",level:94},ENHANCED_FLOURISH_II:{name:"Enhanced Flourish II",level:96},ENHANCED_TECHNICAL_FINISH_II:{name:"Enhanced Technical Finish II",level:100}}),lx={...ix,...ZT,...ax},sx=ie()({PIERCING_TALON:{id:90,name:"Piercing Talon"},TRUE_THRUST:{id:75,name:"True Thrust"},RAIDEN_THRUST:{id:16479,name:"Raiden Thrust"},DISEMBOWEL:{id:87,name:"Disembowel"},SPIRAL_BLOW:{id:36955,name:"Spiral Blow"},CHAOS_THRUST:{id:88,name:"Chaos Thrust"},CHAOTIC_SPRING:{id:25772,name:"Chaotic Spring"},WHEELING_THRUST:{id:3556,name:"Wheeling Thrust"},VORPAL_THRUST:{id:78,name:"Vorpal Thrust"},LANCE_BARRAGE:{id:36954,name:"Lance Barrage"},FULL_THRUST:{id:84,name:"Full Thrust"},HEAVENS_THRUST:{id:25771,name:"Heavens' Thrust"},FANG_AND_CLAW:{id:3554,name:"Fang and Claw"},DRAKESBANE:{id:36952,name:"Drakesbane"},DOOM_SPIKE:{id:86,name:"Doom Spike"},DRACONIAN_FURY:{id:25770,name:"Draconian Fury"},SONIC_THRUST:{id:7397,name:"Sonic Thrust"},COERTHAN_TORMENT:{id:16477,name:"Coerthan Torment"},LIFE_SURGE:{id:83,name:"Life Surge"},LANCE_CHARGE:{id:85,name:"Lance Charge"},JUMP:{id:92,name:"Jump"},HIGH_JUMP:{id:16478,name:"High Jump"},MIRAGE_DIVE:{id:7339,name:"Mirage Dive"},DRAGONFIRE_DIVE:{id:96,name:"Dragonfire Dive"},RISE_OF_THE_DRAGON:{id:36953,name:"Rise of the Dragon"},BATTLE_LITANY:{id:3557,name:"Battle Litany"},WYRMWIND_THRUST:{id:25773,name:"Wyrmwind Thrust"},GEIRSKOGUL:{id:3555,name:"Geirskogul"},NASTROND:{id:7400,name:"Nastrond"},STARDIVER:{id:16480,name:"Stardiver"},STARCROSS:{id:36956,name:"Starcross"},ELUSIVE_JUMP:{id:94,name:"Elusive Jump"},WINGED_GLIDE:{id:36951,name:"Winged Glide"}}),rx=ie()({cd_LIFE_SURGE:{name:"cd_LifeSurge"},cd_LANCE_CHARGE:{name:"cd_LanceCharge"},cd_JUMP:{name:"cd_Jump"},cd_HIGH_JUMP:{name:"cd_HighJump"},cd_ELUSIVE_JUMP:{name:"cd_ElusiveJump"},cd_WINGED_GLIDE:{name:"cd_WingedGlide"},cd_DRAGONFIRE_DIVE:{name:"cd_DragonfireDive"},cd_BATTLE_LITANY:{name:"cd_BattleLitany"},cd_GEIRSKOGUL:{name:"cd_Geirskogul"},cd_MIRAGE_DIVE:{name:"cd_MirageDive"},cd_NASTROND:{name:"cd_Nastrond"},cd_STARDIVER:{name:"cd_Stardiver"},cd_WYRMWIND_THRUST:{name:"cd_WyrmwindThrust"},cd_RISE_OF_THE_DRAGON:{name:"cd_RiseOfTheDragon"},cd_STARCROSS:{name:"cd_Starcross"}}),cx=ie()({LIFE_OF_THE_DRAGON:{name:"Life of the Dragon"},FIRSTMINDS_FOCUS:{name:"Firstminds' Focus"}}),$T=ie()({LIFE_SURGE:{name:"Life Surge"},ENHANCED_PIERCING_TALON:{name:"Enhanced Piercing Talon"},POWER_SURGE:{name:"Power Surge"},LANCE_CHARGE:{name:"Lance Charge"},DIVE_READY:{name:"Dive Ready"},CHAOS_THRUST_DOT:{name:"Chaos Thrust DoT"},CHAOTIC_SPRING_DOT:{name:"Chaotic Spring DoT"},DRAGONS_FLIGHT:{name:"Dragon's Flight"},BATTLE_LITANY:{name:"Battle Litany"},NASTROND_READY:{name:"Nastrond Ready"},DRACONIAN_FIRE:{name:"Draconian Fire"},STARCROSS_READY:{name:"Starcross Ready"}}),ux=ie()({DRG_CHAOS_COMBO_TRACKER:{name:"DRG Chaos Combo"},DRG_HEAVENS_COMBO_TRACKER:{name:"DRG Heavens Combo"},DRG_AOE_COMBO_TRACKER:{name:"DRG AOE Combo"}}),dx=ie()({JUMP_MASTERY:{name:"Jump Mastery",level:74},LANCE_MASTERY:{name:"Lance Mastery",level:76},ENHANCED_COERTHAN_TORMENT:{name:"Enhanced Coerthan Torment",level:82},ENHANCED_WINGED_GLIDE:{name:"Enhanced Winged Glide",level:84},LANCE_MASTERY_II:{name:"Lance Mastery II",level:86},ENHANCED_LIFE_SURGE:{name:"Enhanced Life Surge",level:88},LANCE_MASTERY_III:{name:"Lance Mastery III",level:90},ENHANCED_DRAGONFIRE_DIVE:{name:"Enhanced Dragonfire Dive",level:92},MELEE_MASTERY_DRG:{name:"Melee Mastery DRG",level:94},LANCE_MASTERY_IV:{name:"Lance Mastery IV",level:96},ENHANCED_STARDIVER:{name:"Enhanced Stardiver",level:100}}),hx={...cx,...$T,...ux},fx=ie()({HARD_SLASH:{id:3617,name:"Hard Slash",label:{zh:""}},SYPHON_STRIKE:{id:3623,name:"Syphon Strike",label:{zh:""}},UNLEASH:{id:3621,name:"Unleash",label:{zh:""}},GRIT:{id:3629,name:"Grit",label:{zh:""}},RELEASE_GRIT:{id:32067,name:"Release Grit",label:{zh:""}},UNMEND:{id:3624,name:"Unmend",label:{zh:""}},SOULEATER:{id:3632,name:"Souleater",label:{zh:""}},FLOOD_OF_DARKNESS:{name:"Flood of Darkness",label:{zh:""}},BLOOD_WEAPON:{id:3625,name:"Blood Weapon",label:{zh:""}},SHADOW_WALL:{id:3636,name:"Shadow Wall",label:{zh:""}},STALWART_SOUL:{id:16468,name:"Stalwart Soul",label:{zh:""}},EDGE_OF_DARKNESS:{name:"Edge of Darkness",label:{zh:""}},DARK_MIND:{id:3634,name:"Dark Mind",label:{zh:""}},LIVING_DEAD:{id:3638,name:"Living Dead",label:{zh:""}},SALTED_EARTH:{id:3639,name:"Salted Earth",label:{zh:""}},SHADOWSTRIDE:{id:36926,name:"Shadowstride",label:{zh:""}},ABYSSAL_DRAIN:{id:3641,name:"Abyssal Drain",label:{zh:""}},CARVE_AND_SPIT:{id:3643,name:"Carve and Spit",label:{zh:""}},BLOODSPILLER:{id:7392,name:"Bloodspiller",label:{zh:""}},QUIETUS:{id:7391,name:"Quietus",label:{zh:""}},DARK_MISSIONARY:{id:16471,name:"Dark Missionary",label:{zh:""}},DELIRIUM:{id:7390,name:"Delirium",label:{zh:""}},THE_BLACKEST_NIGHT:{id:7393,name:"The Blackest Night",label:{zh:""}},THE_BLACKEST_NIGHT_POP:{name:"Pop The Blackest Night",label:{zh:""}},FLOOD_OF_SHADOW:{id:16469,name:"Flood of Shadow",label:{zh:""}},EDGE_OF_SHADOW:{id:16470,name:"Edge of Shadow",label:{zh:""}},LIVING_SHADOW:{id:16472,name:"Living Shadow",label:{zh:""}},OBLATION:{id:25754,name:"Oblation",label:{zh:""}},SALT_AND_DARKNESS:{id:25755,name:"Salt and Darkness",label:{zh:""}},SHADOWBRINGER:{id:25757,name:"Shadowbringer",label:{zh:""}},SHADOWED_VIGIL:{id:36927,name:"Shadowed Vigil",label:{zh:""}},SCARLET_DELIRIUM:{id:36928,name:"Scarlet Delirium",label:{zh:""}},COMEUPPANCE:{id:36929,name:"Comeuppance",label:{zh:""}},TORCLEAVER:{id:36930,name:"Torcleaver",label:{zh:""}},IMPALEMENT:{id:36931,name:"Impalement",label:{zh:""}},DISESTEEM:{id:36932,name:"Disesteem",label:{zh:""}},ABYSSAL_DRAIN_PET:{id:17904,name:"Abyssal Drain (Esteem)",label:{zh:""}},SHADOWSTRIDE_PET:{id:38512,name:"Shadowstride (Esteem)",label:{zh:""}},SHADOWBRINGER_PET:{id:25881,name:"Shadowbringer (Esteem)",label:{zh:""}},EDGE_OF_SHADOW_PET:{id:17908,name:"Edge of Shadow (Esteem)",label:{zh:""}},FLOOD_OF_SHADOW_PET:{name:"Flood of Shadow (Esteem)",label:{zh:""}},BLOODSPILLER_PET:{id:17909,name:"Bloodspiller (Esteem)",label:{zh:""}},CARVE_AND_SPIT_PET:{name:"Carve and Spit (Esteem)",label:{zh:""}},DISESTEEM_PET:{id:36933,name:"Disesteem (Esteem)",label:{zh:""}}}),Ex=ie()({cd_GRIT:{name:"cd_Grit"},cd_RELEASE_GRIT:{name:"cd_ReleaseGrit"},cd_FLOOD_OF_DARKNESS:{name:"cd_FloodOfDarkness"},cd_SHADOW_WALL:{name:"cd_ShadowWall"},cd_DARK_MIND:{name:"cd_DarkMind"},cd_LIVING_DEAD:{name:"cd_LivingDead"},cd_SALTED_EARTH:{name:"cd_SaltedEarth"},cd_SHADOWSTRIDE:{name:"cd_Shadowstride"},cd_ABYSSAL_DRAIN:{name:"cd_AbyssalDrain"},cd_DARK_MISSIONARY:{name:"cd_DarkMissionary"},cd_DELIRIUM:{name:"cd_Delirium"},cd_THE_BLACKEST_NIGHT:{name:"cd_TheBlackestNight"},cd_THE_BLACKEST_NIGHT_POP:{name:"cd_TheBlackestNightPop"},cd_LIVING_SHADOW:{name:"cd_LivingShadow"},cd_OBLATION:{name:"cd_Oblation"},cd_SALT_AND_DARKNESS:{name:"cd_SaltAndDarkness"},cd_SHADOWBRINGER:{name:"cd_Shadowbringer"},cd_POP_TBN:{name:"cd_PopTBN"}}),mx=ie()({DARKSIDE:{name:"Darkside",label:{zh:""}},BLOOD_GAUGE:{name:"Blood Gauge",label:{zh:""}}}),QT=ie()({SALTED_EARTH:{name:"Salted Earth",mayBeToggled:!0,label:{zh:""}},GRIT:{name:"Grit",label:{zh:""}},SHADOW_WALL:{name:"Shadow Wall",label:{zh:""}},DARK_MIND:{name:"Dark Mind",label:{zh:""}},LIVING_DEAD:{name:"Living Dead",label:{zh:""}},WALKING_DEAD:{name:"Walking Dead",label:{zh:""}},UNDEAD_REBIRTH:{name:"Undead Rebirth",label:{zh:""}},DARK_MISSIONARY:{name:"Dark Missionary",label:{zh:""}},DELIRIUM:{name:"Delirium",maximumStacks:3,label:{zh:""}},BLOOD_WEAPON:{name:"Blood Weapon",maximumStacks:3,label:{zh:""}},BLACKEST_NIGHT:{name:"Blackest Night",label:{zh:""}},SCORN:{name:"Scorn",label:{zh:""}},OBLATION:{name:"Oblation",label:{zh:""}},SHADOWED_VIGIL:{name:"Shadowed Vigil",label:{zh:""}},VIGILANT:{name:"Vigilant",label:{zh:""}}}),Ax=ie()({DRK_COMBO_TRACKER:{name:"DRK Combo",label:{zh:""}},DRK_AOE_COMBO_TRACKER:{name:"DRK AOE Combo",label:{zh:"AOE"}},DRK_DELIRIUM_COMBO_TRACKER:{name:"DRK Delirium Combo",label:{zh:""}},DARK_ARTS:{name:"Dark Arts",label:{zh:""}},ESTEEM_TRACKER:{name:"Esteem Attacks",label:{zh:""}}}),Rx=ie()({DAKRSIDE_MASTERY:{name:"Darkside Mastery",level:74},ENHANCED_UNMEND:{name:"Enhanced Unmend",level:84},ENHANCED_LIVING_SHADOW:{name:"Enhanced Living Shadow",level:88},ENHANCED_LIVING_SHADOW_II:{name:"Enhanced Living Shadow II",level:90},SHADOW_WALL_MASTERY:{name:"Shadow Wall Mastery",level:92},ENHANCED_DELIRIUM:{name:"Enhanced Delirium",level:96},ENHANCED_LIVING_SHADOW_III:{name:"Enhanced Living Shadow III",level:100}}),Tx={...mx,...QT,...Ax},Sx=ie()({LIGHTNING_SHOT:{id:16143,name:"Lightning Shot",label:{zh:""}},KEEN_EDGE:{id:16137,name:"Keen Edge",label:{zh:""}},BRUTAL_SHELL:{id:16139,name:"Brutal Shell",label:{zh:""}},SOLID_BARREL:{id:16145,name:"Solid Barrel",label:{zh:""}},DEMON_SLICE:{id:16141,name:"Demon Slice",label:{zh:""}},DEMON_SLAUGHTER:{id:16149,name:"Demon Slaughter",label:{zh:""}},BURST_STRIKE:{id:16162,name:"Burst Strike",label:{zh:""}},FATED_CIRCLE:{id:16163,name:"Fated Circle",label:{zh:""}},BLOODFEST:{id:16164,name:"Bloodfest",label:{zh:""}},NO_MERCY:{id:16138,name:"No Mercy",label:{zh:""}},SONIC_BREAK:{id:16153,name:"Sonic Break",label:{zh:""}},GNASHING_FANG:{id:16146,name:"Gnashing Fang",label:{zh:""}},SAVAGE_CLAW:{id:16147,name:"Savage Claw",label:{zh:""}},WICKED_TALON:{id:16150,name:"Wicked Talon",label:{zh:""}},DOUBLE_DOWN:{id:25760,name:"Double Down",label:{zh:""}},REIGN_OF_BEASTS:{id:36937,name:"Reign of Beasts",label:{zh:""}},NOBLE_BLOOD:{id:36938,name:"Noble Blood",label:{zh:""}},LION_HEART:{id:36939,name:"Lion Heart",label:{zh:""}},CONTINUATION:{id:16155,name:"Continuation",label:{zh:""}},HYPERVELOCITY:{id:25759,name:"Hypervelocity",label:{zh:""}},FATED_BRAND:{id:36936,name:"Fated Brand",label:{zh:""}},JUGULAR_RIP:{id:16156,name:"Jugular Rip",label:{zh:""}},ABDOMEN_TEAR:{id:16157,name:"Abdomen Tear",label:{zh:""}},EYE_GOUGE:{id:16158,name:"Eye Gouge",label:{zh:""}},DANGER_ZONE:{id:16144,name:"Danger Zone",label:{zh:""}},BLASTING_ZONE:{id:16165,name:"Blasting Zone",label:{zh:""}},BOW_SHOCK:{id:16159,name:"Bow Shock",label:{zh:""}},TRAJECTORY:{id:36934,name:"Trajectory",label:{zh:""}},HEART_OF_STONE:{id:16161,name:"Heart of Stone",label:{zh:""}},HEART_OF_CORUNDUM:{id:25758,name:"Heart of Corundum",label:{zh:""}},SUPERBOLIDE:{id:16152,name:"Superbolide",label:{zh:""}},CAMOUFLAGE:{id:16140,name:"Camouflage",label:{zh:""}},NEBULA:{id:16148,name:"Nebula",label:{zh:""}},GREAT_NEBULA:{id:36935,name:"Great Nebula",label:{zh:""}},HEART_OF_LIGHT:{id:16160,name:"Heart of Light",label:{zh:""}},AURORA:{id:16151,name:"Aurora",label:{zh:""}},ROYAL_GUARD:{id:16142,name:"Royal Guard",label:{zh:""}},RELEASE_ROYAL_GUARD:{id:32068,name:"Release Royal Guard",label:{zh:""}}}),Ix=ie()({cd_NO_MERCY:{name:"cd_NoMercy"},cd_BLOODFEST:{name:"cd_Bloodfest"},cd_CAMOUFLAGE:{name:"cd_Camouflage"},cd_ROYAL_GUARD:{name:"cd_RoyalGuard"},cd_RELEASE_ROYAL_GUARD:{name:"cd_ReleaseRoyalGuard"},cd_DANGER_ZONE:{name:"cd_DangerZone"},cd_BLASTING_ZONE:{name:"cd_BlastingZone"},cd_NEBULA:{name:"cd_Nebula"},cd_GREAT_NEBULA:{name:"cd_GreatNebula"},cd_AURORA:{name:"cd_Aurora"},cd_SUPERBOLIDE:{name:"cd_Superbolide"},cd_TRAJECTORY:{name:"cd_Trajectory"},cd_GNASHING_FANG:{name:"cd_GnashingFang"},cd_BOW_SHOCK:{name:"cd_BowShock"},cd_HEART_OF_LIGHT:{name:"cd_HeartOfLight"},cd_HEART_OF_STONE:{name:"cd_HeartOfStone"},cd_HEART_OF_CORUNDUM:{name:"cd_HeartOfCorundum"},cd_DOUBLE_DOWN:{name:"cd_DoubleDown"},cd_CONTINUATION:{name:"cd_Continuation"},cd_HYPERVELOCITY:{name:"cd_Hypervelocity"},cd_FATED_BRAND:{name:"cd_FatedBrand"},cd_JUGULAR_RIP:{name:"cd_JugularRip"},cd_ABDOMEN_TEAR:{name:"cd_AbdomenTear"},cd_EYE_GOUGE:{name:"cd_EyeGouge"}}),_x=ie()({POWDER_GAUGE:{name:"Powder Gauge",label:{zh:""}}}),JT=ie()({NO_MERCY:{name:"No Mercy",label:{zh:""}},AURORA:{name:"Aurora",label:{zh:""}},BOW_SHOCK_DOT:{name:"Bow Shock DoT",label:{zh:""}},CAMOUFLAGE:{name:"Camouflage",label:{zh:""}},HEART_OF_CORUNDUM:{name:"Heart of Corundum",label:{zh:""}},CLARITY_OF_CORUNDUM:{name:"Clarity of Corundum",label:{zh:""}},CATHARSIS_OF_CORUNDUM:{name:"Catharsis of Corundum",label:{zh:""}},NEBULA:{name:"Nebula",label:{zh:""}},GREAT_NEBULA:{name:"Great Nebula",label:{zh:""}},HEART_OF_LIGHT:{name:"Heart of Light",label:{zh:""}},HEART_OF_STONE:{name:"Heart of Stone",label:{zh:""}},READY_TO_BLAST:{name:"Ready to Blast",label:{zh:""}},READY_TO_BREAK:{name:"Ready to Break",label:{zh:""}},READY_TO_GOUGE:{name:"Ready to Gouge",label:{zh:""}},READY_TO_RAZE:{name:"Ready to Raze",label:{zh:""}},READY_TO_REIGN:{name:"Ready to Reign",label:{zh:""}},READY_TO_RIP:{name:"Ready to Rip",label:{zh:""}},READY_TO_TEAR:{name:"Ready to Tear",label:{zh:""}},ROYAL_GUARD:{name:"Royal Guard",label:{zh:""}},SONIC_BREAK_DOT:{name:"Sonic Break DoT",label:{zh:""}},SUPERBOLIDE:{name:"Superbolide",label:{zh:""}},BRUTAL_SHELL:{name:"Brutal Shell",label:{zh:""}},BLOODFEST:{name:"Bloodfest",label:{zh:""}}}),gx=ie()({GNB_COMBO_TRACKER:{name:"GNB Combo",label:{zh:""}},GNB_AOE_COMBO_TRACKER:{name:"GNB AOE Combo",label:{zh:"AOE"}},GNB_GNASHING_COMBO_TRACKER:{name:"GNB Gnashing Combo",label:{zh:""}},GNB_REIGN_COMBO_TRACKER:{name:"GNB Reign Combo",label:{zh:""}}}),px=ie()({DANGER_ZONE_MASTERY:{name:"Danger Zone Mastery",level:80},HEART_OF_STONE_MASTERY:{name:"Heart Of Stone Mastery",level:82},ENHANCED_AURORA:{name:"Enhanced Aurora",level:84},ENHANCED_CONTINUATION:{name:"Enhanced Continuation",level:86},CARTRIDGE_CHARGE_II:{name:"Cartridge Charge II",level:88},NEBULA_MASTERY:{name:"Nebula Mastery",level:92},ENHANCED_CONTINUATION_II:{name:"Enhanced Continuation II",level:96},ENHANCED_BLOODFEST:{name:"Enhanced Bloodfest",level:100}}),Nx={..._x,...JT,...gx},Cx=ie()({HEATED_SPLIT_SHOT:{id:7411,name:"Heated Split Shot",label:{zh:""}},HEATED_SLUG_SHOT:{id:7412,name:"Heated Slug Shot",label:{zh:""}},HEATED_CLEAN_SHOT:{id:7413,name:"Heated Clean Shot",label:{zh:""}},DRILL:{id:16498,name:"Drill",label:{zh:""}},HOT_SHOT:{id:2872,name:"Hot Shot",label:{zh:""}},AIR_ANCHOR:{id:16500,name:"Air Anchor",label:{zh:""}},CHAIN_SAW:{id:25788,name:"Chain Saw",label:{zh:""}},EXCAVATOR:{id:36981,name:"Excavator",label:{zh:""}},GAUSS_ROUND:{id:2874,name:"Gauss Round",label:{zh:""}},DOUBLE_CHECK:{id:36979,name:"Double Check",label:{zh:""}},RICOCHET:{id:2890,name:"Ricochet",label:{zh:""}},CHECKMATE:{id:36980,name:"Checkmate",label:{zh:""}},BLAZING_SHOT:{id:36978,name:"Blazing Shot",label:{zh:""}},WILDFIRE:{id:2878,name:"Wildfire",label:{zh:""}},DETONATOR:{id:16766,name:"Detonator",label:{zh:""}},HYPERCHARGE:{id:17209,name:"Hypercharge",label:{zh:""}},ROOK_AUTOTURRET:{id:2864,name:"Rook Autoturret",label:{zh:""}},ROOK_OVERDRIVE:{id:7415,name:"Rook Overdrive",label:{zh:""}},AUTOMATON_QUEEN:{id:16501,name:"Automaton Queen",label:{zh:""}},QUEEN_OVERDRIVE:{id:16502,name:"Queen Overdrive",label:{zh:""}},BARREL_STABILIZER:{id:7414,name:"Barrel Stabilizer",label:{zh:""}},REASSEMBLE:{id:2876,name:"Reassemble",label:{zh:""}},FULL_METAL_FIELD:{id:36982,name:"Full Metal Field",label:{zh:""}},SPREAD_SHOT:{id:2870,name:"Spread Shot",label:{zh:""}},SCATTERGUN:{id:25786,name:"Scattergun",label:{zh:""}},AUTO_CROSSBOW:{id:16497,name:"Auto Crossbow",label:{zh:""}},BIOBLASTER:{id:16499,name:"Bioblaster",label:{zh:""}},FLAMETHROWER:{id:7418,name:"Flamethrower",label:{zh:""}},DISMANTLE:{id:2887,name:"Dismantle",label:{zh:""}},TACTICIAN:{id:16889,name:"Tactician",label:{zh:""}},VOLLEY_FIRE:{id:2891,name:"Volley Fire",label:{zh:""}},ARM_PUNCH:{id:16504,name:"Arm Punch",label:{zh:""}},ROOK_OVERLOAD:{id:7416,name:"Rook Overload",label:{zh:""}},PILE_BUNKER:{id:16503,name:"Pile Bunker",label:{zh:""}},CROWNED_COLLIDER:{id:25787,name:"Crowned Collider",label:{zh:""}}}),bx=ie()({cd_REASSEMBLE:{name:"cd_Reassemble"},cd_DRILL:{name:"cd_Drill"},cd_CHECKMATE:{name:"cd_Checkmate"},cd_DOUBLE_CHECK:{name:"cd_DoubleCheck"},cd_AIR_ANCHOR:{name:"cd_AirAnchor"},cd_CHAINSAW:{name:"cd_Chainsaw",label:{zh:"CD"}},cd_BARREL_STABILIZER:{name:"cd_BarrelStabilizer"},cd_WILDFIRE:{name:"cd_Wildfire"},cd_QUEEN:{name:"cd_Queen",label:{zh:"CD"}},cd_OVERDRIVE:{name:"cd_Overdrive",label:{zh:"CD/"}},cd_DISMANTLE:{name:"cd_Dismantle"},cd_TACTICIAN:{name:"cd_Tactician"},cd_HYPERCHARGE:{name:"cd_Hypercharge"},cd_DETONATOR:{name:"cd_Detonator"},cd_FLAMETHROWER:{name:"cd_Flamethrower"}}),Ox=ie()({HEAT_GAUGE:{name:"Heat",label:{zh:""}},BATTERY_GAUGE:{name:"Battery",label:{zh:""}}}),eS=ie()({REASSEMBLED:{name:"Reassembled",label:{zh:""}},OVERHEATED:{name:"Overheated",label:{zh:""},maximumStacks:5},WILDFIRE:{name:"Wildfire",label:{zh:""}},WILDFIRE_SELF:{name:"Wildfire Self",label:{zh:""}},FLAMETHROWER:{name:"Flamethrower",label:{zh:""}},BIOBLASTER:{name:"Bioblaster",label:{zh:"dot"}},TACTICIAN:{name:"Tactician",label:{zh:"buff"}},HYPERCHARGED:{name:"Hypercharged",label:{zh:""}},EXCAVATOR_READY:{name:"Excavator Ready",label:{zh:""}},FULL_METAL_MACHINIST:{name:"Full Metal Machinist",label:{zh:""}}}),Dx=ie()({HEAT_COMBO:{name:"Heat Combo",label:{zh:""}},QUEEN:{name:"Queen",label:{zh:""}},QUEEN_PUNCHES:{name:"QueenPunches",label:{zh:""}},QUEEN_FINISHERS:{name:"QueenFinishers",label:{zh:""}},BATTERY_BONUS:{name:"BatteryBonus",label:{zh:""}},WILDFIRE_HITS:{name:"WildfireHits",label:{zh:""}}}),yx=ie()({CHARGED_ACTION_MASTERY:{name:"Charged Action Mastery",level:74},HOT_SHOT_MASTERY:{name:"Hot Shot Mastery",level:76},ENHANCED_WILD_FIRE:{name:"Enhanced Wildfire",level:88},PROMOTION:{name:"Promotion",level:80},SPREAD_SHOT_MASTERY:{name:"Spread Shot Mastery",level:82},ENHANCED_REASSEMBLE:{name:"Enhanced Reassemble",level:84},MARKSMANS_MASTERY:{name:"Marksman's Mastery",level:84},QUEENS_GAMBIT:{name:"Queen's Gambit",level:86},ENHANCED_TACTICIAN:{name:"Enhanced Tactician",level:88},DOUBLE_BARREL_MASTERY:{name:"Double-Barrel Mastery",level:92},ENHANCED_MULTI_WEAPON:{name:"Enhanced Multiweapon",level:94},MARKSMANS_MASTERY_II:{name:"Marksman's Mastery II",level:94},ENHANCED_MULTI_WEAPON_II:{name:"Enhanced Multiweapon II",level:96},ENHANCED_BARREL_STABILIZER:{name:"Enhanced Barrel Stabilizer",level:100}}),vx={...Ox,...eS,...Dx},Mx=ie()({BOOTSHINE:{id:53,name:"Bootshine",label:{zh:"",ja:""}},TRUE_STRIKE:{id:54,name:"True Strike",label:{zh:"",ja:""}},SNAP_PUNCH:{id:56,name:"Snap Punch",label:{zh:"",ja:""}},TWIN_SNAKES:{id:61,name:"Twin Snakes",label:{zh:"",ja:""}},ARM_OF_THE_DESTROYER:{id:62,name:"Arm of the Destroyer",label:{zh:"",ja:""}},DEMOLISH:{id:66,name:"Demolish",label:{zh:"",ja:""}},ROCKBREAKER:{id:70,name:"Rockbreaker",label:{zh:"",ja:""}},THUNDERCLAP:{id:25762,name:"Thunderclap",label:{zh:"",ja:""}},HOWLING_FIST:{id:25763,name:"Howling Fist",label:{zh:"",ja:""}},MANTRA:{id:65,name:"Mantra",label:{zh:"",ja:""}},FOUR_POINT_FURY:{id:16473,name:"Four-point Fury",label:{zh:"",ja:""}},DRAGON_KICK:{id:74,name:"Dragon Kick",label:{zh:"",ja:""}},PERFECT_BALANCE:{id:69,name:"Perfect Balance",label:{zh:"",ja:""}},FORM_SHIFT:{id:4262,name:"Form Shift",label:{zh:"",ja:""}},FORBIDDEN_MEDITATION:{id:36942,name:"Forbidden Meditation",label:{zh:"",ja:""}},THE_FORBIDDEN_CHAKRA:{id:3547,name:"The Forbidden Chakra",label:{zh:"",ja:""}},MASTERFUL_BLITZ:{id:25764,name:"Masterful Blitz",label:{zh:"",ja:""}},TORNADO_KICK:{id:3543,name:"Tornado Kick",label:{zh:"",ja:""}},ELIXIR_FIELD:{id:3545,name:"Elixir Field",label:{zh:"",ja:""}},CELESTIAL_REVOLUTION:{id:25765,name:"Celestial Revolution",label:{zh:"",ja:""}},FLINT_STRIKE:{id:25882,name:"Flint Strike",label:{zh:"",ja:""}},RIDDLE_OF_EARTH:{id:7394,name:"Riddle of Earth",label:{zh:"",ja:""}},EARTHS_REPLY:{id:36944,name:"Earth's Reply",label:{zh:"",ja:""}},RIDDLE_OF_FIRE:{id:7395,name:"Riddle of Fire",label:{zh:"",ja:""}},BROTHERHOOD:{id:7396,name:"Brotherhood",label:{zh:"",ja:""}},RIDDLE_OF_WIND:{id:25766,name:"Riddle of Wind",label:{zh:"",ja:""}},INSPIRITED_MEDITATION:{id:36941,name:"Inspirited Meditation",label:{zh:"",ja:""}},ENLIGHTENED_MEDITATION:{id:36943,name:"Enlightened Meditation",label:{zh:"",ja:""}},ENLIGHTENMENT:{id:16474,name:"Enlightenment",label:{zh:"",ja:""}},SIX_SIDED_STAR:{id:16476,name:"Six-sided Star",label:{zh:"",ja:""}},SHADOW_OF_THE_DESTROYER:{id:25767,name:"Shadow of the Destroyer",label:{zh:"",ja:""}},RISING_PHOENIX:{id:25768,name:"Rising Phoenix",label:{zh:"",ja:""}},PHANTOM_RUSH:{id:25769,name:"Phantom Rush",label:{zh:"",ja:""}},LEAPING_OPO:{id:36945,name:"Leaping Opo",label:{zh:"",ja:""}},RISING_RAPTOR:{id:36946,name:"Rising Raptor",label:{zh:"",ja:""}},POUNCING_COEURL:{id:36947,name:"Pouncing Coeurl",label:{zh:"",ja:""}},ELIXIR_BURST:{id:36948,name:"Elixir Burst",label:{zh:"",ja:""}},WINDS_REPLY:{id:36949,name:"Wind's Reply",label:{zh:"",ja:""}},FIRES_REPLY:{id:36950,name:"Fire's Reply",label:{zh:"",ja:""}}}),Lx=ie()({cd_THUNDERCLAP:{name:"cd_Thunderclap"},cd_MANTRA:{name:"cd_Mantra"},cd_PERFECT_BALANCE:{name:"cd_PerfectBalance"},cd_ENLIGHTENMENT:{name:"cd_Enlightenment"},cd_THE_FORBIDDEN_CHAKRA:{name:"cd_TheForbiddenChakra"},cd_RIDDLE_OF_EARTH:{name:"cd_RiddleOfEarth"},cd_EARTHS_REPLY:{name:"cd_EarthsReply"},cd_RIDDLE_OF_FIRE:{name:"cd_RiddleOfFire"},cd_BROTHERHOOD:{name:"cd_Brotherhood"},cd_RIDDLE_OF_WIND:{name:"cd_RiddleOfWind"}}),xx=ie()({CHAKRA:{name:"Chakra",label:{zh:""}},BEAST_CHAKRA:{name:"Beast Chakra",label:{zh:""}},BEAST_CHAKRA_TIMER:{name:"Beast Timer",label:{zh:""}},NADI:{name:"Nadi",label:{zh:"/"}},LUNAR_NADI:{name:"Lunar Nadi",label:{zh:""}},SOLAR_NADI:{name:"Solar Nadi",label:{zh:""}},OPO_OPOS_FURY:{name:"Opo-opo's Fury",label:{zh:""}},RAPTORS_FURY:{name:"Raptor's Fury",label:{zh:""}},COEURLS_FURY:{name:"Coeurl's Fury",label:{zh:""}}}),tS=ie()({MANTRA:{name:"Mantra",label:{zh:""}},OPO_OPO_FORM:{name:"Opo-opo Form",label:{zh:""}},RAPTOR_FORM:{name:"Raptor Form",label:{zh:""}},COEURL_FORM:{name:"Coeurl Form",label:{zh:""}},PERFECT_BALANCE:{name:"Perfect Balance",maximumStacks:3,label:{zh:""}},FORMLESS_FIST:{name:"Formless Fist",label:{zh:""}},RIDDLE_OF_EARTH:{name:"Riddle of Earth",label:{zh:""}},EARTHS_RESOLVE:{name:"Earth's Resolve",label:{zh:""}},EARTHS_RUMINATION:{name:"Earth's Rumination",label:{zh:""}},RIDDLE_OF_FIRE:{name:"Riddle of Fire",label:{zh:""}},FIRES_RUMINATION:{name:"Fire's Rumination",label:{zh:""}},BROTHERHOOD:{name:"Brotherhood",label:{zh:""}},MEDITATIVE_BROTHERHOOD:{name:"Meditative Brotherhood",label:{zh:""}},RIDDLE_OF_WIND:{name:"Riddle of Wind",label:{zh:""}},WINDS_RUMINATION:{name:"Wind's Rumination",label:{zh:""}},SIX_SIDED_STAR:{name:"Six-sided Star",label:{zh:""}}}),Hx=ie()({BEAST_CHAKRA_1:{name:"Beast Chakra 1",label:{zh:"1"}},BEAST_CHAKRA_2:{name:"Beast Chakra 2",label:{zh:"2"}},BEAST_CHAKRA_3:{name:"Beast Chakra 3",label:{zh:"3"}}}),kx=ie()({DEEP_MEDITATION_II:{name:"Deep Meditation II",level:74},HOWLING_FIST_MASTERY:{name:"Howling Fist Mastery",level:74},ENHANCED_GREASED_LIGHTNING_III:{name:"Enhanced Greased Lightning III",level:76},ARM_OF_THE_DESTROYER_MASTERY:{name:"Arm of the Destroyer Mastery",level:82},ENHANCED_THUNDERCLAP:{name:"Enhanced Thunderclap",level:84},MELEE_MASTERY_MNK:{name:"Melee Mastery MNK",level:84},FLINT_STRIKE_MASTERY:{name:"Flint Strike Mastery",level:86},ENHANCED_BROTHERHOOD:{name:"Enhanced Brotherhood",level:88},TORNADO_KICK_MASTERY:{name:"Tornado Kick Mastery",level:90},BEAST_CHAKRA_MASTERY:{name:"Beast Chakra Mastery",level:92},MELEE_MASTERY_II_MNK:{name:"Melee Mastery II MNK",level:94},ENHANCED_RIDDLE_OF_WIND:{name:"Enhanced Riddle of Wind",level:96},ENHANCED_RIDDLE_OF_FIRE:{name:"Enhanced Riddle of Fire",level:100}}),b0={...xx,...tS,...Hx},Ux=ie()({SPINNING_EDGE:{id:2240,name:"Spinning Edge",label:{zh:""}},SHADE_SHIFT:{id:2241,name:"Shade Shift",label:{zh:""}},GUST_SLASH:{id:2242,name:"Gust Slash",label:{zh:""}},HIDE:{id:2245,name:"Hide",label:{zh:""}},THROWING_DAGGER:{id:2247,name:"Throwing Dagger",label:{zh:""}},TRICK_ATTACK:{id:2258,name:"Trick Attack",label:{zh:""}},AEOLIAN_EDGE:{id:2255,name:"Aeolian Edge",label:{zh:""}},TEN:{id:2259,name:"Ten",label:{zh:""}},NINJUTSU:{id:2260,name:"Ninjutsu",label:{zh:""}},CHI:{id:2261,name:"Chi",label:{zh:""}},DEATH_BLOSSOM:{id:2254,name:"Death Blossom",label:{zh:""}},SHUKUCHI:{id:2262,name:"Shukuchi",label:{zh:""}},JIN:{id:2263,name:"Jin",label:{zh:""}},KASSATSU:{id:2264,name:"Kassatsu",label:{zh:""}},HAKKE_MUJINSATSU:{id:16488,name:"Hakke Mujinsatsu",label:{zh:""}},ARMOR_CRUSH:{id:3563,name:"Armor Crush",label:{zh:""}},DREAM_WITHIN_A_DREAM:{id:3566,name:"Dream Within a Dream",label:{zh:""}},HELLFROG_MEDIUM:{id:7401,name:"Hellfrog Medium",label:{zh:""}},DOKUMORI:{id:36957,name:"Dokumori",label:{zh:""}},BHAVACAKRA:{id:7402,name:"Bhavacakra",label:{zh:""}},TEN_CHI_JIN:{id:7403,name:"Ten Chi Jin",label:{zh:""}},MEISUI:{id:16489,name:"Meisui",label:{zh:""}},BUNSHIN:{id:16493,name:"Bunshin",label:{zh:""}},PHANTOM_KAMAITACHI:{id:25774,name:"Phantom Kamaitachi",label:{zh:""}},FORKED_RAIJU:{id:25777,name:"Forked Raiju",label:{zh:""}},FLEETING_RAIJU:{id:25778,name:"Fleeting Raiju",label:{zh:""}},KUNAIS_BANE:{id:36958,name:"Kunai's Bane",label:{zh:""}},DEATHFROG_MEDIUM:{id:36959,name:"Deathfrog Medium",label:{zh:""}},ZESHO_MEPPO:{id:36960,name:"Zesho Meppo",label:{zh:""}},TENRI_JINDO:{id:36961,name:"Tenri Jindo",label:{zh:""}},KATON:{id:2266,name:"Katon",label:{zh:""}},RAITON:{id:2267,name:"Raiton",label:{zh:""}},HYOTON:{id:2268,name:"Hyoton",label:{zh:""}},HUTON:{id:2269,name:"Huton",label:{zh:""}},DOTON:{id:2270,name:"Doton",label:{zh:""}},SUITON:{id:2271,name:"Suiton",label:{zh:""}},GOKA_MEKKYAKU:{id:16491,name:"Goka Mekkyaku",label:{zh:""}},HYOSHO_RANRYU:{id:16492,name:"Hyosho Ranryu",label:{zh:""}},RABBIT_MEDIUM:{id:2272,name:"Rabbit Medium",label:{zh:""}},FUMA_SHURIKEN:{id:2265,name:"Fuma Shuriken",label:{zh:""}},FUMA_SHURIKEN_TEN:{id:18873,name:"Fuma Shuriken (Ten)",label:{zh:""}},FUMA_SHURIKEN_CHI:{id:18874,name:"Fuma Shuriken (Chi)",label:{zh:""}},FUMA_SHURIKEN_JIN:{id:18875,name:"Fuma Shuriken (Jin)",label:{zh:""}},KATON_TEN:{id:18876,name:"Katon (Ten)",label:{zh:""}},RAITON_CHI:{id:18877,name:"Raiton (Chi)",label:{zh:""}},HYOTON_JIN:{id:18878,name:"Hyoton (Jin)",label:{zh:""}},HUTON_TEN:{id:18879,name:"Huton (Ten)",label:{zh:""}},DOTON_CHI:{id:18880,name:"Doton (Chi)",label:{zh:""}},SUITON_JIN:{id:18881,name:"Suiton (Jin)",label:{zh:""}}}),wx=ie()({cd_MUDRA_HACK:{name:"cd_MudraHack"},cd_MUDRA:{name:"cd_Mudra"},cd_SHADE_SHIFT:{name:"cd_Shadeshift"},cd_HIDE:{name:"cd_Hide"},cd_TRICK_ATTACK:{name:"cd_TrickAttack"},cd_SHUKUCHI:{name:"cd_Shukuchi"},cd_KASSATSU:{name:"cd_Kassatsu"},cd_DREAM_WITHIN_A_DREAM:{name:"cd_DREAM_WITHIN_A_DREAM"},cd_DOKUMORI:{name:"cd_Dokumori"},cd_TEN_CHI_JIN:{name:"cd_TenChiJin"},cd_MEISUI:{name:"cd_Meisui"},cd_BUNSHIN:{name:"cd_Bunshin"},cd_BHAVACAKRA:{name:"cd_Bhavacakra"},cd_TENRI_JINDO:{name:"cd_TenriJindo"}}),Px=ie()({KAZEMATOI:{name:"Kazematoi",label:{zh:""}},NINKI:{name:"Ninki",label:{zh:""}}}),nS=ie()({MUDRA:{name:"Mudra",label:{zh:""}},SHADE_SHIFT:{name:"Shade Shift",label:{zh:""}},HIDDEN:{name:"Hidden",label:{zh:""}},TRICK_ATTACK:{name:"Trick Attack",label:{zh:""}},KASSATSU:{name:"Kassatsu",label:{zh:""}},DOKUMORI:{name:"Dokumori",label:{zh:""}},TENRI_JINDO_READY:{name:"Tenri Jindo Ready",label:{zh:""}},TEN_CHI_JIN:{name:"Ten Chi Jin",maximumStacks:3,label:{zh:""}},MEISUI:{name:"Meisui",label:{zh:""}},SHADOW_WALKER:{name:"Shadow Walker",label:{zh:""}},BUNSHIN:{name:"Bunshin",maximumStacks:5,label:{zh:""}},PHANTOM_KAMAITACHI_READY:{name:"Phantom Kamaitachi Ready",label:{zh:""}},RAIJU_READY:{name:"Raiju Ready",maximumStacks:3,label:{zh:""}},KUNAIS_BANE:{name:"Kunai's Bane",label:{zh:""}},HIGI:{name:"Higi",label:{zh:""}},DOTON:{name:"Doton",mayBeToggled:!0,label:{zh:""}}}),Gx=ie()({NIN_COMBO_TRACKER:{name:"NIN Combo",label:{zh:""}},NIN_AOE_COMBO_TRACKER:{name:"NIN AOE Combo",label:{zh:"AOE"}},MUDRA_TRACKER:{name:"Mudra Tracker",label:{zh:""}},BUNNY:{name:"Bunny",label:{zh:""}}}),Bx=ie()({ENHANCED_SHUKUCHI_II:{name:"Enhanced Shukuchi II",level:74},MELEE_MASTERY_NIN:{name:"Melee Mastery NIN",level:74},ENHANCED_KASSATSU:{name:"Enhanced Kassatsu",level:76},SHUKIHO_II:{name:"Shukiho II",level:78},SHUKIHO_III:{name:"Shukiho III",level:84},MELEE_MASTERY_II_NIN:{name:"Melee Mastery II NIN",level:84},ENHANCED_MEISUI:{name:"Enhanced Meisui",level:88},ENHANCED_RAITON:{name:"Enhanced Raiton",level:90},TRICK_ATTACK_MASTERY:{name:"Trick Attack Mastery",level:92},MELEE_MASTERY_III_NIN:{name:"Melee Mastery III NIN",level:94},ENHANCED_DOKUMORI:{name:"Enhanced Dokumori",level:96},ENHANCED_TEN_CHI_JIN:{name:"Enhanced Ten Chi Jin",level:100}}),Fx={...Px,...nS,...Gx},jx=ie()({FIRE_IN_RED:{id:34650,name:"Fire in Red",label:{zh:"",ja:""}},AERO_IN_GREEN:{id:34651,name:"Aero in Green",label:{zh:"",ja:""}},WATER_IN_BLUE:{id:34652,name:"Water in Blue",label:{zh:"",ja:""}},FIRE_II_IN_RED:{id:34656,name:"Fire II in Red",label:{zh:"",ja:""},discordEmote:"Fire2inRed"},AERO_II_IN_GREEN:{id:34657,name:"Aero II in Green",label:{zh:"",ja:""},discordEmote:"Aero2inGreen"},WATER_II_IN_BLUE:{id:34658,name:"Water II in Blue",label:{zh:"",ja:""},discordEmote:"Water2inBlue"},BLIZZARD_IN_CYAN:{id:34653,name:"Blizzard in Cyan",label:{zh:"",ja:""}},STONE_IN_YELLOW:{id:34654,name:"Stone in Yellow",label:{zh:"",ja:""}},THUNDER_IN_MAGENTA:{id:34655,name:"Thunder in Magenta",label:{zh:"",ja:""}},BLIZZARD_II_IN_CYAN:{id:34659,name:"Blizzard II in Cyan",label:{zh:"",ja:""},discordEmote:"Blizzard2inCyan"},STONE_II_IN_YELLOW:{id:34660,name:"Stone II in Yellow",label:{zh:"",ja:""},discordEmote:"Stone2inYellow"},THUNDER_II_IN_MAGENTA:{id:34661,name:"Thunder II in Magenta",label:{zh:"",ja:""},discordEmote:"Thunder2inMagenta"},HOLY_IN_WHITE:{id:34662,name:"Holy in White",label:{zh:"",ja:""}},COMET_IN_BLACK:{id:34663,name:"Comet in Black",label:{zh:"",ja:""}},RAINBOW_DRIP:{id:34688,name:"Rainbow Drip",label:{zh:"",ja:""}},STAR_PRISM:{id:34681,name:"Star Prism",label:{zh:"",ja:""}},TEMPERA_COAT:{id:34685,name:"Tempera Coat",label:{zh:"",ja:""}},TEMPERA_GRASSA:{id:34686,name:"Tempera Grassa",label:{zh:"",ja:""}},TEMPERA_COAT_POP:{name:"Pop Tempera Coat",label:{zh:"",ja:""}},TEMPERA_GRASSA_POP:{name:"Pop Tempera Grassa",label:{zh:"",ja:""}},SMUDGE:{id:34684,name:"Smudge",label:{zh:"",ja:""}},SUBTRACTIVE_PALETTE:{id:34683,name:"Subtractive Palette",label:{zh:"",ja:""}},CREATURE_MOTIF:{id:34689,name:"Creature Motif",label:{zh:"",ja:""}},POM_MOTIF:{id:34664,name:"Pom Motif",label:{zh:"",ja:""}},WING_MOTIF:{id:34665,name:"Wing Motif",label:{zh:"",ja:""}},CLAW_MOTIF:{id:34666,name:"Claw Motif",label:{zh:"",ja:""}},MAW_MOTIF:{id:34667,name:"Maw Motif",label:{zh:"",ja:""}},LIVING_MUSE:{id:35347,name:"Living Muse",label:{zh:"",ja:""}},POM_MUSE:{id:34670,name:"Pom Muse",label:{zh:"",ja:""}},WINGED_MUSE:{id:34671,name:"Winged Muse",label:{zh:"",ja:""}},CLAWED_MUSE:{id:34672,name:"Clawed Muse",label:{zh:"",ja:""}},FANGED_MUSE:{id:34673,name:"Fanged Muse",label:{zh:"",ja:""}},MOG_OF_THE_AGES:{id:34676,name:"Mog of the Ages",label:{zh:"",ja:""}},RETRIBUTION_OF_THE_MADEEN:{id:34677,name:"Retribution of the Madeen",label:{zh:"",ja:""}},WEAPON_MOTIF:{id:34690,name:"Weapon Motif",label:{zh:"",ja:""}},STEEL_MUSE:{id:35348,name:"Steel Muse",label:{zh:"",ja:""}},HAMMER_MOTIF:{id:34668,name:"Hammer Motif",label:{zh:"",ja:""}},STRIKING_MUSE:{id:34674,name:"Striking Muse",label:{zh:"",ja:""}},HAMMER_STAMP:{id:34678,name:"Hammer Stamp",label:{zh:"",ja:""}},HAMMER_BRUSH:{id:34679,name:"Hammer Brush",label:{zh:"",ja:""}},POLISHING_HAMMER:{id:34680,name:"Polishing Hammer",label:{zh:"",ja:""}},LANDSCAPE_MOTIF:{id:34691,name:"Landscape Motif",label:{zh:"",ja:""}},SCENIC_MUSE:{id:35349,name:"Scenic Muse",label:{zh:"",ja:""}},STARRY_SKY_MOTIF:{id:34669,name:"Starry Sky Motif",label:{zh:"",ja:""}},STARRY_MUSE:{id:34675,name:"Starry Muse",label:{zh:"",ja:""}}}),zx=ie()({cd_TEMPERA_COAT:{name:"cd_TemperaCoat"},cd_SMUDGE:{name:"cd_Smudge"},cd_LIVING_MUSE:{name:"cd_LivingMuse"},cd_PORTRAIT:{name:"cd_Portrait",label:{zh:"CD/"}},cd_STEEL_MUSE:{name:"cd_SteelMuse"},cd_SCENIC_MUSE:{name:"cd_ScenicMuse"},cd_SUBTRACTIVE:{name:"cd_Subtractive",label:{zh:"CD"}},cd_GRASSA:{name:"cd_Grassa",label:{zh:"CD"}},cd_TEMPERA_POP:{name:"cd_TemperaPop",label:{zh:"CD"}}}),Yx=ie()({PORTRAIT:{name:"Portrait",label:{zh:"//"}},DEPICTIONS:{name:"Depictions",label:{zh:"///"}},CREATURE_CANVAS:{name:"Creature Canvas",label:{zh:""}},WEAPON_CANVAS:{name:"Weapon Canvas",label:{zh:""}},LANDSCAPE_CANVAS:{name:"Landscape Canvas",label:{zh:""}},PALETTE_GAUGE:{name:"Palette Gauge",label:{zh:""}},PAINT:{name:"Paint",label:{zh:""}}}),iS=ie()({AETHERHUES:{name:"Aetherhues",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:2},MONOCHROME_TONES:{name:"Monochrome Tones",label:{zh:""}},SUBTRACTIVE_PALETTE:{name:"Subtractive Palette",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:3},HAMMER_TIME:{name:"Hammer Time",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:3},INSPIRATION:{name:"Inspiration",label:{zh:""},mayBeToggled:!0},SUBTRACTIVE_SPECTRUM:{name:"Subtractive Spectrum",label:{zh:""}},HYPERPHANTASIA:{name:"Hyperphantasia",label:{zh:""},maximumStacks:5},RAINBOW_BRIGHT:{name:"Rainbow Bright",label:{zh:""}},STARSTRUCK:{name:"Starstruck",label:{zh:""}},STARRY_MUSE:{name:"Starry Muse",label:{zh:""}},TEMPERA_COAT:{name:"Tempera Coat",label:{zh:""}},TEMPERA_GRASSA:{name:"Tempera Grassa",label:{zh:""}},SMUDGE:{name:"Smudge",label:{zh:""}}}),Kx=ie()({HAMMER_COMBO:{name:"Hammer Combo Counter",label:{zh:""}}}),Vx=ie()({PICTOMANCY_MASTERY_II:{name:"Pictomancy Mastery II",level:74},ENHANCED_ARTISTRY:{name:"Enhanced Artistry",level:80},ENHANCED_PICTOMANCY:{name:"Enhanced Pictomancy",level:82},ENHANCED_SMUDGE:{name:"Enhanced Smudge",level:84},PICTOMANCY_MASTERY_III:{name:"Pictomancy Mastery III",level:84},ENHANCED_PICTOMANCY_II:{name:"Enhanced Pictomancy II",level:86},ENHANCED_TEMPERA:{name:"Enhanced Tempera",level:88},ENHANCED_PALETTE:{name:"Enhanced Palette",level:90},ENHANCED_PICTOMANCY_III:{name:"Enhanced Pictomancy III",level:92},PICTOMANCY_MASTERY_IV:{name:"Pictomancy Mastery IV",level:94},ENHANCED_PICTOMANCY_IV:{name:"Enhanced Pictomancy IV",level:96},ENHANCED_PICTOMANCY_V:{name:"Enhanced Pictomancy V",level:100}}),Wx={...Yx,...iS,...Kx},Xx=ie()({FAST_BLADE:{id:9,name:"Fast Blade",label:{zh:""}},FIGHT_OR_FLIGHT:{id:20,name:"Fight or Flight",label:{zh:""}},RIOT_BLADE:{id:15,name:"Riot Blade",label:{zh:""}},TOTAL_ECLIPSE:{id:7381,name:"Total Eclipse",label:{zh:""}},SHIELD_BASH:{id:16,name:"Shield Bash",label:{zh:""}},IRON_WILL:{id:28,name:"Iron Will",label:{zh:""}},RELEASE_IRON_WILL:{id:32065,name:"Release Iron Will",label:{zh:""}},SHIELD_LOB:{id:24,name:"Shield Lob",label:{zh:""}},SPIRITS_WITHIN:{id:29,name:"Spirits Within",label:{zh:""}},SHELTRON:{id:3542,name:"Sheltron",label:{zh:""}},SENTINEL:{id:17,name:"Sentinel",label:{zh:""}},PROMINENCE:{id:16457,name:"Prominence",label:{zh:""}},COVER:{id:27,name:"Cover",label:{zh:""}},CIRCLE_OF_SCORN:{id:23,name:"Circle of Scorn",label:{zh:""}},HALLOWED_GROUND:{id:30,name:"Hallowed Ground",label:{zh:""}},BULWARK:{id:22,name:"Bulwark",label:{zh:""}},GORING_BLADE:{id:3538,name:"Goring Blade",label:{zh:""}},DIVINE_VEIL:{id:3540,name:"Divine Veil",label:{zh:""}},CLEMENCY:{id:3541,name:"Clemency",label:{zh:""}},ROYAL_AUTHORITY:{id:3539,name:"Royal Authority",label:{zh:""}},INTERVENTION:{id:7382,name:"Intervention",label:{zh:""}},HOLY_SPIRIT:{id:7384,name:"Holy Spirit",label:{zh:""}},INTERVENE:{id:16461,name:"Intervene",label:{zh:""}},REQUIESCAT:{id:7383,name:"Requiescat",label:{zh:""}},PASSAGE_OF_ARMS:{id:7385,name:"Passage of Arms",label:{zh:""}},HOLY_CIRCLE:{id:16458,name:"Holy Circle",label:{zh:""}},ATONEMENT:{id:16460,name:"Atonement",label:{zh:""}},SUPPLICATION:{id:36918,name:"Supplication",label:{zh:"2"}},SEPULCHRE:{id:36919,name:"Sepulchre",label:{zh:"3"}},CONFITEOR:{id:16459,name:"Confiteor",label:{zh:""}},HOLY_SHELTRON:{id:25746,name:"Holy Sheltron",label:{zh:""}},EXPIACION:{id:25747,name:"Expiacion",label:{zh:""}},BLADE_OF_FAITH:{id:25748,name:"Blade of Faith",label:{zh:"2"}},BLADE_OF_TRUTH:{id:25749,name:"Blade of Truth",label:{zh:"3"}},BLADE_OF_VALOR:{id:25750,name:"Blade of Valor",label:{zh:"4"}},GUARDIAN:{id:36920,name:"Guardian",label:{zh:""}},IMPERATOR:{id:36921,name:"Imperator",label:{zh:""}},BLADE_OF_HONOR:{id:36922,name:"Blade of Honor",label:{zh:""}}}),qx=ie()({cd_FIGHT_OR_FLIGHT:{name:"cd_FightOrFlight"},cd_IRON_WILL:{name:"cd_IronWill"},cd_RELEASE_IRON_WILL:{name:"cd_ReleaseIronWill"},cd_SPIRITS_WITHIN:{name:"cd_SpiritsWithin"},cd_SHELTRON:{name:"cd_Sheltron"},cd_SENTINEL:{name:"cd_Sentinel"},cd_COVER:{name:"cd_Cover"},cd_CIRCLE_OF_SCORN:{name:"cd_CircleOfScorn"},cd_HALLOWED_GROUND:{name:"cd_HallowedGround"},cd_BULWARK:{name:"cd_Bulwark"},cd_DIVINE_VEIL:{name:"cd_DivineVeil"},cd_INTERVENTION:{name:"cd_Intervention"},cd_INTERVENE:{name:"cd_Intervene"},cd_REQUIESCAT:{name:"cd_Requiescat"},cd_PASSAGE_OF_ARMS:{name:"cd_PassageOfArms"},cd_HOLY_SHELTRON:{name:"cd_HolySheltron"},cd_EXPIACION:{name:"cd_Expiacion"},cd_GUARDIAN:{name:"cd_Guardian"},cd_IMPERATOR:{name:"cd_Imperator"},cd_BLADE_OF_HONOR:{name:"cd_BladeOfHonor"}}),Zx=ie()({OATH_GAUGE:{name:"Oath Gauge",label:{zh:""}}}),aS=ie()({FIGHT_OR_FLIGHT:{name:"Fight or Flight",label:{zh:""}},IRON_WILL:{name:"Iron Will",label:{zh:""}},CIRCLE_OF_SCORN_DOT:{name:"Circle of Scorn DoT",label:{zh:"DOT"}},SHELTRON:{name:"Sheltron",label:{zh:""}},SENTINEL:{name:"Sentinel",label:{zh:""}},COVER:{name:"Cover",label:{zh:""}},HALLOWED_GROUND:{name:"Hallowed Ground",label:{zh:""}},BULWARK:{name:"Bulwark",label:{zh:""}},GORING_BLADE_READY:{name:"Goring Blade Ready",label:{zh:""}},DIVINE_VEIL:{name:"Divine Veil",label:{zh:""}},ATONEMENT_READY:{name:"Atonement Ready",label:{zh:""}},DIVINE_MIGHT:{name:"Divine Might",label:{zh:""}},INTERVENTION:{name:"Intervention",label:{zh:""}},KNIGHTS_RESOLVE:{name:"Knight's Resolve",label:{zh:""}},KNIGHTS_BENEDICTION:{name:"Knight's Benediction",label:{zh:""}},REQUIESCAT:{name:"Requiescat",maximumStacks:4,label:{zh:""}},CONFITEOR_READY:{name:"Confiteor Ready",label:{zh:""}},PASSAGE_OF_ARMS:{name:"Passage of Arms",label:{zh:""}},ARMS_UP:{name:"Arms Up",label:{zh:""}},SUPPLICATION_READY:{name:"Supplication Ready",label:{zh:""}},SEPULCHRE_READY:{name:"Sepulchre Ready",label:{zh:""}},HOLY_SHELTRON:{name:"Holy Sheltron",label:{zh:""}},BLADE_OF_HONOR_READY:{name:"Blade of Honor Ready",label:{zh:""}},GUARDIAN:{name:"Guardian",label:{zh:""}},GUARDIANS_WILL:{name:"Guardian's Will",label:{zh:""}}}),$x=ie()({PLD_COMBO_TRACKER:{name:"PLD Combo Tracker",label:{zh:""}},PLD_CONFITEOR_COMBO_TRACKER:{name:"PLD Confiteor Combo Tracker",label:{zh:""}},PLD_AOE_COMBO_TRACKER:{name:"PLD AOE Combo Tracker",label:{zh:"AOE"}}}),Qx=ie()({ENHANCED_PROMINENCE:{name:"Enhanced Prominence",level:72},ENHANCED_SHELTRON:{name:"Enhanced Sheltron",level:74},SWORD_OATH:{name:"Sword Oath",level:76},ENHANCED_REQUIESCAT:{name:"Enhanced Requiescat",level:80},SHELTRON_MASTERY:{name:"Sheltron Mastery",level:82},ENHANCED_INTERVENTION:{name:"Enhanced Intervention",level:82},DIVINE_MAGIC_MASTERY_II:{name:"Divine Magic Mastery II",level:84},SPIRITS_WITHIN_MASTERY:{name:"Spirits Within Mastery",level:86},ENHANCED_DIVINE_VEIL:{name:"Enhanced Divine Veil",level:88},SENTINEL_MASTERY:{name:"Sentinel Mastery",level:92},REQUIESCAT_MASTERY:{name:"Requiescat Mastery",level:96},ENHANCED_BLADE_OF_VALOR:{name:"Enhanced Blade of Valor",level:100}}),Jx={...Zx,...aS,...$x},eH=ie()({RIPOSTE:{id:7504,name:"Riposte",label:{zh:"",ja:""}},VERTHUNDER:{id:7505,name:"Verthunder",label:{zh:"",ja:""}},CORPS_A_CORPS:{id:7506,name:"Corps-a-corps",label:{zh:"",ja:""}},VERAERO:{id:7507,name:"Veraero",label:{zh:"",ja:""}},VERFIRE:{id:7510,name:"Verfire",label:{zh:"",ja:""}},VERSTONE:{id:7511,name:"Verstone",label:{zh:"",ja:""}},ZWERCHHAU:{id:7512,name:"Zwerchhau",label:{zh:"",ja:""}},DISPLACEMENT:{id:7515,name:"Displacement",label:{zh:"",ja:""}},FLECHE:{id:7517,name:"Fleche",label:{zh:"",ja:""}},REDOUBLEMENT:{id:7516,name:"Redoublement",label:{zh:"",ja:""}},ACCELERATION:{id:7518,name:"Acceleration",label:{zh:"",ja:""}},MOULINET:{id:7513,name:"Moulinet",label:{zh:"",ja:""}},VERCURE:{id:7514,name:"Vercure",label:{zh:"",ja:""}},CONTRE_SIXTE:{id:7519,name:"Contre Sixte",label:{zh:"",ja:""}},EMBOLDEN:{id:7520,name:"Embolden",label:{zh:"",ja:""}},MANAFICATION:{id:7521,name:"Manafication",label:{zh:"",ja:""}},JOLT_II:{id:7524,name:"Jolt II",label:{zh:"",ja:""}},VERRAISE:{id:7523,name:"Verraise",label:{zh:"",ja:""}},IMPACT:{id:16526,name:"Impact",label:{zh:"",ja:""}},VERFLARE:{id:7525,name:"Verflare",label:{zh:"",ja:""}},VERHOLY:{id:7526,name:"Verholy",label:{zh:"",ja:""}},ENCHANTED_RIPOSTE:{id:7527,name:"Enchanted Riposte",label:{zh:"",ja:""}},ENCHANTED_ZWERCHHAU:{id:7528,name:"Enchanted Zwerchhau",label:{zh:"",ja:""}},ENCHANTED_REDOUBLEMENT:{id:7529,name:"Enchanted Redoublement",label:{zh:"",ja:""}},ENCHANTED_MOULINET:{id:7530,name:"Enchanted Moulinet",label:{zh:"",ja:""}},VERTHUNDER_II:{id:16524,name:"Verthunder II",label:{zh:"",ja:""}},VERAERO_II:{id:16525,name:"Veraero II",label:{zh:"",ja:""}},ENGAGEMENT:{id:16527,name:"Engagement",label:{zh:"",ja:""}},ENCHANTED_REPRISE:{id:16528,name:"Enchanted Reprise",label:{zh:"",ja:""}},REPRISE:{id:16529,name:"Reprise",label:{zh:"",ja:""}},SCORCH:{id:16530,name:"Scorch",label:{zh:"",ja:""}},VERTHUNDER_III:{id:25855,name:"Verthunder III",label:{zh:"",ja:""}},VERAERO_III:{id:25856,name:"Veraero III",label:{zh:"",ja:""}},MAGICK_BARRIER:{id:25857,name:"Magick Barrier",label:{zh:"",ja:""}},RESOLUTION:{id:25858,name:"Resolution",label:{zh:"",ja:""}},ENCHANTED_MOULINET_II:{id:37002,name:"Enchanted Moulinet Deux",label:{zh:"",ja:""}},ENCHANTED_MOULINET_III:{id:37003,name:"Enchanted Moulinet Trois",label:{zh:"",ja:""}},JOLT_III:{id:37004,name:"Jolt III",label:{zh:"",ja:""}},VICE_OF_THORNS:{id:37005,name:"Vice of Thorns",label:{zh:"",ja:""}},GRAND_IMPACT:{id:37006,name:"Grand Impact",label:{zh:"",ja:""}},PREFULGENCE:{id:37007,name:"Prefulgence",label:{zh:"",ja:""}}}),tH=ie()({cd_CORPS_A_CORPS:{name:"cd_CorpsACorps"},cd_DISPLACEMENT:{name:"cd_Displacement"},cd_FLECHE:{name:"cd_Fleche"},cd_ACCELERATION:{name:"cd_Acceleration"},cd_CONTRE_SIXTE:{name:"cd_ContreSixte"},cd_EMBOLDEN:{name:"cd_Embolden"},cd_MANAFICATION:{name:"cd_Manafication"},cd_MAGICK_BARRIER:{name:"cd_MagickBarrier"},cd_VICE_OF_THORNS:{name:"cd_ViceOfThorns"},cd_PREFULGENCE:{name:"cd_Prefulgence"}}),nH=ie()({WHITE_MANA:{name:"White Mana",label:{zh:""}},BLACK_MANA:{name:"Black Mana",label:{zh:""}},MANA_STACKS:{name:"Mana Stacks",label:{zh:""}}}),oS=ie()({ACCELERATION:{name:"Acceleration",label:{zh:""}},DUALCAST:{name:"Dualcast",label:{zh:""}},EMBOLDEN:{name:"Embolden",label:{zh:""}},GRAND_IMPACT_READY:{name:"Grand Impact Ready",label:{zh:""}},MAGICK_BARRIER:{name:"Magick Barrier",label:{zh:""}},MAGICKED_SWORDPLAY:{name:"Magicked Swordplay",label:{zh:""},maximumStacks:3},MANAFICATION:{name:"Manafication",label:{zh:""}},PREFULGENCE_READY:{name:"Prefulgence Ready",label:{zh:""}},THORNED_FLOURISH:{name:"Thorned Flourish",label:{zh:""}},VERFIRE_READY:{name:"Verfire Ready",label:{zh:""}},VERSTONE_READY:{name:"Verstone Ready",label:{zh:""}}}),iH=ie()({RDM_MELEE_COUNTER:{name:"RDM Melee Combo",label:{zh:""}},RDM_FINISHER_COUNTER:{name:"RDM Finisher Combo",label:{zh:"/"}},RDM_AOE_COUNTER:{name:"RDM AoE Combo",label:{zh:"AOE"}}}),aH=ie()({ENHANCED_DISPLACEMENT:{name:"Enhanced Displacement",level:72},RED_MAGIC_MASTERY:{name:"Red Magic Mastery",level:74},RED_MAGIC_MASTERY_II:{name:"Red Magic Mastery II",level:82},RED_MAGIC_MASTERY_III:{name:"Red Magic Mastery III",level:84},ENHANCED_ACCELERATION:{name:"Enhanced Acceleration",level:88},ENHANCED_EMBOLDEN:{name:"Enhanced Embolden",level:92},ENCHANTED_BLADE_MASTERY:{name:"Enchanted Blade Mastery",level:94},ENHANCED_ACCELERATION_II:{name:"Enhanced Acceleration II",level:96},ENHANCED_MANAFICATION:{name:"Enhanced Manafication",level:100}}),oH={...nH,...oS,...iH},lH=ie()({SLICE:{id:24373,name:"Slice",label:{zh:""}},WAXING_SLICE:{id:24374,name:"Waxing Slice",label:{zh:""}},INFERNAL_SLICE:{id:24375,name:"Infernal Slice",label:{zh:""}},SHADOW_OF_DEATH:{id:24378,name:"Shadow of Death",label:{zh:""}},SOUL_SLICE:{id:24380,name:"Soul Slice",label:{zh:""}},GIBBET:{id:24382,name:"Gibbet",label:{zh:""}},GALLOWS:{id:24383,name:"Gallows",label:{zh:""}},EXECUTIONERS_GIBBET:{id:36970,name:"Executioner's Gibbet",label:{zh:""}},EXECUTIONERS_GALLOWS:{id:36971,name:"Executioner's Gallows",label:{zh:""}},VOID_REAPING:{id:24395,name:"Void Reaping",label:{zh:""}},CROSS_REAPING:{id:24396,name:"Cross Reaping",label:{zh:""}},PLENTIFUL_HARVEST:{id:24385,name:"Plentiful Harvest",label:{zh:""}},HARVEST_MOON:{id:24388,name:"Harvest Moon",label:{zh:""}},COMMUNIO:{id:24398,name:"Communio",label:{zh:""}},PERFECTIO:{id:36973,name:"Perfectio",label:{zh:""}},SOULSOW:{id:24387,name:"Soulsow",label:{zh:""}},HARPE:{id:24386,name:"Harpe",label:{zh:""}},BLOOD_STALK:{id:24389,name:"Blood Stalk",label:{zh:""}},UNVEILED_GIBBET:{id:24390,name:"Unveiled Gibbet",label:{zh:""}},UNVEILED_GALLOWS:{id:24391,name:"Unveiled Gallows",label:{zh:""}},LEMURES_SLICE:{id:24399,name:"Lemure's Slice",label:{zh:""}},SACRIFICIUM:{id:36969,name:"Sacrificium",label:{zh:""}},ARCANE_CIRCLE:{id:24405,name:"Arcane Circle",label:{zh:""}},GLUTTONY:{id:24393,name:"Gluttony",label:{zh:""}},ENSHROUD:{id:24394,name:"Enshroud",label:{zh:""}},SPINNING_SCYTHE:{id:24376,name:"Spinning Scythe",label:{zh:""}},NIGHTMARE_SCYTHE:{id:24377,name:"Nightmare Scythe",label:{zh:""}},WHORL_OF_DEATH:{id:24379,name:"Whorl of Death",label:{zh:""}},SOUL_SCYTHE:{id:24381,name:"Soul Scythe",label:{zh:""}},GUILLOTINE:{id:24384,name:"Guillotine",label:{zh:""}},EXECUTIONERS_GUILLOTINE:{id:36972,name:"Executioner's Guillotine",label:{zh:""}},GRIM_REAPING:{id:24397,name:"Grim Reaping",label:{zh:""}},GRIM_SWATHE:{id:24392,name:"Grim Swathe",label:{zh:""}},LEMURES_SCYTHE:{id:24400,name:"Lemure's Scythe",label:{zh:""}},ARCANE_CREST:{id:24404,name:"Arcane Crest",label:{zh:""}},ARCANE_CREST_POP:{name:"Pop Arcane Crest",label:{zh:""}},HELLS_INGRESS:{id:24401,name:"Hell's Ingress",label:{zh:""}},HELLS_EGRESS:{id:24402,name:"Hell's Egress",label:{zh:""}},REGRESS:{id:24403,name:"Regress",label:{zh:""}},GAIN_SOUL_GAUGE:{name:"+10 Soul Gauge",label:{zh:"+10"}}}),sH=ie()({cd_ARCANE_CIRCLE:{name:"cd_ArcaneCircle"},cd_GLUTTONY:{name:"cd_Gluttony"},cd_SOUL_SLICE:{name:"cd_SoulSlice"},cd_ENSHROUD:{name:"cd_Enshroud"},cd_INGRESS_EGRESS:{name:"cd_IngressEgress",label:{zh:"CD/"}},cd_ARCANE_CREST:{name:"cd_ArcaneCrest"},cd_ARCANE_CREST_POP:{name:"cd_ArcaneCrestPop"},cd_BLOOD_STALK:{name:"cd_BloodStalk"},cd_LEMURES_SLICE:{name:"cd_LemuresSlice"},cd_SACRIFICIUM:{name:"cd_Sacrificium"},cd_GAIN_SOUL_GAUGE:{name:"cd_GainSoulGauge"}}),rH=ie()({SOUL:{name:"Soul",label:{zh:""}},SHROUD:{name:"Shroud",label:{zh:""}},LEMURE_SHROUD:{name:"Lemure Shroud",label:{zh:""}},VOID_SHROUD:{name:"Void Shroud",label:{zh:""}}}),lS=ie()({DEATHS_DESIGN:{name:"Death's Design",label:{zh:""}},SOUL_REAVER:{name:"Soul Reaver",label:{zh:""},maximumStacks:2},ENHANCED_GIBBET:{name:"Enhanced Gibbet",label:{zh:""}},ENHANCED_GALLOWS:{name:"Enhanced Gallows",label:{zh:""}},EXECUTIONER:{name:"Executioner",label:{zh:""},maximumStacks:2},ENSHROUDED:{name:"Enshrouded",label:{zh:""}},ENHANCED_VOID_REAPING:{name:"Enhanced Void Reaping",label:{zh:""}},ENHANCED_CROSS_REAPING:{name:"Enhanced Cross Reaping",label:{zh:""}},OBLATIO:{name:"Oblatio",label:{zh:""}},IDEAL_HOST:{name:"Ideal Host",label:{zh:""}},PERFECTIO_OCCULTA:{name:"Perfectio Occulta",label:{zh:""}},PERFECTIO_PARATA:{name:"Perfectio Parata",label:{zh:""}},ARCANE_CIRCLE:{name:"Arcane Circle",label:{zh:""}},CIRCLE_OF_SACRIFICE:{name:"Circle of Sacrifice",label:{zh:""}},BLOODSOWN_CIRCLE:{name:"Bloodsown Circle",label:{zh:""}},IMMORTAL_SACRIFICE:{name:"Immortal Sacrifice",label:{zh:""},maximumStacks:8},CREST_OF_TIME_BORROWED:{name:"Crest of Time Borrowed",label:{zh:""}},CREST_OF_TIME_RETURNED:{name:"Crest of Time Returned",label:{zh:""}},SOULSOW:{name:"Soulsow",label:{zh:""}},THRESHOLD:{name:"Threshold",label:{zh:""}},ENHANCED_HARPE:{name:"Enhanced Harpe",label:{zh:""}}}),cH=ie()({ARCANE_CREST:{name:"Arcane Crest",label:{zh:""}},HELLS_INGRESS_USED:{name:"Hell's Ingress Used",label:{zh:""}},RPR_COMBO:{name:"RPR Combo",label:{zh:""}},RPR_AOE_COMBO:{name:"RPR AoE Combo",label:{zh:"AOE"}}}),uH=ie()({HELLSGATE:{name:"Hellsgate",level:74},TEMPERED_SOUL:{name:"Tempered Soul",level:78},SHROUD_GAUGE:{name:"Shroud Gauge",level:80},ENHANCED_ARCANE_CREST:{name:"Enhanced Arcane Crest",level:84},MELEE_MASTERY_II_RPR:{name:"Melee Mastery II",level:84},VOID_SOUL:{name:"Void Soul",level:86},ENHANCED_ARCANE_CIRCLE:{name:"Enhanced Arcane Circle",level:88},ENHANCED_ENSHROUD:{name:"Enhanced Enshroud",level:92},MELEE_MASTERY_III_RPR:{name:"Melee Mastery III",level:94},ENHANCED_GLUTTONY:{name:"Enhanced Gluttony",level:96},ENHANCED_PLENTIFUL_HARVEST:{name:"Enhanced Plentiful Harvest",level:100}}),dH={...rH,...lS,...cH},hH=ie()({ENPI:{id:7486,name:"Enpi",label:{zh:""}},HAKAZE:{id:7477,name:"Hakaze",label:{zh:""}},GYOFU:{id:36963,name:"Gyofu",label:{zh:""}},YUKIKAZE:{id:7480,name:"Yukikaze",label:{zh:""}},JINPU:{id:7478,name:"Jinpu",label:{zh:""}},GEKKO:{id:7481,name:"Gekko",label:{zh:""}},SHIFU:{id:7479,name:"Shifu",label:{zh:""}},KASHA:{id:7482,name:"Kasha",label:{zh:""}},FUGA:{id:7483,name:"Fuga",label:{zh:""}},FUKO:{id:25780,name:"Fuko",label:{zh:""}},MANGETSU:{id:7484,name:"Mangetsu",label:{zh:""}},OKA:{id:7485,name:"Oka",label:{zh:""}},MEIKYO_SHISUI:{id:7499,name:"Meikyo Shisui",label:{zh:""}},IKISHOTEN:{id:16482,name:"Ikishoten",label:{zh:""}},HISSATSU_SHINTEN:{id:7490,name:"Hissatsu: Shinten",label:{zh:""}},HISSATSU_KYUTEN:{id:7491,name:"Hissatsu: Kyuten",label:{zh:""}},HISSATSU_GYOTEN:{id:7492,name:"Hissatsu: Gyoten",label:{zh:""}},HISSATSU_YATEN:{id:7493,name:"Hissatsu: Yaten",label:{zh:""}},HISSATSU_SENEI:{id:16481,name:"Hissatsu: Senei",label:{zh:""}},HISSATSU_GUREN:{id:7496,name:"Hissatsu: Guren",label:{zh:""}},HAGAKURE:{id:7495,name:"Hagakure",label:{zh:""}},IAIJUTSU:{id:7867,name:"Iaijutsu",label:{zh:""}},TSUBAME_GAESHI:{id:16483,name:"Tsubame-gaeshi",label:{zh:""}},SHOHA:{id:16487,name:"Shoha",label:{zh:""}},THIRD_EYE:{id:7498,name:"Third Eye",label:{zh:""}},TENGENTSU:{id:36962,name:"Tengentsu",label:{zh:""}},OGI_NAMIKIRI:{id:25781,name:"Ogi Namikiri",label:{zh:""}},KAESHI_NAMIKIRI:{id:25782,name:"Kaeshi: Namikiri",label:{zh:""}},ZANSHIN:{id:36964,name:"Zanshin",label:{zh:""}},MEDITATE:{id:7497,name:"Meditate",label:{zh:""}},HIGANBANA:{id:7489,name:"Higanbana",label:{zh:""}},TENKA_GOKEN:{id:7488,name:"Tenka Goken",label:{zh:""}},KAESHI_GOKEN:{id:16485,name:"Kaeshi: Goken",label:{zh:""}},TENDO_GOKEN:{id:36965,name:"Tendo Goken",label:{zh:""}},TENDO_KAESHI_GOKEN:{id:36967,name:"Tendo Kaeshi Goken",label:{zh:""}},MIDARE_SETSUGEKKA:{id:7487,name:"Midare Setsugekka",label:{zh:""}},KAESHI_SETSUGEKKA:{id:16486,name:"Kaeshi: Setsugekka",label:{zh:""}},TENDO_SETSUGEKKA:{id:36966,name:"Tendo Setsugekka",label:{zh:""}},TENDO_KAESHI_SETSUGEKKA:{id:36968,name:"Tendo Kaeshi Setsugekka",label:{zh:""}},THIRD_EYE_POP:{name:"Pop Third Eye",label:{zh:""}},TENGENTSU_POP:{name:"Pop Tengentsu",label:{zh:""}}}),fH=ie()({cd_YATEN:{name:"cd_Yaten",label:{zh:"CD"}},cd_GYOTEN:{name:"cd_Gyoten",label:{zh:"CD"}},cd_SENEI_GUREN:{name:"cd_Senei",label:{zh:"CD: /"}},cd_SHINTEN:{name:"cd_Shinten",label:{zh:"CD"}},cd_KYUTEN:{name:"cd_Kyuten",label:{zh:"CD"}},cd_MEDITATE:{name:"cd_Meditate"},cd_IKISHOTEN:{name:"cd_Ikishoten"},cd_ZANSHIN:{name:"cd_Zanshin"},cd_HAGAKURE:{name:"cd_Hagakure"},cd_SHOHA:{name:"cd_Shoha"},cd_MEIKYO_SHISUI:{name:"cd_MeikyoShisui"},cd_THIRD_EYE:{name:"cd_ThirdEye"},cd_THIRD_EYE_POP:{name:"cd_ThirdEyePop"}}),EH=ie()({KENKI:{name:"Kenki",label:{zh:""}},SETSU:{name:"Setsu",label:{zh:""}},GETSU:{name:"Getsu",label:{zh:""}},KA_SEN:{name:"Ka",label:{zh:""}},MEDITATION:{name:"Meditation",label:{zh:""}}}),sS=ie()({MEIKYO_SHISUI:{name:"Meikyo Shisui",label:{zh:""},maximumStacks:3},FUGETSU:{name:"Fugetsu",label:{zh:""}},FUKA:{name:"Fuka",label:{zh:""}},ZANSHIN_READY:{name:"Zanshin Ready",label:{zh:""}},TENDO:{name:"Tendo",label:{zh:""}},OGI_READY:{name:"Ogi Namikiri Ready",label:{zh:""}},TSUBAME_GAESHI_READY:{name:"Tsubame-gaeshi Ready",label:{zh:""}},THIRD_EYE:{name:"Third Eye",label:{zh:""}},TENGENTSU:{name:"Tengentsu",label:{zh:""}},TENGENTSUS_FORESIGHT:{name:"Tengentsu's Foresight",label:{zh:""}},MEDITATE:{name:"Meditate",label:{zh:""}},ENHANCED_ENPI:{name:"Enhanced Enpi",label:{zh:""}},HIGANBANA_DOT:{name:"HiganbanaDoT",label:{zh:"dot"}}}),mH=ie()({SAM_TWO_READY:{name:"SAMTwoReady",label:{zh:"2"}},SAM_TWO_AOE_READY:{name:"SAMTwoAoeReady",label:{zh:"AOE2"}},GEKKO_READY:{name:"GekkoReady",label:{zh:""}},KASHA_READY:{name:"KashaReady",label:{zh:""}},KAESHI_OGI_READY:{name:"KaeshiOgiReady",label:{zh:""}},KAESHI_TRACKER:{name:"KaeshiTracker",label:{zh:""}}}),AH=ie()({ENHANCED_IAIJUTSU:{name:"Enhanced Iaijutsu",level:74},ENHANCED_MEIKYO_SHISUI:{name:"Enhanced Meikyo Shisui",level:76},ENHANCED_FUGETSU_AND_FUKA:{name:"Enhanced Fugetsu and Fuka",level:78},THIRD_EYE_MASTERY:{name:"Third Eye Mastery",level:82},WAY_OF_THE_SAMURAI_II:{name:"Way of the Samurai II",level:84},FUGA_MASTERY:{name:"Fuga Mastery",level:86},ENHANCED_IKISHOTEN:{name:"Enhanced Ikishoten",level:90},HAKAZE_MASTERY:{name:"Hakaze Mastery",level:92},ENHANCED_HISSATSU:{name:"Enhanced Hissatsu",level:94},WAY_OF_THE_SAMURAI_III:{name:"Way of the Samurai III",level:94},ENHANCED_IKISHOTEN_II:{name:"Enhanced Ikishoten II",level:96},ENHANCED_MEIKYO_SHISUI_II:{name:"Enhanced Meikyo Shisui II",level:100}}),RH={...EH,...sS,...mH},rS=ie()({PHYSICK:{id:190,name:"Physick",label:{zh:"",ja:""}},SUMMON_EOS:{id:17215,name:"Summon Eos",label:{zh:"",ja:""}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:"",ja:""}},WHISPERING_DAWN:{id:16537,name:"Whispering Dawn",label:{zh:"",ja:""}},BIO_II:{id:17865,name:"Bio II",label:{zh:"",ja:""}},ADLOQUIUM:{id:185,name:"Adloquium",label:{zh:"",ja:""}},SUCCOR:{id:186,name:"Succor",label:{zh:"",ja:""}},RUIN_II:{id:17870,name:"Ruin II",label:{zh:"",ja:""}},FEY_ILLUMINATION:{id:16538,name:"Fey Illumination",label:{zh:"",ja:""}},AETHERFLOW:{id:166,name:"Aetherflow",label:{zh:"",ja:""}},ENERGY_DRAIN:{id:167,name:"Energy Drain",label:{zh:"",ja:""}},LUSTRATE:{id:189,name:"Lustrate",label:{zh:"",ja:""}},ART_OF_WAR:{id:16539,name:"Art of War",label:{zh:"",ja:""}},SACRED_SOIL:{id:188,name:"Sacred Soil",label:{zh:"",ja:""}},INDOMITABILITY:{id:3583,name:"Indomitability",label:{zh:"",ja:""}},DEPLOYMENT_TACTICS:{id:3585,name:"Deployment Tactics",label:{zh:"",ja:""}},EMERGENCY_TACTICS:{id:3586,name:"Emergency Tactics",label:{zh:"",ja:""}},DISSIPATION:{id:3587,name:"Dissipation",label:{zh:"",ja:""}},EXCOGITATION:{id:7434,name:"Excogitation",label:{zh:"",ja:""}},BROIL_II:{id:7435,name:"Broil II",label:{zh:"",ja:""}},CHAIN_STRATAGEM:{id:7436,name:"Chain Stratagem",label:{zh:"",ja:""}},AETHERPACT:{id:7437,name:"Aetherpact",label:{zh:"",ja:""}},DISSOLVE_UNION:{id:7869,name:"Dissolve Union",label:{zh:"",ja:""}},BIOLYSIS:{id:16540,name:"Biolysis",label:{zh:"",ja:""}},BROIL_III:{id:16541,name:"Broil III",label:{zh:"",ja:""}},RECITATION:{id:16542,name:"Recitation",label:{zh:"",ja:""}},FEY_BLESSING:{id:16543,name:"Fey Blessing",label:{zh:"",ja:""}},SUMMON_SERAPH:{id:16545,name:"Summon Seraph",label:{zh:"",ja:""}},CONSOLATION:{id:16546,name:"Consolation",label:{zh:"",ja:""}},BROIL_IV:{id:25865,name:"Broil IV",label:{zh:"",ja:""}},ART_OF_WAR_II:{id:25866,name:"Art of War II",label:{zh:"",ja:""}},PROTRACTION:{id:25867,name:"Protraction",label:{zh:"",ja:""}},EXPEDIENT:{id:25868,name:"Expedient",label:{zh:"",ja:""}},BANEFUL_IMPACTION:{id:37012,name:"Baneful Impaction",label:{zh:"",ja:""}},CONCITATION:{id:37013,name:"Concitation",label:{zh:"",ja:""}},SERAPHISM:{id:37014,name:"Seraphism",label:{zh:"",ja:""}},MANIFESTATION:{id:37015,name:"Manifestation",label:{zh:"",ja:""}},ACCESSION:{id:37016,name:"Accession",label:{zh:"",ja:""}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:""}}}),TH=ie()({cd_WHISPERING_DAWN:{name:"cd_WhisperingDawn"},cd_FEY_ILLUMINATION:{name:"cd_FeyIllumination"},cd_AETHERFLOW:{name:"cd_Aetherflow"},cd_ENERGY_DRAIN:{name:"cd_EnergyDrain"},cd_LUSTRATE:{name:"cd_Lustrate"},cd_SACRED_SOIL:{name:"cd_SacredSoil"},cd_INDOMITABILITY:{name:"cd_Indomitability"},cd_DEPLOYMENT_TACTICS:{name:"cd_DeploymentTactics"},cd_EMERGENCY_TACTICS:{name:"cd_EmergencyTactics"},cd_DISSIPATION:{name:"cd_Dissipation"},cd_EXCOGITATION:{name:"cd_Excogitation"},cd_CHAIN_STRATAGEM:{name:"cd_ChainStratagem"},cd_AETHERPACT:{name:"cd_Aetherpact"},cd_DISSOLVE_UNION:{name:"cd_DissolveUnion"},cd_RECITATION:{name:"cd_Recitation"},cd_FEY_BLESSING:{name:"cd_FeyBlessing"},cd_SUMMON_SERAPH:{name:"cd_SummonSeraph"},cd_CONSOLATION:{name:"cd_Consolation"},cd_CONSOLATION_INTERNAL:{name:"cd_ConsolationInternal"},cd_PROTRACTION:{name:"cd_Protraction"},cd_EXPEDIENT:{name:"cd_Expedient"},cd_BANEFUL_IMPACTION:{name:"cd_BanefulImpaction"},cd_SERAPHISM:{name:"cd_Seraphism"}}),SH=ie()({AETHERFLOW:{name:"Aetherflow",maximumCharges:3,label:{zh:""}},FAERIE_GAUGE:{name:"Faerie Gauge",maximumStacks:100,label:{zh:""}}}),cS=ie()({BIO_II:{name:"Bio II",label:{zh:""}},CATALYZE:{name:"Catalyze",label:{zh:""}},GALVANIZE:{name:"Galvanize",label:{zh:""}},WHISPERING_DAWN:{name:"Whispering Dawn",label:{zh:""}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:""}},FEY_ILLUMINATION:{name:"Fey Illumination",label:{zh:""}},SERAPHIC_ILLUMINATION:{name:"Seraphic Illumination",label:{zh:""}},SACRED_SOIL_MIT:{name:"Sacred Soil (Mitigation)",label:{zh:"[]"},mayNotBeCanceled:!0},SACRED_SOIL_ZONE:{name:"Sacred Soil",label:{zh:""},mayBeToggled:!0},EMERGENCY_TACTICS:{name:"Emergency Tactics",label:{zh:""}},DISSIPATION:{name:"Dissipation",label:{zh:""},mayNotBeCanceled:!0},EXCOGITATION:{name:"Excogitation",label:{zh:""}},CHAIN_STRATAGEM:{name:"Chain Stratagem",label:{zh:""}},IMPACT_IMMINENT:{name:"Impact Imminent",label:{zh:""}},BIOLYSIS:{name:"Biolysis",label:{zh:""}},RECITATION:{name:"Recitation",label:{zh:""}},FEY_UNION:{name:"Fey Union",label:{zh:""}},SERAPHIC_VEIL:{name:"Seraphic Veil",label:{zh:""}},PROTRACTION:{name:"Protraction",label:{zh:""}},EXPEDIENCE:{name:"Expedience",label:{zh:""}},DESPERATE_MEASURES:{name:"Desperate Measures",label:{zh:""}},BANEFUL_IMPACTION:{name:"Baneful Impaction",label:{zh:""}},SERAPHISM:{name:"Seraphism",label:{zh:""},mayNotBeCanceled:!0},SERAPHISM_REGEN:{name:"Seraphism (Regen)",label:{zh:"[]"}}}),IH=ie()({SERAPH_SUMMON_TIMER:{name:"Seraph Summon Timer",label:{zh:""}}}),_H=ie()({CORRUPTION_MASTERY_II:{name:"Corruption Mastery II",level:72},BROIL_MASTERY_III:{name:"Broil Mastery III",level:72},ENHANCED_SACRED_SOIL:{name:"Enhanced Sacred Soil",level:78},BROIL_MASTERY_IV:{name:"Broil Mastery IV",level:82},ART_OF_WAR_MASTERY:{name:"Art of War Mastery",level:82},ENHANCED_DEPLOYMENT_TACTICS:{name:"Enhanced Deployment Tactics",level:88},ENHANCED_CHAIN_STRATAGEM:{name:"Enhanced Chain Stratagem",level:92},TACTICIANS_MASTERY:{name:"Tactician's Mastery",level:94},SUCCOR_MASTERY:{name:"Succor Mastery",level:96},ENHANCED_RECITATION:{name:"Enhanced Recitation",level:98}}),gH={...SH,...cS,...IH},pH=ie()({DIAGNOSIS:{id:24284,name:"Diagnosis",label:{zh:""}},EUKRASIAN_DIAGNOSIS:{id:24291,name:"Eukrasian Diagnosis",label:{zh:""}},EUKRASIAN_DIAGNOSIS_POP:{name:"Pop Eukrasian Diagnosis",label:{zh:""}},HAIMA:{id:24305,name:"Haima",label:{zh:""}},HAIMA_POP:{name:"Pop Haima",label:{zh:""}},EGEIRO:{id:24287,name:"Egeiro",label:{zh:""}},PROGNOSIS:{id:24286,name:"Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS:{id:24292,name:"Eukrasian Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS_II:{id:37034,name:"Eukrasian Prognosis II",label:{zh:" II"}},EUKRASIAN_PROGNOSIS_POP:{name:"Pop Eukrasian Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS_II_POP:{name:"Pop Eukrasian Prognosis II",label:{zh:" II "}},PANHAIMA:{id:24311,name:"Panhaima",label:{zh:""}},PANHAIMA_POP:{name:"Pop Panhaima",label:{zh:""}},PHYSIS_II:{id:24302,name:"Physis II",label:{zh:" II"}},HOLOS:{id:24310,name:"Holos",label:{zh:""}},PEPSIS:{id:24301,name:"Pepsis",label:{zh:""}},KARDIA:{id:24285,name:"Kardia",label:{zh:""}},EUKRASIA:{id:24290,name:"Eukrasia",label:{zh:""}},SOTERIA:{id:24294,name:"Soteria",label:{zh:""}},ICARUS:{id:24295,name:"Icarus",label:{zh:""}},ZOE:{id:24300,name:"Zoe",label:{zh:""}},KRASIS:{id:24317,name:"Krasis",label:{zh:""}},PHILOSOPHIA:{id:37035,name:"Philosophia",label:{zh:""}},RHIZOMATA:{id:24309,name:"Rhizomata",label:{zh:""}},DRUOCHOLE:{id:24296,name:"Druochole",label:{zh:""}},IXOCHOLE:{id:24299,name:"Ixochole",label:{zh:""}},KERACHOLE:{id:24298,name:"Kerachole",label:{zh:""}},TAUROCHOLE:{id:24303,name:"Taurochole",label:{zh:""}},DOSIS:{id:24283,name:"Dosis",label:{zh:""}},DOSIS_II:{id:24306,name:"Dosis II",label:{zh:" II"}},DOSIS_III:{id:24312,name:"Dosis III",label:{zh:" III"}},EUKRASIAN_DOSIS:{id:24293,name:"Eukrasian Dosis",label:{zh:""}},EUKRASIAN_DOSIS_II:{id:24308,name:"Eukrasian Dosis II",label:{zh:" II"}},EUKRASIAN_DOSIS_III:{id:24314,name:"Eukrasian Dosis III",label:{zh:" III"}},TOXIKON:{id:24304,name:"Toxikon",label:{zh:""}},TOXIKON_II:{id:24316,name:"Toxikon II",label:{zh:" II"}},DYSKRASIA:{id:24297,name:"Dyskrasia",label:{zh:""}},DYSKRASIA_II:{id:24315,name:"Dyskrasia II",label:{zh:" II"}},EUKRASIAN_DYSKRASIA:{id:37032,name:"Eukrasian Dyskrasia",label:{zh:""}},PHLEGMA:{id:24289,name:"Phlegma",label:{zh:""}},PHLEGMA_II:{id:24307,name:"Phlegma II",label:{zh:" II"}},PHLEGMA_III:{id:24313,name:"Phlegma III",label:{zh:" III"}},PSYCHE:{id:37033,name:"Psyche",label:{zh:""}},PNEUMA:{id:24318,name:"Pneuma",label:{zh:""}}}),NH=ie()({cd_HAIMA:{name:"cd_Haima"},cd_PANHAIMA:{name:"cd_PANHAIMA"},cd_PHYSIS:{name:"cd_PHYSIS",label:{zh:"CD"}},cd_HOLOS:{name:"cd_HOLOS"},cd_PEPSIS:{name:"cd_PEPSIS"},cd_KARDIA:{name:"cd_KARDIA"},cd_EUKRASIA:{name:"cd_EUKRASIA"},cd_SOTERIA:{name:"cd_SOTERIA"},cd_ICARUS:{name:"cd_ICARUS"},cd_ZOE:{name:"cd_ZOE"},cd_KRASIS:{name:"cd_KRASIS"},cd_PHILOSOPHIA:{name:"cd_PHILOSOPHIA"},cd_RHIZOMATA:{name:"cd_RHIZOMATA"},cd_DRUOCHOLE:{name:"cd_DRUOCHOLE"},cd_IXOCHOLE:{name:"cd_IXOCHOLE"},cd_KERACHOLE:{name:"cd_KERACHOLE"},cd_TAUROCHOLE:{name:"cd_TAUROCHOLE"},cd_PHLEGMA:{name:"cd_PHLEGMA"},cd_PSYCHE:{name:"cd_PSYCHE"},cd_PNEUMA:{name:"cd_PNEUMA"},cd_DIAGNOSIS_POP:{name:"cd_DIAGNOSIS_POP",label:{zh:"CD"}},cd_PROGNOSIS_POP:{name:"cd_PROGNOSIS_POP",label:{zh:"CD"}},cd_HAIMA_POP:{name:"cd_HAIMA_POP"},cd_PANHAIMA_POP:{name:"cd_PANHAIMA_POP"}}),CH=ie()({ADDERSGALL:{name:"Addersgall",label:{zh:""}},ADDERSTING:{name:"Addersting",label:{zh:""}}}),O0=ie()({EUKRASIA:{id:2606,name:"Eukrasia",label:{zh:""}},EUKRASIAN_DIAGNOSIS:{id:2607,name:"Eukrasian Diagnosis",label:{zh:""}},DIFFERENTIAL_DIAGNOSIS:{id:2608,name:"Differential Diagnosis",label:{zh:""}},HAIMA:{id:2612,name:"Haima",label:{zh:""},mayNotBeCanceled:!0},HAIMATINON:{id:2642,name:"Haimatinon",label:{zh:""},maximumStacks:5,mayNotBeCanceled:!0},EUKRASIAN_PROGNOSIS:{id:2609,name:"Eukrasian Prognosis",label:{zh:""}},PANHAIMA:{id:2613,name:"Panhaima",label:{zh:""},mayNotBeCanceled:!0},PANHAIMATINON:{id:2643,name:"Panhaimatinon",label:{zh:""},maximumStacks:5,mayNotBeCanceled:!0},PHYSIS_II:{id:2620,name:"Physis II",label:{zh:" II"}},AUTOPHYSIS:{id:2621,name:"Autophysis",label:{zh:""}},KARDIA:{id:2604,name:"Kardia",label:{zh:""}},KARDION:{id:2605,name:"Kardion",label:{zh:""}},PHILOSOPHIA:{id:3898,name:"Philosophia",label:{zh:""}},EUDAIMONIA:{id:3899,name:"Eudaimonia",label:{zh:""}},SOTERIA:{id:2610,name:"Soteria",label:{zh:""},maximumStacks:4},ZOE:{id:2611,name:"Zoe",label:{zh:""}},KRASIS:{id:2622,name:"Krasis",label:{zh:""}},KERACHOLE:{id:2618,name:"Kerachole",label:{zh:""}},KERAKEIA:{id:2938,name:"Kerakeia",label:{zh:"[]"}},TAUROCHOLE:{id:2619,name:"Taurochole",label:{zh:""}},EUKRASIAN_DOSIS:{id:2614,name:"Eukrasian Dosis",label:{zh:""}},EUKRASIAN_DOSIS_II:{id:2615,name:"Eukrasian Dosis II",label:{zh:" II"}},EUKRASIAN_DOSIS_III:{id:2616,name:"Eukrasian Dosis III",label:{zh:" III"}},EUKRASIAN_DYSKRASIA:{id:3897,name:"Eukrasian Dyskrasia",label:{zh:""}},PNEUMA:{id:2623,name:"Pneuma",label:{zh:""}},HOLOS:{id:3003,name:"Holos",label:{zh:""}},HOLOSAKOS:{id:3365,name:"Holosakos",label:{zh:""}}}),bH=ie()({PEPSIS:{name:"Pepsis",label:{zh:""}}}),OH=ie()({OFFENSIVE_MAGIC_MASTERY:{name:"Offensive Magic Mastery",level:72},OFFENSIVE_MAGIC_MASTERY_II:{name:"Offensive Magic Mastery II",level:82},ENHANCED_KERACHOLE:{name:"Enhanced Kerachole",level:78},ENHANCED_ZOE:{name:"Enhanced Zoe",level:88},ENHANCED_SOTERIA:{name:"Enhanced Soteria",level:94},EUKRASIAN_PROGNOSIS_MASTERY:{name:"Eukrasian Prognosis Mastery",level:96},ENHANCED_PHYSIS_II:{name:"Enhanced Physis II",level:98}}),DH={...CH,...O0,...bH},D0=ie()({SUMMON_CARBUNCLE:{id:25798,name:"Summon Carbuncle",label:{zh:""}},RADIANT_AEGIS:{id:25799,name:"Radiant Aegis",label:{zh:""}},PHYSICK:{id:16230,name:"Physick",label:{zh:""}},GEMSHINE:{id:25883,name:"Gemshine",label:{zh:""}},FESTER:{id:181,name:"Fester",label:{zh:""}},ENERGY_DRAIN:{id:16508,name:"Energy Drain",label:{zh:""}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:""}},OUTBURST:{id:16511,name:"Outburst",label:{zh:""}},PRECIOUS_BRILLIANCE:{id:25884,name:"Precious Brilliance",label:{zh:""}},RUBY_OUTBURST:{id:25814,name:"Ruby Outburst",label:{zh:""}},TOPAZ_OUTBURST:{id:25815,name:"Topaz Outburst",label:{zh:""}},EMERALD_OUTBURST:{id:25816,name:"Emerald Outburst",label:{zh:""}},SUMMON_IFRIT:{id:25805,name:"Summon Ifrit",label:{zh:""}},PAINFLARE:{id:3578,name:"Painflare",label:{zh:""}},SUMMON_TITAN:{id:25806,name:"Summon Titan",label:{zh:""}},SUMMON_GARUDA:{id:25807,name:"Summon Garuda",label:{zh:""}},ENERGY_SIPHON:{id:16510,name:"Energy Siphon",label:{zh:""}},RUBY_RUIN_III:{id:25817,name:"Ruby Ruin III",label:{zh:""}},TOPAZ_RUIN_III:{id:25818,name:"Topaz Ruin III",label:{zh:""}},EMERALD_RUIN_III:{id:25819,name:"Emerald Ruin III",label:{zh:""}},RUIN_III:{id:3579,name:"Ruin III",label:{zh:""}},ASTRAL_IMPULSE:{id:25820,name:"Astral Impulse",label:{zh:""}},ASTRAL_FLARE:{id:25821,name:"Astral Flare",label:{zh:""}},ASTRAL_FLOW:{id:25822,name:"Astral Flow",label:{zh:""}},DEATHFLARE:{id:3582,name:"Deathflare",label:{zh:""}},RUIN_IV:{id:7426,name:"Ruin IV",label:{zh:""}},SEARING_LIGHT:{id:25801,name:"Searing Light",label:{zh:""}},SUMMON_BAHAMUT:{id:7427,name:"Summon Bahamut",label:{zh:""}},ENKINDLE_BAHAMUT:{id:7429,name:"Enkindle Bahamut",label:{zh:""}},RUBY_RITE:{id:25823,name:"Ruby Rite",label:{zh:""}},TOPAZ_RITE:{id:25824,name:"Topaz Rite",label:{zh:""}},EMERALD_RITE:{id:25825,name:"Emerald Rite",label:{zh:""}},TRI_DISASTER:{id:25826,name:"Tri-disaster",label:{zh:""}},RUBY_DISASTER:{id:25827,name:"Ruby Disaster",label:{zh:""}},TOPAZ_DISASTER:{id:25828,name:"Topaz Disaster",label:{zh:""}},EMERALD_DISASTER:{id:25829,name:"Emerald Disaster",label:{zh:""}},SUMMON_PHOENIX:{id:25831,name:"Summon Phoenix",label:{zh:""}},FOUNTAIN_OF_FIRE:{id:16514,name:"Fountain of Fire",label:{zh:""}},BRAND_OF_PURGATORY:{id:16515,name:"Brand of Purgatory",label:{zh:""}},REKINDLE:{id:25830,name:"Rekindle",label:{zh:""}},ENKINDLE_PHOENIX:{id:16516,name:"Enkindle Phoenix",label:{zh:""}},RUBY_CATASTROPHE:{id:25832,name:"Ruby Catastrophe",label:{zh:""}},TOPAZ_CATASTROPHE:{id:25833,name:"Topaz Catastrophe",label:{zh:""}},EMERALD_CATASTROPHE:{id:25834,name:"Emerald Catastrophe",label:{zh:""}},CRIMSON_CYCLONE:{id:25835,name:"Crimson Cyclone",label:{zh:""}},CRIMSON_STRIKE:{id:25885,name:"Crimson Strike",label:{zh:""}},MOUNTAIN_BUSTER:{id:25836,name:"Mountain Buster",label:{zh:""}},SLIPSTREAM:{id:25837,name:"Slipstream",label:{zh:""}},SUMMON_IFRIT_II:{id:25838,name:"Summon Ifrit II",label:{zh:" II"}},SUMMON_TITAN_II:{id:25839,name:"Summon Titan II",label:{zh:" II"}},SUMMON_GARUDA_II:{id:25840,name:"Summon Garuda II",label:{zh:" II"}},NECROTIZE:{id:36990,name:"Necrotize",label:{zh:""}},SEARING_FLASH:{id:36991,name:"Searing Flash",label:{zh:""}},SUMMON_SOLAR_BAHAMUT:{id:36992,name:"Summon Solar Bahamut",label:{zh:""}},UMBRAL_IMPULSE:{id:36994,name:"Umbral Impulse",label:{zh:""}},UMBRAL_FLARE:{id:36995,name:"Umbral Flare",label:{zh:""}},SUNFLARE:{id:36996,name:"Sunflare",label:{zh:""}},ENKINDLE_SOLAR_BAHAMUT:{id:36998,name:"Enkindle Solar Bahamut",label:{zh:""}},LUX_SOLARIS:{id:36997,name:"Lux Solaris",label:{zh:""}},INFERNO:{id:25852,name:"Inferno",label:{zh:""}},EARTHEN_FURY:{id:25853,name:"Earthen Fury",label:{zh:""}},AERIAL_BLAST:{id:25854,name:"Aerial Blast",label:{zh:""}},WYRMWAVE:{id:7428,name:"Wyrmwave",label:{zh:""}},SCARLET_FLAME:{id:16519,name:"Scarlet Flame",label:{zh:""}},LUXWAVE:{id:36993,name:"Luxwave",label:{zh:""}},AKH_MORN:{id:7449,name:"Akh Morn",label:{zh:""}},REVELATION:{id:16518,name:"Revelation",label:{zh:""}},EXODUS:{id:36999,name:"Exodus",label:{zh:""}}}),yH=ie()({cd_RADIANT_AEGIS:{name:"cd_RADIANT_AEGIS"},cd_ASTRAL_FLOW:{name:"cd_ASTRAL_FLOW"},cd_ENKINDLE:{name:"cd_ENKINDLE",label:{zh:"CD//"}},cd_DEMI_SUMMON:{name:"cd_DEMI_SUMMON",label:{zh:"CD"}},cd_ENERGY_DRAIN:{name:"cd_ENERGY_DRAIN"},cd_AETHERFLOW:{name:"cd_AETHERFLOW",label:{zh:"CD"}},cd_SEARING_LIGHT:{name:"cd_SEARING_LIGHT"},cd_SEARING_FLASH:{name:"cd_SEARING_FLASH"},cd_LUX_SOLARIS:{name:"cd_LUX_SOLARIS"},cd_MOUNTAIN_BUSTER:{name:"cd_MOUNTAIN_BUSTER"},cd_SUMMON_LOCKOUT:{name:"cd_SUMMON_LOCKOUT"}}),vH=ie()({AETHERFLOW:{name:"Aetherflow",label:{zh:""}},RUBY_ARCANUM:{name:"Ruby Arcanum",label:{zh:""}},TOPAZ_ARCANUM:{name:"Topaz Arcanum",label:{zh:""}},EMERALD_ARCANUM:{name:"Emerald Arcanum",label:{zh:""}},FIRE_ATTUNEMENT:{name:"Fire Attunement",label:{zh:""}},EARTH_ATTUNEMENT:{name:"Earth Attunement",label:{zh:""}},WIND_ATTUNEMENT:{name:"Wind Attunement",label:{zh:""}},ACTIVE_DEMI:{name:"Active Demi",label:{zh:""}}}),uS=ie()({AETHERFLOW:{name:"Aetherflow",maximumStacks:2,label:{zh:""}},CRIMSON_STRIKE_READY:{name:"Crimson Strike Ready",label:{zh:""}},EVERLASTING_FLIGHT:{name:"Everlasting Flight",label:{zh:""}},FURTHER_RUIN:{name:"Further Ruin",label:{zh:""}},GARUDAS_FAVOR:{name:"Garuda's Favor",label:{zh:""}},IFRITS_FAVOR:{name:"Ifrit's Favor",label:{zh:""}},RADIANT_AEGIS:{name:"Radiant Aegis",label:{zh:""}},REFULGENT_LUX:{name:"Refulgent Lux",label:{zh:""}},REKINDLE:{name:"Rekindle",label:{zh:""}},RUBYS_GLIMMER:{name:"Ruby's Glimmer",label:{zh:""}},SEARING_LIGHT:{name:"Searing Light",label:{zh:""}},SLIPSTREAM:{name:"Slipstream",mayBeToggled:!0,label:{zh:""}},TITANS_FAVOR:{name:"Titan's Favor",label:{zh:""}},UNDYING_FLAME:{name:"Undying Flame",label:{zh:""}}}),MH=ie()({NEXT_DEMI_CYCLE:{name:"Next Demi Cycle",label:{zh:""}},DEMI_AUTO:{name:"Demi Auto-attack",label:{zh:""}}}),LH=ie()({RUIN_MASTERY_III:{name:"Ruin Mastery III",level:72},OUTBURST_MASTERY:{name:"Outburst Mastery",level:74},ENHANCED_SUMMON_BAHAMUT:{name:"Enhanced Summon Bahamut",level:80},OUTBURST_MASTERY_II:{name:"Outburst Mastery II",level:82},RUIN_MASTERY_IV:{name:"Ruin Mastery IV",level:84},ELEMENTAL_MASTERY:{name:"Elemental Mastery",level:86},ENHANCED_RADIANT_AEGIS:{name:"Enhanced Radiant Aegis",level:88},ENKINDLE_II:{name:"Enkindle II",level:90},ENHANCED_FESTER:{name:"Enhanced Fester",level:92},ARCANE_MASTERY:{name:"Arcane Mastery",level:94},ENHANCED_SEARING_LIGHT:{name:"Enhanced Searing Light",level:96},ENHANCED_SUMMON_BAHAMUT_II:{name:"Enhanced Summon Bahamut II",level:100}}),xH={...vH,...uS,...MH},HH=ie()({STEEL_FANGS:{id:34606,name:"Steel Fangs",label:{zh:"",ja:""}},HUNTERS_STING:{id:34608,name:"Hunter's Sting",label:{zh:"",ja:""}},REAVING_FANGS:{id:34607,name:"Reaving Fangs",label:{zh:"",ja:""}},WRITHING_SNAP:{id:34632,name:"Writhing Snap",label:{zh:"",ja:""}},SWIFTSKINS_STING:{id:34609,name:"Swiftskin's Sting",label:{zh:"",ja:""}},STEEL_MAW:{id:34614,name:"Steel Maw",label:{zh:"",ja:""}},FLANKSTING_STRIKE:{id:34610,name:"Flanksting Strike",label:{zh:"",ja:""}},FLANKSBANE_FANG:{id:34611,name:"Flanksbane Fang",label:{zh:"",ja:""}},HINDSTING_STRIKE:{id:34612,name:"Hindsting Strike",label:{zh:"",ja:""}},HINDSBANE_FANG:{id:34613,name:"Hindsbane Fang",label:{zh:"",ja:""}},REAVING_MAW:{id:34615,name:"Reaving Maw",label:{zh:"",ja:""}},SLITHER:{id:34646,name:"Slither",label:{zh:"",ja:""}},HUNTERS_BITE:{id:34616,name:"Hunter's Bite",label:{zh:"",ja:""}},SWIFTSKINS_BITE:{id:34617,name:"Swiftskin's Bite",label:{zh:"",ja:""}},JAGGED_MAW:{id:34618,name:"Jagged Maw",label:{zh:"",ja:""}},BLOODIED_MAW:{id:34619,name:"Bloodied Maw",label:{zh:"",ja:""}},SERPENTS_TAIL:{id:35920,name:"Serpent's Tail",label:{zh:"",ja:""}},DEATH_RATTLE:{id:34634,name:"Death Rattle",label:{zh:"",ja:""}},LAST_LASH:{id:34635,name:"Last Lash",label:{zh:"",ja:""}},VICEWINDER:{id:34620,name:"Vicewinder",label:{zh:"",ja:""}},HUNTERS_COIL:{id:34621,name:"Hunter's Coil",label:{zh:"",ja:""}},SWIFTSKINS_COIL:{id:34622,name:"Swiftskin's Coil",label:{zh:"",ja:""}},VICEPIT:{id:34623,name:"Vicepit",label:{zh:"",ja:""}},HUNTERS_DEN:{id:34624,name:"Hunter's Den",label:{zh:"",ja:""}},SWIFTSKINS_DEN:{id:34625,name:"Swiftskin's Den",label:{zh:"",ja:""}},TWINFANG:{id:35921,name:"Twinfang",label:{zh:"",ja:""}},TWINBLOOD:{id:35922,name:"Twinblood",label:{zh:"",ja:""}},TWINFANG_BITE:{id:34636,name:"Twinfang Bite",label:{zh:"",ja:""}},TWINBLOOD_BITE:{id:34637,name:"Twinblood Bite",label:{zh:"",ja:""}},TWINFANG_THRESH:{id:34638,name:"Twinfang Thresh",label:{zh:"",ja:""}},TWINBLOOD_THRESH:{id:34639,name:"Twinblood Thresh",label:{zh:"",ja:""}},UNCOILED_FURY:{id:34633,name:"Uncoiled Fury",label:{zh:"",ja:""}},SERPENTS_IRE:{id:34647,name:"Serpent's Ire",label:{zh:"",ja:""}},REAWAKEN:{id:34626,name:"Reawaken",label:{zh:"",ja:""}},FIRST_GENERATION:{id:34627,name:"First Generation",label:{zh:"",ja:""}},SECOND_GENERATION:{id:34628,name:"Second Generation",label:{zh:"",ja:""}},THIRD_GENERATION:{id:34629,name:"Third Generation",label:{zh:"",ja:""}},FOURTH_GENERATION:{id:34630,name:"Fourth Generation",label:{zh:"",ja:""}},UNCOILED_TWINFANG:{id:34644,name:"Uncoiled Twinfang",label:{zh:"",ja:""}},UNCOILED_TWINBLOOD:{id:34645,name:"Uncoiled Twinblood",label:{zh:"",ja:""}},OUROBOROS:{id:34631,name:"Ouroboros",label:{zh:"",ja:""}},FIRST_LEGACY:{id:34640,name:"First Legacy",label:{zh:"",ja:""}},SECOND_LEGACY:{id:34641,name:"Second Legacy",label:{zh:"",ja:""}},THIRD_LEGACY:{id:34642,name:"Third Legacy",label:{zh:"",ja:""}},FOURTH_LEGACY:{id:34643,name:"Fourth Legacy",label:{zh:"",ja:""}}}),kH=ie()({cd_SERPENTS_IRE:{name:"cd_SerpentsIre"},cd_VICEWINDER:{name:"cd_Vicewinder"},cd_SLITHER:{name:"cd_Slither"},cd_SERPENTS_TAIL:{name:"cd_SerpentsTail"},cd_TWINFANG:{name:"cd_Twinfang"},cd_TWINBLOOD:{name:"cd_Twinblood"}}),UH=ie()({RATTLING_COIL:{name:"Rattling Coil",label:{zh:""}},SERPENT_OFFERINGS:{name:"Serpent Offerings",label:{zh:""}},ANGUINE_TRIBUTE:{name:"Anguine Tribute",label:{zh:""}}}),dS=ie()({HUNTERS_INSTINCT:{name:"Hunter's Instinct",label:{zh:""}},SWIFTSCALED:{name:"Swiftscaled",label:{zh:""}},HONED_STEEL:{name:"Honed Steel",label:{zh:""}},HONED_REAVERS:{name:"Honed Reavers",label:{zh:""}},FLANKSTUNG_VENOM:{name:"Flankstung Venom",label:{zh:""}},HINDSTUNG_VENOM:{name:"Hindstung Venom",label:{zh:""}},FLANKSBANE_VENOM:{name:"Flanksbane Venom",label:{zh:""}},HINDSBANE_VENOM:{name:"Hindsbane Venom",label:{zh:""}},GRIMSKINS_VENOM:{name:"Grimskin's Venom",label:{zh:""}},GRIMHUNTERS_VENOM:{name:"Grimhunter's Venom",label:{zh:""}},HUNTERS_VENOM:{name:"Hunter's Venom",label:{zh:""}},SWIFTSKINS_VENOM:{name:"Swiftskin's Venom",label:{zh:""}},POISED_FOR_TWINFANG:{name:"Poised for Twinfang",label:{zh:""}},POISED_FOR_TWINBLOOD:{name:"Poised for Twinblood",label:{zh:""}},FELLHUNTERS_VENOM:{name:"Fellhunter's Venom",label:{zh:""}},FELLSKINS_VENOM:{name:"Fellskin's Venom",label:{zh:""}},READY_TO_REAWAKEN:{name:"Ready to Reawaken",label:{zh:""}},REAWAKENED:{name:"Reawakened",label:{zh:""},mayNotBeCanceled:!0}}),wH=ie()({VPR_COMBO:{name:"VPR Combo"},DEATH_RATTLE_READY:{name:"Death Rattle Ready"},VPR_AOE_COMBO:{name:"VPR AoE Combo"},LAST_LASH_READY:{name:"Last Lash Ready"},HUNTERS_COIL_READY:{name:"Hunter's Coil Ready"},SWIFTSKINS_COIL_READY:{name:"Swiftskin's Coil Ready"},COIL_OGCD_READY:{name:"Coil oGCD Ready"},HUNTERS_DEN_READY:{name:"Hunter's Den Ready"},SWIFTSKINS_DEN_READY:{name:"Swiftskin's Den Ready"},DEN_OGCD_READY:{name:"Den oGCD Ready"},UNCOILED_OGCD_READY:{name:"Uncoiled oGCD Ready"},REAWAKEN_COMBO:{name:"Reawaken Combo"},LEGACY_READY:{name:"Legacy Ready"}}),PH=ie()({MELEE_MASTERY_VPR:{name:"Melee Mastery VPR",level:74},VIPERS_BITE:{name:"Viper's Bite",level:75},VIPERS_THRESH:{name:"Viper's Thresh",level:80},VIPERS_RATTLE:{name:"Viper's Rattle",level:82},ENHANCED_SLITHER:{name:"Enhanced Slither",level:84},MELEE_MASTERY_II_VPR:{name:"Melee Mastery II VPR",level:84},ENHANCED_VIPERS_RATTLE:{name:"Enhanced Viper's Rattle",level:88},SERPENTS_LINEAGE:{name:"Serpent's Lineage",level:90},UNCOILED_FANGS:{name:"Uncoiled Fangs",level:92},ENHANCED_SERPENTS_LINEAGE:{name:"Enhanced Serpent's Lineage",level:96},SERPENTS_LEGACY:{name:"Serpent's Legacy",level:100}}),GH={...UH,...dS,...wH},BH=ie()({HEAVY_SWING:{id:31,name:"Heavy Swing",label:{zh:""}},MAIM:{id:37,name:"Maim",label:{zh:""}},STORMS_PATH:{id:42,name:"Storm's Path",label:{zh:""}},STORMS_EYE:{id:45,name:"Storm's Eye",label:{zh:""}},FELL_CLEAVE:{id:3549,name:"Fell Cleave",label:{zh:""}},UPHEAVAL:{id:7387,name:"Upheaval",label:{zh:""}},ONSLAUGHT:{id:7386,name:"Onslaught",label:{zh:""}},TOMAHAWK:{id:46,name:"Tomahawk",label:{zh:""}},OVERPOWER:{id:41,name:"Overpower",label:{zh:""}},MYTHRIL_TEMPEST:{id:16462,name:"Mythril Tempest",label:{zh:""}},DECIMATE:{id:3550,name:"Decimate",label:{zh:""}},OROGENY:{id:25752,name:"Orogeny",label:{zh:""}},INNER_RELEASE:{id:7389,name:"Inner Release",label:{zh:""}},PRIMAL_WRATH:{id:36924,name:"Primal Wrath",label:{zh:""}},PRIMAL_REND:{id:25753,name:"Primal Rend",label:{zh:""}},PRIMAL_RUINATION:{id:36925,name:"Primal Ruination",label:{zh:""}},INFURIATE:{id:52,name:"Infuriate",label:{zh:""}},INNER_CHAOS:{id:16465,name:"Inner Chaos",label:{zh:""}},CHAOTIC_CYCLONE:{id:16463,name:"Chaotic Cyclone",label:{zh:""}},THRILL_OF_BATTLE:{id:40,name:"Thrill of Battle",label:{zh:""}},EQUILIBRIUM:{id:3552,name:"Equilibrium",label:{zh:""}},SHAKE_IT_OFF:{id:7388,name:"Shake It Off",label:{zh:""}},RAW_INTUITION:{id:3551,name:"Raw Intuition",label:{zh:""}},NASCENT_FLASH:{id:16464,name:"Nascent Flash",label:{zh:""}},BLOODWHETTING:{id:25751,name:"Bloodwhetting",label:{zh:""}},VENGEANCE:{id:44,name:"Vengeance",label:{zh:""}},DAMNATION:{id:36923,name:"Damnation",label:{zh:""}},HOLMGANG:{id:43,name:"Holmgang",label:{zh:""}},DEFIANCE:{id:48,name:"Defiance",label:{zh:""}},RELEASE_DEFIANCE:{id:32066,name:"Release Defiance",label:{zh:""}}}),FH=ie()({cd_INNER_RELEASE:{name:"cd_InnerRelease"},cd_PRIMAL_WRATH:{name:"cd_PrimalWrath"},cd_UPHEAVAL:{name:"cd_Upheaval"},cd_ONSLAUGHT:{name:"cd_Onslaught"},cd_INFURIATE:{name:"cd_Infuriate"},cd_VENGEANCE:{name:"cd_Vengeance"},cd_THRILL_OF_BATTLE:{name:"cd_ThrillOfBattle"},cd_RAW_INTUITION:{name:"cd_RawIntuition"},cd_EQUILIBRIUM:{name:"cd_Equilibrium"},cd_SHAKE_IT_OFF:{name:"cd_ShakeItOff"},cd_HOLMGANG:{name:"cd_Holmgang"},cd_DEFIANCE:{name:"cd_Defiance"},cd_RELEASE_DEFIANCE:{name:"cd_ReleaseDefiance"}}),jH=ie()({BEAST_GAUGE:{name:"Beast Gauge",label:{zh:""}}}),hS=ie()({SURGING_TEMPEST:{name:"Surging Tempest",label:{zh:"buff"}},INNER_RELEASE:{name:"Inner Release",label:{zh:"buff"},maximumStacks:3},INNER_STRENGTH:{name:"Inner Strength",label:{zh:"buff"}},BURGEONING_FURY:{name:"Burgeoning Fury",label:{zh:"buff"},maximumStacks:3},WRATHFUL:{name:"Wrathful",label:{zh:""}},PRIMAL_REND_READY:{name:"Primal Rend Ready",label:{zh:""}},PRIMAL_RUINATION_READY:{name:"Primal Ruination Ready",label:{zh:""}},NASCENT_CHAOS:{name:"Nascent Chaos",label:{zh:"buff"}},NASCENT_FLASH:{name:"Nascent Flash",label:{zh:"buff"}},THRILL_OF_BATTLE:{name:"Thrill of Battle",label:{zh:""}},EQUILIBRIUM:{name:"Equilibrium",label:{zh:"hot"}},SHAKE_IT_OFF:{name:"Shake It Off",label:{zh:""}},SHAKE_IT_OFF_OVER_TIME:{name:"Shake It Off Over Time",label:{zh:"hot"}},RAW_INTUITION:{name:"Raw Intuition",label:{zh:"buff"}},STEM_THE_TIDE:{name:"Stem the Tide",label:{zh:"buff"}},STEM_THE_FLOW:{name:"Stem the Flow",label:{zh:"buff"}},BLOODWHETTING:{name:"Bloodwhetting",label:{zh:"buff"}},VENGEANCE:{name:"Vengeance",label:{zh:"30"}},DAMNATION:{name:"Damnation",label:{zh:"40"}},PRIMEVAL_IMPULSE:{name:"Primeval Impulse",label:{zh:"hot"}},HOLMGANG:{name:"Holmgang",label:{zh:"buff"}},DEFIANCE:{name:"Defiance",label:{zh:"buff"},mayNotBeCanceled:!0}}),zH=ie()({STORM_COMBO:{name:"Storm Combo",label:{zh:""}},TEMPEST_COMBO:{name:"Tempest Combo",label:{zh:"aoe"}}}),YH=ie()({NASCENT_CHAOS:{name:"Nascent Chaos",level:72},MASTERING_THE_BEAST:{name:"Mastering the Beast",level:74},ENHANCED_SHAKE_IT_OFF:{name:"Enhanced Shake It Off",level:76},ENHANCED_THRILL_OF_BATTLE:{name:"Enhanced Thrill of Battle",level:78},RAW_INTUITION_MASTERY:{name:"Raw Intuition Mastery",level:82},ENHANCED_NASCENT_FLASH:{name:"Enhanced Nascent Flash",level:82},ENHANCED_EQUILIBRIUM:{name:"Enhanced Equilibrium",level:84},ENHANCED_ONSLAUGHT:{name:"Enhanced Onslaught",level:88},VENGEANCE_MASTERY:{name:"Vengeance Mastery",level:92},ENHANCED_INNER_RELEASE:{name:"Enhanced Inner Release",level:96},ENHANCED_PRIMAL_REND:{name:"Enhanced Primal Rend",level:100}}),KH={...jH,...hS,...zH},VH=ie()({CURE:{id:120,name:"Cure",label:{zh:"",ja:""}},MEDICA:{id:124,name:"Medica",label:{zh:"",ja:""}},RAISE:{id:125,name:"Raise",label:{zh:"",ja:""}},CURE_II:{id:135,name:"Cure II",label:{zh:"",ja:""}},PRESENCE_OF_MIND:{id:136,name:"Presence of Mind",label:{zh:"",ja:""}},REGEN:{id:137,name:"Regen",label:{zh:"",ja:""}},CURE_III:{id:131,name:"Cure III",label:{zh:"",ja:""}},AETHERIAL_SHIFT:{id:37008,name:"Aetherial Shift",label:{zh:"",ja:""}},HOLY:{id:139,name:"Holy",label:{zh:"",ja:""}},AERO_II:{id:132,name:"Aero II",label:{zh:"",ja:""}},MEDICA_II:{id:133,name:"Medica II",label:{zh:"",ja:""}},BENEDICTION:{id:140,name:"Benediction",label:{zh:"",ja:""}},AFFLATUS_SOLACE:{id:16531,name:"Afflatus Solace",label:{zh:"",ja:""}},ASYLUM:{id:3569,name:"Asylum",label:{zh:"",ja:""}},ASSIZE:{id:3571,name:"Assize",label:{zh:"",ja:""}},THIN_AIR:{id:7430,name:"Thin Air",label:{zh:"",ja:""}},TETRAGRAMMATON:{id:3570,name:"Tetragrammaton",label:{zh:"",ja:""}},STONE_IV:{id:7431,name:"Stone IV",label:{zh:"",ja:""}},DIVINE_BENISON:{id:7432,name:"Divine Benison",label:{zh:"",ja:""}},PLENARY_INDULGENCE:{id:7433,name:"Plenary Indulgence",label:{zh:"",ja:""}},DIA:{id:16532,name:"Dia",label:{zh:"",ja:""}},GLARE:{id:16533,name:"Glare",label:{zh:"",ja:""}},AFFLATUS_MISERY:{id:16535,name:"Afflatus Misery",label:{zh:"",ja:""}},AFFLATUS_RAPTURE:{id:16534,name:"Afflatus Rapture",label:{zh:"",ja:""}},TEMPERANCE:{id:16536,name:"Temperance",label:{zh:"",ja:""}},GLARE_III:{id:25859,name:"Glare III",label:{zh:"",ja:""}},HOLY_III:{id:25860,name:"Holy III",label:{zh:"",ja:""}},AQUAVEIL:{id:25861,name:"Aquaveil",label:{zh:"",ja:""}},LITURGY_OF_THE_BELL:{id:25862,name:"Liturgy of the Bell",label:{zh:"",ja:""}},LITURGY_POP:{name:"Pop Liturgy of the Bell",label:{zh:""}},LITURGY_TRIGGER:{name:"Trigger Liturgy of the Bell",label:{zh:""}},GLARE_IV:{id:37009,name:"Glare IV",label:{zh:"",ja:""}},MEDICA_III:{id:37010,name:"Medica III",label:{zh:"",ja:""}},DIVINE_CARESS:{id:37011,name:"Divine Caress",label:{zh:"",ja:""}}}),WH=ie()({cd_PRESENCE_OF_MIND:{name:"cd_PresenceOfMind"},cd_AETHERIAL_SHIFT:{name:"cd_AetherialShift"},cd_BENEDICTION:{name:"cd_Benediction"},cd_ASYLUM:{name:"cd_Asylum"},cd_ASSIZE:{name:"cd_Assize"},cd_THIN_AIR:{name:"cd_ThinAir"},cd_TETRAGRAMMATON:{name:"cd_Tetragrammaton"},cd_DIVINE_BENISON:{name:"cd_DivineBenison"},cd_PLENARY_INDULGENCE:{name:"cd_PlenaryIndulgence"},cd_TEMPERANCE:{name:"cd_Temperance"},cd_AQUAVEIL:{name:"cd_Aquaveil"},cd_LITURGY_OF_THE_BELL:{name:"cd_LiturgyOfTheBell"},cd_LITURGY_POP:{name:"cd_LiturgyPop"},cd_LITURGY_TRIGGER:{name:"cd_LiturgyTrigger"},cd_DIVINE_CARESS:{name:"cd_DivineCaress"}}),XH=ie()({LILLIES:{name:"Lillies",maximumCharges:3,label:{zh:""}},LILY_TIMER:{name:"Lily Timer",label:{zh:""}},BLOOD_LILY:{name:"Blood Lily",maximumCharges:3,label:{zh:""}}}),fS=ie()({FREECURE:{name:"Freecure",label:{zh:""}},PRESENCE_OF_MIND:{name:"Presence of Mind",label:{zh:""}},SACRED_SIGHT:{name:"Sacred Sight",maximumStacks:3,label:{zh:""}},REGEN:{name:"Regen",label:{zh:""}},AERO_II:{name:"Aero II",label:{zh:""}},MEDICA_II:{name:"Medica II",label:{zh:""}},ASYLUM:{name:"Asylum",mayBeToggled:!0,label:{zh:""}},THIN_AIR:{name:"Thin Air",label:{zh:""}},DIVINE_BENISON:{name:"Divine Benison",label:{zh:""}},CONFESSION:{name:"Confession",label:{zh:""}},DIA:{name:"Dia",label:{zh:""}},TEMPERANCE:{name:"Temperance",label:{zh:""}},DIVINE_GRACE:{name:"Divine Grace",label:{zh:""}},AQUAVEIL:{name:"Aquaveil",label:{zh:""}},LITURGY_OF_THE_BELL:{name:"Liturgy of the Bell",maximumStacks:5,mayNotBeCanceled:!0,label:{zh:""}},MEDICA_III:{name:"Medica III",label:{zh:""}},DIVINE_CARESS:{name:"Divine Caress",label:{zh:""}},DIVINE_AURA:{name:"Divine Aura",label:{zh:""}}}),qH=ie()({}),ZH=ie()({AERO_MASTERY_II:{name:"Aero Mastery II",level:72},STONE_MASTERY_IV:{name:"Stone Mastery IV",level:72},TRANSCENDENT_AFFLATUS:{name:"Transcendent Afflatus",level:74},ENHANCED_ASYLUM:{name:"Enhanced Asylum",level:78},GLARE_MASTERY:{name:"Glare Mastery",level:82},HOLY_MASTERY:{name:"Holy Mastery",level:82},ENHANCED_DIVINE_BENISON:{name:"Enhanced Divine Benison",level:88},ENHANCED_PRESENCE_OF_MIND:{name:"Enhanced Presence of Mind",level:92},WHITE_MAGIC_MASTERY:{name:"White Magic Mastery",level:94},MEDICA_MASTERY:{name:"Medica Mastery",level:96},ENHANCED_TETRAGRAMMATON:{name:"Enhanced Tetragrammaton",level:98},ENHANCED_TEMPERANCE:{name:"Enhanced Temperance",level:100}}),$H={...XH,...fS,...qH},QH=ie()({WATER_CANNON:{name:"Water Cannon",label:{zh:"(2200)"},id:11385},SONIC_BOOM:{name:"Sonic Boom",label:{zh:"(1210)"},id:18308},SHARPENED_KNIFE:{name:"Sharpened Knife",label:{zh:"(1220)"},id:11400},HYDRO_PULL:{name:"Hydro Pull",label:{zh:"(2220)"},id:23282},MOON_FLUTE:{name:"Moon Flute",label:{zh:""},id:11415},DIAMONDBACK:{name:"Diamondback",label:{zh:""},id:11424},SONG_OF_TORMENT:{name:"Song of Torment",label:{zh:""},id:11386},WHISTLE:{name:"Whistle",label:{zh:""},id:18309},BRISTLE:{name:"Bristle",label:{zh:""},id:11393},TINGLE:{name:"Tingle",label:{zh:""},id:23265},FINAL_STING:{name:"Final Sting",label:{zh:""},id:11407},COLD_FOG:{name:"Cold Fog",label:{zh:""},id:23267},WHITE_DEATH:{name:"White Death",label:{zh:""},id:23268},POP_COLD_FOG:{name:"Pop Cold Fog",label:{zh:""}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:""},id:23288},END_PHANTOM_FLURRY:{name:"End Phantom Flurry",label:{zh:""},id:23289},MATRA_MAGIC:{name:"Matra Magic",label:{zh:""},id:23285},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:""},id:34576},CONVICTION_MARCATO:{name:"Conviction Marcato",label:{zh:""},id:34574},REVENGE_BLAST:{name:"Revenge Blast",label:{zh:""},id:18316},WILD_RAGE:{name:"Wild Rage",label:{zh:""},id:34568},GOBLIN_PUNCH:{name:"Goblin Punch",label:{zh:""},id:34563},THE_ROSE_OF_DESTRUCTION:{name:"The Rose of Destruction",label:{zh:""},id:23275},ERUPTION:{name:"Eruption",label:{zh:""},id:11427},FEATHER_RAIN:{name:"Feather Rain",label:{zh:""},id:11426},MOUNTAIN_BUSTER:{name:"Mountain Buster",label:{zh:""},id:11428},SHOCK_STRIKE:{name:"Shock Strike",label:{zh:""},id:11429},GLASS_DANCE:{name:"Glass Dance",label:{zh:""},id:11430},QUASAR:{name:"Quasar",label:{zh:""},id:18324},J_KICK:{name:"J Kick",label:{zh:""},id:18325},TRIPLE_TRIDENT:{name:"Triple Trident",label:{zh:""},id:23264},BOTH_ENDS:{name:"Both Ends",label:{zh:""},id:23287},NIGHTBLOOM:{name:"Nightbloom",label:{zh:""},id:23290},SEA_SHANTY:{name:"Sea Shanty",label:{zh:""},id:34580},APOKALYPSIS:{name:"Apokalypsis",label:{zh:""},id:34581},BEING_MORTAL:{name:"Being Mortal",label:{zh:""},id:34582},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:""},id:34567},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:""},id:34579},SURPANAKHA:{name:"Surpanakha",label:{zh:""},id:18323}}),JH=ie()({cd_ERUPTION:{name:"cd_Eruption",label:{zh:"CD: /"}},cd_SHOCK_STRIKE:{name:"cd_Shock_Strike",label:{zh:"CD: /"}},cd_GLASS_DANCE:{name:"cd_Glass_Dance",label:{zh:"CD: "}},cd_SURPANAKHA:{name:"cd_Surpanakha",label:{zh:"CD: "}},cd_QUASAR:{name:"cd_Quasar",label:{zh:"CD: /"}},cd_NIGHTBLOOM:{name:"cd_Nightbloom",label:{zh:"CD: /"}},cd_SEA_SHANTY:{name:"cd_Sea_Shanty",label:{zh:"CD: "}},cd_BEING_MORTAL:{name:"cd_Being_Mortal",label:{zh:"CD: /"}},cd_COLD_FOG:{name:"cd_Cold_Fog",label:{zh:"CD: "}},cd_TRIPLE_TRIDENT:{name:"cd_Triple_Trident",label:{zh:"CD: "}},cd_PHANTOM_FLURRY:{name:"cd_Phantom_Flurry",label:{zh:"CD: "}},cd_COLD_FOG_POP:{name:"cd_Cold_Fog_Pop",label:{zh:"CD: "}},cd_MATRA_MAGIC:{name:"cd_Matra_Magic",label:{zh:"CD: "}},cd_WINGED_REPROBATION:{name:"cd_Winged_Reprobation",label:{zh:"CD: "}},cd_THE_ROSE_OF_DESTRUCTION:{name:"cd_The_Rose_of_Destruction",label:{zh:"CD: "}},cd_SURPANAKHA_LOCKOUT:{name:"cd_SurpanakhaLockout",label:{zh:"CD: "}}}),ek=ie()({}),ES=ie()({NIGHTBLOOM:{name:"Bleeding",label:{zh:""}},SONG_OF_TORMENT:{name:"Bleeding",label:{zh:""}},FEATHER_RAIN:{name:"Feather Rain",label:{zh:""}},WAXING_NOCTURNE:{name:"Waxing Nocturne",label:{zh:""}},WANING_NOCTURNE:{name:"Waning Nocturne",label:{zh:""}},WHISTLE:{name:"Whistle",label:{zh:""}},BRISTLE:{name:"Bristle",label:{zh:""}},TINGLE:{name:"Tingle",label:{zh:""}},COLD_FOG:{name:"Cold Fog",label:{zh:""}},TOUCH_OF_FROST:{name:"Touch of Frost",label:{zh:""}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:""}},DIAMONDBACK:{name:"Diamondback",label:{zh:""}},APOKALYPSIS:{name:"Apokalypsis",label:{zh:""}},WINGED_REDEMPTION:{name:"Winged Redemption",label:{zh:""}},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:""}},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:""}},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:""},maximumStacks:4},SURPANAKHAS_FURY:{name:"Surpanakha's Fury",label:{zh:""},maximumStacks:4},BRUSH_WITH_DEATH:{name:"Brush with Death",label:{zh:""}}}),tk=ie()({SURPANAKHA_LOCKOUT:{name:"Supranakha Lockout",label:{zh:""}}}),nk=ie()({}),ik={...ek,...ES,...tk},ak=ie()({NEVER:{name:"NEVER"},TINCTURE:{name:"Tincture",label:{zh:"",ja:""}},SPRINT:{id:3,name:"Sprint",label:{zh:"",ja:""}}}),ok=ie()({NEVER:{name:"Never"},cd_GCD:{name:"cd_GCD",label:{zh:"GCD"}},cd_TINCTURE:{name:"cd_Tincture"},cd_SPRINT:{name:"cd_Sprint"}}),lk=ie()({MANA:{name:"Mana",label:{zh:"MP"}}}),sk=ie()({TINCTURE:{name:"Tincture",label:{zh:""}},SPRINT:{name:"Sprint",label:{zh:""}}}),rk=ie()({MOVEMENT:{name:"Movement"},NOT_ANIMATION_LOCKED:{name:"NotAnimationLocked"},NOT_CASTER_TAXED:{name:"NotCasterTaxed"},IN_COMBAT:{name:"InCombat",label:{zh:""}},AUTOS_ENGAGED:{name:"Autos Engaged"},STORED_AUTO:{name:"Stored Auto"},PARTY_SIZE:{name:"PartySize",label:{zh:""}},NEVER:{name:"Never"}}),ck=ie()({NEVER:{name:"Never",level:1}}),uk={...lk,...sk,...rk},dk=ie()({LAST_BASTION:{id:199,name:"Last Bastion",label:{zh:""}},LAND_WAKER:{id:4240,name:"Land Waker",label:{zh:""}},DARK_FORCE:{id:4241,name:"Dark Force",label:{zh:""}},GUNMETAL_SOUL:{id:17105,name:"Gunmetal Soul",label:{zh:""}}}),hk=ie()({PULSE_OF_LIFE:{id:208,name:"Pulse of Life"},ANGEL_FEATHERS:{id:4247,name:"Angel Feathers"},ASTRAL_STASIS:{id:4248,name:"Astral Stasis"},TECHNE_MAKRE:{id:24859,name:"Techne Makre"}}),fk=ie()({FINAL_HEAVEN:{id:202,name:"Final Heaven"},DRAGONSONG_DIVE:{id:4242,name:"Dragonsong Dive"},CHIMATSURI:{id:4243,name:"Chimatsuri"},DOOM_OF_THE_LIVING:{id:7861,name:"Doom of the Living"},THE_END:{id:24858,name:"The End"},WORLD_SWALLOWER:{id:34866,name:"World-swallower"}}),Ek=ie()({SAGITTARIUS_ARROW:{id:4244,name:"Sagittarius Arrow"},SATELLITE_BEAM:{id:4245,name:"Satellite Beam"},CRIMSON_LOTUS:{id:17106,name:"Crimson Lotus"}}),mk=ie()({METEOR:{id:205,name:"Meteor"},TERAFLARE:{id:3009,name:"Teraflare"},VERMILLION_SCOURGE:{id:7862,name:"Vermillion Scourge"},CHROMATIC_FANTASY:{id:34867,name:"Chromatic Fantasy"}}),Ak=ie()({LAST_BASTION:{name:"Last Bastion",label:{zh:"LB3 buff"}},LAND_WAKER:{name:"Land Waker",label:{zh:"LB3 buff"}},DARK_FORCE:{name:"Dark Force",label:{zh:"LB3 buff"}},GUNMETAL_SOUL:{name:"Gunmetal Soul",label:{zh:"LB3 buff"}}}),Rk=ie()({cd_LIMIT_BREAK_1:{name:"cd_LIMIT_BREAK_1",label:{zh:"CDLB"}},cd_LIMIT_BREAK_2:{name:"cd_LIMIT_BREAK_2",label:{zh:"CDLB"}},cd_LIMIT_BREAK_3:{name:"cd_LIMIT_BREAK_3",label:{zh:"CDLB"}}}),Tk=ie()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{id:197,name:"Shield Wall"},STRONGHOLD:{id:198,name:"Stronghold"},HEALING_WIND:{id:206,name:"Healing Wind"},BREATH_OF_THE_EARTH:{id:207,name:"Breath of the Earth"},BRAVER:{id:200,name:"Braver"},BLADEDANCE:{id:201,name:"Bladedance"},BIGSHOT:{id:4238,name:"Big Shot"},DESPERADO:{id:4239,name:"Desperado"},SKYSHARD:{id:203,name:"Skyshard"},STARSTORM:{id:204,name:"Starstorm"}}),y0=ie()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{name:"Shield Wall",label:{zh:"LB1 buff"}},STRONGHOLD:{name:"Stronghold",label:{zh:"LB2 buff"}}}),Sk={...dk,...hk,...fk,...Ek,...mk},jo={...Tk,...Sk},v0={...y0,...Ak},Ik=ie()({ARMS_LENGTH:{id:7548,name:"Arm's Length",label:{zh:""}},SECOND_WIND:{id:7541,name:"Second Wind",label:{zh:""}},HEAD_GRAZE:{id:7551,name:"Head Graze",label:{zh:""}},ESUNA:{id:7568,name:"Esuna",label:{zh:""}},RESCUE:{id:7571,name:"Rescue",label:{zh:""}},ADDLE:{id:7560,name:"Addle",label:{zh:"",ja:""},discordEmote:"Addle"},SWIFTCAST:{id:7561,name:"Swiftcast",label:{zh:"",ja:""}},LUCID_DREAMING:{id:7562,name:"Lucid Dreaming",label:{zh:"",ja:""},discordEmote:"Lucid"},SURECAST:{id:7559,name:"Surecast",label:{zh:"",ja:""},discordEmote:"Surecast"},FEINT:{id:7549,name:"Feint",label:{zh:""}},BLOODBATH:{id:7542,name:"Bloodbath",label:{zh:""}},TRUE_NORTH:{id:7546,name:"True North",label:{zh:""}},LEG_SWEEP:{id:7863,name:"Leg Sweep",label:{zh:""}},RAMPART:{id:7531,name:"Rampart",label:{zh:""}},REPRISAL:{id:7535,name:"Reprisal",label:{zh:""}},LOW_BLOW:{id:7540,name:"Low Blow",label:{zh:""}},INTERJECT:{id:7538,name:"Interject",label:{zh:""}},PROVOKE:{id:7533,name:"Provoke",label:{zh:""}},SHIRK:{id:7537,name:"Shirk",label:{zh:""}}}),_k=ie()({cd_ADDLE:{name:"cd_Addle"},cd_SWIFTCAST:{name:"cd_Swiftcast"},cd_LUCID_DREAMING:{name:"cd_LucidDreaming"},cd_SURECAST:{name:"cd_Surecast"},cd_SECOND_WIND:{name:"cd_SecondWind"},cd_ARMS_LENGTH:{name:"cd_ArmsLength"},cd_RESCUE:{name:"cd_Rescue"},cd_FEINT:{name:"cd_Feint"},cd_TRUE_NORTH:{name:"cd_TrueNorth"},cd_BLOODBATH:{name:"cd_Bloodbath"},cd_LEG_SWEEP:{name:"cd_LegSweep"},cd_RAMPART:{name:"cd_Rampart"},cd_REPRISAL:{name:"cd_Reprisal"},cd_LOW_BLOW:{name:"cd_LowBlow"},cd_INTERJECT:{name:"cd_Interject"},cd_PROVOKE:{name:"cd_Provoke"},cd_SHIRK:{name:"cd_Shirk"},cd_HEAD_GRAZE:{name:"cd_HeadGraze"}}),gk=ie()({ADDLE:{name:"Addle",label:{zh:""}},SWIFTCAST:{name:"Swiftcast",label:{zh:""}},LUCID_DREAMING:{name:"Lucid Dreaming",label:{zh:""}},SURECAST:{name:"Surecast",label:{zh:""}},ARMS_LENGTH:{name:"Arms Length",label:{zh:""}},FEINT:{name:"Feint",label:{zh:""}},TRUE_NORTH:{name:"True North",label:{zh:""}},BLOODBATH:{name:"Bloodbath",label:{zh:""}},RAMPART:{name:"Rampart",label:{zh:"buff"}},REPRISAL:{name:"Reprisal",label:{zh:"buff"}}}),pk=ie()({REAR_POSITIONAL:{name:"Rear Positional",label:{zh:""},mayBeToggled:!0},FLANK_POSITIONAL:{name:"Flank Positional",label:{zh:""},mayBeToggled:!0},AUTOS_ENGAGED:{name:"Autos Engaged",mayBeToggled:!0}}),Nk=ie()({ENHANCED_SWIFTCAST:{name:"Enhanced Swiftcast",level:94},ENHANCED_ADDLE:{name:"Enhanced Addle",level:98},ENHANCED_HEALING_MAGIC:{name:"Enhanced Healing Magic",level:85},MAGICK_MASTERY_HEALER:{name:"Magick Mastery",level:94},ENHANCED_SECOND_WIND:{name:"Enhanced Second Wind",level:94},ENHANCED_FEINT:{name:"Enhanced Feint",level:98},MELEE_MASTERY_TANK:{name:"Melee Mastery",level:84},ENHANCED_RAMPART:{name:"Enhanced Rampart",level:94},MELEE_MASTERY_II_TANK:{name:"Melee Mastery II",level:94},ENHANCED_REPRISAL:{name:"Enhanced Reprisal",level:98}}),M0={...gk,...pk},bn={...ak,...Ik,...jo,...Xx,...BH,...fx,...Sx,...VH,...rS,...w1,...pH,...Mx,...sx,...Ux,...hH,...lH,...HH,...q1,...Cx,...tx,...z1,...D0,...eH,...jx,...QH},Ms={...ok,..._k,...Rk,...qx,...FH,...Ex,...Ix,...WH,...TH,...P1,...NH,...Lx,...rx,...wx,...fH,...sH,...kH,...Z1,...bx,...nx,...Y1,...yH,...tH,...zx,...JH},Ye={...uk,...M0,...v0,...Jx,...KH,...Tx,...Nx,...$H,...gH,...j1,...DH,...b0,...hx,...Fx,...RH,...dH,...GH,...ex,...vx,...lx,...X1,...xH,...oH,...Wx,...ik},IR={...ck,...Nk,...Qx,...YH,...Rx,...px,...ZH,..._H,...F1,...OH,...kx,...dx,...Bx,...AH,...uH,...PH,...J1,...yx,...ox,...W1,...LH,...aH,...Vx,...nk},_n={epsilon:1e-6};var ot=(e=>(e[e.lvl70=70]="lvl70",e[e.lvl80=80]="lvl80",e[e.lvl90=90]="lvl90",e[e.lvl100=100]="lvl100",e))(ot||{});const Ck=.1;var _e=(e=>(e.Fire="Fire",e.Ice="Ice",e.Lightning="Lightning",e.Wind="Wind",e.Earth="Earth",e.Physical="Physical",e.Other="Other",e))(_e||{}),Ti=(e=>(e.RNG="RNG",e.Never="Never",e.Always="Always",e))(Ti||{}),Tt=(e=>(e.Blocked="blocked by CD, animation lock or caster tax",e.SecondaryBlocked="blocked by secondary CD",e.NotEnoughMP="not enough MP",e.NotInCombat="not in combat (must wait for first damage application)",e.RequirementsNotMet="skill requirements not satisfied",e.SkillNotUnlocked="skill not unlocked at provided level",e.BuffNoLongerAvailable="buff no longer available",e.PastTargetTime="jump target time has already passed",e.CastCanceled="cast canceled (skill requirements no longer met at confirmation time)",e.UnknownSkill="unknown skill",e))(Tt||{});function Wu(){return{unavailableReasons:[],ready:function(){return this.unavailableReasons.length===0},toString:function(){return this.ready()?"ready":this.unavailableReasons.join("; ")},addUnavailableReason:function(e){this.unavailableReasons.includes(e)||this.unavailableReasons.push(e)},clone:function(){const e=Wu();return this.unavailableReasons.forEach(t=>e.addUnavailableReason(t)),e}}}var H=(e=>(e.LeyLines="Ley Lines",e.Hyperphantasia="Hyperphantasia",e.Acceleration="Acceleration",e.Fuka="Fuka",e.Fugetsu="Fugetsu",e.EnhancedEnpi="Enhanced Enpi",e.NoMercy="No Mercy",e.PowerSurge="Power Surge",e.LanceCharge="Lance Charge",e.LifeOfTheDragon="Life Of The Dragon",e.EnhancedPiercingTalon="Enhanced Piercing Talon",e.LifeSurge="Life Surge",e.DivineMight="Divine Might",e.Requiescat="Requiescat",e.FightOrFlight="Fight Or Flight",e.Tincture="Tincture",e.ArcaneCircle="Arcane Circle",e.ArmysPaeon="Army's Paeon",e.BattleLitany="Battle Litany",e.BattleVoice="Battle Voice",e.Brotherhood="Brotherhood",e.Card_TheBalance="Card - The Balance",e.Card_TheSpear="Card - The Spear",e.ChainStratagem="Chain Stratagem",e.Devilment="Devilment",e.Divination="Divination",e.Dokumori="Dokumori",e.Embolden="Embolden",e.MagesBallad="Mage's Ballad",e.RadiantFinale1="Radiant Finale (1)",e.RadiantFinale2="Radiant Finale (2)",e.RadiantFinale3="Radiant Finale (3)",e.Barrage="Barrage",e.SearingLight="Searing Light",e.StandardFinish="Standard Finish",e.StarryMuse="Starry Muse",e.TechnicalFinish="Technical Finish",e.WanderersMinuet="The Wanderer's Minuet",e.RagingStrikes="Raging Strikes",e.DeathsDesign="Death's Design",e.Zoe="Zoe",e.Autophysis="Autophysis",e.Krasis="Krasis",e.Philosophia="Philosophia",e.Soteria="Soteria",e.WaxingNocturne="Waxing Nocturne",e.Whistle="Whistle",e.Bristle="Bristle",e.TingleA="TingleA",e.TingleB="TingleB",e.TrickAttack="Trick Attack",e.KunaisBane="Kunai's Bane",e.Bunshin="Bunshin",e.RiddleOfFire="Riddle of Fire",e.TheArrow="The Arrow",e.NeutralSect="Neutral Sect",e.Synastry="Synastry",e.Confession="Confession",e.Asylum="Asylum",e.Temperance="Temperance",e.HuntersInstinct="Hunter's Instinct",e.Swiftscaled="Swiftscaled",e.FeyIllumination="Fey Illumination",e.Dissipation="Dissipation",e.Protraction="Protraction",e.Recitation="Recitation",e))(H||{});function bk(e){return Ca({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(e)}function Ok(e){return Ca({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(e)}function Dk(e){return Ca({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"},child:[]}]})(e)}function _R(e,t){const n=Math.pow(10,t);return Math.floor(e*n)/n}var ja,L0,x0,H0,lT;const Uo=class Uo{static getMainstatBase(t){switch(t){case ot.lvl70:return 292;case ot.lvl80:return 340;case ot.lvl90:return 390;case ot.lvl100:return 440}}static getSubstatBase(t){switch(t){case ot.lvl70:return 364;case ot.lvl80:return 380;case ot.lvl90:return 400;case ot.lvl100:return 420}}static getStatDiv(t){switch(t){case ot.lvl70:return 900;case ot.lvl80:return 1300;case ot.lvl90:return 1900;case ot.lvl100:return 2780}}static calculateDamage(t,n,a,s,c,d,f){var w,K,ne,fe,ue;let h=c;const m=d>=1?d:d<0?0:Uo.criticalHitRate(t,n)+d,R=f>=1?f:f<0?0:Oe(w=Uo,ja,x0).call(w,t,a)+f;if(m===0&&R===0)return h;const T=Oe(K=Uo,ja,L0).call(K,t,n),S=1.25,I=m>=1&&R>=1,C=m>1?_R(1+(T-1)*(d-1),3):1,_=R>1?_R(1+(S-1)*(f-1),3):1,O=m>1?1:m,y=R>1?1:R;I?h*=_R(Oe(ne=Uo,ja,lT).call(ne,t,s)+Oe(fe=Uo,ja,H0).call(fe,t,a),3):h*=Oe(ue=Uo,ja,lT).call(ue,t,s);const x=h*C*T,L=h*_*S,v=x*_*S,P=O*y,k=1-O-y+P;return h*k+x*(O-P)+L*(y-P)+v*P}static criticalHitRate(t,n){const a=this.getSubstatBase(t),s=this.getStatDiv(t);return(Math.floor(200*(n-a)/s)+50)*.001}static overtimePotency(t,n,a){const s=this.getSubstatBase(t),c=this.getStatDiv(t),d=(1e3+Math.floor((n-s)*130/c))*.001;return a*d}static mpTick(t,n){const a=this.getMainstatBase(t),s=this.getStatDiv(t);return 200+Math.floor(150*(n-a)/s)}static preTaxGcd(t,n,a,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t),f=Math.ceil((c-n)*130/d),h=Math.floor(a*(1e3+f));return Math.floor((100-(s??0))*h/1e3)/100}static preTaxGcdLegacy(t,n,a,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(s??0))*100/100)*Math.floor((2e3-Math.floor(130*(n-c)/d+1e3))*(1e3*a)/1e4)/100)*100/100)/100}static preTaxCastTime(t,n,a,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(s??0))*100/100)*Math.floor((2e3-Math.floor(130*(n-c)/d+1e3))*(1e3*a)/1e3)/100)*100/100)/1e3}static afterFpsTax(t,n){return Math.floor(n*t+1)/t}};ja=new WeakSet,L0=function(t,n){const a=this.getSubstatBase(t),s=this.getStatDiv(t);return(Math.floor(200*(n-a)/s)+1400)*.001},x0=function(t,n){const a=this.getSubstatBase(t),s=this.getStatDiv(t);return Math.floor(550*(n-a)/s)*.001},H0=function(t,n){const a=this.getSubstatBase(t),s=this.getStatDiv(t);return Math.floor(140*(n-a)/s)*.001},lT=function(t,n){const a=this.getMainstatBase(t),s=this.getStatDiv(t);return Math.floor(1e3+140*(n-a)/s)*.001},Ve(Uo,ja);let bt=Uo;var U=(e=>(e[e.AF3=0]="AF3",e[e.AF2=1]="AF2",e[e.AF1=2]="AF1",e[e.UI3=3]="UI3",e[e.UI2=4]="UI2",e[e.UI1=5]="UI1",e[e.ENO=6]="ENO",e[e.STARRY=7]="STARRY",e[e.EMBOLDEN_M=8]="EMBOLDEN_M",e[e.ACCELERATION=9]="ACCELERATION",e[e.POT=10]="POT",e[e.COMBO=11]="COMBO",e[e.AUTO_CDH=12]="AUTO_CDH",e[e.NO_CDH=13]="NO_CDH",e[e.PARTY=14]="PARTY",e[e.STANDARD_SINGLE=15]="STANDARD_SINGLE",e[e.STANDARD_DOUBLE=16]="STANDARD_DOUBLE",e[e.TECHNICAL_SINGLE=17]="TECHNICAL_SINGLE",e[e.TECHNICAL_DOUBLE=18]="TECHNICAL_DOUBLE",e[e.TECHNICAL_TRIPLE=19]="TECHNICAL_TRIPLE",e[e.TECHNICAL_QUADRUPLE=20]="TECHNICAL_QUADRUPLE",e[e.DEVILMENT=21]="DEVILMENT",e[e.FUGETSU=22]="FUGETSU",e[e.AUTO_CRIT=23]="AUTO_CRIT",e[e.YATEN=24]="YATEN",e[e.POSITIONAL=25]="POSITIONAL",e[e.ARCANE_CIRCLE=26]="ARCANE_CIRCLE",e[e.DEATHSDESIGN=27]="DEATHSDESIGN",e[e.ENHANCED_GIBBET_GALLOWS=28]="ENHANCED_GIBBET_GALLOWS",e[e.ENHANCED_REAPING=29]="ENHANCED_REAPING",e[e.IMMORTAL_SACRIFICE=30]="IMMORTAL_SACRIFICE",e[e.OVERHEATED=31]="OVERHEATED",e[e.SURGING_TEMPEST=32]="SURGING_TEMPEST",e[e.RAGING_STRIKES=33]="RAGING_STRIKES",e[e.WANDERERS_MINUET=34]="WANDERERS_MINUET",e[e.MAGES_BALLAD=35]="MAGES_BALLAD",e[e.ARMYS_PAEON=36]="ARMYS_PAEON",e[e.BATTLE_VOICE=37]="BATTLE_VOICE",e[e.RADIANT_FINALE_ONE_CODA=38]="RADIANT_FINALE_ONE_CODA",e[e.RADIANT_FINALE_TWO_CODA=39]="RADIANT_FINALE_TWO_CODA",e[e.RADIANT_FINALE_THREE_CODA=40]="RADIANT_FINALE_THREE_CODA",e[e.BARRAGE=41]="BARRAGE",e[e.NO_MERCY=42]="NO_MERCY",e[e.SEARING_LIGHT=43]="SEARING_LIGHT",e[e.POWER_SURGE=44]="POWER_SURGE",e[e.ENHANCED_PIERCING_TALON=45]="ENHANCED_PIERCING_TALON",e[e.LANCE_CHARGE=46]="LANCE_CHARGE",e[e.LIFE_OF_THE_DRAGON=47]="LIFE_OF_THE_DRAGON",e[e.LIFE_SURGE=48]="LIFE_SURGE",e[e.BATTLE_LITANY=49]="BATTLE_LITANY",e[e.FIGHT_OR_FLIGHT=50]="FIGHT_OR_FLIGHT",e[e.DIVINE_MIGHT=51]="DIVINE_MIGHT",e[e.REQUIESCAT=52]="REQUIESCAT",e[e.PET=53]="PET",e[e.ZOE=54]="ZOE",e[e.SOTERIA=55]="SOTERIA",e[e.KRASIS=56]="KRASIS",e[e.AUTOPHYSIS=57]="AUTOPHYSIS",e[e.PHILOSOPHIA=58]="PHILOSOPHIA",e[e.MOON_FLUTE=59]="MOON_FLUTE",e[e.BRISTLE=60]="BRISTLE",e[e.WHISTLE=61]="WHISTLE",e[e.TINGLEA=62]="TINGLEA",e[e.TINGLEB=63]="TINGLEB",e[e.SURPANAKHA=64]="SURPANAKHA",e[e.WINGED_REPROBATION=65]="WINGED_REPROBATION",e[e.WINGED_REDEMPTION=66]="WINGED_REDEMPTION",e[e.DARKSIDE=67]="DARKSIDE",e[e.BUNSHIN=68]="BUNSHIN",e[e.KASSATSU=69]="KASSATSU",e[e.HOLLOW_NOZUCHI=70]="HOLLOW_NOZUCHI",e[e.KAZEMATOI=71]="KAZEMATOI",e[e.MEISUI=72]="MEISUI",e[e.DOKUMORI=73]="DOKUMORI",e[e.TRICK_ATTACK=74]="TRICK_ATTACK",e[e.KUNAIS_BANE=75]="KUNAIS_BANE",e[e.BROTHERHOOD=76]="BROTHERHOOD",e[e.RIDDLE_OF_FIRE=77]="RIDDLE_OF_FIRE",e[e.SSS_CHAKRA=78]="SSS_CHAKRA",e[e.MNK_BALL=79]="MNK_BALL",e[e.DIVINATION=80]="DIVINATION",e[e.NEUTRAL_SECT=81]="NEUTRAL_SECT",e[e.THE_ARROW=82]="THE_ARROW",e[e.SYNASTRY=83]="SYNASTRY",e[e.CONFESSION=84]="CONFESSION",e[e.ASYLUM=85]="ASYLUM",e[e.TEMPERANCE=86]="TEMPERANCE",e[e.EXTRA_BELL_STACKS=87]="EXTRA_BELL_STACKS",e[e.HUNTERS_INSTINCT=88]="HUNTERS_INSTINCT",e[e.HONED=89]="HONED",e[e.VENOM=90]="VENOM",e[e.POISED=91]="POISED",e[e.CHAIN_STRAT=92]="CHAIN_STRAT",e[e.FEY_ILLUMINATION=93]="FEY_ILLUMINATION",e[e.DISSIPATION=94]="DISSIPATION",e[e.PROTRACTION=95]="PROTRACTION",e))(U||{});const _N=1.1,gR=.9,X={Tincture:{kind:"multiplier",source:10,potencyFactor:1},AutoCrit:{kind:"critDirect",source:23,critBonus:1,dhBonus:0},AutoCDH:{kind:"critDirect",source:12,critBonus:1,dhBonus:1},NoCDH:{kind:"critDirect",source:13,critBonus:0,dhBonus:0},Starry:{kind:"multiplier",source:7,potencyFactor:1.05},EmboldenMagic:{kind:"multiplier",source:8,potencyFactor:1.1},AccelerationImpact:{kind:"adder",source:9,additiveAmount:50},SingleStandardFinish:{kind:"multiplier",source:15,potencyFactor:1.02},DoubleStandardFinish:{kind:"multiplier",source:16,potencyFactor:1.05},SingleTechnicalFinish:{kind:"multiplier",source:17,potencyFactor:1.01},TripleTechnicalFinish:{kind:"multiplier",source:19,potencyFactor:1.03},QuadrupleTechnicalFinish:{kind:"multiplier",source:20,potencyFactor:1.05},Devilment:{kind:"critDirect",source:21,critBonus:.2,dhBonus:.2},FugetsuBase:{kind:"multiplier",source:22,potencyFactor:1.1},FugetsuEnhanced:{kind:"multiplier",source:22,potencyFactor:1.13},YatenpiBase:{kind:"adder",source:24,additiveAmount:160},YatenpiEnhanced:{kind:"adder",source:24,additiveAmount:170},ArcaneCircle:{kind:"multiplier",source:26,potencyFactor:1.03},DeathsDesign:{kind:"multiplier",source:27,potencyFactor:1.1},EnhancedGibbetGallows:{kind:"adder",source:28,additiveAmount:60},EnhancedReaping:{kind:"adder",source:29,additiveAmount:60},ImmortalSacrifice:{kind:"adder",source:30,additiveAmount:40},Overheated:{kind:"adder",source:31,additiveAmount:20},SurgingTempest:{kind:"multiplier",source:32,potencyFactor:1.1},RagingStrikes:{kind:"multiplier",source:33,potencyFactor:1.15},MagesBallad:{kind:"multiplier",source:35,potencyFactor:1.01},ArmysPaeon:{kind:"critDirect",source:36,critBonus:0,dhBonus:.03},WanderersMinuet:{kind:"critDirect",source:34,critBonus:.02,dhBonus:0},BattleVoice:{kind:"critDirect",source:37,critBonus:0,dhBonus:.2},RadiantFinaleOneCoda:{kind:"multiplier",source:38,potencyFactor:1.02},RadiantFinaleTwoCoda:{kind:"multiplier",source:39,potencyFactor:1.04},RadiantFinaleThreeCoda:{kind:"multiplier",source:40,potencyFactor:1.06},BarrageRefulgent:{kind:"multiplier",source:41,potencyFactor:3},BarrageWideVolley:{kind:"adder",source:41,additiveAmount:80},BarrageShadowbite:{kind:"adder",source:41,additiveAmount:100},NoMercy:{kind:"multiplier",source:42,potencyFactor:1.2},SearingLight:{kind:"multiplier",source:43,potencyFactor:1.05},SmnPet:{kind:"multiplier",source:53,potencyFactor:.8},PowerSurge:{kind:"multiplier",source:44,potencyFactor:1.1},LanceCharge:{kind:"multiplier",source:46,potencyFactor:1.1},LifeOfTheDragon:{kind:"multiplier",source:47,potencyFactor:1.15},BattleLitany:{kind:"critDirect",source:49,critBonus:.1,dhBonus:0},EnhancedPiercingTalon:{kind:"adder",source:45,additiveAmount:150},LifeSurge:{kind:"critDirect",source:48,critBonus:1,dhBonus:0},FightOrFlight:{kind:"multiplier",source:50,potencyFactor:1.25},Zoe:{kind:"multiplier",source:54,potencyFactor:1.5},Soteria:{kind:"multiplier",source:55,potencyFactor:1.7},Krasis:{kind:"multiplier",source:56,potencyFactor:1.2},Autophysis:{kind:"multiplier",source:57,potencyFactor:1.1},Philosophia:{kind:"multiplier",source:58,potencyFactor:1.2},MoonFlute:{kind:"multiplier",source:59,potencyFactor:1.5},Whistle:{kind:"multiplier",source:61,potencyFactor:1.8},Bristle:{kind:"multiplier",source:60,potencyFactor:1.5},TingleA:{kind:"adder",source:62,additiveAmount:100},TingleB:{kind:"adder",source:63,additiveAmount:300},WingedReprobation:{kind:"adder",source:65,additiveAmount:100},WingedRedemption:{kind:"adder",source:66,additiveAmount:220},Darkside:{kind:"multiplier",source:67,potencyFactor:_N},DrkPet:{kind:"multiplier",source:53,potencyFactor:1.05*_N},BunshinST:{kind:"adder",source:68,additiveAmount:160*gR},BunshinAOE:{kind:"adder",source:68,additiveAmount:80*gR},NinPet:{kind:"multiplier",source:53,potencyFactor:gR},Kassatsu:{kind:"multiplier",source:69,potencyFactor:1.3},HollowNozuchi:{kind:"adder",source:70,additiveAmount:70},Kazematoi:{kind:"adder",source:71,additiveAmount:100},Meisui:{kind:"adder",source:72,additiveAmount:150},Dokumori:{kind:"multiplier",source:73,potencyFactor:1.05},TrickAttack:{kind:"multiplier",source:74,potencyFactor:1.1},KunaisBane:{kind:"multiplier",source:75,potencyFactor:1.1},Brotherhood:{kind:"multiplier",source:76,potencyFactor:1.05},RiddleOfFire:{kind:"multiplier",source:77,potencyFactor:1.15},Divination:{kind:"multiplier",source:80,potencyFactor:1.06},NeutralSect:{kind:"multiplier",source:81,potencyFactor:1.2},TheArrow:{kind:"multiplier",source:82,potencyFactor:1.1},Synastry:{kind:"multiplier",source:83,potencyFactor:1.4},AstPet:{kind:"multiplier",source:53,potencyFactor:.98},Confession:{kind:"adder",source:84,additiveAmount:200},Asylum:{kind:"multiplier",source:85,potencyFactor:1.1},Temperance:{kind:"multiplier",source:86,potencyFactor:1.2},WhmPet:{kind:"multiplier",source:53,potencyFactor:.96},HuntersInstinct:{kind:"multiplier",source:88,potencyFactor:1.1},HonedST:{kind:"adder",source:89,additiveAmount:100},HonedAoE:{kind:"adder",source:89,additiveAmount:20},VenomST:{kind:"adder",source:90,additiveAmount:100},VenomAoE:{kind:"adder",source:90,additiveAmount:40},VenomOGCDST:{kind:"adder",source:90,additiveAmount:50},VenomOGCDAoE:{kind:"adder",source:90,additiveAmount:30},Poised:{kind:"adder",source:91,additiveAmount:50},ChainStrat:{kind:"critDirect",source:92,critBonus:.1,dhBonus:0},SchPet:{kind:"multiplier",source:53,potencyFactor:.9},FeyIllum:{kind:"multiplier",source:93,potencyFactor:1.1},Dissipation:{kind:"multiplier",source:94,potencyFactor:1.2},Protraction:{kind:"multiplier",source:95,potencyFactor:1.1}};function yk(e){return{kind:"adder",source:11,additiveAmount:e}}function vk(e){return{kind:"adder",source:52,additiveAmount:e}}function Mk(e){return{kind:"adder",source:51,additiveAmount:e}}function vf(e){return{kind:"adder",source:25,additiveAmount:e}}var zl,k0,U0,w0;class ln{constructor(t){Ve(this,zl);J(this,"config");J(this,"sourceTime");J(this,"sourceSkill");J(this,"aspect");J(this,"description");J(this,"base");J(this,"targetCount");J(this,"falloff");J(this,"snapshotTime");J(this,"applicationTime");J(this,"modifiers",[]);this.config=t.config,this.sourceTime=t.sourceTime,this.sourceSkill=t.sourceSkill,this.aspect=t.aspect,this.base=t.basePotency,this.snapshotTime=t.snapshotTime,this.description=t.description,this.targetCount=t.targetCount,this.falloff=t.falloff}getAmount(t){let n=1,a=0,s=0,c=0,d=!1,f=!1,h=!1;this.modifiers.forEach(T=>{T.source===10?n*=t.tincturePotencyMultiplier:T.source===12?d=!0:T.source===23?f=!0:T.source===13?h=!0:T.kind==="critDirect"?(s+=T.critBonus,c+=T.dhBonus):T.kind==="multiplier"?n*=T.potencyFactor:T.kind==="adder"&&(a+=T.additiveAmount)}),console.assert(!(h&&(d||f)),"skills that can't CDH cannot be auto-crit or auto-CDH"),h&&(d=!1,f=!1),console.assert(!(d&&f),"cannot be both auto-crit and auto-CDH"),t.includePartyBuffs&&this.snapshotTime&&p.game.getPartyBuffs(this.snapshotTime).forEach(T=>{T.kind==="multiplier"?n*=T.potencyFactor:T.kind==="critDirect"&&(s+=T.critBonus,c+=T.dhBonus)});const m=this.base+a;let R=m*Oe(this,zl,w0).call(this,n,h?0:s,h?0:c);if(d?R*=Oe(this,zl,k0).call(this,s,c):f?R*=Oe(this,zl,U0).call(this,s,c):h&&(R=m*n/bt.calculateDamage(this.config.level,this.config.criticalHit,this.config.directHit,this.config.determination,n,0,0)),t.includeSplash){const T=1+(1-(this.falloff??1))*(this.targetCount-1);R*=T}return R}getPartyBuffs(){return this.snapshotTime?[...p.game.getPartyBuffs(this.snapshotTime).keys()]:[]}resolve(t){console.assert(this.snapshotTime!==void 0,`${this.sourceSkill} displayed at ${t} did not have snapshotTime`),console.assert(this.applicationTime===void 0,`${this.sourceSkill} displayed at ${t} was already resolved at ${this.applicationTime}`),this.applicationTime=t}hasResolved(){return this.applicationTime!==void 0}hasHitBoss(t){return this.applicationTime!==void 0&&!t(this.applicationTime)}hasSnapshotted(){return this.snapshotTime!==void 0}}zl=new WeakSet,k0=function(t,n){const a=this.config.level,s=bt.calculateDamage(a,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,t,n);return bt.calculateDamage(a,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,1+t,1+n)/s},U0=function(t,n){const a=this.config.level,s=bt.calculateDamage(a,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,t,n);return bt.calculateDamage(a,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,1+t,n)/s},w0=function(t,n,a){const s=this.config.level,c=this.config.criticalHit,d=this.config.directHit,f=this.config.determination,h=bt.calculateDamage(s,c,d,f,1,0,0);return bt.calculateDamage(s,c,d,f,t,n,a)/h};var Rt=(e=>(e.Red="#f64141",e.Orange="#e89b5f",e.Yellow="#ffd535",e.Green="#50c53d",e.Cyan="#53e5e5",e.Blue="#217ff5",e.Purple="#9755ef",e.Pink="#ee79ee",e.Grey="#6f6f6f",e))(Rt||{});const Lt=()=>hi(N.useContext(gn)),hi=e=>e==="Dark"?Lk:xk,wl=(e,t)=>hi(e)[t],Lk={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#e176c2",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",GNB:"#f6b26b",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#5579f1",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#b0b0b0",emphasis:"#dadada",success:"mediumseagreen",warning:"#ff6224",background:"#1f1f21",tipBackground:"#2a2a2a",bgLowContrast:"#333",bgMediumContrast:"#393939",bgHighContrast:"#626262",timelineEditor:{headerFooter:"#424242",bgAlternateRow:"#282828"},resources:{gcdBar:"#5cab43",lockBar:"#737373",mana:"#62a5d2",manaTick:"#3d5c73",cdhTag:"#d55124",comboTag:"#5c8bad",petTag:"#eb9b5f"},blm:{enochian:"#b69241",astralFire:"#d55124",astralSoul:"#cb8046",umbralIce:"#509bd5",umbralHeart:"#8fced5",paradox:"#d953ee",polyTimer:"#594472",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#a948e3",weaponCanvas:"#a53535",landscapeCanvas:"#2e51dd",paletteGauge:"#b69241",holyPaint:"#9bc6dd",cometPaint:"#7e19aa",starryBuff:"#509bd5"},rdm:{whiteMana:"#dddddd",blackMana:"#2a4bf5",manaStack:"#cb8046",emboldenBuff:"#de0202",accelBuff:"#f0d1e8"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#c7ffff",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#ffba00"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#9a0ec4",trick:"#ffd454"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fffea5",extraChakra:"#fe9b28"},whm:{lily:"#d3ffff",blood:"#e08889",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#f8facd",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#acfff7",seraph:"#44b6fd",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#2d2d2d",tracks:"#242424",castBar:"#42364d",lockBar:"#696969",gcdBar:"#354931",invalidBg:"#f25449",llCover:"#5ea647",potCover:"#c4543a",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#32525e",warningMark:"#9d7103",lucidTickMark:"#56b3d5",countdown:"rgba(15, 15, 15, 0.4)",markerAlpha:"4f"}},xk={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#f485d6",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#4665ff",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#000000",emphasis:"#000000",success:"mediumseagreen",warning:"#ff4d07",background:"#ffffff",tipBackground:"#ffffff",bgLowContrast:"#efefef",bgMediumContrast:"lightgrey",bgHighContrast:"darkgrey",timelineEditor:{headerFooter:"#cacaca",bgAlternateRow:"#eeeeee"},resources:{gcdBar:"#8edc72",lockBar:"#cbcbcb",mana:"#8ACEEA",manaTick:"#C2EAFF",cdhTag:"#ff6633",comboTag:"#53a7c9",petTag:"#eb9b5f"},blm:{enochian:"#f5cf96",astralFire:"#ff6633",astralSoul:"#ffa641",umbralIce:"#66bbff",umbralHeart:"#95dae3",paradox:"#d953ee",polyTimer:"#d5bbf1",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#b854e8",weaponCanvas:"#d54d48",landscapeCanvas:"#4568f6",paletteGauge:"#f5cf96",holyPaint:"#b7c9d5",cometPaint:"#9926c8",starryBuff:"#66bbff"},rdm:{whiteMana:"#fcd8d4",blackMana:"#467aeb",manaStack:"#9926c8",emboldenBuff:"#c91310",accelBuff:"#c973b4"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#addede",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#e74a3c"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#7e03a3",trick:"#e6b525"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fee11c",extraChakra:"#fe9b28"},whm:{lily:"#a5d0e8",blood:"#ff5454",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#d3d672",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#79d9d0",seraph:"#3299d9",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#e9e9e9",tracks:"#f3f3f3",castBar:"#ecd6f3",lockBar:"#9d9d9d",gcdBar:"#ccefc6",invalidBg:"#c21104",llCover:"#87ec71",potCover:"#ff865c",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#b6dfea",warningMark:"#ffbb29",lucidTickMark:"#88cae0",countdown:"rgba(0, 0, 0, 0.1)",markerAlpha:"7f"}};function Hk(e){const t=Lt(),n=new Map([[U.AF3,t.blm.astralFire],[U.AF2,t.blm.astralFire],[U.AF1,t.blm.astralFire],[U.UI3,t.blm.umbralIce],[U.UI2,t.blm.umbralIce],[U.UI1,t.blm.umbralIce],[U.ENO,t.blm.enochian],[U.AUTO_CDH,t.resources.cdhTag],[U.STARRY,t.pct.starryBuff],[U.EMBOLDEN_M,t.rdm.emboldenBuff],[U.ACCELERATION,t.rdm.accelBuff],[U.STANDARD_SINGLE,t.dnc.jete],[U.STANDARD_DOUBLE,t.dnc.jete],[U.TECHNICAL_SINGLE,t.dnc.esprit],[U.TECHNICAL_DOUBLE,t.dnc.esprit],[U.TECHNICAL_TRIPLE,t.dnc.esprit],[U.TECHNICAL_QUADRUPLE,t.dnc.esprit],[U.DEVILMENT,t.dnc.feathers],[U.OVERHEATED,"#ee79ee"],[U.COMBO,t.resources.comboTag],[U.FUGETSU,t.sam.fugetsu],[U.AUTO_CRIT,t.resources.cdhTag],[U.YATEN,t.pct.cometPaint],[U.POSITIONAL,"#50c53d"],[U.ARCANE_CIRCLE,"#ee79ee"],[U.DEATHSDESIGN,"#f64141"],[U.ENHANCED_GIBBET_GALLOWS,"#217ff5"],[U.ENHANCED_REAPING,"#9755ef"],[U.IMMORTAL_SACRIFICE,"#ee79ee"],[U.SURGING_TEMPEST,"#9755ef"],[U.BARRAGE,t.brd.barrage],[U.RAGING_STRIKES,t.brd.ragingStrikes],[U.BATTLE_VOICE,t.brd.battleVoice],[U.RADIANT_FINALE_THREE_CODA,t.brd.radiantFinale],[U.RADIANT_FINALE_TWO_CODA,t.brd.radiantFinale],[U.RADIANT_FINALE_ONE_CODA,t.brd.radiantFinale],[U.WANDERERS_MINUET,t.brd.wanderersCoda],[U.MAGES_BALLAD,t.brd.magesCoda],[U.ARMYS_PAEON,t.brd.armysCoda],[U.NO_MERCY,t.rdm.blackMana],[U.SEARING_LIGHT,t.smn.searing],[U.LIFE_SURGE,t.drg.lifeSurge],[U.LANCE_CHARGE,t.drg.lanceCharge],[U.LIFE_OF_THE_DRAGON,t.drg.lifeOfTheDragon],[U.BATTLE_LITANY,t.drg.battleLitany],[U.POWER_SURGE,t.drg.powerSurge],[U.ENHANCED_PIERCING_TALON,t.drg.enhancedPiercingTalon],[U.DIVINE_MIGHT,t.pld.divineMight],[U.REQUIESCAT,t.pld.requiescat],[U.FIGHT_OR_FLIGHT,t.pld.fightOrFlight],[U.PET,t.resources.petTag],[U.MOON_FLUTE,t.blu.moonflute],[U.WHISTLE,t.blu.whistle],[U.BRISTLE,t.blu.bristle],[U.TINGLEA,t.blu.tinglea],[U.TINGLEB,t.blu.tingleb],[U.SURPANAKHA,t.blu.surpanakha],[U.WINGED_REDEMPTION,t.blu.wingedreprobation],[U.WINGED_REPROBATION,t.blu.wingedreprobation],[U.DARKSIDE,t.drk.darkside],[U.BUNSHIN,t.nin.bunshin],[U.KASSATSU,t.nin.kassatsu],[U.HOLLOW_NOZUCHI,t.nin.nozuchi],[U.KAZEMATOI,t.nin.kazematoi],[U.MEISUI,t.nin.meisui],[U.DOKUMORI,t.nin.dokumori],[U.TRICK_ATTACK,t.nin.trick],[U.KUNAIS_BANE,t.nin.trick],[U.BROTHERHOOD,t.mnk.brotherhood],[U.RIDDLE_OF_FIRE,t.mnk.riddleOfFire],[U.MNK_BALL,t.mnk.opo],[U.SSS_CHAKRA,t.mnk.chakra],[U.DIVINATION,t.ast.div],[U.HUNTERS_INSTINCT,t.vpr.huntersInstinct],[U.HONED,t.vpr.vprComboTimer],[U.VENOM,t.vpr.vprComboTimer],[U.POISED,t.vpr.vprComboTimer],[U.CHAIN_STRAT,t.sch.chain],[U.NO_CDH,t.timeline.untargetableDamageMark]]);return console.assert(n.has(e),`modifier ${e} doesn't have a color!`),n.get(e)??t.text}function gN(e){const t=e.colorTheme==="Dark",n=t?l.jsx(Ok,{}):l.jsx(Dk,{}),a=Lt(),s=N.useContext(gn),c=g({en:t?"Dark Mode":"Light Mode",zh:t?"":""});return l.jsx("div",{title:c,style:{display:"inline-block",cursor:"pointer",borderBottom:e.colorTheme===s?"none":"1px solid "+a.text,borderTop:e.colorTheme===s?"1px solid "+a.text:"none"},onClick:()=>e.setColorTheme(e.colorTheme),children:n})}const fE=()=>{var t;const e=gt("colorTheme");return e==="Light"||e==="Dark"?e:(t=window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches?"Dark":"Light"},gn=N.createContext(fE());function kk(e){return l.jsx("div",{style:{display:"inline-block"},children:l.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[l.jsx(gN,{colorTheme:"Light",setColorTheme:e.setColorTheme}),"|",l.jsx(gN,{colorTheme:"Dark",setColorTheme:e.setColorTheme})]})})}class Mf{static getJob(t){return mt[t]}static getAction(t){return bn[t]}static findAction(t){return this.findByName(bn,t)}static findActionKey(t){return this.findKeyByName(bn,t)}static getResource(t){return Ye[t]}static findResource(t){return this.findByName(Ye,t)}static findResourceKey(t){return this.findKeyByName(Ye,t)}static getCooldown(t){return Ms[t]}static findCooldown(t){return this.findByName(Ms,t)}static findCooldownKey(t){return this.findKeyByName(Ms,t)}static findByName(t,n){return Object.values(t).find(a=>a.name===n)}static findKeyByName(t,n){const a=Object.entries(t).find(([s,c])=>c.name===n);if(a)return a[0]}}function Vh(e){const t=Fa();return t==="zh"?e==="en"?"":e==="zh"?"":"":t==="ja"?e==="en"?"":e==="zh"?"":"":e.toString()}function g(e){const t=Fa();return t==="zh"&&e.zh?e.zh:t==="ja"&&e.ja?e.ja:e.en}function Uk(e,t){{const[n,a,s]=e.split("/");return`20${s}${n}${a}`}}function Pu(e){switch(e){case"spellSpeed":return g({en:"spell speed: ",zh:""}).toString();case"skillSpeed":return g({en:"skill speed: ",zh:""}).toString();case"fps":return g({en:"FPS: ",zh:""}).toString();case"criticalHit":return g({en:"crit: ",zh:""}).toString();case"directHit":return g({en:"direct hit: ",zh:""}).toString();case"determination":return g({en:"determination: ",zh:""}).toString();case"piety":return g({en:"piety: ",zh:""}).toString();case"animationLock":return g({en:"animation lock: ",zh:""}).toString()}return e}function ba(e){if(e==="NEVER")return g({en:"unknown skill",zh:""}).toString();if(!(e in bn))return e;const t=Mf.getAction(e);return g({en:t.name,...t.label}).toString()}function Ls(e){if(e===void 0)return g({en:"reason unknown",zh:""}).toString();let t="";return e===Tt.Blocked?t="CD":e===Tt.SecondaryBlocked?t="CD":e===Tt.NotEnoughMP?t="MP":e===Tt.NotInCombat?t="":e===Tt.RequirementsNotMet?t="":e===Tt.SkillNotUnlocked?t="Lv":e===Tt.BuffNoLongerAvailable?t="BUFF":e===Tt.PastTargetTime?t="":e===Tt.CastCanceled?t="":e===Tt.UnknownSkill?t="":console.error("unlocalized reason: "+e),g({en:e,zh:t}).toString()}const wk=new Map([[H.LeyLines,""],[H.Hyperphantasia,""],[H.Tincture,""],[H.ArcaneCircle,""],[H.ArmysPaeon,""],[H.BattleLitany,""],[H.BattleVoice,""],[H.Brotherhood,""],[H.Card_TheBalance,""],[H.Card_TheSpear,""],[H.ChainStratagem,""],[H.Devilment,""],[H.Divination,""],[H.Dokumori,""],[H.Embolden,""],[H.MagesBallad,""],[H.RadiantFinale1,"1"],[H.RadiantFinale2,"2"],[H.RadiantFinale3,"3"],[H.SearingLight,""],[H.StandardFinish,""],[H.StarryMuse,""],[H.TechnicalFinish,""],[H.WanderersMinuet,""]]),Pk=new Map([[H.LeyLines,""],[H.Tincture,""],[H.ArcaneCircle,""],[H.ArmysPaeon,""],[H.BattleLitany,""],[H.BattleVoice,""],[H.Brotherhood,""],[H.Card_TheBalance,""],[H.Card_TheSpear,""],[H.ChainStratagem,""],[H.Devilment,""],[H.Divination,""],[H.Dokumori,""],[H.Embolden,""],[H.MagesBallad,""],[H.RadiantFinale1,"1"],[H.RadiantFinale2,"2"],[H.RadiantFinale3,"3"],[H.SearingLight,""],[H.StandardFinish,""],[H.StarryMuse,""],[H.TechnicalFinish,""],[H.WanderersMinuet,""]]);function P0(e){const t=Fa();return t==="zh"?wk.get(e)??e:t==="ja"?Pk.get(e)??e:e}function $e(e){const t=Fa();if(e in Ms){const a=Mf.getCooldown(e),s=g({en:a.name,...a.label}).toString();if(t!=="en"&&s===a.name){const c=e.slice(3),d=Object.keys(bn).find(f=>bn[f].name===c||f===c);if(d!==void 0)return"CD"+ba(d)}return s}const n=Mf.getResource(e);return g({en:n.name,...n.label}).toString()}const pN=new Map([[U.AF3,{en:"AF3",zh:""}],[U.AF2,{en:"AF2",zh:""}],[U.AF1,{en:"AF1",zh:""}],[U.UI3,{en:"UI3",zh:""}],[U.UI2,{en:"UI2",zh:""}],[U.UI1,{en:"UI1",zh:""}],[U.ENO,{en:"enochian",zh:""}],[U.POT,{en:"pot",zh:""}],[U.PARTY,{en:"party",zh:""}],[U.AUTO_CDH,{en:"auto crit/direct hit",zh:""}],[U.STARRY,{en:"starry muse",zh:""}],[U.EMBOLDEN_M,{en:"embolden",zh:""}],[U.ACCELERATION,{en:"acceleration",zh:""}],[U.STANDARD_SINGLE,{en:"single standard finish",zh:""}],[U.STANDARD_DOUBLE,{en:"double standard finish",zh:""}],[U.TECHNICAL_SINGLE,{en:"single technical finish",zh:""}],[U.TECHNICAL_DOUBLE,{en:"double technical finish",zh:""}],[U.TECHNICAL_TRIPLE,{en:"triple technical finish",zh:""}],[U.TECHNICAL_QUADRUPLE,{en:"quadruple technical finish",zh:""}],[U.DEVILMENT,{en:"devilment",zh:""}],[U.OVERHEATED,{en:"overheated",zh:""}],[U.COMBO,{en:"combo",zh:""}],[U.FUGETSU,{en:"fugetsu",zh:""}],[U.AUTO_CRIT,{en:"auto crit",zh:""}],[U.YATEN,{en:"yaten",zh:""}],[U.POSITIONAL,{en:"positional",zh:""}],[U.ARCANE_CIRCLE,{en:"arcane circle",zh:""}],[U.DEATHSDESIGN,{en:"death's design",zh:""}],[U.ENHANCED_GIBBET_GALLOWS,{en:"enhanced gibbet/gallows",zh:"/"}],[U.ENHANCED_REAPING,{en:"enhanced reaping",zh:"/"}],[U.IMMORTAL_SACRIFICE,{en:"immortal sacrifice"}],[U.BARRAGE,{en:"barrage"}],[U.RAGING_STRIKES,{en:"raging strikes"}],[U.BATTLE_VOICE,{en:"battle voice"}],[U.RADIANT_FINALE_THREE_CODA,{en:"three coda radiant finale"}],[U.RADIANT_FINALE_TWO_CODA,{en:"two coda radiant finale"}],[U.RADIANT_FINALE_ONE_CODA,{en:"one coda radiant finale"}],[U.WANDERERS_MINUET,{en:"wanderer's minuet"}],[U.MAGES_BALLAD,{en:"mage's ballad"}],[U.ARMYS_PAEON,{en:"army's paeon"}],[U.NO_MERCY,{en:"no mercy",zh:""}],[U.SEARING_LIGHT,{en:"searing light",zh:""}],[U.SURGING_TEMPEST,{en:"surging tempest",zh:""}],[U.POWER_SURGE,{en:"power surge"}],[U.LANCE_CHARGE,{en:"lance charge"}],[U.ENHANCED_PIERCING_TALON,{en:"enhanced piercing talon"}],[U.LIFE_OF_THE_DRAGON,{en:"life of the dragon"}],[U.LIFE_SURGE,{en:"life surge"}],[U.PET,{en:"pet modifier",zh:""}],[U.DIVINE_MIGHT,{en:"divine might",zh:""}],[U.REQUIESCAT,{en:"requiescat",zh:""}],[U.FIGHT_OR_FLIGHT,{en:"fight or flight",zh:""}],[U.WHISTLE,{en:"WH",zh:""}],[U.BRISTLE,{en:"BR",zh:""}],[U.MOON_FLUTE,{en:"MF",zh:""}],[U.TINGLEA,{en:"TING",zh:""}],[U.TINGLEB,{en:"TING",zh:""}],[U.WINGED_REPROBATION,{en:"WREP",zh:""}],[U.WINGED_REDEMPTION,{en:"WRED",zh:""}],[U.DARKSIDE,{en:"darkside",zh:""}],[U.BUNSHIN,{en:"bunshin",zh:""}],[U.KASSATSU,{en:"kassatsu",zh:""}],[U.HOLLOW_NOZUCHI,{en:"hollow nozuchi",zh:""}],[U.KAZEMATOI,{en:"kazematoi",zh:""}],[U.MEISUI,{en:"meisui",zh:""}],[U.DOKUMORI,{en:"dokumori",zh:""}],[U.TRICK_ATTACK,{en:"trick attack",zh:""}],[U.KUNAIS_BANE,{en:"kunai's bane",zh:""}],[U.BROTHERHOOD,{en:"brotherhood",zh:""}],[U.RIDDLE_OF_FIRE,{en:"riddle of fire",zh:""}],[U.MNK_BALL,{en:"ball",zh:""}],[U.SSS_CHAKRA,{en:"chakra",zh:""}],[U.DIVINATION,{en:"divination",zh:""}],[U.HUNTERS_INSTINCT,{en:"hunter's instinct",zh:""}],[U.HONED,{en:"honed"}],[U.VENOM,{en:"venom"}],[U.POISED,{en:"poised"}],[U.CHAIN_STRAT,{en:"chain stratagem",zh:""}],[U.NO_CDH,{en:"no crit/direct hit",zh:""}]]);function NN(e){return console.assert(pN.has(e),`modifier ${e} doesn't have a name!`),g(pN.get(e)??{en:"unknown"})}const CN=new Map([[U.AF3,{en:"AF3",zh:""}],[U.AF2,{en:"AF2",zh:""}],[U.AF1,{en:"AF1",zh:""}],[U.UI3,{en:"UI3",zh:""}],[U.UI2,{en:"UI2",zh:""}],[U.UI1,{en:"UI1",zh:""}],[U.ENO,{en:"ENO",zh:""}],[U.POT,{en:"pot",zh:""}],[U.PARTY,{en:"party",zh:""}],[U.AUTO_CDH,{en:"CDH",zh:""}],[U.STARRY,{en:"STARRY",zh:""}],[U.EMBOLDEN_M,{en:"MB",zh:""}],[U.ACCELERATION,{en:"ACC",zh:""}],[U.STANDARD_SINGLE,{en:"SSF",zh:""}],[U.STANDARD_DOUBLE,{en:"DSF",zh:""}],[U.TECHNICAL_SINGLE,{en:"STF",zh:""}],[U.TECHNICAL_DOUBLE,{en:"DTF",zh:""}],[U.TECHNICAL_TRIPLE,{en:"TTF",zh:""}],[U.TECHNICAL_QUADRUPLE,{en:"QTF",zh:""}],[U.DEVILMENT,{en:"DEV",zh:""}],[U.OVERHEATED,{en:"OVERHEATED",zh:""}],[U.COMBO,{en:"CMB",zh:""}],[U.FUGETSU,{en:"FGS",zh:""}],[U.AUTO_CRIT,{en:"CRIT",zh:""}],[U.YATEN,{en:"ENH",zh:""}],[U.POSITIONAL,{en:"PS",zh:""}],[U.ARCANE_CIRCLE,{en:"AC",zh:""}],[U.DEATHSDESIGN,{en:"DD",zh:""}],[U.ENHANCED_GIBBET_GALLOWS,{en:"E. GIB/GAL",zh:"/"}],[U.ENHANCED_REAPING,{en:"E. REAPING",zh:"/"}],[U.IMMORTAL_SACRIFICE,{en:"IMMORTAL SAC",zh:""}],[U.BARRAGE,{en:"BRG"}],[U.RAGING_STRIKES,{en:"RS"}],[U.BATTLE_VOICE,{en:"BV"}],[U.RADIANT_FINALE_THREE_CODA,{en:"RF3"}],[U.RADIANT_FINALE_TWO_CODA,{en:"RF2"}],[U.RADIANT_FINALE_ONE_CODA,{en:"RF1"}],[U.WANDERERS_MINUET,{en:"WM"}],[U.MAGES_BALLAD,{en:"MB"}],[U.ARMYS_PAEON,{en:"AP"}],[U.NO_MERCY,{en:"NM",zh:""}],[U.SEARING_LIGHT,{en:"SL",zh:""}],[U.SURGING_TEMPEST,{en:"SURGING",zh:""}],[U.POWER_SURGE,{en:"PWS"}],[U.LANCE_CHARGE,{en:"LC"}],[U.LIFE_OF_THE_DRAGON,{en:"LIFE"}],[U.ENHANCED_PIERCING_TALON,{en:"ENH"}],[U.LIFE_SURGE,{en:"LS"}],[U.BATTLE_LITANY,{en:"BL"}],[U.DIVINE_MIGHT,{en:"DM",zh:""}],[U.REQUIESCAT,{en:"REQ",zh:""}],[U.FIGHT_OR_FLIGHT,{en:"FOF",zh:""}],[U.PET,{en:"PET",zh:""}],[U.WHISTLE,{en:"WH",zh:""}],[U.BRISTLE,{en:"BR",zh:""}],[U.MOON_FLUTE,{en:"MF",zh:""}],[U.TINGLEA,{en:"TING",zh:""}],[U.TINGLEB,{en:"TING",zh:""}],[U.WINGED_REPROBATION,{en:"WREP",zh:""}],[U.WINGED_REDEMPTION,{en:"WRED",zh:""}],[U.DARKSIDE,{en:"DS",zh:""}],[U.BUNSHIN,{en:"BUN",zh:""}],[U.KASSATSU,{en:"KASS",zh:""}],[U.HOLLOW_NOZUCHI,{en:"NOZ",zh:""}],[U.KAZEMATOI,{en:"KAZ",zh:""}],[U.MEISUI,{en:"MEI",zh:""}],[U.DOKUMORI,{en:"DOKU",zh:""}],[U.TRICK_ATTACK,{en:"TRICK",zh:""}],[U.KUNAIS_BANE,{en:"KB",zh:""}],[U.BROTHERHOOD,{en:"BH",zh:""}],[U.RIDDLE_OF_FIRE,{en:"ROF",zh:""}],[U.MNK_BALL,{en:"BALL",zh:""}],[U.SSS_CHAKRA,{en:"CHAKRA",zh:""}],[U.DIVINATION,{en:"DIV",zh:""}],[U.HUNTERS_INSTINCT,{en:"HI",zh:""}],[U.HONED,{en:"HONED"}],[U.VENOM,{en:"VENOM"}],[U.POISED,{en:"POISED"}],[U.CHAIN_STRAT,{en:"CHAIN",zh:""}],[U.NO_CDH,{en:"NO CDH",zh:""}]]);function Gk(e){return console.assert(CN.has(e),`modifier ${e} doesn't have a tag name!`),g(CN.get(e)??{en:"unknown"})}const G0=navigator.language==="zh-CN"||navigator.language==="zh"?"zh":"en";let Fa=()=>gt("language")||G0;function bN(e){let t="English";e.lang==="zh"&&(t=""),e.lang==="ja"&&(t="");const n=Lt();return l.jsx("div",{style:{display:"inline-block",cursor:"pointer",textDecoration:e.lang===Fa()?"none":"underline",borderTop:e.lang===Fa()?"1px solid "+n.text:"none"},onClick:()=>{e.setCurrentLanguage(e.lang)},children:t})}function Bk(){const e=gt("language"),t=e!==null&&["zh","ja","en"].includes(e)?e:G0,[n,a]=N.useState(t),s=c=>{a(c),pt("language",c)};return N.useEffect(()=>(Fa=()=>n,()=>{Fa=()=>n})),N.useEffect(()=>{p.updateAllDisplay()},[n]),l.jsxs("div",{style:{display:"inline-block"},children:[l.jsx("span",{style:{display:"inline-block",fontSize:17,position:"relative",marginRight:2},children:l.jsx(bk,{})}),l.jsxs("div",{style:{display:"inline-block",fontSize:14,verticalAlign:"top"},children:[l.jsx(bN,{lang:"en",setCurrentLanguage:s}),"|",l.jsx(bN,{lang:"zh",setCurrentLanguage:s})]})]})}const B0=ie()({UNIMPLEMENTED:{},OUTDATED:{label:{en:"Outdated",zh:""},warningContent:{en:"WARNING: This job recently had significant changes, and may not have been fully updated to reflect them. Exported plans may not load correctly following these changes, so be cautious about relying on them until the job has been fully updated.",zh:"bugtxt"}},TESTING:{label:{en:"Testing",zh:""},warningContent:{en:"WARNING: This job was recently added to XIV in the Shell and is still being tested. There may be bugs or changes in the near future, so make sure to frequently export and save timelines for this job to make sure you don't lose your work.",zh:"txt"}},LIVE:{}});ie()({TANK:{label:g({en:"Tank"})},HEALER:{label:g({en:"Healer"})},MELEE:{label:g({en:"Melee"})},RANGED:{label:g({en:"Ranged"})},CASTER:{label:g({en:"Caster"})},LIMITED:{label:g({en:"Limited"})}});const F0=ie()({PLD:{role:"TANK",implementationLevel:"TESTING",usesMp:!0,limitBreak:"LAST_BASTION",limitBreakBuff:"LAST_BASTION",mainStat:"strength",zh:""},WAR:{role:"TANK",implementationLevel:"LIVE",limitBreak:"LAND_WAKER",limitBreakBuff:"LAND_WAKER",mainStat:"strength",zh:""},DRK:{role:"TANK",implementationLevel:"LIVE",usesMp:!0,limitBreak:"DARK_FORCE",limitBreakBuff:"DARK_FORCE",mainStat:"strength",zh:""},GNB:{role:"TANK",implementationLevel:"LIVE",limitBreak:"GUNMETAL_SOUL",limitBreakBuff:"GUNMETAL_SOUL",mainStat:"strength",zh:""}}),mS=ie()({WHM:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"PULSE_OF_LIFE",mainStat:"mind",zh:""},SCH:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ANGEL_FEATHERS",mainStat:"mind",zh:""},AST:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ASTRAL_STASIS",mainStat:"mind",zh:""},SGE:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"TECHNE_MAKRE",mainStat:"mind",zh:""}}),j0=ie()({MNK:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"FINAL_HEAVEN",mainStat:"strength",zh:""},DRG:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DRAGONSONG_DIVE",mainStat:"strength",zh:""},NIN:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"CHIMATSURI",mainStat:"dexterity",zh:""},SAM:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DOOM_OF_THE_LIVING",mainStat:"strength",zh:""},RPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"THE_END",mainStat:"strength",zh:""},VPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"WORLD_SWALLOWER",mainStat:"dexterity",zh:""}}),z0=ie()({BRD:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SAGITTARIUS_ARROW",mainStat:"dexterity",zh:""},MCH:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SATELLITE_BEAM",mainStat:"dexterity",zh:""},DNC:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"CRIMSON_LOTUS",mainStat:"dexterity",zh:""}}),Y0=ie()({BLM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"METEOR",mainStat:"intelligence",zh:""},SMN:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"TERAFLARE",mainStat:"intelligence",zh:""},RDM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"VERMILLION_SCOURGE",mainStat:"intelligence",zh:""},PCT:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"CHROMATIC_FANTASY",mainStat:"intelligence",zh:""}}),K0=ie()({BLU:{role:"LIMITED",implementationLevel:"TESTING",usesMp:!0,mainStat:"intelligence",zh:""}}),mt={...F0,...mS,...j0,...z0,...Y0,...K0,...ie()({NEVER:{role:"LIMITED",implementationLevel:"UNIMPLEMENTED",usesMp:!1,mainStat:"strength",zh:""}})},Gs=Object.keys(mt),pi=Object.keys(F0),Oa=Object.keys(mS),fi=Object.keys(j0),Yl=Object.keys(z0),Da=Object.keys(Y0),Kl=Object.keys(K0);var Ri=(e=>(e[e.ManaGain=0]="ManaGain",e[e.MpTick=1]="MpTick",e[e.LucidTick=2]="LucidTick",e[e.MeditateTick=3]="MeditateTick",e[e.AutoTick=4]="AutoTick",e))(Ri||{}),Cs;class Me{constructor(t,n,a){J(this,"name");Ve(this,Cs);J(this,"timeTillEvent");J(this,"delay");J(this,"effectFn");J(this,"canceled");this.name=t,ke(this,Cs,[]),this.timeTillEvent=n,this.delay=n,this.effectFn=a,this.canceled=!1}hasTag(t){for(let n=0;n<se(this,Cs).length;n++)if(t===se(this,Cs)[n])return!0;return!1}addTag(t){this.hasTag(t)||se(this,Cs).push(t)}}Cs=new WeakMap;class V0{constructor(t,n){J(this,"maxValue");J(this,"currentValue");this.maxValue=t,this.currentValue=n}availableAmount(){return this.currentValue}consume(t){this.currentValue<t-_n.epsilon&&console.warn(`invalid resource consumption: ${this.type}, ${this.currentValue} - ${t}`),this.currentValue=Math.max(this.currentValue-t,0)}gain(t){this.currentValue=Math.min(this.currentValue+t,this.maxValue)}overrideCurrentValue(t){(t<0||t>this.maxValue)&&console.warn(`invalid resource value override: ${this.type}, ${t} should be in [0, ${this.maxValue}]`),this.currentValue=t}}var rd;class ai extends V0{constructor(n,a,s,c=!1){super(a,s);J(this,"type");J(this,"enabled");J(this,"warnOnOvercap");J(this,"pendingChange");Ve(this,rd);this.type=n,this.enabled=!0,this.warnOnOvercap=c}available(n){return this.availableAmount()+_n.epsilon>=n}availableAmountIncludingDisabled(){return this.currentValue}availableAmount(){return this.enabled?super.availableAmount():0}gain(n){this.warnOnOvercap&&this.currentValue+n>this.maxValue&&p.reportWarning({kind:"overcap",rsc:this.type}),super.gain(n)}gainWrapping(n){this.currentValue=(this.currentValue+n)%(this.maxValue+1)}overrideTimer(n,a){this.pendingChange?(n.addEvent(new Me("override "+this.pendingChange.name+" timer: "+a,0,()=>{this.pendingChange&&(this.pendingChange.timeTillEvent=a)})),this.pendingChange.timeTillEvent=a):console.error(`Failed to override non-pending resource timer for resource: ${this.type}`)}removeTimer(){this.pendingChange&&(this.pendingChange.canceled=!0,this.pendingChange=void 0)}getLastExpirationTime(){return se(this,rd)}consume(n){super.consume(n),this.currentValue===0&&ke(this,rd,p.game.getDisplayTime())}}rd=new WeakMap;var uc,bl,ka;class Fe extends V0{constructor(n,a,s,c){super(s,c);J(this,"type");Ve(this,uc);Ve(this,bl);Ve(this,ka);this.type=n,ke(this,uc,a),ke(this,bl,a),ke(this,ka,0)}currentStackCd(){return se(this,bl)}maxStacks(){return this.maxValue}useStack(){this.stacksAvailable()===this.maxStacks()&&ke(this,ka,se(this,bl)),super.consume(1)}useStackWithRecast(n){console.assert(this.maxStacks()===1,"class CoolDown assumes special recasts are only available for skills with at most 1 stack"),ke(this,bl,n),this.useStack()}restore(n){for(;n>0&&super.availableAmount()<this.maxStacks();){const a=Math.min(se(this,ka),n);ke(this,ka,se(this,ka)-a),se(this,ka)<_n.epsilon&&(super.gain(1),ke(this,bl,se(this,uc)),this.stacksAvailable()<this.maxStacks()&&ke(this,ka,se(this,ka)+se(this,uc))),n-=a}}timeTillNextStackAvailable(){return se(this,ka)}overrideTimeTillNextStack(n){ke(this,ka,n)}stacksAvailable(){return super.availableAmount()}}uc=new WeakMap,bl=new WeakMap,ka=new WeakMap;var Ol;class Fk{constructor(t){J(this,"game");Ve(this,Ol);this.game=t,ke(this,Ol,new Map)}forEach(t){se(this,Ol).forEach(t)}get(t){const n=se(this,Ol).get(t);return n||(console.assert(!1,`no cooldown for resource ${t}`),new Fe("NEVER",0,0,0))}set(t){se(this,Ol).set(t.type,t)}tick(t){for(const n of se(this,Ol).values())n.restore(t)}timeTillNextStackAvailable(t){return this.get(t).timeTillNextStackAvailable()}timeTillAnyStackAvailable(t){const n=this.get(t);return n.stacksAvailable()>0?0:n.timeTillNextStackAvailable()}}Ol=new WeakMap;var dc;class jk{constructor(t){J(this,"game");Ve(this,dc);this.game=t,ke(this,dc,new Map)}get(t){const n=se(this,dc).get(t);return n||(console.error(`could not find resource ${t}`),new ai("NEVER",0,0))}set(t){se(this,dc).set(t.type,t)}timeTillReady(t){const n=this.get(t);return n.pendingChange?n.pendingChange.timeTillEvent:0}addResourceEvent(t){const n=this.get(t.rscType),a=new Me(t.name,t.delay,()=>{n.pendingChange=void 0,t.fnOnRsc(n)});n.pendingChange=a,t.tags&&t.tags.forEach(s=>{a.addTag(s)}),this.game.addEvent(a)}takeResourceLock(t,n){this.get(t).consume(1),this.addResourceEvent({rscType:t,name:"[resource ready] "+t,delay:n,fnOnRsc:a=>{a.gain(1)}})}}dc=new WeakMap;const Lf=new Map,W0=new Map,X0=new Map,q0=new Map;function ON(e){return W0.get(e.toLowerCase())??X0.get(e)??q0.get(e)}function Vt(e,t){const n=Lf.get(e);return n.has(t)||console.error(`no resource info found for ${t}`),n.get(t)}function ro(e){return Lf.has(e)||console.error("could not find resources for job "+e),Lf.get(e)}function Qe(e,t,n,a){ro(e).set(t,{isCoolDown:!1,defaultValue:a.default??0,maxValue:n,maxTimeout:a.timeout??-1,warnOnOvercap:a.warnOnOvercap??!1,warnOnTimeout:a.warnOnTimeout??!1});const s=Ye[t].label;W0.set(Ye[t].name.toLowerCase(),t),(s==null?void 0:s.zh)!==void 0&&X0.set(s.zh,t),(s==null?void 0:s.ja)!==void 0&&q0.set(s.ja,t)}Gs.forEach(e=>{Lf.set(e,new Map([["cd_GCD",{isCoolDown:!0,maxStacks:1,cdPerStack:2.5}]])),Qe(e,"IN_COMBAT",1,{default:0}),Qe(e,"MANA",1e4,{default:1e4}),Qe(e,"TINCTURE",1,{timeout:30}),Qe(e,"SPRINT",1,{timeout:10}),Qe(e,"PARTY_SIZE",8,{default:8}),Qe(e,"AUTOS_ENGAGED",1,{default:0}),Qe(e,"STORED_AUTO",1,{default:0})});fi.forEach(e=>{Qe(e,"REAR_POSITIONAL",1,{default:1}),Qe(e,"FLANK_POSITIONAL",1,{default:1})});function Zu(e,t,n,a=1){ro(e).set(t,{isCoolDown:!0,cdPerStack:n,maxStacks:a})}class AS{constructor(t){J(this,"type");J(this,"timeTillFullOrDrop");J(this,"stacks");J(this,"effectOrTimerEnabled");this.type=t.type,this.timeTillFullOrDrop=t.timeTillFullOrDrop,this.stacks=t.stacks,this.effectOrTimerEnabled=t.effectOrTimerEnabled}equals(t){return this.type===t.type&&this.timeTillFullOrDrop===t.timeTillFullOrDrop&&this.stacks===t.stacks&&this.effectOrTimerEnabled===t.effectOrTimerEnabled}static fromGameState(t){const n=[];return t.cooldowns.forEach((a,s)=>{a.availableAmount(),n.push(new AS({type:s,timeTillFullOrDrop:a.maxValue-a.availableAmount(),stacks:0,effectOrTimerEnabled:!0}))}),n}applyTo(t){const n=ro(t.job).get(this.type);if(!n){console.assert(!1,`can't apply override ${this.type} to job ${t.job}`);return}if(n.isCoolDown){const a=t.cooldowns.get(this.type),s=a.maxStacks()*a.currentStackCd()-this.timeTillFullOrDrop,c=Math.floor((s+_n.epsilon)/a.currentStackCd()),d=this.timeTillFullOrDrop%a.currentStackCd();a.overrideCurrentValue(c),a.overrideTimeTillNextStack(d)}else{const a=t.resources.get(this.type),s=c=>{a.removeTimer(),t.resources.addResourceEvent({rscType:a.type,name:"drop "+a.type,delay:c,fnOnRsc:d=>{a.type==="ENOCHIAN"?t.loseEnochian():d.consume(d.availableAmount())}})};if(a.type==="LEY_LINES")a.consume(a.availableAmount()),a.gain(1),s(this.timeTillFullOrDrop),a.enabled=this.effectOrTimerEnabled;else if(a.type==="POLYGLOT"){const c=this.stacks;a.consume(a.availableAmount()),a.gain(c);const d=this.timeTillFullOrDrop;d>0&&a.overrideTimer(t,d)}else{const c=this.stacks;a.consume(a.availableAmount()),a.gain(c);const d=this.timeTillFullOrDrop;c>0&&n.maxTimeout>=0&&s(d)}}}serialized(){return{type:this.type,timeTillFullOrDrop:this.timeTillFullOrDrop,stacks:this.stacks,effectOrTimerEnabled:this.effectOrTimerEnabled}}}const $t=.8,Ni=.01;function $u(e,t){}function we(e,...t){return(n,a)=>{e!==void 0&&e(n,a);for(const s of t)s!==void 0&&s(n,a)}}function Ed(e,...t){return n=>(e===void 0||e(n))&&t.every(a=>a===void 0||a(n))}const Bs=new Map,RS=new Map;Gs.forEach(e=>{Bs.set(e,new Map),RS.set(e,new Map)});const xf=new Map,EE="General/Missing.png",za=new Map;za.set(rS.ENERGY_DRAIN.id,"ENERGY_DRAIN");za.set(rS.PHYSICK.id,"PHYSICK");za.set(D0.MOUNTAIN_BUSTER.id,"MOUNTAIN_BUSTER");za.set(45960,"ENCHANTED_RIPOSTE");za.set(45961,"ENCHANTED_ZWERCHHAU");za.set(45962,"ENCHANTED_REDOUBLEMENT");za.set(18805,"TEN");za.set(18806,"CHI");za.set(18807,"JIN");const DN=new Set,sT=new Map,Z0=new Map,$0=new Map,yN=new Map([["Lightning Shock","Lightning Shot"],["Wanderer's Minuet","The Wanderer's Minuet"],["Apex Arow","Apex Arrow"],["Storms Eye","Storm's Eye"],["Storms Path","Storm's Path"]]);function TS(e){return yN.has(e)&&(e=yN.get(e)),e=e.toLowerCase(),!sT.has(e)&&!DN.has(e)&&(console.error(`could not find skill with name: ${e}`),DN.add(e)),sT.get(e)}function zk(e){return e in Ye?e:Mf.findResourceKey(e)}function Ml(e,t){return Bs.get(e).get(t)}function Q0(e){return xf.get(e)??EE}function Yk(e,t){return Bs.get(e).has(t)}function mE(e,t,n){Bs.get(e).set(t,n),RS.get(e).set(bn[t].discordEmote??bn[t].name.replaceAll(" ",""),t),sT.set(bn[t].name.toLowerCase(),t);const a=bn[t].label;(a==null?void 0:a.zh)!==void 0&&Z0.set(a.zh,t),(a==null?void 0:a.ja)!==void 0&&$0.set(a.ja,t),xf.set(t,n.assetPath),bn[t].id!==void 0&&za.set(bn[t].id,t)}function Ii(e,t){return e===void 0?n=>t||0:typeof e=="number"?n=>e:e}function Kk(e){return console.assert(e.length>0,`invalid trait potency array: ${e}`),t=>{let n;const a=t.config.level;for(const[s,c]of e)t.hasTraitUnlocked(s)&&(n=c);return console.assert(n!==void 0,`no applicable potency at level ${a} found in array ${e}`),n||0}}function rn(e,t){return(Array.isArray(t)?Kk(t):Ii(t,0))(e)}function SS(e,t){const n=bn[t].name;return`${e}/${n.replace(":","")}.png`}function ia(e,t,n,a){Array.isArray(e)||(e=[e]);const s=we((h,m)=>m.applicationTime=h.time,a.onApplication),c=we(h=>h.maybeCancelChanneledSkills(t),a.onExecute),d=h=>{const m=[];return a.potency&&(a.combo||a.positional)&&m.push(...h.computeComboAndPositionalModifiers(rn(h,a.potency),a.combo,a.positional)),a.jobPotencyModifiers&&m.push(...a.jobPotencyModifiers(h)),m},f={kind:"spell",name:t,assetPath:a.assetPath??(e.length===1?SS(e[0],t):EE),unlockLevel:n,autoUpgrade:a.autoUpgrade,autoDowngrade:a.autoDowngrade,cdName:"cd_GCD",secondaryCd:a.secondaryCooldown,aspect:a.aspect??_e.Other,replaceIf:a.replaceIf??[],startOnHotbar:a.startOnHotbar??!0,highlightIf:a.highlightIf??(h=>!1),castTimeFn:Ii(a.castTime,0),recastTimeFn:Ii(a.recastTime,2.5),animationLockFn:h=>Ii(a.animationLock,h.config.animationLock)(h),manaCostFn:Ii(a.manaCost,0),potencyFn:h=>rn(h,a.potency),jobPotencyModifiers:d,drawsAggro:a.drawsAggro??!1,falloff:a.falloff,healingPotencyFn:h=>rn(h,a.healingPotency),jobHealingPotencyModifiers:a.jobHealingPotencyModifiers??(h=>[]),aoeHeal:a.aoeHeal??!1,validateAttempt:a.validateAttempt??(h=>!0),isInstantFn:a.isInstantFn??(h=>!1),onExecute:c,onConfirm:a.onConfirm??$u,onApplication:s,applicationDelay:a.applicationDelay??0,startsAuto:a.startsAuto??!1};if(e.forEach(h=>mE(h,f.name,f)),a.secondaryCooldown!==void 0){const{cdName:h,cooldown:m,maxCharges:R}=a.secondaryCooldown;e.forEach(T=>Zu(T,h,m,R))}return f}function cn(e,t,n,a){Array.isArray(e)||(e=[e]);const s=we((h,m)=>m.applicationTime=h.time,a.onApplication),c=we(h=>h.maybeCancelChanneledSkills(t),a.onExecute),d=h=>{const m=[];return a.potency&&(a.combo||a.positional)&&m.push(...h.computeComboAndPositionalModifiers(rn(h,a.potency),a.combo,a.positional)),a.jobPotencyModifiers&&m.push(...a.jobPotencyModifiers(h)),m},f={kind:"weaponskill",name:t,assetPath:a.assetPath??(e.length===1?SS(e[0],t):EE),unlockLevel:n,autoUpgrade:a.autoUpgrade,autoDowngrade:a.autoDowngrade,cdName:"cd_GCD",secondaryCd:a.secondaryCooldown,aspect:a.aspect??_e.Other,replaceIf:a.replaceIf??[],startOnHotbar:a.startOnHotbar??!0,highlightIf:a.highlightIf??(h=>!1),castTimeFn:Ii(a.castTime,0),recastTimeFn:Ii(a.recastTime,2.5),animationLockFn:h=>Ii(a.animationLock,h.config.animationLock)(h),manaCostFn:Ii(a.manaCost,0),potencyFn:h=>rn(h,a.potency),jobPotencyModifiers:d,drawsAggro:a.drawsAggro??!1,falloff:a.falloff,healingPotencyFn:h=>rn(h,a.healingPotency),jobHealingPotencyModifiers:a.jobHealingPotencyModifiers??(h=>[]),aoeHeal:a.aoeHeal??!1,validateAttempt:a.validateAttempt??(h=>!0),isInstantFn:a.isInstantFn??(h=>!0),onExecute:c,onConfirm:a.onConfirm??$u,onApplication:s,applicationDelay:a.applicationDelay??0,startsAuto:a.startsAuto??!0};if(e.forEach(h=>mE(h,f.name,f)),a.secondaryCooldown!==void 0){const{cdName:h,cooldown:m,maxCharges:R}=a.secondaryCooldown;e.forEach(T=>Zu(T,h,m,R))}return f}function ut(e,t,n,a,s){Array.isArray(e)||(e=[e]);const c=we((m,R)=>R.applicationTime=m.time,s.onApplication),d=we(m=>m.maybeCancelChanneledSkills(t),s.onExecute),f=Ed(m=>s.requiresCombat?m.isInCombat():!0,s.validateAttempt??(m=>!0)),h={kind:"ability",name:t,assetPath:s.assetPath??(e.length===1?SS(e[0],t):EE),requiresCombat:s.requiresCombat,unlockLevel:n,autoUpgrade:s.autoUpgrade,autoDowngrade:s.autoDowngrade,cdName:a,secondaryCd:s.secondaryCooldown,aspect:s.aspect??_e.Other,replaceIf:s.replaceIf??[],startOnHotbar:s.startOnHotbar??!0,highlightIf:s.highlightIf??(m=>!1),animationLockFn:m=>Ii(s.animationLock,m.config.animationLock)(m),manaCostFn:Ii(s.manaCost,0),potencyFn:m=>rn(m,s.potency),jobPotencyModifiers:s.jobPotencyModifiers??(m=>[]),drawsAggro:s.drawsAggro??!1,falloff:s.falloff,healingPotencyFn:m=>rn(m,s.healingPotency),jobHealingPotencyModifiers:s.jobHealingPotencyModifiers??(m=>[]),aoeHeal:s.aoeHeal??!1,applicationDelay:s.applicationDelay??0,validateAttempt:f,onExecute:d,onConfirm:s.onConfirm??$u,onApplication:c,startsAuto:s.startsAuto??!1};if(e.forEach(m=>mE(m,h.name,h)),s.cooldown!==void 0&&e.forEach(m=>Zu(m,a,s.cooldown,s.maxCharges??1)),s.secondaryCooldown!==void 0){const{cdName:m,cooldown:R,maxCharges:T}=s.secondaryCooldown;e.forEach(S=>Zu(S,m,R,T))}return h}function qe(e,t,n,a,s){const c=we((d,f)=>{const h=d.resources.get(s.rscType),m=s.duration??Vt(d.job,s.rscType).maxTimeout,R=typeof m=="number"?T=>m:m;h.gain(h.maxValue),d.enqueueResourceDrop(s.rscType,R(d))},s==null?void 0:s.onApplication);return ut(e,t,n,a,{...s,onApplication:c})}function Ci(e,t,n,a){Array.isArray(e)||(e=[e]);const s="Limit Break "+a.tier,c=we(f=>f.maybeCancelChanneledSkills(t),a.onExecute),d={kind:"limitbreak",name:t,animationLockFn:f=>a.animationLock,assetPath:`General/${s}.png`,unlockLevel:1,autoUpgrade:void 0,autoDowngrade:void 0,cdName:n,secondaryCd:void 0,aspect:_e.Other,replaceIf:[],startOnHotbar:!0,castTimeFn:Ii(a.castTime,0),highlightIf:f=>!1,manaCostFn:f=>0,potencyFn:Ii(a.potency,0),jobPotencyModifiers:f=>[],healingPotencyFn:Ii(a.healingPotency,0),jobHealingPotencyModifiers:f=>[],aoeHeal:!1,drawsAggro:!1,applicationDelay:a.applicationDelay??0,validateAttempt:a.validateAttempt??(f=>!0),onExecute:c,onConfirm:a.onConfirm??$u,onApplication:a.onApplication??$u,startsAuto:!1};return e.forEach(f=>mE(f,d.name,d)),e.forEach(f=>Zu(f,n,(a.castTime??0)+a.animationLock,1)),d}class Vk{constructor(t){J(this,"job");this.job=t.job}get(t){const n=Bs.get(this.job).get(t);return n||(console.error(`creating placeholder skill ${t} for ${this.job}`),ut([this.job],t,1,"NEVER",{validateAttempt:a=>!1}))}}function pc(e,t,n){let a=Ml(e,t);for(;a.autoUpgrade&&C0(a.autoUpgrade.trait,n);)a=Ml(e,pc(e,a.autoUpgrade.otherSkill,n));for(;a.autoDowngrade&&n<a.unlockLevel;)a=Ml(e,pc(e,a.autoDowngrade.otherSkill,n));return a.name}function J0(e,t){const n=Ml(t.job,e);for(const a of n.replaceIf){if(a.newSkill===e)continue;const s=Ml(t.job,a.newSkill);if(!s)throw new Error("couldn't find skill info for "+a.newSkill);if(t.config.level>=s.unlockLevel&&a.condition(t))return pc(t.job,a.newSkill,t.config.level)}return pc(t.job,n.name,t.config.level)}var hc;class Wk{constructor(t,n){Ve(this,hc);ke(this,hc,[]),console.assert(Bs.has(t),`No skill map found for job: ${t}`);for(const s of Bs.get(t).values())s.name!=="NEVER"&&s.cdName!=="NEVER"&&n>=s.unlockLevel&&s.autoDowngrade===void 0&&s.startOnHotbar&&se(this,hc).push(pc(t,s.name,n));let a=xf.get("TINCTURE");switch(mt[t].role){case"TANK":case"MELEE":t==="NIN"||t==="VPR"?a="Role/Dexterity Tincture.png":a="Role/Strength Tincture.png";break;case"HEALER":a="Role/Mind Tincture.png";break;case"LIMITED":case"CASTER":a="Role/Intelligence Tincture.png";break;case"RANGED":a="Role/Dexterity Tincture.png";break}xf.set("TINCTURE",a)}getCurrentSkillNames(t){return se(this,hc).map(n=>J0(n,t))}}hc=new WeakMap;var Ze=(e=>(e.Skill="Skill",e.Wait="Wait",e.JumpToTimestamp="JumpToTimestamp",e.WaitForMP="WaitForMP",e.SetResourceEnabled="SetResourceEnabled",e.Unknown="Unknown",e.Invalid="Invalid",e))(Ze||{});function xs(e,t){return new na({type:"Skill",skillName:e,targetCount:t??1,healTargetCount:void 0})}function Xk(e,t){return new na({type:"Unknown",skillName:e,targetCount:t??1,healTargetCount:void 0})}function ic(e){return new na({type:"Wait",waitDuration:e})}function yl(e){return new na({type:"JumpToTimestamp",targetTime:e})}function eb(){return new na({type:"WaitForMP"})}function rT(e){return new na({type:"SetResourceEnabled",buffName:e})}var fc,Pi,Ua,wo,no,Ec,mc,Ac,Rc;const TI=class TI{constructor(t,n){Ve(this,fc);Ve(this,Pi);Ve(this,Ua);Ve(this,wo);Ve(this,no);J(this,"applicationTime");Ve(this,Ec);Ve(this,mc);Ve(this,Ac);Ve(this,Rc);J(this,"info");J(this,"legacyWaitDuration");J(this,"tmp_startLockTime");J(this,"tmp_endLockTime");J(this,"tmp_invalid_reasons");this.info=t,ke(this,fc,new Set),ke(this,Ua,new Map),ke(this,no,new Map),ke(this,Ec,new Map),ke(this,mc,new Map),ke(this,Ac,new Map),ke(this,Rc,new Map),this.legacyWaitDuration=n,this.tmp_invalid_reasons=[]}serialized(){return this.info.type==="Skill"?{type:"Skill",skillName:bn[this.info.skillName].name,targetCount:this.info.targetCount,healTargetCount:this.info.healTargetCount}:this.info.type==="SetResourceEnabled"?{type:"SetResourceEnabled",buffName:this.info.buffName.toString()}:this.info.type==="Unknown"?{type:"Skill",skillName:this.info.skillName,targetCount:this.info.targetCount,healTargetCount:this.info.healTargetCount}:this.info}toLocalizedString(){if(this.info.type==="Skill")return ba(this.info.skillName);if(this.info.type==="SetResourceEnabled")return g({en:"toggle ",zh:""}).toString()+$e(this.info.buffName);if(this.info.type==="Wait"){const t=this.info.waitDuration.toFixed(3);return g({en:`wait ${t}`,zh:`${t}`}).toString()}else{if(this.info.type==="WaitForMP")return g({en:"wait MP",zh:""}).toString();if(this.info.type==="JumpToTimestamp"){const t=this.info.targetTime.toFixed(3);return g({en:`jump ${t}`,zh:`${t}`}).toString()}}return"(unknown)"}maybeGetActionKey(){return this.info.type==="Skill"?this.info.skillName:void 0}get targetCount(){return this.info.type==="Skill"?this.info.targetCount:0}get healTargetCount(){return this.info.type==="Skill"?this.info.healTargetCount??0:0}getNameForMessage(){return this.info.type==="Skill"?bn[this.info.skillName].name:this.info.type.toString()}getClone(){return new TI(this.info,this.legacyWaitDuration)}addBuff(t){se(this,fc).add(t)}hasBuff(t){return se(this,fc).has(t)}hasPartyBuff(){var n;const t=(n=se(this,Pi))==null?void 0:n.snapshotTime;return t!==void 0&&p.game.getPartyBuffs(t).size>0}getPartyBuffs(){var n;const t=(n=se(this,Pi))==null?void 0:n.snapshotTime;return t?[...p.game.getPartyBuffs(t).keys()]:[]}setTargetCount(t){this.info.type==="Skill"&&(this.info.targetCount=t)}setHealTargetCount(t){this.info.type==="Skill"&&(this.info.healTargetCount=t)}resolveAll(t){se(this,Pi)&&se(this,Pi).resolve(t),se(this,Ua).forEach(n=>{n.forEach(a=>{a.resolve(t)})})}resolved(){return this.applicationTime!==void 0}hitBoss(t){var n;return((n=se(this,Pi))==null?void 0:n.hasHitBoss(t))??!0}getPotency(t){const n={applied:0,snapshottedButPending:0};return se(this,Pi)&&this.recordPotency(t,se(this,Pi),n),t.excludeDoT||se(this,Ua).forEach(a=>{a.forEach(s=>{this.recordPotency(t,s,n)})}),n}getHealingPotency(t){const n={applied:0,snapshottedButPending:0};return se(this,wo)&&this.recordPotency(t,se(this,wo),n),t.excludeHoT||se(this,no).forEach(a=>{a.forEach(s=>{this.recordPotency(t,s,n)})}),n}recordPotency(t,n,a){n.hasHitBoss(t.untargetable)?a.applied+=n.getAmount(t):!n.hasResolved()&&n.hasSnapshotted()&&(a.snapshottedButPending+=n.getAmount(t))}removeUnresolvedOvertimePotencies(t){(t==="damage"?se(this,Ua):se(this,no)).forEach(a=>{const s=a.findIndex(c=>!c.hasResolved());s<0||a.splice(s)})}anyPotencies(){return se(this,Pi)!==void 0||se(this,Ua).size>0}anyHealingPotencies(){return se(this,wo)!==void 0||se(this,no).size>0}getInitialPotency(){return se(this,Pi)}getInitialHealingPotency(){return se(this,wo)}getAllDotPotencies(){return this.getAllOverTimePotencies("damage")}getAllHotPotencies(){return this.getAllOverTimePotencies("healing")}getAllOverTimePotencies(t){return t==="damage"?se(this,Ua):se(this,no)}getDotPotencies(t){return this.getOverTimePotencies(t,"damage")}getHotPotencies(t){return this.getOverTimePotencies(t,"healing")}getOverTimePotencies(t,n){return n==="damage"?se(this,Ua).get(t)??[]:se(this,no).get(t)??[]}addPotency(t){console.assert(!se(this,Pi),`ActionNode for ${this.getNameForMessage()} already had an initial potency`),ke(this,Pi,t)}addHealingPotency(t){console.assert(!se(this,wo),`ActionNode for ${this.getNameForMessage()} already had an initial healing potency`),ke(this,wo,t)}addDoTPotency(t,n){this.addOverTimePotency(t,n,"damage")}addHoTPotency(t,n){this.addOverTimePotency(t,n,"healing")}addOverTimePotency(t,n,a){const s=a==="damage"?se(this,Ua):se(this,no),c=s.get(n)??[];c.length===0&&s.set(n,c),c.push(t)}setOverTimeGap(t,n,a){this.setOverTimeMappedAmount(t,n,a==="damage"?se(this,mc):se(this,Rc))}getOverTimeGap(t,n){return this.getOverTimeMappedAmount(t,n==="damage"?se(this,mc):se(this,Rc))}setOverTimeOverrideAmount(t,n,a){this.setOverTimeMappedAmount(t,n,a==="damage"?se(this,Ec):se(this,Ac))}getOverTimeOverrideAmount(t,n){return this.getOverTimeMappedAmount(t,n==="damage"?se(this,Ec):se(this,Ac))}setOverTimeMappedAmount(t,n,a){a.set(t,n)}getOverTimeMappedAmount(t,n){return n.get(t)??0}};fc=new WeakMap,Pi=new WeakMap,Ua=new WeakMap,wo=new WeakMap,no=new WeakMap,Ec=new WeakMap,mc=new WeakMap,Ac=new WeakMap,Rc=new WeakMap;let na=TI;class Nc{constructor(){J(this,"actions");J(this,"name","(anonymous line)");this.actions=[]}get length(){return this.actions.length}get head(){return this.length>0?this.actions[0]:void 0}get tail(){return this.length>0?this.actions[this.actions.length-1]:void 0}get tailIndex(){return this.length-1}prependActionNode(t){console.assert(t!==void 0),this.actions.unshift(t)}insertActionNodes(t,n){t.length>0&&this.actions.splice(n,0,...t)}addActionNode(t){console.assert(t!==void 0),this.actions.push(t)}iterateAll(t){this.actions.forEach(n=>t(n))}serialized(){return{name:this.name,actions:this.actions.map(t=>t.serialized())}}exportCsv(){return[]}static deserialize(t){const n=t.map(s=>{if(s.type==="Skill"){const c=TS(s.skillName),d="waitDuration"in s?s.waitDuration:void 0;return new na(c!==void 0?{type:"Skill",skillName:c,targetCount:s.targetCount,healTargetCount:s.healTargetCount}:{type:"Unknown",skillName:s.skillName,targetCount:s.targetCount,healTargetCount:s.healTargetCount},d)}else if(s.type==="SetResourceEnabled"){const c="waitDuration"in s?s.waitDuration:void 0;return new na({type:"SetResourceEnabled",buffName:zk(s.buffName)},c)}else return s.type==="Wait"||s.type==="JumpToTimestamp"||s.type==="WaitForMP"?new na(s):(window.alert("unparseable action: "+JSON.stringify(s)),new na({type:"Invalid"}))}),a=new Nc;return a.actions=n,a}}var cd,cT;const SI=class SI extends Nc{constructor(){super(...arguments);Ve(this,cd);J(this,"selectionStartIndex");J(this,"selectionEndIndex");J(this,"startIsPivot",!0);J(this,"config")}get selectionStart(){return this.selectionStartIndex!==void 0?this.actions[this.selectionStartIndex]:void 0}get selectionEnd(){return this.selectionEndIndex!==void 0?this.actions[this.selectionEndIndex]:void 0}getFirstSelection(){return this.selectionStart&&console.assert(this.selectionEnd!==void 0),this.selectionStart}getLastSelection(){return this.selectionEnd&&console.assert(this.selectionStart!==void 0),this.selectionEnd}isInSelection(n){return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&n>=this.selectionStartIndex&&n<=this.selectionEndIndex}iterateSelected(n){if(!(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0))for(let a=this.selectionStartIndex;a<=this.selectionEndIndex;a++)n(this.actions[a])}getSelected(){const n=new Nc;return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&(n.actions=this.actions.slice(this.selectionStartIndex,this.selectionEndIndex+1)),n}getSelectionLength(){return this.selectionStartIndex===void 0||this.selectionEndIndex===void 0?0:this.selectionEndIndex-this.selectionStartIndex+1}selectSingle(n){this.unselectAll(),this.selectionStartIndex=n,this.selectionEndIndex=n,this.startIsPivot=!0}unselectAll(){this.selectionStartIndex=void 0,this.selectionEndIndex=void 0,this.startIsPivot=!0}selectUntil(n){if(this.selectionStartIndex!==void 0&&this.selectionStartIndex===this.selectionEndIndex)this.selectionStartIndex<=n?(Oe(this,cd,cT).call(this,this.selectionStartIndex,n),this.startIsPivot=!0):(Oe(this,cd,cT).call(this,n,this.selectionStartIndex),this.startIsPivot=!1);else if(this.selectionStartIndex!==void 0&&this.selectionStartIndex!==this.selectionEndIndex){const a=this.startIsPivot?this.selectionStartIndex:this.selectionEndIndex;this.selectionStartIndex=a,this.selectionEndIndex=a,this.selectUntil(n)}}onClickNode(n,a){a&&this.selectionStartIndex!==void 0?this.selectUntil(n):this.selectionStartIndex===n&&this.selectionEndIndex===n?this.unselectAll():this.selectSingle(n)}moveSelected(n){if(n===0||this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const a=this.selectionStartIndex,s=this.getSelectionLength(),c=this.actions.splice(a,s);let d=a+n;return d=Math.max(d,0),d=Math.min(d,this.length),this.actions.splice(d,0,...c),this.selectionStartIndex=d,this.selectionEndIndex=d+s-1,d}deleteSelected(){if(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const n=this.selectionStartIndex;return this.actions.splice(n,this.getSelectionLength()),this.unselectAll(),n}serialized(){var a;console.assert(this.config);const n=super.serialized();return{name:n.name,fileType:Ia.Record,config:(a=this.config)==null?void 0:a.serialized(),actions:n.actions}}spliceUpTo(n){const a=this.selectionStartIndex,s=this.selectionEndIndex;this.unselectAll(),n<this.length&&this.actions.splice(n,this.length-n),a!==void 0&&(this.selectSingle(a),this.selectUntil(s))}getCloneWithSharedConfig(){const n=new SI;return n.config=this.config,n.actions=this.actions.map(a=>a.getClone()),n.selectionStartIndex=this.selectionStartIndex,n.selectionEndIndex=this.selectionEndIndex,n}};cd=new WeakSet,cT=function(n,a){this.unselectAll(),this.selectionStartIndex=n,this.selectionEndIndex=a};let ko=SI;var pR={exports:{}},NR,vN;function qk(){if(vN)return NR;vN=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return NR=e,NR}var CR,MN;function Zk(){if(MN)return CR;MN=1;var e=qk();function t(){}function n(){}return n.resetWarningCache=t,CR=function(){function a(d,f,h,m,R,T){if(T!==e){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}a.isRequired=a;function s(){return a}var c={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:s,element:a,elementType:a,instanceOf:s,node:a,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return c.PropTypes=c,c},CR}var LN;function $k(){return LN||(LN=1,pR.exports=Zk()()),pR.exports}var Qk=$k();const bR=YT(Qk),tb=N.createContext(void 0);function md(){const e=N.useContext(tb);if(e===void 0)throw new Error("Base UI: TooltipRootContext is missing. Tooltip parts must be placed within <Tooltip.Root>.");return e}var Ad=S0();function AE(){return typeof window<"u"}function Vl(e){return nb(e)?(e.nodeName||"").toLowerCase():"#document"}function _i(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Eo(e){var t;return(t=(nb(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function nb(e){return AE()?e instanceof Node||e instanceof _i(e).Node:!1}function Ut(e){return AE()?e instanceof Element||e instanceof _i(e).Element:!1}function On(e){return AE()?e instanceof HTMLElement||e instanceof _i(e).HTMLElement:!1}function Hf(e){return!AE()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof _i(e).ShadowRoot}function Rd(e){const{overflow:t,overflowX:n,overflowY:a,display:s}=pa(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+n)&&!["inline","contents"].includes(s)}function Jk(e){return["table","td","th"].includes(Vl(e))}function RE(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function IS(e){const t=TE(),n=Ut(e)?pa(e):e;return["transform","translate","scale","rotate","perspective"].some(a=>n[a]?n[a]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(n.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(n.contain||"").includes(a))}function eU(e){let t=Ko(e);for(;On(t)&&!zo(t);){if(IS(t))return t;if(RE(t))return null;t=Ko(t)}return null}function TE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function zo(e){return["html","body","#document"].includes(Vl(e))}function pa(e){return _i(e).getComputedStyle(e)}function SE(e){return Ut(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ko(e){if(Vl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Hf(e)&&e.host||Eo(e);return Hf(t)?t.host:t}function ib(e){const t=Ko(e);return zo(t)?e.ownerDocument?e.ownerDocument.body:e.body:On(t)&&Rd(t)?t:ib(t)}function Ll(e,t,n){var a;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=ib(e),c=s===((a=e.ownerDocument)==null?void 0:a.body),d=_i(s);if(c){const f=uT(d);return t.concat(d,d.visualViewport||[],Rd(s)?s:[],f&&n?Ll(f):[])}return t.concat(s,Ll(s,[],n))}function uT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const tU=["top","right","bottom","left"],Pl=Math.min,ta=Math.max,kf=Math.round,Wh=Math.floor,oo=e=>({x:e,y:e}),nU={left:"right",right:"left",bottom:"top",top:"bottom"},iU={start:"end",end:"start"};function dT(e,t,n){return ta(e,Pl(t,n))}function Vo(e,t){return typeof e=="function"?e(t):e}function _a(e){return e.split("-")[0]}function Gl(e){return e.split("-")[1]}function _S(e){return e==="x"?"y":"x"}function gS(e){return e==="y"?"height":"width"}function Bl(e){return["top","bottom"].includes(_a(e))?"y":"x"}function pS(e){return _S(Bl(e))}function aU(e,t,n){n===void 0&&(n=!1);const a=Gl(e),s=pS(e),c=gS(s);let d=s==="x"?a===(n?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(d=Uf(d)),[d,Uf(d)]}function oU(e){const t=Uf(e);return[hT(e),t,hT(t)]}function hT(e){return e.replace(/start|end/g,t=>iU[t])}function lU(e,t,n){const a=["left","right"],s=["right","left"],c=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:a:t?a:s;case"left":case"right":return t?c:d;default:return[]}}function sU(e,t,n,a){const s=Gl(e);let c=lU(_a(e),n==="start",a);return s&&(c=c.map(d=>d+"-"+s),t&&(c=c.concat(c.map(hT)))),c}function Uf(e){return e.replace(/left|right|bottom|top/g,t=>nU[t])}function rU(e){return{top:0,right:0,bottom:0,left:0,...e}}function ab(e){return typeof e!="number"?rU(e):{top:e,right:e,bottom:e,left:e}}function wf(e){const{x:t,y:n,width:a,height:s}=e;return{width:a,height:s,top:n,left:t,right:t+a,bottom:n+s,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var cU=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Pf=cU.join(","),ob=typeof Element>"u",Cc=ob?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Gf=!ob&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Bf=function e(t,n){var a;n===void 0&&(n=!0);var s=t==null||(a=t.getAttribute)===null||a===void 0?void 0:a.call(t,"inert"),c=s===""||s==="true",d=c||n&&t&&e(t.parentNode);return d},uU=function(t){var n,a=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return a===""||a==="true"},lb=function(t,n,a){if(Bf(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(Pf));return n&&Cc.call(t,Pf)&&s.unshift(t),s=s.filter(a),s},sb=function e(t,n,a){for(var s=[],c=Array.from(t);c.length;){var d=c.shift();if(!Bf(d,!1))if(d.tagName==="SLOT"){var f=d.assignedElements(),h=f.length?f:d.children,m=e(h,!0,a);a.flatten?s.push.apply(s,m):s.push({scopeParent:d,candidates:m})}else{var R=Cc.call(d,Pf);R&&a.filter(d)&&(n||!t.includes(d))&&s.push(d);var T=d.shadowRoot||typeof a.getShadowRoot=="function"&&a.getShadowRoot(d),S=!Bf(T,!1)&&(!a.shadowRootFilter||a.shadowRootFilter(d));if(T&&S){var I=e(T===!0?d.children:T.children,!0,a);a.flatten?s.push.apply(s,I):s.push({scopeParent:d,candidates:I})}else c.unshift.apply(c,d.children)}}return s},rb=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},cb=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||uU(t))&&!rb(t)?0:t.tabIndex},dU=function(t,n){var a=cb(t);return a<0&&n&&!rb(t)?0:a},hU=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},ub=function(t){return t.tagName==="INPUT"},fU=function(t){return ub(t)&&t.type==="hidden"},EU=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(a){return a.tagName==="SUMMARY"});return n},mU=function(t,n){for(var a=0;a<t.length;a++)if(t[a].checked&&t[a].form===n)return t[a]},AU=function(t){if(!t.name)return!0;var n=t.form||Gf(t),a=function(f){return n.querySelectorAll('input[type="radio"][name="'+f+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=a(window.CSS.escape(t.name));else try{s=a(t.name)}catch(d){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",d.message),!1}var c=mU(s,t.form);return!c||c===t},RU=function(t){return ub(t)&&t.type==="radio"},TU=function(t){return RU(t)&&!AU(t)},SU=function(t){var n,a=t&&Gf(t),s=(n=a)===null||n===void 0?void 0:n.host,c=!1;if(a&&a!==t){var d,f,h;for(c=!!((d=s)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(s)||t!=null&&(h=t.ownerDocument)!==null&&h!==void 0&&h.contains(t));!c&&s;){var m,R,T;a=Gf(s),s=(m=a)===null||m===void 0?void 0:m.host,c=!!((R=s)!==null&&R!==void 0&&(T=R.ownerDocument)!==null&&T!==void 0&&T.contains(s))}}return c},xN=function(t){var n=t.getBoundingClientRect(),a=n.width,s=n.height;return a===0&&s===0},IU=function(t,n){var a=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var c=Cc.call(t,"details>summary:first-of-type"),d=c?t.parentElement:t;if(Cc.call(d,"details:not([open]) *"))return!0;if(!a||a==="full"||a==="legacy-full"){if(typeof s=="function"){for(var f=t;t;){var h=t.parentElement,m=Gf(t);if(h&&!h.shadowRoot&&s(h)===!0)return xN(t);t.assignedSlot?t=t.assignedSlot:!h&&m!==t.ownerDocument?t=m.host:t=h}t=f}if(SU(t))return!t.getClientRects().length;if(a!=="legacy-full")return!0}else if(a==="non-zero-area")return xN(t);return!1},_U=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var a=0;a<n.children.length;a++){var s=n.children.item(a);if(s.tagName==="LEGEND")return Cc.call(n,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}n=n.parentElement}return!1},fT=function(t,n){return!(n.disabled||Bf(n)||fU(n)||IU(n,t)||EU(n)||_U(n))},ET=function(t,n){return!(TU(n)||cb(n)<0||!fT(t,n))},gU=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},pU=function e(t){var n=[],a=[];return t.forEach(function(s,c){var d=!!s.scopeParent,f=d?s.scopeParent:s,h=dU(f,d),m=d?e(s.candidates):f;h===0?d?n.push.apply(n,m):n.push(f):a.push({documentOrder:c,tabIndex:h,item:s,isScope:d,content:m})}),a.sort(hU).reduce(function(s,c){return c.isScope?s.push.apply(s,c.content):s.push(c.content),s},[]).concat(n)},IE=function(t,n){n=n||{};var a;return n.getShadowRoot?a=sb([t],n.includeContainer,{filter:ET.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:gU}):a=lb(t,n.includeContainer,ET.bind(null,n)),pU(a)},NU=function(t,n){n=n||{};var a;return n.getShadowRoot?a=sb([t],n.includeContainer,{filter:fT.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):a=lb(t,n.includeContainer,fT.bind(null,n)),a},db=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return Cc.call(t,Pf)===!1?!1:ET(n,t)};function hb(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function NS(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:a}=t;return n+"/"+a}).join(" "):navigator.userAgent}function fb(){return/apple/i.test(navigator.vendor)}function mT(){const e=/android/i;return e.test(hb())||e.test(NS())}function CU(){return hb().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Eb(){return NS().includes("jsdom/")}const HN="data-floating-ui-focusable",bU="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Nl(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function ei(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Hf(n)){let a=t;for(;a;){if(e===a)return!0;a=a.parentNode||a.host}}return!1}function Pa(e){return"composedPath"in e?e.composedPath()[0]:e.target}function OR(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function OU(e){return e.matches("html,body")}function ui(e){return(e==null?void 0:e.ownerDocument)||document}function _E(e){return On(e)&&e.matches(bU)}function kN(e){return e?e.getAttribute("role")==="combobox"&&_E(e):!1}function DU(e){if(!e||Eb())return!0;try{return e.matches(":focus-visible")}catch{return!0}}function AT(e){return e?e.hasAttribute(HN)?e:e.querySelector("["+HN+"]")||e:null}function Xu(e,t,n){n===void 0&&(n=!0);let a=e.filter(c=>{var d;return c.parentId===t&&((d=c.context)==null?void 0:d.open)}),s=a;for(;s.length;)s=n?e.filter(c=>{var d;return(d=s)==null?void 0:d.some(f=>{var h;return c.parentId===f.id&&((h=c.context)==null?void 0:h.open)})}):e,a=a.concat(s);return a}function UN(e,t){var n;let a=[],s=(n=e.find(c=>c.id===t))==null?void 0:n.parentId;for(;s;){const c=e.find(d=>d.id===s);s=c==null?void 0:c.parentId,c&&(a=a.concat(c))}return a}function DR(e){e.preventDefault(),e.stopPropagation()}function yU(e){return"nativeEvent"in e}function vU(e){return e.mozInputSource===0&&e.isTrusted?!0:mT()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function MU(e){return Eb()?!1:!mT()&&e.width===0&&e.height===0||mT()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function bc(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}var jn=typeof document<"u"?N.useLayoutEffect:N.useEffect;const LU={...dE};function gs(e){const t=N.useRef(e);return jn(()=>{t.current=e}),t}const xU=LU.useInsertionEffect,HU=xU||(e=>e());function Si(e){const t=N.useRef(()=>{});return HU(()=>{t.current=e}),N.useCallback(function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t.current==null?void 0:t.current(...a)},[])}const Td=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function mb(e,t){const n=IE(e,Td()),a=n.length;if(a===0)return;const s=Nl(ui(e)),c=n.indexOf(s),d=c===-1?t===1?0:a-1:c+t;return n[d]}function Ab(e){return mb(ui(e).body,1)||e}function Rb(e){return mb(ui(e).body,-1)||e}function qu(e,t){const n=t||e.currentTarget,a=e.relatedTarget;return!a||!ei(n,a)}function kU(e){IE(e,Td()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function wN(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const a=n.dataset.tabindex;delete n.dataset.tabindex,a?n.setAttribute("tabindex",a):n.removeAttribute("tabindex")})}function PN(e,t,n){let{reference:a,floating:s}=e;const c=Bl(t),d=pS(t),f=gS(d),h=_a(t),m=c==="y",R=a.x+a.width/2-s.width/2,T=a.y+a.height/2-s.height/2,S=a[f]/2-s[f]/2;let I;switch(h){case"top":I={x:R,y:a.y-s.height};break;case"bottom":I={x:R,y:a.y+a.height};break;case"right":I={x:a.x+a.width,y:T};break;case"left":I={x:a.x-s.width,y:T};break;default:I={x:a.x,y:a.y}}switch(Gl(t)){case"start":I[d]-=S*(n&&m?-1:1);break;case"end":I[d]+=S*(n&&m?-1:1);break}return I}const UU=async(e,t,n)=>{const{placement:a="bottom",strategy:s="absolute",middleware:c=[],platform:d}=n,f=c.filter(Boolean),h=await(d.isRTL==null?void 0:d.isRTL(t));let m=await d.getElementRects({reference:e,floating:t,strategy:s}),{x:R,y:T}=PN(m,a,h),S=a,I={},C=0;for(let _=0;_<f.length;_++){const{name:O,fn:y}=f[_],{x,y:L,data:v,reset:P}=await y({x:R,y:T,initialPlacement:a,placement:S,strategy:s,middlewareData:I,rects:m,platform:d,elements:{reference:e,floating:t}});R=x??R,T=L??T,I={...I,[O]:{...I[O],...v}},P&&C<=50&&(C++,typeof P=="object"&&(P.placement&&(S=P.placement),P.rects&&(m=P.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:s}):P.rects),{x:R,y:T}=PN(m,S,h)),_=-1)}return{x:R,y:T,placement:S,strategy:s,middlewareData:I}};async function Qu(e,t){var n;t===void 0&&(t={});const{x:a,y:s,platform:c,rects:d,elements:f,strategy:h}=e,{boundary:m="clippingAncestors",rootBoundary:R="viewport",elementContext:T="floating",altBoundary:S=!1,padding:I=0}=Vo(t,e),C=ab(I),O=f[S?T==="floating"?"reference":"floating":T],y=wf(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(O)))==null||n?O:O.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:m,rootBoundary:R,strategy:h})),x=T==="floating"?{x:a,y:s,width:d.floating.width,height:d.floating.height}:d.reference,L=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),v=await(c.isElement==null?void 0:c.isElement(L))?await(c.getScale==null?void 0:c.getScale(L))||{x:1,y:1}:{x:1,y:1},P=wf(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:x,offsetParent:L,strategy:h}):x);return{top:(y.top-P.top+C.top)/v.y,bottom:(P.bottom-y.bottom+C.bottom)/v.y,left:(y.left-P.left+C.left)/v.x,right:(P.right-y.right+C.right)/v.x}}const wU=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:a,placement:s,rects:c,platform:d,elements:f,middlewareData:h}=t,{element:m,padding:R=0}=Vo(e,t)||{};if(m==null)return{};const T=ab(R),S={x:n,y:a},I=pS(s),C=gS(I),_=await d.getDimensions(m),O=I==="y",y=O?"top":"left",x=O?"bottom":"right",L=O?"clientHeight":"clientWidth",v=c.reference[C]+c.reference[I]-S[I]-c.floating[C],P=S[I]-c.reference[I],k=await(d.getOffsetParent==null?void 0:d.getOffsetParent(m));let w=k?k[L]:0;(!w||!await(d.isElement==null?void 0:d.isElement(k)))&&(w=f.floating[L]||c.floating[C]);const K=v/2-P/2,ne=w/2-_[C]/2-1,fe=Pl(T[y],ne),ue=Pl(T[x],ne),he=fe,Ee=w-_[C]-ue,q=w/2-_[C]/2+K,Q=dT(he,q,Ee),j=!h.arrow&&Gl(s)!=null&&q!==Q&&c.reference[C]/2-(q<he?fe:ue)-_[C]/2<0,G=j?q<he?q-he:q-Ee:0;return{[I]:S[I]+G,data:{[I]:Q,centerOffset:q-Q-G,...j&&{alignmentOffset:G}},reset:j}}}),PU=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,a;const{placement:s,middlewareData:c,rects:d,initialPlacement:f,platform:h,elements:m}=t,{mainAxis:R=!0,crossAxis:T=!0,fallbackPlacements:S,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:_=!0,...O}=Vo(e,t);if((n=c.arrow)!=null&&n.alignmentOffset)return{};const y=_a(s),x=Bl(f),L=_a(f)===f,v=await(h.isRTL==null?void 0:h.isRTL(m.floating)),P=S||(L||!_?[Uf(f)]:oU(f)),k=C!=="none";!S&&k&&P.push(...sU(f,_,C,v));const w=[f,...P],K=await Qu(t,O),ne=[];let fe=((a=c.flip)==null?void 0:a.overflows)||[];if(R&&ne.push(K[y]),T){const q=aU(s,d,v);ne.push(K[q[0]],K[q[1]])}if(fe=[...fe,{placement:s,overflows:ne}],!ne.every(q=>q<=0)){var ue,he;const q=(((ue=c.flip)==null?void 0:ue.index)||0)+1,Q=w[q];if(Q)return{data:{index:q,overflows:fe},reset:{placement:Q}};let j=(he=fe.filter(G=>G.overflows[0]<=0).sort((G,Z)=>G.overflows[1]-Z.overflows[1])[0])==null?void 0:he.placement;if(!j)switch(I){case"bestFit":{var Ee;const G=(Ee=fe.filter(Z=>{if(k){const te=Bl(Z.placement);return te===x||te==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(te=>te>0).reduce((te,D)=>te+D,0)]).sort((Z,te)=>Z[1]-te[1])[0])==null?void 0:Ee[0];G&&(j=G);break}case"initialPlacement":j=f;break}if(s!==j)return{reset:{placement:j}}}return{}}}};function GN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function BN(e){return tU.some(t=>e[t]>=0)}const GU=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:a="referenceHidden",...s}=Vo(e,t);switch(a){case"referenceHidden":{const c=await Qu(t,{...s,elementContext:"reference"}),d=GN(c,n.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:BN(d)}}}case"escaped":{const c=await Qu(t,{...s,altBoundary:!0}),d=GN(c,n.floating);return{data:{escapedOffsets:d,escaped:BN(d)}}}default:return{}}}}};async function BU(e,t){const{placement:n,platform:a,elements:s}=e,c=await(a.isRTL==null?void 0:a.isRTL(s.floating)),d=_a(n),f=Gl(n),h=Bl(n)==="y",m=["left","top"].includes(d)?-1:1,R=c&&h?-1:1,T=Vo(t,e);let{mainAxis:S,crossAxis:I,alignmentAxis:C}=typeof T=="number"?{mainAxis:T,crossAxis:0,alignmentAxis:null}:{mainAxis:T.mainAxis||0,crossAxis:T.crossAxis||0,alignmentAxis:T.alignmentAxis};return f&&typeof C=="number"&&(I=f==="end"?C*-1:C),h?{x:I*R,y:S*m}:{x:S*m,y:I*R}}const FU=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,a;const{x:s,y:c,placement:d,middlewareData:f}=t,h=await BU(t,e);return d===((n=f.offset)==null?void 0:n.placement)&&(a=f.arrow)!=null&&a.alignmentOffset?{}:{x:s+h.x,y:c+h.y,data:{...h,placement:d}}}}},jU=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:a,placement:s}=t,{mainAxis:c=!0,crossAxis:d=!1,limiter:f={fn:O=>{let{x:y,y:x}=O;return{x:y,y:x}}},...h}=Vo(e,t),m={x:n,y:a},R=await Qu(t,h),T=Bl(_a(s)),S=_S(T);let I=m[S],C=m[T];if(c){const O=S==="y"?"top":"left",y=S==="y"?"bottom":"right",x=I+R[O],L=I-R[y];I=dT(x,I,L)}if(d){const O=T==="y"?"top":"left",y=T==="y"?"bottom":"right",x=C+R[O],L=C-R[y];C=dT(x,C,L)}const _=f.fn({...t,[S]:I,[T]:C});return{..._,data:{x:_.x-n,y:_.y-a,enabled:{[S]:c,[T]:d}}}}}},zU=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:a,placement:s,rects:c,middlewareData:d}=t,{offset:f=0,mainAxis:h=!0,crossAxis:m=!0}=Vo(e,t),R={x:n,y:a},T=Bl(s),S=_S(T);let I=R[S],C=R[T];const _=Vo(f,t),O=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(h){const L=S==="y"?"height":"width",v=c.reference[S]-c.floating[L]+O.mainAxis,P=c.reference[S]+c.reference[L]-O.mainAxis;I<v?I=v:I>P&&(I=P)}if(m){var y,x;const L=S==="y"?"width":"height",v=["top","left"].includes(_a(s)),P=c.reference[T]-c.floating[L]+(v&&((y=d.offset)==null?void 0:y[T])||0)+(v?0:O.crossAxis),k=c.reference[T]+c.reference[L]+(v?0:((x=d.offset)==null?void 0:x[T])||0)-(v?O.crossAxis:0);C<P?C=P:C>k&&(C=k)}return{[S]:I,[T]:C}}}},YU=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,a;const{placement:s,rects:c,platform:d,elements:f}=t,{apply:h=()=>{},...m}=Vo(e,t),R=await Qu(t,m),T=_a(s),S=Gl(s),I=Bl(s)==="y",{width:C,height:_}=c.floating;let O,y;T==="top"||T==="bottom"?(O=T,y=S===(await(d.isRTL==null?void 0:d.isRTL(f.floating))?"start":"end")?"left":"right"):(y=T,O=S==="end"?"top":"bottom");const x=_-R.top-R.bottom,L=C-R.left-R.right,v=Pl(_-R[O],x),P=Pl(C-R[y],L),k=!t.middlewareData.shift;let w=v,K=P;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(K=L),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(w=x),k&&!S){const fe=ta(R.left,0),ue=ta(R.right,0),he=ta(R.top,0),Ee=ta(R.bottom,0);I?K=C-2*(fe!==0||ue!==0?fe+ue:ta(R.left,R.right)):w=_-2*(he!==0||Ee!==0?he+Ee:ta(R.top,R.bottom))}await h({...t,availableWidth:K,availableHeight:w});const ne=await d.getDimensions(f.floating);return C!==ne.width||_!==ne.height?{reset:{rects:!0}}:{}}}};function Tb(e){const t=pa(e);let n=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const s=On(e),c=s?e.offsetWidth:n,d=s?e.offsetHeight:a,f=kf(n)!==c||kf(a)!==d;return f&&(n=c,a=d),{width:n,height:a,$:f}}function CS(e){return Ut(e)?e:e.contextElement}function ac(e){const t=CS(e);if(!On(t))return oo(1);const n=t.getBoundingClientRect(),{width:a,height:s,$:c}=Tb(t);let d=(c?kf(n.width):n.width)/a,f=(c?kf(n.height):n.height)/s;return(!d||!Number.isFinite(d))&&(d=1),(!f||!Number.isFinite(f))&&(f=1),{x:d,y:f}}const KU=oo(0);function Sb(e){const t=_i(e);return!TE()||!t.visualViewport?KU:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function VU(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==_i(e)?!1:t}function Fs(e,t,n,a){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),c=CS(e);let d=oo(1);t&&(a?Ut(a)&&(d=ac(a)):d=ac(e));const f=VU(c,n,a)?Sb(c):oo(0);let h=(s.left+f.x)/d.x,m=(s.top+f.y)/d.y,R=s.width/d.x,T=s.height/d.y;if(c){const S=_i(c),I=a&&Ut(a)?_i(a):a;let C=S,_=uT(C);for(;_&&a&&I!==C;){const O=ac(_),y=_.getBoundingClientRect(),x=pa(_),L=y.left+(_.clientLeft+parseFloat(x.paddingLeft))*O.x,v=y.top+(_.clientTop+parseFloat(x.paddingTop))*O.y;h*=O.x,m*=O.y,R*=O.x,T*=O.y,h+=L,m+=v,C=_i(_),_=uT(C)}}return wf({width:R,height:T,x:h,y:m})}function bS(e,t){const n=SE(e).scrollLeft;return t?t.left+n:Fs(Eo(e)).left+n}function Ib(e,t,n){n===void 0&&(n=!1);const a=e.getBoundingClientRect(),s=a.left+t.scrollLeft-(n?0:bS(e,a)),c=a.top+t.scrollTop;return{x:s,y:c}}function WU(e){let{elements:t,rect:n,offsetParent:a,strategy:s}=e;const c=s==="fixed",d=Eo(a),f=t?RE(t.floating):!1;if(a===d||f&&c)return n;let h={scrollLeft:0,scrollTop:0},m=oo(1);const R=oo(0),T=On(a);if((T||!T&&!c)&&((Vl(a)!=="body"||Rd(d))&&(h=SE(a)),On(a))){const I=Fs(a);m=ac(a),R.x=I.x+a.clientLeft,R.y=I.y+a.clientTop}const S=d&&!T&&!c?Ib(d,h,!0):oo(0);return{width:n.width*m.x,height:n.height*m.y,x:n.x*m.x-h.scrollLeft*m.x+R.x+S.x,y:n.y*m.y-h.scrollTop*m.y+R.y+S.y}}function XU(e){return Array.from(e.getClientRects())}function qU(e){const t=Eo(e),n=SE(e),a=e.ownerDocument.body,s=ta(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),c=ta(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let d=-n.scrollLeft+bS(e);const f=-n.scrollTop;return pa(a).direction==="rtl"&&(d+=ta(t.clientWidth,a.clientWidth)-s),{width:s,height:c,x:d,y:f}}function ZU(e,t){const n=_i(e),a=Eo(e),s=n.visualViewport;let c=a.clientWidth,d=a.clientHeight,f=0,h=0;if(s){c=s.width,d=s.height;const m=TE();(!m||m&&t==="fixed")&&(f=s.offsetLeft,h=s.offsetTop)}return{width:c,height:d,x:f,y:h}}function $U(e,t){const n=Fs(e,!0,t==="fixed"),a=n.top+e.clientTop,s=n.left+e.clientLeft,c=On(e)?ac(e):oo(1),d=e.clientWidth*c.x,f=e.clientHeight*c.y,h=s*c.x,m=a*c.y;return{width:d,height:f,x:h,y:m}}function FN(e,t,n){let a;if(t==="viewport")a=ZU(e,n);else if(t==="document")a=qU(Eo(e));else if(Ut(t))a=$U(t,n);else{const s=Sb(e);a={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return wf(a)}function _b(e,t){const n=Ko(e);return n===t||!Ut(n)||zo(n)?!1:pa(n).position==="fixed"||_b(n,t)}function QU(e,t){const n=t.get(e);if(n)return n;let a=Ll(e,[],!1).filter(f=>Ut(f)&&Vl(f)!=="body"),s=null;const c=pa(e).position==="fixed";let d=c?Ko(e):e;for(;Ut(d)&&!zo(d);){const f=pa(d),h=IS(d);!h&&f.position==="fixed"&&(s=null),(c?!h&&!s:!h&&f.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Rd(d)&&!h&&_b(e,d))?a=a.filter(R=>R!==d):s=f,d=Ko(d)}return t.set(e,a),a}function JU(e){let{element:t,boundary:n,rootBoundary:a,strategy:s}=e;const d=[...n==="clippingAncestors"?RE(t)?[]:QU(t,this._c):[].concat(n),a],f=d[0],h=d.reduce((m,R)=>{const T=FN(t,R,s);return m.top=ta(T.top,m.top),m.right=Pl(T.right,m.right),m.bottom=Pl(T.bottom,m.bottom),m.left=ta(T.left,m.left),m},FN(t,f,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function ew(e){const{width:t,height:n}=Tb(e);return{width:t,height:n}}function tw(e,t,n){const a=On(t),s=Eo(t),c=n==="fixed",d=Fs(e,!0,c,t);let f={scrollLeft:0,scrollTop:0};const h=oo(0);if(a||!a&&!c)if((Vl(t)!=="body"||Rd(s))&&(f=SE(t)),a){const S=Fs(t,!0,c,t);h.x=S.x+t.clientLeft,h.y=S.y+t.clientTop}else s&&(h.x=bS(s));const m=s&&!a&&!c?Ib(s,f):oo(0),R=d.left+f.scrollLeft-h.x-m.x,T=d.top+f.scrollTop-h.y-m.y;return{x:R,y:T,width:d.width,height:d.height}}function yR(e){return pa(e).position==="static"}function jN(e,t){if(!On(e)||pa(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Eo(e)===n&&(n=n.ownerDocument.body),n}function gb(e,t){const n=_i(e);if(RE(e))return n;if(!On(e)){let s=Ko(e);for(;s&&!zo(s);){if(Ut(s)&&!yR(s))return s;s=Ko(s)}return n}let a=jN(e,t);for(;a&&Jk(a)&&yR(a);)a=jN(a,t);return a&&zo(a)&&yR(a)&&!IS(a)?n:a||eU(e)||n}const nw=async function(e){const t=this.getOffsetParent||gb,n=this.getDimensions,a=await n(e.floating);return{reference:tw(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function iw(e){return pa(e).direction==="rtl"}const aw={convertOffsetParentRelativeRectToViewportRelativeRect:WU,getDocumentElement:Eo,getClippingRect:JU,getOffsetParent:gb,getElementRects:nw,getClientRects:XU,getDimensions:ew,getScale:ac,isElement:Ut,isRTL:iw};function pb(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ow(e,t){let n=null,a;const s=Eo(e);function c(){var f;clearTimeout(a),(f=n)==null||f.disconnect(),n=null}function d(f,h){f===void 0&&(f=!1),h===void 0&&(h=1),c();const m=e.getBoundingClientRect(),{left:R,top:T,width:S,height:I}=m;if(f||t(),!S||!I)return;const C=Wh(T),_=Wh(s.clientWidth-(R+S)),O=Wh(s.clientHeight-(T+I)),y=Wh(R),L={rootMargin:-C+"px "+-_+"px "+-O+"px "+-y+"px",threshold:ta(0,Pl(1,h))||1};let v=!0;function P(k){const w=k[0].intersectionRatio;if(w!==h){if(!v)return d();w?d(!1,w):a=setTimeout(()=>{d(!1,1e-7)},1e3)}w===1&&!pb(m,e.getBoundingClientRect())&&d(),v=!1}try{n=new IntersectionObserver(P,{...L,root:s.ownerDocument})}catch{n=new IntersectionObserver(P,L)}n.observe(e)}return d(!0),c}function zN(e,t,n,a){a===void 0&&(a={});const{ancestorScroll:s=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:h=!1}=a,m=CS(e),R=s||c?[...m?Ll(m):[],...Ll(t)]:[];R.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),c&&y.addEventListener("resize",n)});const T=m&&f?ow(m,n):null;let S=-1,I=null;d&&(I=new ResizeObserver(y=>{let[x]=y;x&&x.target===m&&I&&(I.unobserve(t),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var L;(L=I)==null||L.observe(t)})),n()}),m&&!h&&I.observe(m),I.observe(t));let C,_=h?Fs(e):null;h&&O();function O(){const y=Fs(e);_&&!pb(_,y)&&n(),_=y,C=requestAnimationFrame(O)}return n(),()=>{var y;R.forEach(x=>{s&&x.removeEventListener("scroll",n),c&&x.removeEventListener("resize",n)}),T==null||T(),(y=I)==null||y.disconnect(),I=null,h&&cancelAnimationFrame(C)}}const lw=FU,sw=jU,rw=PU,cw=YU,uw=GU,YN=wU,dw=zU,hw=(e,t,n)=>{const a=new Map,s={platform:aw,...n},c={...s.platform,_c:a};return UU(e,t,{...s,platform:c})};var of=typeof document<"u"?N.useLayoutEffect:N.useEffect;function Ff(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,a,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(a=n;a--!==0;)if(!Ff(e[a],t[a]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!{}.hasOwnProperty.call(t,s[a]))return!1;for(a=n;a--!==0;){const c=s[a];if(!(c==="_owner"&&e.$$typeof)&&!Ff(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}function Nb(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function KN(e,t){const n=Nb(e);return Math.round(t*n)/n}function vR(e){const t=N.useRef(e);return of(()=>{t.current=e}),t}function fw(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:a=[],platform:s,elements:{reference:c,floating:d}={},transform:f=!0,whileElementsMounted:h,open:m}=e,[R,T]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[S,I]=N.useState(a);Ff(S,a)||I(a);const[C,_]=N.useState(null),[O,y]=N.useState(null),x=N.useCallback(Z=>{Z!==k.current&&(k.current=Z,_(Z))},[]),L=N.useCallback(Z=>{Z!==w.current&&(w.current=Z,y(Z))},[]),v=c||C,P=d||O,k=N.useRef(null),w=N.useRef(null),K=N.useRef(R),ne=h!=null,fe=vR(h),ue=vR(s),he=vR(m),Ee=N.useCallback(()=>{if(!k.current||!w.current)return;const Z={placement:t,strategy:n,middleware:S};ue.current&&(Z.platform=ue.current),hw(k.current,w.current,Z).then(te=>{const D={...te,isPositioned:he.current!==!1};q.current&&!Ff(K.current,D)&&(K.current=D,Ad.flushSync(()=>{T(D)}))})},[S,t,n,ue,he]);of(()=>{m===!1&&K.current.isPositioned&&(K.current.isPositioned=!1,T(Z=>({...Z,isPositioned:!1})))},[m]);const q=N.useRef(!1);of(()=>(q.current=!0,()=>{q.current=!1}),[]),of(()=>{if(v&&(k.current=v),P&&(w.current=P),v&&P){if(fe.current)return fe.current(v,P,Ee);Ee()}},[v,P,Ee,fe,ne]);const Q=N.useMemo(()=>({reference:k,floating:w,setReference:x,setFloating:L}),[x,L]),j=N.useMemo(()=>({reference:v,floating:P}),[v,P]),G=N.useMemo(()=>{const Z={position:n,left:0,top:0};if(!j.floating)return Z;const te=KN(j.floating,R.x),D=KN(j.floating,R.y);return f?{...Z,transform:"translate("+te+"px, "+D+"px)",...Nb(j.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:D}},[n,f,j.floating,R.x,R.y]);return N.useMemo(()=>({...R,update:Ee,refs:Q,elements:j,floatingStyles:G}),[R,Ee,Q,j,G])}const Ew=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:a,padding:s}=typeof e=="function"?e(n):e;return a&&t(a)?a.current!=null?YN({element:a.current,padding:s}).fn(n):{}:a?YN({element:a,padding:s}).fn(n):{}}}},mw=(e,t)=>({...lw(e),options:[e,t]}),Aw=(e,t)=>({...sw(e),options:[e,t]}),Rw=(e,t)=>({...dw(e),options:[e,t]}),Tw=(e,t)=>({...rw(e),options:[e,t]}),Sw=(e,t)=>({...cw(e),options:[e,t]}),Iw=(e,t)=>({...uw(e),options:[e,t]}),_w=(e,t)=>({...Ew(e),options:[e,t]}),gw="data-floating-ui-focusable",VN="active",WN="selected",pw={...dE};let XN=!1,Nw=0;const qN=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Nw++;function Cw(){const[e,t]=N.useState(()=>XN?qN():void 0);return jn(()=>{e==null&&t(qN())},[]),N.useEffect(()=>{XN=!0},[]),e}const bw=pw.useId,OS=bw||Cw;function Ow(){const e=new Map;return{emit(t,n){var a;(a=e.get(t))==null||a.forEach(s=>s(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var a;(a=e.get(t))==null||a.delete(n)}}}const Dw=N.createContext(null),yw=N.createContext(null),DS=()=>{var e;return((e=N.useContext(Dw))==null?void 0:e.id)||null},gE=()=>N.useContext(yw);function js(e){return"data-floating-ui-"+e}function Ji(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}const ZN=js("safe-polygon");function lf(e,t,n){if(n&&!bc(n))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const a=e();return typeof a=="number"?a:a==null?void 0:a[t]}return e==null?void 0:e[t]}function MR(e){return typeof e=="function"?e():e}function vw(e,t){t===void 0&&(t={});const{open:n,onOpenChange:a,dataRef:s,events:c,elements:d}=e,{enabled:f=!0,delay:h=0,handleClose:m=null,mouseOnly:R=!1,restMs:T=0,move:S=!0}=t,I=gE(),C=DS(),_=gs(m),O=gs(h),y=gs(n),x=gs(T),L=N.useRef(),v=N.useRef(-1),P=N.useRef(),k=N.useRef(-1),w=N.useRef(!0),K=N.useRef(!1),ne=N.useRef(()=>{}),fe=N.useRef(!1),ue=N.useCallback(()=>{var G;const Z=(G=s.current.openEvent)==null?void 0:G.type;return(Z==null?void 0:Z.includes("mouse"))&&Z!=="mousedown"},[s]);N.useEffect(()=>{if(!f)return;function G(Z){let{open:te}=Z;te||(Ji(v),Ji(k),w.current=!0,fe.current=!1)}return c.on("openchange",G),()=>{c.off("openchange",G)}},[f,c]),N.useEffect(()=>{if(!f||!_.current||!n)return;function G(te){ue()&&a(!1,te,"hover")}const Z=ui(d.floating).documentElement;return Z.addEventListener("mouseleave",G),()=>{Z.removeEventListener("mouseleave",G)}},[d.floating,n,a,f,_,ue]);const he=N.useCallback(function(G,Z,te){Z===void 0&&(Z=!0),te===void 0&&(te="hover");const D=lf(O.current,"close",L.current);D&&!P.current?(Ji(v),v.current=window.setTimeout(()=>a(!1,G,te),D)):Z&&(Ji(v),a(!1,G,te))},[O,a]),Ee=Si(()=>{ne.current(),P.current=void 0}),q=Si(()=>{if(K.current){const G=ui(d.floating).body;G.style.pointerEvents="",G.removeAttribute(ZN),K.current=!1}}),Q=Si(()=>s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1);N.useEffect(()=>{if(!f)return;function G(Y){if(Ji(v),w.current=!1,R&&!bc(L.current)||MR(x.current)>0&&!lf(O.current,"open"))return;const B=lf(O.current,"open",L.current);B?v.current=window.setTimeout(()=>{y.current||a(!0,Y,"hover")},B):n||a(!0,Y,"hover")}function Z(Y){if(Q()){q();return}ne.current();const B=ui(d.floating);if(Ji(k),fe.current=!1,_.current&&s.current.floatingContext){n||Ji(v),P.current=_.current({...s.current.floatingContext,tree:I,x:Y.clientX,y:Y.clientY,onClose(){q(),Ee(),Q()||he(Y,!0,"safe-polygon")}});const re=P.current;B.addEventListener("mousemove",re),ne.current=()=>{B.removeEventListener("mousemove",re)};return}(L.current==="touch"?!ei(d.floating,Y.relatedTarget):!0)&&he(Y)}function te(Y){Q()||s.current.floatingContext&&(_.current==null||_.current({...s.current.floatingContext,tree:I,x:Y.clientX,y:Y.clientY,onClose(){q(),Ee(),Q()||he(Y)}})(Y))}function D(){Ji(v)}function F(Y){Q()||he(Y,!1)}if(Ut(d.domReference)){const Y=d.domReference,B=d.floating;return n&&Y.addEventListener("mouseleave",te),S&&Y.addEventListener("mousemove",G,{once:!0}),Y.addEventListener("mouseenter",G),Y.addEventListener("mouseleave",Z),B&&(B.addEventListener("mouseleave",te),B.addEventListener("mouseenter",D),B.addEventListener("mouseleave",F)),()=>{n&&Y.removeEventListener("mouseleave",te),S&&Y.removeEventListener("mousemove",G),Y.removeEventListener("mouseenter",G),Y.removeEventListener("mouseleave",Z),B&&(B.removeEventListener("mouseleave",te),B.removeEventListener("mouseenter",D),B.removeEventListener("mouseleave",F))}}},[d,f,e,R,S,he,Ee,q,a,n,y,I,O,_,s,Q,x]),jn(()=>{var G;if(f&&n&&(G=_.current)!=null&&G.__options.blockPointerEvents&&ue()){K.current=!0;const te=d.floating;if(Ut(d.domReference)&&te){var Z;const D=ui(d.floating).body;D.setAttribute(ZN,"");const F=d.domReference,Y=I==null||(Z=I.nodesRef.current.find(B=>B.id===C))==null||(Z=Z.context)==null?void 0:Z.elements.floating;return Y&&(Y.style.pointerEvents=""),D.style.pointerEvents="none",F.style.pointerEvents="auto",te.style.pointerEvents="auto",()=>{D.style.pointerEvents="",F.style.pointerEvents="",te.style.pointerEvents=""}}}},[f,n,C,d,I,_,ue]),jn(()=>{n||(L.current=void 0,fe.current=!1,Ee(),q())},[n,Ee,q]),N.useEffect(()=>()=>{Ee(),Ji(v),Ji(k),q()},[f,d.domReference,Ee,q]);const j=N.useMemo(()=>{function G(Z){L.current=Z.pointerType}return{onPointerDown:G,onPointerEnter:G,onMouseMove(Z){const{nativeEvent:te}=Z;function D(){!w.current&&!y.current&&a(!0,te,"hover")}R&&!bc(L.current)||n||MR(x.current)===0||fe.current&&Z.movementX**2+Z.movementY**2<2||(Ji(k),L.current==="touch"?D():(fe.current=!0,k.current=window.setTimeout(D,MR(x.current))))}}},[R,a,n,y,x]);return N.useMemo(()=>f?{reference:j}:{},[f,j])}const Mw=N.createContext({hasProvider:!1,timeoutMs:0,delayRef:{current:0},initialDelayRef:{current:0},timeoutIdRef:{current:-1},currentIdRef:{current:null},currentContextRef:{current:null}});function Lw(e,t){t===void 0&&(t={});const{open:n,onOpenChange:a,floatingId:s}=e,{enabled:c=!0}=t,d=N.useContext(Mw),{currentIdRef:f,delayRef:h,timeoutMs:m,initialDelayRef:R,currentContextRef:T,hasProvider:S,timeoutIdRef:I}=d,[C,_]=N.useState(!1);return jn(()=>{function O(){var y;_(!1),(y=T.current)==null||y.setIsInstantPhase(!1),f.current=null,T.current=null,h.current=R.current}if(c&&f.current&&!n&&f.current===s){if(_(!1),m)return I.current=window.setTimeout(O,m),()=>{clearTimeout(I.current)};O()}},[c,n,s,f,h,m,R,T,I]),jn(()=>{if(!c||!n)return;const O=T.current,y=f.current;T.current={onOpenChange:a,setIsInstantPhase:_},f.current=s,h.current={open:0,close:lf(R.current,"close")},y!==null&&y!==s?(Ji(I),_(!0),O==null||O.setIsInstantPhase(!0),O==null||O.onOpenChange(!1)):(_(!1),O==null||O.setIsInstantPhase(!1))},[c,n,s,a,f,h,m,R,T,I]),jn(()=>()=>{T.current=null},[T]),N.useMemo(()=>({hasProvider:S,delayRef:h,isInstantPhase:C}),[S,h,C])}let $N=0;function Yr(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:a=!0,sync:s=!1}=t;a&&cancelAnimationFrame($N);const c=()=>e==null?void 0:e.focus({preventScroll:n});s?c():$N=requestAnimationFrame(c)}function LR(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Hf(n)){let a=t;for(;a;){if(e===a)return!0;a=a.parentNode||a.host}}return!1}function xw(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Hw(e){return(e==null?void 0:e.ownerDocument)||document}let Kr=new WeakMap,Xh=new WeakSet,qh={},xR=0;const kw=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,Cb=e=>e&&(e.host||Cb(e.parentNode)),Uw=(e,t)=>t.map(n=>{if(e.contains(n))return n;const a=Cb(n);return e.contains(a)?a:null}).filter(n=>n!=null);function ww(e,t,n,a){const s="data-floating-ui-inert",c=a?"inert":n?"aria-hidden":null,d=Uw(t,e),f=new Set,h=new Set(d),m=[];qh[s]||(qh[s]=new WeakMap);const R=qh[s];d.forEach(T),S(t),f.clear();function T(I){!I||f.has(I)||(f.add(I),I.parentNode&&T(I.parentNode))}function S(I){!I||h.has(I)||[].forEach.call(I.children,C=>{if(Vl(C)!=="script")if(f.has(C))S(C);else{const _=c?C.getAttribute(c):null,O=_!==null&&_!=="false",y=Kr.get(C)||0,x=c?y+1:y,L=(R.get(C)||0)+1;Kr.set(C,x),R.set(C,L),m.push(C),x===1&&O&&Xh.add(C),L===1&&C.setAttribute(s,""),!O&&c&&C.setAttribute(c,c==="inert"?"":"true")}})}return xR++,()=>{m.forEach(I=>{const C=Kr.get(I)||0,_=c?C-1:C,O=(R.get(I)||0)-1;Kr.set(I,_),R.set(I,O),_||(!Xh.has(I)&&c&&I.removeAttribute(c),Xh.delete(I)),O||I.removeAttribute(s)}),xR--,xR||(Kr=new WeakMap,Kr=new WeakMap,Xh=new WeakSet,qh={})}}function QN(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=Hw(e[0]).body;return ww(e.concat(Array.from(a.querySelectorAll("[aria-live]"))),a,t,n)}const pE={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},jf=N.forwardRef(function(t,n){const[a,s]=N.useState();jn(()=>{fb()&&s("button")},[]);const c={ref:n,tabIndex:0,role:a,"aria-hidden":a?void 0:!0,[js("focus-guard")]:"",style:pE};return l.jsx("span",{...t,...c})}),bb=N.createContext(null),JN=js("portal");function Ob(e){e===void 0&&(e={});const{id:t,root:n}=e,a=OS(),s=Db(),[c,d]=N.useState(null),f=N.useRef(null);return jn(()=>()=>{c==null||c.remove(),queueMicrotask(()=>{f.current=null})},[c]),jn(()=>{if(!a||f.current)return;const h=t?document.getElementById(t):null;if(!h)return;const m=document.createElement("div");m.id=a,m.setAttribute(JN,""),h.appendChild(m),f.current=m,d(m)},[t,a]),jn(()=>{if(n===null||!a||f.current)return;let h=n||(s==null?void 0:s.portalNode);h&&!Ut(h)&&(h=h.current),h=h||document.body;let m=null;t&&(m=document.createElement("div"),m.id=t,h.appendChild(m));const R=document.createElement("div");R.id=a,R.setAttribute(JN,""),h=m||h,h.appendChild(R),f.current=R,d(R)},[t,n,a,s]),c}function Pw(e){const{children:t,id:n,root:a,preserveTabOrder:s=!0}=e,c=Ob({id:n,root:a}),[d,f]=N.useState(null),h=N.useRef(null),m=N.useRef(null),R=N.useRef(null),T=N.useRef(null),S=d==null?void 0:d.modal,I=d==null?void 0:d.open,C=!!d&&!d.modal&&d.open&&s&&!!(a||c);return N.useEffect(()=>{if(!c||!s||S)return;function _(O){c&&qu(O)&&(O.type==="focusin"?wN:kU)(c)}return c.addEventListener("focusin",_,!0),c.addEventListener("focusout",_,!0),()=>{c.removeEventListener("focusin",_,!0),c.removeEventListener("focusout",_,!0)}},[c,s,S]),N.useEffect(()=>{c&&(I||wN(c))},[I,c]),l.jsxs(bb.Provider,{value:N.useMemo(()=>({preserveTabOrder:s,beforeOutsideRef:h,afterOutsideRef:m,beforeInsideRef:R,afterInsideRef:T,portalNode:c,setFocusManagerState:f}),[s,c]),children:[C&&c&&l.jsx(jf,{"data-type":"outside",ref:h,onFocus:_=>{if(qu(_,c)){var O;(O=R.current)==null||O.focus()}else{const y=d?d.domReference:null,x=Rb(y);x==null||x.focus()}}}),C&&c&&l.jsx("span",{"aria-owns":c.id,style:pE}),c&&Ad.createPortal(t,c),C&&c&&l.jsx(jf,{"data-type":"outside",ref:m,onFocus:_=>{if(qu(_,c)){var O;(O=T.current)==null||O.focus()}else{const y=d?d.domReference:null,x=Ab(y);x==null||x.focus(),d!=null&&d.closeOnFocusOut&&(d==null||d.onOpenChange(!1,_.nativeEvent,"focus-out"))}}})]})}const Db=()=>N.useContext(bb);function eC(e){return N.useMemo(()=>t=>{e.forEach(n=>{n&&(n.current=t)})},e)}const Gw=20;let Ts=[];function Bw(e){Ts=Ts.filter(t=>t.isConnected),e&&Vl(e)!=="body"&&(Ts.push(e),Ts.length>Gw&&(Ts=Ts.slice(-20)))}function tC(){return Ts.slice().reverse().find(e=>e.isConnected)}function Fw(e){const t=Td();return db(e,t)?e:IE(e,t)[0]||e}function nC(e,t){var n;if(!t.current.includes("floating")&&!((n=e.getAttribute("role"))!=null&&n.includes("dialog")))return;const a=Td(),c=NU(e,a).filter(f=>{const h=f.getAttribute("data-tabindex")||"";return db(f,a)||f.hasAttribute("data-tabindex")&&!h.startsWith("-")}),d=e.getAttribute("tabindex");t.current.includes("floating")||c.length===0?d!=="0"&&e.setAttribute("tabindex","0"):(d!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const jw=N.forwardRef(function(t,n){return l.jsx("button",{...t,type:"button",ref:n,tabIndex:-1,style:pE})});function zw(e){const{context:t,children:n,disabled:a=!1,order:s=["content"],guards:c=!0,initialFocus:d=0,returnFocus:f=!0,restoreFocus:h=!1,modal:m=!0,visuallyHiddenDismiss:R=!1,closeOnFocusOut:T=!0,outsideElementsInert:S=!1,getInsideElements:I=()=>[]}=e,{open:C,onOpenChange:_,events:O,dataRef:y,elements:{domReference:x,floating:L}}=t,v=Si(()=>{var Ne;return(Ne=y.current.floatingContext)==null?void 0:Ne.nodeId}),P=Si(I),k=typeof d=="number"&&d<0,w=kN(x)&&k,K=kw(),ne=K?c:!0,fe=!ne||K&&S,ue=gs(s),he=gs(d),Ee=gs(f),q=gE(),Q=Db(),j=N.useRef(null),G=N.useRef(null),Z=N.useRef(!1),te=N.useRef(!1),D=N.useRef(-1),F=Q!=null,Y=AT(L),B=Si(function(Ne){return Ne===void 0&&(Ne=Y),Ne?IE(Ne,Td()):[]}),W=Si(Ne=>{const pe=B(Ne);return ue.current.map(le=>x&&le==="reference"?x:Y&&le==="floating"?Y:pe).filter(Boolean).flat()});N.useEffect(()=>{if(a||!m)return;function Ne(le){if(le.key==="Tab"){ei(Y,Nl(ui(Y)))&&B().length===0&&!w&&DR(le);const ge=W(),Ie=Pa(le);ue.current[0]==="reference"&&Ie===x&&(DR(le),le.shiftKey?Yr(ge[ge.length-1]):Yr(ge[1])),ue.current[1]==="floating"&&Ie===Y&&le.shiftKey&&(DR(le),Yr(ge[0]))}}const pe=ui(Y);return pe.addEventListener("keydown",Ne),()=>{pe.removeEventListener("keydown",Ne)}},[a,x,Y,m,ue,w,B,W]),N.useEffect(()=>{if(a||!L)return;function Ne(pe){const le=Pa(pe),Ie=B().indexOf(le);Ie!==-1&&(D.current=Ie)}return L.addEventListener("focusin",Ne),()=>{L.removeEventListener("focusin",Ne)}},[a,L,B]),N.useEffect(()=>{if(a||!T)return;function Ne(){te.current=!0,setTimeout(()=>{te.current=!1})}function pe(le){const ge=le.relatedTarget,Ie=le.currentTarget;queueMicrotask(()=>{const be=v(),ye=!(ei(x,ge)||ei(L,ge)||ei(ge,L)||ei(Q==null?void 0:Q.portalNode,ge)||ge!=null&&ge.hasAttribute(js("focus-guard"))||q&&(Xu(q.nodesRef.current,be).find(Ue=>{var Je,It;return ei((Je=Ue.context)==null?void 0:Je.elements.floating,ge)||ei((It=Ue.context)==null?void 0:It.elements.domReference,ge)})||UN(q.nodesRef.current,be).find(Ue=>{var Je,It,nn;return[(Je=Ue.context)==null?void 0:Je.elements.floating,AT((It=Ue.context)==null?void 0:It.elements.floating)].includes(ge)||((nn=Ue.context)==null?void 0:nn.elements.domReference)===ge})));if(Ie===x&&Y&&nC(Y,ue),h&&ye&&Nl(ui(Y))===ui(Y).body){On(Y)&&Y.focus();const Ue=D.current,Je=B(),It=Je[Ue]||Je[Je.length-1]||Y;On(It)&&It.focus()}(w||!m)&&ge&&ye&&!te.current&&ge!==tC()&&(Z.current=!0,_(!1,le,"focus-out"))})}if(L&&On(x))return x.addEventListener("focusout",pe),x.addEventListener("pointerdown",Ne),L.addEventListener("focusout",pe),()=>{x.removeEventListener("focusout",pe),x.removeEventListener("pointerdown",Ne),L.removeEventListener("focusout",pe)}},[a,x,L,Y,m,q,Q,_,T,h,B,w,v,ue]);const re=N.useRef(null),oe=N.useRef(null),Ae=eC([re,Q==null?void 0:Q.beforeInsideRef]),me=eC([oe,Q==null?void 0:Q.afterInsideRef]);N.useEffect(()=>{var Ne,pe;if(a||!L)return;const le=Array.from((Q==null||(Ne=Q.portalNode)==null?void 0:Ne.querySelectorAll("["+js("portal")+"]"))||[]),ge=q?UN(q.nodesRef.current,v()):[],Ie=q&&!m?ge.map(Je=>{var It;return(It=Je.context)==null?void 0:It.elements.floating}):[],be=(pe=ge.find(Je=>{var It;return kN(((It=Je.context)==null?void 0:It.elements.domReference)||null)}))==null||(pe=pe.context)==null?void 0:pe.elements.domReference,ye=[L,be,...le,...Ie,...P(),j.current,G.current,re.current,oe.current,Q==null?void 0:Q.beforeOutsideRef.current,Q==null?void 0:Q.afterOutsideRef.current,ue.current.includes("reference")||w?x:null].filter(Je=>Je!=null),Ue=m||w?QN(ye,!fe,fe):QN(ye);return()=>{Ue()}},[a,x,L,m,ue,Q,w,ne,fe,q,v,P]),jn(()=>{if(a||!On(Y))return;const Ne=ui(Y),pe=Nl(Ne);queueMicrotask(()=>{const le=W(Y),ge=he.current,Ie=(typeof ge=="number"?le[ge]:ge.current)||Y,be=ei(Y,pe);!k&&!be&&C&&Yr(Ie,{preventScroll:Ie===Y})})},[a,C,Y,k,W,he]),jn(()=>{if(a||!Y)return;let Ne=!1;const pe=ui(Y),le=Nl(pe);Bw(le);function ge(ye){let{reason:Ue,event:Je,nested:It}=ye;if(["hover","safe-polygon"].includes(Ue)&&Je.type==="mouseleave"&&(Z.current=!0),Ue==="outside-press")if(It)Z.current=!1,Ne=!0;else if(vU(Je)||MU(Je))Z.current=!1;else{let nn=!1;document.createElement("div").focus({get preventScroll(){return nn=!0,!1}}),nn?(Z.current=!1,Ne=!0):Z.current=!0}}O.on("openchange",ge);const Ie=pe.createElement("span");Ie.setAttribute("tabindex","-1"),Ie.setAttribute("aria-hidden","true"),Object.assign(Ie.style,pE),F&&x&&x.insertAdjacentElement("afterend",Ie);function be(){if(typeof Ee.current=="boolean"){const ye=x||tC();return ye&&ye.isConnected?ye:Ie}return Ee.current.current||Ie}return()=>{O.off("openchange",ge);const ye=Nl(pe),Ue=ei(L,ye)||q&&Xu(q.nodesRef.current,v()).some(It=>{var nn;return ei((nn=It.context)==null?void 0:nn.elements.floating,ye)}),Je=be();queueMicrotask(()=>{const It=Fw(Je);Ee.current&&!Z.current&&On(It)&&(!(It!==ye&&ye!==pe.body)||Ue)&&It.focus({preventScroll:Ne}),Ie.remove()})}},[a,L,Y,Ee,y,O,q,F,x,v]),N.useEffect(()=>{queueMicrotask(()=>{Z.current=!1})},[a]),jn(()=>{if(!a&&Q)return Q.setFocusManagerState({modal:m,closeOnFocusOut:T,open:C,onOpenChange:_,domReference:x}),()=>{Q.setFocusManagerState(null)}},[a,Q,m,C,_,T,x]),jn(()=>{a||Y&&nC(Y,ue)},[a,Y,ue]);function Ce(Ne){return a||!R||!m?null:l.jsx(jw,{ref:Ne==="start"?j:G,onClick:pe=>_(!1,pe.nativeEvent),children:typeof R=="string"?R:"Dismiss"})}const Be=!a&&ne&&(m?!w:!0)&&(F||m);return l.jsxs(l.Fragment,{children:[Be&&l.jsx(jf,{"data-type":"inside",ref:Ae,onFocus:Ne=>{if(m){const le=W();Yr(s[0]==="reference"?le[0]:le[le.length-1])}else if(Q!=null&&Q.preserveTabOrder&&Q.portalNode)if(Z.current=!1,qu(Ne,Q.portalNode)){const le=Ab(x);le==null||le.focus()}else{var pe;(pe=Q.beforeOutsideRef.current)==null||pe.focus()}}}),!w&&Ce("start"),n,Ce("end"),Be&&l.jsx(jf,{"data-type":"inside",ref:me,onFocus:Ne=>{if(m)Yr(W()[0]);else if(Q!=null&&Q.preserveTabOrder&&Q.portalNode)if(T&&(Z.current=!0),qu(Ne,Q.portalNode)){const le=Rb(x);le==null||le.focus()}else{var pe;(pe=Q.afterOutsideRef.current)==null||pe.focus()}}})]})}function iC(e){return On(e.target)&&e.target.tagName==="BUTTON"}function Yw(e){return On(e.target)&&e.target.tagName==="A"}function aC(e){return _E(e)}function Kw(e,t){t===void 0&&(t={});const{open:n,onOpenChange:a,dataRef:s,elements:{domReference:c}}=e,{enabled:d=!0,event:f="click",toggle:h=!0,ignoreMouse:m=!1,keyboardHandlers:R=!0,stickIfOpen:T=!0}=t,S=N.useRef(),I=N.useRef(!1),C=N.useMemo(()=>({onPointerDown(_){S.current=_.pointerType},onMouseDown(_){const O=S.current;_.button===0&&f!=="click"&&(bc(O,!0)&&m||(n&&h&&(!(s.current.openEvent&&T)||s.current.openEvent.type==="mousedown")?a(!1,_.nativeEvent,"click"):(_.preventDefault(),a(!0,_.nativeEvent,"click"))))},onClick(_){const O=S.current;if(f==="mousedown"&&S.current){S.current=void 0;return}bc(O,!0)&&m||(n&&h&&(!(s.current.openEvent&&T)||s.current.openEvent.type==="click")?a(!1,_.nativeEvent,"click"):a(!0,_.nativeEvent,"click"))},onKeyDown(_){S.current=void 0,!(_.defaultPrevented||!R||iC(_))&&(_.key===" "&&!aC(c)&&(_.preventDefault(),I.current=!0),!Yw(_)&&_.key==="Enter"&&a(!(n&&h),_.nativeEvent,"click"))},onKeyUp(_){_.defaultPrevented||!R||iC(_)||aC(c)||_.key===" "&&I.current&&(I.current=!1,a(!(n&&h),_.nativeEvent,"click"))}}),[s,c,f,m,R,a,n,T,h]);return N.useMemo(()=>d?{reference:C}:{},[d,C])}function Vw(e,t){let n=null,a=null,s=!1;return{contextElement:e||void 0,getBoundingClientRect(){var c;const d=(e==null?void 0:e.getBoundingClientRect())||{width:0,height:0,x:0,y:0},f=t.axis==="x"||t.axis==="both",h=t.axis==="y"||t.axis==="both",m=["mouseenter","mousemove"].includes(((c=t.dataRef.current.openEvent)==null?void 0:c.type)||"")&&t.pointerType!=="touch";let R=d.width,T=d.height,S=d.x,I=d.y;return n==null&&t.x&&f&&(n=d.x-t.x),a==null&&t.y&&h&&(a=d.y-t.y),S-=n||0,I-=a||0,R=0,T=0,!s||m?(R=t.axis==="y"?d.width:0,T=t.axis==="x"?d.height:0,S=f&&t.x!=null?t.x:S,I=h&&t.y!=null?t.y:I):s&&!m&&(T=t.axis==="x"?d.height:T,R=t.axis==="y"?d.width:R),s=!0,{width:R,height:T,x:S,y:I,top:I,right:S+R,bottom:I+T,left:S}}}}function oC(e){return e!=null&&e.clientX!=null}function Ww(e,t){t===void 0&&(t={});const{open:n,dataRef:a,elements:{floating:s,domReference:c},refs:d}=e,{enabled:f=!0,axis:h="both",x:m=null,y:R=null}=t,T=N.useRef(!1),S=N.useRef(null),[I,C]=N.useState(),[_,O]=N.useState([]),y=Si((k,w)=>{T.current||a.current.openEvent&&!oC(a.current.openEvent)||d.setPositionReference(Vw(c,{x:k,y:w,axis:h,dataRef:a,pointerType:I}))}),x=Si(k=>{m!=null||R!=null||(n?S.current||O([]):y(k.clientX,k.clientY))}),L=bc(I)?s:n,v=N.useCallback(()=>{if(!L||!f||m!=null||R!=null)return;const k=_i(s);function w(K){const ne=Pa(K);ei(s,ne)?(k.removeEventListener("mousemove",w),S.current=null):y(K.clientX,K.clientY)}if(!a.current.openEvent||oC(a.current.openEvent)){k.addEventListener("mousemove",w);const K=()=>{k.removeEventListener("mousemove",w),S.current=null};return S.current=K,K}d.setPositionReference(c)},[L,f,m,R,s,a,d,c,y]);N.useEffect(()=>v(),[v,_]),N.useEffect(()=>{f&&!s&&(T.current=!1)},[f,s]),N.useEffect(()=>{!f&&n&&(T.current=!0)},[f,n]),jn(()=>{f&&(m!=null||R!=null)&&(T.current=!1,y(m,R))},[f,m,R,y]);const P=N.useMemo(()=>{function k(w){let{pointerType:K}=w;C(K)}return{onPointerDown:k,onPointerEnter:k,onMouseMove:x,onMouseEnter:x}},[x]);return N.useMemo(()=>f?{reference:P}:{},[f,P])}const Xw={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},qw={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},lC=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function yb(e,t){t===void 0&&(t={});const{open:n,onOpenChange:a,elements:s,dataRef:c}=e,{enabled:d=!0,escapeKey:f=!0,outsidePress:h=!0,outsidePressEvent:m="pointerdown",referencePress:R=!1,referencePressEvent:T="pointerdown",ancestorScroll:S=!1,bubbles:I,capture:C}=t,_=gE(),O=Si(typeof h=="function"?h:()=>!1),y=typeof h=="function"?O:h,x=N.useRef(!1),L=N.useRef(!1),{escapeKey:v,outsidePress:P}=lC(I),{escapeKey:k,outsidePress:w}=lC(C),K=N.useRef(!1),ne=Si(Q=>{var j;if(!n||!d||!f||Q.key!=="Escape"||K.current)return;const G=(j=c.current.floatingContext)==null?void 0:j.nodeId,Z=_?Xu(_.nodesRef.current,G):[];if(!v&&(Q.stopPropagation(),Z.length>0)){let te=!0;if(Z.forEach(D=>{var F;if((F=D.context)!=null&&F.open&&!D.context.dataRef.current.__escapeKeyBubbles){te=!1;return}}),!te)return}a(!1,yU(Q)?Q.nativeEvent:Q,"escape-key")}),fe=Si(Q=>{var j;const G=()=>{var Z;ne(Q),(Z=Pa(Q))==null||Z.removeEventListener("keydown",G)};(j=Pa(Q))==null||j.addEventListener("keydown",G)}),ue=Si(Q=>{var j;const G=x.current;x.current=!1;const Z=L.current;if(L.current=!1,m==="click"&&Z||G||typeof y=="function"&&!y(Q))return;const te=Pa(Q),D="["+js("inert")+"]",F=ui(s.floating).querySelectorAll(D);let Y=Ut(te)?te:null;for(;Y&&!zo(Y);){const oe=Ko(Y);if(zo(oe)||!Ut(oe))break;Y=oe}if(F.length&&Ut(te)&&!OU(te)&&!ei(te,s.floating)&&Array.from(F).every(oe=>!ei(Y,oe)))return;if(On(te)&&q){const oe=zo(te),Ae=pa(te),me=/auto|scroll/,Ce=oe||me.test(Ae.overflowX),Be=oe||me.test(Ae.overflowY),Ne=Ce&&te.clientWidth>0&&te.scrollWidth>te.clientWidth,pe=Be&&te.clientHeight>0&&te.scrollHeight>te.clientHeight,le=Ae.direction==="rtl",ge=pe&&(le?Q.offsetX<=te.offsetWidth-te.clientWidth:Q.offsetX>te.clientWidth),Ie=Ne&&Q.offsetY>te.clientHeight;if(ge||Ie)return}const B=(j=c.current.floatingContext)==null?void 0:j.nodeId,W=_&&Xu(_.nodesRef.current,B).some(oe=>{var Ae;return OR(Q,(Ae=oe.context)==null?void 0:Ae.elements.floating)});if(OR(Q,s.floating)||OR(Q,s.domReference)||W)return;const re=_?Xu(_.nodesRef.current,B):[];if(re.length>0){let oe=!0;if(re.forEach(Ae=>{var me;if((me=Ae.context)!=null&&me.open&&!Ae.context.dataRef.current.__outsidePressBubbles){oe=!1;return}}),!oe)return}a(!1,Q,"outside-press")}),he=Si(Q=>{var j;const G=()=>{var Z;ue(Q),(Z=Pa(Q))==null||Z.removeEventListener(m,G)};(j=Pa(Q))==null||j.addEventListener(m,G)});N.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=v,c.current.__outsidePressBubbles=P;let Q=-1;function j(F){a(!1,F,"ancestor-scroll")}function G(){window.clearTimeout(Q),K.current=!0}function Z(){Q=window.setTimeout(()=>{K.current=!1},TE()?5:0)}const te=ui(s.floating);f&&(te.addEventListener("keydown",k?fe:ne,k),te.addEventListener("compositionstart",G),te.addEventListener("compositionend",Z)),y&&te.addEventListener(m,w?he:ue,w);let D=[];return S&&(Ut(s.domReference)&&(D=Ll(s.domReference)),Ut(s.floating)&&(D=D.concat(Ll(s.floating))),!Ut(s.reference)&&s.reference&&s.reference.contextElement&&(D=D.concat(Ll(s.reference.contextElement)))),D=D.filter(F=>{var Y;return F!==((Y=te.defaultView)==null?void 0:Y.visualViewport)}),D.forEach(F=>{F.addEventListener("scroll",j,{passive:!0})}),()=>{f&&(te.removeEventListener("keydown",k?fe:ne,k),te.removeEventListener("compositionstart",G),te.removeEventListener("compositionend",Z)),y&&te.removeEventListener(m,w?he:ue,w),D.forEach(F=>{F.removeEventListener("scroll",j)}),window.clearTimeout(Q)}},[c,s,f,y,m,n,a,S,d,v,P,ne,k,fe,ue,w,he]),N.useEffect(()=>{x.current=!1},[y,m]);const Ee=N.useMemo(()=>({onKeyDown:ne,...R&&{[Xw[T]]:Q=>{a(!1,Q.nativeEvent,"reference-press")},...T!=="click"&&{onClick(Q){a(!1,Q.nativeEvent,"reference-press")}}}}),[ne,a,R,T]),q=N.useMemo(()=>({onKeyDown:ne,onMouseDown(){L.current=!0},onMouseUp(){L.current=!0},[qw[m]]:()=>{x.current=!0}}),[ne,m]);return N.useMemo(()=>d?{reference:Ee,floating:q}:{},[d,Ee,q])}function yS(e){const{open:t=!1,onOpenChange:n,elements:a}=e,s=OS(),c=N.useRef({}),[d]=N.useState(()=>Ow()),f=DS()!=null,[h,m]=N.useState(a.reference),R=Si((I,C,_)=>{c.current.openEvent=I?C:void 0,d.emit("openchange",{open:I,event:C,reason:_,nested:f}),n==null||n(I,C,_)}),T=N.useMemo(()=>({setPositionReference:m}),[]),S=N.useMemo(()=>({reference:h||a.reference||null,floating:a.floating||null,domReference:a.reference}),[h,a.reference,a.floating]);return N.useMemo(()=>({dataRef:c,open:t,onOpenChange:R,elements:S,events:d,floatingId:s,refs:T}),[t,R,S,d,s,T])}function Zw(e){e===void 0&&(e={});const{nodeId:t}=e,n=yS({...e,elements:{reference:null,floating:null,...e.elements}}),a=e.rootContext||n,s=a.elements,[c,d]=N.useState(null),[f,h]=N.useState(null),R=(s==null?void 0:s.domReference)||c,T=N.useRef(null),S=gE();jn(()=>{R&&(T.current=R)},[R]);const I=fw({...e,elements:{...s,...f&&{reference:f}}}),C=N.useCallback(L=>{const v=Ut(L)?{getBoundingClientRect:()=>L.getBoundingClientRect(),getClientRects:()=>L.getClientRects(),contextElement:L}:L;h(v),I.refs.setReference(v)},[I.refs]),_=N.useCallback(L=>{(Ut(L)||L===null)&&(T.current=L,d(L)),(Ut(I.refs.reference.current)||I.refs.reference.current===null||L!==null&&!Ut(L))&&I.refs.setReference(L)},[I.refs]),O=N.useMemo(()=>({...I.refs,setReference:_,setPositionReference:C,domReference:T}),[I.refs,_,C]),y=N.useMemo(()=>({...I.elements,domReference:R}),[I.elements,R]),x=N.useMemo(()=>({...I,...a,refs:O,elements:y,nodeId:t}),[I,O,y,t,a]);return jn(()=>{a.dataRef.current.floatingContext=x;const L=S==null?void 0:S.nodesRef.current.find(v=>v.id===t);L&&(L.context=x)}),N.useMemo(()=>({...I,context:x,refs:O,elements:y}),[I,O,y,x])}function HR(){return CU()&&fb()}function $w(e,t){t===void 0&&(t={});const{open:n,onOpenChange:a,events:s,dataRef:c,elements:d}=e,{enabled:f=!0,visibleOnly:h=!0}=t,m=N.useRef(!1),R=N.useRef(-1),T=N.useRef(!0);N.useEffect(()=>{if(!f)return;const I=_i(d.domReference);function C(){!n&&On(d.domReference)&&d.domReference===Nl(ui(d.domReference))&&(m.current=!0)}function _(){T.current=!0}function O(){T.current=!1}return I.addEventListener("blur",C),HR()&&(I.addEventListener("keydown",_,!0),I.addEventListener("pointerdown",O,!0)),()=>{I.removeEventListener("blur",C),HR()&&(I.removeEventListener("keydown",_,!0),I.removeEventListener("pointerdown",O,!0))}},[d.domReference,n,f]),N.useEffect(()=>{if(!f)return;function I(C){let{reason:_}=C;(_==="reference-press"||_==="escape-key")&&(m.current=!0)}return s.on("openchange",I),()=>{s.off("openchange",I)}},[s,f]),N.useEffect(()=>()=>{Ji(R)},[]);const S=N.useMemo(()=>({onMouseLeave(){m.current=!1},onFocus(I){if(m.current)return;const C=Pa(I.nativeEvent);if(h&&Ut(C)){if(HR()&&!I.relatedTarget){if(!T.current&&!_E(C))return}else if(!DU(C))return}a(!0,I.nativeEvent,"focus")},onBlur(I){m.current=!1;const C=I.relatedTarget,_=I.nativeEvent,O=Ut(C)&&C.hasAttribute(js("focus-guard"))&&C.getAttribute("data-type")==="outside";R.current=window.setTimeout(()=>{var y;const x=Nl(d.domReference?d.domReference.ownerDocument:document);!C&&x===d.domReference||ei((y=c.current.floatingContext)==null?void 0:y.refs.floating.current,x)||ei(d.domReference,x)||O||a(!1,_,"focus")})}}),[c,d.domReference,a,h]);return N.useMemo(()=>f?{reference:S}:{},[f,S])}function kR(e,t,n){const a=new Map,s=n==="item";let c=e;if(s&&e){const{[VN]:d,[WN]:f,...h}=e;c=h}return{...n==="floating"&&{tabIndex:-1,[gw]:""},...c,...t.map(d=>{const f=d?d[n]:null;return typeof f=="function"?e?f(e):null:f}).concat(e).reduce((d,f)=>(f&&Object.entries(f).forEach(h=>{let[m,R]=h;if(!(s&&[VN,WN].includes(m)))if(m.indexOf("on")===0){if(a.has(m)||a.set(m,[]),typeof R=="function"){var T;(T=a.get(m))==null||T.push(R),d[m]=function(){for(var S,I=arguments.length,C=new Array(I),_=0;_<I;_++)C[_]=arguments[_];return(S=a.get(m))==null?void 0:S.map(O=>O(...C)).find(O=>O!==void 0)}}}else d[m]=R}),d),{})}}function vb(e){e===void 0&&(e=[]);const t=e.map(f=>f==null?void 0:f.reference),n=e.map(f=>f==null?void 0:f.floating),a=e.map(f=>f==null?void 0:f.item),s=N.useCallback(f=>kR(f,e,"reference"),t),c=N.useCallback(f=>kR(f,e,"floating"),n),d=N.useCallback(f=>kR(f,e,"item"),a);return N.useMemo(()=>({getReferenceProps:s,getFloatingProps:c,getItemProps:d}),[s,c,d])}const Qw=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Jw(e,t){var n,a;t===void 0&&(t={});const{open:s,elements:c,floatingId:d}=e,{enabled:f=!0,role:h="dialog"}=t,m=OS(),R=((n=c.domReference)==null?void 0:n.id)||m,T=N.useMemo(()=>{var x;return((x=AT(c.floating))==null?void 0:x.id)||d},[c.floating,d]),S=(a=Qw.get(h))!=null?a:h,C=DS()!=null,_=N.useMemo(()=>S==="tooltip"||h==="label"?{["aria-"+(h==="label"?"labelledby":"describedby")]:s?T:void 0}:{"aria-expanded":s?"true":"false","aria-haspopup":S==="alertdialog"?"dialog":S,"aria-controls":s?T:void 0,...S==="listbox"&&{role:"combobox"},...S==="menu"&&{id:R},...S==="menu"&&C&&{role:"menuitem"},...h==="select"&&{"aria-autocomplete":"none"},...h==="combobox"&&{"aria-autocomplete":"list"}},[S,T,C,s,R,h]),O=N.useMemo(()=>{const x={id:T,...S&&{role:S}};return S==="tooltip"||h==="label"?x:{...x,...S==="menu"&&{"aria-labelledby":R}}},[S,T,R,h]),y=N.useCallback(x=>{let{active:L,selected:v}=x;const P={role:"option",...L&&{id:T+"-fui-option"}};switch(h){case"select":return{...P,"aria-selected":L&&v};case"combobox":return{...P,"aria-selected":v}}return{}},[T,h]);return N.useMemo(()=>f?{reference:_,floating:O,item:y}:{},[f,_,O,y])}function eP(e,t,n){n===void 0&&(n=!0);let a=e.filter(c=>{var d;return c.parentId===t&&((d=c.context)==null?void 0:d.open)}),s=a;for(;s.length;)s=n?e.filter(c=>{var d;return(d=s)==null?void 0:d.some(f=>{var h;return c.parentId===f.id&&((h=c.context)==null?void 0:h.open)})}):e,a=a.concat(s);return a}function sC(e,t){const[n,a]=e;let s=!1;const c=t.length;for(let d=0,f=c-1;d<c;f=d++){const[h,m]=t[d]||[0,0],[R,T]=t[f]||[0,0];m>=a!=T>=a&&n<=(R-h)*(a-m)/(T-m)+h&&(s=!s)}return s}function tP(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function nP(e){e===void 0&&(e={});const{buffer:t=.5,blockPointerEvents:n=!1,requireIntent:a=!0}=e;let s,c=!1,d=null,f=null,h=performance.now();function m(T,S){const I=performance.now(),C=I-h;if(d===null||f===null||C===0)return d=T,f=S,h=I,null;const _=T-d,O=S-f,x=Math.sqrt(_*_+O*O)/C;return d=T,f=S,h=I,x}const R=T=>{let{x:S,y:I,placement:C,elements:_,onClose:O,nodeId:y,tree:x}=T;return function(v){function P(){clearTimeout(s),O()}if(clearTimeout(s),!_.domReference||!_.floating||C==null||S==null||I==null)return;const{clientX:k,clientY:w}=v,K=[k,w],ne=xw(v),fe=v.type==="mouseleave",ue=LR(_.floating,ne),he=LR(_.domReference,ne),Ee=_.domReference.getBoundingClientRect(),q=_.floating.getBoundingClientRect(),Q=C.split("-")[0],j=S>q.right-q.width/2,G=I>q.bottom-q.height/2,Z=tP(K,Ee),te=q.width>Ee.width,D=q.height>Ee.height,F=(te?Ee:q).left,Y=(te?Ee:q).right,B=(D?Ee:q).top,W=(D?Ee:q).bottom;if(ue&&(c=!0,!fe))return;if(he&&(c=!1),he&&!fe){c=!0;return}if(fe&&Ut(v.relatedTarget)&&LR(_.floating,v.relatedTarget)||x&&eP(x.nodesRef.current,y).some(Ae=>{let{context:me}=Ae;return me==null?void 0:me.open}))return;if(Q==="top"&&I>=Ee.bottom-1||Q==="bottom"&&I<=Ee.top+1||Q==="left"&&S>=Ee.right-1||Q==="right"&&S<=Ee.left+1)return P();let re=[];switch(Q){case"top":re=[[F,Ee.top+1],[F,q.bottom-1],[Y,q.bottom-1],[Y,Ee.top+1]];break;case"bottom":re=[[F,q.top+1],[F,Ee.bottom-1],[Y,Ee.bottom-1],[Y,q.top+1]];break;case"left":re=[[q.right-1,W],[q.right-1,B],[Ee.left+1,B],[Ee.left+1,W]];break;case"right":re=[[Ee.right-1,W],[Ee.right-1,B],[q.left+1,B],[q.left+1,W]];break}function oe(Ae){let[me,Ce]=Ae;switch(Q){case"top":{const Be=[te?me+t/2:j?me+t*4:me-t*4,Ce+t+1],Ne=[te?me-t/2:j?me+t*4:me-t*4,Ce+t+1],pe=[[q.left,j||te?q.bottom-t:q.top],[q.right,j?te?q.bottom-t:q.top:q.bottom-t]];return[Be,Ne,...pe]}case"bottom":{const Be=[te?me+t/2:j?me+t*4:me-t*4,Ce-t],Ne=[te?me-t/2:j?me+t*4:me-t*4,Ce-t],pe=[[q.left,j||te?q.top+t:q.bottom],[q.right,j?te?q.top+t:q.bottom:q.top+t]];return[Be,Ne,...pe]}case"left":{const Be=[me+t+1,D?Ce+t/2:G?Ce+t*4:Ce-t*4],Ne=[me+t+1,D?Ce-t/2:G?Ce+t*4:Ce-t*4];return[...[[G||D?q.right-t:q.left,q.top],[G?D?q.right-t:q.left:q.right-t,q.bottom]],Be,Ne]}case"right":{const Be=[me-t,D?Ce+t/2:G?Ce+t*4:Ce-t*4],Ne=[me-t,D?Ce-t/2:G?Ce+t*4:Ce-t*4],pe=[[G||D?q.left+t:q.right,q.top],[G?D?q.left+t:q.right:q.left+t,q.bottom]];return[Be,Ne,...pe]}}}if(!sC([k,w],re)){if(c&&!Z)return P();if(!fe&&a){const Ae=m(v.clientX,v.clientY);if(Ae!==null&&Ae<.1)return P()}sC([k,w],oe([S,I]))?!c&&a&&(s=window.setTimeout(P,40)):P()}}};return R.__options={blockPointerEvents:n},R}function Mb({controlled:e,default:t,name:n,state:a="value"}){const{current:s}=N.useRef(e!==void 0),[c,d]=N.useState(t),f=s?e:c,h=N.useCallback(m=>{s||d(m)},[]);return[f,h]}const co=typeof window<"u"?N.useLayoutEffect:N.useEffect;function Lb(e){const[t,n]=N.useState(e?"idle":void 0),[a,s]=N.useState(e);return e&&!a&&(s(!0),n("starting")),!e&&a&&t!=="ending"&&n("ending"),!e&&!a&&t==="ending"&&n(void 0),co(()=>{if(!e)return;e&&a&&t!=="idle"&&n("starting");const c=requestAnimationFrame(()=>{n("idle")});return()=>{cancelAnimationFrame(c)}},[e,a,n,t]),N.useMemo(()=>({mounted:a,setMounted:s,transitionStatus:t}),[a,t])}function Na(e){const t=N.useRef(e);return co(()=>{t.current=e}),N.useCallback((...n)=>{var a;return(a=t.current)==null?void 0:a.call(t,...n)},[])}const xb=600;function Hb(e){if(e)return{click:"click",hover:"hover",focus:"focus","focus-out":"focus-out","escape-key":"escape-key","outside-press":"outside-press","reference-press":"trigger-press","safe-polygon":"hover","ancestor-scroll":void 0,"list-navigation":void 0}[e]}function iP(e,t=!1){const n=N.useRef(-1),a=N.useRef(-1),s=Na(()=>{cancelAnimationFrame(n.current),clearTimeout(a.current)});return N.useEffect(()=>s,[s]),Na((c,d=null)=>{s();const f=e.current;f&&(typeof f.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?c():n.current=requestAnimationFrame(()=>{function h(){f&&Promise.allSettled(f.getAnimations().map(m=>m.finished)).then(()=>{d!=null&&d.aborted||Ad.flushSync(c)})}t?a.current=window.setTimeout(h):h()}))})}function RT(e){const t=N.useRef(e);return co(()=>{t.current=e}),t}function NE(e){const{enabled:t=!0,open:n,ref:a,onComplete:s}=e,c=RT(n),d=Na(s),f=iP(a,n);N.useEffect(()=>{t&&f(()=>{n===c.current&&d()})},[t,n,d,f,c])}const aP=N.createContext(void 0);function oP(){return N.useContext(aP)}function lP(e){const{open:t,onOpenChange:n,defaultOpen:a=!1,hoverable:s=!0,trackCursorAxis:c="none",delay:d,closeDelay:f,onOpenChangeComplete:h,disabled:m}=e,R=d??xb,T=f??0,[S,I]=N.useState(null),[C,_]=N.useState(null),[O,y]=N.useState(),x=N.useRef(null),[L,v]=Mb({controlled:t,default:a,name:"Tooltip",state:"open"}),P=Na(n),k=N.useCallback((B,W,re)=>{P(B,W,re),v(B)},[P,v]);L&&m&&k(!1,void 0,void 0);const{mounted:w,setMounted:K,transitionStatus:ne}=Lb(L),fe=Na(()=>{K(!1),h==null||h(!1)});NE({enabled:!e.actionsRef,open:L,ref:x,onComplete(){L||fe()}}),N.useImperativeHandle(e.actionsRef,()=>({unmount:fe}),[fe]);const ue=yS({elements:{reference:S,floating:C},open:L,onOpenChange(B,W,re){const oe=re==="hover"||re==="safe-polygon",Ae=B&&re==="focus",me=!B&&(re==="reference-press"||re==="escape-key");function Ce(){k(B,W,Hb(re))}oe?Ad.flushSync(Ce):Ce(),Ae||me?y(Ae?"focus":"dismiss"):re==="hover"&&y(void 0)}}),he=oP(),{delayRef:Ee,isInstantPhase:q,hasProvider:Q}=Lw(ue),j=q?"delay":O,G=vw(ue,{enabled:!m,mouseOnly:!0,move:!1,handleClose:s&&c!=="both"?nP():null,restMs(){const B=he==null?void 0:he.delay,W=typeof Ee.current=="object"?Ee.current.open:void 0;let re=R;return Q&&(W!==0?re=d??B??R:re=0),re},delay(){const B=typeof Ee.current=="object"?Ee.current.close:void 0;let W=T;return f==null&&Q&&(W=B),{close:W}}}),Z=$w(ue,{enabled:!m}),te=yb(ue,{enabled:!m,referencePress:!0}),D=Ww(ue,{enabled:!m&&c!=="none",axis:c==="none"?void 0:c}),{getReferenceProps:F,getFloatingProps:Y}=vb([G,Z,te,D]);return N.useMemo(()=>({open:L,setOpen:k,mounted:w,setMounted:K,setTriggerElement:I,positionerElement:C,setPositionerElement:_,popupRef:x,getTriggerProps:F,getPopupProps:Y,floatingRootContext:ue,instantType:j,transitionStatus:ne,onOpenChangeComplete:h}),[w,L,K,C,k,F,Y,ue,j,ne,h])}const kb=function(t){const{disabled:n=!1,defaultOpen:a=!1,onOpenChange:s,open:c,delay:d,closeDelay:f,hoverable:h=!0,trackCursorAxis:m="none",actionsRef:R,onOpenChangeComplete:T}=t,S=d??xb,I=f??0,C=lP({...t,defaultOpen:a,onOpenChange:s,open:c,hoverable:h,trackCursorAxis:m,delay:d,closeDelay:f,actionsRef:R,onOpenChangeComplete:T,disabled:n}),_=N.useMemo(()=>({...C,delay:S,closeDelay:I,trackCursorAxis:m}),[C,S,I,m]);return l.jsx(tb.Provider,{value:_,children:t.children})};let zf=function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e}({});const sP={[zf.startingStyle]:""},rP={[zf.endingStyle]:""},vS={transitionStatus(e){return e==="starting"?sP:e==="ending"?rP:null}};let ps=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=zf.startingStyle]="startingStyle",e[e.endingStyle=zf.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e}({}),cP=function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e}({});const uP={[cP.popupOpen]:""},dP={[ps.open]:""},hP={[ps.closed]:""},fP={[ps.anchorHidden]:""},Ub={open(e){return e?uP:null}},CE={open(e){return e?dP:hP},anchorHidden(e){return e?fP:null}};function EP(e,t){let n={};return Object.entries(e).forEach(([a,s])=>{if(t!=null&&t.hasOwnProperty(a)){const c=t[a](s);c!=null&&(n={...n,...c});return}s===!0?n[`data-${a.toLowerCase()}`]="":s&&(n[`data-${a.toLowerCase()}`]=s.toString())}),n}function mP(e,t){return typeof e=="function"?e(t):e}function mo(...e){if(e.length===0)return{};if(e.length===1)return rC(e[0],{});let t=rC(e[0],{});for(let n=1;n<e.length;n+=1){const a=e[n];a&&(wb(a)?t=a(t):t=AP(t,a))}return t??{}}function rC(e,t){return wb(e)?e(t):e??{}}function AP(e,t){return t?e?Object.entries(t).reduce((n,[a,s])=>(RP(a,s)?n[a]=TP(e[a],s):a==="style"?n[a]=SP(e.style,s):a==="className"?n[a]=IP(e.className,s):n[a]=s,n),{...e}):t:e||{}}function RP(e,t){const n=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function wb(e){return typeof e=="function"}function TP(e,t){return n=>{if(_P(n)){const s=n;TT(s);const c=t(s);return s.baseUIHandlerPrevented||e==null||e(s),c}const a=t(n);return e==null||e(n),a}}function TT(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function SP(e,t){if(t||e)return{...e,...t}}function IP(e,t){return t?e?t+" "+e:t:e}function _P(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function gP(e,t,n){return typeof e=="function"?e(t,n):N.cloneElement(e,{...mo(t,e.props),ref:t.ref})}function Mc(...e){const t=N.useRef(void 0),n=N.useCallback(a=>{const s=e.map(c=>{if(c==null)return null;if(typeof c=="function"){const d=c,f=d(a);return typeof f=="function"?f:()=>{d(null)}}return c.current=a,()=>{c.current=null}});return()=>{s.forEach(c=>c==null?void 0:c())}},e);return N.useMemo(()=>e.every(a=>a==null)?null:a=>{t.current&&(t.current(),t.current=void 0),a!=null&&(t.current=n(a))},e)}const pP=parseInt(N.version,10);function Pb(e){return pP>=e}function NP(e,...t){let n;return typeof e!="function"?n=Pb(19)?e.props.ref:e.ref:n=null,Mc(n,...t)}function CP(e){return function(n){return e==="button"?l.jsx("button",{type:"button",...n}):e==="img"?l.jsx("img",{alt:"",...n}):l.jsx(e,{...n})}}const cC={};function bE(e,t,n={}){const{className:a,render:s}=t,{propGetter:c=y=>y,state:d=cC,ref:f,props:h,customStyleHookMapping:m,styleHooks:R=!0}=n,T=s||(typeof e=="string"?CP(e):e),S=mP(a,d),I=N.useMemo(()=>R?EP(d,m):cC,[d,m,R]),C=c({...I,...Array.isArray(h)?mo(...h):h});let _=[];f!==void 0&&(_=Array.isArray(f)?f:[f]);const O={...C,ref:NP(T,C.ref,..._)};return S!==void 0&&(O.className=S),()=>gP(T,O,d)}const bP=N.forwardRef(function(t,n){const{className:a,render:s,...c}=t,{open:d,setTriggerElement:f,getTriggerProps:h}=md(),m=N.useMemo(()=>({open:d}),[d]);return bE("button",t,{state:m,ref:[n,f],props:[h,c],customStyleHookMapping:Ub})()});bR.oneOfType([bR.func,bR.object]);const Gb=N.createContext(void 0);function OP(){const e=N.useContext(Gb);if(e===void 0)throw new Error("Base UI: <Tooltip.Portal> is missing.");return e}function DP(e){const t=Ob({root:e.root});return t&&Ad.createPortal(e.children,t)}function Bb(e){const{children:t,keepMounted:n=!1,container:a}=e,{mounted:s}=md();return s||n?l.jsx(Gb.Provider,{value:n,children:l.jsx(DP,{root:a,children:t})}):null}const Fb=N.createContext(void 0);function yP(){const e=N.useContext(Fb);if(e===void 0)throw new Error("Base UI: TooltipPositionerContext is missing. TooltipPositioner parts must be placed within <Tooltip.Positioner>.");return e}const vP=N.createContext(void 0);function MP(e=!0){const t=N.useContext(vP);if(t===void 0&&!e)throw new Error("Base UI: DirectionContext is missing.");return(t==null?void 0:t.direction)??"ltr"}function uC(e,t,n){const a=e==="inline-start"||e==="inline-end";return{top:"top",right:a?n?"inline-start":"inline-end":"right",bottom:"bottom",left:a?n?"inline-end":"inline-start":"left"}[t]}function LP(e){var Be,Ne;const{anchor:t,positionMethod:n="absolute",side:a="bottom",sideOffset:s=0,align:c="center",alignOffset:d=0,collisionBoundary:f,collisionPadding:h=5,sticky:m=!1,arrowPadding:R=5,keepMounted:T=!1,floatingRootContext:S,mounted:I,trackAnchor:C=!0,nodeId:_}=e,y=MP()==="rtl",x={top:"top",right:"right",bottom:"bottom",left:"left","inline-end":y?"left":"right","inline-start":y?"right":"left"}[a],L=c==="center"?x:`${x}-${c}`,v={boundary:f==="clipping-ancestors"?"clippingAncestors":f,padding:h},P=N.useRef(null),k=RT(s),w=RT(d),fe=[mw(({rects:pe,placement:le})=>{const ge={side:uC(a,_a(le),y),align:Gl(le)||"center",anchor:{width:pe.reference.width,height:pe.reference.height},positioner:{width:pe.floating.width,height:pe.floating.height}},Ie=typeof k.current=="function"?k.current(ge):k.current,be=typeof w.current=="function"?w.current(ge):w.current;return{mainAxis:Ie,crossAxis:be,alignmentAxis:be}},[typeof s!="function"?s:0,typeof d!="function"?d:0,y,a])],ue=Tw(v),he=Aw({...v,crossAxis:m,limiter:m?void 0:Rw(()=>{if(!P.current)return{};const{height:pe}=P.current.getBoundingClientRect();return{offset:pe/2+(typeof h=="number"?h:0)}})});c!=="center"?fe.push(ue,he):fe.push(he,ue),fe.push(Sw({...v,apply({elements:{floating:pe},rects:{reference:le},availableWidth:ge,availableHeight:Ie}){Object.entries({"--available-width":`${ge}px`,"--available-height":`${Ie}px`,"--anchor-width":`${le.width}px`,"--anchor-height":`${le.height}px`}).forEach(([be,ye])=>{pe.style.setProperty(be,ye)})}}),_w(()=>({element:P.current||document.createElement("div"),padding:R}),[R]),Iw(),{name:"transformOrigin",fn({elements:pe,middlewareData:le,placement:ge}){var Md,Ld;const Ie=_a(ge),be=P.current,ye=((Md=le.arrow)==null?void 0:Md.x)??0,Ue=((Ld=le.arrow)==null?void 0:Ld.y)??0,Je=(be==null?void 0:be.clientWidth)??0,It=(be==null?void 0:be.clientHeight)??0,nn=ye+Je/2,$l=Ue+It/2,ar={top:`${nn}px calc(100% + ${s}px)`,bottom:`${nn}px ${-s}px`,left:`calc(100% + ${s}px) ${$l}px`,right:`${-s}px ${$l}px`}[Ie];return pe.floating.style.setProperty("--transform-origin",ar),{}}});let Ee=S;!I&&S&&(Ee={...S,elements:{reference:null,floating:null,domReference:null}});const q=N.useMemo(()=>({elementResize:C&&typeof ResizeObserver<"u",layoutShift:C&&typeof IntersectionObserver<"u"}),[C]),{refs:Q,elements:j,floatingStyles:G,middlewareData:Z,update:te,placement:D,context:F,isPositioned:Y}=Zw({rootContext:Ee,placement:L,middleware:fe,strategy:n,whileElementsMounted:T?void 0:(...pe)=>zN(...pe,q),nodeId:_}),B=N.useRef(null);co(()=>{if(!I)return;const pe=typeof t=="function"?t():t;if(pe){const le=dC(pe)?pe.current:pe;Q.setPositionReference(le),B.current=le}},[I,Q,t]),N.useEffect(()=>{I&&typeof t!="function"&&dC(t)&&t.current!==B.current&&(Q.setPositionReference(t.current),B.current=t.current)},[I,Q,t]),N.useEffect(()=>{if(T&&I&&j.domReference&&j.floating)return zN(j.domReference,j.floating,te,q)},[T,I,j,te,q]);const W=_a(D),re=uC(a,W,y),oe=Gl(D)||"center",Ae=!!((Be=Z.hide)!=null&&Be.referenceHidden),me=N.useMemo(()=>{var pe,le;return{position:"absolute",top:(pe=Z.arrow)==null?void 0:pe.y,left:(le=Z.arrow)==null?void 0:le.x}},[Z.arrow]),Ce=((Ne=Z.arrow)==null?void 0:Ne.centerOffset)!==0;return N.useMemo(()=>({positionerStyles:G,arrowStyles:me,arrowRef:P,arrowUncentered:Ce,side:re,align:oe,anchorHidden:Ae,refs:Q,context:F,isPositioned:Y}),[G,me,P,Ce,re,oe,Ae,Q,F,Y])}function dC(e){return e!=null&&"current"in e}function xP(e){const{open:t,trackCursorAxis:n,mounted:a}=md(),s=LP(e),c=N.useMemo(()=>{const d={};return(!t||n==="both")&&(d.pointerEvents="none"),{role:"presentation",hidden:!a,style:{...s.positionerStyles,...d}}},[t,n,a,s.positionerStyles]);return N.useMemo(()=>({props:c,...s}),[c,s])}const jb=N.forwardRef(function(t,n){const{render:a,className:s,anchor:c,positionMethod:d="absolute",side:f="top",align:h="center",sideOffset:m=0,alignOffset:R=0,collisionBoundary:T="clipping-ancestors",collisionPadding:S=5,arrowPadding:I=5,sticky:C=!1,trackAnchor:_=!0,...O}=t,{open:y,setPositionerElement:x,mounted:L,floatingRootContext:v}=md(),P=OP(),k=xP({anchor:c,positionMethod:d,floatingRootContext:v,trackAnchor:_,mounted:L,side:f,sideOffset:m,align:h,alignOffset:R,collisionBoundary:T,collisionPadding:S,sticky:C,arrowPadding:I,keepMounted:P}),w=N.useMemo(()=>({open:y,side:k.side,align:k.align,anchorHidden:k.anchorHidden}),[y,k.side,k.align,k.anchorHidden]),K=N.useMemo(()=>({...w,arrowRef:k.arrowRef,arrowStyles:k.arrowStyles,arrowUncentered:k.arrowUncentered}),[w,k.arrowRef,k.arrowStyles,k.arrowUncentered]),ne=bE("div",t,{state:w,props:[k.props,O],ref:[n,x],customStyleHookMapping:CE});return l.jsx(Fb.Provider,{value:K,children:ne()})}),HP={...CE,...vS},zb=N.forwardRef(function(t,n){const{className:a,render:s,...c}=t,{open:d,instantType:f,transitionStatus:h,getPopupProps:m,popupRef:R,onOpenChangeComplete:T}=md(),{side:S,align:I}=yP();NE({open:d,ref:R,onComplete(){d&&(T==null||T(!0))}});const C=N.useMemo(()=>({open:d,side:S,align:I,instant:f,transitionStatus:h}),[d,S,I,f,h]);return bE("div",t,{state:C,ref:[n,R],props:[m,{style:h==="starting"?{transition:"none"}:{}},c],customStyleHookMapping:HP})()}),UR=new Map,Yb="assets/Skills/General/Missing.png",ST=e=>{if(UR.has(e))return UR.get(e);const t=`assets/Skills/${Q0(e)}`;if(t){const n=new Image;return n.src=t,n.onerror=a=>{n.src=Yb,console.error("failed to load skill image: "+t),n.onerror=null},n.onload=()=>Wo(),UR.set(e,n),n}};function Kb(e){const t=`assets/Skills/${Q0(e.skillName)}`,[n,a]=N.useState(!1);return l.jsx("img",{style:e.style,src:n?Yb:t,onError:s=>a(!0),alt:e.skillName})}function kP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.6)"}){const t=e.diameter/2,n=Math.PI*t,a=n*(1-e.progress),s=n-a,c=a+","+s,d=l.jsx("circle",{r:t/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:t,strokeDasharray:c,strokeDashoffset:n/4+a}),f=t,h=l.jsx("circle",{r:t+f/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:f});return l.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[d,h]})}function UP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,n=2*Math.PI*t,a=n*e.progress,s=n-a,c=a+","+s,d=l.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:2,strokeDashoffset:n/4,strokeDasharray:c});return l.jsx("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:d})}function wP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,n=Math.PI*t*2,a=n*e.progress,s=n-a,c=a+","+s,d=2*Math.PI*e.progress,f="#ffffffef",h=l.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:f,strokeWidth:1,strokeDasharray:c,strokeDashoffset:n/4}),m=l.jsx("line",{x1:20,y1:21,x2:20,y2:21-t,stroke:f,strokeWidth:1}),R=l.jsx("line",{x1:20,y1:21,x2:20+t*Math.cos(d-Math.PI/2),y2:21+t*Math.sin(d-Math.PI/2),stroke:f,strokeWidth:1});return l.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[h,m,R]})}function PP(e){const[t,n]=N.useState(l.jsx("div",{})),a=N.useContext(gn),s=()=>{const k=p.getSkillInfo({game:p.getDisplayedGame(),skillName:e.skillName}),w=hi(a),K=[];if(k.status.ready()){let he="ready ("+k.stacksAvailable,Ee=" ("+k.stacksAvailable;k.timeTillNextStackReady>0&&(he+=") (next stack ready in "+k.timeTillNextStackReady.toFixed(3),Ee+=") ("+k.timeTillNextStackReady.toFixed(3)+""),he+=")",Ee+=")",K.push(g({en:he,zh:Ee}))}else{if(k.status.unavailableReasons.includes(Tt.RequirementsNotMet)&&K.push(Ls(Tt.RequirementsNotMet)),k.status.unavailableReasons.includes(Tt.NotEnoughMP)&&K.push(Ls(Tt.NotEnoughMP)+g({en:" (needs "+k.capturedManaCost+")",zh:" "+k.capturedManaCost+""})),k.status.unavailableReasons.includes(Tt.Blocked)){const he=Math.max(k.timeTillNextStackReady,k.timeTillSecondaryReady??0),Ee=g({en:"possibly ready in "+k.timeTillAvailable.toFixed(3),zh:""+k.timeTillAvailable.toFixed(3)+""}),q=g({en:" (next stack ready in "+he.toFixed(3)+")",zh:""+he.toFixed(3)+"CD"});K.push(l.jsxs(l.Fragment,{children:[Ee,k.stacksAvailable<k.maxStacks?q:void 0]}))}k.status.unavailableReasons.includes(Tt.NotInCombat)&&K.push(Ls(Tt.NotInCombat))}const ne=k.instantCast?0:k.castTime;let fe="";k.status.ready()&&(fe+=g({en:"cast: ",zh:""})+ne.toFixed(3),k.llCovered&&ne>_n.epsilon&&(fe+=" (LL)"),fe+=g({en:", cast+delay: ",zh:" +"})+k.timeTillDamageApplication.toFixed(3));const ue=l.jsxs("div",{style:{color:p.displayingUpToDateGameState?w.text:w.historical},children:[l.jsx("div",{className:"paragraph",children:l.jsx("b",{children:ba(e.skillName)})}),l.jsx("div",{className:"paragraph",children:K.map((he,Ee)=>l.jsxs("span",{children:[he,l.jsx("br",{})]},Ee))}),l.jsx("div",{className:"paragraph",children:fe})]});n(ue)},c={width:48,height:48,verticalAlign:"top",position:"relative",display:"inline-block"},d={width:40,height:40,position:"absolute",top:2,left:"50%",marginLeft:-20};let f="transparent";e.readyAsideFromCd||(f="rgba(0, 0, 0, 0.6)");const h=p.getSkillInfo({game:p.getDisplayedGame(),skillName:e.skillName}),m=h.stacksAvailable,R=h.maxStacks;let T;const S=48,I=S/3+4;let C,_;if(m>0){C="0 0 2px rgba(255, 50, 0, 1), 0 0 3px rgba(255, 100, 0, 1), 0 0 5px rgba(255, 100, 0, 1)";const k=m===R?5:3;for(let w=0;w<k;w++)C+=", 0 0 10px black";_="white"}else C="0 0 4px black, 0 0 8px black",_="rgb(223,60,60)";R>1?T=l.jsx("div",{tabIndex:-1,style:{fontFamily:"Goldman Regular",color:_,fontSize:`${I}px`,textShadow:C,width:I,textAlign:"center",bottom:2,right:1,zIndex:3,position:"absolute"},children:m}):T=l.jsx(l.Fragment,{});const O=l.jsx(kP,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(0, 0, 0, 0.6)"}),y=l.jsx(wP,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 1.0)"}),x=e.secondaryCdProgress&&l.jsx(UP,{diameter:32,progress:e.secondaryCdProgress,color:"rgba(250,186,47,255)"}),L=l.jsx("img",{hidden:!e.highlight,src:"/misc/proc.png",alt:"skill proc",style:{position:"absolute",width:44,height:44,top:0,left:2,zIndex:2}}),v=l.jsxs("div",{onMouseEnter:s,children:[l.jsxs("div",{style:c,children:[" ",l.jsx(Kb,{style:d,skillName:e.skillName}),l.jsxs("div",{style:{position:"absolute",width:40,height:41,top:1,left:"50%",marginLeft:-20,borderRadius:3,overflow:"hidden",zIndex:1,background:f},children:[e.cdProgress>1-_n.epsilon||!e.readyAsideFromCd||O,e.cdProgress>1-_n.epsilon||y,!e.secondaryCdProgress||e.secondaryCdProgress>1-_n.epsilon||x]}),l.jsx("div",{style:{position:"absolute",width:S,height:S,background:"url('/misc/skillIcon_overlay.png') no-repeat"}})]}),L,T]}),P=l.jsx("span",{title:bn[e.skillName].name,className:"skillButton",children:l.jsx(Ys,{onClickFn:()=>{p.requestUseSkill({skillName:e.skillName,targetCount:e.targetCount},!0)},content:v})});return l.jsxs(kb,{delay:0,hoverable:!1,children:[l.jsx(bP,{render:P}),l.jsx(Bb,{container:document.getElementById("skillsWindowAnchor"),children:l.jsx(jb,{sideOffset:3,side:"top",className:"tooltip-positioner",children:l.jsx(zb,{className:"info-tooltip tooltip",children:t})})})]})}let Vb=e=>{};class Wb extends di.Component{constructor(n){super(n);J(this,"state");J(this,"onWaitTimeChange");J(this,"onWaitTimeSubmit");J(this,"onWaitUntilChange");J(this,"onWaitUntilSubmit");J(this,"onWaitSinceChange");J(this,"onTargetCountChange");J(this,"onRemoveTrailingIdleTime");J(this,"onWaitTillNextMpOrLucidTick");Vb=a=>{this.setState({statusList:a})},this.onWaitTimeChange=a=>{!a||!a.target||this.setState({waitTime:a.target.value})},this.onWaitTimeSubmit=a=>{a.preventDefault();const s=parseFloat(this.state.waitTime);if(!isNaN(s))if(this.state.waitSince==="Now")p.step(s,!0);else if(this.state.waitSince==="LastSkill"){const c=p.game.time-p.lastSkillTime,d=s-c;d<=0?window.alert("Invalid input: trying to jump to "+s+"s since the last action, but "+c+"s has already elapsed."):p.step(d,!0)}else console.assert(!1)},this.onWaitUntilChange=a=>{!a||!a.target||this.setState({waitUntil:a.target.value})},this.onWaitUntilSubmit=a=>{a.preventDefault();const s=ao(this.state.waitUntil);isNaN(s)||(s>(p.displayingUpToDateGameState?p.game.getDisplayTime():p.savedHistoricalGame.getDisplayTime())?p.stepUntil(s,!0):window.alert("Can only jump to a time in the future!"))},this.onWaitSinceChange=a=>{this.setState({waitSince:a.target.value})},this.onTargetCountChange=a=>{this.setState({targetCount:parseInt(a.target.value)})},this.onRemoveTrailingIdleTime=()=>{p.removeTrailingIdleTime()},this.onWaitTillNextMpOrLucidTick=()=>{p.waitTillNextMpOrLucidTick()},this.state={statusList:[],waitTime:"1",waitSince:"Now",waitUntil:"0:00",targetCount:1}}render(){const n=[];for(let h=0;h<this.state.statusList.length;h++){const m=this.state.statusList[h].skillName,R=this.state.statusList[h],T=R?!R.status.unavailableReasons.some(I=>I!==Tt.Blocked):!1,S=l.jsx(PP,{highlight:R?R.highlight:!1,skillName:m,ready:R?R.status.ready():!1,readyAsideFromCd:T,cdProgress:R?1-R.timeTillNextStackReady/R.cdRecastTime:1,secondaryCdProgress:R&&R.secondaryCdRecastTime&&R.timeTillSecondaryReady?1-R.timeTillSecondaryReady/R.secondaryCdRecastTime:1,targetCount:this.state.targetCount},h);n.push(S)}const a=l.jsx(Xe,{topic:"waitUntilInputFormat",content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:g({en:"Examples:",zh:""})}),l.jsxs("div",{className:"paragraph",children:["12 ",l.jsx("br",{}),"1.5 ",l.jsx("br",{}),"10:04.2 ",l.jsx("br",{}),"-0:03"]})]})}),s={display:"inline-block",flex:"auto"},c=hi(this.context),d={outline:"none",border:"none",borderBottom:"1px solid "+c.text,borderRadius:0,background:"transparent",color:c.text},f=l.jsx(Xe,{topic:"targetCount",content:g({en:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"The number of targets hit by the next ability. Damage fall-off is automatically computed. If the number of targets set is more than the number of enemies the ability can hit, then the additional targets are ignored."}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("span",{children:"Buff calculations for enemy debuffs like Dokumori and Chain Stratagem may be inaccurate when multiple targets are selected."})]}),zh:l.jsxs("div",{children:[l.jsx("span",{children:"2"}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("span",{children:""})]})})});return l.jsx("div",{className:"skillsWindow",id:"skillsWindowAnchor",children:l.jsxs("div",{className:"skillIcons",children:[l.jsx("style",{children:`
					.info-tooltip {
						color: ${c.text};
						background-color: ${c.tipBackground};
						opacity: 0.98;
						max-width: 300px;
						outline: 1px solid ${c.bgHighContrast};
						transition: none;
						font-size: 100%;
						z-index: 10;
					}
				`}),n,l.jsxs("div",{style:{margin:"10px 0"},children:[g({en:"# of targets hit",zh:""})," ",f,":"," ",l.jsx("input",{type:"number",min:1,max:H1,style:{width:30,...d},value:this.state.targetCount,onChange:this.onTargetCountChange}),l.jsxs("div",{style:{display:"flex",flexDirection:"row",marginBottom:6},children:[g({en:l.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:s,children:["Wait until"," ",l.jsx("input",{type:"text",style:{width:40,...d},value:this.state.waitTime,onChange:this.onWaitTimeChange})," ","second(s) since"," ",l.jsxs("select",{style:{display:"inline-block",outline:"none"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[l.jsx("option",{value:"Now",children:"now"}),l.jsx("option",{value:"LastSkill",children:"last action"})]})," ",l.jsx("input",{type:"submit",value:"GO"})]}),zh:l.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:s,children:[""," ",l.jsxs("select",{style:{display:"inline-block",outline:"none"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[l.jsx("option",{value:"Now",children:""}),l.jsx("option",{value:"LastSkill",children:""})]})," ",""," ",l.jsx("input",{type:"text",style:{width:30,...d},value:this.state.waitTime,onChange:this.onWaitTimeChange})," "," ",l.jsx("input",{type:"submit",value:"GO"})]}),ja:l.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:s,children:[l.jsxs("select",{style:{display:"inline-block",outline:"none",marginRight:"4px"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[l.jsx("option",{value:"Now",children:""}),l.jsx("option",{value:"LastSkill",children:""})]}),"",l.jsx("input",{type:"text",style:{width:30,...d},value:this.state.waitTime,onChange:this.onWaitTimeChange}),"",l.jsx("input",{type:"submit",value:"GO"})]})}),g({en:l.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:s,children:["Wait until ",a," ",l.jsx("input",{type:"text",style:{width:60,...d},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),l.jsx("input",{type:"submit",value:"GO"})]}),zh:l.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:s,children:[" ",a," ",l.jsx("input",{type:"text",style:{width:60,...d},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),l.jsx("input",{type:"submit",value:"GO"})]}),ja:l.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:s,children:[" ",a," ",l.jsx("input",{type:"text",style:{width:60,...d},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),l.jsx("input",{type:"submit",value:"GO"})]})})]}),l.jsx("button",{onClick:this.onWaitTillNextMpOrLucidTick,children:g({en:"Wait until MP tick / lucid tick",zh:"/"})}),l.jsx("span",{children:" "}),l.jsx("button",{onClick:this.onRemoveTrailingIdleTime,children:g({en:"Remove trailing idle time",zh:""})})]})]})})}}J(Wb,"contextType",gn);let xl=()=>{};function GP(e){const[t,n]=N.useState("(untitled)"),a=s=>n(s);return l.jsxs("form",{children:[l.jsx(Kt,{style:{display:"inline-block",marginTop:"10px"},defaultValue:t,description:g({en:"name: ",zh:""}),width:30,onChange:a}),l.jsx("span",{children:" "}),l.jsx("button",{type:"submit",disabled:!e.enabled,onClick:s=>{p.addSelectionToPreset(t),s.preventDefault()},children:g({en:"add selection to preset",zh:""})})]})}function BP(e){const t=e.line,n=[];let a=0;const s={margin:"0 1px",width:"18px",verticalAlign:"middle"};for(const d of t.actions)if(d.info.type===Ze.Skill){const f=d.info.skillName;n.push(l.jsx(Kb,{style:s,skillName:f},a)),a++}const c=l.jsxs("span",{children:[t.name," (",n,")"]});return l.jsxs("div",{style:{marginBottom:"8px"},children:[l.jsx(Ys,{content:c,onClickFn:()=>{const d=p.record.selectionStartIndex;p.displayingUpToDateGameState?(p.tryAddLine(t,xn.SkillSequence),p.updateAllDisplay(),p.scrollToTime()):d!==void 0&&p.undoStack.doThenPush(new PS(t.actions,d,"preset"))}}),l.jsx("span",{children:" "}),l.jsx(Ys,{content:"[x]",onClickFn:()=>{p.deleteLine(t)}})]})}function FP(){const e=N.useContext(gn),[,t]=N.useReducer(c=>c+1,0);N.useEffect(()=>(xl=()=>t(),()=>{xl=()=>{}}),[]);const n=p.record.getFirstSelection()!==void 0,a=wl(e,"bgMediumContrast"),s=l.jsxs("div",{children:[l.jsx("button",{style:{marginBottom:10},onClick:()=>{p.deleteAllLines()},children:g({en:"clear all presets",zh:""})}),l.jsx(Vf,{allowLoadFromUrl:!1,defaultLoadUrl:"https://miyehn.me/ffxiv-blm-rotation/presets/lines/default.txt",onLoadFn:c=>{c.fileType===Ia.SkillSequencePresets?p.appendFilePresets(c):window.alert("incorrect file type '"+c.fileType+"'")}}),l.jsxs("div",{style:{outline:"1px solid "+a,margin:"10px 0",padding:"10px"},children:[p.getPresetLines().map((c,d)=>l.jsx(BP,{line:c},d)),l.jsx(GP,{enabled:n}),l.jsx("div",{style:{marginTop:16},children:l.jsx(Hl,{fileFormat:Yo.Json,getContentFn:()=>p.serializedPresets(),filename:"presets",displayName:g({en:"download presets to file",zh:""})})})]})]});return l.jsx(kl,{title:g({en:"Skill sequence presets",zh:""}),content:s,defaultShow:!1})}const Ga=4;var ht=(e=>(e.s_Cursor="s_Cursor",e.s_HistoricalCursor="s_HistoricalCursor",e.DamageMark="DamageMark",e.HealingMark="HealingMark",e.AggroMark="AggroMark",e.LucidMark="LucidMark",e.MPTickMark="MPTickMark",e.MeditateTickMark="MeditateTickMark",e.AutoTickMark="AutoTickMark",e.Skill="Skill",e.Marker="Marker",e.WarningMark="WarningMark",e.Buff="Buff",e))(ht||{});const lo=-1;var Jn=(e=>(e.Info="Info",e.Untargetable="Untargetable",e.Buff="Buff",e))(Jn||{});function jP(e){return e.type==="s_Cursor"||e.type==="s_HistoricalCursor"}var Ft,Gi,Po,Zt,Xb,sf,rf,IT,Zr,qb,T0;let zP=(T0=class{constructor(){Ve(this,Zt);J(this,"scale");J(this,"startTime");J(this,"elapsedTime");J(this,"sharedElements");J(this,"slots");J(this,"activeSlotIndex");Ve(this,Ft);Ve(this,Gi);Ve(this,Po);this.scale=.25,this.startTime=0,this.elapsedTime=0,this.sharedElements=[],this.slots=[],this.activeSlotIndex=-1,ke(this,Ft,[]),ke(this,Gi,[]),ke(this,Po,[]),Oe(this,Zt,qb).call(this)}setTimeSegment(t,n){this.startTime=t,this.elapsedTime=n}addElement(t){jP(t)?this.sharedElements.push(t):(console.assert(this.slots.length>0),this.slots[this.activeSlotIndex].elements.push(t))}invalidateLastElement(){if(this.slots.length>0){const t=this.slots[this.activeSlotIndex].elements;for(let n=t.length-1;n>=0;n--){const a=t[n];if(a.type==="Skill"){a.node.tmp_invalid_reasons=[Tt.CastCanceled];return}}}}tryGetElement(t,n){return this.slots[this.activeSlotIndex].elements.find(a=>a.time===t&&a.type===n)}getAllMarkers(){return se(this,Ft)}getUntargetableMarkers(){return se(this,Gi)}getBuffMarkers(){return se(this,Po)}addMarker(t){se(this,Ft).push(t),t.markerType==="Untargetable"?se(this,Gi).push(t):t.markerType==="Buff"&&se(this,Po).push(t),this.drawElements(),Oe(this,Zt,Zr).call(this)}deleteMarker(t){let n=!1;for(let a=0;a<se(this,Ft).length;a++)t===se(this,Ft)[a]&&(se(this,Ft).splice(a,1),this.drawElements(),Oe(this,Zt,Zr).call(this),n=!0);return Oe(this,Zt,sf).call(this),Oe(this,Zt,rf).call(this),n}sortAndRemoveDuplicateMarkers(){se(this,Ft).sort((n,a)=>n.time-a.time);let t=0;for(let n=se(this,Ft).length-1;n>0;n--)Oe(this,Zt,Xb).call(this,se(this,Ft)[n],se(this,Ft)[n-1])&&(se(this,Ft).splice(n,1),t++);return Oe(this,Zt,sf).call(this),Oe(this,Zt,rf).call(this),Oe(this,Zt,Zr).call(this),t}loadCombinedTracksPreset(t,n,a){if(t.fileType!==Ia.MarkerTracksCombined){window.alert("wrong file type '"+t.fileType+"'");return}t.tracks.forEach(s=>{this.loadIndividualTrackPreset(s,s.track,n,a)})}loadIndividualTrackPreset(t,n,a,s){if(t.fileType!==Ia.MarkerTrackIndividual){window.alert("wrong file type '"+t.fileType+"'");return}Oe(this,Zt,IT).call(this,t,n,a,s)}deleteAllMarkers(){const t=se(this,Gi).length>0;ke(this,Ft,[]),ke(this,Gi,[]),ke(this,Po,[]),this.drawElements(),t&&ni(),Oe(this,Zt,Zr).call(this)}addSlotAtIndex(t){if(t<0||t>this.slots.length||this.slots.length+1>Ga){console.error("attempted to add slot at invalid index",t);return}for(let n=Ga-1;n>=t;n--){let a=gt(`gameRecord${n}`);a!==null&&pt(`gameRecord${n+1}`,a),a=gt(`gameTimeInfo${n}`),a!==null&&pt(`gameTimeInfo${n+1}`,a)}this.slots.splice(t,0,{job:"BLM",elements:[]}),this.activeSlotIndex=t,p.setConfigAndRestart(p.gameConfig)}addSlot(){this.addSlotAtIndex(this.slots.length)}removeSlot(t){console.assert(t<this.slots.length);for(let n=t;n<Ga;n++){let a=gt("gameRecord"+(n+1).toString());a!==null&&pt("gameRecord"+n.toString(),a),a=gt("gameTimeInfo"+(n+1).toString()),a!==null&&pt("gameTimeInfo"+n.toString(),a)}this.slots.splice(t,1);for(let n=this.slots.length;n<Ga;n++)oT("gameRecord"+n.toString()),oT("gameTimeInfo"+n.toString());this.activeSlotIndex>=t&&(this.activeSlotIndex=Math.max(0,this.activeSlotIndex-1)),this.loadSlot(this.activeSlotIndex),pt("activeSlotIndex",this.activeSlotIndex.toString())}saveCurrentSlot(t,n,a){pt("gameRecord"+this.activeSlotIndex.toString(),JSON.stringify(t)),pt("gameTimeInfo"+this.activeSlotIndex.toString(),JSON.stringify({countdown:n,elapsedTime:a})),p.gameConfig.savePartialConfig()}loadSlot(t){const n=gt("gameRecord"+t.toString());if(n!==null){for(this.activeSlotIndex=t;this.slots.length<=t;)this.slots.push({job:"BLM",elements:[]});const a=JSON.parse(n);return p.loadBattleRecordFromFile(a),this.slots[t].job=p.game.job,!0}else return!1}reset(){this.startTime=0,this.elapsedTime=0,this.slots.length>0&&(this.slots[this.activeSlotIndex].elements=[]),this.sharedElements=[],this.addElement({type:"s_Cursor",time:0,displayTime:0}),this.addElement({type:"s_HistoricalCursor",time:0,displayTime:0,enabled:!1})}updateElem(t){console.assert(t&&t.type.substring(0,2)==="s_");for(let n=0;n<this.sharedElements.length;n++)if(this.sharedElements[n].type===t.type){this.sharedElements[n]=t;return}console.assert(!1)}setHorizontalScale(t){this.scale=t,this.drawElements()}getAllSlotsTimeInfo(){let t=0,n=0,a=!1;for(let s=0;s<Ga;s++){const c=gt("gameTimeInfo"+s.toString());if(c!==null){const d=JSON.parse(c);t=Math.max(t,d.countdown),n=Math.max(n,d.elapsedTime),a=!0}}return a?{countdown:t,rightMostTime:n}:null}getCanvasWidth(){let t=Math.max(0,this.elapsedTime),n=p.gameConfig.countdown;const a=this.getAllSlotsTimeInfo();return a!==null&&(n=Math.max(n,a.countdown),t=Math.max(t,a.rightMostTime)),se(this,Ft).forEach(c=>{const d=c.time+c.duration;t=Math.max(t,d+n)}),Math.ceil((t+Math.max(0,n)+4)/8)*8*100*this.scale}getCanvasHeight(){const t=this.getNumMarkerTracks();return De.timelineCanvasHeight(t,this.slots.length)}positionFromTime(t){return t*this.scale*100}timeFromPosition(t){return t/(this.scale*100)}drawElements(){Wo(),this.updateTimelineMarkers()}getTrackIndices(){return Array.from(new Set(se(this,Ft).map(t=>t.track))).sort()}updateTimelineMarkers(){Wo()}onClickTimelineAction(t,n){if(t<0||t>=p.record.length)return;p.record.onClickNode(t,n),xl(),td();const a=p.record.selectionStartIndex;a!==void 0?p.displayHistoricalState(-1/0,a):p.displayHistoricalState(-1/0,t)}resizeSelection(t){const n=p.record.selectionStartIndex,a=p.record.selectionEndIndex;if(n!==void 0&&a!==void 0){const s=(p.record.startIsPivot?a:n)+(t?-1:1);s>=0&&s<p.record.length&&this.onClickTimelineAction(s,!0)}}getNumMarkerTracks(){let t=-1,n=!1;for(let a=0;a<se(this,Ft).length;a++)t=Math.max(t,se(this,Ft)[a].track),se(this,Ft)[a].track===lo&&(n=!0);return n?t+2:t+1}duringUntargetable(t){for(let n=0;n<se(this,Gi).length;n++){const a=se(this,Gi)[n],s=a.time,c=a.time+a.duration;if(t>=s&&t<c)return!0}return!1}getTargetableDurationBetween(t,n){const a=function([d,f],[h,m]){const R=[];return d<h&&R.push([d,Math.min(f,h)]),m<f&&R.push([Math.max(m,d),f]),R};let s=[[t,n]];for(let d=0;d<se(this,Gi).length;d++){const f=se(this,Gi)[d],h=f.time,m=f.time+f.duration;let R=[];s.forEach(T=>{R=R.concat(a(T,[h,m]))}),s=R}let c=0;return s.forEach(d=>{c+=d[1]-d[0]}),c}serializedSeparateMarkerTracks(){const t=this.getNumMarkerTracks()-1,n=new Map;for(let s=lo;s<t+1;s++)n.set(s,[]);se(this,Ft).forEach(s=>{const c=n.get(s.track);console.assert(c),c&&(c.push({time:s.time,markerType:s.markerType,duration:s.duration,description:s.description,color:s.color,showText:s.showText}),n.set(s.track,c))});const a=[];return n.forEach((s,c)=>{s.length>0&&a.push({fileType:Ia.MarkerTrackIndividual,track:c,markers:s})}),a}serializedCombinedMarkerTracks(){const t=this.serializedSeparateMarkerTracks();return{fileType:Ia.MarkerTracksCombined,tracks:t}}},Ft=new WeakMap,Gi=new WeakMap,Po=new WeakMap,Zt=new WeakSet,Xb=function(t,n){const a=function(s,c){return Math.abs(s-c)<_n.epsilon};return!(t.markerType!==n.markerType||!a(t.time,n.time)||!a(t.duration,n.duration)||t.color!==n.color||t.track!==n.track||t.showText!==n.showText||t.description!==n.description)},sf=function(){ke(this,Gi,[]),se(this,Ft).forEach(t=>{t.markerType==="Untargetable"&&se(this,Gi).push(t)}),ni()},rf=function(){ke(this,Po,[]),se(this,Ft).forEach(t=>{t.markerType==="Buff"&&(t.description==="Wanderer's Minuet"&&(t.description=H.WanderersMinuet),se(this,Po).push(t))})},IT=function(t,n,a,s){let c=t.markers.map(d=>({time:d.time+a,duration:d.duration,color:d.color,description:d.description,track:d.markerType==="Untargetable"?lo:n,type:"Marker",markerType:d.markerType??"Info",showText:d.showText??!1}));s!==void 0&&(c=c.filter(d=>s===void 0||d.time<=s+_n.epsilon)),ke(this,Ft,se(this,Ft).concat(c)),Oe(this,Zt,sf).call(this),Oe(this,Zt,rf).call(this),Oe(this,Zt,Zr).call(this)},Zr=function(){const t=this.serializedSeparateMarkerTracks();pt("timelineMarkers",JSON.stringify(t))},qb=function(){const t=gt("timelineMarkers");t!==null&&JSON.parse(t).forEach(a=>{Oe(this,Zt,IT).call(this,a,a.track,0)})},T0);function YP(e){return Ca({attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 5 5 L 5 27 L 27 27 L 27 5 Z M 7 7 L 25 7 L 25 25 L 7 25 Z M 9 20 L 9 22 L 23 22 L 23 20 Z"},child:[]}]})(e)}const OE=N.createContext(null);OE.displayName="PanelGroupContext";const sn={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},MS=10,Hs=N.useLayoutEffect,hC=dE.useId,KP=typeof hC=="function"?hC:()=>null;let VP=0;function LS(e=null){const t=KP(),n=N.useRef(e||t||null);return n.current===null&&(n.current=""+VP++),e??n.current}function Zb({children:e,className:t="",collapsedSize:n,collapsible:a,defaultSize:s,forwardedRef:c,id:d,maxSize:f,minSize:h,onCollapse:m,onExpand:R,onResize:T,order:S,style:I,tagName:C="div",..._}){const O=N.useContext(OE);if(O===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:x,getPanelSize:L,getPanelStyle:v,groupId:P,isPanelCollapsed:k,reevaluatePanelConstraints:w,registerPanel:K,resizePanel:ne,unregisterPanel:fe}=O,ue=LS(d),he=N.useRef({callbacks:{onCollapse:m,onExpand:R,onResize:T},constraints:{collapsedSize:n,collapsible:a,defaultSize:s,maxSize:f,minSize:h},id:ue,idIsFromProps:d!==void 0,order:S});N.useRef({didLogMissingDefaultSizeWarning:!1}),Hs(()=>{const{callbacks:q,constraints:Q}=he.current,j={...Q};he.current.id=ue,he.current.idIsFromProps=d!==void 0,he.current.order=S,q.onCollapse=m,q.onExpand=R,q.onResize=T,Q.collapsedSize=n,Q.collapsible=a,Q.defaultSize=s,Q.maxSize=f,Q.minSize=h,(j.collapsedSize!==Q.collapsedSize||j.collapsible!==Q.collapsible||j.maxSize!==Q.maxSize||j.minSize!==Q.minSize)&&w(he.current,j)}),Hs(()=>{const q=he.current;return K(q),()=>{fe(q)}},[S,ue,K,fe]),N.useImperativeHandle(c,()=>({collapse:()=>{y(he.current)},expand:q=>{x(he.current,q)},getId(){return ue},getSize(){return L(he.current)},isCollapsed(){return k(he.current)},isExpanded(){return!k(he.current)},resize:q=>{ne(he.current,q)}}),[y,x,L,k,ue,ne]);const Ee=v(he.current,s);return N.createElement(C,{..._,children:e,className:t,id:ue,style:{...Ee,...I},[sn.groupId]:P,[sn.panel]:"",[sn.panelCollapsible]:a||void 0,[sn.panelId]:ue,[sn.panelSize]:parseFloat(""+Ee.flexGrow).toFixed(1)})}const $b=N.forwardRef((e,t)=>N.createElement(Zb,{...e,forwardedRef:t}));Zb.displayName="Panel";$b.displayName="forwardRef(Panel)";let _T=null,cf=-1,Cl=null;function WP(e,t){if(t){const n=(t&nO)!==0,a=(t&iO)!==0,s=(t&aO)!==0,c=(t&oO)!==0;if(n)return s?"se-resize":c?"ne-resize":"e-resize";if(a)return s?"sw-resize":c?"nw-resize":"w-resize";if(s)return"s-resize";if(c)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function XP(){Cl!==null&&(document.head.removeChild(Cl),_T=null,Cl=null,cf=-1)}function wR(e,t){var n,a;const s=WP(e,t);if(_T!==s){if(_T=s,Cl===null&&(Cl=document.createElement("style"),document.head.appendChild(Cl)),cf>=0){var c;(c=Cl.sheet)===null||c===void 0||c.removeRule(cf)}cf=(n=(a=Cl.sheet)===null||a===void 0?void 0:a.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function Qb(e){return e.type==="keydown"}function Jb(e){return e.type.startsWith("pointer")}function eO(e){return e.type.startsWith("mouse")}function DE(e){if(Jb(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(eO(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function qP(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function ZP(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function $P(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:mC(e),b:mC(t)};let a;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),a=e;tt(a,"Stacking order can only be calculated for elements with a common ancestor");const s={a:EC(fC(n.a)),b:EC(fC(n.b))};if(s.a===s.b){const c=a.childNodes,d={a:n.a.at(-1),b:n.b.at(-1)};let f=c.length;for(;f--;){const h=c[f];if(h===d.a)return 1;if(h===d.b)return-1}}return Math.sign(s.a-s.b)}const QP=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function JP(e){var t;const n=getComputedStyle((t=tO(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function eG(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||JP(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||QP.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function fC(e){let t=e.length;for(;t--;){const n=e[t];if(tt(n,"Missing node"),eG(n))return n}return null}function EC(e){return e&&Number(getComputedStyle(e).zIndex)||0}function mC(e){const t=[];for(;e;)t.push(e),e=tO(e);return t}function tO(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const nO=1,iO=2,aO=4,oO=8,tG=qP()==="coarse";let Ba=[],oc=!1,Is=new Map,yE=new Map;const Ju=new Set;function nG(e,t,n,a,s){var c;const{ownerDocument:d}=t,f={direction:n,element:t,hitAreaMargins:a,setResizeHandlerState:s},h=(c=Is.get(d))!==null&&c!==void 0?c:0;return Is.set(d,h+1),Ju.add(f),Yf(),function(){var R;yE.delete(e),Ju.delete(f);const T=(R=Is.get(d))!==null&&R!==void 0?R:1;if(Is.set(d,T-1),Yf(),T===1&&Is.delete(d),Ba.includes(f)){const S=Ba.indexOf(f);S>=0&&Ba.splice(S,1),HS(),s("up",!0,null)}}}function iG(e){const{target:t}=e,{x:n,y:a}=DE(e);oc=!0,xS({target:t,x:n,y:a}),Yf(),Ba.length>0&&(Kf("down",e),e.preventDefault(),lO(t)||e.stopImmediatePropagation())}function PR(e){const{x:t,y:n}=DE(e);if(oc&&e.buttons===0&&(oc=!1,Kf("up",e)),!oc){const{target:a}=e;xS({target:a,x:t,y:n})}Kf("move",e),HS(),Ba.length>0&&e.preventDefault()}function GR(e){const{target:t}=e,{x:n,y:a}=DE(e);yE.clear(),oc=!1,Ba.length>0&&(e.preventDefault(),lO(t)||e.stopImmediatePropagation()),Kf("up",e),xS({target:t,x:n,y:a}),HS(),Yf()}function lO(e){let t=e;for(;t;){if(t.hasAttribute(sn.resizeHandle))return!0;t=t.parentElement}return!1}function xS({target:e,x:t,y:n}){Ba.splice(0);let a=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(a=e),Ju.forEach(s=>{const{element:c,hitAreaMargins:d}=s,f=c.getBoundingClientRect(),{bottom:h,left:m,right:R,top:T}=f,S=tG?d.coarse:d.fine;if(t>=m-S&&t<=R+S&&n>=T-S&&n<=h+S){if(a!==null&&document.contains(a)&&c!==a&&!c.contains(a)&&!a.contains(c)&&$P(a,c)>0){let C=a,_=!1;for(;C&&!C.contains(c);){if(ZP(C.getBoundingClientRect(),f)){_=!0;break}C=C.parentElement}if(_)return}Ba.push(s)}})}function BR(e,t){yE.set(e,t)}function HS(){let e=!1,t=!1;Ba.forEach(a=>{const{direction:s}=a;s==="horizontal"?e=!0:t=!0});let n=0;yE.forEach(a=>{n|=a}),e&&t?wR("intersection",n):e?wR("horizontal",n):t?wR("vertical",n):XP()}let FR=new AbortController;function Yf(){FR.abort(),FR=new AbortController;const e={capture:!0,signal:FR.signal};Ju.size&&(oc?(Ba.length>0&&Is.forEach((t,n)=>{const{body:a}=n;t>0&&(a.addEventListener("contextmenu",GR,e),a.addEventListener("pointerleave",PR,e),a.addEventListener("pointermove",PR,e))}),window.addEventListener("pointerup",GR,e),window.addEventListener("pointercancel",GR,e)):Is.forEach((t,n)=>{const{body:a}=n;t>0&&(a.addEventListener("pointerdown",iG,e),a.addEventListener("pointermove",PR,e))}))}function Kf(e,t){Ju.forEach(n=>{const{setResizeHandlerState:a}=n,s=Ba.includes(n);a(e,s,t)})}function aG(){const[e,t]=N.useState(0);return N.useCallback(()=>t(n=>n+1),[])}function tt(e,t){if(!e)throw console.error(t),Error(t)}function zs(e,t,n=MS){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function Bo(e,t,n=MS){return zs(e,t,n)===0}function ea(e,t,n){return zs(e,t,n)===0}function oG(e,t,n){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++){const s=e[a],c=t[a];if(!ea(s,c,n))return!1}return!0}function Qr({panelConstraints:e,panelIndex:t,size:n}){const a=e[t];tt(a!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:c,maxSize:d=100,minSize:f=0}=a;if(zs(n,f)<0)if(c){const h=(s+f)/2;zs(n,h)<0?n=s:n=f}else n=f;return n=Math.min(d,n),n=parseFloat(n.toFixed(MS)),n}function Gu({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:a,prevLayout:s,trigger:c}){if(ea(e,0))return t;const d=[...t],[f,h]=a;tt(f!=null,"Invalid first pivot index"),tt(h!=null,"Invalid second pivot index");let m=0;if(c==="keyboard"){{const T=e<0?h:f,S=n[T];tt(S,`Panel constraints not found for index ${T}`);const{collapsedSize:I=0,collapsible:C,minSize:_=0}=S;if(C){const O=t[T];if(tt(O!=null,`Previous layout not found for panel index ${T}`),ea(O,I)){const y=_-O;zs(y,Math.abs(e))>0&&(e=e<0?0-y:y)}}}{const T=e<0?f:h,S=n[T];tt(S,`No panel constraints found for index ${T}`);const{collapsedSize:I=0,collapsible:C,minSize:_=0}=S;if(C){const O=t[T];if(tt(O!=null,`Previous layout not found for panel index ${T}`),ea(O,_)){const y=O-I;zs(y,Math.abs(e))>0&&(e=e<0?0-y:y)}}}}{const T=e<0?1:-1;let S=e<0?h:f,I=0;for(;;){const _=t[S];tt(_!=null,`Previous layout not found for panel index ${S}`);const y=Qr({panelConstraints:n,panelIndex:S,size:100})-_;if(I+=y,S+=T,S<0||S>=n.length)break}const C=Math.min(Math.abs(e),Math.abs(I));e=e<0?0-C:C}{let S=e<0?f:h;for(;S>=0&&S<n.length;){const I=Math.abs(e)-Math.abs(m),C=t[S];tt(C!=null,`Previous layout not found for panel index ${S}`);const _=C-I,O=Qr({panelConstraints:n,panelIndex:S,size:_});if(!ea(C,O)&&(m+=C-O,d[S]=O,m.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?S--:S++}}if(oG(s,d))return s;{const T=e<0?h:f,S=t[T];tt(S!=null,`Previous layout not found for panel index ${T}`);const I=S+m,C=Qr({panelConstraints:n,panelIndex:T,size:I});if(d[T]=C,!ea(C,I)){let _=I-C,y=e<0?h:f;for(;y>=0&&y<n.length;){const x=d[y];tt(x!=null,`Previous layout not found for panel index ${y}`);const L=x+_,v=Qr({panelConstraints:n,panelIndex:y,size:L});if(ea(x,v)||(_-=v-x,d[y]=v),ea(_,0))break;e>0?y--:y++}}}const R=d.reduce((T,S)=>S+T,0);return ea(R,100)?d:s}function lG({layout:e,panelsArray:t,pivotIndices:n}){let a=0,s=100,c=0,d=0;const f=n[0];tt(f!=null,"No pivot index found"),t.forEach((T,S)=>{const{constraints:I}=T,{maxSize:C=100,minSize:_=0}=I;S===f?(a=_,s=C):(c+=_,d+=C)});const h=Math.min(s,100-c),m=Math.max(a,100-d),R=e[f];return{valueMax:h,valueMin:m,valueNow:R}}function ed(e,t=document){return Array.from(t.querySelectorAll(`[${sn.resizeHandleId}][data-panel-group-id="${e}"]`))}function sO(e,t,n=document){const s=ed(e,n).findIndex(c=>c.getAttribute(sn.resizeHandleId)===t);return s??null}function rO(e,t,n){const a=sO(e,t,n);return a!=null?[a,a+1]:[-1,-1]}function cO(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const a=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return a||null}function vE(e,t=document){const n=t.querySelector(`[${sn.resizeHandleId}="${e}"]`);return n||null}function sG(e,t,n,a=document){var s,c,d,f;const h=vE(t,a),m=ed(e,a),R=h?m.indexOf(h):-1,T=(s=(c=n[R])===null||c===void 0?void 0:c.id)!==null&&s!==void 0?s:null,S=(d=(f=n[R+1])===null||f===void 0?void 0:f.id)!==null&&d!==void 0?d:null;return[T,S]}function rG({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:a,panelDataArray:s,panelGroupElement:c,setLayout:d}){N.useRef({didWarnAboutMissingResizeHandle:!1}),Hs(()=>{if(!c)return;const f=ed(n,c);for(let h=0;h<s.length-1;h++){const{valueMax:m,valueMin:R,valueNow:T}=lG({layout:a,panelsArray:s,pivotIndices:[h,h+1]}),S=f[h];if(S!=null){const I=s[h];tt(I,`No panel data found for index "${h}"`),S.setAttribute("aria-controls",I.id),S.setAttribute("aria-valuemax",""+Math.round(m)),S.setAttribute("aria-valuemin",""+Math.round(R)),S.setAttribute("aria-valuenow",T!=null?""+Math.round(T):"")}}return()=>{f.forEach((h,m)=>{h.removeAttribute("aria-controls"),h.removeAttribute("aria-valuemax"),h.removeAttribute("aria-valuemin"),h.removeAttribute("aria-valuenow")})}},[n,a,s,c]),N.useEffect(()=>{if(!c)return;const f=t.current;tt(f,"Eager values not found");const{panelDataArray:h}=f,m=cO(n,c);tt(m!=null,`No group found for id "${n}"`);const R=ed(n,c);tt(R,`No resize handles found for group id "${n}"`);const T=R.map(S=>{const I=S.getAttribute(sn.resizeHandleId);tt(I,"Resize handle element has no handle id attribute");const[C,_]=sG(n,I,h,c);if(C==null||_==null)return()=>{};const O=y=>{if(!y.defaultPrevented)switch(y.key){case"Enter":{y.preventDefault();const x=h.findIndex(L=>L.id===C);if(x>=0){const L=h[x];tt(L,`No panel data found for index ${x}`);const v=a[x],{collapsedSize:P=0,collapsible:k,minSize:w=0}=L.constraints;if(v!=null&&k){const K=Gu({delta:ea(v,P)?w-P:P-v,initialLayout:a,panelConstraints:h.map(ne=>ne.constraints),pivotIndices:rO(n,I,c),prevLayout:a,trigger:"keyboard"});a!==K&&d(K)}}break}}};return S.addEventListener("keydown",O),()=>{S.removeEventListener("keydown",O)}});return()=>{T.forEach(S=>S())}},[c,e,t,n,a,s,d])}function AC(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function uO(e,t){const n=e==="horizontal",{x:a,y:s}=DE(t);return n?a:s}function cG(e,t,n,a,s){const c=n==="horizontal",d=vE(t,s);tt(d,`No resize handle element found for id "${t}"`);const f=d.getAttribute(sn.groupId);tt(f,"Resize handle element has no group id attribute");let{initialCursorPosition:h}=a;const m=uO(n,e),R=cO(f,s);tt(R,`No group element found for id "${f}"`);const T=R.getBoundingClientRect(),S=c?T.width:T.height;return(m-h)/S*100}function uG(e,t,n,a,s,c){if(Qb(e)){const d=n==="horizontal";let f=0;e.shiftKey?f=100:s!=null?f=s:f=10;let h=0;switch(e.key){case"ArrowDown":h=d?0:f;break;case"ArrowLeft":h=d?-f:0;break;case"ArrowRight":h=d?f:0;break;case"ArrowUp":h=d?0:-f;break;case"End":h=100;break;case"Home":h=-100;break}return h}else return a==null?0:cG(e,t,n,a,c)}function dG({panelDataArray:e}){const t=Array(e.length),n=e.map(c=>c.constraints);let a=0,s=100;for(let c=0;c<e.length;c++){const d=n[c];tt(d,`Panel constraints not found for index ${c}`);const{defaultSize:f}=d;f!=null&&(a++,t[c]=f,s-=f)}for(let c=0;c<e.length;c++){const d=n[c];tt(d,`Panel constraints not found for index ${c}`);const{defaultSize:f}=d;if(f!=null)continue;const h=e.length-a,m=s/h;a++,t[c]=m,s-=m}return t}function Vr(e,t,n){t.forEach((a,s)=>{const c=e[s];tt(c,`Panel data not found for index ${s}`);const{callbacks:d,constraints:f,id:h}=c,{collapsedSize:m=0,collapsible:R}=f,T=n[h];if(T==null||a!==T){n[h]=a;const{onCollapse:S,onExpand:I,onResize:C}=d;C&&C(a,T),R&&(S||I)&&(I&&(T==null||Bo(T,m))&&!Bo(a,m)&&I(),S&&(T==null||!Bo(T,m))&&Bo(a,m)&&S())}})}function Zh(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function hG({defaultSize:e,dragState:t,layout:n,panelData:a,panelIndex:s,precision:c=3}){const d=n[s];let f;return d==null?f=e!=null?e.toPrecision(c):"1":a.length===1?f="1":f=d.toPrecision(c),{flexBasis:0,flexGrow:f,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function fG(e,t=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...s)},t)}}function RC(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function dO(e){return`react-resizable-panels:${e}`}function hO(e){return e.map(t=>{const{constraints:n,id:a,idIsFromProps:s,order:c}=t;return s?a:c?`${c}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function fO(e,t){try{const n=dO(e),a=t.getItem(n);if(a){const s=JSON.parse(a);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function EG(e,t,n){var a,s;const c=(a=fO(e,n))!==null&&a!==void 0?a:{},d=hO(t);return(s=c[d])!==null&&s!==void 0?s:null}function mG(e,t,n,a,s){var c;const d=dO(e),f=hO(t),h=(c=fO(e,s))!==null&&c!==void 0?c:{};h[f]={expandToSizes:Object.fromEntries(n.entries()),layout:a};try{s.setItem(d,JSON.stringify(h))}catch(m){console.error(m)}}function TC({layout:e,panelConstraints:t}){const n=[...e],a=n.reduce((c,d)=>c+d,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(c=>`${c}%`).join(", ")}`);if(!ea(a,100)&&n.length>0)for(let c=0;c<t.length;c++){const d=n[c];tt(d!=null,`No layout data found for index ${c}`);const f=100/a*d;n[c]=f}let s=0;for(let c=0;c<t.length;c++){const d=n[c];tt(d!=null,`No layout data found for index ${c}`);const f=Qr({panelConstraints:t,panelIndex:c,size:d});d!=f&&(s+=d-f,n[c]=f)}if(!ea(s,0))for(let c=0;c<t.length;c++){const d=n[c];tt(d!=null,`No layout data found for index ${c}`);const f=d+s,h=Qr({panelConstraints:t,panelIndex:c,size:f});if(d!==h&&(s-=h-d,n[c]=h,ea(s,0)))break}return n}const AG=100,Bu={getItem:e=>(RC(Bu),Bu.getItem(e)),setItem:(e,t)=>{RC(Bu),Bu.setItem(e,t)}},SC={};function EO({autoSaveId:e=null,children:t,className:n="",direction:a,forwardedRef:s,id:c=null,onLayout:d=null,keyboardResizeBy:f=null,storage:h=Bu,style:m,tagName:R="div",...T}){const S=LS(c),I=N.useRef(null),[C,_]=N.useState(null),[O,y]=N.useState([]),x=aG(),L=N.useRef({}),v=N.useRef(new Map),P=N.useRef(0),k=N.useRef({autoSaveId:e,direction:a,dragState:C,id:S,keyboardResizeBy:f,onLayout:d,storage:h}),w=N.useRef({layout:O,panelDataArray:[],panelDataArrayChanged:!1});N.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),N.useImperativeHandle(s,()=>({getId:()=>k.current.id,getLayout:()=>{const{layout:B}=w.current;return B},setLayout:B=>{const{onLayout:W}=k.current,{layout:re,panelDataArray:oe}=w.current,Ae=TC({layout:B,panelConstraints:oe.map(me=>me.constraints)});AC(re,Ae)||(y(Ae),w.current.layout=Ae,W&&W(Ae),Vr(oe,Ae,L.current))}}),[]),Hs(()=>{k.current.autoSaveId=e,k.current.direction=a,k.current.dragState=C,k.current.id=S,k.current.onLayout=d,k.current.storage=h}),rG({committedValuesRef:k,eagerValuesRef:w,groupId:S,layout:O,panelDataArray:w.current.panelDataArray,setLayout:y,panelGroupElement:I.current}),N.useEffect(()=>{const{panelDataArray:B}=w.current;if(e){if(O.length===0||O.length!==B.length)return;let W=SC[e];W==null&&(W=fG(mG,AG),SC[e]=W);const re=[...B],oe=new Map(v.current);W(e,re,oe,O,h)}},[e,O,h]),N.useEffect(()=>{});const K=N.useCallback(B=>{const{onLayout:W}=k.current,{layout:re,panelDataArray:oe}=w.current;if(B.constraints.collapsible){const Ae=oe.map(Ne=>Ne.constraints),{collapsedSize:me=0,panelSize:Ce,pivotIndices:Be}=As(oe,B,re);if(tt(Ce!=null,`Panel size not found for panel "${B.id}"`),!Bo(Ce,me)){v.current.set(B.id,Ce);const pe=$r(oe,B)===oe.length-1?Ce-me:me-Ce,le=Gu({delta:pe,initialLayout:re,panelConstraints:Ae,pivotIndices:Be,prevLayout:re,trigger:"imperative-api"});Zh(re,le)||(y(le),w.current.layout=le,W&&W(le),Vr(oe,le,L.current))}}},[]),ne=N.useCallback((B,W)=>{const{onLayout:re}=k.current,{layout:oe,panelDataArray:Ae}=w.current;if(B.constraints.collapsible){const me=Ae.map(ge=>ge.constraints),{collapsedSize:Ce=0,panelSize:Be=0,minSize:Ne=0,pivotIndices:pe}=As(Ae,B,oe),le=W??Ne;if(Bo(Be,Ce)){const ge=v.current.get(B.id),Ie=ge!=null&&ge>=le?ge:le,ye=$r(Ae,B)===Ae.length-1?Be-Ie:Ie-Be,Ue=Gu({delta:ye,initialLayout:oe,panelConstraints:me,pivotIndices:pe,prevLayout:oe,trigger:"imperative-api"});Zh(oe,Ue)||(y(Ue),w.current.layout=Ue,re&&re(Ue),Vr(Ae,Ue,L.current))}}},[]),fe=N.useCallback(B=>{const{layout:W,panelDataArray:re}=w.current,{panelSize:oe}=As(re,B,W);return tt(oe!=null,`Panel size not found for panel "${B.id}"`),oe},[]),ue=N.useCallback((B,W)=>{const{panelDataArray:re}=w.current,oe=$r(re,B);return hG({defaultSize:W,dragState:C,layout:O,panelData:re,panelIndex:oe})},[C,O]),he=N.useCallback(B=>{const{layout:W,panelDataArray:re}=w.current,{collapsedSize:oe=0,collapsible:Ae,panelSize:me}=As(re,B,W);return tt(me!=null,`Panel size not found for panel "${B.id}"`),Ae===!0&&Bo(me,oe)},[]),Ee=N.useCallback(B=>{const{layout:W,panelDataArray:re}=w.current,{collapsedSize:oe=0,collapsible:Ae,panelSize:me}=As(re,B,W);return tt(me!=null,`Panel size not found for panel "${B.id}"`),!Ae||zs(me,oe)>0},[]),q=N.useCallback(B=>{const{panelDataArray:W}=w.current;W.push(B),W.sort((re,oe)=>{const Ae=re.order,me=oe.order;return Ae==null&&me==null?0:Ae==null?-1:me==null?1:Ae-me}),w.current.panelDataArrayChanged=!0,x()},[x]);Hs(()=>{if(w.current.panelDataArrayChanged){w.current.panelDataArrayChanged=!1;const{autoSaveId:B,onLayout:W,storage:re}=k.current,{layout:oe,panelDataArray:Ae}=w.current;let me=null;if(B){const Be=EG(B,Ae,re);Be&&(v.current=new Map(Object.entries(Be.expandToSizes)),me=Be.layout)}me==null&&(me=dG({panelDataArray:Ae}));const Ce=TC({layout:me,panelConstraints:Ae.map(Be=>Be.constraints)});AC(oe,Ce)||(y(Ce),w.current.layout=Ce,W&&W(Ce),Vr(Ae,Ce,L.current))}}),Hs(()=>{const B=w.current;return()=>{B.layout=[]}},[]);const Q=N.useCallback(B=>{let W=!1;const re=I.current;return re&&window.getComputedStyle(re,null).getPropertyValue("direction")==="rtl"&&(W=!0),function(Ae){Ae.preventDefault();const me=I.current;if(!me)return()=>null;const{direction:Ce,dragState:Be,id:Ne,keyboardResizeBy:pe,onLayout:le}=k.current,{layout:ge,panelDataArray:Ie}=w.current,{initialLayout:be}=Be??{},ye=rO(Ne,B,me);let Ue=uG(Ae,B,Ce,Be,pe,me);const Je=Ce==="horizontal";Je&&W&&(Ue=-Ue);const It=Ie.map(ar=>ar.constraints),nn=Gu({delta:Ue,initialLayout:be??ge,panelConstraints:It,pivotIndices:ye,prevLayout:ge,trigger:Qb(Ae)?"keyboard":"mouse-or-touch"}),$l=!Zh(ge,nn);(Jb(Ae)||eO(Ae))&&P.current!=Ue&&(P.current=Ue,!$l&&Ue!==0?Je?BR(B,Ue<0?nO:iO):BR(B,Ue<0?aO:oO):BR(B,0)),$l&&(y(nn),w.current.layout=nn,le&&le(nn),Vr(Ie,nn,L.current))}},[]),j=N.useCallback((B,W)=>{const{onLayout:re}=k.current,{layout:oe,panelDataArray:Ae}=w.current,me=Ae.map(ge=>ge.constraints),{panelSize:Ce,pivotIndices:Be}=As(Ae,B,oe);tt(Ce!=null,`Panel size not found for panel "${B.id}"`);const pe=$r(Ae,B)===Ae.length-1?Ce-W:W-Ce,le=Gu({delta:pe,initialLayout:oe,panelConstraints:me,pivotIndices:Be,prevLayout:oe,trigger:"imperative-api"});Zh(oe,le)||(y(le),w.current.layout=le,re&&re(le),Vr(Ae,le,L.current))},[]),G=N.useCallback((B,W)=>{const{layout:re,panelDataArray:oe}=w.current,{collapsedSize:Ae=0,collapsible:me}=W,{collapsedSize:Ce=0,collapsible:Be,maxSize:Ne=100,minSize:pe=0}=B.constraints,{panelSize:le}=As(oe,B,re);le!=null&&(me&&Be&&Bo(le,Ae)?Bo(Ae,Ce)||j(B,Ce):le<pe?j(B,pe):le>Ne&&j(B,Ne))},[j]),Z=N.useCallback((B,W)=>{const{direction:re}=k.current,{layout:oe}=w.current;if(!I.current)return;const Ae=vE(B,I.current);tt(Ae,`Drag handle element not found for id "${B}"`);const me=uO(re,W);_({dragHandleId:B,dragHandleRect:Ae.getBoundingClientRect(),initialCursorPosition:me,initialLayout:oe})},[]),te=N.useCallback(()=>{_(null)},[]),D=N.useCallback(B=>{const{panelDataArray:W}=w.current,re=$r(W,B);re>=0&&(W.splice(re,1),delete L.current[B.id],w.current.panelDataArrayChanged=!0,x())},[x]),F=N.useMemo(()=>({collapsePanel:K,direction:a,dragState:C,expandPanel:ne,getPanelSize:fe,getPanelStyle:ue,groupId:S,isPanelCollapsed:he,isPanelExpanded:Ee,reevaluatePanelConstraints:G,registerPanel:q,registerResizeHandle:Q,resizePanel:j,startDragging:Z,stopDragging:te,unregisterPanel:D,panelGroupElement:I.current}),[K,C,a,ne,fe,ue,S,he,Ee,G,q,Q,j,Z,te,D]),Y={display:"flex",flexDirection:a==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return N.createElement(OE.Provider,{value:F},N.createElement(R,{...T,children:t,className:n,id:c,ref:I,style:{...Y,...m},[sn.group]:"",[sn.groupDirection]:a,[sn.groupId]:S}))}const mO=N.forwardRef((e,t)=>N.createElement(EO,{...e,forwardedRef:t}));EO.displayName="PanelGroup";mO.displayName="forwardRef(PanelGroup)";function $r(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function As(e,t,n){const a=$r(e,t),c=a===e.length-1?[a-1,a]:[a,a+1],d=n[a];return{...t.constraints,panelSize:d,pivotIndices:c}}function RG({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:a}){N.useEffect(()=>{if(e||n==null||a==null)return;const s=vE(t,a);if(s==null)return;const c=d=>{if(!d.defaultPrevented)switch(d.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{d.preventDefault(),n(d);break}case"F6":{d.preventDefault();const f=s.getAttribute(sn.groupId);tt(f,`No group element found for id "${f}"`);const h=ed(f,a),m=sO(f,t,a);tt(m!==null,`No resize element found for id "${t}"`);const R=d.shiftKey?m>0?m-1:h.length-1:m+1<h.length?m+1:0;h[R].focus();break}}};return s.addEventListener("keydown",c),()=>{s.removeEventListener("keydown",c)}},[a,e,t,n])}function AO({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:a,id:s,onBlur:c,onClick:d,onDragging:f,onFocus:h,onPointerDown:m,onPointerUp:R,style:T={},tabIndex:S=0,tagName:I="div",...C}){var _,O;const y=N.useRef(null),x=N.useRef({onClick:d,onDragging:f,onPointerDown:m,onPointerUp:R});N.useEffect(()=>{x.current.onClick=d,x.current.onDragging=f,x.current.onPointerDown=m,x.current.onPointerUp=R});const L=N.useContext(OE);if(L===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:v,groupId:P,registerResizeHandle:k,startDragging:w,stopDragging:K,panelGroupElement:ne}=L,fe=LS(s),[ue,he]=N.useState("inactive"),[Ee,q]=N.useState(!1),[Q,j]=N.useState(null),G=N.useRef({state:ue});Hs(()=>{G.current.state=ue}),N.useEffect(()=>{if(n)j(null);else{const F=k(fe);j(()=>F)}},[n,fe,k]);const Z=(_=a==null?void 0:a.coarse)!==null&&_!==void 0?_:15,te=(O=a==null?void 0:a.fine)!==null&&O!==void 0?O:5;N.useEffect(()=>{if(n||Q==null)return;const F=y.current;tt(F,"Element ref not attached");let Y=!1;return nG(fe,F,v,{coarse:Z,fine:te},(W,re,oe)=>{if(!re){he("inactive");return}switch(W){case"down":{he("drag"),Y=!1,tt(oe,'Expected event to be defined for "down" action'),w(fe,oe);const{onDragging:Ae,onPointerDown:me}=x.current;Ae==null||Ae(!0),me==null||me();break}case"move":{const{state:Ae}=G.current;Y=!0,Ae!=="drag"&&he("hover"),tt(oe,'Expected event to be defined for "move" action'),Q(oe);break}case"up":{he("hover"),K();const{onClick:Ae,onDragging:me,onPointerUp:Ce}=x.current;me==null||me(!1),Ce==null||Ce(),Y||Ae==null||Ae();break}}})},[Z,v,n,te,k,fe,Q,w,K]),RG({disabled:n,handleId:fe,resizeHandler:Q,panelGroupElement:ne});const D={touchAction:"none",userSelect:"none"};return N.createElement(I,{...C,children:e,className:t,id:s,onBlur:()=>{q(!1),c==null||c()},onFocus:()=>{q(!0),h==null||h()},ref:y,role:"separator",style:{...D,...T},tabIndex:S,[sn.groupDirection]:v,[sn.groupId]:P,[sn.resizeHandle]:"",[sn.resizeHandleActive]:ue==="drag"?"pointer":Ee?"keyboard":void 0,[sn.resizeHandleEnabled]:!n,[sn.resizeHandleId]:fe,[sn.resizeHandleState]:ue})}AO.displayName="PanelResizeHandle";const RO=navigator.userAgent.indexOf("Firefox")>=0,uo="XIVShell Defaults, , sans-serif",TG=3,De={rulerHeight:30,trackHeight:14,slotPaddingTop:4,damageMarkerHeight:8,skillButtonHeight:28,buffCoverHeight:4,slotPaddingBottom:4,renderSlotHeight:()=>De.slotPaddingTop+De.damageMarkerHeight+De.skillButtonHeight*1.5+De.buffCoverHeight*TG+De.slotPaddingBottom,timelineCanvasHeight:(e,t)=>{let n=De.rulerHeight;return n+=De.trackHeight*e,n+=De.renderSlotHeight()*t,t<Ga&&(n+=De.addSlotButtonHeight),n},leftBufferWidth:20,addSlotButtonHeight:20},SG={drawMarkers:!0,drawDamageMarks:!0,drawHealingMarks:!0,drawMPTickMarks:!0,drawBuffIndicators:!0};function IG(e){const t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});return window.URL.createObjectURL(t)}function _G(e){var a;let t="";(a=e.meta)==null||a.forEach(s=>{t+="#"+s.toString()+`
`}),e.body.forEach(s=>{for(let c=0;c<s.length;c++)t+=s[c].toString(),c<s.length-1&&(t+=",");t+=`
`});const n=new Blob([t],{type:"text/csv;charset=utf-8"});return window.URL.createObjectURL(n)}var Yo=(e=>(e.Json="JSON",e.Csv="CSV",e.Png="PNG",e))(Yo||{});function Hl(e){var c;const[t,n]=N.useState({jsonContent:{},csvContent:{body:[]},pngContent:void 0}),a=()=>{const d=e.getContentFn();e.fileFormat==="JSON"?n({jsonContent:d}):e.fileFormat==="CSV"?n({csvContent:d}):e.fileFormat==="PNG"?n({pngContent:d}):console.assert(!1)};let s="";return e.fileFormat==="JSON"?s=IG(t.jsonContent):e.fileFormat==="CSV"?s=_G(t.csvContent):e.fileFormat==="PNG"?s=((c=t.pngContent)==null?void 0:c.toDataURL())??"":console.assert(!1),l.jsx("a",{style:{color:Lt().fileDownload,marginRight:6},href:s,download:e.filename,onClick:()=>a(),onContextMenu:()=>a(),children:`[${e.displayName===void 0?"download":e.displayName}]`})}function gG(e,t=n=>{console.log(n)}){const n=new FileReader;n.onload=function(a){var d,f;const s=((f=(d=a.target)==null?void 0:d.result)==null?void 0:f.toString())??"";let c;try{c=JSON.parse(s)}catch(h){window.alert(g({en:"Parse error! Are you sure this is the correct file? This tool only reads text files in JSON format.",zh:"- JSON"})),console.error(h)}t(c)},n.readAsText(e,"UTF-8")}const it={positionFromTimeAndScale:function(e,t){return e*t*100},timeFromPositionAndScale:function(e,t){return e/(t*100)},displayTime:function(e,t){const n=Math.abs(e),a=Math.floor(n/60),s=n-60*a;return(e<0?"-":"")+a.toString()+":"+(s+_n.epsilon<10?"0":"")+s.toFixed(t).toString()}},pG=function(e){console.log("[asyncFetch] some error occurred")},IC=new Map;function TO(e,t,n=pG){const a=IC.get(e);if(a){t(a);return}const s=new XMLHttpRequest;s.addEventListener("error",n),s.addEventListener("load",c=>{t(s.responseText),IC.set(e,s.responseText)}),s.open("GET",e),s.send()}function ao(e){const t=e.trim();let n=1;e[0]==="-"&&(n=-1,e=e.substring(1));const a=t.indexOf(":");if(a<0)return parseFloat(t);const s=parseInt(t.substring(0,a)),c=parseFloat(t.substring(a+1));return n*(s*60+c)}function Ys(e){return l.jsx("div",{className:"clickable",onClick:e.onClickFn,style:e.style,children:e.content})}function NG(e){const n={position:"relative",display:"inline-block",verticalAlign:"top",border:"1px solid "+Lt().bgHighContrast,borderRadius:4,height:8,top:e.offsetY,width:e.width},a={background:`${e.backgroundColor}`,height:"100%",borderRadius:"inherit",width:`${e.progress*100}%`};return l.jsx("div",{style:n,children:l.jsx("div",{style:a})})}const Jr=26;function SO(e){const t=Jr-2,[n,a]=di.useState(void 0);N.useEffect(()=>{let h=e.defaultSelectedIndex;const m=gt("tabs: "+e.uniqueName);m!==null&&(m==="none"?h=void 0:h=parseInt(m)),a(h)},[e.defaultSelectedIndex,e.uniqueName]);const s=Lt(),c=function(h){const R="1px solid "+(h===n?s.bgHighContrast:s.bgMediumContrast),T="1px solid "+s.background;let S=R;(h===n||n===void 0)&&(S=T);const I=h===n?R:T;let C=T,_=T;return h===n?(C=R,_=R):h>0&&(n===void 0||n+1!==h)&&(C=R),{margin:0,display:"inline-block",boxSizing:"border-box",padding:"0 12px",borderBottom:S,borderTop:I,borderLeft:C,borderRight:_,lineHeight:`${t}px`,color:h===n?s.emphasis:s.text,cursor:e.collapsible||h!==n?"pointer":"default"}},d=[],f=[];for(let h=0;h<e.content.length;h++){const m=e.content[h],R=h===n;d.push(l.jsx("span",{style:c(h),onClick:()=>{let S=n;R?e.collapsible&&(S=void 0):S=h,a(S),pt("tabs: "+e.uniqueName,S===void 0?"none":`${S}`)},children:m.titleNode},h));const T={display:R?"block":"none"};e.maxWidth!==void 0&&(T.maxWidth=e.maxWidth),f.push(l.jsx("div",{style:T,children:m.contentNode},h))}return e.collapsible&&n!==void 0&&d.push(l.jsx("span",{onClick:()=>{a(void 0),pt("tabs: "+e.uniqueName,"none")},children:l.jsx(YP,{style:{marginLeft:16,fontSize:14,cursor:"pointer",position:"relative",top:3}})},d.length)),l.jsxs("div",{style:{position:"relative",...e.style},children:[l.jsx("div",{children:d}),l.jsx("div",{className:e.scrollable?"visibleScrollbar":void 0,style:{display:n===void 0?"none":"block",height:e.height-Jr,boxSizing:"border-box",padding:`10px ${RO?15:5}px`,overflowY:e.scrollable?"scroll":"hidden"},children:f})]})}function kS(e){const t=Lt(),n=[];for(let a=0;a<e.children.length;a++){const s=e.children[a],c=a<e.children.length-1?e.children[a+1]:void 0;if(n.push(l.jsxs($b,{className:s.showScrollbar?"visibleScrollbar":"invisibleScrollbar",defaultSize:s.defaultSize,minSize:s.minSize??20,style:{border:s.fullBorder===!0?`1px solid ${t.bgMediumContrast}`:void 0,boxSizing:"border-box",height:e.contentHeight,overflowY:"scroll"},children:[s.title?l.jsx("div",{style:{marginBottom:10},children:l.jsx("b",{children:s.title})}):void 0,s.content]},`column-${a}`)),a<e.children.length-1){const f=s.fullBorder===!0||c!==void 0&&c.fullBorder===!0?{margin:"0 5px"}:{borderLeft:"1px solid "+t.bgMediumContrast,margin:"0 15px 0 10px"};n.push(l.jsx(AO,{style:f},`divider-${a}`))}}return l.jsx(mO,{direction:"horizontal",children:n})}function Kt(e){var d;const t=f=>{e.onChange&&e.onChange(f.target.value)},n=Lt(),a=e.fullWidthInput?void 0:e.width??5,s={color:((d=e.style)==null?void 0:d.color)??e.componentColor??n.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+(e.componentColor??n.text),width:e.fullWidthInput?"100%":void 0},c=e.style??{};return l.jsxs("div",{style:{...c,color:e.componentColor},children:[l.jsx("span",{children:e.description}),l.jsx("input",{style:s,size:a,type:"text",value:e.defaultValue,onChange:t,onKeyDown:f=>f.stopPropagation(),autoFocus:e.autoFocus,placeholder:e.placeholder})]})}function CG(e){const t=e.description??"default description",[n,a]=N.useState(e.defaultValue??""),s=c=>{a(c.target.value),e.onChange&&e.onChange(c.target.value),pt("slider: "+e.uniqueName,c.target.value)};return N.useEffect(()=>{let c=n;const d=gt("slider: "+e.uniqueName);d!==null&&(c=d,a(d)),e.onChange&&e.onChange(c)},[]),l.jsxs("div",{style:{display:"inline-block",...e.style},children:[l.jsx("span",{children:t??""}),l.jsx("input",{size:10,type:"range",value:n,min:.05,max:1,step:.025,onChange:s,style:{position:"relative",outline:"none"}})]})}function IO(e){const t=gt(`radio: ${e.uniqueName}`)??e.selected??e.options[0][0],[n,a]=N.useState(t);N.useEffect(()=>{e.selected!==void 0&&(a(e.selected),pt(`radio: ${e.uniqueName}`,e.selected),e.onChange(e.selected))},[e.selected]);const s={position:"relative",top:3,marginRight:"0.25em"},c=e.options.map(([d,f])=>l.jsxs("div",{style:s,children:[l.jsx("input",{type:"radio",id:d,name:e.uniqueName,value:d,checked:n===d,onChange:()=>{a(d),pt(`radio: ${e.uniqueName}`,d),e.onChange(d)}}),l.jsxs("label",{htmlFor:d,style:{verticalAlign:"top"},children:[" ",f]})]},d));return l.jsx("div",{style:e.containerStyle,children:c})}function Fu(e){const[t,n]=N.useState(!1);return N.useEffect(()=>{let a=e.defaultChecked??!0;const s=gt("checked: "+e.uniqueName);s!==null&&(a=parseInt(s)>0),n(a),e.onChange(a)},[]),l.jsxs("div",{style:{marginBottom:5},children:[l.jsx("input",{className:"shellCheckbox",type:"checkbox",onChange:a=>{const s=a.currentTarget.checked;n(s),pt("checked: "+e.uniqueName,s?"1":"0"),e.onChange(s)},checked:t}),l.jsx("span",{children:e.label})]})}function kl(e){const[t,n]=N.useState(e.defaultShow??!1),a=e.autoIndent??!0,s=()=>{const d=!t;n(d),e.onExpand&&d&&e.onExpand(),e.onCollapse&&!d&&e.onCollapse(),pt("exp: "+e.title,(d?1:0).toString())};N.useEffect(()=>{const d=gt("exp: "+e.title);d!==null&&n(parseInt(d)===1)},[]);const c=a?{margin:10,paddingLeft:6,marginBottom:20}:{};return l.jsxs("div",{style:e.noMargin?{}:{marginTop:10,marginBottom:10},children:[l.jsx(Ys,{content:l.jsxs("span",{children:[l.jsx("span",{children:t?"- ":"+ "}),e.titleNode??e.title]}),onClickFn:s}),l.jsx("div",{style:{position:"relative",display:t?"block":"none",marginTop:e.titleBodyGap},children:l.jsx("div",{style:c,children:e.content})})]})}function Vf(e){const t=N.useRef(null);let n=e.defaultLoadUrl??"";const a=h=>{h.target&&(n=h.target.value)},s=()=>{const h=t.current;if(h&&h.files&&h.files.length>0){const m=h.files[0];gG(m,R=>e.onLoadFn(R)),h.value=""}},c=()=>{const h=function(m){console.log("some error occurred")};TO(n,m=>{try{const R=JSON.parse(m);e.onLoadFn(R)}catch{h()}},m=>{h()})},d=Lt(),f={color:d.text,background:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+d.text,width:"30em"};return l.jsxs("div",{children:[l.jsxs("div",{children:[l.jsx("span",{children:e.label??g({en:"Load from file: ",zh:""})}),l.jsx("input",{style:{width:"110px",color:"transparent"},type:"file",ref:t,onChange:s})]}),e.allowLoadFromUrl?l.jsxs("form",{children:[l.jsx("span",{children:g({en:"Load from URL: ",zh:"URL"})}),l.jsx("input",{defaultValue:n,style:f,onChange:a}),l.jsx("span",{children:" "}),l.jsx("button",{type:"submit",onClick:h=>{c(),h.preventDefault()},children:g({en:"load",zh:""})})]}):void 0]})}function Fi(e){const t=Lt();return l.jsx("span",{style:{fontSize:11,border:"1px solid "+t.bgHighContrast,borderRadius:2,padding:"1px 4px",background:t.bgLowContrast},children:e.text})}const bG=100;function Xe(e){const n={display:"inline-block",position:"relative",width:12,height:12,lineHeight:1,cursor:"help",background:Lt().bgHighContrast,borderRadius:6,textAlign:"center",verticalAlign:"middle"},a=N.useRef(0),[s,c]=N.useState(!1);return l.jsxs(kb,{delay:0,open:s,children:[l.jsx("span",{id:`help-${e.topic}`,className:"help-icon global-help-tooltip",style:n,"data-tooltip-offset":4,onMouseEnter:()=>{const d=Date.now();d-a.current>bG&&c(!0),a.current=d},onMouseLeave:()=>c(!1),children:l.jsx("span",{style:{position:"relative",top:-1,color:"white"},children:"?"})}),l.jsx(Bb,{container:e.container??document.getElementById("globalHelpTooltipAnchor"),children:l.jsx(jb,{className:"tooltip-positioner",anchor:document.getElementById(`help-${e.topic}`),children:l.jsx(zb,{className:"help-tooltip tooltip",children:e.content})})})]})}const Wf="3f";let td=()=>{},ni=()=>({isValid:!1,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0}),ju=e=>{e()};const _O=N.createContext(e=>({drop:t=>{},setSelected:t=>{}})),ks=e=>({borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"}),lc={width:"1.5%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},gl={width:"12%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},gO={width:"86.5%",textAlign:"left",paddingLeft:"0.3em"},pO={width:"100%",height:"1.6em",userSelect:"none",outline:"none"},NO=e=>({borderTopWidth:"4px",borderTopStyle:"solid",borderColor:e.dropTarget});function gT(e){return(e??0)+1}function OG(e){const t=Lt();let n=e.index%2===1?t.timelineEditor.bgAlternateRow:"transparent";e.isSelected&&(n="rgba(151,111,246,0.25)"),e.recordIsDirty&&e.isSelected&&(n=t.editingValid+Wf);let a=g({en:"(other)",zh:""});if(e.node.info.type===Ze.Skill){const T=e.node.info.targetCount>1?g({en:` (${e.node.info.targetCount} targets)`,zh:`${e.node.info.targetCount}`}):"";a=e.node.info.skillName?ba(e.node.info.skillName)+T:g({en:"(unknown skill)",zh:""})}else if(e.node.info.type===Ze.Wait)a=g({en:"(wait for "+e.node.info.waitDuration.toFixed(3)+"s)",zh:""+e.node.info.waitDuration.toFixed(3)+""});else if(e.node.info.type===Ze.JumpToTimestamp)a=g({en:"(jump to time "+it.displayTime(e.node.info.targetTime,3)+")",zh:" "+it.displayTime(e.node.info.targetTime,3)+""});else if(e.node.info.type===Ze.WaitForMP)a=g({en:"(wait until MP/lucid tick)",zh:"/"});else if(e.node.info.type===Ze.SetResourceEnabled){const T=$e(e.node.info.buffName);a=g({en:"(toggle resource: "+T+")",zh:"BUFF"+T+""})}else e.node.info.type===Ze.Unknown&&(a=e.node.info.skillName);const s=l.jsxs("td",{style:{...gO,...ks(t)},children:[e.isInvalid?l.jsx("span",{style:{marginRight:6,padding:"0 4px",backgroundColor:t.editingInvalid+Wf},children:""}):void 0,l.jsx("span",{children:a})]}),c=e.includeDetails?l.jsx("td",{style:{...lc,...ks(t)},children:gT(e.index)}):void 0,d=e.includeDetails?l.jsx("td",{style:{...gl,...ks(t)},children:it.displayTime(e.usedAt,3)}):void 0,f=N.useContext($E),h=f.dragTargetIndex===e.index,m=N.useContext(vd),R=N.useContext(_O)(e.index);return l.jsxs("tr",{style:{...pO,background:n,...h?NO(t):{}},ref:e.refObj??null,draggable:!m.value,onDragStart:T=>{R.setSelected(!0),e.isSelected||p.timeline.onClickTimelineAction(e.index,!1)},onDragLeave:T=>{f.setDragTarget(null,null)},onDrop:T=>{R.drop(T),f.setDragTarget(null,null)},onDragOver:T=>{T.preventDefault();let S=e.usedAt;const I=e.index>0?p.record.actions[e.index-1]:void 0;(I==null?void 0:I.tmp_endLockTime)!==void 0&&e.node.info.type===Ze.Skill&&Ml(p.game.job,e.node.info.skillName).cdName==="cd_GCD"&&(S=I.tmp_endLockTime-p.gameConfig.countdown),f.setDragTarget(e.index,S)},onClick:T=>{R.setSelected(!0),e.recordIsDirty?p.timeline.onClickTimelineAction(e.index,T.shiftKey):(p.timeline.onClickTimelineAction(e.index,T.shiftKey),e.node.tmp_startLockTime!==void 0&&p.scrollToTime(e.node.tmp_startLockTime))},tabIndex:-1,onKeyDown:e.onKeyDown,children:[c,d,s]})}let US=()=>{},CO=()=>{};function DG(){const e=Lt(),t=N.useRef(null),n=N.useRef(null),[a,s]=N.useState(!1),[c,d]=N.useState(void 0),[f,h]=N.useState(void 0),[,m]=N.useReducer(D=>D+1,0),R=N.useRef(!1),T=N.useRef(void 0);N.useEffect(()=>(td=()=>{m()},ni=()=>{const D=p.checkRecordValidity(p.record,0,!0);return d(D),D},ju=D=>{a&&T.current&&(p.record=T.current,p.checkRecordValidity(p.record,0,!0)),D(),s(!1),T.current=p.record,d(p.checkRecordValidity(p.record,0,!0))},US=()=>{setTimeout(()=>{var D;(D=t.current)==null||D.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},CO=()=>{setTimeout(()=>{var D;(D=(p.record.getSelectionLength()===1?t:n).current)==null||D.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},d(p.checkRecordValidity(p.record,0,!0)),()=>{td=()=>{}}),[]);const S=c&&c.isValid,I=D=>{D&&T.current&&(p.record=T.current),s(!1),d(p.checkRecordValidity(p.record,0,!0)),h(void 0)},C=5,_=()=>l.jsx("button",{style:{display:"block",marginTop:10,marginLeft:C},onClick:D=>{R.current=!0,a||console.error("attempted to discard edits while timeline editor was not dirty"),I(!0)},children:g({en:"discard changes",zh:""})}),O=()=>(a||(T.current=p.record,p.record=p.record.getCloneWithSharedConfig(),s(!0)),p.record),y=(D,F)=>{const Y=D==null?void 0:D.node,B=D==null?void 0:D.index,W=D==null?void 0:D.reason,re=Fa()==="en",oe=(Ne,pe)=>re?Ne:pe;let Ae=oe("(unknown node)","");if(Y)if(Y.info.type===Ze.Wait)Ae=oe("(Wait)","");else if(Y.info.type===Ze.JumpToTimestamp)Ae=oe("(Jump to time)","");else if(Y.info.type===Ze.WaitForMP)Ae=oe("(Wait for MP/lucid tick)","/");else if(Y.info.type===Ze.SetResourceEnabled){const Ne=$e(Y.info.buffName);Ae=oe("(Toggle resource "+Ne+")","BUFF "+Ne+"")}else Y.info.type===Ze.Skill?Ae=Y.info.skillName?ba(Y.info.skillName):oe("(unknown skill)",""):Y.info.type===Ze.Unknown&&(Ae=Y.info.skillName);let me;const Ce=B!==void 0?c==null?void 0:c.skillUseTimes[B]:void 0,Be=(W==null?void 0:W.unavailableReasons.map(Ls).join(oe("; ","")))??Ls(void 0);if(F?me=oe(`This sequence contains invalid actions! Check action #${gT(B)}: ${Ae}`,`${gT(B)} ${Ae}`):me=oe(`This action is invalid! ${Ae}`,` ${Ae}`),Ce!==void 0){const Ne=it.displayTime(Ce,3);me+=` @ ${Ne}`+oe(".","")}return{en:l.jsxs(l.Fragment,{children:[me,l.jsx("br",{}),l.jsx("br",{}),"Reason: ",Be]}),zh:l.jsxs(l.Fragment,{children:[me,l.jsx("br",{}),l.jsx("br",{}),"",Be]})}},x={padding:"0.3em"},L=()=>{if(a)return l.jsxs("div",{children:[l.jsx("div",{style:{...x,backgroundColor:(S?e.editingValid:e.editingInvalid)+Wf},children:g(S?{en:"This edited sequence is valid.",zh:""}:y(c==null?void 0:c.invalidActions[0],!0))}),l.jsx("button",{style:{display:"block",marginTop:10,marginLeft:C},onClick:D=>{R.current=!0,a?p.applyEditedRecord():console.error("attempted to apply edits while timeline editor was not dirty"),I(!1),p.displayCurrentState()},children:g({en:"apply changes to timeline and save",zh:""})}),_()]});if(S)return l.jsx("div",{style:x,children:g({en:"Timeline is up to date.",zh:""})});{const D=new Map;c==null||c.invalidActions.forEach(re=>D.set(re.index,re));const F=c==null?void 0:c.invalidActions[0];let Y=F,B=!0;const W=p.record;if(F!==void 0&&W.selectionStartIndex!==void 0){const re=c==null?void 0:c.invalidActions.find(Ae=>W.isInSelection(Ae.index)),oe=W.getSelectionLength();oe===1&&re!==void 0?(Y=D.get(W.selectionStartIndex),B=!1):oe>1&&re!==void 0&&(Y=re)}return l.jsx("div",{children:l.jsx("div",{style:{...x,backgroundColor:e.editingInvalid+Wf},children:g(y(Y,B))})})}},v={display:"block",width:"100%",padding:3},P=D=>{if(p.record.getFirstSelection()){R.current=!0;const F=O();let Y=f;const B=D(F);B!==void 0&&(Y===void 0?Y=B:Y=Math.min(B,Y));const W=p.checkRecordValidity(F,Y);B!==void 0&&W.straightenedIfValid?(p.record=W.straightenedIfValid,h(void 0)):h(Y),d(W),Wo()}},k=p.undoStack.peekUndoMessage(),w=p.undoStack.peekRedoMessage(),K=l.jsxs("div",{style:{marginBottom:6,flex:1,display:"flex",flexDirection:"column",gap:10},children:[l.jsx("button",{style:v,onClick:D=>P(F=>(p.undoStack.push(new uf(F.selectionStartIndex,F.getSelectionLength(),-1)),F.moveSelected(-1))),children:g({en:"move up",zh:""})}),l.jsx("button",{style:v,onClick:D=>P(F=>(p.undoStack.push(new uf(F.selectionStartIndex,F.getSelectionLength(),1)),F.moveSelected(1))),children:g({en:"move down",zh:""})}),l.jsx("button",{style:v,onClick:D=>P(F=>(p.undoStack.push(new ec(F.selectionStartIndex,F.getSelected().actions,"delete")),F.deleteSelected())),children:g({en:"delete selected",zh:""})}),l.jsx("button",{style:v,onClick:D=>{const F=p.record.getSelectionLength();F>1&&P(Y=>{const B=Y.selectionStartIndex,W=Y.selectionEndIndex;return p.undoStack.push(new uf(W,1,-(F-1))),Y.selectSingle(W),Y.moveSelected(-(F-1)),Y.selectSingle(B),Y.selectUntil(W),Y.selectionStartIndex})},children:g({en:l.jsxs(l.Fragment,{children:["move end of selection",l.jsx("br",{}),"to start of selection"]}),zh:l.jsxs(l.Fragment,{children:["",l.jsx("br",{}),""]})})}),l.jsx("hr",{style:{backgroundColor:e.bgLowContrast,height:2,marginTop:-2,marginBottom:-2,border:0,width:"100%"}}),l.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:6},children:[l.jsx("button",{style:v,onClick:pT,disabled:p.record.getSelectionLength()===0,children:g({en:"copy ",zh:""})}),l.jsx("button",{style:v,onClick:MO,children:g({en:"paste ",zh:""})})]}),l.jsxs("button",{style:v,onClick:()=>p.undoStack.undo(),disabled:k===void 0,children:[g({en:"undo ",zh:""}),g(k??{en:""})]}),l.jsxs("button",{style:v,onClick:()=>p.undoStack.redo(),disabled:w===void 0,children:[g({en:"redo ",zh:""}),g(w??{en:""})]})]}),ne=D=>{const F=p.record.selectionStartIndex;F!==void 0&&(D.key==="Backspace"||D.key==="Delete"?P(B=>(p.undoStack.push(new ec(F,B.getSelected().actions,"delete")),B.deleteSelected())):(p.handleTimelineKeyboardEvent(D),D.key==="Escape"&&Q.setDragTarget(null,null)))},fe=!0,ue=[],he=new Set(c==null?void 0:c.invalidActions.map(D=>D.index));p.record.actions.forEach((D,F)=>{const Y=!a&&F===p.record.selectionStartIndex,B=!a&&F===p.record.selectionEndIndex;ue.push(l.jsx(OG,{index:F,node:D,isSelected:p.record.isInSelection(F),recordIsDirty:a,isInvalid:he.has(F),usedAt:(c==null?void 0:c.skillUseTimes[F])??0,includeDetails:fe,onKeyDown:ne,refObj:Y?t:B?n:void 0},F))});const Ee=D=>({drop:F=>{const Y=p.record.selectionStartIndex??0;let B=D-(Y??0);B>0&&(B-=p.record.getSelectionLength()),B!==0&&P(W=>W.moveSelected(B))},setSelected:F=>{R.current=F}}),q=N.useContext(vd),Q=N.useContext($E),j=ue.length,G=Ee(j),Z=Q.dragTargetIndex===j;j>0&&ue.push(l.jsxs("tr",{tabIndex:-1,style:{height:"0.8em",background:e.timelineEditor.headerFooter,userSelect:"none",...Z?NO(e):{}},draggable:!q.value,onDragStart:D=>D.preventDefault(),onDragLeave:D=>{Q.setDragTarget(null,null)},onDrop:D=>{G.drop(D),Q.setDragTarget(null,null)},onDragOver:D=>{D.preventDefault(),Q.setDragTarget(j,p.game.getDisplayTime())},children:[l.jsx("td",{style:{border:"none"}}),l.jsx("td",{style:{border:"none"}}),l.jsx("td",{style:{border:"none"}})]},j));const te={backgroundColor:e.timelineEditor.headerFooter};return l.jsx("div",{onClick:D=>{!D.shiftKey&&!R.current&&(p.record.unselectAll(),p.displayCurrentState()),R.current=!1},children:l.jsx(kS,{contentHeight:AI,children:[{content:K,defaultSize:20},{content:l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:lc.paddingLeft},children:[l.jsxs("table",{style:{position:"relative",width:"100%",borderCollapse:"collapse",borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:pO,children:[l.jsx("th",{className:"stickyTh",style:{...te,...lc,...ks(e)},children:"#"}),l.jsx("th",{className:"stickyTh",style:{...te,...gl,...ks(e)},children:g({en:"Time",zh:""})}),l.jsx("th",{className:"stickyTh",style:{...te,...gO,...ks(e)},children:g({en:"Actions",zh:""})})]})}),l.jsx("tbody",{children:l.jsx(_O.Provider,{value:Ee,children:ue})})]}),j===0&&l.jsx("span",{style:{paddingLeft:lc.paddingLeft,fontStyle:"italic"},children:g({en:"No actions to display yet.",zh:""})})]}),defaultSize:40,fullBorder:!0,showScrollbar:!0},{content:L(),defaultSize:40,fullBorder:!0}]})})}const yG=30;class vG{constructor(){J(this,"actions");J(this,"cursor");this.cursor=0,this.actions=[]}clear(){this.cursor=0,this.actions=[]}get length(){return this.actions.length}push(t){this.actions.splice(this.cursor,this.actions.length-this.cursor,t),this.actions.length>yG&&this.actions.shift(),this.cursor=this.actions.length}doThenPush(t){t.redo(),this.push(t)}emitLog(...t){}undo(){this.cursor>0?(this.actions[--this.cursor].undo(),this.emitLog("UNDO",this.actions[this.cursor])):this.emitLog("nothing to undo")}redo(){this.cursor<this.actions.length?(this.emitLog("REDO",this.actions[this.cursor]),this.actions[this.cursor++].redo()):this.emitLog("nothing to redo")}peekUndoMessage(){return this.cursor>0?this.actions[this.cursor-1].message:void 0}peekRedoMessage(){return this.cursor<this.actions.length?this.actions[this.cursor].message:void 0}}class Ya{constructor(t){J(this,"message");this.message=t}}function wS(e){return e>0?"actions":"action"}class Rs extends Ya{constructor(n,a){super({en:"add action",zh:""});J(this,"node");J(this,"index");this.node=n,this.index=a}undo(){p.record.selectSingle(this.index),p.deleteSelectedSkills()}redo(){p.insertRecordNode(this.node,this.index)}}class uf extends Ya{constructor(n,a,s){super({en:`move ${a} ${wS(a)}`,zh:`${a}`});J(this,"startIndex");J(this,"selectCount");J(this,"offset");this.startIndex=n,this.selectCount=a,this.offset=s}undo(){p.record.selectSingle(this.startIndex+this.offset),p.record.selectUntil(this.startIndex+this.selectCount+this.offset-1),p.record.moveSelected(-this.offset),p.autoSave(),ni()}redo(){p.record.selectSingle(this.startIndex),p.record.selectUntil(this.startIndex+this.selectCount-1),p.record.moveSelected(this.offset),p.autoSave(),ni()}}class ec extends Ya{constructor(n,a,s){super({en:`${s} ${a.length} ${wS(a.length)}`,zh:`${s==="delete"?"":""}${a.length}`});J(this,"startIndex");J(this,"nodes");J(this,"source");this.startIndex=n,this.nodes=a,this.source=s}undo(){p.insertRecordNodes(this.nodes,this.startIndex)}redo(){p.record.selectSingle(this.startIndex),p.record.selectUntil(this.startIndex+this.nodes.length-1),p.deleteSelectedSkills(),ni()}}class PS extends Ya{constructor(n,a,s){super({en:s==="preset"?"add preset sequence":`paste ${n.length} ${wS(n.length)}`,zh:s==="preset"?"":`${n.length}`});J(this,"nodes");J(this,"index");J(this,"source");this.nodes=n,this.index=a,this.source=s}undo(){p.record.selectSingle(this.index),p.record.selectUntil(this.index+this.nodes.length-1),p.deleteSelectedSkills()}redo(){p.insertRecordNodes(this.nodes,this.index)}}class MG extends Ya{constructor(n,a,s,c){super({en:"import from fflogs",zh:"fflogs"});J(this,"nodes");J(this,"index");J(this,"oldConfig");J(this,"newConfig");this.nodes=n,this.index=a,this.oldConfig=s,this.newConfig=c}undo(){p.record.selectSingle(this.index),p.record.selectUntil(this.index+this.nodes.length-1),p.deleteSelectedSkills(),p.setConfigAndRestart(this.oldConfig,!1),p.updateAllDisplay(),p.scrollToTime()}redo(){p.insertRecordNodes(this.nodes,this.index),p.setConfigAndRestart(this.newConfig,!1),p.updateAllDisplay(),p.scrollToTime()}}class LG extends Ya{constructor(n,a){super({en:"change active slot",zh:""});J(this,"oldIndex");J(this,"newIndex");this.oldIndex=n,this.newIndex=a}undo(){p.setActiveSlot(this.oldIndex),p.displayCurrentState()}redo(){p.setActiveSlot(this.newIndex),p.displayCurrentState()}}class xG extends Ya{constructor(n,a){super({en:"delete slot",zh:""});J(this,"deleteIndex");J(this,"deletedRecord");this.deleteIndex=n,this.deletedRecord=a}undo(){p.timeline.addSlotAtIndex(this.deleteIndex),p.loadBattleRecordFromFile(this.deletedRecord),p.autoSave(),p.displayCurrentState()}redo(){p.timeline.removeSlot(this.deleteIndex),p.displayCurrentState()}}class HG extends Ya{constructor(n){super({en:"add slot",zh:""});J(this,"oldIndex");this.oldIndex=n}undo(){p.timeline.removeSlot(p.timeline.slots.length-1),p.setActiveSlot(this.oldIndex),p.displayCurrentState()}redo(){p.setActiveSlot(this.oldIndex),p.timeline.addSlot(),p.displayCurrentState()}}class kG extends Ya{constructor(n){super({en:"clone slot",zh:""});J(this,"sourceIndex");this.sourceIndex=n}undo(){p.timeline.removeSlot(p.timeline.slots.length-1),p.setActiveSlot(this.sourceIndex),p.displayCurrentState()}redo(){p.setActiveSlot(this.sourceIndex),p.cloneActiveSlot(),p.displayCurrentState()}}class UG extends Ya{constructor(n,a,s){super({en:"change config",zh:""});J(this,"oldConfig");J(this,"newConfig");J(this,"oldRecord");this.oldConfig=n,this.newConfig=a,s===void 0&&(n.job!==a.job||n.level!==a.level)&&console.error("config apply w/o reset but job or level changed"),this.oldRecord=s}undo(){this.oldRecord!==void 0?(p.loadBattleRecordFromFile(this.oldRecord),p.autoSave()):p.setConfigAndRestart(this.oldConfig,!1),p.updateAllDisplay(),p.scrollToTime()}redo(){p.setConfigAndRestart(this.newConfig,this.oldRecord!==void 0),p.updateAllDisplay(),p.scrollToTime()}}class wG extends Ya{constructor(n,a){super({en:"import from file",zh:""});J(this,"oldRecord");J(this,"importedRecord");this.oldRecord=n,this.importedRecord=a}undo(){p.loadBattleRecordFromFile(this.oldRecord),p.autoSave(),p.displayCurrentState()}redo(){p.loadBattleRecordFromFile(this.importedRecord),p.autoSave(),p.displayCurrentState()}}let bO,OO=[];const DO="",yO=", ",jR=":";function PG(e){const t=p.record.getSelected().actions,n=p.record.selectionStartIndex;if(n===void 0)return"";let a="";if(e==="plain"){const s=[];t.forEach(d=>s.push(d.toLocalizedString()));const c=Fa()==="zh"?DO:yO;a=s.join(c)}else if(e==="tsv"){const s=[],c=p.checkRecordValidity(p.record,0);t.forEach((d,f)=>s.push([c.skillUseTimes[f+n].toFixed(3),d.targetCount,d.toLocalizedString()].join("	"))),a=s.join(`
`)}else if(e==="discord"){const s=[];t.forEach(c=>{if(c.info.type===Ze.Skill){const d=c.info.skillName;d==="TINCTURE"?s.push(":IntPot:"):d==="SWIFTCAST"?s.push(p.gameConfig.job==="BLM"?":Swift:":":Swiftcast:"):s.push(`:${bn[d].discordEmote??bn[d].name.replaceAll(" ","")}:`)}else s.push(c.toLocalizedString())}),a=s.join(" ")}else console.error("invalid clipboard mode",e);return bO=a,OO=t,a}function GG(e){return e==="."||e>="0"&&e<="9"}function vO(e,t){const n=e.toLowerCase(),a=t==null?void 0:t.toLowerCase();if(n==="wait mp"||e===""||n==="wait"&&a===" mp"||e===""&&(t==null?void 0:t.substring(3,5))==="")return eb();const s=e.split(" ");if(!(t!==void 0&&GG(t[0]))){if(s.length===2&&s[0]==="wait"){const c=ao(s[1]);return isNaN(c)?void 0:ic(c)}if(e.startsWith("")){const c=ao(e.substring(3));return isNaN(c)?void 0:ic(c)}if(s.length===2&&s[0]==="jump"){const c=ao(s[1]);return isNaN(c)?void 0:yl(c)}if(e.startsWith("")){const c=ao(e.substring(2));return isNaN(c)?void 0:yl(c)}if(s.length>=2&&s[0]==="toggle"){const c=ON(s.slice(1).join(" "));return c!==void 0?rT(c):void 0}if(e.startsWith("")){const c=ON(e.substring(2));return c!==void 0?rT(c):void 0}}}function _C(e,t=1){const n=vO(e,void 0);if(n!==void 0)return n;const a=TS(e)??Z0.get(e)??$0.get(e);return a!==void 0?xs(a,t):void 0}function BG(e){if(e===bO)return OO;const t=e.split(`
`),n=[];for(const a of t){const s=a.trimStart();if(a.includes("	")){const c=a.split("	");if(c.length>0){const d=c[c.length-1].trim();let f=1;if(c.length>1){const m=parseInt(c[c.length-2]);isNaN(m)||(f=m)}const h=_C(d,f);h!==void 0&&n.push(h)}}else if(s.length>2&&s[0]===jR){let c=!0,d="";for(let f=1;f<s.length;f++){const h=s[f];if(c&&(h===jR||h===" ")){const R=d.indexOf("~");if(R>0&&(d=d.substring(0,R)),d.toLowerCase().endsWith("_ogcd")&&(d=d.substring(0,d.length-5)),d.length!==0)if(d==="IntPot")n.push(xs("TINCTURE",1));else if(d==="Swift"||d==="Swiftcast")n.push(xs("SWIFTCAST",1));else{const T=RS.get(p.gameConfig.job).get(d);T!==void 0?n.push(xs(T)):console.error("unrecognized discord emote",d)}d="",c=!1;continue}if(h===jR&&d.length===0){c=!0,d="";continue}(d.length>0||h!==" ")&&(d+=h);const m=s.substring(f+1,f+4);if(!c){const R=vO(d,m);R!==void 0&&(n.push(R),d="")}}}else{let c=s.split(yO);c.length<2&&(c=s.split(DO)),c.forEach(d=>{if(d.length>0){const f=_C(d.trim());f!==void 0&&n.push(f)}})}}return n}function pT(){navigator.clipboard.writeText(PG(p.clipboardMode))}function MO(){p.queuedPastes++,navigator.clipboard.readText().then(e=>{if(e.startsWith("https://")||e.startsWith("www.")||e.startsWith("cn."))return;const t=BG(e);if(t===void 0||t.length===0){console.error("failed to paste parsed clipboard contents:"),console.error(e);return}p.undoStack.doThenPush(new PS(t,p.record.selectionStartIndex??p.record.length,"paste"))}).finally(()=>{p.queuedPastes--,console.assert(p.queuedPastes>=0)})}class In{constructor(t,n,a,s,c,d,f){J(this,"name");J(this,"duration");J(this,"color");J(this,"damageFactor");J(this,"critBonus");J(this,"dhBonus");J(this,"job");this.name=t,this.duration=a,this.color=n,this.damageFactor=s,this.critBonus=c,this.dhBonus=d,this.job=f}}const GS=[new In(H.ArcaneCircle,Rt.Pink,20,1.03,0,0,"RPR"),new In(H.ArmysPaeon,Rt.Yellow,45,1,0,.03,"BRD"),new In(H.BattleLitany,Rt.Blue,20,1,.1,0,"DRG"),new In(H.BattleVoice,Rt.Orange,20,1,0,.2,"BRD"),new In(H.Brotherhood,Rt.Orange,20,1.05,0,0,"MNK"),new In(H.Card_TheBalance,Rt.Red,15,1.03,0,0,"AST"),new In(H.Card_TheSpear,Rt.Blue,15,1.06,0,0,"AST"),new In(H.ChainStratagem,Rt.Grey,20,1,.1,0,"SCH"),new In(H.Devilment,Rt.Green,20,1,.2,.2,"DNC"),new In(H.Divination,Rt.Yellow,20,1.06,0,0,"AST"),new In(H.Dokumori,Rt.Purple,21,1.05,0,0,"NIN"),new In(H.Embolden,Rt.Grey,20,1.05,0,0,"RDM"),new In(H.MagesBallad,Rt.Purple,45,1.01,0,0,"BRD"),new In(H.RadiantFinale1,Rt.Purple,20,1.02,0,0,"BRD"),new In(H.RadiantFinale2,Rt.Purple,20,1.04,0,0,"BRD"),new In(H.RadiantFinale3,Rt.Purple,20,1.06,0,0,"BRD"),new In(H.SearingLight,Rt.Blue,20,1.05,0,0,"SMN"),new In(H.StandardFinish,Rt.Yellow,60,1.05,0,0,"DNC"),new In(H.StarryMuse,Rt.Purple,20.5,1.05,0,0,"PCT"),new In(H.TechnicalFinish,Rt.Blue,20,1.05,0,0,"DNC"),new In(H.WanderersMinuet,Rt.Green,45,1,.02,0,"BRD")],LO=new Map;GS.forEach(e=>{LO.set(e.name,e)});let Xf=class{constructor(t){J(this,"name");J(this,"info");this.name=t;let n=LO.get(t);n||(n=GS[0],console.error("Buff info not found!")),this.info=n}};const xO=152,$h=5882,Qn=5925,zR={main:Qn,spellSpeed:420,skillSpeed:420,criticalHit:3387,directHit:1935,determination:2407,piety:440,tenacity:420},qf={DRK:{main:$h,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},GNB:{main:$h,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},PLD:{main:$h,spellSpeed:420,skillSpeed:420,criticalHit:3242,directHit:1230,determination:2883,piety:440,tenacity:794},WAR:{main:$h,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},AST:{main:Qn,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},SCH:{main:Qn,spellSpeed:1221,skillSpeed:420,criticalHit:3484,directHit:852,determination:2314,piety:718,tenacity:420},SGE:{main:Qn,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},WHM:{main:Qn,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},DRG:{main:Qn,spellSpeed:420,skillSpeed:420,criticalHit:3425,directHit:1996,determination:2308,piety:440,tenacity:420},MNK:{main:Qn,spellSpeed:420,skillSpeed:968,criticalHit:3487,directHit:1685,determination:2009,piety:440,tenacity:420},NIN:{main:Qn,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},RPR:{main:Qn,spellSpeed:420,skillSpeed:474,criticalHit:3425,directHit:1942,determination:2308,piety:440,tenacity:420},SAM:{main:Qn,spellSpeed:420,skillSpeed:690,criticalHit:3425,directHit:2045,determination:1989,piety:440,tenacity:420},VPR:{main:Qn,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},DNC:zR,BRD:zR,MCH:zR,BLM:{main:Qn,spellSpeed:978,skillSpeed:420,criticalHit:3456,directHit:1764,determination:1951,piety:440,tenacity:420},RDM:{main:Qn,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},SMN:{main:Qn,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},PCT:{main:Qn,spellSpeed:420,skillSpeed:420,criticalHit:3399,directHit:1764,determination:2566,piety:440,tenacity:420},BLU:{main:1701,spellSpeed:1573,skillSpeed:380,criticalHit:1343,directHit:785,determination:676,piety:340,tenacity:380},NEVER:{main:Qn,spellSpeed:420,skillSpeed:420,criticalHit:420,directHit:420,determination:440,piety:440,tenacity:420}};function NT(e,t=ot.lvl100){return{job:e,shellVersion:VT.version,level:t??(e==="BLU"?ot.lvl80:ot.lvl100),...qf[e],wd:xO,countdown:5,randomSeed:"sup",fps:60,gcdSkillCorrection:0,animationLock:.7,timeTillFirstManaTick:1.2,procMode:Ti.Never,initialResourceOverrides:[]}}function FG(e){const t=gt(`defaultPartialConfig: ${e}`);if(t===null)return qf[e];const n=JSON.parse(t);return Object.entries(qf[e]).forEach(([a,s])=>{n[a]===void 0&&(n[a]=s)}),n}const df=NT("BLM");class Ta{constructor(t){J(this,"job");J(this,"shellVersion",VT.version);J(this,"level");J(this,"wd");J(this,"main");J(this,"spellSpeed");J(this,"skillSpeed");J(this,"criticalHit");J(this,"directHit");J(this,"determination");J(this,"piety");J(this,"tenacity");J(this,"countdown");J(this,"randomSeed");J(this,"fps");J(this,"gcdSkillCorrection");J(this,"animationLock");J(this,"timeTillFirstManaTick");J(this,"procMode");J(this,"initialResourceOverrides");J(this,"legacy_casterTax");this.job=t.job,this.shellVersion=t.shellVersion;const n=df;this.level=t.level??n.level,this.spellSpeed=t.spellSpeed,this.skillSpeed=t.skillSpeed??n.skillSpeed,this.criticalHit=t.criticalHit??n.criticalHit,this.directHit=t.directHit??n.directHit,this.determination=t.determination??n.determination,this.piety=t.piety??n.piety,this.countdown=t.countdown,this.randomSeed=t.randomSeed,this.fps=t.fps,this.gcdSkillCorrection=t.gcdSkillCorrection,this.animationLock=t.animationLock,this.timeTillFirstManaTick=t.timeTillFirstManaTick,this.procMode=t.procMode,this.initialResourceOverrides=t.initialResourceOverrides.map(a=>{if(a.effectOrTimerEnabled===void 0&&(a.enabled===void 0?a.effectOrTimerEnabled=!0:a.effectOrTimerEnabled=a.enabled),!(a.type in Ye||a.type in Ms))if(a.type.toString()==="AstralFire")a.type="ASTRAL_FIRE";else if(a.type.toString()==="UmbralIce")a.type="UMBRAL_ICE";else if(a.type.toString()==="UmbralHeart")a.type="UMBRAL_HEART";else{let s=Object.keys(Ye).find(c=>Ye[c].name===a.type);s||(s=Object.keys(Ms).find(c=>Ms[c].name===a.type)),s&&(a.type=s)}return new AS(a)}),this.legacy_casterTax=(t==null?void 0:t.casterTax)??0,this.tenacity=(t==null?void 0:t.tenacity)??420,this.main=(t==null?void 0:t.main)??Qn,this.wd=(t==null?void 0:t.wd)??xO}adjustedOvertimePotency(t,n){return bt.overtimePotency(this.level,n==="sks"?this.skillSpeed:n==="sps"?this.spellSpeed:bt.getSubstatBase(this.level),t)}adjustedGCD(t=2.5,n){return this.shellVersion>=Fo.AllaganGcdFormula?bt.preTaxGcd(this.level,this.spellSpeed,t,n):bt.preTaxGcdLegacy(this.level,this.spellSpeed,t,n)}adjustedSksGCD(t=2.5,n){return this.shellVersion>=Fo.AllaganGcdFormula?bt.preTaxGcd(this.level,this.skillSpeed,t,n):bt.preTaxGcdLegacy(this.level,this.skillSpeed,t,n)}adjustedCastTime(t,n){return bt.preTaxCastTime(this.level,this.spellSpeed,t,n)}adjustedSksCastTime(t,n){return bt.preTaxCastTime(this.level,this.skillSpeed,t,n)}getAfterTaxGCD(t){return this.shellVersion<Fo.FpsTax?t:bt.afterFpsTax(this.fps,t)+this.gcdSkillCorrection}getAfterTaxCastTime(t){return this.shellVersion<Fo.FpsTax?this.legacy_casterTax+t:bt.afterFpsTax(this.fps,t)+bt.afterFpsTax(this.fps,Ck)+this.gcdSkillCorrection}static getSlidecastWindow(t){return .5}get critRate(){return bt.criticalHitRate(this.level,this.criticalHit)}getOverrideStacks(t){var n;return(n=this.initialResourceOverrides.find(a=>a.type===t))==null?void 0:n.stacks}savePartialConfig(){const t={};Object.keys(qf[this.job]).forEach(n=>{t[n]=this[n]}),pt(`defaultPartialConfig: ${this.job}`,JSON.stringify(t))}serialized(){return{job:this.job,shellVersion:this.shellVersion,level:this.level,wd:this.wd,main:this.main,spellSpeed:this.spellSpeed,skillSpeed:this.skillSpeed,criticalHit:this.criticalHit,directHit:this.directHit,determination:this.determination,piety:this.piety,tenacity:this.tenacity,countdown:this.countdown,randomSeed:this.randomSeed,casterTax:this.legacy_casterTax,fps:this.fps,gcdSkillCorrection:this.gcdSkillCorrection,animationLock:this.animationLock,timeTillFirstManaTick:this.timeTillFirstManaTick,procMode:this.procMode,initialResourceOverrides:this.initialResourceOverrides.map(t=>t.serialized())}}}function jG(e){var n,a;const t=Lt();return l.jsx("div",{style:{top:1+(((n=e.offset)==null?void 0:n.y)??0),left:((a=e.offset)==null?void 0:a.x)??0,marginRight:8,position:"relative",width:16,height:16,borderRadius:8,display:"inline-block",border:"1px solid "+t.bgHighContrast,verticalAlign:"top"},children:e.color&&l.jsx("div",{style:{backgroundColor:`${e.color}`,position:"absolute",top:2,bottom:2,left:2,right:2,borderRadius:"inherit"}})})}function zG(e){var c,d;const t=Lt(),n=e.heightPx??30,a=e.widthPx??24;let s;return e.imgUrl?s=l.jsx("img",{src:e.imgUrl,alt:"resource img",style:{display:"block",margin:"2px auto",maxWidth:n-4,maxHeight:a-4}}):e.color&&(s=l.jsx("div",{style:{backgroundColor:e.color,position:"absolute",top:3,bottom:3,left:3,right:3}})),l.jsx("div",{style:{display:"inline-block",position:"relative",top:((c=e.offset)==null?void 0:c.y)??0,left:((d=e.offset)==null?void 0:d.x)??0,width:n,height:a,border:"1px solid "+t.bgHighContrast,marginRight:4},children:s})}function hf(e={name:"placeholder",color:"#6cf",value:"0.34/1.00",progress:.34,width:100,hidden:!1}){return l.jsxs("div",{hidden:e.hidden,style:{marginBottom:4,lineHeight:"1.5em"},children:[l.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),l.jsxs("div",{style:{width:200,display:"inline-block"},children:[l.jsx(NG,{backgroundColor:e.color,progress:e.progress,width:e.width,offsetY:4}),l.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.value})]})]})}function to(e){const t=e.containerType==="box"||e.items.some(a=>a.imgUrl!==void 0),n=e.items.map((a,s)=>e.containerType==="circle"&&a.imgUrl===void 0?l.jsx(jG,{color:a.color,offset:t?{x:0,y:3}:void 0},s):l.jsx(zG,{color:a.color,imgUrl:a.imgUrl,offset:t?{x:-2,y:0}:void 0,heightPx:a.boxHeightPx,widthPx:a.boxWidthPx},s));return t?l.jsxs("div",{style:{marginBottom:4},children:[l.jsx("div",{style:{display:"inline-block",position:"relative",verticalAlign:"top",top:6,width:108},children:e.name}),l.jsx("div",{style:{display:"inline-block"},children:n}),e.label?l.jsx("div",{style:{marginLeft:6,display:"inline-block",position:"relative",verticalAlign:"top",top:6},children:e.label}):void 0]}):l.jsxs("div",{style:{marginBottom:4,lineHeight:"1.5em"},children:[l.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),l.jsxs("div",{style:{width:200,display:"inline-block"},children:[l.jsx("div",{style:{display:"inline-block"},children:n}),e.label?l.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.label}):void 0]})]})}function gC(e){return l.jsxs("div",{className:e.className,style:{marginBottom:4,lineHeight:"1.5em"},children:[l.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),l.jsx("div",{style:{width:200,display:"inline-block"},children:l.jsx("div",{style:{display:"inline-block",marginLeft:6,color:e.color},children:e.text})})]})}const Ks=new Map;function Wt(e,t){Ks.set(e,`Buffs/${t}`);const n=Ye[e].maximumStacks??1;for(let a=2;a<=n;a++)Ks.set(e+a,`Buffs/${t.replace(Ye[e].name,Ye[e].name+a)}`)}Object.keys(M0).forEach(e=>{const t=Ye[e].name;Ks.set(e,`Buffs/Role/${t}.png`)});Object.keys(v0).forEach(e=>Ks.set(e,"Buffs/Role/Tank Limit Break.png"));Ks.set("SPRINT","Buffs/General/Sprint.png");Ks.set("TINCTURE","Buffs/General/Tincture.png");function YG(e){let t=e.rscType;e.stacks>1&&(t+=e.stacks);let n;e.rscType==="AUTOS_ENGAGED"||e.rscType==="REAR_POSITIONAL"||e.rscType==="FLANK_POSITIONAL"?n={height:40}:n={height:40};const a=Ye[e.rscType].mayNotBeCanceled,s={display:"inline-block",verticalAlign:"top",filter:e.enabled?"none":"grayScale(100%)"},c=l.jsx("img",{style:n,src:"assets/"+Ks.get(t),alt:e.rscType});return l.jsxs("div",{title:$e(e.rscType),className:e.className+" buff "+e.rscType,children:[a?l.jsx("div",{style:s,children:c}):l.jsx(Ys,{content:c,style:s,onClickFn:()=>{e.onSelf&&(p.requestToggleBuff(e.rscType,!0),p.updateStatusDisplay(p.game),p.updateSkillButtons(p.game),p.autoSave(),ni())}}),l.jsx("span",{className:"buff-label",style:{visibility:e.timeRemaining===void 0?"hidden":void 0},children:e.timeRemaining??"0.000"})]})}function Zf(e){const t=e.data,n=[];for(let s=0;s<t.length;s++)n.push(l.jsx(YG,{...t[s]},s));let a={height:54,textAlign:"right",lineHeight:"1em"};return e.style&&(a={...a,...e.style}),l.jsx("div",{style:a,children:n})}function HO(e){const t=Lt(),n=e.data,a=l.jsx(hf,{name:"GCD",color:t.resources.gcdBar,progress:n.gcdReady?0:1-n.timeTillGCDReady/n.gcd,value:n.timeTillGCDReady.toFixed(3),width:100,hidden:n.gcdReady}),s=l.jsx(hf,{name:"casting/taxed",color:n.canMove?t.resources.gcdBar:t.resources.lockBar,progress:n.castLocked?1-n.castLockCountdown/n.castLockTotalDuration:0,value:n.castLockCountdown.toFixed(3),width:100,hidden:!n.castLocked}),c=l.jsx(hf,{name:"using skill",color:t.resources.lockBar,progress:n.animLocked?1-n.animLockCountdown/n.animLockTotalDuration:0,value:n.animLockCountdown.toFixed(3),width:100,hidden:!n.animLocked});return l.jsxs("div",{style:{position:"absolute"},children:[a,s,c]})}function kO(e){const t=e.data.resources.map((a,s)=>{switch(a.kind){case"bar":return l.jsx(hf,{name:a.name,color:a.color,progress:a.progress,value:a.valueString,width:a.widthPx??100,hidden:a.hidden??!1},"resourceDisplay"+s);case"counter":{const c=[];for(let d=0;d<a.maxStacks;d++)c.push({color:d<a.currentStacks?a.color:void 0});return l.jsx(to,{containerType:"circle",name:a.name,label:a.valueString??`${a.currentStacks}/${a.maxStacks}`,items:c},"resourceDisplay"+s)}case"paint":{const c=[];for(let f=0;f<a.maxStacks;f++){const h=a.hasComet&&f===a.currentStacks-1?a.cometColor:a.holyColor;c.push({color:f<a.currentStacks?h:void 0,imgUrl:void 0})}const d=`${a.currentStacks}/${a.maxStacks}`;return l.jsx(to,{containerType:"circle",name:a.name,label:d,items:c},"resourceDisplay"+s)}case"dance":{const c=a.currentStacks,d=[a.emboiteColor,a.entrechatColor,a.jeteColor,a.pirouetteColor],f=[];for(let m=0;m<a.maxStacks;m++)f.push({color:m<c?d[m]:void 0});const h=`${c}/${a.maxStacks}`;return l.jsx(to,{containerType:"circle",name:a.name,label:h,items:f},"resourceDisplay"+s)}case"sen":{const c=[{present:a.hasSetsu,color:a.setsuColor,name:"setsu"},{present:a.hasGetsu,color:a.getsuColor,name:"getsu"},{present:a.hasKa,color:a.kaColor,name:"ka"}],d=l.jsx(Xe,{topic:"senExplanation",content:g({en:"from left to right: setsu (yukikaze), getsu (gekko/mangetsu), ka (kasha/oka)",zh:"//"})});return l.jsx(to,{name:l.jsxs(l.Fragment,{children:[a.name," ",d]}),label:c.filter(f=>f.present).map(f=>f.name).join("+"),containerType:"circle",items:c.map(f=>({color:f.present?f.color:void 0}))},"resourceDisplay"+s)}case"coda":{const c=[{present:a.hasWanderers,color:a.wanderersColor},{present:a.hasMages,color:a.magesColor},{present:a.hasArmys,color:a.armysColor}],d=l.jsx(Xe,{topic:"codaExplanation",content:g({en:"from left to right: wanderer's coda, mage's coda, army's coda"})});return l.jsx(to,{name:l.jsxs(l.Fragment,{children:[a.name," ",d]}),containerType:"circle",items:c.map(f=>({color:f.present?f.color:void 0}))},"resourceDisplay"+s)}case"attunement":{const c=[{gem:a.ruby,color:a.rubyColor},{gem:a.topaz,color:a.topazColor},{gem:a.emerald,color:a.emeraldColor}];return l.jsxs("div",{children:[l.jsx(to,{name:a.aetherName,containerType:"circle",items:c.map(d=>({color:d.gem?d.color:void 0}))}),l.jsx(gC,{name:a.attunementName,text:a.attunementCount.toString()+(a.attunementCount>0?` | ${a.timeRemaining.toFixed(3)}`:"")})]},"resourceDisplay"+s)}case"nadi":return l.jsx("div",{children:l.jsx(to,{name:a.name,label:a.label,containerType:"circle",items:[{color:a.lunar?a.lunarColor:void 0},{color:a.solar?a.solarColor:void 0}]})},"resourceDisplay"+s);case"beast":{const c=new Array(3).map(d=>({color:void 0}));return a.chakras.map((d,f)=>{c[f]={color:d==="opo"?a.opoColor:d==="raptor"?a.raptorColor:d==="coeurl"?a.coeurlColor:void 0}}),l.jsx("div",{children:l.jsx(to,{name:a.name,label:a.label,containerType:"circle",items:c})},"resourceDisplay"+s)}case"chakra":{const c=a.value>a.wrapCount,d=c?a.value%a.wrapCount:a.value,f=new Array(a.wrapCount);for(let h=0;h<a.wrapCount;h++)f[h]={color:c?h+1>d?a.regularColor:a.overflowColor:h+1>d?void 0:a.regularColor};return l.jsx("div",{children:l.jsx(to,{name:a.name,label:a.label,containerType:"circle",items:f})},"resourceDisplay"+s)}case"arcana":{const c=a.activeSlots.map((d,f)=>{const h=f===a.activeSlots.length-1?18:20,m=f===a.activeSlots.length-1?16:20;return{color:d?a.currentArcanaColor:void 0,boxHeightPx:h,boxWidthPx:m}});return l.jsx("div",{children:l.jsx(to,{name:a.name,containerType:"box",items:c})},"resourceDisplay"+s)}default:return l.jsx(gC,{name:a.name,text:a.text,color:a.color},"resourceDisplay"+s)}});let n={textAlign:"left",minHeight:"13.5em"};return e.style&&(n={...n,...e.style}),l.jsx("div",{style:n,children:t})}let UO=(e,t)=>{};class wO extends di.Component{constructor(n){super(n);J(this,"state");this.state={time:0,resources:[],enemyBuffs:[],selfBuffs:[],level:100,layoutFn:a=>l.jsx("div",{})},UO=(a,s)=>{const c=a(hi(this.context));this.setState({layoutFn:s,...c})}}componentDidMount(){p.updateStatusDisplay(p.game)}render(){return l.jsxs("div",{style:{position:"relative",textAlign:"left",margin:"8px 0"},children:[l.jsx("div",{style:{position:"absolute",top:-8,right:0,zIndex:1},children:l.jsx(Xe,{topic:"mainControlRegion",content:l.jsx("div",{className:"toolTip",children:g({en:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:"lightgray"},children:"grey"})," border: not focused"]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumpurple"},children:"purple"})," border: up-to-date, receiving input"]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumseagreen"},children:"green"})," border: real-time"]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"darkorange"},children:"orange"})," border: viewing historical state, receiving input"]})]}),zh:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:"lightgray"},children:""}),""]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumpurple"},children:""}),""]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumseagreen"},children:""}),""]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"darkorange"},children:""}),""]})]}),ja:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:"lightgray"},children:""})," : "]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumpurple"},children:""})," : "]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumseagreen"},children:""})," : "]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"darkorange"},children:""})," : "]})]})})})})}),this.state.layoutFn(this.state)]})}}J(wO,"contextType",gn);class Qt{constructor(t){J(this,"state");this.state=t}makeCommonTimer(t,n=!0){const a=this.state.resources.timeTillReady(t),s=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:s.enabled,stacks:s.availableAmount(),timeRemaining:a.toFixed(3),className:s.availableAmountIncludingDisabled()>0?"":"hidden"}}makeToggleableTimer(t,n=!0){const a=this.state.resources.timeTillReady(t),s=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:s.enabled,stacks:s.availableAmount(),timeRemaining:a.toFixed(3),className:s.availableAmountIncludingDisabled()>0?"":"hidden"}}makeCommonTimerless(t,n=!0){return{rscType:t,onSelf:n,enabled:!0,stacks:this.state.resources.get(t).availableAmount(),className:this.state.hasResourceAvailable(t)?"":"hidden"}}makeToggleableTimerless(t,n=!0){const a=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:a.enabled,stacks:a.availableAmount(),className:a.availableAmountIncludingDisabled()>0?"":"hidden"}}jobSpecificOtherTargetedBuffViewProps(){return[]}getAllOtherTargetedBuffViewProps(){const t=this.state.job,n=[];return mt[t].role==="TANK"&&n.push(this.makeCommonTimer("REPRISAL",!1)),mt[t].role==="MELEE"&&n.push(this.makeCommonTimer("FEINT",!1)),mt[t].role==="CASTER"&&n.push(this.makeCommonTimer("ADDLE",!1)),[...this.jobSpecificOtherTargetedBuffViewProps(),...n]}jobSpecificSelfTargetedBuffViewProps(){return[]}getAllSelfTargetedBuffViewProps(){const t=this.state.job,n=this.state.resources,a=[];if(mt[t].role==="TANK"){a.push(...["RAMPART","SHIELD_WALL","STRONGHOLD"].map(c=>this.makeCommonTimer(c)));const s=mt[t].limitBreakBuff??"UNKNOWN";s&&a.push(this.makeCommonTimer(s))}return mt[t].role==="MELEE"&&a.push(...["TRUE_NORTH","BLOODBATH"].map(s=>this.makeCommonTimer(s))),["TANK","MELEE","RANGED"].includes(mt[t].role)&&a.push(this.makeCommonTimer("ARMS_LENGTH")),["HEALER","CASTER"].includes(mt[t].role)&&a.push(...["SWIFTCAST","LUCID_DREAMING","SURECAST"].map(s=>this.makeCommonTimer(s))),a.push(this.makeCommonTimer("TINCTURE"),this.makeCommonTimer("SPRINT")),mt[t].role==="MELEE"&&a.push(...["REAR_POSITIONAL","FLANK_POSITIONAL"].map(s=>({rscType:s,onSelf:!0,enabled:n.get(s).enabled,stacks:1,className:""}))),(mt[t].role==="TANK"||mt[t].role==="MELEE")&&a.push(...["AUTOS_ENGAGED"].map(s=>({rscType:s,onSelf:!0,enabled:n.get(s).available(1),stacks:1,className:""}))),[...this.jobSpecificSelfTargetedBuffViewProps(),...a]}jobSpecificResourceViewProps(t){return[]}getAllResourceViewProps(t){if(!mt[this.state.job].usesMp)return this.jobSpecificResourceViewProps(t);const n=this.state.resources,a=n.timeTillReady("MANA"),s=n.get("MANA").availableAmount();return[{kind:"bar",name:"MP",color:t.resources.mana,progress:s/1e4,valueString:Math.floor(s)+"/10000"},{kind:"bar",name:g({en:"MP tick",zh:"",ja:"MP"}),color:t.resources.manaTick,progress:1-a/3,valueString:(3-a).toFixed(3)+"/3"},...this.jobSpecificResourceViewProps(t)]}statusLayoutFn(t){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[l.jsxs("span",{style:{display:"block",marginBottom:10},children:[g({en:"time: ",zh:"",ja:""}),`${it.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?l.jsx(kO,{data:{level:t.level,resources:t.resources}}):void 0]}),l.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?l.jsx(HO,{data:t.resourceLocks}):void 0,l.jsx(Zf,{data:t.enemyBuffs,style:{marginBottom:"3em"}}),l.jsx(Zf,{data:t.selfBuffs})]})]})}}var ff={exports:{}},KG=ff.exports,pC;function VG(){return pC||(pC=1,function(e){(function(t,n,a){function s(h){var m=this,R=f();m.next=function(){var T=2091639*m.s0+m.c*23283064365386963e-26;return m.s0=m.s1,m.s1=m.s2,m.s2=T-(m.c=T|0)},m.c=1,m.s0=R(" "),m.s1=R(" "),m.s2=R(" "),m.s0-=R(h),m.s0<0&&(m.s0+=1),m.s1-=R(h),m.s1<0&&(m.s1+=1),m.s2-=R(h),m.s2<0&&(m.s2+=1),R=null}function c(h,m){return m.c=h.c,m.s0=h.s0,m.s1=h.s1,m.s2=h.s2,m}function d(h,m){var R=new s(h),T=m&&m.state,S=R.next;return S.int32=function(){return R.next()*4294967296|0},S.double=function(){return S()+(S()*2097152|0)*11102230246251565e-32},S.quick=S,T&&(typeof T=="object"&&c(T,R),S.state=function(){return c(R,{})}),S}function f(){var h=4022871197,m=function(R){R=String(R);for(var T=0;T<R.length;T++){h+=R.charCodeAt(T);var S=.02519603282416938*h;h=S>>>0,S-=h,S*=h,h=S>>>0,S-=h,h+=S*4294967296}return(h>>>0)*23283064365386963e-26};return m}n&&n.exports?n.exports=d:this.alea=d})(KG,e)}(ff)),ff.exports}var Ef={exports:{}},WG=Ef.exports,NC;function XG(){return NC||(NC=1,function(e){(function(t,n,a){function s(f){var h=this,m="";h.x=0,h.y=0,h.z=0,h.w=0,h.next=function(){var T=h.x^h.x<<11;return h.x=h.y,h.y=h.z,h.z=h.w,h.w^=h.w>>>19^T^T>>>8},f===(f|0)?h.x=f:m+=f;for(var R=0;R<m.length+64;R++)h.x^=m.charCodeAt(R)|0,h.next()}function c(f,h){return h.x=f.x,h.y=f.y,h.z=f.z,h.w=f.w,h}function d(f,h){var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,I=(m.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=m.next,T.quick=T,R&&(typeof R=="object"&&c(R,m),T.state=function(){return c(m,{})}),T}n&&n.exports?n.exports=d:this.xor128=d})(WG,e)}(Ef)),Ef.exports}var mf={exports:{}},qG=mf.exports,CC;function ZG(){return CC||(CC=1,function(e){(function(t,n,a){function s(f){var h=this,m="";h.next=function(){var T=h.x^h.x>>>2;return h.x=h.y,h.y=h.z,h.z=h.w,h.w=h.v,(h.d=h.d+362437|0)+(h.v=h.v^h.v<<4^(T^T<<1))|0},h.x=0,h.y=0,h.z=0,h.w=0,h.v=0,f===(f|0)?h.x=f:m+=f;for(var R=0;R<m.length+64;R++)h.x^=m.charCodeAt(R)|0,R==m.length&&(h.d=h.x<<10^h.x>>>4),h.next()}function c(f,h){return h.x=f.x,h.y=f.y,h.z=f.z,h.w=f.w,h.v=f.v,h.d=f.d,h}function d(f,h){var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,I=(m.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=m.next,T.quick=T,R&&(typeof R=="object"&&c(R,m),T.state=function(){return c(m,{})}),T}n&&n.exports?n.exports=d:this.xorwow=d})(qG,e)}(mf)),mf.exports}var Af={exports:{}},$G=Af.exports,bC;function QG(){return bC||(bC=1,function(e){(function(t,n,a){function s(f){var h=this;h.next=function(){var R=h.x,T=h.i,S,I;return S=R[T],S^=S>>>7,I=S^S<<24,S=R[T+1&7],I^=S^S>>>10,S=R[T+3&7],I^=S^S>>>3,S=R[T+4&7],I^=S^S<<7,S=R[T+7&7],S=S^S<<13,I^=S^S<<9,R[T]=I,h.i=T+1&7,I};function m(R,T){var S,I=[];if(T===(T|0))I[0]=T;else for(T=""+T,S=0;S<T.length;++S)I[S&7]=I[S&7]<<15^T.charCodeAt(S)+I[S+1&7]<<13;for(;I.length<8;)I.push(0);for(S=0;S<8&&I[S]===0;++S);for(S==8?I[7]=-1:I[S],R.x=I,R.i=0,S=256;S>0;--S)R.next()}m(h,f)}function c(f,h){return h.x=f.x.slice(),h.i=f.i,h}function d(f,h){f==null&&(f=+new Date);var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,I=(m.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=m.next,T.quick=T,R&&(R.x&&c(R,m),T.state=function(){return c(m,{})}),T}n&&n.exports?n.exports=d:this.xorshift7=d})($G,e)}(Af)),Af.exports}var Rf={exports:{}},JG=Rf.exports,OC;function e2(){return OC||(OC=1,function(e){(function(t,n,a){function s(f){var h=this;h.next=function(){var R=h.w,T=h.X,S=h.i,I,C;return h.w=R=R+1640531527|0,C=T[S+34&127],I=T[S=S+1&127],C^=C<<13,I^=I<<17,C^=C>>>15,I^=I>>>12,C=T[S]=C^I,h.i=S,C+(R^R>>>16)|0};function m(R,T){var S,I,C,_,O,y=[],x=128;for(T===(T|0)?(I=T,T=null):(T=T+"\0",I=0,x=Math.max(x,T.length)),C=0,_=-32;_<x;++_)T&&(I^=T.charCodeAt((_+32)%T.length)),_===0&&(O=I),I^=I<<10,I^=I>>>15,I^=I<<4,I^=I>>>13,_>=0&&(O=O+1640531527|0,S=y[_&127]^=I+O,C=S==0?C+1:0);for(C>=128&&(y[(T&&T.length||0)&127]=-1),C=127,_=4*128;_>0;--_)I=y[C+34&127],S=y[C=C+1&127],I^=I<<13,S^=S<<17,I^=I>>>15,S^=S>>>12,y[C]=I^S;R.w=O,R.X=y,R.i=C}m(h,f)}function c(f,h){return h.i=f.i,h.w=f.w,h.X=f.X.slice(),h}function d(f,h){f==null&&(f=+new Date);var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,I=(m.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=m.next,T.quick=T,R&&(R.X&&c(R,m),T.state=function(){return c(m,{})}),T}n&&n.exports?n.exports=d:this.xor4096=d})(JG,e)}(Rf)),Rf.exports}var Tf={exports:{}},t2=Tf.exports,DC;function n2(){return DC||(DC=1,function(e){(function(t,n,a){function s(f){var h=this,m="";h.next=function(){var T=h.b,S=h.c,I=h.d,C=h.a;return T=T<<25^T>>>7^S,S=S-I|0,I=I<<24^I>>>8^C,C=C-T|0,h.b=T=T<<20^T>>>12^S,h.c=S=S-I|0,h.d=I<<16^S>>>16^C,h.a=C-T|0},h.a=0,h.b=0,h.c=-1640531527,h.d=1367130551,f===Math.floor(f)?(h.a=f/4294967296|0,h.b=f|0):m+=f;for(var R=0;R<m.length+20;R++)h.b^=m.charCodeAt(R)|0,h.next()}function c(f,h){return h.a=f.a,h.b=f.b,h.c=f.c,h.d=f.d,h}function d(f,h){var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,I=(m.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=m.next,T.quick=T,R&&(typeof R=="object"&&c(R,m),T.state=function(){return c(m,{})}),T}n&&n.exports?n.exports=d:this.tychei=d})(t2,e)}(Tf)),Tf.exports}var Sf={exports:{}};const i2={},a2=Object.freeze(Object.defineProperty({__proto__:null,default:i2},Symbol.toStringTag,{value:"Module"})),o2=c1(a2);var l2=Sf.exports,yC;function s2(){return yC||(yC=1,function(e){(function(t,n,a){var s=256,c=6,d=52,f="random",h=a.pow(s,c),m=a.pow(2,d),R=m*2,T=s-1,S;function I(v,P,k){var w=[];P=P==!0?{entropy:!0}:P||{};var K=y(O(P.entropy?[v,L(n)]:v??x(),3),w),ne=new C(w),fe=function(){for(var ue=ne.g(c),he=h,Ee=0;ue<m;)ue=(ue+Ee)*s,he*=s,Ee=ne.g(1);for(;ue>=R;)ue/=2,he/=2,Ee>>>=1;return(ue+Ee)/he};return fe.int32=function(){return ne.g(4)|0},fe.quick=function(){return ne.g(4)/4294967296},fe.double=fe,y(L(ne.S),n),(P.pass||k||function(ue,he,Ee,q){return q&&(q.S&&_(q,ne),ue.state=function(){return _(ne,{})}),Ee?(a[f]=ue,he):ue})(fe,K,"global"in P?P.global:this==a,P.state)}function C(v){var P,k=v.length,w=this,K=0,ne=w.i=w.j=0,fe=w.S=[];for(k||(v=[k++]);K<s;)fe[K]=K++;for(K=0;K<s;K++)fe[K]=fe[ne=T&ne+v[K%k]+(P=fe[K])],fe[ne]=P;(w.g=function(ue){for(var he,Ee=0,q=w.i,Q=w.j,j=w.S;ue--;)he=j[q=T&q+1],Ee=Ee*s+j[T&(j[q]=j[Q=T&Q+he])+(j[Q]=he)];return w.i=q,w.j=Q,Ee})(s)}function _(v,P){return P.i=v.i,P.j=v.j,P.S=v.S.slice(),P}function O(v,P){var k=[],w=typeof v,K;if(P&&w=="object")for(K in v)try{k.push(O(v[K],P-1))}catch{}return k.length?k:w=="string"?v:v+"\0"}function y(v,P){for(var k=v+"",w,K=0;K<k.length;)P[T&K]=T&(w^=P[T&K]*19)+k.charCodeAt(K++);return L(P)}function x(){try{var v;return S&&(v=S.randomBytes)?v=v(s):(v=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(v)),L(v)}catch{var P=t.navigator,k=P&&P.plugins;return[+new Date,t,k,t.screen,L(n)]}}function L(v){return String.fromCharCode.apply(0,v)}if(y(a.random(),n),e.exports){e.exports=I;try{S=o2}catch{}}else a["seed"+f]=I})(typeof self<"u"?self:l2,[],Math)}(Sf)),Sf.exports}var YR,vC;function r2(){if(vC)return YR;vC=1;var e=VG(),t=XG(),n=ZG(),a=QG(),s=e2(),c=n2(),d=s2();return d.alea=e,d.xor128=t,d.xorwow=n,d.xorshift7=a,d.xor4096=s,d.tychei=c,YR=d,YR}var c2=r2();const MC=YT(c2);var Tc,Sc,ud,dd,uE,PO;class Jt{constructor(t){Ve(this,uE);J(this,"config");J(this,"rng");J(this,"nonProcRng");J(this,"lucidTickOffset");J(this,"dotTickOffset");J(this,"hotTickOffset");J(this,"time");J(this,"resources");J(this,"cooldowns");J(this,"eventsQueue");J(this,"skillsList");J(this,"displayedSkills");J(this,"autoAttackDelay");J(this,"overTimeEffectGroups",[]);J(this,"dotResources",[]);J(this,"hotResources",[]);J(this,"excludedDoTs",[]);J(this,"excludedHoTs",[]);J(this,"fullTimeDoTs",[]);Ve(this,Tc,[]);Ve(this,Sc,[]);J(this,"dotSkills",[]);J(this,"hotSkills",[]);Ve(this,ud,new Map);Ve(this,dd,new Map);this.config=t,this.rng=MC(t.randomSeed),this.nonProcRng=MC(t.randomSeed+"_nonProcs"),this.lucidTickOffset=this.nonProcRng()*3,this.dotTickOffset=this.nonProcRng()*3,this.hotTickOffset=this.nonProcRng()*3,this.time=0,this.resources=new jk(this),this.cooldowns=new Fk(this),ro(this.job).forEach((a,s)=>{a.isCoolDown?this.cooldowns.set(new Fe(s,a.cdPerStack,a.maxStacks,a.maxStacks)):this.resources.set(new ai(s,a.maxValue,a.defaultValue,a.warnOnOvercap))});let n=2.5;switch(mt[this.job].role){case"TANK":case"MELEE":case"RANGED":n=t.adjustedSksGCD();break;case"HEALER":case"CASTER":n=t.adjustedGCD();break}this.cooldowns.set(new Fe("cd_GCD",t.getAfterTaxGCD(n),1,1)),this.resources.set(new ai("MOVEMENT",1,1)),this.resources.set(new ai("NOT_ANIMATION_LOCKED",1,1)),this.resources.set(new ai("NOT_CASTER_TAXED",1,1)),this.resources.set(new ai("IN_COMBAT",1,0)),this.cooldowns.set(new Fe("NEVER",0,0,0)),this.eventsQueue=[],this.skillsList=new Vk(this),this.displayedSkills=new Wk(this.job,t.level),this.autoAttackDelay=2.5}get statusPropsGenerator(){return new Qt(this)}get job(){return this.config.job}get partySize(){return this.resources.get("PARTY_SIZE").availableAmount()}registerRecurringEvents(t=[],n=[]){const a=this;{const f=()=>{const h=this.resources.get("MANA"),m=this.captureManaRegenAmount();h.gain(m);const R=h.availableAmount();p.reportManaTick(a.time,"+"+m+" (MP="+R+")"),this.resources.addResourceEvent({rscType:"MANA",name:"mana tick",delay:3,fnOnRsc:T=>{f()},tags:[Ri.MpTick,Ri.ManaGain]})};this.resources.addResourceEvent({rscType:"MANA",name:"initial mana tick",delay:this.config.timeTillFirstManaTick,fnOnRsc:f,tags:[Ri.MpTick,Ri.ManaGain]})}const s=()=>{const f=this.resources.get("LUCID_DREAMING");if(f.available(1)&&(f.tickCount++,!(this.job==="BLM"&&this.hasResourceAvailable("ASTRAL_FIRE")))){const m=this.resources.get("MANA");m.gain(550);let R="+550";if(console.assert(f.node!==void 0),f.node){let T="??";f.node.tmp_startLockTime&&(T=(f.node.tmp_startLockTime-this.config.countdown).toFixed(3)),R+=" {skill}@"+T,R+=" ("+f.tickCount+"/7)"}R+=" (MP="+m.availableAmount()+")",p.reportLucidTick(this.time,R)}const h=new Me("lucid tick",3,()=>{s()});h.addTag(Ri.LucidTick),f.available(1)&&f.pendingChange&&f.pendingChange.timeTillEvent>=3&&h.addTag(Ri.ManaGain),this.addEvent(h)};if([...Oa,...Da].includes(this.job)){let f=this.config.timeTillFirstManaTick+this.lucidTickOffset;for(;f>3;)f-=3;const h=new Me("initial lucid tick",f,s);h.addTag(Ri.LucidTick),this.addEvent(h)}const c=()=>{this.dotResources.filter(f=>!this.excludedDoTs.includes(f)).forEach(f=>this.handleDoTTick(f)),this.getDisplayTime()>=0&&p.reportDotTick(this.time),this.addEvent(new Me("DoT tick",3,()=>{c()}))},d=()=>{this.hotResources.filter(f=>!this.excludedHoTs.includes(f)).forEach(f=>this.handleHoTTick(f)),this.getDisplayTime()>=0&&p.reportHotTick(this.time),this.addEvent(new Me("HoT tick",3,()=>{d()}))};if(t.forEach(f=>{f.groupedEffects.forEach(h=>{let m=this.dotResources,R=se(this,Tc),T=se(this,ud),S=this.excludedDoTs;f.isHealing&&(m=this.hotResources,R=se(this,Sc),T=se(this,dd),S=this.excludedHoTs),m.includes(h.effectName)?console.assert(!1,`${h.effectName} was registered as an over time effect multiple times for ${this.job}`):(m.push(h.effectName),h.appliedBy.forEach(I=>{!f.isHealing&&!this.dotSkills.includes(I)&&this.dotSkills.push(I),f.isHealing&&!this.hotSkills.includes(I)&&this.hotSkills.push(I)}),T.set(h.effectName,f.groupedEffects.filter(I=>I!==h).map(I=>I.effectName)),h.isGroundTargeted&&!R.includes(h.effectName)&&R.push(h.effectName),h.exclude&&!S.includes(h.effectName)&&S.push(h.effectName),!f.isHealing&&f.reportName&&!this.fullTimeDoTs.includes(h.effectName)&&this.fullTimeDoTs.push(h.effectName))})}),n.forEach(f=>this.dotSkills.push(f)),this.overTimeEffectGroups=t,this.dotResources.filter(f=>!this.excludedDoTs.includes(f)).length>0){let f=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;f>3;)f-=3;this.addEvent(new Me("initial DoT tick",f,c))}if(this.hotResources.filter(f=>!this.excludedHoTs.includes(f)).length>0){let f=this.config.timeTillFirstManaTick+this.hotTickOffset;for(;f>3;)f-=3;this.addEvent(new Me("initial HoT tick",f,d))}this.jobSpecificRegisterRecurringEvents()}onResolveOverTimeTick(t,n){n==="damage"?this.jobSpecificOnResolveDotTick(t):this.jobSpecificOnResolveHotTick(t)}inherentSpeedModifier(){}jobSpecificRegisterRecurringEvents(){}jobSpecificOnResolveDotTick(t){}jobSpecificOnResolveHotTick(t){}jobSpecificAddDamageBuffCovers(t,n){}jobSpecificAddSpeedBuffCovers(t,n){}jobSpecificAddHealingBuffCovers(t,n){}maybeCancelChanneledSkills(t){const n=this.skillsList.get(t);n&&(n.animationLockFn(this)<=Ni||this.cancelChanneledSkills())}cancelChanneledSkills(){}jobSpecificOnAutoAttack(){}onAutoAttack(){this.jobSpecificOnAutoAttack()}getStatusDuration(t){return Vt(this.job,t).maxTimeout}gainStatus(t,n=1){const a=this.resources.get(t),s=Vt(this.job,t);this.hasResourceAvailable(t)?(s.warnOnOvercap&&n>=a.availableAmount()&&p.reportWarning({kind:"overcap",rsc:t}),s.maxTimeout>0&&a.overrideTimer(this,s.maxTimeout),a.availableAmount()!==n&&a.overrideCurrentValue(n)):(a.gain(n),s.maxTimeout>0&&this.enqueueResourceDrop(t))}maybeGainProc(t,n=.5,a=!1){this.triggersEffect(n,a)&&this.gainStatus(t)}triggersEffect(t,n=!1){if(this.config.procMode===Ti.Never)return!1;const a=n?this.rng():void 0;return this.config.procMode===Ti.Always?!0:(a??this.rng())<t}handleDoTTick(t){this.handleOverTimeTick(t,"damage")}handleHoTTick(t){this.handleOverTimeTick(t,"healing")}handleOverTimeTick(t,n){const a=this.resources.get(t);if(a.availableAmountIncludingDisabled()>0){if(a.node&&a.enabled){const s=a.node.getOverTimePotencies(t,n)[a.tickCount];p.resolveOverTimePotency(s,n),this.onResolveOverTimeTick(t,n)}a.tickCount++}else a.node&&(a.node.removeUnresolvedOvertimePotencies(n),a.node=void 0)}tick(t,n=()=>!1){let a=0;for(;a<t&&this.eventsQueue.length>0&&!n();){this.eventsQueue.sort((f,h)=>f.timeTillEvent-h.timeTillEvent);const s=Math.min(t-a,this.eventsQueue[0].timeTillEvent);a=Math.min(a+s,t),this.time+=s,this.cooldowns.tick(s);const c=[];for(let f=0;f<this.eventsQueue.length;f++)c.push(this.eventsQueue[f]);c.forEach(f=>{f.timeTillEvent-=s});let d=0;c.forEach(f=>{f.timeTillEvent<=_n.epsilon&&(f.canceled||f.effectFn(),d++)}),this.eventsQueue.splice(0,d)}return a}addEvent(t){this.eventsQueue.push(t)}getDisplayTime(){return this.time-this.config.countdown}captureManaRegenAmount(){return this.isInCombat()?this.job in mS?bt.mpTick(this.config.level,this.config.piety):200:600}requestToggleBuff(t){const n=this.resources.get(t);if(t==="AUTOS_ENGAGED")return this.toggleAutosEngaged(),!0;if(Ye[t].mayBeToggled)return n.available(1)?(n.enabled=!1,!0):(n.enabled=!0,!0);if(Ye[t].mayNotBeCanceled)return!1;if(t==="MEDITATE"){const a=this.findNextQueuedEventByTag(Ri.MeditateTick);a&&(a.canceled=!0)}return t==="KARDIA"&&this.tryConsumeResource("KARDION"),(t==="TEN_CHI_JIN"||t==="MUDRA")&&(this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)),n.consume(n.availableAmount()),n.removeTimer(),!0}addRecurringAutoAttackEvent(t,n){const a=(s,c)=>{const d=new Me("aa tick",s,()=>{this.resources.get("AUTOS_ENGAGED").available(1)&&this.isInCombat()&&this.onAutoAttack(),this.addEvent(a(c,c))});return d.addTag(Ri.AutoTick),d};this.addEvent(a(t,n))}findAutoAttackTimerInQueue(){let t=-1;return this.eventsQueue.forEach(n=>{n.name==="aa tick"&&(t=n.timeTillEvent)}),t}startAutoAttackTimer(t,n,a){if(this.findAutoAttackTimerInQueue()!==-1)this.removeAutoAttackTimer();else if(this.resources.get("STORED_AUTO").available(1)){const f=new Me("stored auto",a||0,()=>{this.onAutoAttack()});this.addEvent(f)}this.tryConsumeResource("STORED_AUTO"),this.resources.get("AUTOS_ENGAGED").availableAmount()===0&&this.resources.get("AUTOS_ENGAGED").gain(1);const c=n||3;let d=0;t===-1?d=c:d=t??c,this.addRecurringAutoAttackEvent(d,c)}removeAutoAttackTimer(){let t=0;this.eventsQueue.forEach(n=>{n.name==="aa tick"&&this.eventsQueue.splice(t,1),t++})}toggleAutosEngaged(){const t=this.findAutoAttackTimerInQueue();if(this.resources.get("AUTOS_ENGAGED").availableAmount()===0)this.startAutoAttackTimer(t===-1?3:t);else if(this.resources.get("AUTOS_ENGAGED").consume(1),t!==-1){this.removeAutoAttackTimer();const n=new Me("aa tick",t,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(n)}}refreshAutoBasedOnSkill(t,n,a){const s=n!==0,c=this.resources.get("AUTOS_ENGAGED").available(1),d=this.autoAttackDelay,f=this.findAutoAttackTimerInQueue(),h=t.startsAuto;if(a){if(this.isInCombat()){if(s&&c){const m=n+(f===-1?d:f);this.startAutoAttackTimer(m,d,n)}else if(!s&&!c)h&&this.startAutoAttackTimer(f,d);else if(s&&!c){if(h){const m=n+(f===-1?d:f);this.startAutoAttackTimer(m,d,n)}else if(f>0){this.removeAutoAttackTimer();const m=new Me("aa tick",f+n,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(m)}}}else if(h){const m=n+(f===-1?d:f);this.startAutoAttackTimer(m,d,n)}}else if(this.isInCombat()){if(s&&c){const m=this.findAutoAttackTimerInQueue(),R=n+(m===-1?d:m);this.startAutoAttackTimer(R)}else if(s&&!c&&f>0){this.removeAutoAttackTimer();const m=new Me("aa tick",f+n,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(m)}}}useSpellOrWeaponskill(t,n,a){const s=this.cooldowns.get(t.cdName),d=!(this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(t.name))&&t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,f=t.castTimeFn(this),h=t.recastTimeFn(this);this.jobSpecificAddSpeedBuffCovers(n,t);const m=t.potencyFn(this);let R=n.getInitialPotency();const T=this.dotSkills.includes(t.name);!R&&(m>0||t.drawsAggro&&!this.isInCombat()||T)?(this.refreshAutoBasedOnSkill(t,f,!0),R=new ln({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:m,snapshotTime:void 0,description:"",targetCount:n.targetCount,falloff:t.falloff}),n.addPotency(R)):this.refreshAutoBasedOnSkill(t,f,!1);const S=t.healingPotencyFn(this);let I=n.getInitialHealingPotency();!I&&S>0&&(I=new ln({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:S,snapshotTime:void 0,description:"",targetCount:n.healTargetCount,falloff:0}),n.addHealingPotency(I));const C=()=>{const O=t.manaCostFn(this);O>this.resources.get("MANA").availableAmount()?p.reportInterruption({failNode:n,failIndex:a}):O>0&&this.resources.get("MANA").consume(O);const y=m>0||T;if(R&&(R.snapshotTime=this.getDisplayTime(),y)){const L=[];this.hasResourceAvailable("TINCTURE")&&L.push(X.Tincture),L.push(...t.jobPotencyModifiers(this)),R.modifiers=L}y&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(H.Tincture)&&n.addBuff(H.Tincture),this.jobSpecificAddDamageBuffCovers(n,t));const x=S>0;if(I){I.snapshotTime=this.getDisplayTime();const L=[];this.hasResourceAvailable("TINCTURE")&&L.push(X.Tincture),L.push(...t.jobHealingPotencyModifiers(this)),I.modifiers=L}if(x&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(H.Tincture)&&n.addBuff(H.Tincture),this.jobSpecificAddHealingBuffCovers(n,t)),t.onConfirm(this,n),this.addEvent(new Me(t.name+" applied",t.applicationDelay,()=>{R&&(p.resolvePotency(R),this.hasResourceAvailable("IN_COMBAT")||this.resources.get("IN_COMBAT").gain(1)),I&&p.resolveHealingPotency(I),t.onApplication(this,n)})),R&&!this.hasResourceAvailable("IN_COMBAT")){const L=this.resources.timeTillReady("IN_COMBAT");(L===0||L>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:v=>{v.gain(1)}})}};if(f===0||t.isInstantFn(this))this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this)),C();else{this.resources.takeResourceLock("MOVEMENT",f-Ta.getSlidecastWindow(f)),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(f));const O=f-Ta.getSlidecastWindow(f);this.addEvent(new Me(t.name+" captured",O,()=>{t.validateAttempt(this)?C():p.reportInterruption({failNode:n,failIndex:a})}))}s.useStackWithRecast(this.config.getAfterTaxGCD(h)),d==null||d.useStack()}useAbility(t,n){console.assert(n);const a=this.cooldowns.get(t.cdName),s=t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,c=t.potencyFn(this);let d;const f=this.dotSkills.includes(t.name);if((c>0||t.drawsAggro||f)&&(d=new ln({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:c,snapshotTime:this.getDisplayTime(),description:"",targetCount:n.targetCount,falloff:t.falloff})),d&&(c>0||f)){const _=[];this.hasResourceAvailable("TINCTURE")&&_.push(X.Tincture),_.push(...t.jobPotencyModifiers(this)),d.modifiers=_,n.addPotency(d)}const h=this.resources.get("AUTOS_ENGAGED").available(1),m=this.autoAttackDelay,R=this.findAutoAttackTimerInQueue(),T=t.startsAuto||d&&c>0;if(T)if(this.isInCombat())h||T&&this.startAutoAttackTimer(R,m);else{const _=R===-1?m:R;this.startAutoAttackTimer(_,m,void 0)}const S=t.healingPotencyFn(this);let I;if(S>0){I=new ln({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:S,snapshotTime:this.getDisplayTime(),description:"",targetCount:n.healTargetCount,falloff:0});const _=[];this.hasResourceAvailable("TINCTURE")&&_.push(X.Tincture),_.push(...t.jobHealingPotencyModifiers(this)),I.modifiers=_,n.addHealingPotency(I)}(c>0||f)&&!n.hasBuff(H.Tincture)&&(this.hasResourceAvailable("TINCTURE")&&n.addBuff(H.Tincture),this.jobSpecificAddDamageBuffCovers(n,t)),S>0&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(H.Tincture)&&n.addBuff(H.Tincture),this.jobSpecificAddHealingBuffCovers(n,t));const C=t.manaCostFn(this);if(C>0&&this.resources.get("MANA").consume(C),t.onConfirm(this,n),d&&!this.hasResourceAvailable("IN_COMBAT")){const _=this.resources.timeTillReady("IN_COMBAT");(_===0||_>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:O=>{O.gain(1)}})}t.applicationDelay>0?this.addEvent(new Me(t.name+" applied",t.applicationDelay,()=>{d&&p.resolvePotency(d),I&&p.resolveHealingPotency(I),t.onApplication(this,n)})):(d&&p.resolvePotency(d),I&&p.resolveHealingPotency(I),t.onApplication(this,n)),a.useStack(),s==null||s.useStack(),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this))}useLimitBreak(t,n,a){const s=this.cooldowns.get(t.cdName),c=t.castTimeFn(this),d=c>0?Ta.getSlidecastWindow(c):0,f=t.potencyFn(this);let h;f>0&&(h=new ln({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:f,snapshotTime:void 0,description:"",targetCount:n.targetCount,falloff:t.falloff}),n.addPotency(h));const m=t.healingPotencyFn(this);let R;m>0&&(R=new ln({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:m,snapshotTime:void 0,description:"",targetCount:n.healTargetCount,falloff:0}),n.addHealingPotency(R));const T=()=>{t.onConfirm(this,n),h&&(h.snapshotTime=this.getDisplayTime()),R&&(R.snapshotTime=this.getDisplayTime()),this.addEvent(new Me(t.name+" applied",t.applicationDelay,()=>{h&&p.resolvePotency(h),R&&p.resolveHealingPotency(R),t.onApplication(this,n)})),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",d+t.animationLockFn(this))};if(c===0)T();else{this.resources.takeResourceLock("MOVEMENT",c-d),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(c));const I=c-d;this.addEvent(new Me(t.name+" captured",I,()=>{t.validateAttempt(this)?T():p.reportInterruption({failNode:n,failIndex:a})}))}s.useStack()}timeTillAnySkillAvailable(){const t=this.resources.timeTillReady("NOT_ANIMATION_LOCKED"),n=this.resources.timeTillReady("NOT_CASTER_TAXED");return Math.max(t,n)}findNextQueuedEventByTag(t){for(let n=0;n<this.eventsQueue.length;n++){const a=this.eventsQueue[n];if(a.hasTag(t))return a}}hasResourceAvailable(t,n){return this.resources.get(t).available(n??1)}hasResourceExactly(t,n){return this.resources.get(t).availableAmount()===n}hitPositional(t){return this.hasResourceAvailable("TRUE_NORTH")||t==="flank"&&this.hasResourceAvailable("FLANK_POSITIONAL")||t==="rear"&&this.hasResourceAvailable("REAR_POSITIONAL")}hitCombo(t){return this.hasResourceExactly(t.resource,t.resourceValue)}computeComboAndPositionalModifiers(t,n,a){const s=[];return n&&this.hitCombo(n)?(s.push(yk(rn(this,n.potency)-t)),a&&this.hitPositional(a.location)&&s.push(vf(rn(this,a.comboPotency)-rn(this,n.potency)))):a&&this.hitPositional(a.location)&&s.push(vf(rn(this,a.potency)-t)),s}enqueueResourceDrop(t,n,a){if(n===void 0){const c=Vt(this.job,t);console.assert(c==null?void 0:c.maxTimeout,`could not find timeout declaration for resource ${t}`),n=c.maxTimeout}const s=(a===void 0?"drop all ":`drop ${a} `)+t;this.resources.get(t).removeTimer(),this.resources.addResourceEvent({rscType:t,name:s,delay:n,fnOnRsc:c=>{c.consume(a??c.availableAmountIncludingDisabled()),Vt(this.job,c.type).warnOnTimeout&&p.reportWarning({kind:"timeout",rsc:c.type})}})}getOverriddenDots(t){return se(this,ud).get(t)??[]}getOverriddenHots(t){return se(this,dd).get(t)??[]}applyDoT(t,n){this.applyOverTimeEffect(t,n,"damage")}applyHoT(t,n,a){this.applyOverTimeEffect(t,n,"healing",a)}applyOverTimeEffect(t,n,a,s){const c=this.resources.get(t),d=s??this.getStatusDuration(t);let f;if((a==="damage"?this.getOverriddenDots(t):this.getOverriddenHots(t)).forEach(m=>{if(m!==t){if(!this.hasResourceAvailable(m)){const R=this.resources.get(m).getLastExpirationTime();if(R){const T=this.getDisplayTime()-R;f=f===void 0?T:Math.min(f,T)}return}n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,a)+this.resources.timeTillReady(m),a),p.reportOverTimeDrop(this.getDisplayTime(),m,a),f=0,this.tryConsumeResource(m)}}),c.available(1))console.assert(c.node),c.node.removeUnresolvedOvertimePotencies(a),n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,a)+this.resources.timeTillReady(t),a),c.overrideTimer(this,d);else{const m=this.getDisplayTime()-(c.getLastExpirationTime()??0);f=f===void 0?m:Math.min(f,m),c.gain(1);const R=a==="damage"?" DoT":" HoT";p.reportOverTimeStart(this.getDisplayTime(),t,a),this.resources.addResourceEvent({rscType:t,name:"drop "+t+R,delay:d,fnOnRsc:T=>{T.consume(1),p.reportOverTimeDrop(this.getDisplayTime(),t,a)}})}n.setOverTimeGap(t,f??0,a),c.node=n,c.tickCount=0,se(this,Tc).includes(t)&&(this.handleDoTTick(t),p.reportDotTick(this.time,t)),se(this,Sc).includes(t)&&(this.handleHoTTick(t),p.reportHotTick(this.time,t))}addDoTPotencies(t){this.addOverTimePotencies(t,"damage")}addHoTPotencies(t,n){this.addOverTimePotencies(t,"healing",n)}addOverTimePotencies(t,n,a){const s=t.modifiers??[];this.hasResourceAvailable("TINCTURE")&&!s.includes(X.Tincture)&&(s.push(X.Tincture),t.node.addBuff(H.Tincture));const c=a??this.getStatusDuration(t.effectName),d=se(this,Tc).includes(t.effectName)||se(this,Sc).includes(t.effectName),f=Math.ceil(c/(t.tickFrequency??3))+(d?1:0),h=n==="damage"?"DoT":"HoT",m=n==="damage"?t.node.targetCount:t.node.healTargetCount;for(let R=0;R<f;R++){const T=new ln({config:p.record.config??p.gameConfig,sourceTime:this.getDisplayTime(),sourceSkill:t.skillName,aspect:t.aspect??_e.Other,basePotency:this.config.adjustedOvertimePotency(t.tickPotency,t.speedStat),snapshotTime:this.getDisplayTime(),description:$e(t.effectName)+` ${h} `+(R+1)+`/${f}`,targetCount:m,falloff:0});T.modifiers=s,t.node.addOverTimePotency(T,t.effectName,n)}}refreshDoT(t,n=!1){this.refreshOverTimeEffect(t,"damage",n)}refreshHoT(t,n=!1){this.refreshOverTimeEffect(t,"healing",n)}refreshOverTimeEffect(t,n,a){!a&&!this.hasResourceAvailable(t.effectName)||(this.addOverTimePotencies(t,n),this.applyOverTimeEffect(t.effectName,t.node,n))}timeTillNextMpGainEvent(){const t=this.findNextQueuedEventByTag(Ri.ManaGain);return t?t.timeTillEvent:0}timeTillNextDamageEvent(){return this.resources.timeTillReady("IN_COMBAT")}getSkillAvailabilityStatus(t,n=!1){const a=this.skillsList.get(t);let s=Oe(this,uE,PO).call(this,a.name);const c=a.manaCostFn(this),d=this.job==="BLM"&&this.resources.get("LEY_LINES").available(1),f=a.kind==="weaponskill"||a.kind==="spell"||a.kind==="limitbreak"?a.castTimeFn(this):0,h=f===0||a.kind==="ability"||a.kind!=="limitbreak"&&a.kind!=="unknown"&&a.isInstantFn(this),m=this.resources.get("MANA").availableAmount(),R=s>_n.epsilon,T=c<=m,S=a.validateAttempt(this),I=this.config.level>=a.unlockLevel,C=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(a.name),_=Wu();if(R&&_.addUnavailableReason(Tt.Blocked),!C&&a.secondaryCd&&this.cooldowns.get(a.secondaryCd.cdName).stacksAvailable()===0&&_.addUnavailableReason(Tt.SecondaryBlocked),I||_.addUnavailableReason(Tt.SkillNotUnlocked),S||_.addUnavailableReason(Tt.RequirementsNotMet),T||_.addUnavailableReason(Tt.NotEnoughMP),a.name==="MEDITATE"&&(s>_n.epsilon||this.cooldowns.get("cd_GCD").timeTillNextStackAvailable()>_n.epsilon)){const he=_.unavailableReasons.indexOf(Tt.RequirementsNotMet);he>=0&&_.unavailableReasons.splice(he,1),_.addUnavailableReason(Tt.Blocked)}a.requiresCombat&&_.unavailableReasons.includes(Tt.RequirementsNotMet)&&(_.addUnavailableReason(Tt.NotInCombat),s=this.timeTillNextDamageEvent());let O=this.cooldowns.get(a.cdName);const y=!C&&a.secondaryCd?this.cooldowns.get(a.secondaryCd.cdName):void 0;let x=O.timeTillNextStackAvailable()%O.currentStackCd();const L=!C&&a.secondaryCd?this.cooldowns.timeTillNextStackAvailable(a.secondaryCd.cdName):void 0;let v=O.currentStackCd();if(t==="MEDITATE"&&x<_n.epsilon){const he=this.cooldowns.get("cd_GCD"),Ee=he.currentStackCd();he.timeTillNextStackAvailable()>x&&(O=he,v=Ee,x=he.timeTillNextStackAvailable(),s=x)}if(C){const he=this.cooldowns.get("cd_GCD"),Ee=he.currentStackCd();O=he,v=Ee,x=he.timeTillNextStackAvailable(),s=x}const P=O.stacksAvailable(),k=O.maxStacks(),w=(y==null?void 0:y.currentStackCd())??0;let K=0;_.ready()&&(a.kind==="spell"?K=(h?0:f-Ta.getSlidecastWindow(f))+a.applicationDelay:a.kind==="limitbreak"?K=f+a.applicationDelay:K=a.applicationDelay);const ne=(y==null?void 0:y.stacksAvailable())??0,fe=(y==null?void 0:y.maxStacks())??0,ue=a.highlightIf(this);return{skillName:a.name,status:_,stacksAvailable:fe>0?ne:P,maxStacks:Math.max(k,fe),castTime:f,instantCast:h,cdRecastTime:v,secondaryCdRecastTime:w,timeTillNextStackReady:x,timeTillSecondaryReady:L,timeTillAvailable:s,timeTillDamageApplication:K,capturedManaCost:c,highlight:ue,llCovered:d,usedAt:this.getDisplayTime()}}useSkill(t,n,a){const s=this.skillsList.get(t);s.onExecute(this,n),s.falloff===void 0&&n.setTargetCount(1),s.aoeHeal&&n.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),s.kind==="spell"||s.kind==="weaponskill"?this.useSpellOrWeaponskill(s,n,a):s.kind==="ability"?this.useAbility(s,n):s.kind==="limitbreak"&&this.useLimitBreak(s,n,a)}useInvalidSkill(t,n){const a=this.skillsList.get(t);if(a.falloff===void 0&&n.setTargetCount(1),a.aoeHeal&&n.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),a.kind==="spell"||a.kind==="weaponskill"){const s=a.castTimeFn(this),c=a.recastTimeFn(this);s===0||a.isInstantFn(this)?this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",a.animationLockFn(this)):this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(s)),this.cooldowns.get("cd_GCD").useStackWithRecast(this.config.getAfterTaxGCD(c))}else if(a.kind==="ability")this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",a.animationLockFn(this));else if(a.kind==="limitbreak"){const s=a.castTimeFn(this),c=Ta.getSlidecastWindow(s);this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",c+a.animationLockFn(this))}}getPartyBuffs(t){const n=new Map;return p.timeline.getBuffMarkers().filter(s=>s.time<=t&&s.time+s.duration>=t).forEach(s=>{const c=new Xf(s.description);n.has(c.name)||(c.info.damageFactor===1?n.set(c.name,{kind:"critDirect",source:U.PARTY,buffType:c.name,critBonus:c.info.critBonus,dhBonus:c.info.dhBonus}):n.set(c.name,{kind:"multiplier",source:U.PARTY,buffType:c.name,potencyFactor:c.info.damageFactor}))}),n}tryConsumeResource(t,n=!1){const a=this.resources.get(t),s=n?a.availableAmount():1;return s>0&&a.available(s)?(a.consume(s),a.available(s)||a.removeTimer(),!0):!1}setComboState(t,n){n===0?this.tryConsumeResource(t,!0):(this.resources.get(t).overrideCurrentValue(n),this.enqueueResourceDrop(t,30))}hasTraitUnlocked(t){return C0(t,this.config.level)}isInCombat(){return this.hasResourceAvailable("IN_COMBAT")}}Tc=new WeakMap,Sc=new WeakMap,ud=new WeakMap,dd=new WeakMap,uE=new WeakSet,PO=function(t){var d;const n=this.skillsList.get(t),s=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(n.name)||(d=n.secondaryCd)==null?void 0:d.cdName;let c=this.cooldowns.timeTillAnyStackAvailable(n.cdName);return s&&(c=Math.max(c,this.cooldowns.timeTillAnyStackAvailable(s))),Math.max(this.timeTillAnySkillAvailable(),c)};const GO=["THUNDER_III","THUNDER_IV","HIGH_THUNDER","HIGH_THUNDER_II"],u2=Object.keys(XT).filter(e=>!GO.includes(e));Object.keys(XT).forEach(e=>Wt(e,`BLM/${Ye[e].name}.png`));class d2 extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[...GO.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return u2.map(t=>t==="LEY_LINES"?this.makeToggleableTimer(t):t==="THUNDERHEAD"||t==="FIRESTARTER"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources.get("ENOCHIAN"),a=this.state.resources,s=this.state.getFireStacks(),c=this.state.getIceStacks(),d=a.get("UMBRAL_HEART").availableAmount(),f=a.get("PARADOX").availableAmount(),h=a.get("ASTRAL_SOUL").availableAmount(),m=n.available(1)?a.timeTillReady("POLYGLOT"):30,R=a.get("POLYGLOT").availableAmount(),T=this.state.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.state.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1,S=[{kind:"counter",name:g({en:"AF/UI",zh:"",ja:"AF/UB"}),color:s>0?t.blm.astralFire:t.blm.umbralIce,currentStacks:s>0?s:c,maxStacks:3},{kind:"counter",name:g({en:"hearts",zh:"",ja:""}),color:t.blm.umbralHeart,currentStacks:d,maxStacks:3},{kind:"counter",name:g({en:"paradox",zh:"",ja:""}),color:t.blm.paradox,currentStacks:f,maxStacks:1}];return this.state.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&S.push({kind:"counter",name:g({en:"astral soul",zh:"",ja:""}),color:t.blm.astralSoul,currentStacks:h,maxStacks:6}),S.push({kind:"bar",name:g({en:"poly timer",zh:"",ja:""}),color:t.blm.polyTimer,progress:1-m/30,valueString:m.toFixed(3)},{kind:"counter",name:g({en:"poly stacks",zh:"",ja:""}),color:t.blm.polyStacks,currentStacks:R,maxStacks:T}),S}}const Ei=(e,t,n)=>{Qe("BLM",e,t,n??{})};Ei("POLYGLOT",3,{timeout:30,warnOnOvercap:!0});Ei("ASTRAL_FIRE",3);Ei("UMBRAL_ICE",3);Ei("UMBRAL_HEART",3);Ei("ASTRAL_SOUL",6);Ei("LEY_LINES",1,{timeout:20});Ei("ENOCHIAN",1);Ei("PARADOX",1);Ei("FIRESTARTER",1);Ei("THUNDERHEAD",1);Ei("THUNDER_III",1,{timeout:27});Ei("THUNDER_IV",1,{timeout:21});Ei("HIGH_THUNDER",1,{timeout:30});Ei("HIGH_THUNDER_II",1,{timeout:24});Ei("MANAWARD",1,{timeout:20});Ei("TRIPLECAST",3,{timeout:15.7});class h2 extends Jt{constructor(n){super(n);J(this,"thunderTickOffset");n.initialResourceOverrides.some(f=>(f.type==="ASTRAL_FIRE"||f.type==="UMBRAL_ICE")&&f.stacks>0)&&this.gainStatus("ENOCHIAN"),this.thunderTickOffset=this.nonProcRng()*3;const s=this.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1;this.resources.set(new ai("POLYGLOT",s,0,!0));const c=this.hasTraitUnlocked("ENHANCED_MANAFONT")&&100||120,d=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new Fe("cd_MANAFONT",c,1,1),new Fe("cd_SWIFTCAST",d,1,1)].forEach(f=>this.cooldowns.set(f)),this.registerRecurringEvents([{reportName:g({en:"Thunder DoT",zh:"DoT"}),groupedEffects:[{effectName:"HIGH_THUNDER",appliedBy:["HIGH_THUNDER"]},{effectName:"HIGH_THUNDER_II",appliedBy:["HIGH_THUNDER_II"]},{effectName:"THUNDER_III",appliedBy:["THUNDER_III"]},{effectName:"THUNDER_IV",appliedBy:["THUNDER_IV"]}]}])}get statusPropsGenerator(){return new d2(this)}jobSpecificRegisterRecurringEvents(){const n=a=>{this.hasEnochian()&&a.gain(1),this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:n})};this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:n})}jobSpecificAddSpeedBuffCovers(n,a){this.hasResourceAvailable("LEY_LINES")&&a.cdName==="cd_GCD"&&n.addBuff(H.LeyLines)}captureManaRegenAmount(){return this.getFireStacks()>0?0:200}getFireStacks(){return this.resources.get("ASTRAL_FIRE").availableAmount()}getIceStacks(){return this.resources.get("UMBRAL_ICE").availableAmount()}getUmbralHearts(){return this.resources.get("UMBRAL_HEART").availableAmount()}getMP(){return this.resources.get("MANA").availableAmount()}switchToAForUI(n,a){console.assert(a>0);const s=this.resources.get("ASTRAL_FIRE"),c=this.resources.get("UMBRAL_ICE"),d=this.resources.get("UMBRAL_HEART"),f=this.resources.get("PARADOX"),h=this.resources.get("ASTRAL_SOUL");n==="ASTRAL_FIRE"?(s.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),s.gain(a),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&c.available(3)&&d.available(3)&&f.gain(1),c.consume(c.availableAmount())):n==="UMBRAL_ICE"&&(c.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),c.gain(a),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&s.available(3)&&f.gain(1),s.consume(s.availableAmount()),h.consume(h.availableAmount()))}gainUmbralMana(n=0){let a=0;switch(this.resources.get("UMBRAL_ICE").availableAmount()){case 1:a=2500;break;case 2:a=5e3;break;case 3:a=1e4;break;default:a=0;break}this.addEvent(new Me("gain umbral mana",n,()=>{this.resources.get("MANA").gain(a)}))}captureManaCost(n,a,s){const c=this.getIceStacks(),d=this.getFireStacks(),f=this.getUmbralHearts();if(n==="PARADOX"&&this.getIceStacks()>0||n==="FIRE_III"&&this.hasResourceAvailable("FIRESTARTER"))return 0;let h=1;return a===_e.Fire&&c>0||a===_e.Ice&&(c>0||d>0)?h=0:a===_e.Fire&&d>0&&f===0&&(h=2),s*h}captureSpellCastTimeAFUI(n,a){const s=this.config.adjustedCastTime(n,this.hasResourceAvailable("LEY_LINES")?15:void 0);let c=1;return(a===_e.Fire&&this.getIceStacks()===3||a===_e.Ice&&this.getFireStacks()===3)&&(c=.5),s*c}hasEnochian(){return this.hasResourceAvailable("ENOCHIAN")}startOrRefreshEnochian(){const n=this.resources.get("ENOCHIAN");n.available(1)||(this.resources.get("POLYGLOT").overrideTimer(this,30),n.gain(1))}loseEnochian(){["ENOCHIAN","ASTRAL_FIRE","UMBRAL_ICE","UMBRAL_HEART","PARADOX","ASTRAL_SOUL"].forEach(a=>this.tryConsumeResource(a,!0))}}const BO=e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,BS=e=>e.hasResourceAvailable("PARADOX"),FO=e=>e.hasTraitUnlocked("ENHANCED_ENOCHIAN_IV")&&1.27||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_III")&&1.22||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_II")&&1.15||1.1,un=(e,t,n)=>{const a=n.aspect??_e.Other,s=we((c,d)=>{n.baseCastTime===0||e==="DESPAIR"&&c.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&c.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&c.hasResourceAvailable("FIRESTARTER")||c.tryConsumeResource("SWIFTCAST")||c.tryConsumeResource("TRIPLECAST")},(c,d)=>{c.getFireStacks()>0&&a===_e.Fire&&!["DESPAIR","FLARE_STAR","FLARE"].includes(e)&&!(e==="FIRE_III"&&c.hasResourceAvailable("FIRESTARTER"))&&c.tryConsumeResource("UMBRAL_HEART"),a===_e.Ice&&c.gainUmbralMana(n.applicationDelay)},n.onConfirm);return ia("BLM",e,t,{...n,aspect:a,castTime:c=>c.captureSpellCastTimeAFUI(n.baseCastTime,a),recastTime:c=>c.config.adjustedGCD(2.5,c.hasResourceAvailable("LEY_LINES")?15:0),manaCost:c=>c.captureManaCost(e,a,n.baseManaCost),potency:c=>n.basePotency,isInstantFn:c=>e==="DESPAIR"&&c.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&c.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&c.hasResourceAvailable("FIRESTARTER")||c.hasResourceAvailable("SWIFTCAST")||c.hasResourceAvailable("TRIPLECAST"),onConfirm:s,jobPotencyModifiers:c=>{const d=[];if(c.hasResourceAvailable("ENOCHIAN")){const m=FO(c);d.push({kind:"multiplier",source:U.ENO,potencyFactor:m})}const f=c.getIceStacks(),h=c.getFireStacks();return f===1?a===_e.Fire?d.push({kind:"multiplier",source:U.UI1,potencyFactor:.9}):a===_e.Ice&&d.push({kind:"multiplier",source:U.UI1,potencyFactor:1}):f===2?a===_e.Fire?d.push({kind:"multiplier",source:U.UI2,potencyFactor:.8}):a===_e.Ice&&d.push({kind:"multiplier",source:U.UI2,potencyFactor:1}):f===3&&(a===_e.Fire?d.push({kind:"multiplier",source:U.UI3,potencyFactor:.7}):a===_e.Ice&&d.push({kind:"multiplier",source:U.UI3,potencyFactor:1})),h===1?a===_e.Ice?d.push({kind:"multiplier",source:U.AF1,potencyFactor:.9}):a===_e.Fire&&d.push({kind:"multiplier",source:U.AF1,potencyFactor:1.4}):h===2?a===_e.Ice?d.push({kind:"multiplier",source:U.AF2,potencyFactor:.8}):a===_e.Fire&&d.push({kind:"multiplier",source:U.AF2,potencyFactor:1.6}):h===3&&(a===_e.Ice?d.push({kind:"multiplier",source:U.AF3,potencyFactor:.7}):a===_e.Fire&&d.push({kind:"multiplier",source:U.AF3,potencyFactor:1.8})),d}})},qs=(e,t,n,a)=>ut("BLM",e,t,n,a);un("BLIZZARD",1,{aspect:_e.Ice,baseCastTime:2,baseManaCost:400,basePotency:180,applicationDelay:.846,onConfirm:(e,t)=>{e.getFireStacks()===0?(e.switchToAForUI("UMBRAL_ICE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:BS}]});un("FIRE",2,{aspect:_e.Fire,baseCastTime:2,baseManaCost:800,basePotency:180,applicationDelay:1.871,onConfirm:(e,t)=>{e.triggersEffect(.4,!0)&&e.gainStatus("FIRESTARTER"),e.getIceStacks()===0?(e.switchToAForUI("ASTRAL_FIRE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:BS}]});qs("TRANSPOSE",4,"cd_TRANSPOSE",{applicationDelay:0,cooldown:5,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{(e.getFireStacks()!==0||e.getIceStacks()!==0)&&(e.switchToAForUI(e.getFireStacks()>0?"UMBRAL_ICE":"ASTRAL_FIRE",1),e.startOrRefreshEnochian())}});const ME=(e,t)=>(n,a)=>{let s=0;switch(e){case"HIGH_THUNDER":s=60;break;case"THUNDER_III":s=50;break;case"THUNDER_IV":s=35;break;case"HIGH_THUNDER_II":s=40;break}const c=[];if(n.hasResourceAvailable("ENOCHIAN")){const d=FO(n);c.push({kind:"multiplier",source:U.ENO,potencyFactor:d})}console.assert(s>0,`${e} was applied as a Thunder DoT`),n.addDoTPotencies({node:a,effectName:t,skillName:e,tickPotency:s,speedStat:"sps",aspect:_e.Lightning,modifiers:c}),n.tryConsumeResource("THUNDERHEAD")};un("THUNDER_III",45,{aspect:_e.Lightning,baseCastTime:0,baseManaCost:0,basePotency:120,applicationDelay:1.03,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:ME("THUNDER_III","THUNDER_III"),onApplication:(e,t)=>e.applyDoT("THUNDER_III",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});qe("BLM","MANAWARD",30,"cd_MANAWARD",{rscType:"MANAWARD",applicationDelay:1.114,cooldown:120});qs("MANAFONT",30,"cd_MANAFONT",{applicationDelay:.2,cooldown:100,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e=e,e.resources.get("ASTRAL_FIRE").gain(3),e.resources.get("UMBRAL_HEART").gain(3),e.hasTraitUnlocked("ASPECT_MASTERY_V")&&e.resources.get("PARADOX").gain(1),e.gainStatus("THUNDERHEAD"),e.startOrRefreshEnochian()},onApplication:(e,t)=>{e.resources.get("MANA").gain(1e4)}});un("FIRE_III",35,{aspect:_e.Fire,baseCastTime:3.5,baseManaCost:2e3,basePotency:290,applicationDelay:1.292,onConfirm:(e,t)=>{e.tryConsumeResource("FIRESTARTER"),e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()},highlightIf:e=>e.hasResourceAvailable("FIRESTARTER")});un("BLIZZARD_III",35,{aspect:_e.Ice,baseCastTime:3.5,baseManaCost:800,basePotency:290,applicationDelay:.89,onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});un("FREEZE",40,{aspect:_e.Ice,baseCastTime:2,baseManaCost:1e3,basePotency:120,applicationDelay:.664,falloff:0,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});un("FLARE",50,{aspect:_e.Fire,baseCastTime:2,baseManaCost:0,basePotency:240,applicationDelay:1.157,falloff:.3,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const n=e.resources.get("UMBRAL_HEART"),a=e.resources.get("MANA"),s=n.available(1)?a.availableAmount()*.66:a.availableAmount();e.resources.get("MANA").consume(s),n.consume(n.availableAmount()),e.resources.get("ASTRAL_FIRE").gain(3),e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(3),e.startOrRefreshEnochian()}});qe("BLM","LEY_LINES",52,"cd_LEY_LINES",{rscType:"LEY_LINES",applicationDelay:.49,cooldown:120,maxCharges:2,validateAttempt:e=>!(e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0),onApplication:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0},replaceIf:[{newSkill:"RETRACE",condition:BO}]});un("BLIZZARD_IV",58,{aspect:_e.Ice,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.156,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});un("FIRE_IV",60,{aspect:_e.Fire,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.159,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(1)}});qs("BETWEEN_THE_LINES",62,"cd_BETWEEN_THE_LINES",{applicationDelay:0,cooldown:3,animationLock:$t,validateAttempt:e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,onConfirm:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0}});qs("AETHERIAL_MANIPULATION",50,"cd_AETHERIAL_MANIPULATION",{applicationDelay:0,cooldown:10,animationLock:$t});qs("TRIPLECAST",66,"cd_TRIPLECAST",{applicationDelay:0,cooldown:60,maxCharges:2,onApplication:(e,t)=>e.gainStatus("TRIPLECAST",3)});un("FOUL",70,{baseCastTime:2,baseManaCost:0,basePotency:600,falloff:.25,applicationDelay:1.158,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});un("DESPAIR",72,{aspect:_e.Fire,baseCastTime:2,baseManaCost:0,basePotency:350,applicationDelay:.556,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const n=e.resources.get("MANA"),a=n.availableAmount();console.assert(a>=800,`tried to confirm despair at ${a} MP`),n.consume(a),e.resources.get("ASTRAL_FIRE").gain(3),e.startOrRefreshEnochian()}});un("UMBRAL_SOUL",35,{aspect:_e.Ice,baseCastTime:0,baseManaCost:0,basePotency:0,applicationDelay:.633,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>{e.resources.get("UMBRAL_ICE").gain(1),e.resources.get("UMBRAL_HEART").gain(1)}});un("XENOGLOSSY",80,{baseCastTime:0,baseManaCost:0,basePotency:890,applicationDelay:.63,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});un("FIRE_II",18,{aspect:_e.Fire,baseCastTime:3,baseManaCost:1500,basePotency:80,falloff:0,applicationDelay:1.154,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});un("BLIZZARD_II",12,{aspect:_e.Ice,baseCastTime:3,baseManaCost:800,basePotency:80,falloff:0,applicationDelay:1.158,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});un("HIGH_FIRE_II",82,{aspect:_e.Fire,baseCastTime:3,baseManaCost:1500,basePotency:100,falloff:0,applicationDelay:1.154,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});un("HIGH_BLIZZARD_II",82,{aspect:_e.Ice,baseCastTime:3,baseManaCost:800,basePotency:100,falloff:0,applicationDelay:1.158,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});qs("AMPLIFIER",86,"cd_AMPLIFIER",{applicationDelay:0,cooldown:120,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{e.resources.get("POLYGLOT").gain(1)}});un("PARADOX",90,{baseCastTime:0,baseManaCost:1600,basePotency:540,applicationDelay:.624,validateAttempt:BS,onConfirm:(e,t)=>{e.resources.get("PARADOX").consume(1),e.getFireStacks()>0?e.gainStatus("FIRESTARTER"):e.getIceStacks()===0&&console.error("cannot cast Paradox outside of AF/UI")},replaceIf:[{newSkill:"BLIZZARD",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getIceStacks()>0},{newSkill:"FIRE",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getFireStacks()>0}],startOnHotbar:!1,highlightIf:e=>!0});un("HIGH_THUNDER",92,{aspect:_e.Lightning,baseCastTime:0,baseManaCost:0,basePotency:150,applicationDelay:.757,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:ME("HIGH_THUNDER","HIGH_THUNDER"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_III"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});un("FLARE_STAR",100,{aspect:_e.Fire,baseCastTime:2,baseManaCost:0,basePotency:500,falloff:.65,applicationDelay:.622,validateAttempt:e=>e.hasResourceAvailable("ASTRAL_SOUL",6),onConfirm:(e,t)=>e.tryConsumeResource("ASTRAL_SOUL",!0),highlightIf:e=>e.hasResourceAvailable("ASTRAL_SOUL",6)});un("THUNDER_IV",64,{aspect:_e.Lightning,baseCastTime:0,baseManaCost:0,basePotency:80,falloff:0,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:ME("THUNDER_IV","THUNDER_IV"),onApplication:(e,t)=>e.applyDoT("THUNDER_IV",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER_II"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});un("HIGH_THUNDER_II",92,{aspect:_e.Lightning,baseCastTime:0,baseManaCost:0,basePotency:100,falloff:0,applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:ME("HIGH_THUNDER_II","HIGH_THUNDER_II"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER_II",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_IV"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});qs("RETRACE",96,"cd_RETRACE",{applicationDelay:0,cooldown:40,validateAttempt:BO,onConfirm:(e,t)=>{const n=e.resources.get("LEY_LINES");n.enabled=!0,console.assert(n.pendingChange!==void 0,"LL should def have a timer when Retrace is used"),n.pendingChange.timeTillEvent=Math.floor(n.pendingChange.timeTillEvent)+.5},startOnHotbar:!1});const jO=["CAUSTIC_BITE","STORMBITE"],f2=Object.keys(qT).filter(e=>!jO.includes(e));Object.keys(qT).forEach(e=>Wt(e,`BRD/${Ye[e].name}.png`));class E2 extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[...jO.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return[...f2.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,a=n.get("PITCH_PERFECT"),s=n.get("REPERTOIRE"),c=[{kind:"counter",name:g({en:"Pitch Perfect"}),color:t.brd.pitchPerfect,currentStacks:a.availableAmount(),maxStacks:a.maxValue},{kind:"counter",name:g({en:"Paeon Repertoire"}),color:t.brd.repertoire,currentStacks:s.availableAmount(),maxStacks:s.maxValue}];if(this.state.hasTraitUnlocked("SOUL_VOICE")){const d=n.get("SOUL_VOICE");c.push({kind:"bar",name:g({en:"Soul Voice"}),color:t.brd.soulVoice,progress:d.availableAmount()/d.maxValue,valueString:d.availableAmount().toFixed(0)})}return this.state.hasTraitUnlocked("MINSTRELS_CODA")&&c.push({kind:"coda",name:g({en:"Coda"}),hasWanderers:this.state.hasResourceAvailable("WANDERERS_CODA"),hasMages:this.state.hasResourceAvailable("MAGES_CODA"),hasArmys:this.state.hasResourceAvailable("ARMYS_CODA"),wanderersColor:t.brd.wanderersCoda,magesColor:t.brd.magesCoda,armysColor:t.brd.armysCoda}),c}}const wt=(e,t,n)=>{Qe("BRD",e,t,n??{})};wt("SOUL_VOICE",100,{warnOnOvercap:!0});wt("PITCH_PERFECT",3);wt("REPERTOIRE",4);wt("WANDERERS_CODA",1,{warnOnOvercap:!0});wt("MAGES_CODA",1,{warnOnOvercap:!0});wt("ARMYS_CODA",1,{warnOnOvercap:!0});wt("ETHOS_REPERTOIRE",4);wt("MUSE_REPERTOIRE",4);wt("HAWKS_EYE",1,{timeout:30});wt("RAGING_STRIKES",1,{timeout:20});wt("BARRAGE",1,{timeout:10});wt("ARMYS_MUSE",4,{timeout:10});wt("ARMYS_ETHOS",4,{timeout:30});wt("BLAST_ARROW_READY",1,{timeout:10});wt("RESONANT_ARROW_READY",1,{timeout:30});wt("RADIANT_ENCORE_READY",1,{timeout:30});wt("MAGES_BALLAD",1,{timeout:45});wt("ARMYS_PAEON",1,{timeout:45});wt("WANDERERS_MINUET",1,{timeout:45});wt("BATTLE_VOICE",1,{timeout:20});wt("WARDENS_PAEAN",1,{timeout:30});wt("TROUBADOUR",1,{timeout:15});wt("NATURES_MINNE",1,{timeout:15});wt("RADIANT_FINALE",1,{timeout:20});wt("RADIANT_CODA",3);wt("CAUSTIC_BITE",1,{timeout:45});wt("STORMBITE",1,{timeout:45});const LC=["WANDERERS_MINUET","MAGES_BALLAD","ARMYS_PAEON"],m2=["REFULGENT_ARROW","SHADOWBITE","WIDE_VOLLEY"];class A2 extends Jt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_BLOODLETTER")||this.cooldowns.set(new Fe("cd_HEARTBREAK_SHOT",15,2,2)),this.hasTraitUnlocked("ENHANCED_TROUBADOUR")||this.cooldowns.set(new Fe("cd_TROUBADOUR",120,1,1)),this.registerRecurringEvents([{reportName:$e("STORMBITE"),groupedEffects:[{effectName:"STORMBITE",appliedBy:["STORMBITE","IRON_JAWS"]}]},{reportName:$e("CAUSTIC_BITE"),groupedEffects:[{effectName:"CAUSTIC_BITE",appliedBy:["CAUSTIC_BITE","IRON_JAWS"]}]}])}get statusPropsGenerator(){return new E2(this)}jobSpecificAddDamageBuffCovers(t,n){switch(this.hasResourceAvailable("RAGING_STRIKES")&&t.addBuff(H.RagingStrikes),this.hasResourceAvailable("BATTLE_VOICE")&&t.addBuff(H.BattleVoice),this.resources.get("RADIANT_FINALE").availableAmount()){case 1:t.addBuff(H.RadiantFinale1);break;case 2:t.addBuff(H.RadiantFinale2);break;case 3:t.addBuff(H.RadiantFinale3);break}this.hasResourceAvailable("BARRAGE")&&m2.includes(n.name)&&t.addBuff(H.Barrage),this.hasResourceAvailable("WANDERERS_MINUET")?t.addBuff(H.WanderersMinuet):this.hasResourceAvailable("MAGES_BALLAD")?t.addBuff(H.MagesBallad):this.hasResourceAvailable("ARMYS_PAEON")&&t.addBuff(H.ArmysPaeon)}songTick(t){this.resourceIsSong(t)&&this.hasResourceAvailable(t)&&(this.triggersEffect(.8)&&this.gainRepertoireEffect(t),this.resources.timeTillReady(t)>3+_n.epsilon&&this.addEvent(new Me(`${t} tick`,3,()=>{this.songTick(t)})))}gainRepertoireEffect(t){if(t||(this.hasResourceAvailable("WANDERERS_MINUET")?t="WANDERERS_MINUET":this.hasResourceAvailable("MAGES_BALLAD")?t="MAGES_BALLAD":this.hasResourceAvailable("ARMYS_PAEON")&&(t="ARMYS_PAEON")),!!t&&this.resourceIsSong(t)){switch(t){case"WANDERERS_MINUET":this.resources.get("PITCH_PERFECT").gain(1);break;case"MAGES_BALLAD":this.cooldowns.get("cd_HEARTBREAK_SHOT").restore(7.5);break;case"ARMYS_PAEON":this.resources.get("REPERTOIRE").gain(1);break}this.hasTraitUnlocked("SOUL_VOICE")&&this.resources.get("SOUL_VOICE").gain(5)}}resourceIsSong(t){return LC.includes(t)}beginSong(t){if(this.resourceIsSong(t)){if(LC.forEach(n=>this.tryExpireSong(n)),t!=="ARMYS_PAEON"&&this.hasResourceAvailable("ARMYS_ETHOS")){const n=this.resources.get("ETHOS_REPERTOIRE").availableAmount();this.resources.get("MUSE_REPERTOIRE").gain(n),this.tryConsumeResource("ARMYS_ETHOS"),this.tryConsumeResource("ETHOS_REPERTOIRE",!0),this.gainStatus("ARMYS_MUSE")}if(this.hasTraitUnlocked("MINSTRELS_CODA")){const n=t==="WANDERERS_MINUET"?"WANDERERS_CODA":t==="MAGES_BALLAD"?"MAGES_CODA":"ARMYS_CODA";this.resources.get(n).gain(1)}this.resources.get(t).gain(1),this.resources.addResourceEvent({rscType:t,name:"drop "+t,delay:this.getStatusDuration(t),fnOnRsc:n=>this.tryExpireSong(t)}),this.addEvent(new Me(`${t} tick`,3,()=>{this.songTick(t)}))}}tryExpireSong(t){if(this.resourceIsSong(t)&&this.hasResourceAvailable(t)){switch(t){case"WANDERERS_MINUET":this.tryConsumeResource("PITCH_PERFECT",!0);break;case"ARMYS_PAEON":if(this.hasTraitUnlocked("ENHANCED_ARMYS_PAEON")){const n=this.resources.get("REPERTOIRE").availableAmount();n>0&&(this.resources.get("ETHOS_REPERTOIRE").gain(n),this.gainStatus("ARMYS_ETHOS")),this.tryConsumeResource("MUSE_REPERTOIRE",!0)}this.tryConsumeResource("REPERTOIRE",!0);break}this.tryConsumeResource(t)}}getCodaCount(){const t=this.resources.get("WANDERERS_CODA").availableAmount(),n=this.resources.get("MAGES_CODA").availableAmount(),a=this.resources.get("ARMYS_CODA").availableAmount();return t+n+a}getJobPotencyModifiers(t){const n=[];if([{rscType:"WANDERERS_MINUET",mod:X.WanderersMinuet},{rscType:"MAGES_BALLAD",mod:X.MagesBallad},{rscType:"ARMYS_PAEON",mod:X.ArmysPaeon},{rscType:"RAGING_STRIKES",mod:X.RagingStrikes},{rscType:"BATTLE_VOICE",mod:X.BattleVoice}].forEach(s=>{this.hasResourceAvailable(s.rscType)&&n.push(s.mod)}),this.hasResourceAvailable("RADIANT_FINALE")){const s=this.resources.get("RADIANT_CODA").availableAmount();s===3?n.push(X.RadiantFinaleThreeCoda):s===2?n.push(X.RadiantFinaleTwoCoda):s===1&&n.push(X.RadiantFinaleOneCoda)}if(this.hasResourceAvailable("BARRAGE"))switch(t){case"REFULGENT_ARROW":n.push(X.BarrageRefulgent);break;case"SHADOWBITE":n.push(X.BarrageShadowbite);break;case"WIDE_VOLLEY":n.push(X.BarrageWideVolley);break}return n}getSpeedModifier(t){if(t==="ARMYS_PAEON")return this.resources.get("REPERTOIRE").availableAmount()*4;if(t==="ARMYS_MUSE"){const n=this.resources.get("MUSE_REPERTOIRE").availableAmount();return n===4?12:n===3?4:n}return 0}}const aa=(e,t,n)=>cn("BRD",e,t,{...n,recastTime:a=>{let s;a.hasResourceAvailable("ARMYS_PAEON")?s="ARMYS_PAEON":a.hasResourceAvailable("ARMYS_MUSE")&&(s="ARMYS_MUSE");const c=a.getSpeedModifier(s);return a.config.adjustedSksGCD(2.5,c)},jobPotencyModifiers:a=>a.getJobPotencyModifiers(e)}),Wl=(e,t,n,a)=>ut("BRD",e,t,n,{...a,jobPotencyModifiers:s=>s.getJobPotencyModifiers(e)}),Zs=(e,t,n,a)=>qe("BRD",e,t,n,a);aa("HEAVY_SHOT",1,{potency:160,applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),autoUpgrade:{trait:"HEAVY_SHOT_MASTERY",otherSkill:"BURST_SHOT"}});aa("BURST_SHOT",1,{startOnHotbar:!1,potency:[["NEVER",200],["RANGED_MASTERY",220]],applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});aa("REFULGENT_ARROW",70,{potency:[["NEVER",260],["RANGED_MASTERY",280]],applicationDelay:1.47,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});const CT=[{skillName:"CAUSTIC_BITE",dotName:"CAUSTIC_BITE",initialPotency:150,tickPotency:20},{skillName:"STORMBITE",dotName:"STORMBITE",initialPotency:100,tickPotency:25}];CT.forEach(e=>{aa(e.skillName,1,{potency:e.initialPotency,applicationDelay:1.29,onConfirm:(t,n)=>t.addDoTPotencies({node:n,effectName:e.dotName,skillName:e.skillName,tickPotency:e.tickPotency,speedStat:"sks",modifiers:t.getJobPotencyModifiers(e.skillName)}),onApplication:(t,n)=>{t.applyDoT(e.dotName,n),t.hasTraitUnlocked("BITE_MASTERY_II")&&t.maybeGainProc("HAWKS_EYE",.35)}})});aa("IRON_JAWS",56,{potency:100,applicationDelay:.67,onConfirm:(e,t)=>{const n=CT.map(a=>e.hasResourceAvailable(a.dotName));e.addEvent(new Me("iron jaws dot refresh",.67,()=>{CT.forEach((a,s)=>{e.refreshDoT({node:t,effectName:a.dotName,tickPotency:a.tickPotency,skillName:"IRON_JAWS",speedStat:"sks",modifiers:e.getJobPotencyModifiers("IRON_JAWS")},n[s])}),e.hasTraitUnlocked("BITE_MASTERY_II")&&e.maybeGainProc("HAWKS_EYE",.35)}))}});aa("APEX_ARROW",80,{potency:e=>{const t=e.resources.get("SOUL_VOICE"),n=20,a=e.hasTraitUnlocked("RANGED_MASTERY")?140:100,s=e.hasTraitUnlocked("RANGED_MASTERY")?700:500,c=1*(t.availableAmount()-n)/(t.maxValue-n);return(s-a)*c+a},falloff:0,applicationDelay:1.07,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_APEX_ARROW")&&e.resources.get("SOUL_VOICE").availableAmount()>=80&&e.gainStatus("BLAST_ARROW_READY"),e.tryConsumeResource("SOUL_VOICE",!0)},validateAttempt:e=>e.hasResourceAvailable("SOUL_VOICE",20),highlightIf:e=>e.hasResourceAvailable("SOUL_VOICE",80),replaceIf:[{newSkill:"BLAST_ARROW",condition:e=>e.hasResourceAvailable("BLAST_ARROW_READY")}]});aa("BLAST_ARROW",86,{startOnHotbar:!1,potency:[["NEVER",600],["RANGED_MASTERY",700]],falloff:.5,applicationDelay:1.65,validateAttempt:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),onConfirm:e=>e.tryConsumeResource("BLAST_ARROW_READY")});Wl("EMYPREAL_ARROW",54,"cd_EMPYREAL_ARROW",{potency:[["NEVER",240],["RANGED_MASTERY",260]],cooldown:15,applicationDelay:1.03,onConfirm:e=>e.gainRepertoireEffect()});Wl("BLOODLETTER",12,"cd_HEARTBREAK_SHOT",{potency:130,cooldown:15,maxCharges:3,applicationDelay:1.65,autoUpgrade:{otherSkill:"HEARTBREAK_SHOT",trait:"BLOODLETTER_MASTERY"}});Wl("HEARTBREAK_SHOT",92,"cd_HEARTBREAK_SHOT",{startOnHotbar:!1,potency:180,cooldown:15,maxCharges:3,applicationDelay:1.65});Wl("SIDEWINDER",60,"cd_SIDEWINDER",{potency:[["NEVER",320],["RANGED_MASTERY",400]],cooldown:60,applicationDelay:.53});const R2=[{skillName:"WANDERERS_MINUET",song:"WANDERERS_MINUET",skillLevel:52,cdName:"cd_WANDERERS_MINUET",replaceIf:[{newSkill:"PITCH_PERFECT",condition:e=>e.hasResourceAvailable("WANDERERS_MINUET")}]},{skillName:"MAGES_BALLAD",song:"MAGES_BALLAD",skillLevel:30,cdName:"cd_MAGES_BALLAD"},{skillName:"ARMYS_PAEON",song:"ARMYS_PAEON",skillLevel:40,cdName:"cd_ARMYS_PAEON"}];R2.forEach(e=>{Wl(e.skillName,e.skillLevel,e.cdName,{applicationDelay:0,requiresCombat:!0,cooldown:120,replaceIf:e.replaceIf,onConfirm:t=>t.beginSong(e.song)})});Wl("PITCH_PERFECT",52,"cd_PITCH_PERFECT",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:e=>{const t=e.resources.get("PITCH_PERFECT").availableAmount();return t===3?360:t===2?220:100},falloff:.5,onConfirm:e=>e.tryConsumeResource("PITCH_PERFECT",!0),validateAttempt:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT"),highlightIf:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT")});Zs("BARRAGE",38,"cd_BARRAGE",{rscType:"BARRAGE",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_BARRAGE")&&e.gainStatus("RESONANT_ARROW_READY")},replaceIf:[{newSkill:"RESONANT_ARROW",condition:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")}]});aa("RESONANT_ARROW",96,{startOnHotbar:!1,potency:640,falloff:.5,applicationDelay:1.16,onConfirm:e=>e.tryConsumeResource("RESONANT_ARROW_READY"),validateAttempt:e=>e.hasResourceAvailable("RESONANT_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")});Zs("RADIANT_FINALE",90,"cd_RADIANT_FINALE",{rscType:"RADIANT_FINALE",applicationDelay:.62,cooldown:110,onConfirm:e=>{const t=e.getCodaCount();e.resources.get("RADIANT_CODA").overrideCurrentValue(t),e.tryConsumeResource("WANDERERS_CODA"),e.tryConsumeResource("MAGES_CODA"),e.tryConsumeResource("ARMYS_CODA"),e.hasTraitUnlocked("ENHANCED_RADIANT_FINALE")&&e.gainStatus("RADIANT_ENCORE_READY")},validateAttempt:e=>e.getCodaCount()>0,replaceIf:[{newSkill:"RADIANT_ENCORE",condition:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")}]});aa("RADIANT_ENCORE",100,{startOnHotbar:!1,potency:e=>{const t=e.resources.get("RADIANT_CODA").availableAmount();return t===3?1100:t===2?800:700},falloff:.5,applicationDelay:1.96,onConfirm:e=>e.tryConsumeResource("RADIANT_ENCORE_READY"),validateAttempt:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY"),highlightIf:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")});Zs("RAGING_STRIKES",4,"cd_RAGING_STRIKES",{rscType:"RAGING_STRIKES",applicationDelay:.53,cooldown:120});Zs("BATTLE_VOICE",50,"cd_BATTLE_VOICE",{rscType:"BATTLE_VOICE",applicationDelay:.62,cooldown:120});aa("QUICK_NOCK",18,{potency:110,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),falloff:0,autoUpgrade:{trait:"QUICK_NOCK_MASTERY",otherSkill:"LADONSBITE"}});aa("LADONSBITE",82,{startOnHotbar:!1,potency:140,falloff:0,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});aa("WIDE_VOLLEY",18,{potency:140,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),autoUpgrade:{trait:"WIDE_VOLLEY_MASTERY",otherSkill:"SHADOWBITE"}});aa("SHADOWBITE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});Wl("RAIN_OF_DEATH",45,"cd_HEARTBREAK_SHOT",{potency:100,cooldown:15,maxCharges:3,falloff:0,applicationDelay:1.65});Zs("WARDENS_PAEAN",35,"cd_WARDENS_PAEAN",{rscType:"WARDENS_PAEAN",cooldown:45,applicationDelay:.62});Zs("NATURES_MINNE",35,"cd_NATURES_MINNE",{rscType:"NATURES_MINNE",cooldown:120,applicationDelay:.62});Wl("REPELLING_SHOT",15,"cd_REPELLING_SHOT",{cooldown:30,animationLock:$t});Zs("TROUBADOUR",56,"cd_TROUBADOUR",{rscType:"TROUBADOUR",maxCharges:1,cooldown:90,applicationDelay:0});Object.keys(ZT).filter(e=>!(e==="ESPRIT_PARTNER"||e==="STANDARD_FINISH_PARTNER")).forEach(e=>Wt(e,`DNC/${Ye[e].name}.png`));Wt("ESPRIT_PARTNER","DNC/Esprit.png");Wt("STANDARD_FINISH_PARTNER","DNC/Standard Finish.png");const xC=["ESPRIT_TECHNICAL","ESPRIT_PARTNER","STANDARD_FINISH_PARTNER","DANCE_PARTNER"];class T2 extends Qt{jobSpecificOtherTargetedBuffViewProps(){return xC.map(t=>t==="DANCE_PARTNER"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(ZT).filter(t=>!xC.includes(t)).map(t=>t==="CLOSED_POSITION"||t==="RISING_RHYTHM"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,a=n.get("FEATHER_GAUGE").availableAmount(),s=n.get("STANDARD_DANCE").availableAmount(),c=n.get("TECHNICAL_DANCE").availableAmount(),d=[];if(this.state.hasTraitUnlocked("ESPRIT")){const f=n.get("ESPRIT_GAUGE").availableAmount();d.push({kind:"bar",name:g({en:"Esprit",zh:""}),color:t.dnc.esprit,progress:f/100,valueString:f.toFixed(0)})}return d.push({kind:"counter",name:g({en:"Feathers",zh:""}),color:t.dnc.feathers,currentStacks:a,maxStacks:4},{kind:"dance",name:g({en:"Standard",zh:""}),maxStacks:2,currentStacks:s,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette},{kind:"dance",name:g({en:"Technical",zh:""}),maxStacks:4,currentStacks:c,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette}),d}statusLayoutFn(t){return l.jsxs("div",{children:[l.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[l.jsxs("span",{style:{display:"block",marginBottom:10},children:[g({en:"time: ",zh:"",ja:""}),`${it.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?l.jsx(kO,{data:{level:t.level,resources:t.resources},style:{height:"17em"}}):void 0]}),l.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?l.jsx(HO,{data:t.resourceLocks}):void 0,l.jsx(Zf,{data:t.enemyBuffs,style:{marginTop:50,marginBottom:"2em"}}),l.jsx(Zf,{data:t.selfBuffs,style:{position:"absolute",right:0,width:"200%"}})]})]})}}const ft=(e,t,n)=>{Qe("DNC",e,t,n??{})};ft("ESPRIT_GAUGE",100,{warnOnOvercap:!0});ft("FEATHER_GAUGE",4,{warnOnOvercap:!0});ft("STANDARD_DANCE",2);ft("TECHNICAL_DANCE",4);ft("SILKEN_SYMMETRY",1,{timeout:30});ft("SILKEN_FLOW",1,{timeout:30});ft("FLOURISHING_SYMMETRY",1,{timeout:30});ft("FLOURISHING_FLOW",1,{timeout:30});ft("THREEFOLD_FAN_DANCE",1,{timeout:30,warnOnOvercap:!0});ft("FOURFOLD_FAN_DANCE",1,{timeout:30});ft("FINISHING_MOVE_READY",1,{timeout:30});ft("FLOURISHING_STARFALL",1,{timeout:20});ft("STANDARD_STEP",1,{timeout:15});ft("STANDARD_FINISH",1,{timeout:60});ft("STANDARD_BONUS",2,{timeout:60});ft("ESPRIT",1,{timeout:60});ft("TECHNICAL_STEP",1,{timeout:15});ft("TECHNICAL_FINISH",1,{timeout:20.5});ft("TECHNICAL_BONUS",4,{timeout:20.5});ft("LAST_DANCE_READY",1,{timeout:30});ft("DANCE_OF_THE_DAWN_READY",1,{timeout:30});ft("FLOURISHING_FINISH",1,{timeout:30});ft("CLOSED_POSITION",1,{default:1});ft("DEVILMENT",1,{timeout:20});ft("SHIELD_SAMBA",1,{timeout:15});ft("IMPROVISATION",1,{timeout:15});ft("RISING_RHYTHM",4,{timeout:15});ft("IMPROVISATION_REGEN",1,{timeout:15});ft("IMPROVISED_FINISH",1,{timeout:30});ft("DANCE_PARTNER",1,{default:1});ft("ESPRIT_PARTNER",1,{timeout:60});ft("STANDARD_FINISH_PARTNER",1,{timeout:60});ft("ESPRIT_TECHNICAL",1,{timeout:20});ft("CASCADE_COMBO",1,{timeout:30});ft("WINDMILL_COMBO",1,{timeout:30});const S2=["CASCADE","FOUNTAIN","WINDMILL","BLADESHOWER"],I2=["EMBOITE","ENTRECHAT","JETE","PIROUETTE"];class _2 extends Jt{constructor(t){super(t),this.hasTraitUnlocked("ESPRIT")||this.resources.set(new ai("ESPRIT_GAUGE",0,0,!0));const n=this.hasTraitUnlocked("ENHANCED_EN_AVANT_II")?3:2;this.cooldowns.set(new Fe("cd_EN_AVANT",30,n,n));const a=this.hasTraitUnlocked("ENHANCED_SHIELD_SAMBA")?90:120;this.cooldowns.set(new Fe("cd_SHIELD_SAMBA",a,1,1)),this.registerRecurringEvents()}get statusPropsGenerator(){return new T2(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("TECHNICAL_FINISH")&&t.addBuff(H.TechnicalFinish),this.hasResourceAvailable("DEVILMENT")&&t.addBuff(H.Devilment)}cancelChanneledSkills(){this.tryConsumeResource("IMPROVISATION"),this.tryConsumeResource("RISING_RHYTHM",!0)}processComboStatus(t){if(!S2.includes(t))return;const n=t==="CASCADE",a=t==="WINDMILL";this.setComboState("CASCADE_COMBO",n?1:0),this.setComboState("WINDMILL_COMBO",a?1:0)}getCurrentDanceStatus(){const t=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";return this.resources.get(t).availableAmount()}processDanceStatus(t){if(!I2.includes(t))return;const n=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";let a=0;switch(t){case"ENTRECHAT":a=1;break;case"JETE":a=2;break;case"PIROUETTE":a=3;break}const s=this.resources.get(n);s.availableAmount()===a&&s.gain(1)}gainProc(t){this.gainStatus(t)}maybeGainProc(t,n=.5){super.maybeGainProc(t,n,!0)}gainProcIfCombo(t,n){this.triggersEffect(.5,!0)&&n&&this.gainProc(t)}gainResource(t,n){this.resources.get(t).gain(n)}maybeGainResource(t,n,a=.5){this.triggersEffect(a,!0)&&this.gainResource(t,n)}simulatePartyEspritGain(){if(this.hasResourceAvailable("ESPRIT_TECHNICAL")){for(let t=0;t<this.resources.get("PARTY_SIZE").availableAmount()-1;t++)this.maybeGainResource("ESPRIT_GAUGE",10,.2);return}this.hasResourceAvailable("ESPRIT_PARTNER")&&this.maybeGainResource("ESPRIT_GAUGE",10,.2)}applyStandardFinish(t){t!==0&&(this.gainProc("STANDARD_FINISH"),this.gainStatus("STANDARD_BONUS",t),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("STANDARD_FINISH_PARTNER"),this.hasTraitUnlocked("ESPRIT")&&(this.gainProc("ESPRIT"),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("ESPRIT_PARTNER")),this.hasTraitUnlocked("ENHANCED_STANDARD_FINISH")&&this.gainProc("LAST_DANCE_READY"))}}const dn=e=>e.hasResourceAvailable("STANDARD_STEP")||e.hasResourceAvailable("TECHNICAL_STEP"),zO={newSkill:"EMBOITE",condition:e=>dn(e)},YO={newSkill:"ENTRECHAT",condition:e=>dn(e)},KO={newSkill:"JETE",condition:e=>dn(e)},VO={newSkill:"PIROUETTE",condition:e=>dn(e)},en=(e,t,n)=>{const a=we(s=>{n.potency&&s.simulatePartyEspritGain()},n.onConfirm,s=>s.processComboStatus(e));return cn("DNC",e,t,{...n,onConfirm:a,jobPotencyModifiers:s=>{const c=[];if(s.hasResourceAvailable("STANDARD_FINISH")){const d=s.resources.get("STANDARD_BONUS").availableAmount()===2?X.DoubleStandardFinish:X.SingleStandardFinish;c.push(d)}if(s.hasResourceAvailable("TECHNICAL_FINISH")){const d=s.resources.get("TECHNICAL_BONUS").availableAmount(),f=d===4?X.QuadrupleTechnicalFinish:d===3?X.TripleTechnicalFinish:X.SingleTechnicalFinish;c.push(f)}return s.hasResourceAvailable("DEVILMENT")&&c.push(X.Devilment),e==="STARFALL_DANCE"&&c.push(X.AutoCDH),c}})},Ka=(e,t,n,a)=>ut("DNC",e,t,n,{...a,onConfirm:a.onConfirm,jobPotencyModifiers:s=>{const c=[];if(s.hasResourceAvailable("STANDARD_FINISH")){const d=s.resources.get("STANDARD_BONUS").availableAmount()===2?X.DoubleStandardFinish:X.SingleStandardFinish;c.push(d)}if(s.hasResourceAvailable("TECHNICAL_FINISH")){const d=s.resources.get("TECHNICAL_BONUS").availableAmount(),f=d===4?X.QuadrupleTechnicalFinish:d===3?X.TripleTechnicalFinish:X.SingleTechnicalFinish;c.push(f)}return s.hasResourceAvailable("DEVILMENT")&&c.push(X.Devilment),c}}),WO=(e,t,n,a)=>qe("DNC",e,t,n,a);en("EMBOITE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("EMBOITE"),highlightIf:e=>dn(e)&&e.getCurrentDanceStatus()===0});en("ENTRECHAT",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("ENTRECHAT"),highlightIf:e=>dn(e)&&e.getCurrentDanceStatus()===1});en("JETE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("JETE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2});en("PIROUETTE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("PIROUETTE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3});en("CASCADE",1,{replaceIf:[zO],potency:[["NEVER",200],["DYNAMIC_DANCER",220]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.8,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});en("FOUNTAIN",2,{replaceIf:[YO],potency:[["NEVER",100],["DYNAMIC_DANCER",120]],combo:{potency:[["NEVER",260],["DYNAMIC_DANCER",280]],resource:"CASCADE_COMBO",resourceValue:1},recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.98,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("CASCADE_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("CASCADE_COMBO").availableAmount()===1});en("REVERSE_CASCADE",20,{replaceIf:[KO],potency:[["NEVER",260],["DYNAMIC_DANCER",280]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});en("FOUNTAINFALL",40,{replaceIf:[VO],potency:[["NEVER",320],["DYNAMIC_DANCER",340]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.21,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});Ka("FAN_DANCE",30,"cd_FAN_DANCE",{potency:[["NEVER",150],["DYNAMIC_DANCER",180]],cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!dn(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});en("SABER_DANCE",76,{replaceIf:[{newSkill:"DANCE_OF_THE_DAWN",condition:e=>e.hasResourceAvailable("DANCE_OF_THE_DAWN_READY")&&e.hasResourceAvailable("ESPRIT_GAUGE",50)}],potency:[["NEVER",500],["DYNAMIC_DANCER",540]],recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!dn(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>e.resources.get("ESPRIT_GAUGE").consume(50)});en("DANCE_OF_THE_DAWN",100,{startOnHotbar:!1,potency:1e3,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!dn(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>{e.resources.get("ESPRIT_GAUGE").consume(50),e.tryConsumeResource("DANCE_OF_THE_DAWN_READY")}});en("LAST_DANCE",92,{potency:540,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("LAST_DANCE_READY")&&!dn(e),highlightIf:e=>e.hasResourceAvailable("LAST_DANCE_READY"),onConfirm:e=>e.tryConsumeResource("LAST_DANCE_READY")});en("STANDARD_STEP",15,{replaceIf:[{newSkill:"STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"FINISHING_MOVE",condition:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")}],validateAttempt:e=>!dn(e),onConfirm:e=>e.gainProc("STANDARD_STEP"),recastTime:1.5,secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1}});en("FINISHING_MOVE",96,{startOnHotbar:!1,potency:850,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:2.05,onConfirm:e=>{e.applyStandardFinish(2),e.tryConsumeResource("FINISHING_MOVE_READY")},secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1},validateAttempt:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")&&!dn(e),highlightIf:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")});const g2=[{skill:"STANDARD_FINISH",potency:360},{skill:"SINGLE_STANDARD_FINISH",potency:540},{skill:"DOUBLE_STANDARD_FINISH",potency:[["NEVER",800],["DYNAMIC_DANCER",850]]}];g2.forEach(e=>{en(e.skill,15,{assetPath:"DNC/Standard Finish.png",startOnHotbar:!1,potency:e.potency,falloff:.6,applicationDelay:.54,onConfirm:t=>{const n=t.getCurrentDanceStatus();t.tryConsumeResource("STANDARD_STEP"),t.tryConsumeResource("STANDARD_DANCE",!0),n!==0&&t.applyStandardFinish(n)},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("STANDARD_STEP"),highlightIf:t=>t.hasResourceAvailable("STANDARD_STEP")&&t.getCurrentDanceStatus()===2})});Ka("FLOURISH",72,"cd_FLOURISH",{cooldown:60,requiresCombat:!0,validateAttempt:e=>!dn(e),onConfirm:e=>{e.gainProc("FLOURISHING_SYMMETRY"),e.gainProc("FLOURISHING_FLOW"),e.gainProc("THREEFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH")&&e.gainProc("FOURFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH_II")&&e.gainProc("FINISHING_MOVE_READY")}});Ka("FAN_DANCE_III",66,"cd_FAN_DANCE_III",{potency:[["NEVER",200],["DYNAMIC_DANCER",220]],cooldown:1,falloff:.6,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE")&&!dn(e),highlightIf:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("THREEFOLD_FAN_DANCE")});Ka("FAN_DANCE_IV",86,"cd_FAN_DANCE_IV",{potency:[["NEVER",300],["DYNAMIC_DANCER",460]],falloff:.6,cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE")&&!dn(e),highlightIf:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("FOURFOLD_FAN_DANCE")});en("TECHNICAL_STEP",70,{replaceIf:[{newSkill:"TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"TRIPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3},{newSkill:"QUADRUPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===4},{newSkill:"TILLANA",condition:e=>e.hasResourceAvailable("FLOURISHING_FINISH")}],validateAttempt:e=>!dn(e),onConfirm:e=>e.gainProc("TECHNICAL_STEP"),recastTime:1.5,falloff:.75,secondaryCooldown:{cdName:"cd_TECHNICAL_STEP",cooldown:120,maxCharges:1}});en("TILLANA",82,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.84,onConfirm:e=>{e.gainResource("ESPRIT_GAUGE",50),e.tryConsumeResource("FLOURISHING_FINISH")},validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_FINISH")&&!dn(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_FINISH")});en("TECHNICAL_FINISH",70,{startOnHotbar:!1,potency:350,applicationDelay:.54,onConfirm:e=>{e.tryConsumeResource("TECHNICAL_STEP"),e.tryConsumeResource("TECHNICAL_DANCE",!0)},recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("TECHNICAL_STEP")});const p2=[{skill:"TECHNICAL_FINISH",potency:350},{skill:"SINGLE_TECHNICAL_FINISH",potency:540},{skill:"DOUBLE_TECHNICAL_FINISH",potency:720},{skill:"TRIPLE_TECHNICAL_FINISH",potency:900},{skill:"QUADRUPLE_TECHNICAL_FINISH",potency:[["NEVER",1200],["DYNAMIC_DANCER",1300]]}];p2.forEach(e=>{en(e.skill,70,{assetPath:"DNC/Technical Finish.png",startOnHotbar:!1,potency:e.potency,applicationDelay:.54,falloff:.6,onConfirm:t=>{const n=t.getCurrentDanceStatus();t.tryConsumeResource("TECHNICAL_STEP"),t.tryConsumeResource("TECHNICAL_DANCE",!0),n!==0&&(t.gainProc("TECHNICAL_FINISH"),t.hasTraitUnlocked("ESPRIT")&&t.gainProc("ESPRIT_TECHNICAL"),t.gainStatus("TECHNICAL_BONUS",n),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH")&&t.gainProc("FLOURISHING_FINISH"),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH_II")&&t.gainProc("DANCE_OF_THE_DAWN_READY"))},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("TECHNICAL_STEP"),highlightIf:t=>t.hasResourceAvailable("TECHNICAL_STEP")&&t.getCurrentDanceStatus()===4})});WO("DEVILMENT",62,"cd_DEVILMENT",{replaceIf:[{newSkill:"STARFALL_DANCE",condition:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")}],rscType:"DEVILMENT",applicationDelay:0,cooldown:120,validateAttempt:e=>!dn(e),onApplication:e=>{e.hasTraitUnlocked("ENHANCED_DEVILMENT")&&e.gainProc("FLOURISHING_STARFALL")}});en("STARFALL_DANCE",90,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.75,applicationDelay:.89,validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")&&!dn(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_STARFALL"),onConfirm:e=>e.tryConsumeResource("FLOURISHING_STARFALL")});en("WINDMILL",15,{replaceIf:[zO],potency:120,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});en("BLADESHOWER",25,{replaceIf:[YO],potency:100,recastTime:e=>e.config.adjustedSksGCD(),combo:{potency:160,resource:"WINDMILL_COMBO",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("WINDMILL_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("WINDMILL_COMBO").availableAmount()===1});en("RISING_WINDMILL",35,{replaceIf:[KO],potency:160,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});en("BLOODSHOWER",45,{replaceIf:[VO],potency:200,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});Ka("FAN_DANCE_II",30,"cd_FAN_DANCE_II",{potency:100,cooldown:1,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!dn(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});Ka("CURING_WALTZ",52,"cd_CURING_WALTZ",{cooldown:60,applicationDelay:.58});Ka("IMPROVISATION",80,"cd_IMPROVISATION",{replaceIf:[{newSkill:"IMPROVISED_FINISH",condition:e=>e.hasResourceAvailable("IMPROVISATION")}],cooldown:120,applicationDelay:.89,validateAttempt:e=>!dn(e),onConfirm:e=>{e.gainProc("IMPROVISATION"),e.gainProc("IMPROVISATION_REGEN");const t=()=>{e.hasResourceAvailable("IMPROVISATION")&&(e.resources.get("RISING_RHYTHM").gain(1),e.gainProc("IMPROVISATION_REGEN"),e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:n=>t()}))};e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:n=>t()}),e.resources.addResourceEvent({rscType:"IMPROVISATION",name:"improvisation timeout",delay:Vt("DNC","IMPROVISATION").maxTimeout,fnOnRsc:n=>{n.consume(1),e.tryConsumeResource("RISING_RHYTHM",!0)}})}});Ka("IMPROVISED_FINISH",80,"cd_IMPROVISED_FINISH",{startOnHotbar:!1,cooldown:120,applicationDelay:.71,validateAttempt:e=>!dn(e),onConfirm:e=>e.gainProc("IMPROVISED_FINISH")});Ka("EN_AVANT",50,"cd_EN_AVANT",{cooldown:30,maxCharges:3,animationLock:$t});WO("SHIELD_SAMBA",56,"cd_SHIELD_SAMBA",{rscType:"SHIELD_SAMBA",maxCharges:1,cooldown:90,applicationDelay:0});Ka("CLOSED_POSITION",60,"cd_CLOSED_POSITION",{replaceIf:[{newSkill:"ENDING",condition:e=>e.hasResourceAvailable("CLOSED_POSITION")}],cooldown:30,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.resources.get("CLOSED_POSITION").gain(1),e.resources.get("DANCE_PARTNER").gain(1)},validateAttempt:e=>!e.hasResourceAvailable("CLOSED_POSITION"),secondaryCooldown:{cdName:"cd_ENDING",cooldown:1,maxCharges:1}});Ka("ENDING",60,"cd_ENDING",{startOnHotbar:!1,cooldown:1,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("CLOSED_POSITION",!0),e.tryConsumeResource("DANCE_PARTNER",!0),e.tryConsumeResource("STANDARD_FINISH_PARTNER",!0),e.tryConsumeResource("ESPRIT_PARTNER",!0)},secondaryCooldown:{cdName:"cd_CLOSED_POSITION",cooldown:30,maxCharges:1}});const XO=["CHAOS_THRUST_DOT","CHAOTIC_SPRING_DOT"],N2=Object.keys($T).filter(e=>!XO.includes(e));Object.keys($T).forEach(e=>Wt(e,`DRG/${Ye[e].name}.png`));class C2 extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[...XO.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return N2.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S,I,C;const n=this.state.resources,a=n.get("DRG_CHAOS_COMBO_TRACKER"),s=n.get("DRG_HEAVENS_COMBO_TRACKER"),c=n.get("DRG_AOE_COMBO_TRACKER"),d=n.get("FIRSTMINDS_FOCUS").availableAmount(),f=n.get("LIFE_OF_THE_DRAGON"),h=f.available(1)?(T=f.pendingChange)==null?void 0:T.timeTillEvent:void 0,m=a.available(1)?(S=a.pendingChange)==null?void 0:S.timeTillEvent:s.available(1)?(I=s.pendingChange)==null?void 0:I.timeTillEvent:c.available(1)?(C=c.pendingChange)==null?void 0:C.timeTillEvent:void 0;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.drg.drgComboTimer,progress:m?m/30:0,valueString:(m==null?void 0:m.toFixed(3))??"N/A"},{kind:"bar",name:g({en:"Life of the Dragon"}),color:t.drg.lifeOfTheDragonBar,progress:h?h/20:0,valueString:h?h.toFixed(3):"N/A"},{kind:"counter",name:g({en:"Firstmind's Focus"}),color:t.drg.firstmindsFocusStacks,currentStacks:d,maxStacks:2}]}}const oi=(e,t,n)=>{Qe("DRG",e,t,n??{})};oi("POWER_SURGE",1,{timeout:30});oi("LIFE_SURGE",1,{timeout:5.52,warnOnTimeout:!0});oi("ENHANCED_PIERCING_TALON",1,{timeout:15.62});oi("LANCE_CHARGE",1,{timeout:20});oi("DIVE_READY",1,{timeout:15.46,warnOnTimeout:!0});oi("CHAOS_THRUST_DOT",1,{timeout:24});oi("BATTLE_LITANY",1,{timeout:20});oi("LIFE_OF_THE_DRAGON",1,{timeout:20});oi("NASTROND_READY",1,{timeout:20,warnOnTimeout:!0});oi("DRACONIAN_FIRE",1,{timeout:30});oi("CHAOTIC_SPRING_DOT",1,{timeout:24});oi("FIRSTMINDS_FOCUS",2,{warnOnOvercap:!0});oi("DRAGONS_FLIGHT",1,{timeout:30.79});oi("STARCROSS_READY",1,{timeout:20,warnOnTimeout:!0});oi("DRG_CHAOS_COMBO_TRACKER",4,{timeout:30});oi("DRG_HEAVENS_COMBO_TRACKER",4,{timeout:30});oi("DRG_AOE_COMBO_TRACKER",2,{timeout:30});const b2=["DOOM_SPIKE","SONIC_THRUST","COERTHAN_TORMENT","DRACONIAN_FURY"],HC=new Map([["DISEMBOWEL",1],["SPIRAL_BLOW",1],["CHAOS_THRUST",2],["CHAOTIC_SPRING",2],["WHEELING_THRUST",3]]),kC=new Map([["VORPAL_THRUST",1],["LANCE_BARRAGE",1],["FULL_THRUST",2],["HEAVENS_THRUST",2],["FANG_AND_CLAW",3]]);class O2 extends Jt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_WINGED_GLIDE")?2:1,a=this.hasTraitUnlocked("ENHANCED_LIFE_SURGE")?2:1;[new Fe("cd_WINGED_GLIDE",60,n,n),new Fe("cd_LIFE_SURGE",40,a,a)].forEach(s=>this.cooldowns.set(s)),this.registerRecurringEvents([{groupedEffects:[{effectName:"CHAOS_THRUST_DOT",appliedBy:["CHAOS_THRUST"]}]},{groupedEffects:[{effectName:"CHAOTIC_SPRING_DOT",appliedBy:["CHAOTIC_SPRING"]}]}])}get statusPropsGenerator(){return new C2(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("POWER_SURGE")&&t.addBuff(H.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.addBuff(H.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.addBuff(H.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.addBuff(H.BattleLitany),n.name==="PIERCING_TALON"&&this.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&t.addBuff(H.EnhancedPiercingTalon),n.cdName==="cd_GCD"&&this.hasResourceAvailable("LIFE_SURGE")&&t.addBuff(H.LifeSurge)}pushUniversalModifiers(t){this.hasResourceAvailable("POWER_SURGE")&&t.push(X.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.push(X.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.push(X.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.push(X.BattleLitany)}fixDRGComboState(t){if(this.tryConsumeResource("DRACONIAN_FIRE",!0),b2.includes(t)){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0);let n=0;t==="DOOM_SPIKE"||t==="DRACONIAN_FURY"?n=1:t==="SONIC_THRUST"&&this.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(n=2),this.setComboState("DRG_AOE_COMBO_TRACKER",n);return}if(this.tryConsumeResource("DRG_AOE_COMBO_TRACKER",!0),t==="TRUE_THRUST"||t==="RAIDEN_THRUST"){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",1),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",1);return}if(HC.has(t)){const n=HC.get(t);this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",this.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",n)?n+1:0)}else if(kC.has(t)){const n=kC.get(t);this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",this.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",n)?n+1:0)}else t==="DRAKESBANE"&&(this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0))}checkCombo(t){return this.hasResourceAvailable(t)}gainScale(t){this.resources.get("FIRSTMINDS_FOCUS").gain(t)}refreshBuff(t,n){this.addEvent(new Me("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const zn=(e,t,n)=>{const a=we(n.onConfirm,s=>{e!=="PIERCING_TALON"&&s.fixDRGComboState(e),s.tryConsumeResource("LIFE_SURGE")});return cn("DRG",e,t,{...n,onConfirm:a,recastTime:s=>s.config.adjustedSksGCD(),jobPotencyModifiers:s=>{var d;const c=((d=n.jobPotencyModifiers)==null?void 0:d.call(n,s))??[];return e==="PIERCING_TALON"&&s.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&c.push(X.EnhancedPiercingTalon),s.pushUniversalModifiers(c),s.hasResourceAvailable("LIFE_SURGE")&&c.push(X.LifeSurge),c}})},ya=(e,t,n,a)=>ut("DRG",e,t,n,{...a,onConfirm:a.onConfirm,jobPotencyModifiers:s=>{const c=[];return s.pushUniversalModifiers(c),c}}),D2={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)},y2={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)},v2={newSkill:"RAIDEN_THRUST",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},M2={newSkill:"TRUE_THRUST",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},L2={newSkill:"DRACONIAN_FURY",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},x2={newSkill:"DOOM_SPIKE",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},H2={newSkill:"STARCROSS",condition:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON")},k2={newSkill:"STARDIVER",condition:e=>!e.hasResourceAvailable("STARCROSS_READY")};zn("PIERCING_TALON",15,{potency:[["NEVER",150],["LANCE_MASTERY",200]],applicationDelay:.85,onConfirm:e=>{e.tryConsumeResource("ENHANCED_PIERCING_TALON")},highlightIf:e=>e.hasResourceAvailable("ENHANCED_PIERCING_TALON")});zn("TRUE_THRUST",1,{replaceIf:[v2],potency:[["NEVER",200],["LANCE_MASTERY",230]],applicationDelay:.76});zn("RAIDEN_THRUST",76,{startOnHotbar:!1,replaceIf:[M2],potency:[["NEVER",280],["MELEE_MASTERY_DRG",320]],applicationDelay:.62,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});zn("DISEMBOWEL",18,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"SPIRAL_BLOW"},applicationDelay:1.65,potency:[["NEVER",100],["LANCE_MASTERY",140]],combo:{potency:[["NEVER",220],["LANCE_MASTERY",250]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.63))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});zn("SPIRAL_BLOW",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"DISEMBOWEL"},applicationDelay:1.38,potency:140,combo:{potency:[["NEVER",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.38))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});zn("CHAOS_THRUST",50,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOTIC_SPRING"},applicationDelay:1.65,potency:100,combo:{potency:220,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:140,comboPotency:260,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const n=[];e.pushUniversalModifiers(n),e.addDoTPotencies({node:t,effectName:"CHAOS_THRUST_DOT",skillName:"CHAOS_THRUST",tickPotency:40,speedStat:"sks",modifiers:n}),e.addEvent(new Me("apply chaos thrust dot",1.65,()=>{e.applyDoT("CHAOS_THRUST_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});zn("CHAOTIC_SPRING",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOS_THRUST"},applicationDelay:.45,potency:140,combo:{potency:300,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:180,comboPotency:340,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const n=[];e.pushUniversalModifiers(n),e.addDoTPotencies({node:t,effectName:"CHAOTIC_SPRING_DOT",skillName:"CHAOTIC_SPRING",tickPotency:45,speedStat:"sks",modifiers:n}),e.addEvent(new Me("apply chaotic spring dot",.45,()=>{e.applyDoT("CHAOTIC_SPRING_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});zn("WHEELING_THRUST",58,{replaceIf:[D2],applicationDelay:.67,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"rear"},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",3)});zn("VORPAL_THRUST",4,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"LANCE_BARRAGE"},applicationDelay:1.02,potency:[["NEVER",100],["LANCE_MASTERY",130]],combo:{potency:[["NEVER",250],["LANCE_MASTERY",280]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});zn("LANCE_BARRAGE",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"VORPAL_THRUST"},applicationDelay:.94,potency:130,combo:{potency:340,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});zn("FULL_THRUST",26,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"HEAVENS_THRUST"},applicationDelay:1.12,potency:100,combo:{potency:380,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});zn("HEAVENS_THRUST",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"FULL_THRUST"},applicationDelay:.71,potency:[["NEVER",100],["MELEE_MASTERY_DRG",160]],combo:{potency:[["NEVER",400],["MELEE_MASTERY_DRG",460]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});zn("FANG_AND_CLAW",56,{replaceIf:[y2],applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"flank"},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",3)});zn("DRAKESBANE",64,{startOnHotbar:!1,applicationDelay:1,potency:[["NEVER",380],["LANCE_MASTERY_II",400],["MELEE_MASTERY_DRG",460]],validateAttempt:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4),onConfirm:e=>{(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4))&&e.refreshBuff("DRACONIAN_FIRE",0)},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)});zn("DOOM_SPIKE",40,{replaceIf:[L2],potency:110,falloff:0,applicationDelay:1.29});zn("DRACONIAN_FURY",82,{replaceIf:[x2],startOnHotbar:!1,potency:130,falloff:0,applicationDelay:.76,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});zn("SONIC_THRUST",62,{applicationDelay:.8,potency:100,combo:{potency:120,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1),onConfirm:e=>{e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",30.79))}});zn("COERTHAN_TORMENT",72,{applicationDelay:.49,potency:100,combo:{potency:150,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:2},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_COERTHAN_TORMENT")&&e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2)&&e.refreshBuff("DRACONIAN_FIRE",0)}});qe("DRG","LIFE_SURGE",6,"cd_LIFE_SURGE",{rscType:"LIFE_SURGE",applicationDelay:0,cooldown:40,maxCharges:2});ya("WYRMWIND_THRUST",90,"cd_WYRMWIND_THRUST",{applicationDelay:1.2,validateAttempt:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),highlightIf:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),potency:[["NEVER",420],["MELEE_MASTERY_DRG",440]],falloff:.5,cooldown:10,onConfirm:e=>{e.tryConsumeResource("FIRSTMINDS_FOCUS",!0)}});qe("DRG","LANCE_CHARGE",30,"cd_LANCE_CHARGE",{rscType:"LANCE_CHARGE",applicationDelay:.62,cooldown:60});qe("DRG","BATTLE_LITANY",52,"cd_BATTLE_LITANY",{rscType:"BATTLE_LITANY",applicationDelay:.62,cooldown:120});ya("GEIRSKOGUL",60,"cd_GEIRSKOGUL",{applicationDelay:.67,potency:[["NEVER",200],["LANCE_MASTERY_III",280]],falloff:.5,cooldown:60,onConfirm:e=>{e.refreshBuff("LIFE_OF_THE_DRAGON",0),e.refreshBuff("NASTROND_READY",0),e.addEvent(new Me("drop starcross when life drops",20,()=>{e.tryConsumeResource("STARCROSS_READY")}))}});ya("NASTROND",70,"cd_NASTROND",{applicationDelay:.76,potency:[["NEVER",600],["LANCE_MASTERY_III",720]],falloff:.5,cooldown:2,validateAttempt:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),highlightIf:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),onConfirm:e=>{e.tryConsumeResource("NASTROND_READY")}});ya("JUMP",30,"cd_JUMP",{autoUpgrade:{trait:"JUMP_MASTERY",otherSkill:"HIGH_JUMP"},applicationDelay:.49,animationLock:.8,potency:320,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});ya("HIGH_JUMP",74,"cd_HIGH_JUMP",{autoDowngrade:{trait:"JUMP_MASTERY",otherSkill:"JUMP"},applicationDelay:.49,animationLock:.8,potency:400,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});ya("MIRAGE_DIVE",68,"cd_MIRAGE_DIVE",{applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("DIVE_READY"),highlightIf:e=>e.hasResourceAvailable("DIVE_READY"),potency:380,cooldown:1,onConfirm:e=>{e.tryConsumeResource("DIVE_READY")}});ya("DRAGONFIRE_DIVE",50,"cd_DRAGONFIRE_DIVE",{applicationDelay:.8,animationLock:.8,potency:500,falloff:.5,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_DRAGONFIRE_DIVE")&&e.refreshBuff("DRAGONS_FLIGHT",0)}});ya("RISE_OF_THE_DRAGON",92,"cd_RISE_OF_THE_DRAGON",{applicationDelay:1.16,potency:550,falloff:.5,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),highlightIf:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),onConfirm:e=>{e.tryConsumeResource("DRAGONS_FLIGHT")}});ya("STARDIVER",80,"cd_STARDIVER",{replaceIf:[H2],applicationDelay:1.29,animationLock:1.5,potency:[["NEVER",720],["MELEE_MASTERY_DRG",840]],falloff:.4,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_STARDIVER")&&e.refreshBuff("STARCROSS_READY",0)}});ya("STARCROSS",100,"cd_STARCROSS",{startOnHotbar:!1,replaceIf:[k2],applicationDelay:.98,potency:1e3,falloff:.4,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),highlightIf:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.tryConsumeResource("STARCROSS_READY")}});ya("ELUSIVE_JUMP",35,"cd_ELUSIVE_JUMP",{potency:0,applicationDelay:0,animationLock:1,cooldown:30,onConfirm:e=>{e.refreshBuff("ENHANCED_PIERCING_TALON",0)}});ya("WINGED_GLIDE",45,"cd_WINGED_GLIDE",{potency:0,applicationDelay:0,animationLock:$t,cooldown:60,maxCharges:2});const qO=["SONIC_BREAK_DOT","BOW_SHOCK_DOT"],U2=Object.keys(JT).filter(e=>!qO.includes(e));Object.keys(JT).forEach(e=>Wt(e,`GNB/${Ye[e].name}.png`));class w2 extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[...qO.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return U2.map(t=>t==="ROYAL_GUARD"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var R,T;const n=this.state.resources,a=n.get("GNB_COMBO_TRACKER"),s=n.get("GNB_AOE_COMBO_TRACKER"),c=n.get("POWDER_GAUGE").availableAmount(),d=n.get("ROYAL_GUARD").availableAmount(),f=a.available(1)?(R=a.pendingChange)==null?void 0:R.timeTillEvent:s.available(1)?(T=s.pendingChange)==null?void 0:T.timeTillEvent:void 0,h=n.get("BLOODFEST").available(1)?2:1;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.rdm.manaStack,progress:f?f/30:0,valueString:(f==null?void 0:f.toFixed(3))??"N/A"},{kind:"counter",name:g({en:"Royal Guard",zh:""}),color:t.rdm.manaStack,currentStacks:d,maxStacks:1},{kind:"counter",name:g({en:"Powder Gauge",zh:""}),color:t.rdm.manaStack,currentStacks:c,maxStacks:(this.state.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2)*h}]}}const xt=(e,t,n)=>{Qe("GNB",e,t,n??{})};xt("POWDER_GAUGE",3,{warnOnOvercap:!0});xt("ROYAL_GUARD",1);xt("NO_MERCY",1,{timeout:20});xt("AURORA",1,{timeout:18});xt("BOW_SHOCK_DOT",1,{timeout:15});xt("CAMOUFLAGE",1,{timeout:20});xt("HEART_OF_CORUNDUM",1,{timeout:8});xt("CLARITY_OF_CORUNDUM",1,{timeout:15});xt("CATHARSIS_OF_CORUNDUM",1,{timeout:20});xt("NEBULA",1,{timeout:15});xt("GREAT_NEBULA",1,{timeout:15});xt("HEART_OF_LIGHT",1,{timeout:15});xt("HEART_OF_STONE",1,{timeout:8});xt("READY_TO_BLAST",1,{timeout:10,warnOnTimeout:!0});xt("READY_TO_BREAK",1,{timeout:30,warnOnTimeout:!0});xt("READY_TO_GOUGE",1,{timeout:10,warnOnTimeout:!0});xt("READY_TO_RAZE",1,{timeout:10,warnOnTimeout:!0});xt("READY_TO_REIGN",1,{timeout:30,warnOnTimeout:!0});xt("READY_TO_RIP",1,{timeout:10,warnOnTimeout:!0});xt("READY_TO_TEAR",1,{timeout:10,warnOnTimeout:!0});xt("SONIC_BREAK_DOT",1,{timeout:15});xt("SUPERBOLIDE",1,{timeout:10});xt("BRUTAL_SHELL",1,{timeout:30});xt("GNB_COMBO_TRACKER",2,{timeout:30});xt("GNB_AOE_COMBO_TRACKER",1,{timeout:30});xt("GNB_GNASHING_COMBO_TRACKER",2,{timeout:30});xt("GNB_REIGN_COMBO_TRACKER",2,{timeout:30});xt("BLOODFEST",1,{timeout:30});const UC=["KEEN_EDGE","BRUTAL_SHELL","SOLID_BARREL"],P2=["DEMON_SLICE","DEMON_SLAUGHTER"],wC=["GNASHING_FANG","SAVAGE_CLAW","WICKED_TALON"],PC=["REIGN_OF_BEASTS","NOBLE_BLOOD","LION_HEART"];class G2 extends Jt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_AURORA")?2:1;[new Fe("cd_AURORA",60,n,n)].forEach(s=>this.cooldowns.set(s)),this.cooldowns.set(new Fe("cd_DOUBLE_DOWN",this.config.adjustedSksGCD(60),1,1));const a=this.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;this.resources.set(new ai("POWDER_GAUGE",a,0,!0)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SONIC_BREAK_DOT",appliedBy:["SONIC_BREAK"]}]},{groupedEffects:[{effectName:"BOW_SHOCK_DOT",appliedBy:["BOW_SHOCK"]}]}])}get statusPropsGenerator(){return new w2(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("NO_MERCY")&&t.addBuff(H.NoMercy)}fixGNBComboState(t){if(P2.includes(t)){this.tryConsumeResource("GNB_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_AOE_COMBO_TRACKER"),t==="DEMON_SLICE"&&this.setComboState("GNB_AOE_COMBO_TRACKER",1);return}let n="GNB_COMBO_TRACKER",a=-1;UC.includes(t)?(this.tryConsumeResource("GNB_AOE_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),a=UC.indexOf(t)):wC.includes(t)?(this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),n="GNB_GNASHING_COMBO_TRACKER",a=wC.indexOf(t)):PC.includes(t)&&(this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),n="GNB_REIGN_COMBO_TRACKER",a=PC.indexOf(t));let s=0;a===0?s=1:a===1&&this.hasResourceExactly(n,1)&&(s=2),this.setComboState(n,s)}gainCartridge(t){this.resources.get("POWDER_GAUGE").gain(t)}refreshBuff(t,n){this.addEvent(new Me("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const mi=(e,t,n)=>{const a=we(n.onConfirm,s=>{["SONIC_BREAK","BURST_STRIKE","FATED_CIRCLE","DOUBLE_DOWN","LIGHTNING_SHOT"].includes(e)||s.fixGNBComboState(e),s.tryConsumeResource("READY_TO_BLAST"),s.tryConsumeResource("READY_TO_RAZE"),s.tryConsumeResource("READY_TO_RIP"),s.tryConsumeResource("READY_TO_TEAR"),s.tryConsumeResource("READY_TO_GOUGE")});return cn("GNB",e,t,{...n,onConfirm:a,recastTime:s=>s.config.adjustedSksGCD(),jobPotencyModifiers:s=>s.hasResourceAvailable("NO_MERCY")?[X.NoMercy]:[]})},hn=(e,t,n,a)=>ut("GNB",e,t,n,{...a,jobPotencyModifiers:s=>s.hasResourceAvailable("NO_MERCY")?[X.NoMercy]:[]}),ZO={newSkill:"GNASHING_FANG",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===0},$O={newSkill:"SAVAGE_CLAW",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===1},QO={newSkill:"WICKED_TALON",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===2},JO={newSkill:"REIGN_OF_BEASTS",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===0},eD={newSkill:"NOBLE_BLOOD",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===1},tD={newSkill:"LION_HEART",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===2},B2={newSkill:"HYPERVELOCITY",condition:e=>e.hasResourceAvailable("READY_TO_BLAST")},F2={newSkill:"FATED_BRAND",condition:e=>e.hasResourceAvailable("READY_TO_RAZE")},j2={newSkill:"JUGULAR_RIP",condition:e=>e.hasResourceAvailable("READY_TO_RIP")},z2={newSkill:"ABDOMEN_TEAR",condition:e=>e.hasResourceAvailable("READY_TO_TEAR")},Y2={newSkill:"EYE_GOUGE",condition:e=>e.hasResourceAvailable("READY_TO_GOUGE")},K2={newSkill:"ROYAL_GUARD",condition:e=>!e.hasResourceAvailable("ROYAL_GUARD")},V2={newSkill:"RELEASE_ROYAL_GUARD",condition:e=>e.hasResourceAvailable("ROYAL_GUARD")};mi("LIGHTNING_SHOT",15,{potency:150,applicationDelay:.72});mi("KEEN_EDGE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",300]],applicationDelay:.89});mi("BRUTAL_SHELL",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",380]],resource:"GNB_COMBO_TRACKER",resourceValue:1},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",1)&&e.refreshBuff("BRUTAL_SHELL",0)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",1)});mi("SOLID_BARREL",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",460]],resource:"GNB_COMBO_TRACKER",resourceValue:2},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",2)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",2)});mi("DEMON_SLICE",10,{potency:100,falloff:0,applicationDelay:.62});mi("DEMON_SLAUGHTER",40,{potency:100,combo:{potency:160,resource:"GNB_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)});mi("BURST_STRIKE",30,{potency:[["NEVER",340],["MELEE_MASTERY_II_TANK",420]],applicationDelay:.71,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION")&&e.refreshBuff("READY_TO_BLAST",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});mi("FATED_CIRCLE",72,{potency:300,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION_II")&&e.refreshBuff("READY_TO_RAZE",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});hn("BLOODFEST",76,"cd_BLOODFEST",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{const t=e.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;e.gainStatus("BLOODFEST"),e.resources.set(new ai("POWDER_GAUGE",t*2,e.resources.get("POWDER_GAUGE").availableAmount())),e.addEvent(new Me("restore bloodfest max stacks",Vt("GNB","BLOODFEST").maxTimeout,()=>{e.resources.get("POWDER_GAUGE").availableAmount()>t&&p.reportWarning({kind:"overcap",rsc:"POWDER_GAUGE"}),e.resources.set(new ai("POWDER_GAUGE",t,Math.min(e.resources.get("POWDER_GAUGE").availableAmount(),t)))})),e.gainCartridge(t),e.hasTraitUnlocked("ENHANCED_BLOODFEST")&&e.refreshBuff("READY_TO_REIGN",0)}});hn("NO_MERCY",2,"cd_NO_MERCY",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.refreshBuff("NO_MERCY",.62),e.refreshBuff("READY_TO_BREAK",0)}});mi("SONIC_BREAK",54,{potency:340,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BREAK"),onConfirm:(e,t)=>{e.tryConsumeResource("READY_TO_BREAK");const n=[];e.hasResourceAvailable("NO_MERCY")&&n.push(X.NoMercy),e.addDoTPotencies({node:t,effectName:"SONIC_BREAK_DOT",skillName:"SONIC_BREAK",tickPotency:120,speedStat:"sks",modifiers:n})},onApplication:(e,t)=>e.applyDoT("SONIC_BREAK_DOT",t),highlightIf:e=>e.hasResourceAvailable("READY_TO_BREAK")});mi("GNASHING_FANG",60,{replaceIf:[$O,QO],potency:[["NEVER",330],["MELEE_MASTERY_II_TANK",440]],applicationDelay:.62,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.refreshBuff("READY_TO_RIP",0),e.tryConsumeResource("POWDER_GAUGE")},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")&&!e.hasResourceAvailable("GNB_REIGN_COMBO_TRACKER"),secondaryCooldown:{cdName:"cd_GNASHING_FANG",cooldown:30,maxCharges:2}});mi("SAVAGE_CLAW",60,{startOnHotbar:!1,replaceIf:[ZO,QO],potency:[["NEVER",410],["MELEE_MASTERY_II_TANK",500]],applicationDelay:.62,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1),onConfirm:e=>{e.refreshBuff("READY_TO_TEAR",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1)});mi("WICKED_TALON",60,{startOnHotbar:!1,replaceIf:[ZO,$O],potency:[["NEVER",490],["MELEE_MASTERY_II_TANK",560]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2),onConfirm:e=>{e.refreshBuff("READY_TO_GOUGE",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2)});mi("DOUBLE_DOWN",90,{potency:1e3,falloff:.15,applicationDelay:.72,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE",2),onConfirm:e=>{e.resources.get("POWDER_GAUGE").consume(2)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE",2),secondaryCooldown:{cdName:"cd_DOUBLE_DOWN",cooldown:60,maxCharges:1}});mi("REIGN_OF_BEASTS",100,{replaceIf:[eD,tD],potency:800,falloff:.6,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("READY_TO_REIGN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REIGN")},highlightIf:e=>e.hasResourceAvailable("READY_TO_REIGN")});mi("NOBLE_BLOOD",100,{startOnHotbar:!1,replaceIf:[JO,tD],potency:900,falloff:.6,applicationDelay:1.65,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1)});mi("LION_HEART",100,{startOnHotbar:!1,replaceIf:[JO,eD],potency:1e3,falloff:.6,applicationDelay:1.79,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2)});hn("CONTINUATION",70,"cd_CONTINUATION",{replaceIf:[B2,F2,j2,z2,Y2],applicationDelay:0,potency:0,cooldown:1,validateAttempt:e=>!1});hn("HYPERVELOCITY",86,"cd_HYPERVELOCITY",{startOnHotbar:!1,applicationDelay:.76,potency:[["NEVER",140],["MELEE_MASTERY_II_TANK",180]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BLAST"),highlightIf:e=>e.hasResourceAvailable("READY_TO_BLAST"),onConfirm:e=>{e.tryConsumeResource("READY_TO_BLAST")}});hn("FATED_BRAND",96,"cd_FATED_BRAND",{startOnHotbar:!1,applicationDelay:1.16,potency:120,falloff:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RAZE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RAZE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RAZE")}});hn("JUGULAR_RIP",70,"cd_JUGULAR_RIP",{startOnHotbar:!1,applicationDelay:.8,potency:[["NEVER",180],["MELEE_MASTERY_II_TANK",220]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RIP"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RIP"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RIP")}});hn("ABDOMEN_TEAR",70,"cd_ABDOMEN_TEAR",{startOnHotbar:!1,applicationDelay:.76,potency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_TEAR"),highlightIf:e=>e.hasResourceAvailable("READY_TO_TEAR"),onConfirm:e=>{e.tryConsumeResource("READY_TO_TEAR")}});hn("EYE_GOUGE",70,"cd_EYE_GOUGE",{startOnHotbar:!1,applicationDelay:.98,potency:[["NEVER",260],["MELEE_MASTERY_II_TANK",300]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_GOUGE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_GOUGE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_GOUGE")}});hn("DANGER_ZONE",18,"cd_DANGER_ZONE",{autoUpgrade:{trait:"DANGER_ZONE_MASTERY",otherSkill:"BLASTING_ZONE"},applicationDelay:.62,potency:250,cooldown:30});hn("BLASTING_ZONE",80,"cd_BLASTING_ZONE",{startOnHotbar:!1,applicationDelay:.62,potency:800,cooldown:30});hn("BOW_SHOCK",62,"cd_BOW_SHOCK",{applicationDelay:.62,potency:150,falloff:0,cooldown:60,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("NO_MERCY")&&n.push(X.NoMercy),e.addDoTPotencies({node:t,effectName:"BOW_SHOCK_DOT",skillName:"BOW_SHOCK",tickPotency:60,speedStat:"sks",modifiers:n})},onApplication:(e,t)=>e.applyDoT("BOW_SHOCK_DOT",t)});hn("TRAJECTORY",56,"cd_TRAJECTORY",{animationLock:$t,cooldown:30,maxCharges:2,applicationDelay:.66,drawsAggro:!0});hn("HEART_OF_STONE",68,"cd_HEART_OF_STONE",{autoUpgrade:{trait:"HEART_OF_STONE_MASTERY",otherSkill:"HEART_OF_CORUNDUM"},applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("HEART_OF_STONE",0)}});hn("HEART_OF_CORUNDUM",82,"cd_HEART_OF_CORUNDUM",{startOnHotbar:!1,applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("CATHARSIS_OF_CORUNDUM",0),e.refreshBuff("HEART_OF_CORUNDUM",0),e.refreshBuff("CLARITY_OF_CORUNDUM",0)}});hn("SUPERBOLIDE",50,"cd_SUPERBOLIDE",{applicationDelay:0,cooldown:360,onConfirm:e=>{e.refreshBuff("SUPERBOLIDE",0)}});hn("CAMOUFLAGE",6,"cd_CAMOUFLAGE",{applicationDelay:.62,cooldown:90,onConfirm:e=>{e.refreshBuff("CAMOUFLAGE",0)}});hn("NEBULA",38,"cd_NEBULA",{autoUpgrade:{trait:"NEBULA_MASTERY",otherSkill:"GREAT_NEBULA"},applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("NEBULA",0)}});hn("GREAT_NEBULA",38,"cd_GREAT_NEBULA",{startOnHotbar:!1,applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("GREAT_NEBULA",0)}});hn("HEART_OF_LIGHT",64,"cd_HEART_OF_LIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("HEART_OF_LIGHT",0)}});hn("AURORA",45,"cd_AURORA",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("AURORA",0)},maxCharges:2});hn("ROYAL_GUARD",10,"cd_ROYAL_GUARD",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.resources.get("ROYAL_GUARD").gain(1)},replaceIf:[V2],secondaryCooldown:{cdName:"cd_RELEASE_ROYAL_GUARD",cooldown:1,maxCharges:1}});hn("RELEASE_ROYAL_GUARD",10,"cd_RELEASE_ROYAL_GUARD",{startOnHotbar:!1,replaceIf:[K2],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.tryConsumeResource("ROYAL_GUARD")},secondaryCooldown:{cdName:"cd_ROYAL_GUARD",cooldown:2,maxCharges:1}});Object.keys(eS).forEach(e=>Wt(e,`MCH/${Ye[e].name}.png`));class W2 extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[...["WILDFIRE","BIOBLASTER"].map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(eS).filter(t=>!(t==="WILDFIRE"||t==="BIOBLASTER")).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,a=n.get("HEAT_GAUGE").availableAmount(),s=n.get("BATTERY_GAUGE").availableAmount(),c=n.get("QUEEN_PUNCHES"),d=n.get("QUEEN_FINISHERS"),f=c.availableAmount()+d.availableAmount(),h=c.maxValue+d.maxValue;return[{kind:"bar",name:g({en:"Heat",zh:""}),color:t.mch.heat,progress:a/100,valueString:a.toFixed(0)},{kind:"bar",name:g({en:"Battery",zh:""}),color:t.mch.battery,progress:s/100,valueString:s.toFixed(0)},{kind:"bar",name:g({en:"Queen Hits",zh:""}),color:t.mch.battery,progress:f/h,valueString:f.toFixed(0)}]}}const Yn=(e,t,n)=>{Qe("MCH",e,t,n??{})};Yn("HEAT_GAUGE",100,{warnOnOvercap:!0});Yn("BATTERY_GAUGE",100,{warnOnOvercap:!0});Yn("REASSEMBLED",1,{timeout:5,warnOnTimeout:!0});Yn("OVERHEATED",5,{timeout:10,warnOnTimeout:!0});Yn("WILDFIRE",1,{timeout:10});Yn("WILDFIRE_SELF",1,{timeout:10});Yn("FLAMETHROWER",1,{timeout:10});Yn("BIOBLASTER",1,{timeout:15});Yn("TACTICIAN",1,{timeout:15});Yn("HYPERCHARGED",1,{timeout:30,warnOnTimeout:!0});Yn("EXCAVATOR_READY",1,{timeout:30,warnOnTimeout:!0});Yn("FULL_METAL_MACHINIST",1,{timeout:30,warnOnTimeout:!0});Yn("HEAT_COMBO",2,{timeout:30});Yn("QUEEN",7);Yn("QUEEN_PUNCHES",5);Yn("QUEEN_FINISHERS",2);Yn("WILDFIRE_HITS",6);Yn("BATTERY_BONUS",50);const X2=["HEATED_CLEAN_SHOT","HEATED_SLUG_SHOT","HEATED_SPLIT_SHOT","SPREAD_SHOT","SCATTERGUN"],GC=["CHAIN_SAW","EXCAVATOR","FULL_METAL_FIELD","SCATTERGUN","BIOBLASTER","SPREAD_SHOT"];class q2 extends Jt{constructor(n){super(n);J(this,"handleQueenPunch",()=>{if(!this.hasResourceAvailable("QUEEN_PUNCHES")){this.handleQueenFinisher();return}const n=this.resources.get("QUEEN").node;n!==void 0&&this.resolveQueenPotency(n),this.resources.get("QUEEN_PUNCHES").consume(1),this.hasResourceAvailable("QUEEN_PUNCHES")?this.addEvent(new Me("queen punch",1.56,()=>this.handleQueenPunch())):this.addEvent(new Me("queen finisher",1.56,()=>this.handleQueenFinisher()))});J(this,"handleQueenFinisher",()=>{if(!this.hasResourceAvailable("QUEEN_FINISHERS"))return;const n=this.resources.get("QUEEN").node;n!==void 0&&this.resolveQueenPotency(n),this.resources.get("QUEEN_FINISHERS").consume(1),this.hasResourceAvailable("QUEEN_FINISHERS")?this.addEvent(new Me("queen finisher",2,()=>this.handleQueenFinisher())):(this.tryConsumeResource("BATTERY_BONUS",!0),this.addEvent(new Me("expire queen",5,()=>{this.tryConsumeResource("QUEEN",!0)})))});this.cooldowns.set(new Fe("cd_AIR_ANCHOR",this.config.adjustedSksGCD(40),1,1)),this.cooldowns.set(new Fe("cd_CHAINSAW",this.config.adjustedSksGCD(60),1,1)),this.hasTraitUnlocked("QUEENS_GAMBIT")||(this.resources.set(new ai("QUEEN_FINISHERS",1,0)),this.resources.set(new ai("QUEEN",6,0))),this.hasTraitUnlocked("ENHANCED_REASSEMBLE")||this.cooldowns.set(new Fe("cd_REASSEMBLE",55,1,1)),this.hasTraitUnlocked("ENHANCED_MULTI_WEAPON")||this.cooldowns.set(new Fe("cd_DRILL",this.config.adjustedSksGCD(20),1,1)),this.hasTraitUnlocked("CHARGED_ACTION_MASTERY")||(this.cooldowns.set(new Fe("cd_DOUBLE_CHECK",30,2,2)),this.cooldowns.set(new Fe("cd_CHECKMATE",30,2,2))),this.hasTraitUnlocked("ENHANCED_TACTICIAN")||this.cooldowns.set(new Fe("cd_TACTICIAN",120,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"BIOBLASTER",appliedBy:["BIOBLASTER"]}]},{groupedEffects:[{effectName:"FLAMETHROWER",appliedBy:["FLAMETHROWER"],isGroundTargeted:!0,exclude:!0}]}],["ROOK_AUTOTURRET","AUTOMATON_QUEEN","WILDFIRE"])}get statusPropsGenerator(){return new W2(this)}jobSpecificRegisterRecurringEvents(){const n=()=>{this.handleDoTTick("FLAMETHROWER"),this.getDisplayTime()>=0&&p.reportDotTick(this.time,"FLAMETHROWER"),this.addEvent(new Me("Flamethrower tick",1,()=>{n()}))};let a=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;a>1;)a--;this.addEvent(new Me("initial Flamethrower tick",a,n))}cancelChanneledSkills(){this.tryConsumeResource("FLAMETHROWER")}processComboStatus(n){if(!X2.includes(n))return;const a=this.resources.get("HEAT_COMBO").availableAmount();let s=0;a===0&&n==="HEATED_SPLIT_SHOT"?s=1:a===1&&n==="HEATED_SLUG_SHOT"&&(s=2),this.setComboState("HEAT_COMBO",s)}gainResource(n,a){this.resources.get(n).gain(a)}resolveQueenPotency(n){const a=this.resources.get("QUEEN_PUNCHES").availableAmount()+this.resources.get("QUEEN_FINISHERS").availableAmount(),s=this.resources.get("QUEEN").availableAmount()-a;if(s<0)return;const c=n.getDotPotencies("QUEEN")[s];this.hasResourceAvailable("TINCTURE")&&c.modifiers.push(X.Tincture),c.snapshotTime=this.getDisplayTime(),p.resolvePotency(c)}calculateQueenPotency(n,a){const s=this.resources.get("BATTERY_BONUS").availableAmount(),c=(a-n)*(s/50);return Math.floor((n+c)*.89)}expireWildfire(){if(!this.hasResourceAvailable("WILDFIRE_HITS"))return;this.tryConsumeResource("WILDFIRE_SELF"),this.tryConsumeResource("WILDFIRE");const n=this.hasTraitUnlocked("ENHANCED_WILD_FIRE")?240:100,a=Math.min(this.resources.get("WILDFIRE_HITS").availableAmount(),6)*n,s=this.resources.get("WILDFIRE").node;if(s===void 0)return;const c=s.getDotPotencies("WILDFIRE")[0];c.base=a,p.resolvePotency(c),this.tryConsumeResource("WILDFIRE_HITS",!0)}}const bi=(e,t,n)=>{const a=we(n.onConfirm,s=>s.processComboStatus(e),s=>{e!=="FULL_METAL_FIELD"&&s.tryConsumeResource("REASSEMBLED")},s=>{s.hasResourceAvailable("WILDFIRE_SELF")&&s.resources.get("WILDFIRE_HITS").gain(1)},s=>{GC.includes(e)||s.tryConsumeResource("OVERHEATED")});return cn("MCH",e,t,{...n,onConfirm:a,jobPotencyModifiers:s=>{const c=[];return(s.hasResourceAvailable("REASSEMBLED")||e==="FULL_METAL_FIELD")&&c.push(X.AutoCDH),s.hasResourceAvailable("OVERHEATED")&&!GC.includes(e)&&c.push(X.Overheated),c}})},Ao=(e,t,n,a)=>ut("MCH",e,t,n,a),FS=(e,t,n,a)=>{const s=we(a.onConfirm);return qe("MCH",e,t,n,{...a,onConfirm:s})};bi("HEATED_SPLIT_SHOT",54,{potency:[["NEVER",180],["MARKSMANS_MASTERY",200],["MARKSMANS_MASTERY_II",220]],applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});bi("HEATED_SLUG_SHOT",60,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",140]],combo:{potency:[["NEVER",280],["MARKSMANS_MASTERY",300],["MARKSMANS_MASTERY_II",320]],resource:"HEAT_COMBO",resourceValue:1},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5),highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",1)});bi("HEATED_CLEAN_SHOT",64,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",160]],combo:{potency:[["NEVER",360],["MARKSMANS_MASTERY",380],["MARKSMANS_MASTERY_II",420]],resource:"HEAT_COMBO",resourceValue:2},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("HEAT_GAUGE",5),e.gainResource("BATTERY_GAUGE",10)},highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",2)});FS("REASSEMBLE",10,"cd_REASSEMBLE",{rscType:"REASSEMBLED",applicationDelay:0,cooldown:55,maxCharges:2});const LE=[["NEVER",620],["MARKSMANS_MASTERY_II",660]];bi("DRILL",58,{potency:LE,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2}});bi("HOT_SHOT",4,{autoUpgrade:{trait:"HOT_SHOT_MASTERY",otherSkill:"AIR_ANCHOR"},potency:240,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});bi("AIR_ANCHOR",76,{startOnHotbar:!1,potency:LE,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});bi("CHAIN_SAW",90,{replaceIf:[{newSkill:"EXCAVATOR",condition:e=>e.hasResourceAvailable("EXCAVATOR_READY")}],potency:LE,falloff:.25,applicationDelay:1.03,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.hasTraitUnlocked("ENHANCED_MULTI_WEAPON_II")&&e.gainStatus("EXCAVATOR_READY")},secondaryCooldown:{cdName:"cd_CHAINSAW",cooldown:60,maxCharges:1}});bi("EXCAVATOR",90,{startOnHotbar:!1,potency:LE,falloff:.25,applicationDelay:1.07,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.tryConsumeResource("EXCAVATOR_READY")},validateAttempt:e=>e.hasResourceAvailable("EXCAVATOR_READY"),highlightIf:e=>e.hasResourceAvailable("EXCAVATOR_READY")});Ao("BARREL_STABILIZER",66,"cd_BARREL_STABILIZER",{replaceIf:[{newSkill:"FULL_METAL_FIELD",condition:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")}],applicationDelay:0,cooldown:120,maxCharges:1,requiresCombat:!0,onConfirm:e=>{e.gainStatus("HYPERCHARGED"),e.hasTraitUnlocked("ENHANCED_BARREL_STABILIZER")&&e.gainStatus("FULL_METAL_MACHINIST")}});bi("FULL_METAL_FIELD",100,{startOnHotbar:!1,potency:900,falloff:.25,applicationDelay:1.02,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.tryConsumeResource("FULL_METAL_MACHINIST"),validateAttempt:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST"),highlightIf:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")});FS("HYPERCHARGE",30,"cd_HYPERCHARGE",{rscType:"OVERHEATED",applicationDelay:0,cooldown:10,maxCharges:1,onConfirm:e=>{e.hasResourceAvailable("HYPERCHARGED")?e.tryConsumeResource("HYPERCHARGED"):e.resources.get("HEAT_GAUGE").consume(50)},validateAttempt:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED"),highlightIf:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED")});Ao("WILDFIRE",45,"cd_WILDFIRE",{replaceIf:[{newSkill:"DETONATOR",condition:e=>e.hasResourceAvailable("WILDFIRE_SELF")}],applicationDelay:.67,cooldown:120,maxCharges:1,onConfirm:(e,t)=>{e.gainStatus("WILDFIRE_SELF");const n=e.resources.get("WILDFIRE"),a=new ln({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"WILDFIRE",aspect:_e.Physical,basePotency:0,snapshotTime:e.getDisplayTime(),description:"wildfire",targetCount:1});a.modifiers=[X.NoCDH],e.hasResourceAvailable("TINCTURE")&&a.modifiers.push(X.Tincture),t.addDoTPotency(a,"WILDFIRE"),n.gain(1),n.node=t,e.resources.addResourceEvent({rscType:"WILDFIRE",name:"wildfire expiration",delay:Vt("MCH","WILDFIRE").maxTimeout,fnOnRsc:s=>e.expireWildfire()})}});Ao("DETONATOR",45,"cd_DETONATOR",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,maxCharges:1,onConfirm:e=>e.expireWildfire(),validateAttempt:e=>e.hasResourceAvailable("WILDFIRE_SELF")});bi("BLAZING_SHOT",68,{potency:[["NEVER",220],["MARKSMANS_MASTERY_II",240]],applicationDelay:.85,recastTime:1.5,onConfirm:e=>{e.cooldowns.get("cd_DOUBLE_CHECK").restore(15),e.cooldowns.get("cd_CHECKMATE").restore(15)},validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});Ao("GAUSS_ROUND",15,"cd_DOUBLE_CHECK",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"DOUBLE_CHECK"},potency:130,applicationDelay:.71,cooldown:30,maxCharges:3});Ao("DOUBLE_CHECK",92,"cd_DOUBLE_CHECK",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});Ao("RICOCHET",50,"cd_CHECKMATE",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"CHECKMATE"},potency:130,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});Ao("CHECKMATE",92,"cd_CHECKMATE",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});const Z2=[{skillName:"ROOK_AUTOTURRET",skillLevel:40,autoUpgrade:{otherSkill:"AUTOMATON_QUEEN",trait:"PROMOTION"}},{skillName:"AUTOMATON_QUEEN",skillLevel:80,startOnHotbar:!1}];Z2.forEach(e=>{Ao(e.skillName,e.skillLevel,"cd_QUEEN",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:6,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("BATTERY_GAUGE",50)&&!t.hasResourceAvailable("QUEEN"),onConfirm:(t,n)=>{const a=t.resources.get("BATTERY_GAUGE").availableAmount();t.resources.get("BATTERY_BONUS").gain(a-50),t.tryConsumeResource("BATTERY_GAUGE",!0);const s=t.resources.get("QUEEN_PUNCHES");s.gain(5);const c=t.hasTraitUnlocked("QUEENS_GAMBIT")?2:1;t.resources.get("QUEEN_FINISHERS").gain(c),t.resources.get("QUEEN").gain(s.availableAmount()+c);let d="VOLLEY_FIRE",f=0;t.hasTraitUnlocked("PROMOTION")?(d="ARM_PUNCH",f=t.calculateQueenPotency(120,240)):f=t.calculateQueenPotency(35,75);for(let h=0;h<s.availableAmount();h++)n.addDoTPotency(new ln({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:_e.Physical,description:"",basePotency:f,snapshotTime:void 0,targetCount:n.targetCount}),"QUEEN");d=t.hasTraitUnlocked("PROMOTION")?"PILE_BUNKER":"ROOK_OVERLOAD",d==="PILE_BUNKER"?f=t.calculateQueenPotency(340,680):f=t.calculateQueenPotency(160,320),n.addDoTPotency(new ln({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:_e.Physical,description:"",basePotency:f,snapshotTime:void 0,targetCount:n.targetCount}),"QUEEN"),t.hasTraitUnlocked("QUEENS_GAMBIT")&&n.addDoTPotency(new ln({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:"CROWNED_COLLIDER",aspect:_e.Physical,description:"",basePotency:t.calculateQueenPotency(390,780),snapshotTime:void 0,targetCount:n.targetCount}),"QUEEN"),t.resources.get("QUEEN").node=n,t.addEvent(new Me("initial queen punch",5.5,()=>t.handleQueenPunch()))}})});const $2=[{skillName:"ROOK_OVERDRIVE",skillLevel:40,autoUpgrade:{otherSkill:"QUEEN_OVERDRIVE",trait:"PROMOTION"}},{skillName:"QUEEN_OVERDRIVE",skillLevel:80,startOnHotbar:!1}];$2.forEach(e=>{Ao(e.skillName,e.skillLevel,"cd_OVERDRIVE",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:15,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("QUEEN_PUNCHES"),onConfirm:t=>{t.tryConsumeResource("QUEEN_PUNCHES",!0)}})});bi("SPREAD_SHOT",18,{autoUpgrade:{trait:"SPREAD_SHOT_MASTERY",otherSkill:"SCATTERGUN"},potency:110,falloff:0,applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});bi("SCATTERGUN",82,{startOnHotbar:!1,potency:130,falloff:0,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",10)});bi("BIOBLASTER",58,{potency:50,falloff:0,applicationDelay:.97,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2},onConfirm:(e,t)=>e.addDoTPotencies({node:t,effectName:"BIOBLASTER",skillName:"BIOBLASTER",tickPotency:50,speedStat:"sks"}),onApplication:(e,t)=>e.applyDoT("BIOBLASTER",t)});bi("AUTO_CROSSBOW",52,{potency:[["NEVER",140],["MARKSMANS_MASTERY_II",180]],falloff:0,applicationDelay:.89,recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});bi("FLAMETHROWER",70,{applicationDelay:.89,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"FLAMETHROWER",skillName:"FLAMETHROWER",tickPotency:120,tickFrequency:1,speedStat:"sks"})},onApplication:(e,t)=>{e.applyDoT("FLAMETHROWER",t)},secondaryCooldown:{cdName:"cd_FLAMETHROWER",cooldown:60,maxCharges:1}});FS("TACTICIAN",56,"cd_TACTICIAN",{rscType:"TACTICIAN",maxCharges:1,cooldown:90,applicationDelay:.62});Ao("DISMANTLE",62,"cd_DISMANTLE",{maxCharges:1,cooldown:120,applicationDelay:.62});Object.keys(iS).forEach(e=>Wt(e,`PCT/${Ye[e].name}.png`));class Q2 extends Qt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(iS).map(t=>t==="MONOCHROME_TONES"||t==="SUBTRACTIVE_PALETTE"?this.makeCommonTimerless(t):t==="INSPIRATION"?this.makeToggleableTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,a=n.get("PORTRAIT").availableAmount(),s=n.get("DEPICTIONS").availableAmount(),c=n.get("CREATURE_CANVAS").availableAmount(),d=n.get("WEAPON_CANVAS").availableAmount(),f=n.get("LANDSCAPE_CANVAS").availableAmount(),h=n.get("PALETTE_GAUGE").availableAmount(),m=n.get("PAINT").availableAmount(),R=n.get("MONOCHROME_TONES").available(1),T=[{kind:"text",name:g({en:"portrait",zh:""}),text:a===0?"/":g(a===1?{en:"moogle",zh:""}:{en:"madeen",zh:""})},{kind:"text",name:g({en:"depictions",zh:""}),text:s===0?"/":g(s===1?{en:"pom",zh:""}:s===2?{en:"wing",zh:""}:s===3?{en:"fang",zh:""}:{en:"maw",zh:""})},{kind:"counter",name:g({en:"creature",zh:""}),color:t.pct.creatureCanvas,currentStacks:c,maxStacks:1},{kind:"counter",name:g({en:"weapon",zh:""}),color:t.pct.weaponCanvas,currentStacks:d,maxStacks:1},{kind:"counter",name:g({en:"landscape",zh:""}),color:t.pct.landscapeCanvas,currentStacks:f,maxStacks:1},{kind:"bar",name:g({en:"palette gauge",zh:""}),color:t.pct.paletteGauge,progress:h/100,valueString:h.toFixed(0)}];return this.state.hasTraitUnlocked("ENHANCED_ARTISTRY")&&T.push({kind:"paint",name:g({en:"paint gauge",zh:""}),holyColor:t.pct.holyPaint,cometColor:t.pct.cometPaint,currentStacks:m,maxStacks:5,hasComet:this.state.hasTraitUnlocked("ENHANCED_PALETTE")&&R}),T}}const Dn=(e,t,n)=>{Qe("PCT",e,t,n??{})};Dn("PORTRAIT",2);Dn("DEPICTIONS",3);Dn("CREATURE_CANVAS",1,{default:1});Dn("WEAPON_CANVAS",1,{default:1});Dn("LANDSCAPE_CANVAS",1,{default:1});Dn("PALETTE_GAUGE",100,{warnOnOvercap:!0});Dn("PAINT",5);Dn("AETHERHUES",2,{timeout:30.8});Dn("MONOCHROME_TONES",1);Dn("SUBTRACTIVE_PALETTE",3);Dn("HAMMER_TIME",3,{timeout:30});Dn("INSPIRATION",1,{timeout:30});Dn("SUBTRACTIVE_SPECTRUM",1,{timeout:30,warnOnTimeout:!0});Dn("HYPERPHANTASIA",5,{timeout:30,warnOnTimeout:!0});Dn("RAINBOW_BRIGHT",1,{timeout:30,warnOnTimeout:!0});Dn("STARSTRUCK",1,{timeout:20,warnOnTimeout:!0});Dn("STARRY_MUSE",1,{timeout:20.5});Dn("TEMPERA_COAT",1,{timeout:10});Dn("TEMPERA_GRASSA",1,{timeout:10});Dn("SMUDGE",1,{timeout:5});const J2=["FIRE_IN_RED","FIRE_II_IN_RED","AERO_IN_GREEN","AERO_II_IN_GREEN","WATER_IN_BLUE","WATER_II_IN_BLUE","HOLY_IN_WHITE","BLIZZARD_IN_CYAN","BLIZZARD_II_IN_CYAN","STONE_IN_YELLOW","STONE_II_IN_YELLOW","THUNDER_IN_MAGENTA","THUNDER_II_IN_MAGENTA","COMET_IN_BLACK","STAR_PRISM"],BC=["POM_MOTIF","WING_MOTIF","CLAW_MOTIF","MAW_MOTIF"],eB=["HAMMER_BRUSH","HAMMER_STAMP","POLISHING_HAMMER"];class tB extends Jt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new Fe("cd_SWIFTCAST",n,1,1)].forEach(c=>this.cooldowns.set(c));const a=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")?3:2;this.cooldowns.set(new Fe("cd_LIVING_MUSE",40,a,a));const s=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")?2:1;this.cooldowns.set(new Fe("cd_STEEL_MUSE",60,s,s)),this.registerRecurringEvents()}get statusPropsGenerator(){return new Q2(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("STARRY_MUSE")&&t.addBuff(H.StarryMuse)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("INSPIRATION")&&J2.includes(n.name)&&t.addBuff(H.Hyperphantasia)}captureSpellCastTime(t,n){return BC.includes(t)?n:t==="RAINBOW_DRIP"?this.hasResourceAvailable("RAINBOW_BRIGHT")?0:this.config.adjustedCastTime(n):this.config.adjustedCastTime(n,this.hasResourceAvailable("INSPIRATION")?25:void 0)}captureSpellRecastTime(t,n){if(BC.includes(t))return n;if(t==="RAINBOW_DRIP"){const a=this.config.adjustedGCD(n);return this.hasResourceAvailable("RAINBOW_BRIGHT")?a-3.5:a}return eB.includes(t)?this.config.adjustedGCD(n):this.config.adjustedGCD(n,this.hasResourceAvailable("INSPIRATION")?25:void 0)}getHammerStacks(){return this.resources.get("HAMMER_TIME").availableAmount()}doFiller(){this.cycleAetherhues(),this.tryConsumeHyperphantasia(),this.tryConsumeResource("SUBTRACTIVE_PALETTE")}cycleAetherhues(){const t=this.resources.get("AETHERHUES").availableAmount();this.tryConsumeResource("AETHERHUES",!0),t===2||(t===1?this.gainStatus("AETHERHUES",2):this.gainStatus("AETHERHUES",1))}tryConsumeHyperphantasia(){this.hasResourceAvailable("INSPIRATION")&&this.tryConsumeResource("HYPERPHANTASIA")&&!this.hasResourceAvailable("HYPERPHANTASIA")&&(this.tryConsumeResource("INSPIRATION"),this.hasTraitUnlocked("ENHANCED_PICTOMANCY_III")&&this.gainStatus("RAINBOW_BRIGHT"))}}const fn=(e,t,n)=>{const a=n.baseRecastTime??2.5,s=we((c,d)=>{e==="RAINBOW_DRIP"&&c.hasResourceAvailable("RAINBOW_BRIGHT")||n.baseCastTime===0||c.tryConsumeResource("SWIFTCAST")},n.onConfirm);return ia("PCT",e,t,{...n,castTime:c=>c.captureSpellCastTime(e,n.baseCastTime),recastTime:c=>c.captureSpellRecastTime(e,a),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:c=>{const d=[];return c.hasResourceAvailable("STARRY_MUSE")&&d.push(X.Starry),n.jobPotencyModifiers&&d.push(...n.jobPotencyModifiers(c)),d},isInstantFn:c=>e==="RAINBOW_DRIP"&&c.hasResourceAvailable("RAINBOW_BRIGHT")||n.baseCastTime===0||c.hasResourceAvailable("SWIFTCAST"),onConfirm:s})},Va=(e,t,n,a)=>ut("PCT",e,t,n,{...a,jobPotencyModifiers:s=>s.hasResourceAvailable("STARRY_MUSE")?[X.Starry]:[]}),nD={newSkill:"FIRE_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},iD={newSkill:"AERO_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},aD={newSkill:"WATER_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},oD={newSkill:"BLIZZARD_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},lD={newSkill:"STONE_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},sD={newSkill:"THUNDER_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},rD={newSkill:"FIRE_II_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},cD={newSkill:"AERO_II_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},uD={newSkill:"WATER_II_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},dD={newSkill:"BLIZZARD_II_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},hD={newSkill:"STONE_II_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},fD={newSkill:"THUNDER_II_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},jS=[nD,iD,aD],zS=[oD,lD,sD],YS=[rD,cD,uD],KS=[dD,hD,fD],nB={newSkill:"CREATURE_MOTIF",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")},ED={newSkill:"POM_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},mD={newSkill:"WING_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},AD={newSkill:"CLAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},RD={newSkill:"MAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},iB={newSkill:"LIVING_MUSE",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")},TD={newSkill:"POM_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},SD={newSkill:"WINGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},ID={newSkill:"CLAWED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},_D={newSkill:"FANGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},aB={newSkill:"MOG_OF_THE_AGES",condition:e=>e.resources.get("PORTRAIT").availableAmount()!==2},oB={newSkill:"RETRIBUTION_OF_THE_MADEEN",condition:e=>e.resources.get("PORTRAIT").availableAmount()===2},lB={newSkill:"WEAPON_MOTIF",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},gD={newSkill:"HAMMER_MOTIF",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},sB={newSkill:"STEEL_MUSE",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},rB={newSkill:"STRIKING_MUSE",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},cB={newSkill:"LANDSCAPE_MOTIF",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")},pD={newSkill:"STARRY_SKY_MOTIF",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},uB={newSkill:"SCENIC_MUSE",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},ND={newSkill:"STARRY_MUSE",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")};fn("FIRE_IN_RED",1,{replaceIf:jS,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",380],["PICTOMANCY_MASTERY_III",420],["PICTOMANCY_MASTERY_IV",490]],applicationDelay:.84,validateAttempt:e=>nD.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});fn("AERO_IN_GREEN",5,{replaceIf:jS,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",350],["PICTOMANCY_MASTERY_II",420],["PICTOMANCY_MASTERY_III",460],["PICTOMANCY_MASTERY_IV",530]],applicationDelay:.89,validateAttempt:e=>iD.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});fn("WATER_IN_BLUE",15,{replaceIf:jS,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",390],["PICTOMANCY_MASTERY_II",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],applicationDelay:.98,validateAttempt:e=>aD.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});fn("FIRE_II_IN_RED",25,{replaceIf:YS,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",120],["PICTOMANCY_MASTERY_II",150],["PICTOMANCY_MASTERY_IV",180]],falloff:0,applicationDelay:.84,validateAttempt:e=>rD.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});fn("AERO_II_IN_GREEN",35,{replaceIf:YS,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",140],["PICTOMANCY_MASTERY_II",170],["PICTOMANCY_MASTERY_IV",200]],falloff:0,applicationDelay:.89,validateAttempt:e=>cD.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});fn("WATER_II_IN_BLUE",45,{replaceIf:YS,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",170],["PICTOMANCY_MASTERY_II",190],["PICTOMANCY_MASTERY_IV",220]],falloff:0,applicationDelay:.89,validateAttempt:e=>uD.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});fn("BLIZZARD_IN_CYAN",60,{replaceIf:zS,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",560],["PICTOMANCY_MASTERY_II",680],["PICTOMANCY_MASTERY_III",750],["PICTOMANCY_MASTERY_IV",860]],applicationDelay:.75,validateAttempt:e=>oD.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});fn("STONE_IN_YELLOW",60,{replaceIf:zS,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",600],["PICTOMANCY_MASTERY_II",720],["PICTOMANCY_MASTERY_III",790],["PICTOMANCY_MASTERY_IV",900]],applicationDelay:.8,validateAttempt:e=>lD.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});fn("THUNDER_IN_MAGENTA",60,{replaceIf:zS,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",640],["PICTOMANCY_MASTERY_II",760],["PICTOMANCY_MASTERY_III",830],["PICTOMANCY_MASTERY_IV",940]],applicationDelay:.8,validateAttempt:e=>sD.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});fn("BLIZZARD_II_IN_CYAN",60,{replaceIf:KS,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",270],["PICTOMANCY_MASTERY_II",330],["PICTOMANCY_MASTERY_IV",360]],falloff:0,applicationDelay:.75,validateAttempt:e=>dD.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});fn("STONE_II_IN_YELLOW",60,{replaceIf:KS,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",290],["PICTOMANCY_MASTERY_II",350],["PICTOMANCY_MASTERY_IV",380]],falloff:0,applicationDelay:.8,validateAttempt:e=>hD.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});fn("THUNDER_II_IN_MAGENTA",60,{replaceIf:KS,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",370],["PICTOMANCY_MASTERY_IV",400]],falloff:0,applicationDelay:.8,validateAttempt:e=>fD.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});fn("HOLY_IN_WHITE",80,{baseCastTime:0,baseManaCost:300,basePotency:[["NEVER",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],falloff:.65,applicationDelay:1.34,validateAttempt:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeHyperphantasia()},highlightIf:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT")});fn("COMET_IN_BLACK",90,{baseCastTime:0,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",830],["PICTOMANCY_MASTERY_IV",940]],falloff:.6,applicationDelay:1.87,validateAttempt:e=>e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeResource("MONOCHROME_TONES"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("MONOCHROME_TONES")});fn("RAINBOW_DRIP",92,{baseCastTime:4,baseRecastTime:6,baseManaCost:400,basePotency:1e3,applicationDelay:1.24,falloff:.85,onConfirm:e=>{e.resources.get("PAINT").gain(1),e.tryConsumeResource("RAINBOW_BRIGHT")},highlightIf:e=>e.hasResourceAvailable("RAINBOW_BRIGHT")});fn("STAR_PRISM",100,{baseCastTime:0,baseManaCost:0,basePotency:1100,applicationDelay:1.25,falloff:.7,validateAttempt:e=>e.hasResourceAvailable("STARSTRUCK"),onConfirm:e=>{e.tryConsumeResource("STARSTRUCK"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("STARSTRUCK")});Va("SUBTRACTIVE_PALETTE",60,"cd_SUBTRACTIVE",{cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")&&(e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.hasResourceAvailable("PALETTE_GAUGE",50)),onConfirm:e=>{e.tryConsumeResource("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").consume(50),e.hasResourceAvailable("MONOCHROME_TONES")&&p.reportWarning({kind:"custom",en:"comet overwrite!",zh:""}),e.hasTraitUnlocked("ENHANCED_PALETTE")&&e.gainStatus("MONOCHROME_TONES"),e.gainStatus("SUBTRACTIVE_PALETTE",3)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").available(50)});const dB=[nB,ED,mD,AD,RD],hB=[["CREATURE_MOTIF",30,e=>!1],["POM_MOTIF",30,ED.condition],["WING_MOTIF",30,mD.condition],["CLAW_MOTIF",96,AD.condition],["MAW_MOTIF",96,RD.condition]];hB.forEach(([e,t,n],a)=>fn(e,t,{replaceIf:dB,startOnHotbar:a===0,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:n,onConfirm:s=>s.resources.get("CREATURE_CANVAS").gain(1)}));const fB=[iB,TD,SD,ID,_D],EB=[["LIVING_MUSE",30,0,0,e=>!1],["POM_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.62,TD.condition],["WINGED_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.98,SD.condition],["CLAWED_MUSE",96,800,.98,ID.condition],["FANGED_MUSE",96,800,1.16,_D.condition]];EB.forEach(([e,t,n,a,s],c)=>Va(e,t,"cd_LIVING_MUSE",{replaceIf:fB,startOnHotbar:c===0,potency:n,falloff:.7,applicationDelay:a,cooldown:40,validateAttempt:s,onConfirm:d=>{const f=d.resources.get("DEPICTIONS"),h=d.resources.get("PORTRAIT");d.tryConsumeResource("CREATURE_CANVAS"),f.gain(1),e==="WINGED_MUSE"&&(h.overrideCurrentValue(1),d.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")||f.overrideCurrentValue(0)),e==="FANGED_MUSE"&&(h.overrideCurrentValue(2),f.overrideCurrentValue(0))},maxCharges:3,highlightIf:d=>d.hasResourceAvailable("CREATURE_CANVAS")}));Va("MOG_OF_THE_AGES",30,"cd_PORTRAIT",{replaceIf:[oB],potency:[["NEVER",800],["PICTOMANCY_MASTERY_III",1e3]],falloff:.7,applicationDelay:1.15,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",1),onConfirm:e=>e.tryConsumeResource("PORTRAIT"),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});Va("RETRIBUTION_OF_THE_MADEEN",30,"cd_PORTRAIT",{replaceIf:[aB],startOnHotbar:!1,potency:1100,falloff:.7,applicationDelay:1.3,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",2),onConfirm:e=>e.tryConsumeResource("PORTRAIT",!0),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});fn("WEAPON_MOTIF",50,{replaceIf:[gD],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});fn("HAMMER_MOTIF",50,{replaceIf:[lB],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>gD.condition(e)&&!e.hasResourceAvailable("HAMMER_TIME"),onConfirm:e=>e.resources.get("WEAPON_CANVAS").gain(1)});Va("STEEL_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[rB],cooldown:60,maxCharges:2,validateAttempt:e=>!1});Va("STRIKING_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[sB],startOnHotbar:!1,requiresCombat:!0,cooldown:60,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("WEAPON_CANVAS"),onConfirm:e=>{e.tryConsumeResource("WEAPON_CANVAS"),e.gainStatus("HAMMER_TIME",3)},highlightIf:e=>e.hasResourceAvailable("WEAPON_CANVAS")});const FC=[{newSkill:"HAMMER_STAMP",condition:e=>!e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")||e.getHammerStacks()===3},{newSkill:"HAMMER_BRUSH",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===2},{newSkill:"POLISHING_HAMMER",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===1}],mB=[["HAMMER_STAMP",50,[["NEVER",420],["PICTOMANCY_MASTERY_II",500],["PICTOMANCY_MASTERY_III",540],["PICTOMANCY_MASTERY_IV",560]],1.38],["HAMMER_BRUSH",86,[["NEVER",560],["PICTOMANCY_MASTERY_IV",580]],1.25],["POLISHING_HAMMER",86,[["NEVER",580],["PICTOMANCY_MASTERY_IV",600]],2.1]];mB.forEach(([e,t,n,a],s)=>fn(e,t,{replaceIf:FC,baseCastTime:0,startOnHotbar:s===0,basePotency:n,falloff:.7,applicationDelay:a,validateAttempt:c=>FC[s].condition(c)&&c.hasResourceAvailable("HAMMER_TIME"),onConfirm:c=>c.tryConsumeResource("HAMMER_TIME"),highlightIf:c=>c.hasResourceAvailable("HAMMER_TIME"),jobPotencyModifiers:c=>[X.AutoCDH]}));fn("LANDSCAPE_MOTIF",70,{replaceIf:[pD],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});fn("STARRY_SKY_MOTIF",70,{replaceIf:[cB],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>pD.condition(e)&&!e.hasResourceAvailable("STARRY_MUSE"),onConfirm:e=>e.resources.get("LANDSCAPE_CANVAS").gain(1)});Va("SCENIC_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[ND],applicationDelay:0,cooldown:120,validateAttempt:e=>!1});Va("STARRY_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[uB],startOnHotbar:!1,requiresCombat:!0,applicationDelay:0,cooldown:120,validateAttempt:e=>ND.condition(e),onConfirm:e=>{e.tryConsumeResource("LANDSCAPE_CANVAS"),e.hasTraitUnlocked("ENHANCED_PICTOMANCY")&&(e.gainStatus("HYPERPHANTASIA",5),e.gainStatus("INSPIRATION")),e.hasTraitUnlocked("ENHANCED_PICTOMANCY_V")&&e.gainStatus("STARSTRUCK"),e.gainStatus("STARRY_MUSE"),e.gainStatus("SUBTRACTIVE_SPECTRUM")},highlightIf:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")});qe("PCT","TEMPERA_COAT",10,"cd_TEMPERA_COAT",{rscType:"TEMPERA_COAT",replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],applicationDelay:0,cooldown:120});Va("TEMPERA_GRASSA",88,"cd_GRASSA",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT"),e.gainStatus("TEMPERA_GRASSA")},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});Va("TEMPERA_COAT_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],startOnHotbar:!1,applicationDelay:0,animationLock:Ni,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Coat when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-60))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});Va("TEMPERA_GRASSA_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],startOnHotbar:!1,applicationDelay:0,animationLock:Ni,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_GRASSA"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_GRASSA");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Grassa when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-30))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_GRASSA")});qe("PCT","SMUDGE",20,"cd_SMUDGE",{rscType:"SMUDGE",applicationDelay:0,cooldown:20,animationLock:$t});Object.keys(oS).forEach(e=>Wt(e,`RDM/${Ye[e].name}.png`));class AB extends Qt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(oS).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,a=n.get("WHITE_MANA").availableAmount(),s=n.get("BLACK_MANA").availableAmount(),c=n.get("MANA_STACKS").availableAmount();return[{kind:"bar",name:g({en:"white mana",zh:""}),color:t.rdm.whiteMana,progress:a/100,valueString:a.toFixed(0)},{kind:"bar",name:g({en:"black mana",zh:""}),color:t.rdm.blackMana,progress:s/100,valueString:s.toFixed(0)},{kind:"counter",name:g({en:"mana stacks",zh:""}),color:t.rdm.manaStack,currentStacks:c,maxStacks:3}]}}const li=(e,t,n)=>{Qe("RDM",e,t,n??{})};li("WHITE_MANA",100);li("BLACK_MANA",100);li("MANA_STACKS",3);li("ACCELERATION",1,{timeout:20});li("DUALCAST",1,{timeout:15});li("EMBOLDEN",1,{timeout:20});li("GRAND_IMPACT_READY",1,{timeout:30,warnOnTimeout:!0});li("MAGICK_BARRIER",1,{timeout:10});li("MAGICKED_SWORDPLAY",3,{timeout:30,warnOnTimeout:!0});li("MANAFICATION",1,{timeout:30});li("PREFULGENCE_READY",1,{timeout:30,warnOnTimeout:!0});li("THORNED_FLOURISH",1,{timeout:30,warnOnTimeout:!0});li("VERFIRE_READY",1,{timeout:30});li("VERSTONE_READY",1,{timeout:30});li("RDM_MELEE_COUNTER",2,{timeout:30});li("RDM_FINISHER_COUNTER",2,{timeout:30});li("RDM_AOE_COUNTER",2,{timeout:30});const CD=["IMPACT","VERAERO","VERTHUNDER","VERAERO_III","VERTHUNDER_III"],bD=["VERHOLY","VERFLARE","SCORCH","RESOLUTION"];class RB extends Jt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,a=this.hasTraitUnlocked("RED_MAGIC_MASTERY")?35:45;[new Fe("cd_SWIFTCAST",n,1,1),new Fe("cd_CONTRE_SIXTE",a,1,1)].forEach(c=>this.cooldowns.set(c));const s=this.hasTraitUnlocked("ENHANCED_ACCELERATION")?2:1;this.cooldowns.set(new Fe("cd_ACCELERATION",55,s,s)),this.registerRecurringEvents()}get statusPropsGenerator(){return new AB(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("EMBOLDEN")&&n.aspect!==_e.Physical&&t.addBuff(H.Embolden),n.name==="IMPACT"&&this.hasResourceAvailable("ACCELERATION")&&t.addBuff(H.Acceleration)}hasThreeManaStacks(){return this.hasResourceAvailable("MANA_STACKS",3)}getFinisherCounter(){return this.resources.get("RDM_FINISHER_COUNTER").availableAmount()}processDualcastAndInstants(t){bD.includes(t)||t==="GRAND_IMPACT"&&this.tryConsumeResource("GRAND_IMPACT_READY")||CD.includes(t)&&this.tryConsumeResource("ACCELERATION")||this.tryConsumeResource("DUALCAST")||this.tryConsumeResource("SWIFTCAST")||this.gainStatus("DUALCAST")}gainColorMana(t){const n=this.resources.get("WHITE_MANA"),a=this.resources.get("BLACK_MANA");if(t.w){const s=a.availableAmount()-n.availableAmount()>30;n.gain(s?Math.floor(t.w/2):t.w)}if(t.b){const s=n.availableAmount()-a.availableAmount()>30;a.gain(s?Math.floor(t.b/2):t.b)}Math.abs(a.availableAmount()-n.availableAmount())>30&&p.reportWarning({kind:"custom",en:"mana difference became more than 30",zh:""})}colorManaExceeds(t){return this.hasResourceAvailable("MAGICKED_SWORDPLAY")||this.hasResourceAvailable("WHITE_MANA",t)&&this.hasResourceAvailable("BLACK_MANA",t)}consumeColorMana(t){this.hasResourceAvailable("MAGICKED_SWORDPLAY")?this.tryConsumeResource("MAGICKED_SWORDPLAY"):(this.resources.get("WHITE_MANA").consume(t),this.resources.get("BLACK_MANA").consume(t))}maybeGainVerproc(t,n=.5){this.maybeGainProc(t,n,!0)}processComboStatus(t){const n=this.resources.get("MANA_STACKS"),a=this.config.level>=80,s=this.config.level>=90,c=this.resources.get("RDM_MELEE_COUNTER").availableAmount(),d=this.resources.get("RDM_FINISHER_COUNTER").availableAmount(),f=this.resources.get("RDM_AOE_COUNTER").availableAmount(),h=c+d+f>0;let m;t==="ENCHANTED_RIPOSTE"||t==="RIPOSTE"?(h&&p.reportComboBreak(),m=[1,0,0],t==="ENCHANTED_RIPOSTE"&&n.gain(1)):t==="ENCHANTED_ZWERCHHAU"||t==="ZWERCHHAU"?(h&&c!==1&&p.reportComboBreak(),m=[c===1?2:0,0,0],t==="ENCHANTED_ZWERCHHAU"&&n.gain(1)):t==="ENCHANTED_REDOUBLEMENT"||t==="REDOUBLEMENT"?(h&&c!==2&&p.reportComboBreak(),m=[0,0,0],t==="ENCHANTED_REDOUBLEMENT"&&n.gain(1)):t==="VERHOLY"||t==="VERFLARE"?(m=[0,a?1:0,0],n.consume(3)):t==="SCORCH"?m=[0,s?2:0,0]:t==="RESOLUTION"?m=[0,0,0]:t==="ENCHANTED_MOULINET"?(c+d>0&&p.reportComboBreak(),m=[0,0,1],n.gain(1)):t==="ENCHANTED_MOULINET_II"?(m=[0,0,2],n.gain(1)):t==="ENCHANTED_MOULINET_III"?(m=[0,0,0],n.gain(1)):t==="ENCHANTED_REPRISE"?m=[c,d,f]:(h&&p.reportComboBreak(),m=[0,0,0],n.consume(n.availableAmount())),this.setComboState("RDM_MELEE_COUNTER",m[0]),this.setComboState("RDM_FINISHER_COUNTER",m[1]),this.setComboState("RDM_AOE_COUNTER",m[2])}}const Kn=(e,t,n)=>{const a=we(n.onConfirm,s=>s.processDualcastAndInstants(e),s=>s.processComboStatus(e));return ia("RDM",e,t,{...n,aspect:n.isPhysical?_e.Physical:void 0,castTime:s=>s.config.adjustedCastTime(n.baseCastTime),recastTime:s=>s.config.adjustedGCD(),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("EMBOLDEN")&&c.push(X.EmboldenMagic),n.jobPotencyModifiers&&c.push(...n.jobPotencyModifiers(s)),c},isInstantFn:s=>bD.includes(e)||e==="GRAND_IMPACT"||CD.includes(e)&&s.hasResourceAvailable("ACCELERATION")||s.hasResourceAvailable("DUALCAST")||s.hasResourceAvailable("SWIFTCAST"),onConfirm:a})},va=(e,t,n)=>{const a=!e.toString().startsWith("ENCHANTED"),s=we(c=>c.processComboStatus(e),n.onConfirm);return cn("RDM",e,t,{...n,aspect:a?_e.Physical:void 0,onConfirm:s,jobPotencyModifiers:c=>{const d=[];return a||c.hasResourceAvailable("EMBOLDEN")&&d.push(X.EmboldenMagic),d}})},$s=(e,t,n,a)=>ut("RDM",e,t,n,{aspect:a.isPhysical?_e.Physical:void 0,jobPotencyModifiers:s=>!a.isPhysical&&s.hasResourceAvailable("EMBOLDEN")?[X.EmboldenMagic]:[],...a}),OD={newSkill:"SCORCH",condition:e=>e.getFinisherCounter()===1},DD={newSkill:"RESOLUTION",condition:e=>e.getFinisherCounter()===2},$f={newSkill:"GRAND_IMPACT",condition:e=>e.getFinisherCounter()<1&&e.hasResourceAvailable("GRAND_IMPACT_READY")},Sd=[{newSkill:"JOLT_II",condition:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY")},OD,DD,$f];Kn("JOLT_II",62,{replaceIf:Sd,autoUpgrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_III"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:280,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});Kn("JOLT_III",84,{replaceIf:Sd,autoDowngrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_II"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:360,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});const yD=[["NEVER",300],["RED_MAGIC_MASTERY_II",340],["RED_MAGIC_MASTERY_III",380]];Kn("VERSTONE",30,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:yD,validateAttempt:e=>e.hasResourceAvailable("VERSTONE_READY"),onConfirm:e=>{e.gainColorMana({w:5}),e.tryConsumeResource("VERSTONE_READY")},highlightIf:e=>e.hasResourceAvailable("VERSTONE_READY")});Kn("VERFIRE",26,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:yD,validateAttempt:e=>e.hasResourceAvailable("VERFIRE_READY"),onConfirm:e=>{e.gainColorMana({b:5}),e.tryConsumeResource("VERFIRE_READY")},highlightIf:e=>e.hasResourceAvailable("VERFIRE_READY")});const VS={newSkill:"VERHOLY",condition:e=>e.hasThreeManaStacks()},WS={newSkill:"VERFLARE",condition:e=>e.hasThreeManaStacks()};Kn("VERAERO",10,{replaceIf:[VS],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});Kn("VERTHUNDER",4,{replaceIf:[WS],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const vD=[["NEVER",380],["ENCHANTED_BLADE_MASTERY",440]];Kn("VERAERO_III",82,{replaceIf:[VS],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:vD,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});Kn("VERTHUNDER_III",82,{replaceIf:[WS],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:vD,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const MD=[["NEVER",100],["RED_MAGIC_MASTERY",120],["RED_MAGIC_MASTERY_III",140]];Kn("VERAERO_II",22,{replaceIf:[VS],baseCastTime:2,baseManaCost:400,applicationDelay:.8,basePotency:MD,falloff:0,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({w:7})});Kn("VERTHUNDER_II",18,{replaceIf:[WS],baseCastTime:2,baseManaCost:400,falloff:0,applicationDelay:.8,basePotency:MD,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({b:7})});Kn("IMPACT",66,{replaceIf:[OD,DD,$f],baseCastTime:5,baseManaCost:400,falloff:0,applicationDelay:.76,basePotency:[["NEVER",200],["RED_MAGIC_MASTERY_III",210]],jobPotencyModifiers:e=>e.hasResourceAvailable("ACCELERATION")?[X.AccelerationImpact]:[],validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:3,b:3})});Kn("GRAND_IMPACT",96,{replaceIf:Sd,startOnHotbar:!1,baseCastTime:0,baseManaCost:0,basePotency:600,falloff:.55,applicationDelay:1.55,validateAttempt:$f.condition,highlightIf:$f.condition,onConfirm:e=>e.gainColorMana({w:3,b:3})});va("RIPOSTE",1,{replaceIf:[{newSkill:"ENCHANTED_RIPOSTE",condition:e=>e.colorManaExceeds(20)}],applicationDelay:.62,potency:130,recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(20)});va("ZWERCHHAU",35,{replaceIf:[{newSkill:"ENCHANTED_ZWERCHHAU",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:150,resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});va("REDOUBLEMENT",50,{replaceIf:[{newSkill:"ENCHANTED_REDOUBLEMENT",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:230,resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});va("ENCHANTED_RIPOSTE",50,{startOnHotbar:!1,replaceIf:[{newSkill:"RIPOSTE",condition:e=>!e.colorManaExceeds(20)}],applicationDelay:.62,potency:[["NEVER",220],["RED_MAGIC_MASTERY_III",280],["ENCHANTED_BLADE_MASTERY",340]],recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(20),onConfirm:e=>e.consumeColorMana(20)});va("ENCHANTED_ZWERCHHAU",50,{startOnHotbar:!1,replaceIf:[{newSkill:"ZWERCHHAU",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",150],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",380]],resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});va("ENCHANTED_REDOUBLEMENT",50,{startOnHotbar:!1,replaceIf:[{newSkill:"REDOUBLEMENT",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",130],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",470],["RED_MAGIC_MASTERY_III",500],["ENCHANTED_BLADE_MASTERY",560]],resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.2,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});const Qf=e=>e.resources.get("WHITE_MANA").available(5)&&e.resources.get("BLACK_MANA").available(5);va("REPRISE",76,{replaceIf:[{newSkill:"ENCHANTED_REPRISE",condition:e=>Qf(e)}],applicationDelay:.62,potency:100,recastTime:2.5,validateAttempt:e=>!Qf(e)});va("ENCHANTED_REPRISE",76,{startOnHotbar:!1,replaceIf:[{newSkill:"REPRISE",condition:e=>!Qf(e)}],applicationDelay:.62,potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",420]],recastTime:2.5,validateAttempt:e=>Qf(e),onConfirm:e=>{e.resources.get("WHITE_MANA").consume(5),e.resources.get("BLACK_MANA").consume(5)}});const so=[{newSkill:"MOULINET",condition:e=>e.resources.get("RDM_AOE_COUNTER").availableAmount()===0&&!e.colorManaExceeds(20)||!e.colorManaExceeds(15)},{newSkill:"ENCHANTED_MOULINET",condition:e=>e.colorManaExceeds(20)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===0},{newSkill:"ENCHANTED_MOULINET_II",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===1},{newSkill:"ENCHANTED_MOULINET_III",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===2}];va("MOULINET",52,{replaceIf:so,falloff:0,applicationDelay:.8,potency:60,recastTime:2.5,validateAttempt:so[0].condition});va("ENCHANTED_MOULINET",52,{startOnHotbar:!1,replaceIf:so,falloff:0,applicationDelay:.8,potency:130,recastTime:1.5,validateAttempt:so[1].condition,onConfirm:e=>e.consumeColorMana(20)});va("ENCHANTED_MOULINET_II",52,{startOnHotbar:!1,replaceIf:so,falloff:0,applicationDelay:.8,potency:140,recastTime:1.5,validateAttempt:so[2].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:so[2].condition});va("ENCHANTED_MOULINET_III",52,{startOnHotbar:!1,replaceIf:so,falloff:0,applicationDelay:.8,potency:150,recastTime:1.5,validateAttempt:so[3].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:so[3].condition});const LD=[["NEVER",600],["ENCHANTED_BLADE_MASTERY",650]];Kn("VERHOLY",70,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:LD,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("WHITE_MANA").availableAmount()<e.resources.get("BLACK_MANA").availableAmount()?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY",.2),e.gainColorMana({w:11})}});Kn("VERFLARE",68,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:LD,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("BLACK_MANA").availableAmount()<e.resources.get("WHITE_MANA").availableAmount()?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY",.2),e.gainColorMana({b:11})}});Kn("SCORCH",80,{startOnHotbar:!1,replaceIf:Sd,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.83,basePotency:[["NEVER",680],["ENCHANTED_BLADE_MASTERY",750]],validateAttempt:e=>e.getFinisherCounter()===1,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===1});Kn("RESOLUTION",90,{startOnHotbar:!1,replaceIf:Sd,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.56,basePotency:[["NEVER",750],["ENCHANTED_BLADE_MASTERY",850]],validateAttempt:e=>e.getFinisherCounter()===2,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===2});Kn("VERCURE",54,{baseCastTime:2,baseManaCost:500,applicationDelay:.8,basePotency:0});Kn("VERRAISE",64,{baseCastTime:10,baseManaCost:2400,applicationDelay:.81,basePotency:0});qe("RDM","EMBOLDEN",58,"cd_EMBOLDEN",{replaceIf:[{newSkill:"VICE_OF_THORNS",condition:e=>e.hasResourceAvailable("THORNED_FLOURISH")}],rscType:"EMBOLDEN",applicationDelay:.62,cooldown:120,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EMBOLDEN")&&e.gainStatus("THORNED_FLOURISH")}});qe("RDM","MANAFICATION",60,"cd_MANAFICATION",{replaceIf:[{newSkill:"PREFULGENCE",condition:e=>e.hasResourceAvailable("PREFULGENCE_READY")}],rscType:"MANAFICATION",requiresCombat:!0,applicationDelay:0,cooldown:110,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_MANAFICATION")&&e.gainStatus("PREFULGENCE_READY"),e.gainStatus("MAGICKED_SWORDPLAY",3),(e.hasResourceAvailable("RDM_MELEE_COUNTER")||e.hasResourceAvailable("RDM_FINISHER_COUNTER")||e.hasResourceAvailable("RDM_AOE_COUNTER"))&&p.reportComboBreak(),e.setComboState("RDM_MELEE_COUNTER",0),e.setComboState("RDM_FINISHER_COUNTER",0),e.setComboState("RDM_AOE_COUNTER",0)}});$s("CORPS_A_CORPS",6,"cd_CORPS_A_CORPS",{isPhysical:!0,applicationDelay:.62,potency:130,cooldown:35,maxCharges:2,animationLock:$t});const xD=[["NEVER",130],["ENHANCED_DISPLACEMENT",180]];$s("ENGAGEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:xD,cooldown:35,maxCharges:2});$s("DISPLACEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:xD,cooldown:35,maxCharges:2,animationLock:$t});$s("FLECHE",45,"cd_FLECHE",{isPhysical:!0,applicationDelay:1.16,potency:[["NEVER",460],["ENCHANTED_BLADE_MASTERY",480]],cooldown:25});$s("CONTRE_SIXTE",56,"cd_CONTRE_SIXTE",{isPhysical:!0,falloff:0,applicationDelay:1.16,potency:[["NEVER",380],["ENCHANTED_BLADE_MASTERY",420]],cooldown:35});qe("RDM","ACCELERATION",50,"cd_ACCELERATION",{rscType:"ACCELERATION",applicationDelay:0,cooldown:55,maxCharges:2,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ACCELERATION_II")&&(e.hasResourceAvailable("GRAND_IMPACT_READY")&&p.reportWarning({kind:"overwrite",rsc:"GRAND_IMPACT_READY"}),e.gainStatus("GRAND_IMPACT_READY"))}});qe("RDM","MAGICK_BARRIER",86,"cd_MAGICK_BARRIER",{rscType:"MAGICK_BARRIER",applicationDelay:0,cooldown:120});$s("VICE_OF_THORNS",92,"cd_VICE_OF_THORNS",{startOnHotbar:!1,falloff:.55,applicationDelay:.8,potency:950,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THORNED_FLOURISH"),onConfirm:e=>e.tryConsumeResource("THORNED_FLOURISH"),highlightIf:e=>e.hasResourceAvailable("THORNED_FLOURISH")});$s("PREFULGENCE",100,"cd_PREFULGENCE",{startOnHotbar:!1,falloff:.55,applicationDelay:1.42,potency:1200,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PREFULGENCE_READY"),onConfirm:e=>e.tryConsumeResource("PREFULGENCE_READY"),highlightIf:e=>e.hasResourceAvailable("PREFULGENCE_READY")});Object.keys(lS).forEach(e=>Wt(e,`RPR/${Ye[e].name}.png`));class TB extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("DEATHS_DESIGN",!1)]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(lS).filter(t=>t!=="DEATHS_DESIGN").map(t=>t==="SOULSOW"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){var T,S;const n=this.state.resources,a=n.get("SOUL").availableAmount(),s=n.get("SHROUD").availableAmount(),c=n.get("LEMURE_SHROUD").availableAmount(),d=n.get("VOID_SHROUD").availableAmount(),f=n.get("RPR_COMBO"),h=n.get("RPR_AOE_COMBO"),m=f.available(1)?(T=f.pendingChange)==null?void 0:T.timeTillEvent:h.available(1)?(S=h.pendingChange)==null?void 0:S.timeTillEvent:void 0,R=[{kind:"text",name:g({en:"Combo Timer",zh:""}),text:(m==null?void 0:m.toFixed(3))??"N/A"},{kind:"bar",name:g({en:"Soul Gauge",zh:""}),color:a<50?t.rpr.soulGaugeLow:t.rpr.soulGaugeHigh,progress:a/100,valueString:Math.floor(a)+"/100"}];return this.state.hasTraitUnlocked("SHROUD_GAUGE")&&R.push({kind:"bar",name:g({en:"Shroud Gauge",zh:""}),color:s<50?t.rpr.shroudGaugeLow:t.rpr.shroudGaugeHigh,progress:s/100,valueString:Math.floor(s)+"/100"},{kind:"counter",name:g({en:"Lemure Shroud",zh:""}),color:t.rpr.lemureShroud,currentStacks:c,maxStacks:5}),this.state.hasTraitUnlocked("VOID_SOUL")&&R.push({kind:"counter",name:g({en:"Void Shroud",zh:""}),color:d<2?t.rpr.voidShroudLow:t.rpr.voidShroudHigh,currentStacks:d,maxStacks:5}),R}}function Ot(e,t,n){Qe("RPR",e,t,n??{})}Ot("SOUL",100);Ot("SHROUD",100);Ot("DEATHS_DESIGN",1,{});Ot("SOUL_REAVER",2,{timeout:30});Ot("ENHANCED_GIBBET",1,{timeout:60});Ot("ENHANCED_GALLOWS",1,{timeout:60});Ot("EXECUTIONER",2,{timeout:30});Ot("ENSHROUDED",1,{timeout:30});Ot("LEMURE_SHROUD",5,{timeout:30});Ot("VOID_SHROUD",5);Ot("OBLATIO",1,{timeout:30});Ot("ENHANCED_VOID_REAPING",1,{timeout:30});Ot("ENHANCED_CROSS_REAPING",1,{timeout:30});Ot("IDEAL_HOST",1,{timeout:30});Ot("PERFECTIO_OCCULTA",1,{timeout:30});Ot("PERFECTIO_PARATA",1,{timeout:30});Ot("ARCANE_CIRCLE",1,{timeout:20});Ot("CIRCLE_OF_SACRIFICE",1,{timeout:5});Ot("BLOODSOWN_CIRCLE",1,{timeout:6});Ot("IMMORTAL_SACRIFICE",8,{timeout:30});Ot("ARCANE_CREST",1,{timeout:5});Ot("CREST_OF_TIME_BORROWED",1,{timeout:5});Ot("CREST_OF_TIME_RETURNED",1,{timeout:15});Ot("SOULSOW",1,{default:1});Ot("THRESHOLD",1,{timeout:10});Ot("ENHANCED_HARPE",1,{timeout:10});Ot("HELLS_INGRESS_USED",1);Ot("RPR_COMBO",2,{timeout:30});Ot("RPR_AOE_COMBO",1,{timeout:30});class SB extends Jt{constructor(t){super(t);const n=this.hasTraitUnlocked("TEMPERED_SOUL")?2:1;this.cooldowns.set(new Fe("cd_SOUL_SLICE",30,n,n)),this.registerRecurringEvents()}get statusPropsGenerator(){return new TB(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("ARCANE_CIRCLE")&&t.addBuff(H.ArcaneCircle),this.hasResourceAvailable("DEATHS_DESIGN")&&t.addBuff(H.DeathsDesign)}refreshDeathsDesign(){const t=this.resources.get("DEATHS_DESIGN"),n=Math.min(this.resources.timeTillReady("DEATHS_DESIGN")+30,60);if(t.available(1)){t.overrideTimer(this,n);return}t.gain(1),this.resources.addResourceEvent({rscType:"DEATHS_DESIGN",name:"drop Death's Design",delay:n,fnOnRsc:a=>{a.consume(1)}})}setTimedResource(t,n){this.tryConsumeResource(t),this.resources.get(t).gain(n),this.enqueueResourceDrop(t)}processCombo(t){const n=this.resources.get("RPR_COMBO").availableAmount(),a=this.resources.get("RPR_AOE_COMBO").availableAmount(),[s,c]=new Map([["SLICE",[1,0]],["WAXING_SLICE",[n===1?2:0,0]],["INFERNAL_SLICE",[0,0]],["SPINNING_SCYTHE",[0,1]],["NIGHTMARE_SCYTHE",[0,0]]]).get(t)??[n,a];s!==n&&this.setComboState("RPR_COMBO",s),c!==a&&this.setComboState("RPR_AOE_COMBO",c)}processSoulGauge(t){const n=this.resources.get("SOUL");if(["SLICE","WAXING_SLICE","INFERNAL_SLICE","SPINNING_SCYTHE","NIGHTMARE_SCYTHE","HARPE","HARVEST_MOON"].includes(t)){n.gain(10);return}if(["SOUL_SLICE","SOUL_SCYTHE"].includes(t)){n.gain(50);return}if(["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE","GLUTTONY"].includes(t)){n.consume(50);return}}processShroudGauge(t){const n=this.resources.get("SHROUD");if(["GALLOWS","GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GIBBET","GUILLOTINE","EXECUTIONERS_GUILLOTINE"].includes(t)){n.gain(10);return}t==="ENSHROUD"&&!this.resources.get("IDEAL_HOST").available(1)&&n.consume(50)}processReaversExecutioner(t){const n=this.resources.get("SOUL_REAVER"),a=this.resources.get("EXECUTIONER");if(["GIBBET","GALLOWS","GUILLOTINE"].includes(t)){n.consume(1);return}if(["EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GUILLOTINE"].includes(t)){a.consume(1);return}if(this.skillsList.get(t).cdName==="cd_GCD"&&(n.consume(n.availableAmount()),a.consume(a.availableAmount())),["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE"].includes(t)){n.consume(n.availableAmount()),a.consume(a.availableAmount()),this.setTimedResource("SOUL_REAVER",1);return}if(t==="GLUTTONY"){if(n.consume(n.availableAmount()),a.consume(a.availableAmount()),this.hasTraitUnlocked("ENHANCED_GLUTTONY")){this.setTimedResource("EXECUTIONER",2);return}this.setTimedResource("SOUL_REAVER",2);return}}processGibbetGallows(t){const n=this.resources.get("SOUL_REAVER"),a=this.resources.get("EXECUTIONER");["GIBBET","GALLOWS","EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS"].includes(t)||(n.consume(n.availableAmount()),a.consume(a.availableAmount()));const s=new Map([["GIBBET","ENHANCED_GIBBET"],["EXECUTIONERS_GIBBET","ENHANCED_GIBBET"],["GALLOWS","ENHANCED_GALLOWS"],["EXECUTIONERS_GALLOWS","ENHANCED_GALLOWS"]]),c=new Map([["GIBBET","ENHANCED_GALLOWS"],["EXECUTIONERS_GIBBET","ENHANCED_GALLOWS"],["GALLOWS","ENHANCED_GIBBET"],["EXECUTIONERS_GALLOWS","ENHANCED_GIBBET"]]),d=this.resources.get(s.get(t)),f=this.resources.get(c.get(t));d.consume(d.availableAmount()),f.consume(f.availableAmount()),f.gain(1)}processCircleOfSacrifice(t){if(!this.hasResourceAvailable("CIRCLE_OF_SACRIFICE"))return;Ml("RPR",t).potencyFn(this)>0&&(this.resources.get("IMMORTAL_SACRIFICE").availableAmount()===0?this.setTimedResource("IMMORTAL_SACRIFICE",1):this.resources.get("IMMORTAL_SACRIFICE").gain(1),this.tryConsumeResource("CIRCLE_OF_SACRIFICE",!0))}enterEnshroud(){this.hasResourceAvailable("IDEAL_HOST")&&this.resources.get("IDEAL_HOST").consume(1),this.hasTraitUnlocked("ENHANCED_ENSHROUD")&&this.setTimedResource("OBLATIO",1),this.setTimedResource("LEMURE_SHROUD",5),this.tryConsumeResource("PERFECTIO_PARATA",!0)}exitEnshroud(){this.tryConsumeResource("ENSHROUDED"),this.tryConsumeResource("OBLATIO"),this.tryConsumeResource("LEMURE_SHROUD"),this.tryConsumeResource("VOID_SHROUD"),this.tryConsumeResource("ENHANCED_CROSS_REAPING"),this.tryConsumeResource("ENHANCED_VOID_REAPING")}}const IB=new Set(["SHADOW_OF_DEATH","WHORL_OF_DEATH","HARVEST_MOON","HARPE","SOULSOW","VOID_REAPING","CROSS_REAPING","GRIM_REAPING","LEMURES_SLICE","LEMURES_SCYTHE","SACRIFICIUM","COMMUNIO","ARCANE_CIRCLE","HELLS_EGRESS","HELLS_INGRESS","REGRESS","ARCANE_CREST","FEINT","LEG_SWEEP","BLOODBATH","TRUE_NORTH","ARMS_LENGTH","SECOND_WIND","SPRINT","TINCTURE"]),xE=(e,t)=>n=>{const a=["GIBBET","GALLOWS","GUILLOTINE"].includes(t)?n.resources.get("SOUL_REAVER"):n.resources.get("EXECUTIONER");return n.resources.get(e).available(1)||a.available(1)&&!n.hasResourceAvailable("ENHANCED_GIBBET")&&!n.hasResourceAvailable("ENHANCED_GALLOWS")},XS=e=>e.hasResourceAvailable("SOUL_REAVER"),qS=e=>e.hasResourceAvailable("EXECUTIONER"),ho=e=>t=>t.resources.get("SOUL").availableAmount()>=e,ZS=e=>IB.has(e),HE=e=>we(t=>t.processCombo(e),t=>t.processSoulGauge(e),t=>t.processShroudGauge(e),t=>t.processReaversExecutioner(e),t=>t.processCircleOfSacrifice(e)),$S=e=>{const t=[];return e.hasResourceAvailable("ARCANE_CIRCLE")&&t.push(X.ArcaneCircle),e.hasResourceAvailable("DEATHS_DESIGN")&&t.push(X.DeathsDesign),t},kE=(e,t,n)=>{const a=we(HE(e),n.onConfirm),s=Ed(c=>!c.resources.get("ENSHROUDED").available(1)||ZS(e),n.validateAttempt??(()=>!0));return ia("RPR",e,t,{...n,recastTime:c=>c.config.adjustedGCD(n.recastTime),onConfirm:a,validateAttempt:s,isInstantFn:c=>!(e==="COMMUNIO"||e==="HARPE"&&!c.hasResourceAvailable("ENHANCED_HARPE")||e==="SOULSOW"&&c.isInCombat()),jobPotencyModifiers:$S})},yn=(e,t,n)=>{const a=we(HE(e),n.onConfirm),s=Ed(c=>!c.resources.get("ENSHROUDED").available(1)||ZS(e),n.validateAttempt??(()=>!0));return cn("RPR",e,t,{...n,onConfirm:a,jobPotencyModifiers:c=>{const d=$S(c);if(["GIBBET","EXECUTIONERS_GIBBET"].includes(e)&&c.hasResourceAvailable("ENHANCED_GIBBET")&&d.push(X.EnhancedGibbetGallows),["GALLOWS","EXECUTIONERS_GALLOWS"].includes(e)&&c.hasResourceAvailable("ENHANCED_GALLOWS")&&d.push(X.EnhancedGibbetGallows),e==="VOID_REAPING"&&c.hasResourceAvailable("ENHANCED_VOID_REAPING")&&d.push(X.EnhancedReaping),e==="CROSS_REAPING"&&c.hasResourceAvailable("ENHANCED_CROSS_REAPING")&&d.push(X.EnhancedReaping),e==="PLENTIFUL_HARVEST"&&c.hasResourceAvailable("IMMORTAL_SACRIFICE"))for(let f=0;f<c.resources.get("IMMORTAL_SACRIFICE").availableAmount();f++)d.push(X.ImmortalSacrifice);return d},validateAttempt:s})},ji=(e,t,n,a)=>{const s=we(HE(e),a.onConfirm),c=Ed(d=>!d.resources.get("ENSHROUDED").available(1)||ZS(e),a.validateAttempt??(()=>!0));return ut("RPR",e,t,n,{...a,onConfirm:s,validateAttempt:c,jobPotencyModifiers:$S})};yn("SHADOW_OF_DEATH",10,{potency:300,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.15,onConfirm:e=>e.refreshDeathsDesign()});yn("SLICE",1,{potency:[["NEVER",260],["MELEE_MASTERY_II_RPR",320],["MELEE_MASTERY_III_RPR",420]],aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.49});yn("WAXING_SLICE",5,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",160],["MELEE_MASTERY_III_RPR",260]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_II_RPR",400],["MELEE_MASTERY_III_RPR",500]],resource:"RPR_COMBO",resourceValue:1},aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.58,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",1)});yn("INFERNAL_SLICE",30,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",180],["MELEE_MASTERY_III_RPR",280]],combo:{potency:[["NEVER",420],["MELEE_MASTERY_II_RPR",500],["MELEE_MASTERY_III_RPR",600]],resource:"RPR_COMBO",resourceValue:2},aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.54,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",2)});yn("SOUL_SLICE",60,{potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",520]],aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.99,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});yn("GIBBET",70,{replaceIf:[{newSkill:"VOID_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GIBBET",condition:e=>e.hasResourceAvailable("EXECUTIONER")}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"flank"},aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.5,highlightIf:xE("ENHANCED_GIBBET","GIBBET"),validateAttempt:XS,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});yn("GALLOWS",70,{replaceIf:[{newSkill:"CROSS_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GALLOWS",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"rear"},aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.53,highlightIf:xE("ENHANCED_GALLOWS","GALLOWS"),validateAttempt:XS,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});yn("EXECUTIONERS_GIBBET",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:xE("ENHANCED_GIBBET","EXECUTIONERS_GIBBET"),validateAttempt:qS,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});yn("EXECUTIONERS_GALLOWS",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:xE("ENHANCED_GALLOWS","EXECUTIONERS_GALLOWS"),validateAttempt:qS,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});yn("PLENTIFUL_HARVEST",88,{potency:720,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.16,highlightIf:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1),validateAttempt:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1)&&!e.hasResourceAvailable("BLOODSOWN_CIRCLE"),onConfirm:e=>{e.tryConsumeResource("IMMORTAL_SACRIFICE",!0),e.setTimedResource("IDEAL_HOST",1),e.hasTraitUnlocked("ENHANCED_PLENTIFUL_HARVEST")&&e.setTimedResource("PERFECTIO_OCCULTA",1)}});kE("COMMUNIO",90,{replaceIf:[{condition:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),newSkill:"PERFECTIO"}],potency:1100,aspect:_e.Other,castTime:1.3,recastTime:2.5,falloff:.2,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("ENSHROUDED"),highlightIf:e=>e.hasResourceAvailable("ENSHROUDED")&&e.resources.get("LEMURE_SHROUD").availableAmount()===1,onConfirm:e=>{e.tryConsumeResource("PERFECTIO_OCCULTA")&&e.hasTraitUnlocked("ENHANCED_PLENTIFUL_HARVEST")&&e.setTimedResource("PERFECTIO_PARATA",1),e.exitEnshroud(),e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.tryConsumeResource("ENHANCED_VOID_REAPING")}});kE("HARPE",15,{potency:300,aspect:_e.Other,castTime:1.3,recastTime:2.5,applicationDelay:.9,highlightIf:e=>e.hasResourceAvailable("ENHANCED_HARPE"),onConfirm:e=>e.tryConsumeResource("ENHANCED_HARPE")});kE("SOULSOW",82,{potency:0,replaceIf:[{condition:e=>e.hasResourceAvailable("SOULSOW"),newSkill:"HARVEST_MOON"}],startOnHotbar:!0,aspect:_e.Other,castTime:5,recastTime:2.5,applicationDelay:0,onConfirm:e=>e.resources.get("SOULSOW").gain(1)});kE("HARVEST_MOON",82,{potency:[["NEVER",600],["MELEE_MASTERY_III_RPR",800]],startOnHotbar:!1,aspect:_e.Other,castTime:0,recastTime:2.5,falloff:.4,applicationDelay:.9,validateAttempt:e=>e.hasResourceAvailable("SOULSOW"),highlightIf:e=>e.hasResourceAvailable("SOULSOW"),onConfirm:e=>e.resources.get("SOULSOW").consume(1)});ji("GLUTTONY",76,"cd_GLUTTONY",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"SACRIFICIUM"}],isPhysical:!1,potency:520,startOnHotbar:!0,falloff:.25,applicationDelay:1.06,cooldown:60,validateAttempt:ho(50),highlightIf:ho(50)});ji("BLOOD_STALK",50,"cd_BLOOD_STALK",{replaceIf:[{newSkill:"LEMURES_SLICE",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"UNVEILED_GIBBET",condition:e=>e.hasResourceAvailable("ENHANCED_GIBBET")},{newSkill:"UNVEILED_GALLOWS",condition:e=>e.hasResourceAvailable("ENHANCED_GALLOWS")}],isPhysical:!0,potency:340,startOnHotbar:!0,applicationDelay:.89,cooldown:1,validateAttempt:ho(50),highlightIf:ho(50)});ji("GRIM_SWATHE",55,"cd_BLOOD_STALK",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"LEMURES_SCYTHE"}],isPhysical:!0,potency:140,startOnHotbar:!0,falloff:0,applicationDelay:.58,cooldown:1,validateAttempt:ho(50),highlightIf:ho(50)});ji("UNVEILED_GIBBET",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:ho(50),highlightIf:ho(50)});ji("UNVEILED_GALLOWS",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:ho(50),highlightIf:ho(50)});ji("LEMURES_SLICE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:[["NEVER",240],["MELEE_MASTERY_III_RPR",280]],startOnHotbar:!1,applicationDelay:.7,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});ji("SACRIFICIUM",92,"cd_SACRIFICIUM",{isPhysical:!1,potency:600,startOnHotbar:!1,falloff:.2,applicationDelay:.76,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("OBLATIO"),highlightIf:e=>e.hasResourceAvailable("OBLATIO"),onConfirm:e=>e.tryConsumeResource("OBLATIO")});qe("RPR","ARCANE_CIRCLE",72,"cd_ARCANE_CIRCLE",{rscType:"ARCANE_CIRCLE",applicationDelay:.6,startOnHotbar:!0,maxCharges:1,potency:0,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ARCANE_CIRCLE")&&(e.setTimedResource("CIRCLE_OF_SACRIFICE",1),e.setTimedResource("BLOODSOWN_CIRCLE",1))},cooldown:120});yn("VOID_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:_e.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_CROSS_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_VOID_REAPING"),e.setTimedResource("ENHANCED_CROSS_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});yn("CROSS_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:_e.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_VOID_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.setTimedResource("ENHANCED_VOID_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});qe("RPR","ENSHROUD",80,"cd_ENSHROUD",{rscType:"ENSHROUDED",highlightIf:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),applicationDelay:0,startOnHotbar:!0,cooldown:5,validateAttempt:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),onConfirm:we(HE("ENSHROUD"),e=>e.enterEnshroud())});yn("PERFECTIO",100,{potency:1300,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.29,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),validateAttempt:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),onConfirm:e=>{e.resources.get("PERFECTIO_PARATA").consume(1)}});ji("REGRESS",74,"cd_BLOOD_STALK",{cooldown:1,animationLock:$t,startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("THRESHOLD"),onConfirm:e=>e.resources.get("THRESHOLD").consume(1)});ji("HELLS_INGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:$t,onConfirm:e=>{e.resources.get("HELLS_INGRESS_USED").gain(1),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});ji("HELLS_EGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&!e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:$t,onConfirm:e=>{e.tryConsumeResource("HELLS_INGRESS_USED"),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});ji("ARCANE_CREST",40,"cd_ARCANE_CREST",{replaceIf:[{condition:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),newSkill:"ARCANE_CREST_POP"}],cooldown:30,onConfirm:e=>e.setTimedResource("CREST_OF_TIME_BORROWED",1)});ji("ARCANE_CREST_POP",40,"cd_ARCANE_CREST_POP",{cooldown:1,animationLock:Ni,startOnHotbar:!1,onConfirm:e=>{e.tryConsumeResource("CREST_OF_TIME_BORROWED"),e.setTimedResource("CREST_OF_TIME_RETURNED",1)},validateAttempt:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),highlightIf:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED")});yn("WHORL_OF_DEATH",35,{potency:100,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:1.15,onConfirm:e=>e.refreshDeathsDesign()});yn("SPINNING_SCYTHE",25,{potency:140,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62});yn("NIGHTMARE_SCYTHE",45,{potency:120,combo:{potency:180,resource:"RPR_AOE_COMBO",resourceValue:1},aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.8,highlightIf:e=>e.hasResourceExactly("RPR_AOE_COMBO",1)});yn("SOUL_SCYTHE",65,{potency:180,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.66,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});yn("EXECUTIONERS_GUILLOTINE",96,{startOnHotbar:!1,potency:260,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.53,highlightIf:e=>e.hasResourceAvailable("EXECUTIONER"),validateAttempt:qS});yn("GRIM_REAPING",80,{startOnHotbar:!1,potency:200,recastTime:1.5,falloff:0,applicationDelay:.8,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1,validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()},aspect:_e.Physical});ji("LEMURES_SCYTHE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:100,falloff:0,applicationDelay:.66,cooldown:1,startOnHotbar:!1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});yn("GUILLOTINE",70,{replaceIf:[{newSkill:"GRIM_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GUILLOTINE",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:200,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.49,highlightIf:e=>e.hasResourceAvailable("SOUL_REAVER"),validateAttempt:XS});ji("GAIN_SOUL_GAUGE",50,"cd_GAIN_SOUL_GAUGE",{applicationDelay:0,animationLock:Ni,cooldown:.01,onConfirm:e=>e.resources.get("SOUL").gain(10)});Object.keys(sS).forEach(e=>Wt(e,`SAM/${Ye[e].name}.png`));class _B extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("HIGANBANA_DOT",!1)]}jobSpecificSelfTargetedBuffViewProps(){return Object.keys(sS).filter(t=>t!=="HIGANBANA_DOT").map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,a=n.get("KENKI").availableAmount(),s=n.get("MEDITATION").availableAmount();return[{kind:"sen",name:g({en:"sen",zh:""}),hasSetsu:this.state.hasResourceAvailable("SETSU"),hasGetsu:this.state.hasResourceAvailable("GETSU"),hasKa:this.state.hasResourceAvailable("KA_SEN"),setsuColor:t.sam.setsu,getsuColor:t.sam.getsu,kaColor:t.sam.kaSen},{kind:"bar",name:g({en:"kenki",zh:""}),color:t.sam.kenki,progress:a/100,valueString:a.toFixed(0)},{kind:"counter",name:g({en:"meditation",zh:""}),color:t.sam.meditation,currentStacks:s,maxStacks:3}]}}const vn=(e,t,n)=>{Qe("SAM",e,t,n??{})};vn("MEIKYO_SHISUI",3,{timeout:20,warnOnTimeout:!0});vn("FUGETSU",1,{timeout:40});vn("FUKA",1,{timeout:40});vn("ZANSHIN_READY",1,{timeout:30});vn("TENDO",1,{timeout:30,warnOnTimeout:!0});vn("OGI_READY",1,{timeout:30});vn("TSUBAME_GAESHI_READY",1,{timeout:30,warnOnTimeout:!0});vn("THIRD_EYE",1,{timeout:4});vn("TENGENTSU",1,{timeout:4});vn("TENGENTSUS_FORESIGHT",1,{timeout:9});vn("ENHANCED_ENPI",1,{timeout:15});vn("MEDITATE",1,{timeout:15.2});vn("KENKI",100,{warnOnOvercap:!0});vn("SETSU",1,{warnOnOvercap:!0});vn("GETSU",1,{warnOnOvercap:!0});vn("KA_SEN",1,{warnOnOvercap:!0});vn("MEDITATION",3,{warnOnOvercap:!0});vn("HIGANBANA_DOT",1,{timeout:60});const HD=["SAM_TWO_READY","SAM_TWO_AOE_READY","GEKKO_READY","KASHA_READY","KAESHI_OGI_READY"];HD.forEach(e=>vn(e,1,{timeout:30}));vn("KAESHI_TRACKER",4,{timeout:30});class gB extends Jt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_HISSATSU")?60:120,a=this.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI")?2:1;[new Fe("cd_MEIKYO_SHISUI",55,a,a),new Fe("cd_SENEI_GUREN",n,1,1)].forEach(s=>this.cooldowns.set(s)),super.registerRecurringEvents([{reportName:$e("HIGANBANA_DOT"),groupedEffects:[{effectName:"HIGANBANA_DOT",appliedBy:["HIGANBANA"]}]}])}get statusPropsGenerator(){return new _B(this)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?13:10}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("ENHANCED_ENPI")&&n.name==="ENPI"&&t.addBuff(H.EnhancedEnpi),this.hasResourceAvailable("FUGETSU")&&t.addBuff(H.Fugetsu)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("FUKA")&&n.cdName==="cd_GCD"&&t.addBuff(H.Fuka)}hitCombo(t){return super.hitCombo(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}cancelChanneledSkills(){const t=this.findNextQueuedEventByTag(Ri.MeditateTick);t&&(t.canceled=!0),this.tryConsumeResource("MEDITATE")}getFugetsuModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?X.FugetsuEnhanced:X.FugetsuBase}getFukaModifier(){return this.hasResourceAvailable("FUKA")?this.inherentSpeedModifier():0}checkCombo(t){return this.hasResourceAvailable(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}refreshBuff(t,n){this.addEvent(new Me(`gain ${t}`,n,()=>{this.gainStatus(t)}))}progressActiveCombo(t){HD.forEach(n=>{t.includes(n)||this.setComboState(n,0)}),t.forEach(n=>this.setComboState(n,1))}tryConsumeMeikyo(){this.tryConsumeResource("MEIKYO_SHISUI")}gainKenki(t){this.resources.get("KENKI").gain(t)}gainMeditation(){this.resources.get("MEDITATION").gain(1)}gainSen(t){this.resources.get(t).gain(1)}countSen(){return["GETSU","SETSU","KA_SEN"].reduce((t,n)=>this.hasResourceAvailable(n)?t+1:t,0)}consumeAllSen(){["GETSU","SETSU","KA_SEN"].forEach(t=>this.tryConsumeResource(t))}startMeditateTimer(){const t=n=>{const a=new Me("meditate tick",3,()=>{n<5&&(this.isInCombat()&&(p.reportMeditateTick(this.time,"+kenki/meditation"),this.resources.get("KENKI").gain(10),this.resources.get("MEDITATION").gain(1)),this.addEvent(t(n+1)))});return a.addTag(Ri.MeditateTick),a};this.addEvent(t(0))}}const jt=(e,t,n)=>{const a=c=>{const d=c.hasResourceAvailable("FUGETSU")?[c.getFugetsuModifier()]:[];return n.jobPotencyModifiers&&d.push(...n.jobPotencyModifiers(c)),d};let s=n.baseCastTime||0;return s&&(s=c=>c.hasTraitUnlocked("ENHANCED_IAIJUTSU")?n.baseCastTime||0:c.config.adjustedSksCastTime(1.8,c.getFukaModifier())),cn("SAM",e,t,{...n,castTime:s,recastTime:c=>c.config.adjustedSksGCD(n.baseRecastTime??2.5,c.getFukaModifier()),potency:n.basePotency,jobPotencyModifiers:a,isInstantFn:c=>!(n.baseCastTime&&n.baseCastTime>0)})},oa=(e,t,n,a)=>(a.potency&&!a.jobPotencyModifiers&&(a.jobPotencyModifiers=s=>s.hasResourceAvailable("FUGETSU")?[s.getFugetsuModifier()]:[]),ut("SAM",e,t,n,a));jt("ENPI",15,{applicationDelay:.71,basePotency:100,onConfirm:e=>{e.hasResourceAvailable("ENHANCED_ENPI")&&e.tryConsumeResource("ENHANCED_ENPI"),e.gainKenki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("ENHANCED_ENPI")?[e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?X.YatenpiEnhanced:X.YatenpiBase]:[],highlightIf:e=>e.hasResourceAvailable("ENHANCED_ENPI")});jt("HAKAZE",1,{autoUpgrade:{trait:"HAKAZE_MASTERY",otherSkill:"GYOFU"},applicationDelay:.85,basePotency:200,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});jt("GYOFU",92,{autoDowngrade:{trait:"HAKAZE_MASTERY",otherSkill:"HAKAZE"},applicationDelay:.85,basePotency:240,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});jt("YUKIKAZE",50,{applicationDelay:.85,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_II",290],["WAY_OF_THE_SAMURAI_III",340]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")&&(e.gainKenki(15),e.gainSen("SETSU")),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});jt("JINPU",4,{applicationDelay:.62,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUGETSU",.62),e.tryConsumeMeikyo(),e.progressActiveCombo(["GEKKO_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});jt("GEKKO",30,{applicationDelay:.76,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"GEKKO_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"rear"},onConfirm:e=>{e.checkCombo("GEKKO_READY")&&(e.gainKenki(10),e.gainSen("GETSU")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUGETSU",.76),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("GEKKO_READY")});jt("SHIFU",18,{applicationDelay:.8,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUKA",.8),e.tryConsumeMeikyo(),e.progressActiveCombo(["KASHA_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});jt("KASHA",40,{applicationDelay:.62,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"KASHA_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"flank"},onConfirm:e=>{e.checkCombo("KASHA_READY")&&(e.gainKenki(10),e.gainSen("KA_SEN")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUKA",.62),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("KASHA_READY")});jt("FUGA",26,{autoUpgrade:{trait:"FUGA_MASTERY",otherSkill:"FUKO"},falloff:0,applicationDelay:.76,basePotency:90,onConfirm:e=>{e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});jt("FUKO",86,{autoDowngrade:{trait:"FUGA_MASTERY",otherSkill:"FUGA"},falloff:0,applicationDelay:.76,basePotency:100,onConfirm:e=>{e.gainKenki(10),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});jt("MANGETSU",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUGETSU",.62),e.gainSen("GETSU")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});jt("OKA",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUKA",.62),e.gainSen("KA_SEN")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});const kD={newSkill:"HIGANBANA",condition:e=>e.countSen()===1},UD={newSkill:"TENKA_GOKEN",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===2},wD={newSkill:"TENDO_GOKEN",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===2},PD={newSkill:"MIDARE_SETSUGEKKA",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===3},GD={newSkill:"TENDO_SETSUGEKKA",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===3},Lc=[kD,UD,wD,PD,GD];jt("IAIJUTSU",30,{replaceIf:Lc,baseCastTime:1.3,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});jt("HIGANBANA",30,{startOnHotbar:!1,replaceIf:Lc,baseCastTime:1.3,basePotency:200,applicationDelay:.62,validateAttempt:kD.condition,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("FUGETSU")&&n.push(e.getFugetsuModifier());const a=e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?50:45;e.addDoTPotencies({node:t,effectName:"HIGANBANA_DOT",skillName:"HIGANBANA",tickPotency:a,speedStat:"sks",modifiers:n}),e.consumeAllSen(),e.gainMeditation()},onApplication:(e,t)=>e.applyDoT("HIGANBANA_DOT",t)});const UE=e=>t=>{t.consumeAllSen(),t.gainStatus("KAESHI_TRACKER",e),t.gainMeditation(),t.gainStatus("TSUBAME_GAESHI_READY"),t.tryConsumeResource("TENDO")};jt("TENKA_GOKEN",30,{startOnHotbar:!1,replaceIf:Lc,baseCastTime:1.3,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:UD.condition,onConfirm:UE(1)});jt("TENDO_GOKEN",100,{startOnHotbar:!1,replaceIf:Lc,baseCastTime:1.3,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:wD.condition,onConfirm:UE(2)});jt("MIDARE_SETSUGEKKA",30,{startOnHotbar:!1,replaceIf:Lc,baseCastTime:1.3,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:PD.condition,onConfirm:UE(3)});jt("TENDO_SETSUGEKKA",100,{startOnHotbar:!1,replaceIf:Lc,baseCastTime:1.3,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:GD.condition,onConfirm:UE(4)});const bT={newSkill:"KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",1)},OT={newSkill:"TENDO_KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",2)},DT={newSkill:"KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",3)},yT={newSkill:"TENDO_KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",4)},Id=[bT,OT,DT,yT];jt("TSUBAME_GAESHI",74,{replaceIf:Id,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});const wE=e=>{e.tryConsumeResource("KAESHI_TRACKER",!0),e.tryConsumeResource("TSUBAME_GAESHI_READY"),e.tryConsumeResource("KAESHI_OGI_READY")};jt("KAESHI_GOKEN",74,{startOnHotbar:!1,replaceIf:Id,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:bT.condition,onConfirm:wE,highlightIf:bT.condition});jt("TENDO_KAESHI_GOKEN",100,{startOnHotbar:!1,replaceIf:Id,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:OT.condition,onConfirm:wE,highlightIf:OT.condition});jt("KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:Id,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:DT.condition,onConfirm:wE,highlightIf:DT.condition});jt("TENDO_KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:Id,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:yT.condition,onConfirm:wE,highlightIf:yT.condition});jt("OGI_NAMIKIRI",90,{replaceIf:[{newSkill:"KAESHI_NAMIKIRI",condition:e=>e.hasResourceAvailable("KAESHI_OGI_READY")}],falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],baseCastTime:1.3,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("OGI_READY"),onConfirm:e=>{e.tryConsumeResource("OGI_READY"),e.gainMeditation(),e.gainStatus("KAESHI_OGI_READY")},highlightIf:e=>e.hasResourceAvailable("OGI_READY")});jt("KAESHI_NAMIKIRI",90,{startOnHotbar:!1,falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("KAESHI_OGI_READY"),onConfirm:e=>e.tryConsumeResource("KAESHI_OGI_READY"),highlightIf:e=>e.hasResourceAvailable("KAESHI_OGI_READY")});oa("MEIKYO_SHISUI",50,"cd_MEIKYO_SHISUI",{cooldown:55,maxCharges:2,onConfirm:e=>{e.gainStatus("MEIKYO_SHISUI",3),e.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI_II")&&e.gainStatus("TENDO")}});oa("IKISHOTEN",68,"cd_IKISHOTEN",{replaceIf:[{newSkill:"ZANSHIN",condition:e=>e.hasResourceAvailable("ZANSHIN_READY")}],cooldown:120,requiresCombat:!0,onConfirm:e=>{e.gainKenki(50),e.hasTraitUnlocked("ENHANCED_IKISHOTEN")&&e.gainStatus("OGI_READY"),e.hasTraitUnlocked("ENHANCED_IKISHOTEN_II")&&e.gainStatus("ZANSHIN_READY")}});oa("HISSATSU_SHINTEN",52,"cd_SHINTEN",{cooldown:1,applicationDelay:.62,potency:250,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});oa("HISSATSU_KYUTEN",62,"cd_KYUTEN",{cooldown:1,applicationDelay:.62,potency:100,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});oa("HISSATSU_GYOTEN",54,"cd_GYOTEN",{cooldown:5,applicationDelay:.49,animationLock:$t,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>e.resources.get("KENKI").consume(10),highlightIf:e=>e.resources.get("KENKI").available(10)});oa("HISSATSU_YATEN",56,"cd_YATEN",{cooldown:10,applicationDelay:.45,animationLock:$t,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>{e.resources.get("KENKI").consume(10),e.gainStatus("ENHANCED_ENPI")},highlightIf:e=>e.resources.get("KENKI").available(10)});oa("HISSATSU_SENEI",72,"cd_SENEI_GUREN",{cooldown:60,applicationDelay:.67,potency:800,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});oa("HISSATSU_GUREN",70,"cd_SENEI_GUREN",{cooldown:60,applicationDelay:.62,potency:400,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});oa("HAGAKURE",68,"cd_HAGAKURE",{cooldown:5,validateAttempt:e=>e.countSen()>0,onConfirm:e=>{e.gainKenki(e.countSen()*10),e.consumeAllSen()},highlightIf:e=>e.countSen()===3});oa("SHOHA",80,"cd_SHOHA",{cooldown:15,potency:[["NEVER",560],["WAY_OF_THE_SAMURAI_III",640]],falloff:.4,applicationDelay:.58,validateAttempt:e=>e.resources.get("MEDITATION").available(3),onConfirm:e=>e.tryConsumeResource("MEDITATION",!0),highlightIf:e=>e.resources.get("MEDITATION").available(3)});qe("SAM","THIRD_EYE",6,"cd_THIRD_EYE",{rscType:"THIRD_EYE",autoUpgrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"TENGENTSU"},replaceIf:[{newSkill:"THIRD_EYE_POP",condition:e=>e.hasResourceAvailable("THIRD_EYE")}],cooldown:15,applicationDelay:0});qe("SAM","TENGENTSU",82,"cd_THIRD_EYE",{rscType:"TENGENTSU",autoDowngrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"THIRD_EYE"},replaceIf:[{newSkill:"TENGENTSU_POP",condition:e=>e.hasResourceAvailable("TENGENTSU")}],cooldown:15,applicationDelay:0});oa("THIRD_EYE_POP",6,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:Ni,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THIRD_EYE"),onConfirm:e=>{e.tryConsumeResource("THIRD_EYE"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("THIRD_EYE")});oa("TENGENTSU_POP",82,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:Ni,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TENGENTSU"),onConfirm:e=>{e.tryConsumeResource("TENGENTSU"),e.gainStatus("TENGENTSUS_FORESIGHT"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("TENGENTSU")});oa("ZANSHIN",96,"cd_ZANSHIN",{startOnHotbar:!1,cooldown:1,falloff:.4,applicationDelay:1.03,potency:940,validateAttempt:e=>e.hasResourceAvailable("ZANSHIN_READY")&&e.resources.get("KENKI").available(50),onConfirm:e=>{e.resources.get("KENKI").consume(50),e.tryConsumeResource("ZANSHIN_READY")},highlightIf:e=>e.hasResourceAvailable("ZANSHIN_READY")});qe("SAM","MEDITATE",60,"cd_MEDITATE",{rscType:"MEDITATE",cooldown:60,applicationDelay:.62,validateAttempt:e=>e.cooldowns.get("cd_GCD").stacksAvailable()>0,onConfirm:e=>{const t=e.config.adjustedSksGCD(2.5,e.getFukaModifier());e.cooldowns.get("cd_GCD").useStackWithRecast(e.config.getAfterTaxGCD(t))},onApplication:e=>e.startMeditateTimer()});Object.keys(uS).forEach(e=>Wt(e,`SMN/${Ye[e].name}.png`));class pB extends Qt{jobSpecificSelfTargetedBuffViewProps(){const t=["AETHERFLOW","IFRITS_FAVOR","TITANS_FAVOR","GARUDAS_FAVOR","CRIMSON_STRIKE_READY"];return[...Object.keys(uS).map(n=>t.includes(n)?this.makeCommonTimerless(n):this.makeCommonTimer(n))]}jobSpecificResourceViewProps(t){const n=this.state.resources,a=Math.max(n.timeTillReady("FIRE_ATTUNEMENT"),n.timeTillReady("EARTH_ATTUNEMENT"),n.timeTillReady("WIND_ATTUNEMENT")),s=n.get("ACTIVE_DEMI").availableAmount(),c=n.timeTillReady("ACTIVE_DEMI");n.get("RUBY_ARCANUM").available(1),n.get("TOPAZ_ARCANUM").available(1),n.get("EMERALD_ARCANUM").available(1);const d=s===vT.BAHAMUT?t.smn.bahamut:s===vT.PHOENIX?t.smn.phoenix:t.smn.solar,f=n.get("FIRE_ATTUNEMENT").available(1)?t.smn.ruby:n.get("EARTH_ATTUNEMENT").available(1)?t.smn.topaz:t.smn.emerald,h=this.state.cooldowns.get("cd_SUMMON_LOCKOUT"),m=h.timeTillNextStackAvailable();return[{kind:"counter",name:g({en:"aetherflow",zh:""}),color:t.smn.aetherflow,currentStacks:n.get("AETHERFLOW").availableAmount(),maxStacks:2},{kind:"bar",name:g({en:"demi summon",zh:""}),color:d,progress:c===0?0:1-c/15,valueString:c.toFixed(3)},{kind:"attunement",aetherName:g({en:"aether",zh:""}),attunementName:g({en:"attunement",zh:""}),ruby:n.get("RUBY_ARCANUM").available(1),topaz:n.get("TOPAZ_ARCANUM").available(1),emerald:n.get("EMERALD_ARCANUM").available(1),attunementCount:Math.max(n.get("FIRE_ATTUNEMENT").availableAmount(),n.get("EARTH_ATTUNEMENT").availableAmount(),n.get("WIND_ATTUNEMENT").availableAmount()),timeRemaining:a,rubyColor:t.smn.ruby,topazColor:t.smn.topaz,emeraldColor:t.smn.emerald},{kind:"bar",name:g({en:"summon lock",zh:""}),color:f,progress:m>0?1-h.timeTillNextStackAvailable()/h.currentStackCd():0,valueString:m.toFixed(3)}]}}const tn=(e,t,n)=>{Qe("SMN",e,t,n??{})};var vT=(e=>(e[e.NONE=0]="NONE",e[e.SOLAR=1]="SOLAR",e[e.BAHAMUT=2]="BAHAMUT",e[e.PHOENIX=3]="PHOENIX",e))(vT||{});const BD=15;tn("AETHERFLOW",2,{warnOnOvercap:!0});tn("RUBY_ARCANUM",1);tn("TOPAZ_ARCANUM",1);tn("EMERALD_ARCANUM",1);tn("FIRE_ATTUNEMENT",2,{timeout:30});tn("EARTH_ATTUNEMENT",4,{timeout:30});tn("WIND_ATTUNEMENT",4,{timeout:30});tn("CRIMSON_STRIKE_READY",1);tn("EVERLASTING_FLIGHT",1,{timeout:21});tn("FURTHER_RUIN",1,{timeout:60});tn("GARUDAS_FAVOR",1);tn("IFRITS_FAVOR",1);tn("TITANS_FAVOR",1);tn("RADIANT_AEGIS",1,{timeout:30});tn("REFULGENT_LUX",1,{timeout:30});tn("REKINDLE",1,{timeout:30});tn("UNDYING_FLAME",1,{timeout:15});tn("RUBYS_GLIMMER",1,{timeout:30,warnOnTimeout:!0});tn("SEARING_LIGHT",1,{timeout:20});tn("SLIPSTREAM",1,{timeout:15});tn("ACTIVE_DEMI",3,{timeout:BD});tn("NEXT_DEMI_CYCLE",3);tn("DEMI_AUTO",4);const jC=3.163,NB=new Map([["SUMMON_IFRIT_II",2.1],["SUMMON_GARUDA_II",2.1],["SUMMON_TITAN_II",2.1],["SUMMON_IFRIT",2.46],["SUMMON_GARUDA",2.1],["SUMMON_TITAN",2.46]]),zC=new Map([["SUMMON_IFRIT_II",1.96],["SUMMON_GARUDA_II",1.29],["SUMMON_TITAN_II",1.96],["SUMMON_IFRIT",.936],["SUMMON_GARUDA",.8],["SUMMON_TITAN",.8],["ENKINDLE_BAHAMUT",.894],["ENKINDLE_PHOENIX",1.026],["ENKINDLE_SOLAR_BAHAMUT",.846]]),CB=new Map([["SUMMON_IFRIT_II",6.29],["SUMMON_GARUDA_II",6.29],["SUMMON_TITAN_II",6.29],["SUMMON_IFRIT",4.6],["SUMMON_GARUDA",4.3],["SUMMON_TITAN",4.6]]);class bB extends Jt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60;this.cooldowns.set(new Fe("cd_SWIFTCAST",n,1,1));const a=this.hasTraitUnlocked("ENHANCED_RADIANT_AEGIS")?2:1;this.cooldowns.set(new Fe("cd_RADIANT_AEGIS",60,a,a)),this.cooldowns.set(new Fe("cd_DEMI_SUMMON",this.config.adjustedGCD(60),1,1)),this.cooldowns.set(new Fe("cd_SUMMON_LOCKOUT",5,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SLIPSTREAM",appliedBy:["SLIPSTREAM"],isGroundTargeted:!0}]}],["SUMMON_BAHAMUT","SUMMON_PHOENIX","SUMMON_SOLAR_BAHAMUT"])}get statusPropsGenerator(){return new pB(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("SEARING_LIGHT")&&t.addBuff(H.SearingLight)}get activeDemi(){return this.resources.get("ACTIVE_DEMI").availableAmount()}get nextDemi(){const t=this.resources.get("NEXT_DEMI_CYCLE").availableAmount();return this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT_II")?t===1?2:t===3?3:1:this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT")?t%2===0?2:3:2}get hasActivePet(){return this.activeDemi!==0||this.cooldowns.get("cd_SUMMON_LOCKOUT").stacksAvailable()===0}snapSearingAndTincture(t,n){const a=n.modifiers;this.hasResourceAvailable("SEARING_LIGHT")&&a.push(X.SearingLight),this.hasResourceAvailable("TINCTURE")&&(a.push(X.Tincture),t.addBuff(H.Tincture))}makePetPotency(t,n,a,s,c){const d=new ln({config:this.config,sourceTime:a,sourceSkill:n,aspect:_e.Other,basePotency:s,snapshotTime:this.getDisplayTime(),description:"",targetCount:t,falloff:c}),f=[X.SmnPet];return d.modifiers=f,d}handleDemiAuto(){if(!this.hasResourceAvailable("DEMI_AUTO"))return;const t=4-this.resources.get("DEMI_AUTO").availableAmount();if(t<0)return;const n=this.resources.get("DEMI_AUTO").node;if(n!==void 0){const a=n.getDotPotencies("DEMI_AUTO")[t];this.snapSearingAndTincture(n,a),a.snapshotTime=this.getDisplayTime(),p.resolvePotency(a)}this.tryConsumeResource("DEMI_AUTO"),this.addEvent(new Me("demi auto",jC,()=>this.handleDemiAuto()))}startPetAutos(t,n){const a=this.resources.get("DEMI_AUTO"),s=this.activeDemi===1?160:150;a.gain(4),a.node=t;for(let c=0;c<4;c++)t.addDoTPotency(this.makePetPotency(1,n,this.getDisplayTime(),s),"DEMI_AUTO");this.addEvent(new Me("first demi auto",jC,()=>this.handleDemiAuto()))}queuePetDamageEvent(t,n,a,s,c,d){const f=this.getDisplayTime();this.addEvent(new Me(a+" pet snapshot",c,()=>{const h=this.makePetPotency(t.targetCount,a,f,s,.6);t.addPotency(h),this.snapSearingAndTincture(t,h),this.jobSpecificAddDamageBuffCovers(t,Ml("SMN",n)),this.addEvent(new Me(a+" application",d,()=>p.resolvePotency(h)))}))}queueEnkindle(t,n){let a,s;n==="ENKINDLE_BAHAMUT"?(a="AKH_MORN",s=1300):n==="ENKINDLE_PHOENIX"?(a="REVELATION",s=1300):(a="EXODUS",s=1500);const c=this.resources.get("ACTIVE_DEMI").pendingChange;console.assert(c),c&&c.timeTillEvent<2.5&&p.reportWarning({kind:"custom",en:"enkindle used near end of demi window may ghost"}),this.queuePetDamageEvent(t,n,a,s,0,zC.get(n))}queuePrimalSummon(t,n){let a=600;this.hasTraitUnlocked("ARCANE_MASTERY")?a=800:this.hasTraitUnlocked("ENKINDLE_II")&&(a=750);let s;n.includes("IFRIT")?s="INFERNO":n.includes("TITAN")?s="EARTHEN_FURY":s="AERIAL_BLAST",this.queuePetDamageEvent(t,n,s,a,NB.get(n),zC.get(n));const c=CB.get(n);this.cooldowns.get("cd_SUMMON_LOCKOUT").useStackWithRecast(c)}}const st=(e,t,n)=>{const a=n.baseCastTime??0,s=n.baseRecastTime??2.5,c=a>0?we(d=>d.tryConsumeResource("SWIFTCAST"),n.onConfirm):n.onConfirm;return ia("SMN",e,t,{...n,castTime:d=>d.config.adjustedCastTime(a),recastTime:d=>s<=1.5?s:d.config.adjustedGCD(s),potency:n.basePotency,jobPotencyModifiers:d=>{const f=[];return n.isPetAttack&&f.push(X.SmnPet),d.hasResourceAvailable("SEARING_LIGHT")&&f.push(X.SearingLight),f},isInstantFn:d=>d.hasResourceAvailable("SWIFTCAST")||a===0,onConfirm:c})},Ro=(e,t,n,a)=>ut("SMN",e,t,n,{...a,jobPotencyModifiers:s=>s.hasResourceAvailable("SEARING_LIGHT")?[X.SearingLight]:[]}),Vs=[{newSkill:"RUIN_III",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_IMPULSE",condition:e=>e.activeDemi===2},{newSkill:"FOUNTAIN_OF_FIRE",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_IMPULSE",condition:e=>e.activeDemi===1}];st("RUIN_III",54,{basePotency:[["NEVER",300],["RUIN_MASTERY_IV",310],["ARCANE_MASTERY",400]],baseCastTime:1.5,manaCost:300,replaceIf:Vs,applicationDelay:.8});st("ASTRAL_IMPULSE",58,{basePotency:[["NEVER",440],["ARCANE_MASTERY",500]],manaCost:300,replaceIf:Vs,applicationDelay:.67,validateAttempt:Vs[1].condition,startOnHotbar:!1});st("FOUNTAIN_OF_FIRE",80,{basePotency:[["NEVER",540],["ARCANE_MASTERY",580]],manaCost:300,replaceIf:Vs,applicationDelay:1.07,validateAttempt:Vs[2].condition,startOnHotbar:!1});st("UMBRAL_IMPULSE",100,{basePotency:640,manaCost:300,replaceIf:Vs,applicationDelay:.8,validateAttempt:Vs[3].condition,startOnHotbar:!1});const Fl=[{newSkill:"OUTBURST",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_FLARE",condition:e=>e.activeDemi===2},{newSkill:"BRAND_OF_PURGATORY",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_FLARE",condition:e=>e.activeDemi===1}];st("OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TRI_DISASTER"},basePotency:100,baseCastTime:1.5,manaCost:300,replaceIf:Fl,applicationDelay:.8,falloff:0});st("TRI_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"OUTBURST"},basePotency:120,baseCastTime:1.5,manaCost:300,replaceIf:Fl,applicationDelay:.8,falloff:0});st("ASTRAL_FLARE",58,{basePotency:180,manaCost:300,replaceIf:Fl,applicationDelay:.54,validateAttempt:Fl[1].condition,falloff:0,startOnHotbar:!1});st("BRAND_OF_PURGATORY",80,{basePotency:240,manaCost:300,replaceIf:Fl,applicationDelay:.8,validateAttempt:Fl[2].condition,falloff:0,startOnHotbar:!1});st("UMBRAL_FLARE",100,{basePotency:300,manaCost:300,replaceIf:Fl,applicationDelay:.53,validateAttempt:Fl[2].condition,falloff:0,startOnHotbar:!1});const OB=[{newSkill:"RUBY_RUIN_III",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_RUIN_III",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_RUIN_III",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];st("GEMSHINE",6,{replaceIf:OB,applicationDelay:0,validateAttempt:e=>!1});st("RUBY_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:410,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});st("TOPAZ_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RITE"},basePotency:300,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),startOnHotbar:!1});st("EMERALD_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RITE"},baseRecastTime:1.5,basePotency:180,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});st("RUBY_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:[["NEVER",480],["RUIN_MASTERY_IV",510],["ARCANE_MASTERY",580]],baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});st("TOPAZ_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RUIN_III"},basePotency:[["NEVER",320],["RUIN_MASTERY_IV",330],["ARCANE_MASTERY",340]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},startOnHotbar:!1});st("EMERALD_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RUIN_III"},baseRecastTime:1.5,basePotency:[["NEVER",220],["RUIN_MASTERY_IV",230],["ARCANE_MASTERY",280]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});const DB=[{newSkill:"RUBY_OUTBURST",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_OUTBURST",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_OUTBURST",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];st("PRECIOUS_BRILLIANCE",26,{replaceIf:DB,applicationDelay:0,validateAttempt:e=>!1});st("RUBY_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_DISASTER"},basePotency:160,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});st("TOPAZ_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_DISASTER"},basePotency:110,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});st("EMERALD_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:70,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});st("RUBY_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_CATASTROPHE"},basePotency:190,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});st("TOPAZ_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_CATASTROPHE"},basePotency:130,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});st("EMERALD_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_CATASTROPHE"},baseRecastTime:1.5,basePotency:90,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});st("RUBY_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_DISASTER"},basePotency:210,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});st("TOPAZ_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_DISASTER"},basePotency:140,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},falloff:0,startOnHotbar:!1});st("EMERALD_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:100,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});const yB=[{newSkill:"SUMMON_BAHAMUT",condition:e=>e.nextDemi===2},{newSkill:"SUMMON_PHOENIX",condition:e=>e.nextDemi===3},{newSkill:"SUMMON_SOLAR_BAHAMUT",condition:e=>e.nextDemi===1}],vB={cdName:"cd_DEMI_SUMMON",cooldown:60,maxCharges:1};[{name:"SUMMON_BAHAMUT",autoName:"WYRMWAVE",level:70,activeValue:2},{name:"SUMMON_PHOENIX",autoName:"SCARLET_FLAME",level:80,activeValue:3},{name:"SUMMON_SOLAR_BAHAMUT",autoName:"LUXWAVE",level:100,activeValue:1}].forEach((e,t)=>st(e.name,e.level,{applicationDelay:.76,replaceIf:yB,secondaryCooldown:vB,validateAttempt:n=>!n.hasActivePet&&n.nextDemi===e.activeValue,drawsAggro:!0,onConfirm:(n,a)=>{n.gainStatus("ACTIVE_DEMI",e.activeValue),n.startPetAutos(a,e.autoName),["RUBY_ARCANUM","TOPAZ_ARCANUM","EMERALD_ARCANUM"].forEach(s=>n.gainStatus(s,1)),["FIRE_ATTUNEMENT","EARTH_ATTUNEMENT","WIND_ATTUNEMENT"].forEach(s=>n.tryConsumeResource(s,!0)),n.tryConsumeResource("IFRITS_FAVOR"),n.tryConsumeResource("CRIMSON_STRIKE_READY"),n.tryConsumeResource("GARUDAS_FAVOR"),n.tryConsumeResource("TITANS_FAVOR"),e.name==="SUMMON_SOLAR_BAHAMUT"&&n.gainStatus("REFULGENT_LUX"),n.addEvent(new Me("update next demi",BD,()=>{n.resources.get("NEXT_DEMI_CYCLE").gainWrapping(1)}))},onApplication:n=>{n.isInCombat()||n.resources.get("IN_COMBAT").gain(1)},startOnHotbar:t===0}));const Jf=e=>!e.hasActivePet&&e.hasResourceAvailable("RUBY_ARCANUM"),eE=e=>!e.hasActivePet&&e.hasResourceAvailable("TOPAZ_ARCANUM"),tE=e=>!e.hasActivePet&&e.hasResourceAvailable("EMERALD_ARCANUM"),FD=e=>(t,n)=>{t.tryConsumeResource("RUBY_ARCANUM"),t.gainStatus("FIRE_ATTUNEMENT",2),t.queuePrimalSummon(n,e),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("TITANS_FAVOR"),t.tryConsumeResource("GARUDAS_FAVOR")},jD=e=>(t,n)=>{t.tryConsumeResource("TOPAZ_ARCANUM"),t.gainStatus("EARTH_ATTUNEMENT",4),t.queuePrimalSummon(n,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("GARUDAS_FAVOR")},zD=e=>(t,n)=>{t.tryConsumeResource("EMERALD_ARCANUM"),t.gainStatus("WIND_ATTUNEMENT",4),t.queuePrimalSummon(n,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("TITANS_FAVOR")},xc=.5;st("SUMMON_IFRIT",30,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT_II"},applicationDelay:0,highlightIf:Jf,validateAttempt:Jf,onConfirm:FD("SUMMON_IFRIT"),falloff:xc});st("SUMMON_TITAN",35,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN_II"},applicationDelay:0,highlightIf:eE,validateAttempt:eE,onConfirm:jD("SUMMON_TITAN"),falloff:xc});st("SUMMON_GARUDA",45,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA_II"},applicationDelay:0,highlightIf:tE,validateAttempt:tE,onConfirm:zD("SUMMON_GARUDA"),falloff:xc});st("SUMMON_IFRIT_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT"},applicationDelay:0,highlightIf:Jf,validateAttempt:Jf,onConfirm:we(e=>e.gainStatus("IFRITS_FAVOR"),FD("SUMMON_IFRIT_II")),falloff:xc});st("SUMMON_TITAN_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN"},applicationDelay:0,highlightIf:eE,validateAttempt:eE,onConfirm:jD("SUMMON_TITAN_II"),falloff:xc});st("SUMMON_GARUDA_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA"},applicationDelay:0,highlightIf:tE,validateAttempt:tE,onConfirm:we(e=>e.gainStatus("GARUDAS_FAVOR"),zD("SUMMON_GARUDA_II")),falloff:xc});const gi=[{newSkill:"DEATHFLARE",condition:e=>e.activeDemi===2},{newSkill:"REKINDLE",condition:e=>e.activeDemi===3},{newSkill:"SUNFLARE",condition:e=>e.activeDemi===1},{newSkill:"CRIMSON_CYCLONE",condition:e=>e.hasResourceAvailable("IFRITS_FAVOR")},{newSkill:"CRIMSON_STRIKE",condition:e=>e.hasResourceAvailable("CRIMSON_STRIKE_READY")},{newSkill:"MOUNTAIN_BUSTER",condition:e=>e.hasResourceAvailable("TITANS_FAVOR")},{newSkill:"SLIPSTREAM",condition:e=>e.hasResourceAvailable("GARUDAS_FAVOR")}];Ro("ASTRAL_FLOW",60,"cd_ASTRAL_FLOW",{applicationDelay:0,cooldown:20,replaceIf:gi,validateAttempt:e=>!1});Ro("DEATHFLARE",60,"cd_ASTRAL_FLOW",{potency:500,applicationDelay:.8,cooldown:20,replaceIf:gi,highlightIf:e=>!0,validateAttempt:gi[0].condition,falloff:.5,startOnHotbar:!1});Ro("REKINDLE",80,"cd_ASTRAL_FLOW",{applicationDelay:1.03,cooldown:20,replaceIf:gi,highlightIf:e=>!0,validateAttempt:gi[1].condition,onConfirm:e=>e.gainStatus("REKINDLE"),startOnHotbar:!1});Ro("SUNFLARE",100,"cd_ASTRAL_FLOW",{potency:1e3,applicationDelay:.8,cooldown:20,replaceIf:gi,highlightIf:e=>!0,validateAttempt:gi[2].condition,falloff:.5,startOnHotbar:!1});st("CRIMSON_CYCLONE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.8,replaceIf:gi,highlightIf:e=>!0,validateAttempt:gi[3].condition,onConfirm:e=>{e.tryConsumeResource("IFRITS_FAVOR"),e.gainStatus("CRIMSON_STRIKE_READY")},falloff:.6,startOnHotbar:!1});st("CRIMSON_STRIKE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.76,replaceIf:gi,highlightIf:e=>!0,validateAttempt:gi[4].condition,onConfirm:e=>e.tryConsumeResource("CRIMSON_STRIKE_READY"),falloff:.6,startOnHotbar:!1});Ro("MOUNTAIN_BUSTER",86,"cd_MOUNTAIN_BUSTER",{potency:[["NEVER",150],["ARCANE_MASTERY",160]],cooldown:1,applicationDelay:.76,replaceIf:gi,highlightIf:e=>!0,validateAttempt:gi[5].condition,onConfirm:e=>e.tryConsumeResource("TITANS_FAVOR"),falloff:.6,startOnHotbar:!1});st("SLIPSTREAM",86,{baseCastTime:3,baseRecastTime:3.5,basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:1.02,replaceIf:gi,highlightIf:e=>!0,validateAttempt:gi[6].condition,onConfirm:(e,t)=>{e.tryConsumeResource("GARUDAS_FAVOR"),e.addDoTPotencies({node:t,effectName:"SLIPSTREAM",skillName:"SLIPSTREAM",tickPotency:30,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("SLIPSTREAM",t),falloff:.6,startOnHotbar:!1});const MB=[{newSkill:"ENKINDLE_BAHAMUT",condition:e=>[0,2].includes(e.activeDemi)},{newSkill:"ENKINDLE_PHOENIX",condition:e=>e.activeDemi===3},{newSkill:"ENKINDLE_SOLAR_BAHAMUT",condition:e=>e.activeDemi===1}];[{name:"ENKINDLE_BAHAMUT",level:70,activeValue:2,falloff:.5},{name:"ENKINDLE_PHOENIX",level:80,activeValue:3,falloff:.5},{name:"ENKINDLE_SOLAR_BAHAMUT",level:100,activeValue:1,falloff:.5}].forEach((e,t)=>Ro(e.name,e.level,"cd_ENKINDLE",{applicationDelay:0,cooldown:20,replaceIf:MB,validateAttempt:n=>n.activeDemi===e.activeValue,onConfirm:(n,a)=>n.queueEnkindle(a,e.name),startOnHotbar:t===0,falloff:e.falloff}));st("RUIN_IV",62,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],manaCost:400,applicationDelay:.8,falloff:.6,highlightIf:e=>e.hasResourceAvailable("FURTHER_RUIN"),validateAttempt:e=>e.hasResourceAvailable("FURTHER_RUIN"),onConfirm:e=>e.tryConsumeResource("FURTHER_RUIN")});[{name:"ENERGY_DRAIN",level:10,potency:200,applicationDelay:1.07},{name:"ENERGY_SIPHON",level:52,potency:100,applicationDelay:1.02,falloff:0}].forEach(e=>Ro(e.name,e.level,"cd_ENERGY_DRAIN",{...e,cooldown:60,onConfirm:t=>{t.gainStatus("AETHERFLOW",2),t.gainStatus("FURTHER_RUIN")}}));[{name:"FESTER",level:10,potency:340,applicationDelay:.71,autoUpgrade:{trait:"ENHANCED_FESTER",otherSkill:"NECROTIZE"}},{name:"PAINFLARE",level:40,potency:150,applicationDelay:.44,falloff:0},{name:"NECROTIZE",level:92,potency:460,applicationDelay:.71,autoDowngrade:{trait:"ENHANCED_FESTER",otherSkill:"FESTER"}}].forEach(e=>Ro(e.name,e.level,"cd_AETHERFLOW",{...e,cooldown:1,validateAttempt:t=>t.hasResourceAvailable("AETHERFLOW"),onConfirm:t=>t.tryConsumeResource("AETHERFLOW")}));qe("SMN","SEARING_LIGHT",66,"cd_SEARING_LIGHT",{rscType:"SEARING_LIGHT",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_SEARING_LIGHT")&&e.gainStatus("RUBYS_GLIMMER")},replaceIf:[{newSkill:"SEARING_FLASH",condition:e=>e.hasResourceAvailable("RUBYS_GLIMMER")}]});Ro("SEARING_FLASH",96,"cd_SEARING_FLASH",{potency:700,applicationDelay:.8,cooldown:1,falloff:0,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),validateAttempt:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),onConfirm:e=>e.tryConsumeResource("RUBYS_GLIMMER")});qe("SMN","RADIANT_AEGIS",2,"cd_RADIANT_AEGIS",{rscType:"RADIANT_AEGIS",applicationDelay:.45,cooldown:60,maxCharges:2,validateAttempt:e=>!e.hasActivePet});Ro("LUX_SOLARIS",100,"cd_LUX_SOLARIS",{applicationDelay:.62,cooldown:60,highlightIf:e=>e.hasResourceAvailable("REFULGENT_LUX"),validateAttempt:e=>e.hasResourceAvailable("REFULGENT_LUX"),onConfirm:e=>e.tryConsumeResource("REFULGENT_LUX")});st("RESURRECTION",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.11,basePotency:0});Object.keys(O0).forEach(e=>Wt(e,`SGE/${Ye[e].name}.png`));const LB=["EUKRASIAN_DOSIS","EUKRASIAN_DOSIS_II","EUKRASIAN_DOSIS_III","EUKRASIAN_DYSKRASIA"],xB=["EUKRASIAN_DIAGNOSIS","KRASIS","TAUROCHOLE","HAIMA","HAIMATINON","KARDION"],HB=["EUKRASIA","SOTERIA","ZOE","PHILOSOPHIA","KARDIA"],kB=["EUKRASIAN_PROGNOSIS","PANHAIMA","PANHAIMATINON","KERACHOLE","KERAKEIA","EUDAIMONIA","HOLOS","HOLOSAKOS"];class UB extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[...LB,...xB].map(t=>t==="KARDION"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...kB,...HB].map(t=>t==="KARDIA"||t==="EUKRASIA"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources.get("ADDERSGALL"),a=Vt("SGE","ADDERSGALL").maxTimeout,s=n.availableAmount()<n.maxValue?this.state.resources.timeTillReady("ADDERSGALL"):a,c=this.state.resources.get("ADDERSTING");return[{kind:"counter",name:g({en:Ye.ADDERSGALL.name,zh:Ye.ADDERSGALL.label.zh}),color:t.sge.addersgall,currentStacks:n.availableAmount(),maxStacks:n.maxValue},{kind:"bar",name:g({en:Ye.ADDERSGALL.name+" timer",zh:Ye.ADDERSGALL.label.zh+""}),color:t.sge.addersgall,progress:1-s/a,valueString:s.toFixed(3)},{kind:"counter",name:g({en:Ye.ADDERSTING.name,zh:Ye.ADDERSTING.label.zh}),color:t.sge.addersting,currentStacks:c.availableAmount(),maxStacks:c.maxValue}]}}const Ht=(e,t,n)=>{Qe("SGE",e,t,n??{})};Ht("ADDERSGALL",3,{default:3,timeout:20});Ht("ADDERSTING",3,{default:3});Ht("EUKRASIA",1);Ht("KARDIA",1,{default:1});Ht("KARDION",1,{default:1});Ht("EUKRASIAN_DIAGNOSIS",1,{timeout:30});Ht("DIFFERENTIAL_DIAGNOSIS",1,{timeout:30});Ht("EUKRASIAN_PROGNOSIS",1,{timeout:30});Ht("HAIMA",1,{timeout:15});Ht("HAIMATINON",5,{timeout:15});Ht("PANHAIMA",1,{timeout:15});Ht("PANHAIMATINON",5,{timeout:15});Ht("PHYSIS_II",1,{timeout:15});Ht("AUTOPHYSIS",1,{timeout:15});Ht("PHILOSOPHIA",1,{timeout:20});Ht("EUDAIMONIA",1,{timeout:20});Ht("HOLOS",1,{timeout:20});Ht("HOLOSAKOS",1,{timeout:30});Ht("SOTERIA",4,{timeout:15});Ht("ZOE",1,{timeout:30});Ht("KRASIS",1,{timeout:10});Ht("KERACHOLE",1,{timeout:15});Ht("KERAKEIA",1,{timeout:15});Ht("TAUROCHOLE",1,{timeout:15});Ht("EUKRASIAN_DOSIS",1,{timeout:30});Ht("EUKRASIAN_DOSIS_II",1,{timeout:30});Ht("EUKRASIAN_DOSIS_III",1,{timeout:30});Ht("EUKRASIAN_DYSKRASIA",1,{timeout:30});class wB extends Jt{constructor(t){if(super(t),this.hasTraitUnlocked("ENHANCED_SWIFTCAST")||this.cooldowns.set(new Fe("cd_SWIFTCAST",60,1,1)),!this.hasTraitUnlocked("ENHANCED_PHYSIS_II")){const n=ro(this.job).get("AUTOPHYSIS");n.maxTimeout=10,ro(this.job).set("AUTOPHYSIS",n)}this.hasTraitUnlocked("ENHANCED_SOTERIA")||this.cooldowns.set(new Fe("cd_SOTERIA",90,1,1)),this.hasTraitUnlocked("ENHANCED_ZOE")||this.cooldowns.set(new Fe("cd_ZOE",120,1,1)),this.registerRecurringEvents([{reportName:g({en:"Eukrasian DoT"}),groupedEffects:[{effectName:"EUKRASIAN_DOSIS",appliedBy:["EUKRASIAN_DOSIS"]},{effectName:"EUKRASIAN_DOSIS_II",appliedBy:["EUKRASIAN_DOSIS_II"]},{effectName:"EUKRASIAN_DOSIS_III",appliedBy:["EUKRASIAN_DOSIS_III"]},{effectName:"EUKRASIAN_DYSKRASIA",appliedBy:["EUKRASIAN_DYSKRASIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"PHYSIS_II",appliedBy:["PHYSIS_II"]}]},{isHealing:!0,groupedEffects:[{effectName:"KERAKEIA",appliedBy:["KERACHOLE"]}]}])}get statusPropsGenerator(){return new UB(this)}jobSpecificRegisterRecurringEvents(){const t=n=>{const a=Vt("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",a.maxValue)||this.resources.get("ADDERSGALL").gain(1),this.resources.addResourceEvent({rscType:"ADDERSGALL",name:"gain addersgall if not currently capped",delay:a.maxTimeout,fnOnRsc:t})};t(this.resources.get("ADDERSGALL"))}jobSpecificAddHealingBuffCovers(t,n){this.hasResourceAvailable("AUTOPHYSIS")&&t.addBuff(H.Autophysis),this.hasResourceAvailable("KRASIS")&&t.addBuff(H.Krasis),n.cdName==="cd_GCD"&&(this.hasResourceAvailable("ZOE")&&t.addBuff(H.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.addBuff(H.Philosophia))}consumeAddersgall(){const t=Vt("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",t.maxValue)&&this.resources.get("ADDERSGALL").overrideTimer(this,t.maxTimeout),this.tryConsumeResource("ADDERSGALL"),this.resources.get("MANA").gain(700)}addPepsisPotency(t,n){const a=new ln({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:_e.Other,basePotency:t==="EUKRASIAN_DIAGNOSIS"?450:350,description:$e(t),targetCount:t==="EUKRASIAN_DIAGNOSIS"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&a.modifiers.push(X.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&a.modifiers.push(X.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="EUKRASIAN_PROGNOSIS"){const s=new ln({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:_e.Other,basePotency:a.base,description:$e(t),targetCount:a.targetCount-1,snapshotTime:this.getDisplayTime()});n.addHoTPotency(s,"PEPSIS"),a.targetCount=1,a.description+=", "+$e("KRASIS")}a.modifiers.push(X.Krasis)}n.addHoTPotency(a,"PEPSIS")}addHaimaExpirationPotency(t,n){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const a=new ln({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t==="HAIMA"?"HAIMA":"PANHAIMA",aspect:_e.Other,basePotency:t==="HAIMA"?150:100,description:"",targetCount:t==="HAIMA"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&a.modifiers.push(X.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&a.modifiers.push(X.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="PANHAIMA"){const s=new ln({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PANHAIMA",aspect:_e.Other,basePotency:100,description:"",targetCount:this.partySize-1,snapshotTime:this.getDisplayTime()});n.addHoTPotency(s,t),a.targetCount=1}a.modifiers.push(X.Krasis)}n.addHoTPotency(a,t)}handleHaimaExpiration(t,n){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const a=t==="HAIMA"?"HAIMATINON":"PANHAIMATINON",s=this.resources.get(a).availableAmount();s<=0||this.addEvent(new Me(`${Ye[t].name} expiration heal`,.001,()=>{n.getHotPotencies(t).forEach(c=>{c.description=$e(t)+" "+g({en:"expiration"})+" ("+s+" "+g({en:"stacks"})+")",t==="PANHAIMA"&&c.modifiers.includes(X.Krasis)&&(c.description+=", "+$e("KRASIS")),c.base*=s,p.resolveHealingPotency(c)})}))}addHealingMagicPotencyModifiers(t){this.hasResourceAvailable("ZOE")&&t.push(X.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.push(X.Philosophia)}addHealingActionPotencyModifiers(t){this.hasResourceAvailable("AUTOPHYSIS")&&t.push(X.Autophysis),this.hasResourceAvailable("KRASIS")&&t.push(X.Krasis)}}const En=(e,t,n)=>{const a=f=>f.config.adjustedCastTime(1.5),s=f=>f.config.adjustedGCD(2.5),c=f=>{if(!n.healingPotency)return[];const h=[];return f.addHealingMagicPotencyModifiers(h),f.addHealingActionPotencyModifiers(h),h},d=we(f=>{n.castTime!==0&&f.tryConsumeResource("SWIFTCAST")},(f,h)=>{if(!(f.hasResourceAvailable("KARDIA")&&h.getInitialPotency()))return;const m=new ln({config:f.config,sourceTime:f.getDisplayTime(),sourceSkill:e,aspect:_e.Other,basePotency:f.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?170:130,description:$e("KARDIA"),targetCount:1,snapshotTime:f.getDisplayTime()});f.hasResourceAvailable("TINCTURE")&&m.modifiers.push(X.Tincture),f.hasResourceAvailable("SOTERIA")&&m.modifiers.push(X.Soteria),f.addHealingActionPotencyModifiers(m.modifiers),h.addHoTPotency(m,"KARDION")},(f,h)=>{if(!f.hasResourceAvailable("EUDAIMONIA"))return;const m=new ln({config:f.config,sourceTime:f.getDisplayTime(),sourceSkill:e,aspect:_e.Other,basePotency:150,description:$e("EUDAIMONIA"),targetCount:f.partySize,snapshotTime:f.getDisplayTime()});f.hasResourceAvailable("TINCTURE")&&m.modifiers.push(X.Tincture),f.addHealingActionPotencyModifiers(m.modifiers),h.addHoTPotency(m,"EUDAIMONIA")},f=>{n.healingPotency&&f.tryConsumeResource("ZOE")},n.onConfirm);return ia("SGE",e,t,{...n,castTime:n.castTime??a,recastTime:n.recastTime??s,isInstantFn:f=>f.hasResourceAvailable("SWIFTCAST"),jobHealingPotencyModifiers:c,onConfirm:d,onApplication:we((f,h)=>{const m=h.getHotPotencies("KARDION"),R=h.getHotPotencies("EUDAIMONIA");m.length>0&&(p.resolveHealingPotency(m[0]),f.tryConsumeResource("SOTERIA")),R.forEach(T=>{p.resolveHealingPotency(T)})},n.onApplication)})},kn=(e,t,n,a)=>ut("SGE",e,t,n,{...a,jobHealingPotencyModifiers:c=>{if(!a.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),d}}),QS=(e,t,n,a)=>qe("SGE",e,t,n,a);En("EUKRASIA",30,{castTime:0,recastTime:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.gainStatus("EUKRASIA")});En("DOSIS",1,{replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"DOSIS_II"},manaCost:300,potency:300,applicationDelay:.67});En("DOSIS_II",72,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_II"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DOSIS_III"},manaCost:400,potency:320,applicationDelay:.67});const JS=[["NEVER",330],["MAGICK_MASTERY_HEALER",380]];En("DOSIS_III",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_III"}],manaCost:400,potency:JS,applicationDelay:.67});En("EUKRASIAN_DOSIS",30,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS",skillName:"EUKRASIAN_DOSIS",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS",t)}});En("EUKRASIAN_DOSIS_II",72,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_II",skillName:"EUKRASIAN_DOSIS_II",tickPotency:60,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_II",t)}});En("EUKRASIAN_DOSIS_III",82,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_III",skillName:"EUKRASIAN_DOSIS_III",tickPotency:85,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_III",t)}});En("TOXIKON",66,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"TOXIKON_II"},potency:[["NEVER",240],["OFFENSIVE_MAGIC_MASTERY",300]],falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});En("TOXIKON_II",82,{startOnHotbar:!1,potency:JS,falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});En("PHLEGMA",26,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"PHLEGMA_II"},potency:400,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});En("PHLEGMA_II",72,{startOnHotbar:!1,autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"PHLEGMA_III"},potency:490,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});En("PHLEGMA_III",82,{startOnHotbar:!1,potency:600,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});kn("PSYCHE",92,"cd_PSYCHE",{potency:600,falloff:.5,applicationDelay:2.1,cooldown:60});En("DYSKRASIA",46,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DYSKRASIA_II"},potency:160,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});En("DYSKRASIA_II",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DYSKRASIA"}],potency:170,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});En("EUKRASIAN_DYSKRASIA",82,{startOnHotbar:!1,falloff:0,applicationDelay:1.03,castTime:0,recastTime:1.5,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DYSKRASIA",skillName:"EUKRASIAN_DYSKRASIA",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DYSKRASIA",t)}});En("DIAGNOSIS",2,{healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DIAGNOSIS"}],manaCost:400});En("EUKRASIAN_DIAGNOSIS",30,{startOnHotbar:!1,healingPotency:300,applicationDelay:.67,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_DIAGNOSIS")});kn("EUKRASIAN_DIAGNOSIS_POP",30,"cd_DIAGNOSIS_POP",{animationLock:Ni,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_DIAGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")});En("PROGNOSIS",10,{healingPotency:300,aoeHeal:!0,applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA")&&e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS_II"},{condition:e=>e.hasResourceAvailable("EUKRASIA")&&!e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS"}],manaCost:700,castTime:e=>e.config.adjustedCastTime(2)});En("EUKRASIAN_PROGNOSIS",30,{startOnHotbar:!1,autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II"},healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});En("EUKRASIAN_PROGNOSIS_II",96,{startOnHotbar:!1,healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});kn("EUKRASIAN_PROGNOSIS_POP",30,"cd_PROGNOSIS_POP",{autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II_POP"},animationLock:Ni,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});kn("EUKRASIAN_PROGNOSIS_II_POP",30,"cd_PROGNOSIS_POP",{startOnHotbar:!1,animationLock:Ni,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});En("PNEUMA",90,{potency:JS,falloff:.4,healingPotency:600,aoeHeal:!0,applicationDelay:.58,manaCost:700,secondaryCooldown:{cdName:"cd_PNEUMA",maxCharges:1,cooldown:120}});QS("ZOE",56,"cd_ZOE",{rscType:"ZOE",applicationDelay:0,cooldown:90});kn("PEPSIS",58,"cd_PEPSIS",{cooldown:30,applicationDelay:1.16,onConfirm:(e,t)=>{e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_DIAGNOSIS",t),e.tryConsumeResource("EUKRASIAN_DIAGNOSIS")),e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_PROGNOSIS",t),e.tryConsumeResource("EUKRASIAN_PROGNOSIS"))},onApplication:(e,t)=>{t.getHotPotencies("PEPSIS").forEach(n=>{p.resolveHealingPotency(n)})}});QS("SOTERIA",35,"cd_SOTERIA",{rscType:"SOTERIA",applicationDelay:.8,cooldown:60});QS("KRASIS",86,"cd_KRASIS",{rscType:"KRASIS",applicationDelay:.76,cooldown:60});kn("HAIMA",70,"cd_HAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("HAIMA"),newSkill:"HAIMA_POP"}],applicationDelay:.76,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("HAIMA",t),onApplication:(e,t)=>{const n=Vt("SGE","HAIMATINON").maxValue;e.gainStatus("HAIMA"),e.gainStatus("HAIMATINON",n),e.addEvent(new Me("Haima Expiration heal Check",Vt("SGE","HAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("HAIMA",t)))}});kn("HAIMA_POP",70,"cd_HAIMA_POP",{startOnHotbar:!1,animationLock:Ni,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("HAIMA"),highlightIf:e=>e.hasResourceAvailable("HAIMA"),onConfirm:e=>{e.hasResourceAvailable("HAIMATINON")?e.tryConsumeResource("HAIMATINON"):e.tryConsumeResource("HAIMA")}});kn("PHYSIS_II",60,"cd_PHYSIS",{aoeHeal:!0,applicationDelay:.85,cooldown:60,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"PHYSIS_II",effectName:"PHYSIS_II",speedStat:"sps",tickPotency:130})},onApplication:(e,t)=>{e.applyHoT("PHYSIS_II",t),e.gainStatus("AUTOPHYSIS")}});kn("PHILOSOPHIA",100,"cd_PHILOSOPHIA",{applicationDelay:1.83,cooldown:180,onApplication:e=>{e.gainStatus("PHILOSOPHIA"),e.gainStatus("EUDAIMONIA")}});kn("HOLOS",76,"cd_HOLOS",{applicationDelay:.62,cooldown:120,onApplication:e=>{e.gainStatus("HOLOS"),e.gainStatus("HOLOSAKOS")}});kn("PANHAIMA",80,"cd_PANHAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("PANHAIMA"),newSkill:"PANHAIMA_POP"}],applicationDelay:.62,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("PANHAIMA",t),onApplication:(e,t)=>{const n=Vt("SGE","PANHAIMATINON").maxValue;e.gainStatus("PANHAIMA"),e.gainStatus("PANHAIMATINON",n),e.addEvent(new Me("Panhaima Expiration heal Check",Vt("SGE","PANHAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("PANHAIMA",t)))}});kn("PANHAIMA_POP",80,"cd_PANHAIMA_POP",{startOnHotbar:!1,animationLock:Ni,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PANHAIMA"),highlightIf:e=>e.hasResourceAvailable("PANHAIMA"),onConfirm:e=>{e.hasResourceAvailable("PANHAIMATINON")?e.tryConsumeResource("PANHAIMATINON"):e.tryConsumeResource("PANHAIMA")}});kn("RHIZOMATA",74,"cd_RHIZOMATA",{cooldown:90,onConfirm:e=>e.resources.get("ADDERSGALL").gain(1)});kn("DRUOCHOLE",45,"cd_DRUOCHOLE",{cooldown:1,healingPotency:600,applicationDelay:.78,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});kn("IXOCHOLE",52,"cd_IXOCHOLE",{cooldown:30,healingPotency:400,aoeHeal:!0,applicationDelay:.756,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});kn("TAUROCHOLE",62,"cd_TAUROCHOLE",{cooldown:45,applicationDelay:.67,onConfirm:e=>e.consumeAddersgall(),onApplication:e=>e.gainStatus("TAUROCHOLE")});kn("KERACHOLE",50,"cd_KERACHOLE",{cooldown:30,aoeHeal:!0,applicationDelay:.81,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:(e,t)=>{e.consumeAddersgall(),e.addHoTPotencies({node:t,skillName:"KERACHOLE",effectName:"KERAKEIA",speedStat:"sps",tickPotency:100})},onApplication:(e,t)=>{e.gainStatus("KERACHOLE"),e.hasTraitUnlocked("ENHANCED_KERACHOLE")&&e.applyHoT("KERAKEIA",t)}});En("EGEIRO",12,{applicationDelay:.58,manaCost:2400,castTime:8});kn("KARDIA",4,"cd_KARDIA",{applicationDelay:.62,cooldown:5,onApplication:e=>{e.gainStatus("KARDIA"),e.gainStatus("KARDION")}});kn("ICARUS",40,"cd_ICARUS",{cooldown:45,animationLock:$t});Object.keys(hS).forEach(e=>Wt(e,`WAR/${Ye[e].name}.png`));class PB extends Qt{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(hS).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var h,m;const n=this.state.resources,a=n.get("BEAST_GAUGE").availableAmount(),s=n.get("STORM_COMBO"),c=n.get("TEMPEST_COMBO"),d=s.available(1)?(h=s.pendingChange)==null?void 0:h.timeTillEvent:c.available(1)?(m=c.pendingChange)==null?void 0:m.timeTillEvent:void 0;return[{kind:"text",name:g({en:"Combo Timer",zh:""}),text:(d==null?void 0:d.toFixed(3))??"N/A"},{kind:"bar",name:g({en:"Beast Gauge",zh:""}),color:t.war.beastGauge,progress:a/100,valueString:a.toFixed(0)}]}}const zt=(e,t,n)=>{Qe("WAR",e,t,n??{})};zt("BEAST_GAUGE",100,{warnOnOvercap:!0});const eI=.74,YD=1.16;zt("SURGING_TEMPEST",1,{timeout:60});zt("NASCENT_CHAOS",1,{timeout:30});zt("INNER_RELEASE",3,{timeout:15+eI});zt("INNER_STRENGTH",1,{timeout:15+eI});zt("BURGEONING_FURY",3,{timeout:30});zt("WRATHFUL",1,{timeout:30});zt("PRIMAL_REND_READY",1,{timeout:30+eI,warnOnTimeout:!0});zt("PRIMAL_RUINATION_READY",1,{timeout:20+YD,warnOnTimeout:!0});zt("THRILL_OF_BATTLE",1,{timeout:10});zt("EQUILIBRIUM",1,{timeout:15});zt("RAW_INTUITION",1,{timeout:6});zt("BLOODWHETTING",1,{timeout:8});zt("STEM_THE_FLOW",1,{timeout:4});zt("STEM_THE_TIDE",1,{timeout:20});zt("NASCENT_FLASH",1,{timeout:8});zt("VENGEANCE",1,{timeout:15});zt("DAMNATION",1,{timeout:15});zt("PRIMEVAL_IMPULSE",1,{timeout:15});zt("SHAKE_IT_OFF",1,{timeout:30});zt("SHAKE_IT_OFF_OVER_TIME",1,{timeout:15});zt("HOLMGANG",1,{timeout:10});zt("DEFIANCE",1);zt("STORM_COMBO",2,{timeout:30});zt("TEMPEST_COMBO",1,{timeout:30});const GB=["HEAVY_SWING","MAIM","STORMS_EYE","STORMS_PATH"],KD=["OVERPOWER","MYTHRIL_TEMPEST"],BB=[...GB,...KD],YC=["FELL_CLEAVE","DECIMATE"],FB=["THRILL_OF_BATTLE","DAMNATION","BLOODWHETTING","VENGEANCE","RAW_INTUITION"];class jB extends Jt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_ONSLAUGHT")&&this.cooldowns.set(new Fe("cd_ONSLAUGHT",30,3,3)),this.registerRecurringEvents()}get statusPropsGenerator(){return new PB(this)}processComboStatus(t){if(!BB.includes(t))return;const n=KD.includes(t),a=n?"TEMPEST_COMBO":"STORM_COMBO",s=n?"STORM_COMBO":"TEMPEST_COMBO";this.setComboState(s,0);const c=this.resources.get(a).availableAmount();let d=0;n?t==="OVERPOWER"&&(d=1):t==="HEAVY_SWING"?d=1:c===1&&t==="MAIM"&&(d=2),this.setComboState(a,d)}hasComboStatus(t,n){return this.hasResourceExactly(t,n)}gainBeastGauge(t){this.resources.get("BEAST_GAUGE").gain(t)}gainProc(t,n){const a=Vt("WAR",t).maxTimeout;this.hasResourceAvailable(t)?(t==="BURGEONING_FURY"&&this.resources.get(t).gain(1),this.resources.get(t).overrideTimer(this,a)):(this.resources.get(t).gain(n??1),a&&this.enqueueResourceDrop(t,a))}gainSurgingTempest(t){var c;const n=this.resources.get("SURGING_TEMPEST"),a=Vt("WAR","SURGING_TEMPEST").maxTimeout,s=(((c=n.pendingChange)==null?void 0:c.timeTillEvent)??0)+t;n.overrideTimer(this,s>=a?a:s)}gainSurgingTempestGCD(t,n,a){this.hasResourceAvailable("SURGING_TEMPEST")?this.addEvent(new Me("surging tempest refresh",n,()=>{this.hasResourceAvailable("SURGING_TEMPEST")?this.gainSurgingTempest(t):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t))})):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t+a))}}const la=(e,t,n)=>{const a=we(n.onConfirm,c=>c.processComboStatus(e),c=>{YC.includes(e)&&c.tryConsumeResource("INNER_RELEASE")&&c.hasTraitUnlocked("ENHANCED_INNER_RELEASE")&&(c.gainProc("BURGEONING_FURY"),c.hasResourceAvailable("BURGEONING_FURY",3)&&(c.gainProc("WRATHFUL"),c.tryConsumeResource("BURGEONING_FURY",!0)))}),s=n.jobPotencyModifiers??(c=>[]);return cn("WAR",e,t,{...n,onConfirm:a,recastTime:c=>c.config.adjustedSksGCD(),jobPotencyModifiers:c=>{const d=s(c);return c.hasResourceAvailable("SURGING_TEMPEST")&&d.push(X.SurgingTempest),c.hasResourceAvailable("INNER_RELEASE")&&YC.includes(e)&&d.push(X.AutoCDH),d}})},Hc=(e,t,n,a)=>ut("WAR",e,t,n,{...a,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("SURGING_TEMPEST")&&c.push(X.SurgingTempest),c}});la("TOMAHAWK",15,{potency:150,applicationDelay:.71});la("HEAVY_SWING",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",240]],applicationDelay:.53});la("MAIM",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",150],["MELEE_MASTERY_II_TANK",190]],combo:{potency:[["NEVER",250],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",340]],resource:"STORM_COMBO",resourceValue:1},applicationDelay:.62,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",1)&&e.gainBeastGauge(10)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",1)});la("STORMS_PATH",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.52,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&e.gainBeastGauge(20)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});la("STORMS_EYE",50,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.65,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&(e.gainBeastGauge(10),e.gainSurgingTempestGCD(30,1.65,1.7))},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});la("OVERPOWER",10,{potency:110,falloff:0,applicationDelay:.62});la("MYTHRIL_TEMPEST",40,{potency:100,combo:{potency:140,resource:"TEMPEST_COMBO",resourceValue:1},falloff:0,applicationDelay:.49,onConfirm:e=>{e.hasComboStatus("TEMPEST_COMBO",1)&&(e.gainBeastGauge(20),e.gainSurgingTempestGCD(30,.49,.45))},highlightIf:e=>e.hasComboStatus("TEMPEST_COMBO",1)});function PE(e){e.cooldowns.get("cd_INFURIATE").restore(5)}la("FELL_CLEAVE",54,{potency:[["NEVER",520],["MELEE_MASTERY_II_TANK",580]],applicationDelay:.62,validateAttempt:e=>e.resources.get("BEAST_GAUGE").available(50)||e.resources.get("INNER_RELEASE").available(1),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),PE(e)},replaceIf:[{newSkill:"INNER_CHAOS",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}],highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE")});la("DECIMATE",60,{potency:180,falloff:0,applicationDelay:1.83,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),PE(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),replaceIf:[{newSkill:"CHAOTIC_CYCLONE",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}]});Hc("INNER_RELEASE",70,"cd_INNER_RELEASE",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.gainProc("INNER_RELEASE",3),e.gainProc("INNER_STRENGTH"),e.hasResourceAvailable("SURGING_TEMPEST")&&e.gainSurgingTempest(10),e.config.level>=ot.lvl90&&e.gainProc("PRIMAL_REND_READY")},replaceIf:[{newSkill:"PRIMAL_WRATH",condition:e=>e.hasResourceAvailable("WRATHFUL")}]});la("PRIMAL_REND",90,{potency:700,applicationDelay:YD,falloff:.5,animationLock:1.2,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_REND_READY"),e.hasTraitUnlocked("ENHANCED_PRIMAL_REND")&&e.gainProc("PRIMAL_RUINATION_READY")},highlightIf:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),replaceIf:[{newSkill:"PRIMAL_RUINATION",condition:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY")}],jobPotencyModifiers:e=>[X.AutoCDH]});Hc("PRIMAL_WRATH",96,"cd_PRIMAL_WRATH",{startOnHotbar:!1,potency:700,falloff:.5,applicationDelay:1.15,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("WRATHFUL"),onConfirm:e=>e.tryConsumeResource("WRATHFUL"),highlightIf:e=>!0});la("PRIMAL_RUINATION",100,{startOnHotbar:!1,potency:780,falloff:.5,applicationDelay:1.06,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_RUINATION_READY")},highlightIf:e=>!0,jobPotencyModifiers:e=>[X.AutoCDH]});Hc("INFURIATE",50,"cd_INFURIATE",{applicationDelay:0,requiresCombat:!0,cooldown:60,maxCharges:2,onApplication:e=>{e.gainBeastGauge(50),e.hasTraitUnlocked("NASCENT_CHAOS")&&e.gainProc("NASCENT_CHAOS")}});la("INNER_CHAOS",80,{startOnHotbar:!1,potency:660,applicationDelay:.94,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),PE(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[X.AutoCDH]});la("CHAOTIC_CYCLONE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),PE(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[X.AutoCDH]});Hc("ONSLAUGHT",62,"cd_ONSLAUGHT",{potency:150,applicationDelay:.63,cooldown:30,maxCharges:2,animationLock:$t});Hc("UPHEAVAL",64,"cd_UPHEAVAL",{potency:420,applicationDelay:.62,cooldown:30});Hc("OROGENY",86,"cd_UPHEAVAL",{potency:150,falloff:0,applicationDelay:.62,cooldown:30});qe("WAR","VENGEANCE",38,"cd_VENGEANCE",{rscType:"VENGEANCE",autoUpgrade:{trait:"VENGEANCE_MASTERY",otherSkill:"DAMNATION"},cooldown:120,applicationDelay:.62});qe("WAR","DAMNATION",92,"cd_VENGEANCE",{rscType:"DAMNATION",autoDowngrade:{trait:"VENGEANCE_MASTERY",otherSkill:"VENGEANCE"},cooldown:120,applicationDelay:.62});qe("WAR","RAW_INTUITION",56,"cd_RAW_INTUITION",{rscType:"RAW_INTUITION",autoUpgrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"BLOODWHETTING"},cooldown:25,applicationDelay:.45});qe("WAR","BLOODWHETTING",82,"cd_RAW_INTUITION",{rscType:"BLOODWHETTING",autoDowngrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"RAW_INTUITION"},onApplication:e=>{e.gainProc("STEM_THE_FLOW"),e.gainProc("STEM_THE_TIDE")},cooldown:25,applicationDelay:.45});ut("WAR","NASCENT_FLASH",76,"cd_RAW_INTUITION",{onApplication:e=>{let t=6;e.hasTraitUnlocked("ENHANCED_NASCENT_FLASH")&&(t=8),e.resources.get("NASCENT_FLASH").gain(1),e.enqueueResourceDrop("NASCENT_FLASH",t)},cooldown:25,applicationDelay:.45});qe("WAR","HOLMGANG",45,"cd_HOLMGANG",{rscType:"HOLMGANG",cooldown:240,applicationDelay:.45});qe("WAR","THRILL_OF_BATTLE",30,"cd_THRILL_OF_BATTLE",{rscType:"THRILL_OF_BATTLE",cooldown:90,applicationDelay:.62});ut("WAR","EQUILIBRIUM",58,"cd_EQUILIBRIUM",{cooldown:60,applicationDelay:.62,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EQUILIBRIUM")&&e.gainProc("EQUILIBRIUM")}});qe("WAR","SHAKE_IT_OFF",68,"cd_SHAKE_IT_OFF",{rscType:"SHAKE_IT_OFF",cooldown:90,onApplication:(e,t)=>{let n=0;FB.forEach(a=>{e.tryConsumeResource(a)&&(n+=1)}),console.debug(`Shake It Off dispelled ${n} buffs`),e.gainProc("SHAKE_IT_OFF_OVER_TIME")},applicationDelay:0});ut("WAR","DEFIANCE",10,"cd_DEFIANCE",{cooldown:2,maxCharges:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.resources.get("DEFIANCE").gain(1),replaceIf:[{newSkill:"RELEASE_DEFIANCE",condition:e=>e.hasResourceAvailable("DEFIANCE")}],secondaryCooldown:{cdName:"cd_RELEASE_DEFIANCE",cooldown:1,maxCharges:1}});ut("WAR","RELEASE_DEFIANCE",10,"cd_RELEASE_DEFIANCE",{startOnHotbar:!1,cooldown:1,maxCharges:1,secondaryCooldown:{cdName:"cd_DEFIANCE",cooldown:2,maxCharges:1},applicationDelay:0,validateAttempt:e=>e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.tryConsumeResource("DEFIANCE")});const VD=["CIRCLE_OF_SCORN_DOT"],zB=Object.keys(aS).filter(e=>!VD.includes(e));Object.keys(aS).forEach(e=>Wt(e,`PLD/${Ye[e].name}.png`));class YB extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[...VD.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return zB.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S;const n=this.state.resources,a=n.get("PLD_COMBO_TRACKER"),s=n.get("PLD_AOE_COMBO_TRACKER"),c=n.get("OATH_GAUGE").availableAmount(),d=n.get("IRON_WILL").availableAmount(),f=a.available(1)?(T=a.pendingChange)==null?void 0:T.timeTillEvent:s.available(1)?(S=s.pendingChange)==null?void 0:S.timeTillEvent:void 0,h=this.state.findAutoAttackTimerInQueue();let m="";return this.state.hasResourceAvailable("STORED_AUTO")?m="stored":m=h!==-1?h.toFixed(3):"N/A",[{kind:"bar",name:g({en:"Auto Tracker"}),color:t.pld.ironWillColor,progress:h!==-1?(3-h)/3:0,valueString:m},{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.pld.pldComboTimer,progress:f?f/30:0,valueString:(f==null?void 0:f.toFixed(3))??"N/A"},{kind:"counter",name:g({en:"Iron Will",zh:""}),color:t.pld.ironWillColor,currentStacks:d,maxStacks:1},{kind:"bar",name:g({en:"Oath Gauge",zh:""}),color:t.pld.oathGaugeColor,progress:c/100,valueString:c.toFixed(0)}]}}const Dt=(e,t,n)=>{Qe("PLD",e,t,n??{})};Dt("FIGHT_OR_FLIGHT",1,{timeout:20});Dt("IRON_WILL",1);Dt("OATH_GAUGE",100);Dt("SHELTRON",1,{timeout:6});Dt("SENTINEL",1,{timeout:15});Dt("CIRCLE_OF_SCORN_DOT",1,{timeout:15});Dt("HALLOWED_GROUND",1,{timeout:10});Dt("BULWARK",1,{timeout:10});Dt("GORING_BLADE_READY",1,{timeout:30});Dt("DIVINE_VEIL",1,{timeout:30});Dt("ATONEMENT_READY",1,{timeout:30,warnOnTimeout:!0});Dt("DIVINE_MIGHT",1,{timeout:30,warnOnTimeout:!0});Dt("KNIGHTS_RESOLVE",1,{timeout:4});Dt("KNIGHTS_BENEDICTION",1,{timeout:12});Dt("REQUIESCAT",4,{timeout:30,warnOnTimeout:!0});Dt("CONFITEOR_READY",1,{timeout:30,warnOnTimeout:!0});Dt("PASSAGE_OF_ARMS",1,{timeout:18});Dt("SUPPLICATION_READY",1,{timeout:30,warnOnTimeout:!0});Dt("SEPULCHRE_READY",1,{timeout:30,warnOnTimeout:!0});Dt("HOLY_SHELTRON",1,{timeout:8});Dt("BLADE_OF_HONOR_READY",1,{timeout:30,warnOnTimeout:!0});Dt("GUARDIAN",1,{timeout:15});Dt("GUARDIANS_WILL",1,{timeout:15});Dt("PLD_COMBO_TRACKER",2,{timeout:30});Dt("PLD_CONFITEOR_COMBO_TRACKER",3,{timeout:30});Dt("PLD_AOE_COMBO_TRACKER",1,{timeout:30});Dt("INTERVENTION",1,{timeout:8});Dt("ARMS_UP",1);Dt("COVER",1,{timeout:12});const KR=new Map([["TOTAL_ECLIPSE",0],["PROMINENCE",1]]),VR=new Map([["FAST_BLADE",0],["RIOT_BLADE",1],["ROYAL_AUTHORITY",2]]),WD=new Map([["CONFITEOR",0],["BLADE_OF_FAITH",1],["BLADE_OF_TRUTH",2],["BLADE_OF_VALOR",3]]),If=["HOLY_SPIRIT","HOLY_CIRCLE"];class KB extends Jt{constructor(t){super(t),this.resources.get("OATH_GAUGE").gain(100),this.registerRecurringEvents([{groupedEffects:[{effectName:"CIRCLE_OF_SCORN_DOT",appliedBy:["CIRCLE_OF_SCORN"]}]}])}get statusPropsGenerator(){return new YB(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("FIGHT_OR_FLIGHT")&&t.addBuff(H.FightOrFlight);const a=n.name;this.hasResourceAvailable("DIVINE_MIGHT")&&(a==="HOLY_SPIRIT"||a==="HOLY_CIRCLE")?t.addBuff(H.DivineMight):this.hasResourceAvailable("REQUIESCAT")&&(a==="HOLY_SPIRIT"||a==="HOLY_CIRCLE"||a==="CONFITEOR"||a==="BLADE_OF_FAITH"||a==="BLADE_OF_TRUTH"||a==="BLADE_OF_VALOR")&&t.addBuff(H.Requiescat)}cancelChanneledSkills(){this.tryConsumeResource("PASSAGE_OF_ARMS")}jobSpecificOnAutoAttack(){p.reportAutoTick(this.time,"auto"),this.resources.get("OATH_GAUGE").gain(5)}isSpellInstant(t){return t!=="CLEMENCY"?this.hasResourceAvailable("DIVINE_MIGHT")||this.hasResourceAvailable("REQUIESCAT"):this.hasResourceAvailable("REQUIESCAT")}captureSpellCastTime(t,n){return this.isSpellInstant(t)?0:this.config.adjustedCastTime(n)}tryConsumeRequiescat(t){(If.includes(t)||WD.has(t)||t==="CLEMENCY")&&this.tryConsumeResource("REQUIESCAT")}isHolySpiritCircleGoodForReq(){const t=this.resources.get("REQUIESCAT").availableAmount();return t===0||this.hasResourceAvailable("PLD_CONFITEOR_COMBO_TRACKER")||this.config.level>=90?!1:this.config.level>=80?!this.hasResourceAvailable("CONFITEOR_READY")||this.hasResourceAvailable("CONFITEOR_READY")&&t>1:!0}progressComboTracker(t,n,a){const s=this.resources.get(n).maxValue,c=a.get(t)??-1,d=this.resources.get(n).availableAmount();this.tryConsumeResource(n,!0),(c!==s&&c===d||c===0)&&(this.resources.get(n).gain(c+1),this.enqueueResourceDrop(n))}fixPLDPhysicalComboState(t){KR.has(t)?(this.tryConsumeResource("PLD_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_AOE_COMBO_TRACKER",KR)):VR.has(t)&&(this.tryConsumeResource("PLD_AOE_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_COMBO_TRACKER",VR)),(KR.has(t)||VR.has(t)||t==="SHIELD_BASH")&&this.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0)}getDelayedManaFromAction(t,n){this.addEvent(new Me("get MP from "+n,this.skillsList.get(n).applicationDelay,()=>{this.resources.get("MANA").gain(t)}))}refreshBuff(t,n){this.addEvent(new Me("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const Wa=(e,t,n)=>{const a=we(n.onConfirm,s=>{e!=="SHIELD_LOB"&&e!=="SHIELD_BASH"&&e!=="GORING_BLADE"&&s.fixPLDPhysicalComboState(e)});return cn("PLD",e,t,{...n,onConfirm:a,recastTime:s=>s.config.adjustedSksGCD(),jobPotencyModifiers:s=>s.hasResourceAvailable("FIGHT_OR_FLIGHT")?[X.FightOrFlight]:[]})},Qs=(e,t,n)=>{const a=we((s,c)=>{s.hasResourceAvailable("DIVINE_MIGHT")&&If.includes(e)?s.tryConsumeResource("DIVINE_MIGHT"):s.tryConsumeRequiescat(e)},n.onConfirm);return ia("PLD",e,t,{...n,castTime:s=>s.captureSpellCastTime(e,n.baseCastTime),recastTime:s=>s.config.adjustedGCD(),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:s=>{const c=[];return If.includes(e)&&s.hasResourceAvailable("DIVINE_MIGHT")?n.dmPotency&&c.push(Mk(rn(s,n.dmPotency)-rn(s,n.basePotency))):(If.includes(e)||WD.has(e))&&s.hasResourceAvailable("REQUIESCAT")&&n.reqPotency&&c.push(vk(rn(s,n.reqPotency)-rn(s,n.basePotency))),e!=="CLEMENCY"&&s.hasResourceAvailable("FIGHT_OR_FLIGHT")&&c.push(X.FightOrFlight),n.jobPotencyModifiers&&c.push(...n.jobPotencyModifiers(s)),c},isInstantFn:s=>s.isSpellInstant(e),onConfirm:a})},Vn=(e,t,n,a)=>ut("PLD",e,t,n,{...a,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("FIGHT_OR_FLIGHT")&&c.push(X.FightOrFlight),c}}),XD=(e,t,n,a)=>qe("PLD",e,t,n,{...a,rscType:a.rscType,cooldown:a.cooldown,applicationDelay:a.applicationDelay}),qD={newSkill:"ATONEMENT",condition:e=>e.hasResourceAvailable("ATONEMENT_READY")},ZD={newSkill:"SUPPLICATION",condition:e=>e.hasResourceAvailable("SUPPLICATION_READY")},$D={newSkill:"SEPULCHRE",condition:e=>e.hasResourceAvailable("SEPULCHRE_READY")},tI={newSkill:"CONFITEOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===0},nd={newSkill:"BLADE_OF_FAITH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===1},id={newSkill:"BLADE_OF_TRUTH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===2},ad={newSkill:"BLADE_OF_VALOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===3},MT={newSkill:"BLADE_OF_HONOR",condition:e=>e.hasResourceAvailable("BLADE_OF_HONOR_READY")},VB={newSkill:"IMPERATOR",condition:e=>!e.hasResourceAvailable("BLADE_OF_HONOR_READY")},WB={newSkill:"IRON_WILL",condition:e=>!e.hasResourceAvailable("IRON_WILL")},XB={newSkill:"RELEASE_IRON_WILL",condition:e=>e.hasResourceAvailable("IRON_WILL")};Wa("SHIELD_LOB",15,{potency:100,applicationDelay:.89,startsAuto:!1});Wa("FAST_BLADE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",220]],applicationDelay:.62});Wa("RIOT_BLADE",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",170]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",330]],resource:"PLD_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1,applicationDelay:.76,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1&&e.getDelayedManaFromAction(1e3,"RIOT_BLADE")}});Wa("ROYAL_AUTHORITY",60,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",200]],combo:{potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],resource:"PLD_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2,applicationDelay:.62,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2&&(e.refreshBuff("DIVINE_MIGHT",0),e.hasTraitUnlocked("SWORD_OATH")&&(e.refreshBuff("ATONEMENT_READY",0),e.tryConsumeResource("SUPPLICATION_READY"),e.tryConsumeResource("SEPULCHRE_READY")))}});Wa("ATONEMENT",76,{replaceIf:[ZD,$D],potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("ATONEMENT_READY"),highlightIf:e=>e.hasResourceAvailable("ATONEMENT_READY"),onConfirm:e=>{e.tryConsumeResource("ATONEMENT_READY"),e.refreshBuff("SUPPLICATION_READY",0),e.getDelayedManaFromAction(400,"ATONEMENT")}});Wa("SUPPLICATION",76,{startOnHotbar:!1,replaceIf:[qD,$D],potency:[["NEVER",380],["MELEE_MASTERY_TANK",420],["MELEE_MASTERY_II_TANK",500]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("SUPPLICATION_READY"),highlightIf:e=>e.hasResourceAvailable("SUPPLICATION_READY"),onConfirm:e=>{e.tryConsumeResource("SUPPLICATION_READY"),e.refreshBuff("SEPULCHRE_READY",0),e.getDelayedManaFromAction(400,"SUPPLICATION")}});Wa("SEPULCHRE",76,{startOnHotbar:!1,replaceIf:[qD,ZD],potency:[["NEVER",400],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",540]],applicationDelay:1.29,validateAttempt:e=>e.hasResourceAvailable("SEPULCHRE_READY"),highlightIf:e=>e.hasResourceAvailable("SEPULCHRE_READY"),onConfirm:e=>{e.tryConsumeResource("SEPULCHRE_READY"),e.getDelayedManaFromAction(400,"SEPULCHRE")}});Wa("TOTAL_ECLIPSE",6,{potency:120,applicationDelay:.76,falloff:0});Wa("PROMINENCE",40,{potency:100,combo:{potency:220,resource:"PLD_AOE_COMBO_TRACKER",resourceValue:1},applicationDelay:.62,falloff:0,highlightIf:e=>e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1,onConfirm:e=>{e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1&&e.hasTraitUnlocked("ENHANCED_PROMINENCE")&&(e.refreshBuff("DIVINE_MIGHT",0),e.getDelayedManaFromAction(500,"PROMINENCE"))}});Qs("HOLY_SPIRIT",64,{baseCastTime:1.5,applicationDelay:.76,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",300],["MELEE_MASTERY_TANK",350],["MELEE_MASTERY_II_TANK",400]],reqPotency:[["NEVER",600],["MELEE_MASTERY_TANK",650],["MELEE_MASTERY_II_TANK",700]],dmPotency:[["NEVER",400],["MELEE_MASTERY_TANK",450],["MELEE_MASTERY_II_TANK",500]],highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});Qs("HOLY_CIRCLE",72,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:1e3,basePotency:100,reqPotency:350,dmPotency:250,falloff:0,highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});Wa("GORING_BLADE",54,{applicationDelay:.53,potency:700,validateAttempt:e=>e.hasResourceAvailable("GORING_BLADE_READY"),highlightIf:e=>e.hasResourceAvailable("GORING_BLADE_READY"),onConfirm:e=>{e.tryConsumeResource("GORING_BLADE_READY")}});Qs("CONFITEOR",80,{replaceIf:[nd,id,ad],baseCastTime:0,applicationDelay:.62,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>e.hasResourceAvailable("CONFITEOR_READY"),highlightIf:e=>e.hasResourceAvailable("CONFITEOR_READY"),onConfirm:e=>{e.tryConsumeResource("CONFITEOR_READY"),e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(1),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});Qs("BLADE_OF_FAITH",90,{replaceIf:[tI,id,ad],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,startsAuto:!1,applicationDelay:.62,basePotency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],reqPotency:[["NEVER",720],["MELEE_MASTERY_II_TANK",760]],falloff:.6,validateAttempt:e=>nd.condition(e),highlightIf:e=>nd.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(2),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});Qs("BLADE_OF_TRUTH",90,{replaceIf:[tI,nd,ad],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",320],["MELEE_MASTERY_II_TANK",380]],reqPotency:[["NEVER",820],["MELEE_MASTERY_II_TANK",880]],falloff:.6,validateAttempt:e=>id.condition(e),highlightIf:e=>id.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(3),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});Qs("BLADE_OF_VALOR",90,{replaceIf:[tI,nd,id],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>ad.condition(e),highlightIf:e=>ad.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.refreshBuff("BLADE_OF_HONOR_READY",0)}});Vn("FIGHT_OR_FLIGHT",2,"cd_FIGHT_OR_FLIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("GORING_BLADE_READY",0),e.refreshBuff("FIGHT_OR_FLIGHT",.62)}});Vn("REQUIESCAT",68,"cd_REQUIESCAT",{autoUpgrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"IMPERATOR"},applicationDelay:.62,cooldown:60,potency:320,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});Vn("IMPERATOR",96,"cd_IMPERATOR",{autoDowngrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"REQUIESCAT"},replaceIf:[MT],applicationDelay:1.29,cooldown:60,potency:580,falloff:.6,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30,4),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});Vn("BLADE_OF_HONOR",100,"cd_BLADE_OF_HONOR",{startOnHotbar:!1,cooldown:1,replaceIf:[VB],validateAttempt:MT.condition,highlightIf:MT.condition,applicationDelay:1.16,potency:1e3,startsAuto:!1,falloff:.5,onConfirm:e=>{e.tryConsumeResource("BLADE_OF_HONOR_READY")}});Vn("SPIRITS_WITHIN",30,"cd_SPIRITS_WITHIN",{autoUpgrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"EXPIACION"},applicationDelay:.89,cooldown:30,potency:270,onConfirm:e=>{e.getDelayedManaFromAction(500,"SPIRITS_WITHIN")}});Vn("EXPIACION",86,"cd_EXPIACION",{autoDowngrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"SPIRITS_WITHIN"},applicationDelay:.36,cooldown:30,potency:450,falloff:.6,onConfirm:e=>{e.getDelayedManaFromAction(500,"EXPIACION")}});Vn("CIRCLE_OF_SCORN",50,"cd_CIRCLE_OF_SCORN",{applicationDelay:1.02,cooldown:30,potency:140,falloff:0,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("FIGHT_OR_FLIGHT")&&n.push(X.FightOrFlight),e.addDoTPotencies({node:t,effectName:"CIRCLE_OF_SCORN_DOT",skillName:"CIRCLE_OF_SCORN",tickPotency:30,speedStat:"sks",modifiers:n}),e.addEvent(new Me("apply CoS dot",1.02,()=>{e.applyDoT("CIRCLE_OF_SCORN_DOT",t)}))}});Vn("INTERVENE",66,"cd_INTERVENE",{applicationDelay:.62,cooldown:30,potency:150,maxCharges:2,animationLock:$t});Qs("CLEMENCY",58,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:2e3,basePotency:0,highlightIf:e=>e.hasResourceAvailable("REQUIESCAT")});Vn("SHELTRON",35,"cd_SHELTRON",{autoUpgrade:{trait:"SHELTRON_MASTERY",otherSkill:"HOLY_SHELTRON"},validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,applicationDelay:0,cooldown:5,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50),e.refreshBuff("SHELTRON",0)}});Vn("HOLY_SHELTRON",82,"cd_HOLY_SHELTRON",{autoDowngrade:{trait:"SHELTRON_MASTERY",otherSkill:"SHELTRON"},applicationDelay:0,cooldown:5,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.refreshBuff("HOLY_SHELTRON",0),e.refreshBuff("KNIGHTS_RESOLVE",0),e.refreshBuff("KNIGHTS_BENEDICTION",0),e.resources.get("OATH_GAUGE").consume(50)}});Vn("INTERVENTION",62,"cd_INTERVENTION",{applicationDelay:.8,cooldown:10,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});XD("HALLOWED_GROUND",50,"cd_HALLOWED_GROUND",{rscType:"HALLOWED_GROUND",applicationDelay:0,cooldown:420});XD("BULWARK",52,"cd_BULWARK",{rscType:"BULWARK",applicationDelay:0,cooldown:90});Vn("SENTINEL",38,"cd_SENTINEL",{autoUpgrade:{trait:"SENTINEL_MASTERY",otherSkill:"GUARDIAN"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("SENTINEL",.53)}});Vn("GUARDIAN",92,"cd_GUARDIAN",{autoDowngrade:{trait:"SENTINEL_MASTERY",otherSkill:"SENTINEL"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("GUARDIAN",.53),e.refreshBuff("GUARDIANS_WILL",.53)}});Vn("DIVINE_VEIL",56,"cd_DIVINE_VEIL",{applicationDelay:0,cooldown:90,onConfirm:e=>{e.refreshBuff("DIVINE_VEIL",0)}});Vn("PASSAGE_OF_ARMS",70,"cd_PASSAGE_OF_ARMS",{applicationDelay:.62,cooldown:120,onConfirm:e=>{e.refreshBuff("PASSAGE_OF_ARMS",.62)}});Vn("COVER",45,"cd_COVER",{applicationDelay:.62,cooldown:120,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});Vn("IRON_WILL",10,"cd_IRON_WILL",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.resources.get("IRON_WILL").gain(1)},replaceIf:[XB],secondaryCooldown:{cdName:"cd_RELEASE_IRON_WILL",cooldown:1,maxCharges:1}});Vn("RELEASE_IRON_WILL",10,"cd_RELEASE_IRON_WILL",{startOnHotbar:!1,replaceIf:[WB],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.tryConsumeResource("IRON_WILL")},secondaryCooldown:{cdName:"cd_IRON_WILL",cooldown:2,maxCharges:1}});Wa("SHIELD_BASH",10,{potency:100,applicationDelay:.45});Object.keys(QT).forEach(e=>Wt(e,`DRK/${Ye[e].name}.png`));const qB=Object.keys(QT);class ZB extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return qB.map(t=>t==="GRIT"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S,I;const n=this.state.resources,a=n.get("DRK_COMBO_TRACKER"),s=n.get("DRK_AOE_COMBO_TRACKER"),c=n.get("BLOOD_GAUGE").availableAmount(),d=n.get("GRIT").availableAmount(),f=((T=n.get("DARKSIDE").pendingChange)==null?void 0:T.timeTillEvent)??0,h=n.get("DARK_ARTS").availableAmount(),m=a.available(1)?(S=a.pendingChange)==null?void 0:S.timeTillEvent:s.available(1)?(I=s.pendingChange)==null?void 0:I.timeTillEvent:void 0;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.drk.drkComboTimer,progress:m?m/30:0,valueString:(m==null?void 0:m.toFixed(3))??"N/A"},{kind:"counter",name:$e("GRIT"),color:t.drk.grit,currentStacks:d,maxStacks:1},{kind:"bar",name:$e("DARKSIDE"),color:t.drk.darkside,progress:f?f/60:0,valueString:f.toFixed(3)},{kind:"counter",name:$e("DARK_ARTS"),color:t.drk.darkarts,currentStacks:h,maxStacks:1},{kind:"bar",name:$e("BLOOD_GAUGE"),color:t.drk.blood,progress:c/100,valueString:c.toFixed(0)}]}}const mn=(e,t,n)=>{Qe("DRK",e,t,n??{})};mn("DARKSIDE",1,{timeout:60});mn("BLOOD_GAUGE",100,{warnOnOvercap:!0});mn("SALTED_EARTH",1,{timeout:15});mn("GRIT",1);mn("SHADOW_WALL",1,{timeout:15});mn("DARK_MIND",1,{timeout:10});mn("LIVING_DEAD",1,{timeout:10});mn("WALKING_DEAD",1,{timeout:10});mn("UNDEAD_REBIRTH",1);mn("DARK_MISSIONARY",1,{timeout:15});mn("DELIRIUM",3,{timeout:15,warnOnTimeout:!0});mn("BLOOD_WEAPON",3,{timeout:15,warnOnTimeout:!0});mn("BLACKEST_NIGHT",1,{timeout:7,warnOnTimeout:!0});mn("SCORN",1,{timeout:30,warnOnTimeout:!0});mn("OBLATION",1,{timeout:10});mn("SHADOWED_VIGIL",1,{timeout:15});mn("VIGILANT",1,{timeout:20});mn("DARK_ARTS",1,{warnOnOvercap:!0});mn("DRK_COMBO_TRACKER",2,{timeout:30});mn("DRK_AOE_COMBO_TRACKER",1,{timeout:30});mn("DRK_DELIRIUM_COMBO_TRACKER",2,{timeout:30});const nI=6;mn("ESTEEM_TRACKER",nI);const $B=6.8,QB=2.18;class JB extends Jt{constructor(t){super(t),this.registerRecurringEvents([{groupedEffects:[{effectName:"SALTED_EARTH",appliedBy:["SALTED_EARTH"],isGroundTargeted:!0}]}],["LIVING_SHADOW"])}get statusPropsGenerator(){return new ZB(this)}refreshDarkside(){var t;if(this.hasResourceAvailable("DARKSIDE")){const n=this.resources.get("DARKSIDE"),a=Vt("DRK","DARKSIDE").maxTimeout,s=(((t=n.pendingChange)==null?void 0:t.timeTillEvent)??0)+30;n.overrideTimer(this,Math.min(a,s))}else this.resources.get("DARKSIDE").gain(1),this.enqueueResourceDrop("DARKSIDE",30)}gainBloodGauge(t){this.resources.get("BLOOD_GAUGE").gain(t)}bloodWeaponConfirm(t){this.hasResourceAvailable("BLOOD_WEAPON")&&(this.tryConsumeResource("BLOOD_WEAPON"),this.gainBloodGauge(10),this.addEvent(new Me("gain blood weapon mana",t,()=>{this.resources.get("MANA").gain(600)})))}processComboStatus(t){if(["DISESTEEM","UNMEND","BLOODSPILLER","QUIETUS"].includes(t))return;let n=[this.resources.get("DRK_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_AOE_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_DELIRIUM_COMBO_TRACKER").availableAmount()];t==="HARD_SLASH"?n=[1,0,0]:t==="SYPHON_STRIKE"?n=[n[0]===1?2:0,0,0]:t==="SOULEATER"?n=[0,0,0]:t==="IMPALEMENT"?n[2]=0:t==="SCARLET_DELIRIUM"?n[2]=1:t==="COMEUPPANCE"?n[2]=2:t==="TORCLEAVER"?n[2]=0:t==="UNLEASH"?n=[0,1,0]:t==="STALWART_SOUL"?n=[0,0,0]:n=[0,0,0],this.setComboState("DRK_COMBO_TRACKER",n[0]),this.setComboState("DRK_AOE_COMBO_TRACKER",n[1]),this.setComboState("DRK_DELIRIUM_COMBO_TRACKER",n[2])}handleEsteemAttack(){if(!this.hasResourceAvailable("ESTEEM_TRACKER"))return;const t=this.resources.get("ESTEEM_TRACKER").node;t!==void 0&&this.resolveEsteemPotency(t),this.resources.get("ESTEEM_TRACKER").consume(1),this.hasResourceAvailable("ESTEEM_TRACKER")&&this.addEvent(new Me("esteem hit",QB,()=>this.handleEsteemAttack()))}resolveEsteemPotency(t){const n=this.resources.get("ESTEEM_TRACKER").availableAmount();if(n===0)return;const a=t.getDotPotencies("ESTEEM_TRACKER")[nI-n];a.modifiers.push(X.DrkPet),this.hasResourceAvailable("TINCTURE")&&a.modifiers.push(X.Tincture),a.snapshotTime=this.getDisplayTime(),p.resolvePotency(a)}}const Xl=(e,t,n)=>cn("DRK",e,t,{...n,onConfirm:we(n.onConfirm,a=>a.bloodWeaponConfirm(n.applicationDelay),a=>a.processComboStatus(e)),recastTime:a=>a.config.adjustedSksGCD(),jobPotencyModifiers:a=>a.hasResourceAvailable("DARKSIDE")?[X.Darkside]:[]}),iI=(e,t,n)=>ia("DRK",e,t,{...n,onConfirm:we(n.onConfirm,a=>a.processComboStatus(e)),recastTime:a=>a.config.adjustedGCD(),jobPotencyModifiers:a=>a.hasResourceAvailable("DARKSIDE")?[X.Darkside]:[]}),Oi=(e,t,n,a)=>ut("DRK",e,t,n,{...a,jobPotencyModifiers:s=>s.hasResourceAvailable("DARKSIDE")?[X.Darkside]:[]}),Js=(e,t,n,a)=>qe("DRK",e,t,n,a);iI("UNMEND",15,{applicationDelay:.98,potency:150,onConfirm:e=>{if(e.hasTraitUnlocked("ENHANCED_UNMEND")){const t=e.cooldowns.get("cd_SHADOWSTRIDE").timeTillNextStackAvailable();e.cooldowns.get("cd_SHADOWSTRIDE").overrideTimeTillNextStack(Math.max(0,t-5))}}});Xl("HARD_SLASH",1,{applicationDelay:.58,potency:[["NEVER",150],["MELEE_MASTERY_TANK",180],["MELEE_MASTERY_II_TANK",300]]});Xl("SYPHON_STRIKE",2,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_TANK",120],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",260],["MELEE_MASTERY_II_TANK",380]],resource:"DRK_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRK_COMBO_TRACKER",1)&&e.addEvent(new Me("gain syphon strike mana",.62,()=>{e.resources.get("MANA").gain(600)}))}});Xl("SOULEATER",26,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",2),potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",260]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",480]],resource:"DRK_COMBO_TRACKER",resourceValue:2},onConfirm:e=>{e.hasResourceAvailable("DRK_COMBO_TRACKER",2)&&e.gainBloodGauge(20)}});iI("UNLEASH",6,{applicationDelay:.71,potency:120,falloff:0});iI("STALWART_SOUL",40,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_II_TANK",120]],combo:{potency:[["NEVER",140],["MELEE_MASTERY_II_TANK",160]],resource:"DRK_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,onConfirm:e=>{e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1)&&(e.gainBloodGauge(20),e.addEvent(new Me("gain stalwart soul mana",.62,()=>{e.resources.get("MANA").gain(600)})))}});const GE=e=>{e.tryConsumeResource("DARK_ARTS"),e.refreshDarkside()},BE=e=>e.hasResourceAvailable("DARK_ARTS"),FE=e=>e.hasResourceAvailable("DARK_ARTS")?0:3e3;Oi("EDGE_OF_DARKNESS",40,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_SHADOW"},cooldown:1,manaCost:FE,highlightIf:BE,potency:300,onConfirm:GE});Oi("EDGE_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_DARKNESS"},cooldown:1,manaCost:FE,highlightIf:BE,potency:460,onConfirm:GE});Oi("FLOOD_OF_DARKNESS",30,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_SHADOW"},cooldown:1,manaCost:FE,highlightIf:BE,potency:100,falloff:0,onConfirm:GE});Oi("FLOOD_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_DARKNESS"},cooldown:1,manaCost:FE,highlightIf:BE,potency:160,falloff:0,onConfirm:GE});const nE=e=>e.hasResourceAvailable("BLOOD_GAUGE",50)||e.hasResourceAvailable("DELIRIUM"),_f=[{newSkill:"BLOODSPILLER",condition:e=>!e.hasTraitUnlocked("ENHANCED_DELIRIUM")||!e.hasResourceAvailable("DELIRIUM")},{newSkill:"SCARLET_DELIRIUM",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",0)},{newSkill:"COMEUPPANCE",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",1)},{newSkill:"TORCLEAVER",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",2)}];Xl("BLOODSPILLER",62,{applicationDelay:.8,validateAttempt:nE,highlightIf:nE,replaceIf:_f,potency:[["NEVER",500],["MELEE_MASTERY_II_TANK",600]],onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});const gf=e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM");Xl("QUIETUS",64,{applicationDelay:.76,validateAttempt:nE,highlightIf:nE,replaceIf:[{newSkill:"IMPALEMENT",condition:gf}],potency:[["NEVER",200],["MELEE_MASTERY_II_TANK",240]],falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});[["SCARLET_DELIRIUM",.62,620],["COMEUPPANCE",.67,720],["TORCLEAVER",.62,820]].forEach((e,t)=>{const[n,a,s]=e;Xl(n,96,{startOnHotbar:!1,applicationDelay:a,validateAttempt:_f[t+1].condition,highlightIf:_f[t+1].condition,replaceIf:_f,potency:s,onConfirm:c=>c.tryConsumeResource("DELIRIUM"),onApplication:c=>c.resources.get("MANA").gain(200)})});Xl("IMPALEMENT",96,{startOnHotbar:!1,applicationDelay:.98,validateAttempt:gf,highlightIf:gf,replaceIf:[{newSkill:"QUIETUS",condition:e=>!gf(e)}],potency:300,falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM"),onApplication:e=>e.resources.get("MANA").gain(500)});const LT=e=>e.hasResourceAvailable("SCORN");Xl("DISESTEEM",100,{startOnHotbar:!1,applicationDelay:1.65,validateAttempt:LT,highlightIf:LT,potency:1e3,falloff:.25,onConfirm:e=>e.tryConsumeResource("SCORN")});Oi("DELIRIUM",68,"cd_DELIRIUM",{applicationDelay:0,cooldown:60,onConfirm:e=>{e.gainStatus("DELIRIUM",3),e.gainStatus("BLOOD_WEAPON",3)}});Oi("CARVE_AND_SPIT",60,"cd_ABYSSAL_DRAIN",{applicationDelay:1.47,cooldown:60,potency:[["NEVER",510],["MELEE_MASTERY_II_TANK",540]],healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});Oi("ABYSSAL_DRAIN",56,"cd_ABYSSAL_DRAIN",{applicationDelay:.98,cooldown:60,potency:240,healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});const QD=e=>e.resources.get("SALTED_EARTH").availableAmountIncludingDisabled()>0;Oi("SALTED_EARTH",52,"cd_SALTED_EARTH",{applicationDelay:.76,cooldown:90,replaceIf:[{newSkill:"SALT_AND_DARKNESS",condition:QD}],onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"SALTED_EARTH",skillName:"SALTED_EARTH",tickPotency:50,speedStat:"sks"})},falloff:0,onApplication:(e,t)=>{e.applyDoT("SALTED_EARTH",t),e.gainStatus("SALTED_EARTH")}});Oi("SALT_AND_DARKNESS",86,"cd_SALT_AND_DARKNESS",{startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:QD,applicationDelay:.76,cooldown:20,potency:500,falloff:.25});Oi("LIVING_SHADOW",80,"cd_LIVING_SHADOW",{applicationDelay:0,replaceIf:[{newSkill:"DISESTEEM",condition:e=>LT(e)}],cooldown:120,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_III")&&e.gainStatus("SCORN"),e.resources.get("ESTEEM_TRACKER").gain(nI);const n=e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW")?420:340;[["ABYSSAL_DRAIN_PET",n,0],["SHADOWSTRIDE_PET",0,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_II")?["SHADOWBRINGER_PET",570,.25]:["FLOOD_OF_SHADOW_PET",n,0],["EDGE_OF_SHADOW_PET",n,void 0],["BLOODSPILLER_PET",n,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_III")?["DISESTEEM_PET",620,.25]:["CARVE_AND_SPIT_PET",n,void 0]].forEach(s=>{const[c,d,f]=s;t.addDoTPotency(new ln({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:c,aspect:_e.Other,description:"",basePotency:d,snapshotTime:void 0,targetCount:t.targetCount,falloff:f}),"ESTEEM_TRACKER")}),e.resources.get("ESTEEM_TRACKER").node=t,e.addEvent(new Me("initial esteem hit",$B,()=>e.handleEsteemAttack()))}});Oi("SHADOWBRINGER",90,"cd_SHADOWBRINGER",{applicationDelay:.67,cooldown:60,potency:600,falloff:.25,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("DARKSIDE")});Oi("SHADOWSTRIDE",54,"cd_SHADOWSTRIDE",{applicationDelay:.66,animationLock:$t,cooldown:30,maxCharges:2});Js("THE_BLACKEST_NIGHT",70,"cd_THE_BLACKEST_NIGHT",{rscType:"BLACKEST_NIGHT",manaCost:3e3,replaceIf:[{newSkill:"THE_BLACKEST_NIGHT_POP",condition:e=>e.hasResourceAvailable("BLACKEST_NIGHT")}],applicationDelay:.62,cooldown:15});Oi("THE_BLACKEST_NIGHT_POP",70,"cd_THE_BLACKEST_NIGHT_POP",{startOnHotbar:!1,highlightIf:e=>!0,applicationDelay:0,animationLock:Ni,cooldown:1,onConfirm:e=>{e.gainStatus("DARK_ARTS"),e.tryConsumeResource("BLACKEST_NIGHT")}});Js("SHADOW_WALL",38,"cd_SHADOW_WALL",{rscType:"SHADOW_WALL",autoUpgrade:{otherSkill:"SHADOWED_VIGIL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120});Js("SHADOWED_VIGIL",92,"cd_SHADOW_WALL",{rscType:"SHADOWED_VIGIL",autoDowngrade:{otherSkill:"SHADOW_WALL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120,onApplication:e=>e.gainStatus("VIGILANT")});Js("DARK_MIND",45,"cd_DARK_MIND",{rscType:"DARK_MIND",applicationDelay:.62,cooldown:60});Js("LIVING_DEAD",50,"cd_LIVING_DEAD",{rscType:"LIVING_DEAD",applicationDelay:0,cooldown:300});Js("DARK_MISSIONARY",66,"cd_DARK_MISSIONARY",{rscType:"DARK_MISSIONARY",applicationDelay:.62,cooldown:90});Js("OBLATION",82,"cd_OBLATION",{rscType:"OBLATION",applicationDelay:0,maxCharges:2,cooldown:60});Oi("GRIT",10,"cd_GRIT",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.resources.get("GRIT").gain(1),replaceIf:[{newSkill:"RELEASE_GRIT",condition:e=>e.hasResourceAvailable("GRIT")}],secondaryCooldown:{cdName:"cd_RELEASE_GRIT",cooldown:1,maxCharges:1}});Oi("RELEASE_GRIT",10,"cd_RELEASE_GRIT",{startOnHotbar:!1,replaceIf:[{newSkill:"GRIT",condition:e=>!e.hasResourceAvailable("GRIT")}],applicationDelay:0,cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.tryConsumeResource("GRIT"),secondaryCooldown:{cdName:"cd_GRIT",cooldown:2,maxCharges:1}});Object.keys(WT).forEach(e=>Wt(e,`AST/${Ye[e].name}.png`));const JD=["COMBUST_II","COMBUST_III"],eF=Object.keys(WT).filter(e=>!JD.includes(e));class tF extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[...JD.map(t=>this.makeCommonTimer(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...eF.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){return[{kind:"arcana",name:$e("ARCANA"),currentArcanaColor:this.state.drawnAstral()?t.ast.astralCard:t.ast.umbralCard,activeSlots:["ARCANA_1","ARCANA_2","ARCANA_3","MINOR_ARCANA"].map(n=>this.state.hasResourceAvailable(n))}]}}const dt=(e,t,n)=>{Qe("AST",e,t,n??{})};dt("ARCANA",1);dt("MINOR_ARCANA",1,{default:1});dt("LIGHTSPEED",1,{timeout:15});dt("THE_BALANCE",1,{timeout:15});dt("THE_ARROW",1,{timeout:15});dt("THE_SPIRE",1,{timeout:30});dt("THE_SPEAR",1,{timeout:15});dt("THE_BOLE",1,{timeout:15});dt("THE_EWER",1,{timeout:15});dt("ASPECTED_BENEFIC",1,{timeout:15});dt("ASPECTED_HELIOS",1,{timeout:15});dt("SYNASTRY",1,{timeout:20});dt("DIVINATION",1,{timeout:20});dt("DIVINING",1,{timeout:30,warnOnTimeout:!0});dt("COLLECTIVE_UNCONSCIOUS",1,{timeout:18});dt("COLLECTIVE_UNCONSCIOUS_MIT",1,{timeout:10});dt("WHEEL_OF_FORTUNE",1,{timeout:15});dt("OPPOSITION",1,{timeout:15});dt("EARTHLY_DOMINANCE",1,{timeout:10});dt("GIANT_DOMINANCE",1,{timeout:10});dt("COMBUST_II",1,{timeout:30});dt("COMBUST_III",1,{timeout:30});dt("INTERSECTION",1,{timeout:30});dt("NEUTRAL_SECT",1,{timeout:20});dt("NEUTRAL_SECT_SHIELD",1,{timeout:30});dt("HOROSCOPE",1,{timeout:10});dt("HOROSCOPE_HELIOS",1,{timeout:30});dt("SUNTOUCHED",1,{timeout:30});dt("EXALTATION",1,{timeout:8});dt("MACROCOSMOS",1,{timeout:15});dt("HELIOS_CONJUNCTION",1,{timeout:15});dt("SUN_SIGN",1,{timeout:15});dt("ARCANA_1",1,{default:1});dt("ARCANA_2",1,{default:1});dt("ARCANA_3",1,{default:1});dt("NEXT_DRAW",1);class nF extends Jt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY_II")?3:this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY")?2:1,a=this.hasTraitUnlocked("ENHANCED_CELESTIAL_INTERSECTION")?2:1;this.cooldowns.set(new Fe("cd_ESSENTIAL_DIGNITY",40,n,n)),this.cooldowns.set(new Fe("cd_CELESTIAL_INTERSECTION",30,a,a)),this.cooldowns.set(new Fe("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:g({en:"Combust DoT",zh:"DoT"}),groupedEffects:[{effectName:"COMBUST_II",appliedBy:["COMBUST_II"]},{effectName:"COMBUST_III",appliedBy:["COMBUST_III"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHEEL_OF_FORTUNE",appliedBy:["COLLECTIVE_UNCONSCIOUS"]}]},{isHealing:!0,groupedEffects:[{effectName:"OPPOSITION",appliedBy:["CELESTIAL_OPPOSITION"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_BENEFIC",appliedBy:["ASPECTED_BENEFIC"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_HELIOS",appliedBy:["ASPECTED_HELIOS"]},{effectName:"HELIOS_CONJUNCTION",appliedBy:["HELIOS_CONJUNCTION"]}]}])}drawnAstral(){return!this.hasResourceAvailable("NEXT_DRAW")}cancelChanneledSkills(){this.tryConsumeResource("COLLECTIVE_UNCONSCIOUS")}jobSpecificAddHealingBuffCovers(t,n){n.cdName==="cd_GCD"&&this.hasResourceAvailable("NEUTRAL_SECT")&&t.addBuff(H.NeutralSect),n.cdName==="cd_GCD"&&!n.aoeHeal&&this.hasResourceAvailable("SYNASTRY")&&t.addBuff(H.Synastry),this.hasResourceAvailable("THE_ARROW")&&t.addBuff(H.TheArrow)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("DIVINATION")&&t.addBuff(H.Divination)}get statusPropsGenerator(){return new tF(this)}}const Di=(e,t,n)=>{const a=c=>{if(!n.healingPotency)return[];const d=[];return c.hasResourceAvailable("SYNASTRY")&&!n.aoeHeal&&d.push(X.Synastry),c.hasResourceAvailable("NEUTRAL_SECT")&&d.push(X.NeutralSect),c.hasResourceAvailable("THE_ARROW")&&d.push(X.TheArrow),d},s=n.baseCastTime??0;return ia("AST",e,t,{...n,jobHealingPotencyModifiers:a,jobPotencyModifiers:c=>c.hasResourceAvailable("DIVINATION")?[X.Divination]:[],castTime:c=>Math.max(0,c.config.adjustedCastTime(c.hasResourceAvailable("LIGHTSPEED")?s-2.5:s)),recastTime:c=>c.config.adjustedGCD(2.5),isInstantFn:c=>!n.baseCastTime||c.hasResourceAvailable("SWIFTCAST"),onConfirm:we(s?c=>c.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm)})},yi=(e,t,n,a)=>ut("AST",e,t,n,{...a,jobHealingPotencyModifiers:a.healingPotency?s=>{const c=[];return s.hasResourceAvailable("THE_ARROW")&&c.push(X.TheArrow),e==="STELLAR_DETONATION"&&c.push(X.AstPet),c}:void 0,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("DIVINATION")&&c.push(X.Divination),e==="STELLAR_DETONATION"&&c.push(X.AstPet),c}}),er=(e,t,n,a)=>qe("AST",e,t,n,{...a,jobHealingPotencyModifiers:s=>a.healingPotency&&s.hasResourceAvailable("THE_ARROW")?[X.TheArrow]:[],jobPotencyModifiers:a.potency?s=>s.hasResourceAvailable("DIVINATION")?[X.Divination]:[]:void 0});Di("MALEFIC_III",64,{autoUpgrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_III"},baseCastTime:1.5,applicationDelay:1.07,potency:190,manaCost:400});Di("MALEFIC_IV",72,{autoDowngrade:{otherSkill:"MALEFIC_III",trait:"MALEFIC_MASTERY_III"},autoUpgrade:{otherSkill:"FALL_MALEFIC",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:230,manaCost:400});Di("FALL_MALEFIC",82,{autoDowngrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],manaCost:400});Di("COMBUST_II",46,{autoUpgrade:{otherSkill:"COMBUST_III",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_II",skillName:"COMBUST_II",tickPotency:60,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_II",t)});Di("COMBUST_III",72,{autoDowngrade:{otherSkill:"COMBUST_II",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_III",skillName:"COMBUST_III",tickPotency:e.hasTraitUnlocked("MAGICK_MASTERY_HEALER")?70:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_III",t)});Di("GRAVITY",45,{autoUpgrade:{otherSkill:"GRAVITY_II",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:120,falloff:0,manaCost:400});Di("GRAVITY_II",82,{autoDowngrade:{otherSkill:"GRAVITY",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:[["NEVER",130],["MAGICK_MASTERY_HEALER",140]],falloff:0,manaCost:400});Di("MACROCOSMOS",90,{applicationDelay:.75,secondaryCooldown:{cdName:"cd_MACROCOSMOS",cooldown:180,maxCharges:1},potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],falloff:.4,manaCost:600,replaceIf:[{newSkill:"MICROCOSMOS",condition:e=>e.hasResourceAvailable("MACROCOSMOS")}],onConfirm:e=>e.gainStatus("MACROCOSMOS")});yi("MICROCOSMOS",90,"cd_MICROCOSMOS",{startOnHotbar:!1,applicationDelay:.045,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("MACROCOSMOS"),onConfirm:e=>e.tryConsumeResource("MACROCOSMOS")});Di("ASPECTED_BENEFIC",34,{applicationDelay:.98,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_BENEFIC",effectName:"ASPECTED_BENEFIC",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200}),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_BENEFIC",t),e.gainStatus("ASPECTED_BENEFIC")}});Di("BENEFIC",2,{baseCastTime:1.5,applicationDelay:.98,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],manaCost:400});Di("BENEFIC_II",26,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:700});Di("ASPECTED_HELIOS",40,{autoUpgrade:{otherSkill:"HELIOS_CONJUNCTION",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_HELIOS",effectName:"ASPECTED_HELIOS",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_HELIOS",t),e.gainStatus("ASPECTED_HELIOS")}});Di("HELIOS_CONJUNCTION",96,{autoDowngrade:{otherSkill:"ASPECTED_HELIOS",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:250,aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"HELIOS_CONJUNCTION",effectName:"HELIOS_CONJUNCTION",speedStat:"sps",tickPotency:175}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("HELIOS_CONJUNCTION",t),e.gainStatus("HELIOS_CONJUNCTION")}});Di("HELIOS",10,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],aoeHeal:!0,manaCost:700,onConfirm:e=>{e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS")}});Di("ASCEND",12,{baseCastTime:8,applicationDelay:1.07,manaCost:2400});const _d=e=>e.drawnAstral(),gd=e=>!e.drawnAstral(),ey=e=>{(e.hasResourceAvailable("ARCANA_1")||e.drawnAstral()&&e.hasResourceAvailable("MINOR_ARCANA"))&&p.reportWarning({kind:"custom",en:"damage card overwritten!",zh:""}),e.resources.get("NEXT_DRAW").gainWrapping(1),["MINOR_ARCANA","ARCANA_1","ARCANA_2","ARCANA_3"].forEach(t=>e.resources.get(t).gain(1))},ty=e=>e.resources.get("MANA").gain(2e3);yi("ASTRAL_DRAW",30,"cd_ASTRAL_DRAW",{replaceIf:[{newSkill:"UMBRAL_DRAW",condition:_d}],applicationDelay:0,cooldown:55,validateAttempt:gd,onConfirm:ey,onApplication:ty});yi("UMBRAL_DRAW",30,"cd_ASTRAL_DRAW",{startOnHotbar:!1,replaceIf:[{newSkill:"ASTRAL_DRAW",condition:gd}],applicationDelay:0,cooldown:55,validateAttempt:_d,onConfirm:ey,onApplication:ty});const aI=(e,t,n)=>{console.assert(n.length===3);const a=[{newSkill:n[0],condition:s=>!s.hasResourceAvailable(t)},{newSkill:n[1],condition:s=>_d(s)&&s.hasResourceAvailable(t)},{newSkill:n[2],condition:s=>gd(s)&&s.hasResourceAvailable(t)}];a.forEach(({newSkill:s,condition:c},d)=>{const f=a.slice();f.splice(d,1),yi(s,30,e,{startOnHotbar:d===0,replaceIf:f,applicationDelay:.62,cooldown:1,validateAttempt:d===0?()=>!1:c,onConfirm:d!==0?h=>h.tryConsumeResource(t):void 0,onApplication:d!==0?h=>h.gainStatus(s):void 0})})};aI("cd_PLAY_I","ARCANA_1",["PLAY_I","THE_BALANCE","THE_SPEAR"]);aI("cd_PLAY_II","ARCANA_2",["PLAY_II","THE_ARROW","THE_BOLE"]);aI("cd_PLAY_III","ARCANA_3",["PLAY_III","THE_SPIRE","THE_EWER"]);yi("MINOR_ARCANA",70,"cd_MINOR_ARCANA",{applicationDelay:0,replaceIf:[{newSkill:"LORD_OF_CROWNS",condition:e=>_d(e)&&e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>gd(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],cooldown:1,validateAttempt:()=>!1});yi("LORD_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>gd(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,potency:400,falloff:0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});yi("LADY_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LORD_OF_CROWNS",condition:e=>_d(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,healingPotency:400,aoeHeal:!0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});er("LIGHTSPEED",6,"cd_LIGHTSPEED",{rscType:"LIGHTSPEED",applicationDelay:0,cooldown:60,maxCharges:2});const ny=437,iy=1015;yi("EARTHLY_STAR",62,"cd_EARTHLY_STAR",{applicationDelay:0,cooldown:60,falloff:0,replaceIf:[{newSkill:"STELLAR_DETONATION",condition:e=>e.hasResourceAvailable("EARTHLY_DOMINANCE")||e.hasResourceAvailable("GIANT_DOMINANCE")}],onConfirm:(e,t)=>{e.gainStatus("EARTHLY_DOMINANCE"),e.resources.addResourceEvent({rscType:"EARTHLY_DOMINANCE",name:"expand earthly star",delay:10,fnOnRsc:()=>{e.gainStatus("GIANT_DOMINANCE"),e.resources.addResourceEvent({rscType:"GIANT_DOMINANCE",name:"auto-detonate earthly star",delay:10,fnOnRsc:()=>{const n=[],a=new ln({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:_e.Other,basePotency:ny,snapshotTime:e.getDisplayTime(),description:"",targetCount:t.targetCount,falloff:0});e.hasResourceAvailable("TINCTURE")&&n.push(X.Tincture),e.hasResourceAvailable("DIVINATION")&&n.push(X.Divination),n.push(X.AstPet),a.modifiers=n,t.addPotency(a);const s=new ln({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:_e.Other,basePotency:iy,snapshotTime:e.getDisplayTime(),description:"",targetCount:t.healTargetCount,falloff:0});e.hasResourceAvailable("THE_ARROW"),t.addHealingPotency(s),p.resolvePotency(a),p.resolveHealingPotency(s)}})}})}});yi("STELLAR_DETONATION",62,"cd_STELLAR_DETONATION",{startOnHotbar:!1,applicationDelay:.53,cooldown:3,potency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?ny:290,falloff:0,healingPotency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?iy:762,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("EARTHLY_DOMINANCE")||e.hasResourceAvailable("GIANT_DOMINANCE"),onConfirm:e=>{e.tryConsumeResource("EARTHLY_DOMINANCE"),e.tryConsumeResource("GIANT_DOMINANCE")}});er("DIVINATION",50,"cd_DIVINATION",{rscType:"DIVINATION",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"ORACLE",condition:e=>e.hasResourceAvailable("DIVINING")}],onConfirm:e=>e.gainStatus("DIVINING")});yi("ORACLE",92,"cd_ORACLE",{startOnHotbar:!1,applicationDelay:1.74,cooldown:1,potency:860,falloff:.5,highlightIf:e=>e.hasResourceAvailable("DIVINING"),validateAttempt:e=>e.hasResourceAvailable("DIVINING"),onConfirm:e=>e.tryConsumeResource("DIVINING")});yi("ESSENTIAL_DIGNITY",15,"cd_ESSENTIAL_DIGNITY",{applicationDelay:.62,cooldown:40,maxCharges:3,healingPotency:400});er("SYNASTRY",50,"cd_SYNASTRY",{rscType:"SYNASTRY",applicationDelay:.62,cooldown:120});er("EXALTATION",86,"cd_EXALTATION",{rscType:"EXALTATION",applicationDelay:.71,cooldown:60});yi("COLLECTIVE_UNCONSCIOUS",58,"cd_COLLECTIVE_UNCONSCIOUS",{applicationDelay:.42,cooldown:60,onConfirm:(e,t)=>{e.gainStatus("COLLECTIVE_UNCONSCIOUS"),e.gainStatus("COLLECTIVE_UNCONSCIOUS_MIT"),e.addHoTPotencies({node:t,skillName:"COLLECTIVE_UNCONSCIOUS",effectName:"WHEEL_OF_FORTUNE",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("WHEEL_OF_FORTUNE")});yi("CELESTIAL_OPPOSITION",60,"cd_CELESTIAL_OPPOSITION",{applicationDelay:1.07,cooldown:60,healingPotency:200,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"CELESTIAL_OPPOSITION",effectName:"OPPOSITION",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("OPPOSITION")});yi("CELESTIAL_INTERSECTION",74,"cd_CELESTIAL_INTERSECTION",{applicationDelay:0,cooldown:30,maxCharges:1,healingPotency:200,aoeHeal:!0});er("HOROSCOPE",76,"cd_HOROSCOPE",{rscType:"HOROSCOPE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"HOROSCOPE_RECAST",condition:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE")}]});yi("HOROSCOPE_RECAST",76,"cd_HOROSCOPE_RECAST",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,healingPotency:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")?400:200,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE"),onConfirm:e=>e.tryConsumeResource("HOROSCOPE_HELIOS")||e.tryConsumeResource("HOROSCOPE")});er("NEUTRAL_SECT",80,"cd_NEUTRAL_SECT",{rscType:"NEUTRAL_SECT",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"SUN_SIGN",condition:e=>e.hasResourceAvailable("SUNTOUCHED")}],onConfirm:e=>e.gainStatus("SUNTOUCHED")});er("SUN_SIGN",100,"cd_SUN_SIGN",{startOnHotbar:!1,rscType:"SUN_SIGN",applicationDelay:1.47,cooldown:1,highlightIf:e=>e.hasResourceAvailable("SUNTOUCHED"),validateAttempt:e=>e.hasResourceAvailable("SUNTOUCHED"),onConfirm:e=>e.tryConsumeResource("SUNTOUCHED")});Object.keys(cS).forEach(e=>Wt(e,`SCH/${Ye[e].name}.png`));const ay=["BIO_II","BIOLYSIS","CHAIN_STRATAGEM","BANEFUL_IMPACTION"],iF=Object.keys(cS).filter(e=>!ay.includes(e));class aF extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[...ay.map(t=>this.makeCommonTimer(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...iF.map(t=>t==="FEY_UNION"?this.makeCommonTimerless(t):t==="SACRED_SOIL_ZONE"?this.makeToggleableTimer(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){var d;const n=this.state.resources.get("SERAPH_SUMMON_TIMER"),a=n.available(1)?(d=n.pendingChange)==null?void 0:d.timeTillEvent:void 0,s=this.state.resources.get("FAERIE_GAUGE").availableAmount(),c=this.state.resources.get("AETHERFLOW").availableAmount();return[{kind:"text",name:$e("SERAPH_SUMMON_TIMER"),text:(a==null?void 0:a.toFixed(3))??"N/A",color:a?t.sch.seraph:void 0},{kind:"bar",name:$e("FAERIE_GAUGE"),color:t.sch.faerieGauge,progress:s/100,valueString:s.toFixed(0)},{kind:"counter",name:$e("AETHERFLOW"),color:t.sch.aetherflow,currentStacks:c,maxStacks:3,valueString:c.toFixed(0)}]}}const Pt=(e,t,n)=>{Qe("SCH",e,t,n??{})};Pt("AETHERFLOW",3,{warnOnOvercap:!0});Pt("FAERIE_GAUGE",100);Pt("BIO_II",1,{timeout:30});Pt("CATALYZE",1,{timeout:30});Pt("GALVANIZE",1,{timeout:30});Pt("WHISPERING_DAWN",1,{timeout:21});Pt("ANGELS_WHISPER",1,{timeout:21});Pt("FEY_ILLUMINATION",1,{timeout:20});Pt("SERAPHIC_ILLUMINATION",1,{timeout:20});Pt("SACRED_SOIL_ZONE",1,{timeout:15});Pt("SACRED_SOIL_MIT",1,{timeout:4.96});Pt("EMERGENCY_TACTICS",1,{timeout:15});Pt("DISSIPATION",1,{timeout:30});Pt("EXCOGITATION",1,{timeout:45});Pt("CHAIN_STRATAGEM",1,{timeout:20});Pt("IMPACT_IMMINENT",1,{timeout:30,warnOnTimeout:!0});Pt("BIOLYSIS",1,{timeout:30});Pt("RECITATION",1,{timeout:15});Pt("FEY_UNION",1);Pt("SERAPHIC_VEIL",1,{timeout:30});Pt("PROTRACTION",1,{timeout:10});Pt("EXPEDIENCE",1,{timeout:10});Pt("DESPERATE_MEASURES",1,{timeout:20});Pt("BANEFUL_IMPACTION",1,{timeout:15});Pt("SERAPHISM",1,{timeout:20});Pt("SERAPHISM_REGEN",1,{timeout:5});Pt("SERAPH_SUMMON_TIMER",1,{timeout:22});const pd=.09,Nd=new Map([["FEY_BLESSING",.667],["WHISPERING_DAWN",1.156],["CONSOLATION",.889],["ANGELS_WHISPER",1.029],["AETHERPACT",.668],["FEY_ILLUMINATION",1.205]]);class oF extends Jt{constructor(n){super(n);J(this,"nextEstimatedPetApplication");this.nextEstimatedPetApplication=void 0;const a=this.hasTraitUnlocked("ENHANCED_DEPLOYMENT_TACTICS")?90:120,s=this.hasTraitUnlocked("ENHANCED_RECITATION")?60:90;this.cooldowns.set(new Fe("cd_DEPLOYMENT_TACTICS",a,1,1)),this.cooldowns.set(new Fe("cd_RECITATION",s,1,1)),this.cooldowns.set(new Fe("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:g({en:"Bio/Biolysis DoT",zh:"DoT"}),groupedEffects:[{effectName:"BIO_II",appliedBy:["BIO_II"]},{effectName:"BIOLYSIS",appliedBy:["BIOLYSIS"]}]},{groupedEffects:[{effectName:"BANEFUL_IMPACTION",appliedBy:["BANEFUL_IMPACTION"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHISPERING_DAWN",appliedBy:["WHISPERING_DAWN"]},{effectName:"ANGELS_WHISPER",appliedBy:["WHISPERING_DAWN"]}]},{isHealing:!0,groupedEffects:[{effectName:"SACRED_SOIL_MIT",appliedBy:["SACRED_SOIL"],isGroundTargeted:!0}]},{isHealing:!0,groupedEffects:[{effectName:"SERAPHISM_REGEN",appliedBy:["SERAPHISM"]}]}])}jobSpecificAddHealingBuffCovers(n,a){a.cdName==="cd_GCD"&&((this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&n.addBuff(H.FeyIllumination),this.hasResourceAvailable("DISSIPATION")&&n.addBuff(H.Dissipation)),this.hasResourceAvailable("PROTRACTION")&&n.addBuff(H.Protraction);const s=["ADLOQUIUM","SUCCOR","CONCITATION","EXCOGITATION","INDOMITABILITY"];this.hasResourceAvailable("RECITATION")&&s.includes(a.name)&&n.addBuff(H.Recitation)}jobSpecificAddDamageBuffCovers(n,a){this.hasResourceAvailable("CHAIN_STRATAGEM")&&n.addBuff(H.ChainStratagem)}jobSpecificRegisterRecurringEvents(){const n=()=>new Me("sch special hot ticks",3,()=>{this.hasResourceAvailable("FEY_UNION")&&this.resources.get("FAERIE_GAUGE").available(10)&&this.resources.get("FAERIE_GAUGE").consume(10),this.resources.get("FAERIE_GAUGE").available(10)||this.tryConsumeResource("FEY_UNION"),this.hasResourceAvailable("SACRED_SOIL_ZONE")&&this.gainStatus("SACRED_SOIL_MIT"),this.hasResourceAvailable("SERAPHISM")&&this.gainStatus("SERAPHISM_REGEN"),this.addEvent(n())});this.addEvent(new Me("begin sch special hot ticks",this.hotTickOffset,()=>this.addEvent(n())))}makePetPotency(n,a,s,c){const d=new ln({config:this.config,sourceTime:s,sourceSkill:a,aspect:_e.Other,basePotency:c,snapshotTime:this.getDisplayTime(),description:"",targetCount:n,falloff:void 0}),f=[X.SchPet];return d.modifiers=f,d}queuePetAction(n,a,s,c,d,f){var R;const h=this.getDisplayTime();this.nextEstimatedPetApplication=h+c+d;const m=(R=this.resources.get("SERAPH_SUMMON_TIMER").pendingChange)==null?void 0:R.timeTillEvent;m!==void 0&&this.nextEstimatedPetApplication>m+h&&p.reportWarning({kind:"custom",en:`${ba(a)} is likely to ghost when seraph leaves!`}),this.addEvent(new Me(s+" pet snapshot",c,()=>{const T=f(this);this.addEvent(new Me(s+" application",d,()=>{T(this)}))}))}warnLastPetGhost(){this.nextEstimatedPetApplication!==void 0&&this.nextEstimatedPetApplication>this.getDisplayTime()&&p.reportWarning({kind:"custom",en:"previous pet command is likely to ghost!"})}hasRealFairy(){return!this.hasResourceAvailable("DISSIPATION")&&!this.hasResourceAvailable("SERAPH_SUMMON_TIMER")}maybeChainModifier(){return this.hasResourceAvailable("CHAIN_STRATAGEM")?[X.ChainStrat]:[]}maybeGainFaerieGauge(){this.hasResourceAvailable("DISSIPATION")||this.resources.get("FAERIE_GAUGE").gain(10)}addHealingMagicPotencyModifiers(n){(this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&n.push(X.FeyIllum),this.hasResourceAvailable("DISSIPATION")&&n.push(X.Dissipation)}addHealingActionPotencyModifiers(n){this.hasResourceAvailable("PROTRACTION")&&n.push(X.Protraction)}get statusPropsGenerator(){return new aF(this)}}const vi=(e,t,n)=>ia("SCH",e,t,{...n,castTime:s=>s.config.adjustedCastTime(n.baseCastTime??0),recastTime:s=>s.config.adjustedGCD(2.5),isInstantFn:s=>!n.baseCastTime||s.hasResourceAvailable("SWIFTCAST"),jobPotencyModifiers:s=>s.maybeChainModifier(),jobHealingPotencyModifiers:s=>{if(!n.healingPotency)return[];const c=[];return s.addHealingMagicPotencyModifiers(c),s.addHealingActionPotencyModifiers(c),s.hasResourceAvailable("RECITATION")&&e!=="ACCESSION"&&e!=="MANIFESTATION"&&c.push(X.AutoCrit),c},onConfirm:we(n.baseCastTime?s=>s.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm)}),zi=(e,t,n,a)=>ut("SCH",e,t,n,{...a,jobPotencyModifiers:c=>c.maybeChainModifier(),jobHealingPotencyModifiers:c=>{if(!a.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),c.hasResourceAvailable("RECITATION")&&(e==="INDOMITABILITY"||e==="EXCOGITATION")&&d.push(X.AutoCrit),d}}),ql=(e,t,n,a)=>qe("SCH",e,t,n,a),oy=[{newSkill:"ADLOQUIUM",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"MANIFESTATION",condition:e=>e.hasResourceAvailable("SERAPHISM")}],ly=[{newSkill:"CONCITATION",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"ACCESSION",condition:e=>e.hasResourceAvailable("SERAPHISM")}];vi("BROIL_II",64,{autoUpgrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_III"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:240});vi("BROIL_III",72,{autoDowngrade:{otherSkill:"BROIL_II",trait:"BROIL_MASTERY_III"},autoUpgrade:{otherSkill:"BROIL_IV",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:255});vi("BROIL_IV",82,{autoDowngrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:[["NEVER",295],["TACTICIANS_MASTERY",320]]});vi("BIO_II",26,{autoUpgrade:{otherSkill:"BIOLYSIS",trait:"CORRUPTION_MASTERY_II"},applicationDelay:1.15,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIO_II",skillName:"BIO_II",tickPotency:40,speedStat:"sps",modifiers:e.maybeChainModifier()})},onApplication:(e,t)=>e.applyDoT("BIO_II",t)});vi("BIOLYSIS",72,{autoDowngrade:{otherSkill:"BIO_II",trait:"CORRUPTION_MASTERY_II"},applicationDelay:.67,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIOLYSIS",skillName:"BIOLYSIS",tickPotency:e.hasTraitUnlocked("TACTICIANS_MASTERY")?85:70,speedStat:"sps",modifiers:e.maybeChainModifier()})},onApplication:(e,t)=>e.applyDoT("BIOLYSIS",t)});vi("RUIN_II",38,{applicationDelay:.94,potency:[["NEVER",200],["BROIL_MASTERY_IV",220]],baseCastTime:0,manaCost:400});vi("ART_OF_WAR",46,{autoUpgrade:{otherSkill:"ART_OF_WAR_II",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:165,falloff:0});vi("ART_OF_WAR_II",82,{autoDowngrade:{otherSkill:"ART_OF_WAR",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:180,falloff:0});ql("CHAIN_STRATAGEM",66,"cd_CHAIN_STRATAGEM",{replaceIf:[{newSkill:"BANEFUL_IMPACTION",condition:e=>e.hasResourceAvailable("IMPACT_IMMINENT")}],rscType:"CHAIN_STRATAGEM",applicationDelay:.8,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_CHAIN_STRATAGEM")&&e.gainStatus("IMPACT_IMMINENT")}});zi("BANEFUL_IMPACTION",92,"cd_BANEFUL_IMPACTION",{startOnHotbar:!1,applicationDelay:1.29,cooldown:1,falloff:0,highlightIf:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),validateAttempt:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),onConfirm:(e,t)=>{e.tryConsumeResource("IMPACT_IMMINENT"),e.addDoTPotencies({node:t,effectName:"BANEFUL_IMPACTION",skillName:"BANEFUL_IMPACTION",tickPotency:140,speedStat:"sps",modifiers:e.maybeChainModifier()})},onApplication:(e,t)=>e.applyDoT("BANEFUL_IMPACTION",t)});zi("ENERGY_DRAIN",45,"cd_ENERGY_DRAIN",{applicationDelay:1.07,cooldown:1,potency:100,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});const lF=900,sy=900;vi("ADLOQUIUM",30,{replaceIf:oy,applicationDelay:.98,baseCastTime:2,manaCost:e=>e.hasResourceAvailable("RECITATION")?0:lF,healingPotency:300,onConfirm:e=>{const t=e.tryConsumeResource("EMERGENCY_TACTICS");t||e.gainStatus("GALVANIZE"),(e.tryConsumeResource("RECITATION")||e.triggersEffect(e.config.critRate))&&!t&&e.gainStatus("CATALYZE")}});const ry=e=>{e.tryConsumeResource("EMERGENCY_TACTICS")||e.gainStatus("GALVANIZE")};vi("SUCCOR",35,{autoUpgrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},applicationDelay:1.12,baseCastTime:2,manaCost:e=>e.hasResourceAvailable("RECITATION")?0:sy,healingPotency:200,onConfirm:ry});vi("CONCITATION",96,{autoDowngrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},replaceIf:ly,applicationDelay:1.12,baseCastTime:2,manaCost:e=>e.hasResourceAvailable("RECITATION")?0:sy,healingPotency:200,onConfirm:ry});vi("PHYSICK",4,{applicationDelay:1.03,healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],baseCastTime:1.5,manaCost:300});vi("RESURRECTION",12,{applicationDelay:.98,baseCastTime:8,manaCost:2400});zi("AETHERFLOW",45,"cd_AETHERFLOW",{applicationDelay:0,cooldown:60,requiresCombat:!0,onConfirm:e=>{e.resources.get("MANA").gain(2e3),e.resources.get("AETHERFLOW").gain(3)}});ql("DISSIPATION",60,"cd_DISSIPATION",{rscType:"DISSIPATION",applicationDelay:0,cooldown:180,requiresCombat:!0,validateAttempt:e=>!e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:e=>{e.warnLastPetGhost(),e.resources.get("AETHERFLOW").gain(3),e.tryConsumeResource("SERAPHISM")}});zi("LUSTRATE",45,"cd_LUSTRATE",{applicationDelay:.62,cooldown:1,healingPotency:600,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});ql("SACRED_SOIL",50,"cd_SACRED_SOIL",{rscType:"SACRED_SOIL_ZONE",applicationDelay:.62,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:(e,t)=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW"),e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&e.addHoTPotencies({node:t,skillName:"SACRED_SOIL",effectName:"SACRED_SOIL_MIT",speedStat:"sps",tickPotency:100},34.96+.62)},onApplication:(e,t)=>{e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&(e.applyHoT("SACRED_SOIL_MIT",t,34.96),e.gainStatus("SACRED_SOIL_MIT"))}});ql("EXCOGITATION",62,"cd_EXCOGITATION",{rscType:"EXCOGITATION",applicationDelay:.8,cooldown:45,healingPotency:800,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});zi("INDOMITABILITY",52,"cd_INDOMITABILITY",{applicationDelay:.62,cooldown:30,healingPotency:400,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});zi("WHISPERING_DAWN",20,"cd_WHISPERING_DAWN",{applicationDelay:0,cooldown:60,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const n=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"ANGELS_WHISPER":"WHISPERING_DAWN",a=s=>(s.addHoTPotencies({node:t,skillName:"WHISPERING_DAWN",effectName:n,speedStat:"sps",tickPotency:80}),c=>{c.applyHoT(n,t),t.getHotPotencies("WHISPERING_DAWN").forEach(d=>{d.modifiers.includes(X.SchPet)||d.modifiers.push(X.SchPet)}),c.gainStatus(n)});e.queuePetAction(t,"WHISPERING_DAWN",n,pd,Nd.get(n),a)}});zi("FEY_ILLUMINATION",40,"cd_FEY_ILLUMINATION",{applicationDelay:0,cooldown:120,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const n=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"SERAPHIC_ILLUMINATION":"FEY_ILLUMINATION",a=s=>c=>c.gainStatus(n);e.queuePetAction(t,"FEY_ILLUMINATION","FEY_ILLUMINATION",pd,Nd.get("FEY_ILLUMINATION"),a)}});zi("DEPLOYMENT_TACTICS",56,"cd_DEPLOYMENT_TACTICS",{applicationDelay:.89,cooldown:120});ql("EMERGENCY_TACTICS",58,"cd_EMERGENCY_TACTICS",{rscType:"EMERGENCY_TACTICS",applicationDelay:0,cooldown:15});zi("AETHERPACT",70,"cd_AETHERPACT",{replaceIf:[{newSkill:"DISSOLVE_UNION",condition:e=>e.hasResourceAvailable("FEY_UNION")}],applicationDelay:0,cooldown:3,validateAttempt:e=>e.resources.get("FAERIE_GAUGE").available(10)&&e.hasRealFairy(),onConfirm:(e,t)=>{e.gainStatus("FEY_UNION");const n=a=>s=>s.gainStatus("FEY_UNION");e.queuePetAction(t,"AETHERPACT","AETHERPACT",pd,Nd.get("AETHERPACT"),n)}});zi("DISSOLVE_UNION",70,"cd_DISSOLVE_UNION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("FEY_UNION"),onConfirm:e=>e.tryConsumeResource("FEY_UNION")});ql("RECITATION",74,"cd_RECITATION",{rscType:"RECITATION",applicationDelay:0,cooldown:90});zi("FEY_BLESSING",76,"cd_FEY_BLESSING",{applicationDelay:0,cooldown:60,healingPotency:320,validateAttempt:e=>e.hasRealFairy(),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const n=a=>{const s=a.makePetPotency(t.healTargetCount,"FEY_BLESSING",a.getDisplayTime(),320);return a.addHealingActionPotencyModifiers(s.modifiers),c=>p.resolveHealingPotency(s)};e.queuePetAction(t,"FEY_BLESSING","FEY_BLESSING",pd,Nd.get("FEY_BLESSING"),n)}});zi("SUMMON_SERAPH",80,"cd_SUMMON_SERAPH",{replaceIf:[{newSkill:"CONSOLATION",condition:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER")}],applicationDelay:0,cooldown:120,validateAttempt:e=>e.hasRealFairy(),onConfirm:e=>{e.warnLastPetGhost(),e.gainStatus("SERAPH_SUMMON_TIMER"),e.tryConsumeResource("FEY_UNION")}});zi("CONSOLATION",80,"cd_CONSOLATION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,secondaryCooldown:{cdName:"cd_CONSOLATION_INTERNAL",cooldown:30,maxCharges:2},healingPotency:250,validateAttempt:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:(e,t)=>{const n=a=>{const s=a.makePetPotency(t.healTargetCount,"CONSOLATION",a.getDisplayTime(),250);return c=>{c.gainStatus("SERAPHIC_VEIL"),p.resolveHealingPotency(s)}};e.queuePetAction(t,"CONSOLATION","CONSOLATION",pd,Nd.get("CONSOLATION"),n)}});ql("PROTRACTION",86,"cd_PROTRACTION",{rscType:"PROTRACTION",applicationDelay:.76,cooldown:60});zi("EXPEDIENT",90,"cd_EXPEDIENT",{applicationDelay:0,cooldown:120,onConfirm:e=>{e.gainStatus("EXPEDIENCE"),e.gainStatus("DESPERATE_MEASURES")}});ql("SERAPHISM",100,"cd_SERAPHISM",{requiresCombat:!0,rscType:"SERAPHISM",applicationDelay:0,cooldown:180,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{const n=e.cooldowns.get("cd_EMERGENCY_TACTICS");n.restore(15),e.cooldowns.set(new Fe("cd_EMERGENCY_TACTICS",1,1,1)),e.addEvent(new Me("restore etact cd",e.getStatusDuration("SERAPHISM"),()=>e.cooldowns.set(n))),e.addHoTPotencies({node:t,skillName:"SERAPHISM",effectName:"SERAPHISM_REGEN",speedStat:"sps",tickPotency:100},24.96)},onApplication:(e,t)=>{e.applyHoT("SERAPHISM_REGEN",t,24.96),e.gainStatus("SERAPHISM_REGEN")}});vi("MANIFESTATION",100,{startOnHotbar:!1,replaceIf:oy,applicationDelay:1.16,healingPotency:360,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>{e.tryConsumeResource("EMERGENCY_TACTICS")||(e.gainStatus("GALVANIZE"),e.triggersEffect(e.config.critRate)&&e.gainStatus("CATALYZE"))}});vi("ACCESSION",100,{startOnHotbar:!1,replaceIf:ly,applicationDelay:.98,healingPotency:240,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>!e.tryConsumeResource("EMERGENCY_TACTICS")&&e.gainStatus("GALVANIZE")});Object.keys(fS).forEach(e=>Wt(e,`WHM/${Ye[e].name}.png`));const cy=["AERO_II","DIA"],sF=Object.keys(fS).filter(e=>!cy.includes(e));class rF extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[...cy.map(t=>this.makeCommonTimer(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...sF.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,a=n.get("LILLIES"),s=n.get("LILY_TIMER").available(1)?n.timeTillReady("LILY_TIMER"):20,c=a.availableAmount(),d=n.get("BLOOD_LILY").availableAmount(),f=[{kind:"bar",name:$e("LILY_TIMER"),color:t.whm.lily,progress:1-s/20,valueString:s.toFixed(3)},{kind:"counter",name:$e("LILLIES"),color:t.whm.lily,currentStacks:c,maxStacks:3}];return this.state.hasTraitUnlocked("TRANSCENDENT_AFFLATUS")&&f.push({kind:"counter",name:$e("BLOOD_LILY"),color:t.whm.blood,currentStacks:d,maxStacks:3}),f}}const pn=(e,t,n)=>{Qe("WHM",e,t,n??{})};pn("LILLIES",3,{default:3});pn("LILY_TIMER",1);pn("BLOOD_LILY",3,{default:3,warnOnOvercap:!0});pn("FREECURE",1,{timeout:15});pn("PRESENCE_OF_MIND",1,{timeout:15});pn("SACRED_SIGHT",3,{timeout:30,warnOnTimeout:!0});pn("REGEN",1,{timeout:18});pn("AERO_II",1,{timeout:30});pn("MEDICA_II",1,{timeout:15});pn("ASYLUM",1,{timeout:24});pn("THIN_AIR",1,{timeout:12});pn("DIVINE_BENISON",1,{timeout:15});pn("CONFESSION",1,{timeout:10});pn("DIA",1,{timeout:30});pn("TEMPERANCE",1,{timeout:20});pn("DIVINE_GRACE",1,{timeout:30});pn("AQUAVEIL",1,{timeout:8});pn("LITURGY_OF_THE_BELL",5,{timeout:20});pn("MEDICA_III",1,{timeout:15});pn("DIVINE_CARESS",1,{timeout:10});pn("DIVINE_AURA",1,{timeout:15});class cF extends Jt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_DIVINE_BENISON")?2:1,a=this.hasTraitUnlocked("ENHANCED_TETRAGRAMMATON")?2:1;this.cooldowns.set(new Fe("cd_DIVINE_BENISON",30,n,n)),this.cooldowns.set(new Fe("cd_TETRAGRAMMATON",60,a,a)),this.cooldowns.set(new Fe("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:g({en:"Dia/Aero DoT",zh:"/DoT"}),groupedEffects:[{effectName:"AERO_II",appliedBy:["AERO_II"]},{effectName:"DIA",appliedBy:["DIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"DIVINE_AURA",appliedBy:["DIVINE_CARESS"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASYLUM",appliedBy:["ASYLUM"]}]},{isHealing:!0,groupedEffects:[{effectName:"REGEN",appliedBy:["REGEN"]}]},{isHealing:!0,groupedEffects:[{effectName:"MEDICA_II",appliedBy:["MEDICA_II"]},{effectName:"MEDICA_III",appliedBy:["MEDICA_III"]}]}])}jobSpecificRegisterRecurringEvents(){(this.isInCombat()||this.hasResourceAvailable("LILY_TIMER"))&&!this.hasResourceAvailable("LILLIES",3)&&this.startLilyTimer()}jobSpecificAddHealingBuffCovers(t,n){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.addBuff(H.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.addBuff(H.Temperance),n.cdName==="cd_GCD"&&n.aoeHeal&&this.hasResourceAvailable("CONFESSION")&&t.addBuff(H.Confession)}recurringLilyGain(){this.resources.addResourceEvent({rscType:"LILY_TIMER",name:"gain lily",delay:20,fnOnRsc:()=>{this.resources.get("LILLIES").gain(1),this.hasResourceAvailable("LILLIES",3)?this.tryConsumeResource("LILY_TIMER"):this.recurringLilyGain()}})}startLilyTimer(){this.hasResourceAvailable("LILY_TIMER")||this.hasResourceAvailable("LILLIES",3)||(this.resources.get("LILY_TIMER").gain(1),this.recurringLilyGain())}addHealingActionPotencyModifiers(t){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.push(X.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.push(X.Temperance)}get statusPropsGenerator(){return new rF(this)}}const Un=(e,t,n)=>{const a=s=>{if(!n.healingPotency)return[];const c=[];return s.hasResourceAvailable("CONFESSION")&&n.aoeHeal&&c.push(X.Confession),s.addHealingActionPotencyModifiers(c),c};return ia("WHM",e,t,{...n,castTime:s=>s.config.adjustedCastTime(n.baseCastTime??0,s.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),recastTime:s=>s.config.adjustedGCD(2.5,s.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),isInstantFn:s=>!n.baseCastTime||s.hasResourceAvailable("SWIFTCAST"),manaCost:n.manaCost?s=>s.hasResourceAvailable("THIN_AIR")?0:Ii(n.manaCost)(s):void 0,jobHealingPotencyModifiers:a,onConfirm:we(s=>s.tryConsumeResource("THIN_AIR"),n.baseCastTime?s=>s.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm),onApplication:we(n.potency||e=="AFFLATUS_SOLACE"||e=="AFFLATUS_RAPTURE"?s=>s.startLilyTimer():void 0,n.onApplication)})},tr=(e,t,n,a)=>ut("WHM",e,t,n,{...a,jobHealingPotencyModifiers:c=>{if(!a.healingPotency)return[];const d=[];return a.isPetHeal&&d.push(X.WhmPet),c.addHealingActionPotencyModifiers(d),d}}),Zl=(e,t,n,a)=>qe("WHM",e,t,n,{...a,jobHealingPotencyModifiers:c=>{if(!a.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),d}});Un("STONE_IV",64,{autoUpgrade:{otherSkill:"GLARE",trait:"STONE_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,potency:260,manaCost:400});Un("GLARE",72,{autoDowngrade:{otherSkill:"STONE_IV",trait:"STONE_MASTERY_IV"},autoUpgrade:{otherSkill:"GLARE_III",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:290,manaCost:400});Un("GLARE_III",82,{autoDowngrade:{otherSkill:"GLARE",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:[["NEVER",310],["WHITE_MAGIC_MASTERY",350]],manaCost:400});Un("AERO_II",46,{autoUpgrade:{otherSkill:"DIA",trait:"AERO_MASTERY_II"},applicationDelay:1.15,potency:50,manaCost:200,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"AERO_II",skillName:"AERO_II",tickPotency:50,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("AERO_II",t)});Un("DIA",72,{autoDowngrade:{otherSkill:"AERO_II",trait:"AERO_MASTERY_II"},applicationDelay:1.29,potency:[["NEVER",65],["WHITE_MAGIC_MASTERY",85]],manaCost:400,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"DIA",skillName:"DIA",tickPotency:e.hasTraitUnlocked("WHITE_MAGIC_MASTERY")?85:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("DIA",t)});Un("HOLY",45,{autoUpgrade:{otherSkill:"HOLY_III",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:140,baseCastTime:1.5,falloff:0,manaCost:400});Un("HOLY_III",82,{autoDowngrade:{otherSkill:"HOLY",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:150,baseCastTime:1.5,falloff:0,manaCost:400});Un("AFFLATUS_MISERY",74,{applicationDelay:.58,potency:[["NEVER",1240],["WHITE_MAGIC_MASTERY",1400]],falloff:.5,manaCost:0,highlightIf:e=>e.hasResourceExactly("BLOOD_LILY",3),validateAttempt:e=>e.hasResourceExactly("BLOOD_LILY",3),onConfirm:e=>e.tryConsumeResource("BLOOD_LILY",!0)});Un("AFFLATUS_SOLACE",52,{applicationDelay:.53,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});Un("AFFLATUS_RAPTURE",76,{applicationDelay:.58,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],manaCost:0,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});Un("REGEN",35,{applicationDelay:1.02,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"REGEN",effectName:"REGEN",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200})},onApplication:(e,t)=>{e.applyHoT("REGEN",t),e.gainStatus("REGEN")}});Un("CURE",2,{applicationDelay:1.03,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],baseCastTime:1.5,manaCost:400,onConfirm:e=>e.maybeGainProc("FREECURE",.15)});Un("CURE_II",30,{applicationDelay:.98,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],baseCastTime:2,manaCost:e=>e.hasResourceAvailable("FREECURE")?0:1e3,highlightIf:e=>e.hasResourceAvailable("FREECURE"),onConfirm:e=>e.tryConsumeResource("FREECURE")});Un("CURE_III",40,{applicationDelay:.98,healingPotency:[["NEVER",550],["ENHANCED_HEALING_MAGIC",600]],baseCastTime:2,manaCost:1500,aoeHeal:!0});Un("MEDICA",10,{applicationDelay:1.02,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],baseCastTime:2,manaCost:900,aoeHeal:!0});Un("MEDICA_II",50,{autoUpgrade:{otherSkill:"MEDICA_III",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_II",effectName:"MEDICA_II",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100})},onApplication:(e,t)=>{e.applyHoT("MEDICA_II",t),e.gainStatus("MEDICA_II")}});Un("MEDICA_III",96,{autoDowngrade:{otherSkill:"MEDICA_II",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:250,baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_III",effectName:"MEDICA_III",speedStat:"sps",tickPotency:175})},onApplication:(e,t)=>{e.applyHoT("MEDICA_III",t),e.gainStatus("MEDICA_III")}});Un("RAISE",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.16});tr("ASSIZE",56,"cd_ASSIZE",{applicationDelay:.67,cooldown:40,potency:400,falloff:0,healingPotency:400,onApplication:e=>e.resources.get("MANA").gain(500)});Zl("PRESENCE_OF_MIND",30,"cd_PRESENCE_OF_MIND",{rscType:"PRESENCE_OF_MIND",applicationDelay:.53,cooldown:120,replaceIf:[{newSkill:"GLARE_IV",condition:e=>e.hasResourceAvailable("SACRED_SIGHT")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_PRESENCE_OF_MIND")&&e.gainStatus("SACRED_SIGHT",3)}});Un("GLARE_IV",92,{startOnHotbar:!1,applicationDelay:.85,potency:640,falloff:.4,manaCost:0,highlightIf:e=>e.hasResourceAvailable("SACRED_SIGHT"),validateAttempt:e=>e.hasResourceAvailable("SACRED_SIGHT"),onConfirm:e=>e.tryConsumeResource("SACRED_SIGHT")});Zl("THIN_AIR",58,"cd_THIN_AIR",{rscType:"THIN_AIR",applicationDelay:0,cooldown:60,maxCharges:2});tr("AETHERIAL_SHIFT",40,"cd_AETHERIAL_SHIFT",{applicationDelay:0,cooldown:60,animationLock:$t});Zl("DIVINE_BENISON",66,"cd_DIVINE_BENISON",{rscType:"DIVINE_BENISON",applicationDelay:.8,cooldown:30,maxCharges:2});Zl("AQUAVEIL",86,"cd_AQUAVEIL",{rscType:"AQUAVEIL",applicationDelay:.62,cooldown:60});tr("TETRAGRAMMATON",60,"cd_TETRAGRAMMATON",{applicationDelay:.53,cooldown:60,maxCharges:2,healingPotency:700});tr("BENEDICTION",50,"cd_BENEDICTION",{applicationDelay:.62,cooldown:180});tr("ASYLUM",52,"cd_ASYLUM",{applicationDelay:.85,cooldown:90,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASYLUM",effectName:"ASYLUM",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("ASYLUM")});Zl("PLENARY_INDULGENCE",70,"cd_PLENARY_INDULGENCE",{rscType:"CONFESSION",applicationDelay:.8,cooldown:60});Zl("TEMPERANCE",80,"cd_TEMPERANCE",{rscType:"TEMPERANCE",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"DIVINE_CARESS",condition:e=>e.hasResourceAvailable("DIVINE_GRACE")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEMPERANCE")&&e.gainStatus("DIVINE_GRACE")}});Zl("LITURGY_OF_THE_BELL",90,"cd_LITURGY_OF_THE_BELL",{rscType:"LITURGY_OF_THE_BELL",applicationDelay:0,cooldown:180,replaceIf:[{newSkill:"LITURGY_POP",condition:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL")}]});tr("LITURGY_TRIGGER",90,"cd_LITURGY_TRIGGER",{applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:425,animationLock:Ni,validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL")});tr("LITURGY_POP",90,"cd_LITURGY_POP",{startOnHotbar:!1,applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:e=>212*e.resources.get("LITURGY_OF_THE_BELL").availableAmount(),validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL",!0)});Zl("DIVINE_CARESS",100,"cd_DIVINE_CARESS",{startOnHotbar:!1,rscType:"DIVINE_CARESS",applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DIVINE_GRACE"),highlightIf:e=>e.hasResourceAvailable("DIVINE_GRACE"),onConfirm:e=>e.tryConsumeResource("DIVINE_GRACE"),onApplication:e=>{e.resources.addResourceEvent({rscType:"DIVINE_CARESS",name:"trigger divine aura on divine caress expiry",delay:10,fnOnRsc:()=>e.gainStatus("DIVINE_AURA")})}});Object.keys(nS).forEach(e=>Wt(e,`NIN/${Ye[e].name}.png`));const uy=["DOKUMORI","TRICK_ATTACK","KUNAIS_BANE"],uF=Object.keys(nS).filter(e=>!uy.includes(e));class dF extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[...uy.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return uF.map(t=>t==="HIDDEN"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var m,R;const n=this.state.resources,a=n.get("NIN_COMBO_TRACKER"),s=n.get("NIN_AOE_COMBO_TRACKER"),c=n.get("KAZEMATOI").availableAmount(),d=n.get("NINKI").availableAmount(),f=a.available(1)?(m=a.pendingChange)==null?void 0:m.timeTillEvent:s.available(1)?(R=s.pendingChange)==null?void 0:R.timeTillEvent:void 0;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.nin.ninComboTimer,progress:f?f/30:0,valueString:(f==null?void 0:f.toFixed(3))??"N/A"},{kind:"counter",name:$e("KAZEMATOI"),color:t.nin.kazematoi,currentStacks:c,maxStacks:5},{kind:"bar",name:$e("NINKI"),color:t.nin.ninki,progress:d/100,valueString:d.toFixed(0)}]}}const An=(e,t,n)=>{Qe("NIN",e,t,n??{})};An("KAZEMATOI",5,{warnOnOvercap:!0});An("NINKI",100,{warnOnOvercap:!0});An("SHADE_SHIFT",1,{timeout:20});An("MUDRA",1,{timeout:6});An("HIDDEN",1);An("TRICK_ATTACK",1,{timeout:15.77});An("KASSATSU",1,{timeout:15,warnOnTimeout:!0});An("DOKUMORI",1,{timeout:21});An("TENRI_JINDO_READY",1,{timeout:30,warnOnTimeout:!0});An("TEN_CHI_JIN",1,{timeout:6});An("MEISUI",1,{timeout:30});An("SHADOW_WALKER",1,{timeout:20});An("BUNSHIN",5,{timeout:30,warnOnTimeout:!0});An("PHANTOM_KAMAITACHI_READY",1,{timeout:45,warnOnTimeout:!0});An("RAIJU_READY",3,{timeout:30,warnOnTimeout:!0});An("KUNAIS_BANE",1,{timeout:16.25});An("HIGI",1,{timeout:30});An("DOTON",1,{timeout:18});An("NIN_COMBO_TRACKER",2,{timeout:30});An("NIN_AOE_COMBO_TRACKER",1,{timeout:30});An("MUDRA_TRACKER",1e4);An("BUNNY",1);const hF=["SPINNING_EDGE","GUST_SLASH","AEOLIAN_EDGE","ARMOR_CRUSH","THROWING_DAGGER","DEATH_BLOSSOM","HAKKE_MUJINSATSU","FORKED_RAIJU","FLEETING_RAIJU"];class fF extends Jt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SHUKUCHI_II")?2:1;this.cooldowns.set(new Fe("cd_SHUKUCHI",60,n,n)),this.registerRecurringEvents([{groupedEffects:[{effectName:"DOTON",appliedBy:["DOTON","DOTON_CHI"],isGroundTargeted:!0}]}])}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("DOKUMORI")&&t.addBuff(H.Dokumori),this.hasResourceAvailable("TRICK_ATTACK")&&t.addBuff(H.TrickAttack),this.hasResourceAvailable("KUNAIS_BANE")&&t.addBuff(H.KunaisBane),this.hasResourceAvailable("BUNSHIN")&&hF.includes(n.name)&&t.addBuff(H.Bunshin)}inherentSpeedModifier(){return 15}get statusPropsGenerator(){return new dF(this)}stackRaijuReady(){this.resources.get("RAIJU_READY").gain(1),this.enqueueResourceDrop("RAIJU_READY")}gainNinki(t){this.resources.get("NINKI").gain(t)}processComboStatus(t){if(["THROWING_DAGGER","FORKED_RAIJU","FLEETING_RAIJU","PHANTOM_KAMAITACHI"].includes(t))return;let n=[this.resources.get("NIN_COMBO_TRACKER").availableAmount(),this.resources.get("NIN_AOE_COMBO_TRACKER").availableAmount()];t==="SPINNING_EDGE"?n=[1,0]:t==="GUST_SLASH"&&n[0]===1?n=[2,0]:t==="DEATH_BLOSSOM"?n=[0,1]:n=[0,0],this.setComboState("NIN_COMBO_TRACKER",n[0]),this.setComboState("NIN_AOE_COMBO_TRACKER",n[1])}parseMudraTracker(){if(this.hasResourceAvailable("BUNNY"))return;const t=this.resources.get("MUDRA_TRACKER").availableAmount();if(t===0)return[];if(t<10)return console.assert(t<4,`mudra tracker value ${t} was invalid`),[t];if(t<100)return console.assert(t%10!==0,`mudra tracker value ${t} was invalid`),[Math.floor(t/10),t%10];if(t<1e3)return[Math.floor(t/100),Math.floor(t/10)%10,t%10]}isMudraTrackerIn(t){const n=this.parseMudraTracker();return n!==void 0&&t.some(a=>n.length===a.length&&n.every((s,c)=>a[c]===s))}clearMudraInfo(){this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)}pushMudra(t,n){const a=this.resources.get("MUDRA_TRACKER"),s=a.availableAmount();if(s===0&&!n&&(console.assert(this.resources.get("MUDRA_TRACKER").availableAmount()===0),console.assert(this.resources.get("BUNNY").availableAmount()===0),this.gainStatus("MUDRA"),this.resources.get("MUDRA").removeTimer(),this.resources.addResourceEvent({rscType:"MUDRA",name:"clear mudra tracker/bunny",delay:Vt("NIN","MUDRA").maxTimeout,fnOnRsc:()=>this.clearMudraInfo()})),s>1e3)return;const c=s*10+t;a.overrideCurrentValue(c),n&&c>100&&(this.tryConsumeResource("TEN_CHI_JIN"),this.clearMudraInfo())}}const KC=e=>!e.hasResourceAvailable("TEN_CHI_JIN"),oI=e=>{e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")},lI=e=>e===void 0?KC:t=>KC(t)&&e(t),kc=(e,t)=>{e.hasResourceAvailable("DOKUMORI")&&t.push(X.Dokumori),e.hasResourceAvailable("TRICK_ATTACK")&&t.push(X.TrickAttack),e.hasResourceAvailable("KUNAIS_BANE")&&t.push(X.KunaisBane)},To=(e,t,n)=>cn("NIN",e,t,{...n,recastTime:a=>a.config.adjustedSksGCD(2.5,a.inherentSpeedModifier()),validateAttempt:lI(n.validateAttempt),onConfirm:we(oI,(a,s)=>{var c;return(c=n.onConfirm)==null?void 0:c.call(n,a,s)},a=>{e!=="PHANTOM_KAMAITACHI"&&a.tryConsumeResource("BUNSHIN")&&a.gainNinki(5)},["THROWING_DAGGER","PHANTOM_KAMAITACHI","FORKED_RAIJU","FLEETING_RAIJU"].includes(e)?void 0:a=>a.tryConsumeResource("RAIJU_READY",!0)&&p.reportWarning({kind:"overwrite",rsc:"RAIJU_READY"}),a=>a.processComboStatus(e)),jobPotencyModifiers:a=>{var c;const s=((c=n.jobPotencyModifiers)==null?void 0:c.call(n,a))??[];return a.hasResourceAvailable("BUNSHIN")&&e!=="PHANTOM_KAMAITACHI"&&(e==="DEATH_BLOSSOM"||e==="HAKKE_MUJINSATSU"?s.push(X.BunshinAOE):s.push(X.BunshinST)),kc(a,s),s}}),So=(e,t,n,a)=>ut("NIN",e,t,n,{...a,validateAttempt:lI(a.validateAttempt),onConfirm:we(oI,(s,c)=>{var d;return(d=a.onConfirm)==null?void 0:d.call(a,s,c)}),jobPotencyModifiers:s=>{var d;const c=((d=a.jobPotencyModifiers)==null?void 0:d.call(a,s))??[];return kc(s,c),c}}),Cd=(e,t,n,a)=>qe("NIN",e,t,n,{...a,validateAttempt:lI(a.validateAttempt),onConfirm:we(oI,(s,c)=>{var d;return(d=a.onConfirm)==null?void 0:d.call(a,s,c)})});To("THROWING_DAGGER",15,{applicationDelay:.62,potency:[["NEVER",120],["MELEE_MASTERY_II_NIN",200]],onConfirm:e=>e.gainNinki(5)});To("SPINNING_EDGE",1,{applicationDelay:.4,potency:[["NEVER",180],["MELEE_MASTERY_II_NIN",220],["MELEE_MASTERY_III_NIN",300]],onConfirm:e=>e.gainNinki(5)});To("GUST_SLASH",4,{applicationDelay:.4,potency:[["NEVER",100],["MELEE_MASTERY_NIN",120],["MELEE_MASTERY_II_NIN",160],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_NIN",280],["MELEE_MASTERY_II_NIN",320],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1)&&e.gainNinki(5)});const dy=e=>e.gainNinki(e.hasTraitUnlocked("SHUKIHO_III")?15:e.hasTraitUnlocked("SHUKIHO_II")?10:5);To("AEOLIAN_EDGE",26,{applicationDelay:.54,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",220]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",280]],comboPotency:[["NEVER",400],["MELEE_MASTERY_III_NIN",460]],location:"rear"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:dy,jobPotencyModifiers:e=>e.tryConsumeResource("KAZEMATOI")?[X.Kazematoi]:[]});To("ARMOR_CRUSH",54,{applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_NIN",360],["MELEE_MASTERY_III_NIN",440]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",300]],comboPotency:[["NEVER",380],["MELEE_MASTERY_NIN",420],["MELEE_MASTERY_III_NIN",500]],location:"flank"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:we(e=>{e.hasResourceExactly("NIN_COMBO_TRACKER",2)&&e.resources.get("KAZEMATOI").gain(2)},dy)});To("DEATH_BLOSSOM",38,{applicationDelay:.71,potency:100,falloff:0,onConfirm:e=>e.gainNinki(5)});To("HAKKE_MUJINSATSU",52,{applicationDelay:.62,potency:100,combo:{potency:120,resource:"NIN_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.gainNinki(5),jobPotencyModifiers:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.hasResourceAvailable("DOTON")?[X.HollowNozuchi]:[]});const sc=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[]]),hy=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[2],[3]]),fy=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[3]]),Ey=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[2]]),my=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[3,2],[2,3]]),Ay=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,3],[3,1]]),Ry=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,2],[2,1]]),Ty=[{newSkill:"TEN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_TEN",condition:sc},{newSkill:"KATON_TEN",condition:hy},{newSkill:"HUTON_TEN",condition:my}],sI=[{newSkill:"CHI",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_CHI",condition:sc},{newSkill:"RAITON_CHI",condition:fy},{newSkill:"DOTON_CHI",condition:Ay}],Sy=[{newSkill:"JIN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_JIN",condition:sc},{newSkill:"HYOTON_JIN",condition:Ey},{newSkill:"SUITON_JIN",condition:Ry}],Iy=[["FUMA_SHURIKEN",30,.89,[["NEVER",450],["MELEE_MASTERY_III_NIN",500]],void 0],["KATON",35,.94,350,0],["RAITON",35,.71,[["NEVER",650],["MELEE_MASTERY_III_NIN",740]],void 0],["HYOTON",45,1.16,350,void 0],["HUTON",45,.98,240,0],["SUITON",45,.98,[["NEVER",500],["MELEE_MASTERY_III_NIN",580]],void 0],["GOKA_MEKKYAKU",76,.76,850,0],["HYOSHO_RANRYU",76,.62,1300,void 0]],EF=new Map(Iy.map(([e,t,n,a,s])=>[e,[t,n,a,s]])),mF=[["FUMA_SHURIKEN_TEN",sc],["FUMA_SHURIKEN_CHI",sc],["FUMA_SHURIKEN_JIN",sc],["KATON_TEN",hy],["RAITON_CHI",fy],["HYOTON_JIN",Ey],["HUTON_TEN",my],["SUITON_JIN",Ry]];mF.forEach(([e,t])=>{const[,n,a,s]=EF.get(e.substring(0,e.length-4)),c=e.substring(e.length-3);cn("NIN",e,70,{startOnHotbar:!1,applicationDelay:n,recastTime:e==="HUTON_TEN"||e==="SUITON_JIN"?1.5:1,potency:a,falloff:s,replaceIf:c==="TEN"?Ty:c==="CHI"?sI:Sy,validateAttempt:t,jobPotencyModifiers:f=>{const h=[];return kc(f,h),e==="KATON"&&f.hasResourceAvailable("DOTON")&&h.push(X.HollowNozuchi),h},onConfirm:we(f=>f.pushMudra(c==="TEN"?1:c==="CHI"?2:3,!0),e==="RAITON_CHI"?f=>f.stackRaijuReady():e==="SUITON_JIN"||e==="HUTON_TEN"?f=>f.gainStatus("SHADOW_WALKER"):void 0)})});const _y=(e,t)=>{e.applyDoT("DOTON",t),e.gainStatus("DOTON")};cn("NIN","DOTON_CHI",70,{startOnHotbar:!1,recastTime:1.5,replaceIf:sI,falloff:0,validateAttempt:Ay,jobPotencyModifiers:e=>{const t=[];return kc(e,t),t},onConfirm:we((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.pushMudra(2,!0)),onApplication:_y});[["TEN",30,Ty],["CHI",35,sI],["JIN",45,Sy]].forEach(([e,t,n],a)=>{cn("NIN",e,t,{recastTime:.5,animationLock:.5,replaceIf:n,secondaryCooldown:{cdName:"cd_MUDRA",cooldown:20,maxCharges:2},jobPotencyModifiers:s=>{const c=[];return kc(s,c),c},validateAttempt:s=>!s.hasResourceAvailable("TEN_CHI_JIN"),onConfirm:s=>s.pushMudra(a+1,!1)})});const AF=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[2,1],[3,1]]),RF=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[1,3],[2,3]]),TF=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1],[2],[3]]),SF=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[2,1],[3,1]]),IF=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2],[3,2]]),_F=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3],[2,3]]),gF=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[3,2,1],[2,3,1]]),pF=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3,2],[3,1,2]]),NF=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2,3],[2,1,3]]),CF=e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||!e.isMudraTrackerIn([[1],[2],[3],[2,1],[3,1],[1,2],[3,2],[1,3],[2,3],[3,2,1],[2,3,1],[1,3,2],[3,1,2],[1,2,3],[2,1,3]])),jE=[{newSkill:"GOKA_MEKKYAKU",condition:AF},{newSkill:"HYOSHO_RANRYU",condition:RF},{newSkill:"FUMA_SHURIKEN",condition:TF},{newSkill:"KATON",condition:SF},{newSkill:"RAITON",condition:IF},{newSkill:"HYOTON",condition:_F},{newSkill:"HUTON",condition:gF},{newSkill:"DOTON",condition:pF},{newSkill:"SUITON",condition:NF},{newSkill:"RABBIT_MEDIUM",condition:e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||CF(e))},{newSkill:"NINJUTSU",condition:e=>!e.hasResourceAvailable("MUDRA")}],zE=e=>jE.filter(t=>t.newSkill!==e);cn("NIN","NINJUTSU",30,{recastTime:1.5,validateAttempt:e=>!1,replaceIf:zE("NINJUTSU")});cn("NIN","RABBIT_MEDIUM",30,{startOnHotbar:!1,recastTime:1.5,replaceIf:zE("RABBIT_MEDIUM"),validateAttempt:jE.find(e=>e.newSkill==="RABBIT_MEDIUM").condition,onConfirm:e=>e.clearMudraInfo()});Iy.forEach(([e,t,n,a,s])=>{cn("NIN",e,t,{startOnHotbar:!1,applicationDelay:n,recastTime:c=>c.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:a,falloff:s,replaceIf:zE(e),validateAttempt:jE.find(c=>c.newSkill===e).condition,onConfirm:we(["KATON","RAITON","HYOTON"].includes(e)?c=>{c.cooldowns.get("cd_SHUKUCHI").timeTillNextStackAvailable()!==0&&c.cooldowns.get("cd_SHUKUCHI").restore(60)}:void 0,e==="RAITON"?c=>c.stackRaijuReady():e==="SUITON"||e==="HUTON"?c=>c.gainStatus("SHADOW_WALKER"):void 0,c=>c.clearMudraInfo()),jobPotencyModifiers:c=>{const d=[];return c.hasResourceAvailable("KASSATSU")&&d.push(X.Kassatsu),c.hasResourceAvailable("DOTON")&&["KATON","GOKA_MEKKYAKU"].includes(e)&&d.push(X.HollowNozuchi),kc(c,d),d}})});cn("NIN","DOTON",45,{startOnHotbar:!1,recastTime:e=>e.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:0,falloff:0,replaceIf:zE("DOTON"),validateAttempt:jE.find(e=>e.newSkill==="DOTON").condition,onConfirm:we((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.clearMudraInfo()),onApplication:_y});const iE=e=>e.hasResourceAvailable("RAIJU_READY"),gy=[["NEVER",560],["MELEE_MASTERY_III_NIN",700]];To("FORKED_RAIJU",90,{applicationDelay:.62,potency:gy,animationLock:$t,highlightIf:iE,validateAttempt:iE,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});To("FLEETING_RAIJU",90,{applicationDelay:.76,potency:gy,highlightIf:iE,validateAttempt:iE,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});So("DOKUMORI",66,"cd_DOKUMORI",{applicationDelay:1.07,potency:400,falloff:0,cooldown:120,onConfirm:e=>{e.gainStatus("DOKUMORI"),e.gainNinki(40),e.hasTraitUnlocked("ENHANCED_DOKUMORI")&&e.gainStatus("HIGI")}});const aE=e=>e.hasResourceAvailable("HIDDEN")||e.hasResourceAvailable("SHADOW_WALKER");So("TRICK_ATTACK",18,"cd_TRICK_ATTACK",{autoUpgrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"KUNAIS_BANE"},applicationDelay:.8,potency:300,positional:{potency:400,location:"rear"},cooldown:60,highlightIf:aE,validateAttempt:aE,onConfirm:e=>{e.gainStatus("TRICK_ATTACK"),e.tryConsumeResource("SHADOW_WALKER")}});So("KUNAIS_BANE",92,"cd_TRICK_ATTACK",{autoDowngrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"TRICK_ATTACK"},startOnHotbar:!1,applicationDelay:1.29,cooldown:60,potency:700,falloff:0,highlightIf:aE,validateAttempt:aE,onConfirm:e=>{e.gainStatus("KUNAIS_BANE"),e.tryConsumeResource("SHADOW_WALKER")}});So("DREAM_WITHIN_A_DREAM",56,"cd_DREAM_WITHIN_A_DREAM",{applicationDelay:.98,cooldown:60,potency:180*3});Cd("KASSATSU",50,"cd_KASSATSU",{rscType:"KASSATSU",cooldown:60,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("TEN_CHI_JIN")});const fo=e=>e.resources.get("NINKI").available(50),bd=e=>e.resources.get("NINKI").consume(50);So("BHAVACAKRA",68,"cd_BHAVACAKRA",{applicationDelay:.62,cooldown:1,potency:[["NEVER",350],["MELEE_MASTERY_III_NIN",400]],highlightIf:fo,validateAttempt:fo,replaceIf:[{newSkill:"ZESHO_MEPPO",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:we(bd,e=>e.tryConsumeResource("MEISUI")),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[X.Meisui]:[]});So("ZESHO_MEPPO",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:1.03,cooldown:1,potency:700,highlightIf:e=>e.hasResourceAvailable("HIGI")&&fo(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&fo(e),replaceIf:[{newSkill:"BHAVACAKRA",condition:e=>!e.hasResourceAvailable("HIGI")}],onConfirm:we(bd,e=>{e.tryConsumeResource("MEISUI"),e.tryConsumeResource("HIGI")}),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[X.Meisui]:[]});So("HELLFROG_MEDIUM",62,"cd_BHAVACAKRA",{applicationDelay:.8,cooldown:1,potency:250,falloff:0,highlightIf:fo,validateAttempt:fo,replaceIf:[{newSkill:"DEATHFROG_MEDIUM",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:bd});So("DEATHFROG_MEDIUM",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:400,falloff:0,highlightIf:e=>e.hasResourceAvailable("HIGI")&&fo(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&fo(e),onConfirm:we(bd,e=>e.tryConsumeResource("HIGI"))});Cd("MEISUI",72,"cd_MEISUI",{rscType:"MEISUI",cooldown:120,applicationDelay:0,highlightIf:e=>e.hasResourceAvailable("SHADOW_WALKER"),validateAttempt:e=>e.hasResourceAvailable("SHADOW_WALKER"),onConfirm:e=>{e.tryConsumeResource("SHADOW_WALKER"),e.gainNinki(50)}});Cd("BUNSHIN",80,"cd_BUNSHIN",{rscType:"BUNSHIN",cooldown:90,applicationDelay:0,replaceIf:[{newSkill:"PHANTOM_KAMAITACHI",condition:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY")}],highlightIf:fo,validateAttempt:fo,onConfirm:we(bd,e=>e.gainStatus("PHANTOM_KAMAITACHI_READY"))});To("PHANTOM_KAMAITACHI",80,{startOnHotbar:!1,potency:700,falloff:0,applicationDelay:1.57,highlightIf:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),validateAttempt:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),onConfirm:e=>{e.tryConsumeResource("PHANTOM_KAMAITACHI_READY"),e.gainNinki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("DOTON")?[X.HollowNozuchi,X.NinPet]:[X.NinPet]});Cd("TEN_CHI_JIN",70,"cd_TEN_CHI_JIN",{rscType:"TEN_CHI_JIN",applicationDelay:0,cooldown:120,replaceIf:[{newSkill:"TENRI_JINDO",condition:e=>e.hasResourceAvailable("TENRI_JINDO_READY")}],validateAttempt:e=>!e.hasResourceAvailable("KASSATSU"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEN_CHI_JIN")&&e.gainStatus("TENRI_JINDO_READY"),e.clearMudraInfo()}});So("TENRI_JINDO",100,"cd_TENRI_JINDO",{startOnHotbar:!1,applicationDelay:1.69,cooldown:1,potency:1100,falloff:0,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("TENRI_JINDO_READY"),onConfirm:e=>e.tryConsumeResource("TENRI_JINDO_READY")});So("SHUKUCHI",40,"cd_SHUKUCHI",{applicationDelay:0,cooldown:60,maxCharges:2,animationLock:$t});Cd("SHADE_SHIFT",2,"cd_SHADE_SHIFT",{rscType:"SHADE_SHIFT",applicationDelay:.4,cooldown:120});Object.keys(tS).forEach(e=>Wt(e,`MNK/${b0[e].name}.png`));function bF(e){switch(e){case 1:return"opo";case 2:return"raptor";case 3:return"coeurl"}return null}function OF(e){switch(e){case"opo":return g({en:"o",zh:""});case"raptor":return g({en:"r",zh:""});case"coeurl":return g({en:"c",zh:""})}return null}function VC(e){switch(e){case"lunar":return g({en:e,zh:""});case"solar":return g({en:e,zh:""})}return null}class DF extends Qt{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(tS).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var m;const n=this.state.resources,a=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"].map(R=>n.get(R).availableAmount()).map(bF),s=n.get("LUNAR_NADI").available(1),c=n.get("SOLAR_NADI").available(1),d=a.map(OF).filter(R=>R!==null).join("+"),f=[VC(s?"lunar":null),VC(c?"solar":null)].filter(R=>R!==null).join("+");return[{kind:"counter",name:$e("OPO_OPOS_FURY"),color:t.mnk.opo,currentStacks:n.get("OPO_OPOS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:$e("RAPTORS_FURY"),color:t.mnk.raptor,currentStacks:n.get("RAPTORS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:$e("COEURLS_FURY"),color:t.mnk.coeurl,currentStacks:n.get("COEURLS_FURY").availableAmount(),maxStacks:2},{kind:"chakra",name:$e("CHAKRA"),regularColor:t.mnk.chakra,overflowColor:t.mnk.extraChakra,value:n.get("CHAKRA").availableAmount(),wrapCount:5},{kind:"text",name:$e("BEAST_CHAKRA_TIMER"),text:a.every(R=>R!==null)?(m=n.get("BEAST_CHAKRA_1").pendingChange)==null?void 0:m.timeTillEvent.toFixed(3):"n/a"},{kind:"beast",name:$e("BEAST_CHAKRA"),label:d,chakras:a,opoColor:t.mnk.opo,raptorColor:t.mnk.raptor,coeurlColor:t.mnk.coeurl},{kind:"nadi",name:$e("NADI"),label:f,lunar:s,solar:c,lunarColor:t.mnk.lunar,solarColor:t.mnk.solar}]}}const Gt=(e,t,n)=>{Qe("MNK",e,t,n??{})};Gt("CHAKRA",5,{default:5});Gt("BEAST_CHAKRA",1);Gt("NADI",1);Gt("OPO_OPOS_FURY",1,{warnOnOvercap:!0});Gt("RAPTORS_FURY",1,{warnOnOvercap:!0});Gt("COEURLS_FURY",2,{warnOnOvercap:!0});Gt("MANTRA",1,{timeout:15});Gt("OPO_OPO_FORM",1,{timeout:30});Gt("RAPTOR_FORM",1,{timeout:30});Gt("COEURL_FORM",1,{timeout:30});Gt("PERFECT_BALANCE",3,{timeout:20});Gt("FORMLESS_FIST",1,{timeout:30,default:1});Gt("RIDDLE_OF_EARTH",1,{timeout:10});Gt("EARTHS_RESOLVE",1,{timeout:15});Gt("EARTHS_RUMINATION",1,{timeout:30});Gt("RIDDLE_OF_FIRE",1,{timeout:20.72});Gt("FIRES_RUMINATION",1,{timeout:20,warnOnTimeout:!0});Gt("BROTHERHOOD",1,{timeout:20});Gt("MEDITATIVE_BROTHERHOOD",1,{timeout:20});Gt("RIDDLE_OF_WIND",1,{timeout:15.78});Gt("WINDS_RUMINATION",1,{timeout:15,warnOnTimeout:!0});Gt("SIX_SIDED_STAR",1,{timeout:5});const jl=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"];Gt("BEAST_CHAKRA_1",3);Gt("BEAST_CHAKRA_2",3);Gt("BEAST_CHAKRA_3",3);Gt("LUNAR_NADI",1);Gt("SOLAR_NADI",1);class yF extends Jt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_THUNDERCLAP")?3:2;this.cooldowns.set(new Fe("cd_THUNDERCLAP",30,n,n)),this.registerRecurringEvents()}getForm(){if(this.hasResourceAvailable("OPO_OPO_FORM"))return"opo";if(this.hasResourceAvailable("RAPTOR_FORM"))return"raptor";if(this.hasResourceAvailable("COEURL_FORM"))return"coeurl"}setForm(t){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(a=>this.tryConsumeResource(a));const n=t==="opo"?"OPO_OPO_FORM":t==="raptor"?"RAPTOR_FORM":t==="coeurl"?"COEURL_FORM":"FORMLESS_FIST";this.gainStatus(n)}canDoForm(t){return this.hasResourceAvailable("PERFECT_BALANCE")||this.hasResourceAvailable("FORMLESS_FIST")||this.getForm()===t}gainChakra(){this.resources.get("CHAKRA").gain(1)}maybeGainChakra(t){if(this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD"))for(let s=0;s<this.resources.get("PARTY_SIZE").availableAmount()-1;s++)this.triggersEffect(.2,!0)&&this.gainChakra();if(this.hasTraitUnlocked("ENHANCED_BROTHERHOOD")&&this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD")){this.gainChakra();return}const n=t?1:this.config.critRate,a=this.triggersEffect(n,!0);if(t||a){const s=this.hasTraitUnlocked("DEEP_MEDITATION_II")?1:.8,c=this.triggersEffect(s);(s===1||c)&&this.gainChakra()}}consumeFiveChakra(){const t=this.resources.get("CHAKRA");t.consume(Math.min(t.availableAmount(),5))}startPB(){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(t=>this.tryConsumeResource(t)),this.gainStatus("PERFECT_BALANCE")}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("RIDDLE_OF_FIRE")&&t.addBuff(H.RiddleOfFire),this.hasResourceAvailable("BROTHERHOOD")&&t.addBuff(H.Brotherhood)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_GREASED_LIGHTNING_III")?20:15}get statusPropsGenerator(){return new DF(this)}}const Wn=(e,t,n)=>{const a=n.form?s=>n.form.requiredForm===void 0||s.canDoForm(n.form.requiredForm):void 0;return cn("MNK",e,t,{...n,positional:void 0,highlightIf:s=>{var c;return!a&&!n.ball&&!n.highlightIf?!1:((a==null?void 0:a(s))??!0)&&(n.ball?s.hasResourceAvailable(n.ball.rsc):!0)&&(((c=n.highlightIf)==null?void 0:c.call(n,s))??!0)},validateAttempt:s=>{var c;return((a==null?void 0:a(s))??!0)&&(((c=n.validateAttempt)==null?void 0:c.call(n,s))??!0)},recastTime:s=>s.config.adjustedSksGCD(n.recastTime??2.5,s.inherentSpeedModifier()),onConfirm:we(n.onConfirm,e!=="SIX_SIDED_STAR"&&n.potency?(s,c)=>{const d=c.getInitialPotency();d&&s.maybeGainChakra(d.modifiers.includes(X.AutoCrit))}:void 0,n.form?s=>{const c=n.form.nextForm;if(s.tryConsumeResource("PERFECT_BALANCE")){for(const f of jl)if(!s.hasResourceAvailable(f)){let h=3;c==="raptor"?h=1:c==="coeurl"&&(h=2),s.resources.get(f).gain(h),f==="BEAST_CHAKRA_3"&&jl.forEach(m=>s.enqueueResourceDrop(m,20));break}}else s.setForm(c)}:void 0,n.ball?s=>s.tryConsumeResource(n.ball.rsc):void 0),jobPotencyModifiers:s=>{var f;const c=((f=n.jobPotencyModifiers)==null?void 0:f.call(n,s))??[],d=n.positional&&s.hitPositional(n.positional.location);return s.hasResourceAvailable("BROTHERHOOD")&&c.push(X.Brotherhood),s.hasResourceAvailable("RIDDLE_OF_FIRE")&&c.push(X.RiddleOfFire),n.ball&&s.hasResourceAvailable(n.ball.rsc)?(c.push({kind:"adder",source:U.MNK_BALL,additiveAmount:rn(s,n.ball.potency)-rn(s,n.potency)}),n.positional&&d&&c.push(vf(rn(s,n.positional.ballPotency)-rn(s,n.ball.potency)))):n.positional&&d&&c.push(vf(rn(s,n.positional.potency)-rn(s,n.potency))),c}})},YE=(e,t,n,a)=>ut("MNK",e,t,n,{jobPotencyModifiers:s=>{var d;const c=((d=a.jobPotencyModifiers)==null?void 0:d.call(a,s))??[];return s.hasResourceAvailable("BROTHERHOOD")&&c.push(X.Brotherhood),s.hasResourceAvailable("RIDDLE_OF_FIRE")&&c.push(X.RiddleOfFire),c},...a}),Uc=(e,t,n,a)=>qe("MNK",e,t,n,a);[["BOOTSHINE",1,1.11,[["NEVER",180],["MELEE_MASTERY_MNK",220]]],["LEAPING_OPO",92,.62,260]].forEach(([e,t,n,a],s)=>{Wn(e,t,{...s===0?{autoUpgrade:{otherSkill:"LEAPING_OPO",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"BOOTSHINE",trait:"BEAST_CHAKRA_MASTERY"}},form:{nextForm:"raptor"},ball:{potency:s===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"OPO_OPOS_FURY"},applicationDelay:n,potency:a,highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:d=>d.hasResourceAvailable("OPO_OPOS_FURY")?[X.AutoCrit]:[]})});[["TRUE_STRIKE",4,.8,[["NEVER",260],["MELEE_MASTERY_MNK",300]]],["RISING_RAPTOR",92,.89,340]].forEach(([e,t,n,a],s)=>{Wn(e,t,{...s===0?{autoUpgrade:{otherSkill:"RISING_RAPTOR",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"TRUE_STRIKE",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"raptor",nextForm:"coeurl"},ball:{potency:s===0?[["NEVER",460],["MELEE_MASTERY_MNK",500]]:540,rsc:"RAPTORS_FURY"},applicationDelay:n,potency:a})});[["SNAP_PUNCH",6,.76,[["NEVER",230],["MELEE_MASTERY_MNK",270]]],["POUNCING_COEURL",92,1.02,310]].forEach(([e,t,n,a],s)=>{Wn(e,t,{...s===0?{autoUpgrade:{otherSkill:"POUNCING_COEURL",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"SNAP_PUNCH",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"coeurl",nextForm:"opo"},ball:{potency:s===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"COEURLS_FURY"},positional:{potency:s===0?[["NEVER",290],["MELEE_MASTERY_MNK",330]]:370,ballPotency:s===0?[["NEVER",440],["MELEE_MASTERY_MNK",480]]:520,location:"flank"},applicationDelay:n,potency:a})});Wn("DRAGON_KICK",50,{applicationDelay:1.29,potency:[["NEVER",240],["MELEE_MASTERY_MNK",280],["MELEE_MASTERY_II_MNK",320]],form:{nextForm:"raptor"},highlightIf:e=>e.canDoForm("opo")&&!e.hasResourceAvailable("OPO_OPOS_FURY"),onConfirm:e=>e.resources.get("OPO_OPOS_FURY").gain(1)});Wn("TWIN_SNAKES",18,{applicationDelay:.84,potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],form:{requiredForm:"raptor",nextForm:"coeurl"},highlightIf:e=>!e.hasResourceAvailable("RAPTORS_FURY"),onConfirm:e=>e.resources.get("RAPTORS_FURY").gain(1)});Wn("DEMOLISH",30,{applicationDelay:1.6,potency:[["NEVER",280],["MELEE_MASTERY_MNK",320],["MELEE_MASTERY_II_MNK",360]],form:{requiredForm:"coeurl",nextForm:"opo"},positional:{potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],location:"rear"},highlightIf:e=>!e.hasResourceAvailable("COEURLS_FURY"),onConfirm:e=>e.resources.get("COEURLS_FURY").gain(2)});[["ARM_OF_THE_DESTROYER",26,.54,110],["SHADOW_OF_THE_DESTROYER",82,.4,120]].forEach(([e,t,n,a],s)=>{Wn(e,t,{...s===0?{autoUpgrade:{otherSkill:"SHADOW_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}}:{autoDowngrade:{otherSkill:"ARM_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}},applicationDelay:n,potency:a,falloff:0,form:{nextForm:"raptor"},highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:s===1?d=>d.hasResourceAvailable("OPO_OPO_FORM")?[X.AutoCrit]:[]:void 0})});Wn("ROCKBREAKER",30,{applicationDelay:.94,potency:150,falloff:0,form:{requiredForm:"raptor",nextForm:"coeurl"}});Wn("FOUR_POINT_FURY",45,{applicationDelay:.97,potency:140,falloff:0,form:{requiredForm:"coeurl",nextForm:"opo"}});const py=e=>{const t=jl.map(n=>e.resources.get(n).availableAmount());return e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI")&&t.every(n=>n>0)},rI=e=>{const t=jl.map(s=>e.resources.get(s).availableAmount()),n=t[0];return n>0&&t[1]===n&&t[2]===n&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},cI=e=>{const t=jl.map(a=>e.resources.get(a).availableAmount()),n=[!1,!1,!1];return t.forEach(a=>{console.assert(a<4,"beast chakra had invalid value"),a<4&&a>0&&(n[a-1]=!0)}),n.every(a=>a)&&t.every(a=>a>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},Ny=e=>{const t=jl.map(n=>e.resources.get(n).availableAmount());return!rI(e)&&!cI(e)&&t.every(n=>n>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},vF=e=>!py(e)&&!rI(e)&&!cI(e)&&!Ny(e),Od=[{newSkill:"MASTERFUL_BLITZ",condition:vF},{newSkill:"ELIXIR_FIELD",condition:rI},{newSkill:"FLINT_STRIKE",condition:cI},{newSkill:"CELESTIAL_REVOLUTION",condition:Ny},{newSkill:"TORNADO_KICK",condition:py}],KE=e=>{jl.forEach(t=>e.tryConsumeResource(t,!0)),e.setForm("formless")},Cy=e=>t=>t.resources.get(e==="lunar"?"LUNAR_NADI":"SOLAR_NADI").gain(1);Wn("MASTERFUL_BLITZ",60,{applicationDelay:0,replaceIf:Od,validateAttempt:e=>!1});[["TORNADO_KICK",60,1.69,1200],["PHANTOM_RUSH",90,.4,1500]].forEach(([e,t,n,a],s)=>{Wn(e,t,{...s===0?{autoUpgrade:{otherSkill:"PHANTOM_RUSH",trait:"TORNADO_KICK_MASTERY"}}:{autoDowngrade:{otherSkill:"TORNADO_KICK",trait:"TORNADO_KICK_MASTERY"}},startOnHotbar:!1,applicationDelay:n,replaceIf:Od,highlightIf:d=>!0,potency:a,falloff:.35,onConfirm:we(KE,d=>{d.tryConsumeResource("LUNAR_NADI"),d.tryConsumeResource("SOLAR_NADI")})})});[["ELIXIR_FIELD",60,1.07,800],["ELIXIR_BURST",92,1.42,900]].forEach(([e,t,n,a],s)=>{Wn(e,t,{...s===0?{autoUpgrade:{otherSkill:"ELIXIR_BURST",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"ELIXIR_FIELD",trait:"BEAST_CHAKRA_MASTERY"}},startOnHotbar:!1,applicationDelay:n,replaceIf:Od,highlightIf:d=>!0,potency:a,falloff:.35,onConfirm:we(KE,Cy("lunar"))})});Wn("CELESTIAL_REVOLUTION",60,{startOnHotbar:!1,applicationDelay:.89,replaceIf:Od,highlightIf:e=>!0,potency:600,onConfirm:we(KE,e=>e.resources.get(e.hasResourceAvailable("LUNAR_NADI")?"SOLAR_NADI":"LUNAR_NADI").gain(1))});[["FLINT_STRIKE",60,.53,800],["RISING_PHOENIX",86,.76,900]].forEach(([e,t,n,a],s)=>{Wn(e,t,{...s===0?{autoUpgrade:{otherSkill:"RISING_PHOENIX",trait:"FLINT_STRIKE_MASTERY"}}:{autoDowngrade:{otherSkill:"FLINT_STRIKE",trait:"FLINT_STRIKE_MASTERY"}},startOnHotbar:!1,applicationDelay:n,replaceIf:Od,highlightIf:d=>!0,potency:a,falloff:.35,onConfirm:we(KE,Cy("solar"))})});Wn("SIX_SIDED_STAR",80,{recastTime:5,applicationDelay:.62,potency:[["NEVER",710],["MELEE_MASTERY_II_MNK",780]],onConfirm:e=>{e.tryConsumeResource("CHAKRA",!0),e.gainStatus("SIX_SIDED_STAR")},jobPotencyModifiers:e=>{const t=e.resources.get("CHAKRA").availableAmount();return t>0?[{kind:"adder",additiveAmount:80*t,source:U.SSS_CHAKRA}]:[]}});Wn("FORM_SHIFT",52,{applicationDelay:0,onConfirm:e=>e.setForm("formless")});function uI(e,t,n){return cn("MNK",e,t,{autoUpgrade:n.autoUpgrade,autoDowngrade:n.autoDowngrade,recastTime:1,applicationDelay:0,replaceIf:[{newSkill:n.spender,condition:a=>a.resources.get("CHAKRA").available(5)}],validateAttempt:a=>!a.resources.get("CHAKRA").available(5),onConfirm:a=>a.resources.get("CHAKRA").gain(a.isInCombat()?1:5)})}uI("FORBIDDEN_MEDITATION",54,{spender:"THE_FORBIDDEN_CHAKRA"});uI("INSPIRITED_MEDITATION",40,{autoUpgrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"HOWLING_FIST"});uI("ENLIGHTENED_MEDITATION",74,{autoDowngrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"ENLIGHTENMENT"});[["HOWLING_FIST",40,1.16,100,"cd_THE_FORBIDDEN_CHAKRA"],["ENLIGHTENMENT",74,.76,160,"cd_ENLIGHTENMENT"]].forEach(([e,t,n,a,s],c)=>{YE(e,t,s,{...c===0?{autoUpgrade:{otherSkill:"ENLIGHTENMENT",trait:"HOWLING_FIST_MASTERY"}}:{autoDowngrade:{otherSkill:"HOWLING_FIST",trait:"HOWLING_FIST_MASTERY"}},startOnHotbar:!1,applicationDelay:n,cooldown:1,potency:a,falloff:0,requiresCombat:!0,highlightIf:f=>f.resources.get("CHAKRA").available(5),validateAttempt:f=>f.resources.get("CHAKRA").available(5),onConfirm:f=>f.consumeFiveChakra()})});YE("THE_FORBIDDEN_CHAKRA",54,"cd_THE_FORBIDDEN_CHAKRA",{startOnHotbar:!1,replaceIf:[{newSkill:"FORBIDDEN_MEDITATION",condition:e=>!e.resources.get("CHAKRA").available(5)}],applicationDelay:1.48,cooldown:1,potency:[["NEVER",310],["MELEE_MASTERY_MNK",400]],requiresCombat:!0,highlightIf:e=>e.resources.get("CHAKRA").available(5),validateAttempt:e=>e.resources.get("CHAKRA").available(5),onConfirm:e=>e.consumeFiveChakra()});Uc("PERFECT_BALANCE",50,"cd_PERFECT_BALANCE",{rscType:"PERFECT_BALANCE",applicationDelay:0,cooldown:40,maxCharges:2,requiresCombat:!0,validateAttempt:e=>!jl.map(t=>e.hasResourceAvailable(t)).some(t=>t),onConfirm:e=>e.startPB()});Uc("RIDDLE_OF_FIRE",68,"cd_RIDDLE_OF_FIRE",{rscType:"RIDDLE_OF_FIRE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"FIRES_REPLY",condition:e=>e.hasResourceAvailable("FIRES_RUMINATION")}],onConfirm:e=>e.gainStatus("FIRES_RUMINATION")});Uc("BROTHERHOOD",70,"cd_BROTHERHOOD",{rscType:"BROTHERHOOD",applicationDelay:.76,cooldown:120,onApplication:e=>{e.gainStatus("MEDITATIVE_BROTHERHOOD"),e.resources.set(new ai("CHAKRA",10,e.resources.get("CHAKRA").availableAmount())),e.addEvent(new Me("restore BH max stacks",Vt("MNK","BROTHERHOOD").maxTimeout,()=>e.resources.set(new ai("CHAKRA",5,Math.min(e.resources.get("CHAKRA").availableAmount(),5)))))}});Uc("RIDDLE_OF_WIND",72,"cd_RIDDLE_OF_WIND",{rscType:"RIDDLE_OF_WIND",applicationDelay:0,cooldown:90,replaceIf:[{newSkill:"WINDS_REPLY",condition:e=>e.hasResourceAvailable("WINDS_RUMINATION")}],onConfirm:e=>e.gainStatus("WINDS_RUMINATION")});YE("THUNDERCLAP",35,"cd_THUNDERCLAP",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:$t,drawsAggro:!0});Uc("MANTRA",42,"cd_MANTRA",{rscType:"MANTRA",applicationDelay:1.5,cooldown:90});Uc("RIDDLE_OF_EARTH",64,"cd_RIDDLE_OF_EARTH",{rscType:"RIDDLE_OF_EARTH",applicationDelay:0,cooldown:120,healingPotency:100,replaceIf:[{newSkill:"EARTHS_REPLY",condition:e=>e.hasResourceAvailable("EARTHS_RUMINATION")}],onConfirm:e=>e.gainStatus("EARTHS_RUMINATION")});YE("EARTHS_REPLY",64,"cd_EARTHS_REPLY",{startOnHotbar:!1,applicationDelay:1.07,cooldown:1,healingPotency:300,highlightIf:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("EARTHS_RUMINATION")});Wn("WINDS_REPLY",96,{startOnHotbar:!1,applicationDelay:1.2,potency:1040,falloff:.35,highlightIf:e=>e.hasResourceAvailable("WINDS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("WINDS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("WINDS_RUMINATION")});Wn("FIRES_REPLY",100,{startOnHotbar:!1,applicationDelay:1.42,potency:1400,falloff:.35,highlightIf:e=>e.hasResourceAvailable("FIRES_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("FIRES_RUMINATION"),onConfirm:e=>{e.tryConsumeResource("FIRES_RUMINATION"),e.setForm("formless")}});Object.keys(dS).forEach(e=>Wt(e,`VPR/${Ye[e].name}.png`));const MF=Object.keys(dS);class LF extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return MF.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var I,C;const n=this.state.resources,a=n.get("VPR_COMBO"),s=n.get("VPR_AOE_COMBO"),c=["HUNTERS_COIL_READY","SWIFTSKINS_COIL_READY","HUNTERS_DEN_READY","SWIFTSKINS_DEN_READY"],d=n.get("RATTLING_COIL").availableAmount(),f=n.get("SERPENT_OFFERINGS").availableAmount(),h=n.get("ANGUINE_TRIBUTE").availableAmount(),m=a.available(1)?(I=a.pendingChange)==null?void 0:I.timeTillEvent:s.available(1)?(C=s.pendingChange)==null?void 0:C.timeTillEvent:void 0,R=c.filter(_=>n.get(_).available(1)),T=R.length>0?Math.max(...R.map(_=>n.get(_).pendingChange.timeTillEvent)):void 0,S=[{kind:"bar",name:g({en:"Dual Wield Combo Timer",zh:""}),color:t.vpr.vprComboTimer,progress:m?m/30:0,valueString:(m==null?void 0:m.toFixed(3))??"N/A"},{kind:"bar",name:g({en:"Twinblade Combo Timer",zh:""}),color:t.vpr.vprComboTimer,progress:T?T/30:0,valueString:(T==null?void 0:T.toFixed(3))??"N/A"},{kind:"counter",name:$e("RATTLING_COIL"),color:t.vpr.rattlingCoil,currentStacks:d,maxStacks:n.get("RATTLING_COIL").maxValue}];return this.state.hasTraitUnlocked("SERPENTS_LINEAGE")&&S.push({kind:"bar",name:$e("SERPENT_OFFERINGS"),color:f>=50?t.vpr.anguineTribute:t.vpr.serpentOfferings,progress:f/100,valueString:f.toFixed(0)},{kind:"counter",name:$e("ANGUINE_TRIBUTE"),color:t.vpr.anguineTribute,currentStacks:h,maxStacks:n.get("ANGUINE_TRIBUTE").maxValue}),S}}const At=(e,t,n)=>{Qe("VPR",e,t,n??{})};At("RATTLING_COIL",3,{warnOnOvercap:!0});At("SERPENT_OFFERINGS",100,{warnOnOvercap:!0});At("ANGUINE_TRIBUTE",5,{timeout:30});At("HUNTERS_INSTINCT",1,{timeout:40});At("SWIFTSCALED",1,{timeout:40});At("HONED_STEEL",1,{timeout:60});At("HONED_REAVERS",1,{timeout:60});At("FLANKSTUNG_VENOM",1,{timeout:60});At("HINDSTUNG_VENOM",1,{timeout:60});At("FLANKSBANE_VENOM",1,{timeout:60});At("HINDSBANE_VENOM",1,{timeout:60});At("GRIMSKINS_VENOM",1,{timeout:60});At("GRIMHUNTERS_VENOM",1,{timeout:60});At("HUNTERS_VENOM",1,{timeout:30});At("SWIFTSKINS_VENOM",1,{timeout:30});At("POISED_FOR_TWINFANG",1,{timeout:60});At("POISED_FOR_TWINBLOOD",1,{timeout:60});At("FELLHUNTERS_VENOM",1,{timeout:30});At("FELLSKINS_VENOM",1,{timeout:30});At("READY_TO_REAWAKEN",1,{timeout:30,warnOnTimeout:!0});At("REAWAKENED",1,{timeout:30,warnOnTimeout:!0});At("DEATH_RATTLE_READY",1);At("COIL_OGCD_READY",2);At("DEN_OGCD_READY",2);At("UNCOILED_OGCD_READY",2);At("HUNTERS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});At("HUNTERS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});At("SWIFTSKINS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});At("SWIFTSKINS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});At("LAST_LASH_READY",1);At("LEGACY_READY",4);At("VPR_COMBO",4,{timeout:30});At("VPR_AOE_COMBO",2,{timeout:30});At("REAWAKEN_COMBO",4);const by=["DEATH_RATTLE_READY","LAST_LASH_READY","COIL_OGCD_READY","UNCOILED_OGCD_READY","HUNTERS_VENOM","SWIFTSKINS_VENOM","POISED_FOR_TWINFANG","POISED_FOR_TWINBLOOD","DEN_OGCD_READY","LEGACY_READY"],Oy=["FLANKSBANE_VENOM","FLANKSTUNG_VENOM"],Dy=["HINDSBANE_VENOM","HINDSTUNG_VENOM"],Oc=[...Oy,...Dy];class xF extends Jt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SLITHER")?3:2;this.cooldowns.set(new Fe("cd_SLITHER",30,n,n));const a=this.hasTraitUnlocked("ENHANCED_VIPERS_RATTLE")?3:2,s=this.hasTraitUnlocked("ENHANCED_SERPENTS_LINEAGE")?5:4;this.resources.set(new ai("RATTLING_COIL",a,0,!0)),this.resources.set(new ai("ANGUINE_TRIBUTE",s,0)),this.registerRecurringEvents()}inherentSpeedModifier(){return 15}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("HUNTERS_INSTINCT")&&t.addBuff(H.HuntersInstinct)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("SWIFTSCALED")&&n.cdName==="cd_GCD"&&t.addBuff(H.Swiftscaled)}get statusPropsGenerator(){return new LF(this)}getSwiftscaledModifier(){return this.hasResourceAvailable("SWIFTSCALED")?this.inherentSpeedModifier():0}isNoReawakenComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_COMBO",t)}isNoReawakenAoeComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_AOE_COMBO",t)}setLegacy(t){this.hasTraitUnlocked("SERPENTS_LEGACY")&&this.resources.get("LEGACY_READY").overrideCurrentValue(t)}gainOfferings(t){this.hasTraitUnlocked("SERPENTS_LINEAGE")&&this.resources.get("SERPENT_OFFERINGS").gain(t)}processCombo(t){if(t==="WRITHING_SNAP"||t==="UNCOILED_FURY")return;const a=["REAWAKEN","FIRST_GENERATION","SECOND_GENERATION","THIRD_GENERATION","FOURTH_GENERATION"].indexOf(t);if(a!==-1){this.setComboState("REAWAKEN_COMBO",(a+1)%5);return}const s=this.resources.get("VPR_COMBO").availableAmount(),c=this.resources.get("VPR_AOE_COMBO").availableAmount(),[d,f]=new Map([["STEEL_FANGS",[1,0]],["REAVING_FANGS",[1,0]],["HUNTERS_STING",[2,0]],["SWIFTSKINS_STING",[3,0]],["FLANKSTING_STRIKE",[0,0]],["FLANKSBANE_FANG",[0,0]],["HINDSTING_STRIKE",[0,0]],["HINDSBANE_FANG",[0,0]],["STEEL_MAW",[0,1]],["REAVING_MAW",[0,1]],["HUNTERS_BITE",[0,2]],["SWIFTSKINS_BITE",[0,2]],["JAGGED_MAW",[0,0]],["BLOODIED_MAW",[0,0]]]).get(t)??[s,c];d!==s&&this.setComboState("VPR_COMBO",d),f!==c&&this.setComboState("VPR_AOE_COMBO",f),this.setComboState("REAWAKEN_COMBO",0)}cancelVicewinderCombo(t){t!=="SWIFTSKINS_COIL"&&this.tryConsumeResource("HUNTERS_COIL_READY"),t!=="HUNTERS_COIL"&&this.tryConsumeResource("SWIFTSKINS_COIL_READY"),t!=="SWIFTSKINS_DEN"&&this.tryConsumeResource("HUNTERS_DEN_READY"),t!=="HUNTERS_DEN"&&this.tryConsumeResource("SWIFTSKINS_DEN_READY")}consumeAnguine(){this.tryConsumeResource("ANGUINE_TRIBUTE"),this.hasResourceAvailable("ANGUINE_TRIBUTE")||this.cancelReawaken()}cancelReawaken(){this.tryConsumeResource("LEGACY_READY",!0),this.tryConsumeResource("ANGUINE_TRIBUTE",!0),this.tryConsumeResource("REAWAKENED"),this.setComboState("REAWAKEN_COMBO",0)}applyExtendedStatus(t,n){Oc.includes(t)&&Oc.forEach(c=>c!==t&&this.tryConsumeResource(c));const a=this.resources.get(t),s=Vt("VPR",t);this.hasResourceAvailable(t)?s.maxTimeout>0&&a.overrideTimer(this,s.maxTimeout+n):(a.gain(1),s.maxTimeout>0&&this.enqueueResourceDrop(t,s.maxTimeout+n))}}const Rn=(e,t,n)=>{var s,c;const a=(c=(s=n.replaceIf)==null?void 0:s.find(d=>d.newSkill===e))==null?void 0:c.condition;return cn("VPR",e,t,{...n,recastTime:d=>d.config.adjustedSksGCD(n.baseRecastTime??2.5,d.getSwiftscaledModifier()),validateAttempt:Ed(n.validateAttempt,a),onConfirm:we(d=>{e!=="UNCOILED_FURY"&&e!=="WRITHING_SNAP"&&d.cancelVicewinderCombo(e),by.forEach(f=>{d.tryConsumeResource(f,!0)&&p.reportWarning({kind:"overwrite",rsc:f})})},n.onConfirm,n.extendedStatus?d=>d.applyExtendedStatus(n.extendedStatus,n.applicationDelay):void 0,d=>d.processCombo(e)),jobPotencyModifiers:d=>{var h;const f=((h=n.jobPotencyModifiers)==null?void 0:h.call(n,d))??[];return d.hasResourceAvailable("HUNTERS_INSTINCT")&&f.push(X.HuntersInstinct),f}})},Xo=(e,t,n,a)=>ut("VPR",e,t,n,{...a,jobPotencyModifiers:s=>{var d;const c=((d=a.jobPotencyModifiers)==null?void 0:d.call(a,s))??[];return s.hasResourceAvailable("HUNTERS_INSTINCT")&&c.push(X.HuntersInstinct),c}}),yy={newSkill:"FIRST_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},vy={newSkill:"SECOND_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},Dc=[yy];Dc.push(...["STEEL_FANGS","HUNTERS_STING","FLANKSTING_STRIKE","HINDSTING_STRIKE"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenComboAt(t)})));const yc=[vy];yc.push(...["REAVING_FANGS","SWIFTSKINS_STING","FLANKSBANE_FANG","HINDSBANE_FANG"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenComboAt(t)})));const VE=[yy];VE.push(...["STEEL_MAW","HUNTERS_BITE","JAGGED_MAW"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenAoeComboAt(t)})));const WE=[vy];WE.push(...["REAVING_MAW","SWIFTSKINS_BITE","BLOODIED_MAW"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenAoeComboAt(t)})));const My=[{newSkill:"HUNTERS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],Ly=[{newSkill:"SWIFTSKINS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],XE=[{newSkill:"SERPENTS_TAIL",condition:e=>!by.some(t=>e.hasResourceAvailable(t))},{newSkill:"DEATH_RATTLE",condition:e=>e.hasResourceAvailable("DEATH_RATTLE_READY")},{newSkill:"LAST_LASH",condition:e=>e.hasResourceAvailable("LAST_LASH_READY")},{newSkill:"FIRST_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",1)},{newSkill:"SECOND_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",2)},{newSkill:"THIRD_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",3)},{newSkill:"FOURTH_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",4)}],xy=[{newSkill:"TWINFANG",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINFANG_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINFANG_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINFANG",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],Hy=[{newSkill:"TWINBLOOD",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINBLOOD_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINBLOOD_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINBLOOD",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],ky=[{newSkill:"REAWAKEN",condition:e=>!e.hasResourceAvailable("ANGUINE_TRIBUTE")},{newSkill:"OUROBOROS",condition:e=>e.hasResourceAvailable("ANGUINE_TRIBUTE")}];Rn("WRITHING_SNAP",15,{applicationDelay:.488,potency:200});Rn("STEEL_FANGS",1,{replaceIf:Dc,applicationDelay:1.158,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[X.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});Rn("REAVING_FANGS",10,{replaceIf:yc,applicationDelay:1.293,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[X.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});Rn("HUNTERS_STING",5,{startOnHotbar:!1,replaceIf:Dc,applicationDelay:.89,potency:[["NEVER",240],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!Oc.some(t=>e.hasResourceAvailable(t))||Oy.some(t=>e.hasResourceAvailable(t)),extendedStatus:"HUNTERS_INSTINCT"});Rn("SWIFTSKINS_STING",20,{startOnHotbar:!1,replaceIf:yc,applicationDelay:1.16,potency:[["NEVER",280],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!Oc.some(t=>e.hasResourceAvailable(t))||Dy.some(t=>e.hasResourceAvailable(t)),extendedStatus:"SWIFTSCALED"});const HF=[["FLANKSTING_STRIKE",1.649,"flank","FLANKSTUNG_VENOM","HINDSTUNG_VENOM",Dc],["FLANKSBANE_FANG",1.604,"flank","FLANKSBANE_VENOM","HINDSBANE_VENOM",yc],["HINDSTING_STRIKE",.98,"rear","HINDSTUNG_VENOM","FLANKSBANE_VENOM",Dc],["HINDSBANE_FANG",1.203,"rear","HINDSBANE_VENOM","FLANKSTUNG_VENOM",yc]];HF.forEach(([e,t,n,a,s,c])=>{Rn(e,30,{startOnHotbar:!1,replaceIf:c,applicationDelay:t,potency:[["NEVER",320],["MELEE_MASTERY_II_VPR",340]],positional:{potency:[["NEVER",380],["MELEE_MASTERY_II_VPR",400]],location:n},jobPotencyModifiers:d=>d.hasResourceAvailable(a)?[X.VenomST]:[],highlightIf:d=>!Oc.some(f=>d.hasResourceAvailable(f))||d.hasResourceAvailable(a),onConfirm:d=>{d.gainStatus("DEATH_RATTLE_READY"),d.resources.get("SERPENT_OFFERINGS").gain(10),Oc.filter(f=>f!==a).some(f=>d.hasResourceAvailable(f))&&p.reportWarning({kind:"custom",en:"incorrect combo ender!"})},extendedStatus:s})});Rn("HUNTERS_COIL",65,{replaceIf:My,applicationDelay:.982,potency:570,positional:{potency:620,location:"flank"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("HUNTERS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&e.gainStatus("SWIFTSKINS_COIL_READY")},extendedStatus:"HUNTERS_INSTINCT"});Rn("SWIFTSKINS_COIL",65,{replaceIf:Ly,applicationDelay:1.473,potency:570,positional:{potency:620,location:"rear"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("SWIFTSKINS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_COIL_READY")&&e.gainStatus("HUNTERS_COIL_READY")},extendedStatus:"SWIFTSCALED"});Rn("REAWAKEN",90,{replaceIf:ky,applicationDelay:.625,potency:750,falloff:.8,baseRecastTime:2.2,highlightIf:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),validateAttempt:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REAWAKEN")||e.resources.get("SERPENT_OFFERINGS").consume(50),e.gainStatus("ANGUINE_TRIBUTE",e.resources.get("ANGUINE_TRIBUTE").maxValue),e.gainStatus("REAWAKENED"),e.resources.get("REAWAKENED").removeTimer(),e.resources.addResourceEvent({rscType:"REAWAKENED",name:"cancel reawaken",delay:Vt("VPR","REAWAKENED").maxTimeout,fnOnRsc:()=>e.cancelReawaken()})}});Rn("OUROBOROS",96,{startOnHotbar:!1,replaceIf:ky,applicationDelay:2.313,potency:1150,falloff:.8,baseRecastTime:3,highlightIf:e=>e.hasResourceExactly("ANGUINE_TRIBUTE",1),onConfirm:e=>e.cancelReawaken()});Rn("VICEWINDER",65,{applicationDelay:.581,potency:500,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&e.resources.get("RATTLING_COIL").gain(1),e.gainStatus("HUNTERS_COIL_READY"),e.gainStatus("SWIFTSKINS_COIL_READY")}});Rn("UNCOILED_FURY",82,{applicationDelay:.804,potency:680,falloff:.75,baseRecastTime:3.5,highlightIf:e=>e.hasResourceAvailable("RATTLING_COIL"),validateAttempt:e=>e.hasResourceAvailable("RATTLING_COIL"),onConfirm:e=>{e.tryConsumeResource("RATTLING_COIL"),e.hasTraitUnlocked("UNCOILED_FANGS")&&(e.gainStatus("POISED_FOR_TWINFANG"),e.gainStatus("UNCOILED_OGCD_READY",2))}});Rn("STEEL_MAW",25,{replaceIf:VE,applicationDelay:1.091,potency:120,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[X.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});Rn("REAVING_MAW",35,{replaceIf:WE,applicationDelay:.908,potency:120,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[X.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});Rn("HUNTERS_BITE",40,{startOnHotbar:!1,replaceIf:VE,applicationDelay:1.134,potency:180,falloff:0,highlightIf:e=>!0,extendedStatus:"HUNTERS_INSTINCT"});Rn("SWIFTSKINS_BITE",45,{startOnHotbar:!1,replaceIf:WE,applicationDelay:1.445,potency:180,falloff:0,highlightIf:e=>!0,extendedStatus:"SWIFTSCALED"});Rn("JAGGED_MAW",50,{startOnHotbar:!1,replaceIf:VE,applicationDelay:1.127,potency:180,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")?[X.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")||!e.hasResourceAvailable("GRIMHUNTERS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMHUNTERS_VENOM"});Rn("BLOODIED_MAW",50,{startOnHotbar:!1,replaceIf:WE,applicationDelay:.866,potency:180,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")?[X.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")||!e.hasResourceAvailable("GRIMSKINS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMSKINS_VENOM"});Rn("HUNTERS_DEN",70,{replaceIf:[{newSkill:"HUNTERS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.569,potency:300,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLHUNTERS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_DEN_READY")&&e.gainStatus("SWIFTSKINS_DEN_READY")},extendedStatus:"HUNTERS_INSTINCT"});Rn("SWIFTSKINS_DEN",70,{replaceIf:[{newSkill:"SWIFTSKINS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.999,potency:300,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLSKINS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_DEN_READY")&&e.gainStatus("HUNTERS_DEN_READY")},extendedStatus:"SWIFTSCALED"});Rn("VICEPIT",70,{applicationDelay:.827,potency:250,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},falloff:0,baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&(p.timeline.duringUntargetable(e.getDisplayTime())||e.resources.get("RATTLING_COIL").gain(1)),e.gainStatus("HUNTERS_DEN_READY"),e.gainStatus("SWIFTSKINS_DEN_READY")}});Xo("SERPENTS_IRE",86,"cd_SERPENTS_IRE",{applicationDelay:0,cooldown:120,requiresCombat:!0,onConfirm:e=>{e.resources.get("RATTLING_COIL").gain(1),e.hasTraitUnlocked("SERPENTS_LINEAGE")&&e.gainStatus("READY_TO_REAWAKEN")}});Xo("SLITHER",40,"cd_SLITHER",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:$t});Xo("SERPENTS_TAIL",55,"cd_SERPENTS_TAIL",{replaceIf:XE,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});Xo("DEATH_RATTLE",55,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:XE,applicationDelay:1.697,cooldown:1,potency:280,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("DEATH_RATTLE_READY")});Xo("LAST_LASH",60,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:XE,applicationDelay:1.226,cooldown:1,potency:120,falloff:0,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("LAST_LASH_READY")});Xo("TWINFANG",75,"cd_TWINFANG",{replaceIf:xy,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});Xo("TWINBLOOD",75,"cd_TWINBLOOD",{replaceIf:Hy,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});const kF=[["TWINFANG_BITE",75,"fang",.629,120,void 0,"COIL_OGCD_READY","HUNTERS_VENOM",X.VenomOGCDST,"SWIFTSKINS_VENOM"],["TWINBLOOD_BITE",75,"blood",.714,120,void 0,"COIL_OGCD_READY","SWIFTSKINS_VENOM",X.VenomOGCDST,"HUNTERS_VENOM"],["TWINFANG_THRESH",80,"fang",.666,50,0,"DEN_OGCD_READY","FELLHUNTERS_VENOM",X.VenomOGCDAoE,"FELLSKINS_VENOM"],["TWINBLOOD_THRESH",80,"blood",.764,50,0,"DEN_OGCD_READY","FELLSKINS_VENOM",X.VenomOGCDAoE,"FELLHUNTERS_VENOM"],["UNCOILED_TWINFANG",92,"fang",1.04,120,.75,"UNCOILED_OGCD_READY","POISED_FOR_TWINFANG",X.Poised,"POISED_FOR_TWINBLOOD"],["UNCOILED_TWINBLOOD",92,"blood",.977,120,.75,"UNCOILED_OGCD_READY","POISED_FOR_TWINBLOOD",X.Poised,"POISED_FOR_TWINFANG"]];kF.forEach(([e,t,n,a,s,c,d,f,h,m])=>{Xo(e,t,n==="fang"?"cd_TWINFANG":"cd_TWINBLOOD",{startOnHotbar:!1,replaceIf:n==="fang"?xy:Hy,applicationDelay:a,cooldown:1,potency:s,falloff:c,highlightIf:R=>R.hasResourceAvailable(f),jobPotencyModifiers:R=>R.hasResourceAvailable(f)?[h]:[],onConfirm:R=>{R.tryConsumeResource(d),R.hasResourceAvailable(f)||p.reportWarning({kind:"custom",en:`unbuffed twin${n} ability!`}),R.tryConsumeResource(f)&&R.hasResourceAvailable(d)?R.gainStatus(m):R.tryConsumeResource(m)}})});const UF=[["FIRST_GENERATION",1.702,Dc],["SECOND_GENERATION",1.473,yc],["THIRD_GENERATION",1.473,My],["FOURTH_GENERATION",1.473,Ly]];UF.forEach(([e,t,n],a)=>{Rn(e,90,{replaceIf:n,startOnHotbar:!1,applicationDelay:t,potency:420,falloff:.8,baseRecastTime:2,combo:{resource:"REAWAKEN_COMBO",resourceValue:a+1,potency:680},highlightIf:s=>s.hasResourceExactly("REAWAKEN_COMBO",a+1),onConfirm:s=>{s.setLegacy(a+1),s.consumeAnguine()}})});const wF=[["FIRST_LEGACY",1.289],["SECOND_LEGACY",1.065],["THIRD_LEGACY",1.19],["FOURTH_LEGACY",1.065]];wF.forEach(([e,t])=>{Xo(e,100,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:XE,applicationDelay:t,cooldown:1,potency:320,falloff:.8,highlightIf:n=>!0,onConfirm:n=>n.tryConsumeResource("LEGACY_READY",!0)})});const Uy=["SONG_OF_TORMENT","NIGHTBLOOM","FEATHER_RAIN","MORTAL_FLAME","BREATH_OF_MAGIC","WANING_NOCTURNE","DIAMONDBACK","BRUSH_WITH_DEATH"],PF=Object.keys(ES).filter(e=>!Uy.includes(e));Object.keys(ES).forEach(e=>Wt(e,`BLU/${Ye[e].name}.png`));class GF extends Qt{jobSpecificOtherTargetedBuffViewProps(){return[...Uy.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return PF.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){return[]}}const wn=(e,t,n)=>{Qe("BLU",e,t,n??{})};wn("NIGHTBLOOM",1,{timeout:60});wn("SONG_OF_TORMENT",1,{timeout:30});wn("FEATHER_RAIN",1,{timeout:6});wn("WAXING_NOCTURNE",1,{timeout:15});wn("WANING_NOCTURNE",1,{timeout:15});wn("DIAMONDBACK",1,{timeout:10});wn("BRISTLE",1,{timeout:30});wn("WHISTLE",1,{timeout:30});wn("TINGLE",1,{timeout:15});wn("COLD_FOG",1,{timeout:5});wn("TOUCH_OF_FROST",1,{timeout:15});wn("PHANTOM_FLURRY",1,{timeout:5});wn("APOKALYPSIS",1,{timeout:10});wn("WINGED_REPROBATION",4);wn("WINGED_REDEMPTION",1,{timeout:10});wn("BREATH_OF_MAGIC",1,{timeout:60});wn("MORTAL_FLAME",1,{timeout:900});wn("SURPANAKHAS_FURY",4,{timeout:3});wn("BRUSH_WITH_DEATH",1,{timeout:600});class BF extends Jt{constructor(t){super(t),this.cooldowns.set(new Fe("cd_SWIFTCAST",60,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"NIGHTBLOOM",appliedBy:["NIGHTBLOOM"]},{effectName:"SONG_OF_TORMENT",appliedBy:["SONG_OF_TORMENT"]}]},{groupedEffects:[{effectName:"FEATHER_RAIN",appliedBy:["FEATHER_RAIN"]}]},{groupedEffects:[{effectName:"BREATH_OF_MAGIC",appliedBy:["BREATH_OF_MAGIC"]}]},{groupedEffects:[{effectName:"MORTAL_FLAME",appliedBy:["MORTAL_FLAME"]}]},{groupedEffects:[{effectName:"PHANTOM_FLURRY",appliedBy:["PHANTOM_FLURRY"],isGroundTargeted:!0,exclude:!0},{effectName:"APOKALYPSIS",appliedBy:["APOKALYPSIS"],isGroundTargeted:!0,exclude:!0}]}])}get statusPropsGenerator(){return new GF(this)}refreshBuff(t,n){this.addEvent(new Me("gain buff",n,()=>{if(this.resources.get(t).gain(1),this.enqueueResourceDrop(t),t==="WANING_NOCTURNE"||t==="DIAMONDBACK"){const a=Vt("BLU",t).maxTimeout,s=this.resources.get("NOT_ANIMATION_LOCKED").pendingChange;s!==void 0?this.resources.get("NOT_ANIMATION_LOCKED").overrideTimer(this,Math.max(a,s.timeTillEvent)):this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",a)}}))}jobSpecificRegisterRecurringEvents(){const t=()=>{this.handleDoTTick("PHANTOM_FLURRY"),this.getDisplayTime()>=0&&p.reportDotTick(this.time,"PHANTOM_FLURRY"),this.addEvent(new Me("kick tick",1,()=>{t()}))},n=()=>{this.handleDoTTick("APOKALYPSIS"),this.getDisplayTime()>=0&&p.reportDotTick(this.time,"APOKALYPSIS"),this.addEvent(new Me("Apokalypsis tick",1,()=>{n()}))};let a=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;a>1;)a--;this.addEvent(new Me("initial kick tick",a,t));let s=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;s>1;)s--;this.addEvent(new Me("initial Apokalypsis tick",s,n))}cancelChanneledSkills(){this.tryConsumeResource("PHANTOM_FLURRY"),this.tryConsumeResource("APOKALYPSIS")}}const dI=e=>e.hasResourceAvailable("WANING_NOCTURNE")||e.hasResourceAvailable("DIAMONDBACK"),FF=e=>e.hasResourceAvailable("PHANTOM_FLURRY"),jF={newSkill:"END_PHANTOM_FLURRY",condition:e=>FF(e)},Xt=(e,t,n)=>{const a=n.basePotency??Number,s=n.aspect??_e.Other,c=n.baseCastTime??0,d=n.jobPotencyModifiers??(f=>[]);return ia("BLU",e,t,{...n,aspect:s,castTime:f=>f.config.adjustedCastTime(c),potency:n.basePotency,validateAttempt:f=>{var h;return!dI(f)&&(((h=n.validateAttempt)==null?void 0:h.call(n,f))??!0)},jobPotencyModifiers:f=>{const h=d(f);return f.hasResourceAvailable("WAXING_NOCTURNE")&&h.push(X.MoonFlute),a!==0&&f.hasResourceAvailable("BRISTLE")&&h.push(X.Bristle)&&f.tryConsumeResource("BRISTLE"),s===_e.Physical&&f.hasResourceAvailable("WHISTLE")&&h.push(X.Whistle)&&f.tryConsumeResource("WHISTLE"),s===_e.Physical&&e!=="TRIPLE_TRIDENT"&&f.hasResourceAvailable("TINGLE")&&h.push(X.TingleA)&&f.tryConsumeResource("TINGLE"),e==="TRIPLE_TRIDENT"&&f.hasResourceAvailable("TINGLE")&&h.push(X.TingleB)&&f.tryConsumeResource("TINGLE"),e==="CONVICTION_MARCATO"&&f.hasResourceAvailable("WINGED_REDEMPTION")&&h.push(X.WingedRedemption)&&f.tryConsumeResource("WINGED_REDEMPTION"),e==="WINGED_REPROBATION"&&f.resources.get("WINGED_REPROBATION").availableAmount()===3&&h.push(X.WingedReprobation),h},isInstantFn:f=>f.hasResourceAvailable("SWIFTCAST")||c===0,onConfirm:we(f=>f.tryConsumeResource("SURPANAKHAS_FURY"),n.baseCastTime?f=>f.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm)})},Mi=(e,t,n,a)=>ut("BLU",e,t,n,{jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("WAXING_NOCTURNE")&&c.push(X.MoonFlute),c},validateAttempt:s=>{var c;return!dI(s)&&(((c=a.validateAttempt)==null?void 0:c.call(a,s))??!0)},...a,onConfirm:we(s=>{e!=="SURPANAKHA"&&s.tryConsumeResource("SURPANAKHAS_FURY")},a.onConfirm)});Xt("SONIC_BOOM",1,{basePotency:210,baseCastTime:1,manaCost:200,applicationDelay:.5});Xt("SHARPENED_KNIFE",1,{aspect:_e.Physical,basePotency:220,baseCastTime:1,manaCost:200,applicationDelay:.5});Xt("GOBLIN_PUNCH",1,{aspect:_e.Physical,basePotency:220,baseCastTime:0,manaCost:200,applicationDelay:.5});Xt("REVENGE_BLAST",1,{aspect:_e.Physical,basePotency:500,baseCastTime:2,manaCost:200,applicationDelay:.5});Xt("WILD_RAGE",1,{aspect:_e.Physical,basePotency:500,baseCastTime:5,manaCost:0,applicationDelay:.5});Xt("CONVICTION_MARCATO",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});Xt("WATER_CANNON",1,{basePotency:200,baseCastTime:2,manaCost:200,applicationDelay:.5});Xt("HYDRO_PULL",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});Xt("THE_ROSE_OF_DESTRUCTION",1,{basePotency:400,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_THE_ROSE_OF_DESTRUCTION",cooldown:30,maxCharges:1}});Xt("MOON_FLUTE",1,{baseCastTime:2,manaCost:500,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")||(e.refreshBuff("WAXING_NOCTURNE",.6),e.addEvent(new Me("Waxing_Nocturne ended",15.6,()=>{e.hasResourceAvailable("WANING_NOCTURNE")||e.refreshBuff("WANING_NOCTURNE",0)})))}});Xt("DIAMONDBACK",1,{baseCastTime:2,manaCost:3e3,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")&&(e.tryConsumeResource("WAXING_NOCTURNE"),e.refreshBuff("WANING_NOCTURNE",0)),e.refreshBuff("DIAMONDBACK",.6)}});Xt("MATRA_MAGIC",1,{basePotency:800,baseCastTime:2,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_MATRA_MAGIC",cooldown:120,maxCharges:1}});Xt("SONG_OF_TORMENT",1,{basePotency:50,baseCastTime:2,manaCost:400,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(X.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push(X.Bristle),e.addDoTPotencies({node:t,effectName:"SONG_OF_TORMENT",skillName:"SONG_OF_TORMENT",tickPotency:50,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("SONG_OF_TORMENT",t)}});Xt("BREATH_OF_MAGIC",1,{basePotency:0,baseCastTime:2,manaCost:300,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(X.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push(X.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"BREATH_OF_MAGIC",skillName:"BREATH_OF_MAGIC",tickPotency:120,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("BREATH_OF_MAGIC",t)}});Xt("MORTAL_FLAME",1,{basePotency:0,baseCastTime:2,manaCost:500,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(X.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push(X.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"MORTAL_FLAME",skillName:"MORTAL_FLAME",tickPotency:40,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("MORTAL_FLAME",t)}});Xt("WHISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("BRISTLE"),e.refreshBuff("WHISTLE",0)}});Xt("BRISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("WHISTLE"),e.refreshBuff("BRISTLE",0)}});Xt("FINAL_STING",1,{aspect:_e.Physical,basePotency:2e3,baseCastTime:2,manaCost:0,applicationDelay:.5,validateAttempt:e=>!e.hasResourceAvailable("BRUSH_WITH_DEATH"),onConfirm:e=>{e.refreshBuff("BRUSH_WITH_DEATH",0)}});Xt("TINGLE",1,{basePotency:100,baseCastTime:2,manaCost:200,applicationDelay:.5,onConfirm:e=>{e.refreshBuff("TINGLE",0)}});Xt("TRIPLE_TRIDENT",1,{aspect:_e.Physical,basePotency:450,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_TRIPLE_TRIDENT",cooldown:90,maxCharges:1}});const zF=e=>e.hasResourceAvailable("COLD_FOG"),YF=e=>e.hasResourceAvailable("TOUCH_OF_FROST"),KF=[{newSkill:"POP_COLD_FOG",condition:e=>zF(e)},{newSkill:"WHITE_DEATH",condition:e=>YF(e)}];Xt("COLD_FOG",1,{replaceIf:KF,baseCastTime:2,cooldown:90,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_COLD_FOG",cooldown:90,maxCharges:1},onConfirm:e=>{e.refreshBuff("COLD_FOG",0)}});Xt("WHITE_DEATH",1,{startOnHotbar:!1,basePotency:400,baseCastTime:0,manaCost:0,applicationDelay:.5,validateAttempt:e=>!dI(e)&&e.hasResourceAvailable("TOUCH_OF_FROST")});Mi("POP_COLD_FOG",1,"cd_COLD_FOG_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:Ni,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("COLD_FOG"),onConfirm:e=>{e.tryConsumeResource("COLD_FOG"),e.refreshBuff("TOUCH_OF_FROST",0)}});Xt("END_PHANTOM_FLURRY",1,{startOnHotbar:!1,basePotency:600,baseCastTime:0,manaCost:0,applicationDelay:.5,validateAttempt:e=>e.hasResourceAvailable("PHANTOM_FLURRY")});Xt("WINGED_REPROBATION",1,{aspect:_e.Physical,basePotency:300,baseCastTime:1,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_WINGED_REPROBATION",cooldown:90,maxCharges:1},onConfirm:e=>{e.resources.get("WINGED_REPROBATION").gain(1),e.resources.get("WINGED_REPROBATION").availableAmount()<=3&&e.cooldowns.get("cd_WINGED_REPROBATION").restore(90),e.resources.get("WINGED_REPROBATION").availableAmount()===4&&(e.tryConsumeResource("WINGED_REPROBATION",!0),e.refreshBuff("WINGED_REDEMPTION",0))}});Mi("ERUPTION",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:300,applicationDelay:.62});Mi("FEATHER_RAIN",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:220,applicationDelay:.62,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"FEATHER_RAIN",skillName:"FEATHER_RAIN",tickPotency:40,speedStat:"sps",modifiers:n}),e.applyDoT("FEATHER_RAIN",t)}});Mi("MOUNTAIN_BUSTER",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});Mi("SHOCK_STRIKE",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});Mi("GLASS_DANCE",1,"cd_GLASS_DANCE",{cooldown:90,manaCost:500,potency:350,applicationDelay:.62});Mi("QUASAR",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:.62});Mi("J_KICK",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:1,animationLock:1});Mi("BOTH_ENDS",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:600,applicationDelay:.62});Mi("SEA_SHANTY",1,"cd_SEA_SHANTY",{cooldown:120,manaCost:300,potency:500,applicationDelay:.62});Mi("BEING_MORTAL",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:800,applicationDelay:.62});Mi("APOKALYPSIS",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:0,applicationDelay:1.38,animationLock:1.38,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"APOKALYPSIS",skillName:"APOKALYPSIS",tickPotency:140,tickFrequency:1,speedStat:"unscaled",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("APOKALYPSIS",t)}});Mi("NIGHTBLOOM",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:400,applicationDelay:.62,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"NIGHTBLOOM",skillName:"NIGHTBLOOM",tickPotency:75,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("NIGHTBLOOM",t)}});Mi("PHANTOM_FLURRY",1,"cd_PHANTOM_FLURRY",{replaceIf:[jF],cooldown:120,manaCost:300,potency:0,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"PHANTOM_FLURRY",skillName:"PHANTOM_FLURRY",tickPotency:200,tickFrequency:1,speedStat:"unscaled",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("PHANTOM_FLURRY",t)}});Mi("SURPANAKHA",1,"cd_SURPANAKHA_LOCKOUT",{cooldown:1,manaCost:200,potency:e=>200*(1+.5*e.resources.get("SURPANAKHAS_FURY").availableAmount()),applicationDelay:.62,onApplication:e=>{e.resources.get("SURPANAKHAS_FURY").availableAmount()===3?e.tryConsumeResource("SURPANAKHAS_FURY",!0):e.refreshBuff("SURPANAKHAS_FURY",0)},secondaryCooldown:{cdName:"cd_SURPANAKHA",cooldown:30,maxCharges:4}});function tc(e){switch(e.job){case"PLD":return new KB(e);case"WAR":return new jB(e);case"DRK":return new JB(e);case"GNB":return new G2(e);case"WHM":return new cF(e);case"SCH":return new oF(e);case"AST":return new nF(e);case"SGE":return new wB(e);case"MNK":return new yF(e);case"DRG":return new O2(e);case"NIN":return new fF(e);case"SAM":return new gB(e);case"RPR":return new SB(e);case"VPR":return new xF(e);case"BRD":return new A2(e);case"MCH":return new q2(e);case"DNC":return new _2(e);case"BLM":return new h2(e);case"SMN":return new bB(e);case"RDM":return new RB(e);case"PCT":return new tB(e);case"BLU":return new BF(e)}return new Jt(e)}let wy=e=>{};function VF(e){return`
		.castTimeTable {
			border-collapse: collapse;
			width: 100%;
		}
		.castTimeTable th, .castTimeTable td {
			text-align: center;
			padding: 0.15em;
			border: 1px solid ${e};
			width: 33%
		}
	`}function WF(e){const t=Vt(e.job,e.override.type);let n;const a=$e(e.override.type);if(t.isCoolDown)n=g({en:a+" full in "+e.override.timeTillFullOrDrop+"s",zh:`${a}${e.override.timeTillFullOrDrop}`});else{n=a;const c=g({en:" (",zh:""}),d=g({en:") ",zh:""});(Ye[e.override.type].mayBeToggled??!1)&&(n+=c+(e.override.effectOrTimerEnabled?g({en:"enabled",zh:""}):g({en:"disabled",zh:""}))+d),t.maxValue>1&&(n+=g({en:` (amount: ${e.override.stacks})`,zh:`${e.override.stacks}`})),t.maxTimeout>=0&&(e.override.type==="POLYGLOT"?e.override.timeTillFullOrDrop>0&&(n+=g({en:` next stack ready in ${e.override.timeTillFullOrDrop}s`,zh:`${e.override.timeTillFullOrDrop}`})):e.override.effectOrTimerEnabled&&(n+=g({en:` drops in ${e.override.timeTillFullOrDrop}s`,zh:`${e.override.timeTillFullOrDrop}`})))}n+=" ";let s;if(e.deleteFn){const c=e.deleteFn;s=l.jsx(Ys,{content:"[x]",onClickFn:d=>{c(e.override.type)}})}return l.jsxs("div",{style:{marginTop:10,color:"mediumpurple"},children:[n,s]})}function XF(e){const t=_=>{const O=e.initialResourceOverrides.findIndex(y=>y.type===_);O!==-1&&(e.initialResourceOverrides.splice(O,1),e.setInitialResourceOverrides(e.initialResourceOverrides))},n=e.initialResourceOverrides.map((_,O)=>l.jsx(WF,{job:e.job,override:_,deleteFn:t},O)),a=new Set(e.initialResourceOverrides.map(_=>_.type)),s=ro(e.job),d=s.entries().flatMap(([_,O])=>a.has(_)?[]:[{rsc:_,isCoolDown:O.isCoolDown?1:0}]).toArray().sort((_,O)=>_.isCoolDown-O.isCoolDown).map((_,O)=>l.jsx("option",{value:_.rsc,children:$e(_.rsc)},O)),f=e.selectedOverrideResource,h=s.get(f);let m,R=!0;if(h!==void 0){let _,O,y="-1",x,L="0",v;h.isCoolDown?(_=!0,O=!1,R=!1,y=e.overrideTimer,x=e.setOverrideTimer):(h.maxTimeout>=0?(_=!0,y=e.overrideTimer,x=e.setOverrideTimer):_=!1,h.maxValue>1||h.maxValue===h.defaultValue?(O=!0,L=e.overrideStacks,v=e.setOverrideStacks):O=!1,R=Ye[f].mayBeToggled??!1);const P=h.isCoolDown?g({en:"Time till full: ",zh:"CD"}):g(f==="POLYGLOT"?{en:"Time till next stack: ",zh:""}:{en:"Time till drop: ",zh:" "}),k=g({en:"enabled",zh:""});m=l.jsxs("div",{style:{margin:"6px 0"},children:[l.jsx("div",{hidden:!_,children:l.jsx(Kt,{description:P,defaultValue:y,onChange:x})}),l.jsx("div",{hidden:!O,children:l.jsx(Kt,{description:g({en:"Amount: ",zh:""}),defaultValue:L,onChange:v})}),l.jsxs("div",{hidden:!R,children:[l.jsx("input",{style:{position:"relative",top:3,marginRight:5},type:"checkbox",checked:e.overrideEnabled,onChange:w=>e.setOverrideEnabled(w.target.checked)}),l.jsx("span",{children:k})]})]})}const T=N.useContext(gn),S=wl(T,"bgMediumContrast"),I=_=>{_.preventDefault();const O=e.selectedOverrideResource,y=ro(e.job).get(O);let x=parseFloat(e.overrideTimer);const L=parseInt(e.overrideStacks),v=e.overrideEnabled;if(O==="POLYGLOT"&&e.overrideTimer===""&&(x=0),isNaN(L)||isNaN(x)){window.alert("some inputs are not numbers!");return}let P;if(y.isCoolDown){const k=y.maxStacks*y.cdPerStack;if(x<0||x>k){window.alert("invalid input timeout (must be in range [0, "+k+"])");return}P={type:O,timeTillFullOrDrop:x,stacks:y.maxStacks>1?L:1,effectOrTimerEnabled:!0}}else{if((y.maxValue>1||y.maxValue===y.defaultValue)&&(L<0||L>y.maxValue)){window.alert("invalid input amount (must be in range [0, "+y.maxValue+"])");return}if(y.maxTimeout>=0&&(x<0||x>y.maxTimeout)){window.alert("invalid input timeout (must be in range [0, "+y.maxTimeout+"])");return}P={type:O,timeTillFullOrDrop:y.maxTimeout>=0?x:-1,stacks:y.maxValue>1||y.maxValue===y.defaultValue?L:1,effectOrTimerEnabled:R||v}}e.setInitialResourceOverrides([...e.initialResourceOverrides,P])},C=l.jsx("div",{children:l.jsxs("form",{onSubmit:_=>I(_),style:{marginTop:16,outline:"1px solid "+S,outlineOffset:6},children:[l.jsx("select",{value:e.selectedOverrideResource,onChange:_=>{_.target&&e.setSelectedOverrideResource(_.target.value)},children:d}),m,l.jsx("input",{type:"submit",value:g({en:"add override",zh:""})})]})});return l.jsx("div",{style:{marginTop:10},children:l.jsx(kl,{title:"overrideInitialResources",titleNode:l.jsxs("span",{children:[g({en:"Override initial resources",zh:""})," ",l.jsx(Xe,{topic:"overrideInitialResources",content:g({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",style:{color:"orangered"},children:l.jsx("b",{children:"Can create invalid game states. Go over Instructions/Troubleshoot first and use carefully at your own risk!"})}),l.jsx("div",{className:"paragraph",children:"Also, currently thunder dot buff created this way doesn't actually tick. It just shows the remaining buff timer."}),l.jsx("div",{className:"paragraph",children:"I would recommend saving settings (stats, lines presets, timeline markers etc.) to files first, in case invalid game states really mess up the tool and a complete reset is required."})]}),zh:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",style:{color:"orangered"},children:l.jsx("b",{children:"/"})}),l.jsx("div",{className:"paragraph",children:"dot"}),l.jsx("div",{className:"paragraph",children:""})]})})})]}),content:l.jsxs("div",{children:[l.jsx("button",{onClick:_=>{e.initialResourceOverrides.length>0&&e.setInitialResourceOverrides([]),_.preventDefault()},children:g({en:"clear all overrides",zh:""})}),n,C]})})})}function qF(e){const t=p.game.lucidTickOffset.toFixed(3),n=g({en:"the random time offset of lucid dreaming ticks relative to mp ticks",zh:"buff"}),a=p.game.dotTickOffset.toFixed(3),s=g({en:"the random time offset of DoT ticks relative to mp ticks",zh:"DoT"}),c=p.gameConfig.procMode,d=p.gameConfig.initialResourceOverrides.length,f=p.gameConfig.legacy_casterTax,h=g({en:`WARNING: this record was created in an earlier version of XIV in the Shell and uses the deprecated caster tax of ${f}s instead of calculating from your FPS input below. Hover for details: `,zh:`${f}`}),m=Lt().warning,R=(I,C)=>{const _=B0[I];if(_.warningContent)return l.jsx("p",{style:{color:C},children:g(_.warningContent)})},T=g({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"The caster tax config is now replaced by 0.1s + FPS tax and is more precise. You can read more about FPS tax in the Github repository wiki's implementation notes section."}),l.jsx("div",{className:"paragraph",style:{color:m},children:"You are strongly encouraged to create a new record (in another timeline slot or from 'apply and reset') and migrate your fight plan. Support for loading legacy files might drop in the future."})]}),zh:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"0.1s /"}),l.jsx("div",{className:"paragraph",style:{color:m},children:""})]})}),S=l.jsxs("p",{style:{color:m},children:[h,l.jsx(Xe,{topic:"legacy-caster-tax",content:T})]});return l.jsxs("div",{style:{textDecoration:e.dirty?"line-through":"none",marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+Lt().bgHighContrast},children:[p.gameConfig.shellVersion<Fo.FpsTax?S:void 0,R(mt[e.job].implementationLevel,m),["CASTER","HEALER"].includes(mt[e.job].role)&&l.jsxs("div",{children:[g({en:"Lucid tick offset ",zh:"& "}),l.jsx(Xe,{topic:"lucidTickOffset",content:n}),": ",t]}),p.game.dotResources.length>0&&l.jsxs("div",{children:[g({en:"DoT tick offset ",zh:"& "}),l.jsx(Xe,{topic:"dotTickOffset",content:s}),": ",a]}),e.job==="MNK"&&l.jsxs("div",{children:[g({en:"SSS GCD",zh:"GCD"}),":"," ",p.gameConfig.adjustedSksGCD(5,p.game.inherentSpeedModifier()).toFixed(2)]}),l.jsxs("p",{children:[g({en:"Procs",zh:""}),": ",c]}),d>0&&l.jsx("p",{children:g({en:`${d} initial resource override(s)`,zh:`${d}`})})]})}function ZF(){const t=(()=>{const T=gt("playbackSettings");if(T)return JSON.parse(T)})(),[n,a]=N.useState((t==null?void 0:t.tickMode)??1),[s,c]=N.useState((t==null?void 0:t.timeScale)??Ra.Manual),d=(T,S)=>{const I=JSON.stringify({tickMode:S,timeScale:T});pt("playbackSettings",I)},f=T=>{if(!T||!T.target||isNaN(parseInt(T.target.value)))return;c(parseInt(T.target.value));const S=parseInt(T.target.value);isNaN(S)||(p.setTimeControlSettings({tickMode:S,timeScale:n}),d(n,S))},h=T=>{const S=parseFloat(T);a(S),isNaN(S)||(p.setTimeControlSettings({tickMode:s,timeScale:S}),d(S,n))};N.useEffect(()=>{p.setTimeControlSettings({tickMode:s,timeScale:n})});const m={position:"relative",top:3,marginRight:"0.75em"},R={display:"inline-block",marginRight:"0.5em"};return l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsxs("label",{style:R,children:[l.jsx("input",{style:m,type:"radio",onChange:f,value:Ra.RealTimeAutoPause,checked:s===Ra.RealTimeAutoPause,name:"tick mode"}),g({en:"real-time auto pause",zh:"("})]}),l.jsx(Xe,{topic:"ctrl-realTimeAutoPause",content:l.jsxs("div",{className:"toolTip",children:[g({en:l.jsx("div",{className:"paragraph",children:"*Recommended*"}),zh:l.jsx("div",{className:"paragraph",children:"**"})}),g({en:l.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",l.jsx("br",{}),"- animation locks and cast bars will play out in sped-up real time until done"]}),zh:l.jsx("div",{className:"paragraph",children:"- ; CDCD"})})]})}),l.jsx("br",{}),l.jsxs("label",{style:R,children:[l.jsx("input",{style:m,type:"radio",onChange:f,value:Ra.Manual,checked:s===Ra.Manual,name:"tick mode"}),g({en:"manual",zh:""})]}),l.jsx(Xe,{topic:"ctrl-manual",content:l.jsx("div",{className:"toolTip",children:g({en:l.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",l.jsx("br",{}),"- animation locks and cast times are skipped immediately"]}),zh:l.jsx("div",{className:"paragraph",children:"- ; CDCD"})})})})]}),l.jsx(Kt,{defaultValue:`${n}`,description:l.jsxs("span",{children:[g({en:"time scale ",zh:" "}),l.jsx(Xe,{topic:"timeScale",content:l.jsx("div",{children:g({en:"rate at which game time advances automatically (aka when in real-time)",zh:""})})}),":"," "]}),onChange:h})]})}function $F(e){const t=N.useContext(gn),n=e.imported?wl(t,"success"):wl(t,"text");return l.jsx(Kt,{style:{color:n},defaultValue:e.initial,description:e.description,onChange:a=>{e.dispatch({[e.name]:a}),e.removeImportedField(e.name)}})}function QF(e){const t=hi(N.useContext(gn)),[n,a]=N.useState(""),{imported:s,setImported:c}=e,d=async m=>{m.preventDefault();const R=URL.parse(n),T=new Headers;try{if(R&&R.hostname==="etro.gg"){const S=R.pathname.split("/");if(S[1]!=="gearset"&&S.length!==3)throw new Error("Invalid etro gearset link (hover ? in URL input box for details)");T.append("Content-Type","application/json");const I=await fetch("https://etro.gg/api/gearsets/"+S[2],{method:"GET",headers:T});if(I.ok){const C=await I.json(),_=new Map(C.totalParams.map(P=>[P.name,P.value])),O=C.totalParams.length>0?C.totalParams[0].value:0;if(!(C.jobAbbrev in mt))throw new Error("Imported gearset was for a job ("+C.jobAbbrev+") that XIV in the Shell doesn't support");const y=bt.getSubstatBase(parseFloat(C.level)).toString(),x=_.get("SPS")??y,L=_.get("SKS")??y,v=["job","level","criticalHit","directHit","determination","main"];_.has("SPS")&&v.push("spellSpeed"),_.has("SKS")&&v.push("skillSpeed"),_.has("PIE")&&v.push("piety"),_.has("TEN")&&v.push("tenacity"),_.has("Weapon Damage")&&v.push("wd"),e.dispatch({job:C.jobAbbrev,level:C.level,spellSpeed:x,skillSpeed:L,wd:_.get("Weapon Damage"),criticalHit:_.get("CRT"),directHit:_.get("DH"),determination:_.get("DET"),piety:_.get("PIE"),tenacity:_.get("TEN"),main:O}),e.setImportedFields(v),c(!0)}else throw console.error(I),new Error("etro load failed (please check your link)")}else if(R&&R.hostname==="xivgear.app"){const S=R.searchParams.get("page");if(!S)throw new Error("xivgear link must be to a specific set (hover ? in URL input box for details)");const I=S.startsWith("sl|")?S.substr(3):S;T.append("Content-Type","application/json");const C=await fetch("https://api.xivgear.app/fulldata/"+I,{method:"GET",headers:T});if(C.ok){const _=await C.json();if(!(_.job in mt))throw new Error("Imported gearset was for a job ("+_.job+") that XIV in the Shell doesn't support");const O=_.sets[0].computedStats,y=Math.max(...["strength","dexterity","intelligence","mind"].map(v=>O[v]??0)).toString(),x=Math.max(O.wdPhys??0,O.wdMag??0).toString(),L={job:_.job,level:_.level,spellSpeed:O.spellspeed,skillSpeed:O.skillspeed,criticalHit:O.crit,directHit:O.dhit,determination:O.determination,piety:O.piety,tenacity:O.tenacity,wd:x,main:y};e.dispatch(L),e.setImportedFields(Object.keys(L)),c(!0)}else throw console.error("xivgear load failed: "+C),new Error("xivgear load failed (please check your link)")}else throw new Error("Invalid gearset link (must be from etro.gg or xivgear.app)")}catch(S){console.error(S),window.alert(S.message)}},f=l.jsx("a",{href:"https://etro.gg",target:"_blank",rel:"noreferrer",children:"etro"}),h=l.jsx("a",{href:"https://xivgear.app",target:"_blank",rel:"noreferrer",children:"xivgear"});return l.jsxs("form",{onSubmit:d,children:[g({en:l.jsxs("span",{children:["Load stats from ",f,"/",h,":"," "]}),zh:l.jsxs("span",{children:["",f,"",h,""]})}),l.jsx(Xe,{topic:"gearImport",content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:g({en:l.jsxs("span",{children:["Enter and ",l.jsx(Fi,{text:"Load"})," a link to a gearset from xivgear.app or etro.gg, edit the rest of config, then"," ",l.jsx(Fi,{text:"apply and reset"}),"."]}),zh:l.jsxs("span",{children:["xivgear.appetro.gg",l.jsx(Fi,{text:""}),"",l.jsx(Fi,{text:""}),""]})})}),l.jsx("p",{children:g({en:"etro: Copy/paste the link to the set (example: https://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e)",zh:"etrohttps://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e"})}),l.jsx("p",{children:g({en:'xivgear: At the top of the page, click "Export" -> "Selected Set" -> "Link to This Set" -> "Generate" (example: https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a)',zh:'xivgear "Export" -> "Selected Set" -> "Link to This Set" -> "Generate"https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a'})})]})}),l.jsxs("div",{style:{position:"relative",marginTop:5},children:[l.jsx(Kt,{style:{display:"inline-block"},width:25,description:"",onChange:m=>a(m)}),l.jsx("span",{children:" "}),l.jsx("input",{style:{display:"inline-block"},type:"submit",value:g({en:"Load",zh:""})}),l.jsx(v1,{style:{display:s?"inline":"none",color:t.success,position:"relative",top:4,marginLeft:8}})]})]})}function WC(e,t,n,a){const s=parseInt(n),c=parseInt(e),d=parseFloat(t);let f,h;if(isNaN(s)||isNaN(c)||isNaN(d)||c<bt.getSubstatBase(s))f="n/a",h="n/a";else{const m=bt.preTaxGcd(s,c,2.5,a);f=m.toFixed(2),h=bt.afterFpsTax(d,m).toFixed(3)}return{gcdStr:f,taxedGcdStr:h}}function JF(e){const t=new Map(e.map(d=>[d.type,d]));if(t.has("ASTRAL_FIRE")&&t.has("UMBRAL_ICE")){const d=t.get("ASTRAL_FIRE").stacks,f=t.get("UMBRAL_ICE").stacks;if(d>0&&f>0)return window.alert("shouldn't have both AF and UI stacks"),!1}let n=0,a=0,s=0;if(t.has("ASTRAL_FIRE")&&(n=t.get("ASTRAL_FIRE").stacks),t.has("UMBRAL_ICE")&&(a=t.get("UMBRAL_ICE").stacks),t.has("UMBRAL_HEART")&&(s=t.get("UMBRAL_HEART").stacks),s>0&&n===0&&a===0)return window.alert("since there's at least one UH stack, there should also be Enochian and AF or UI"),!1;let c=!1;return(n>0||a>0||s>0)&&(c=!0),t.has("POLYGLOT")&&t.get("POLYGLOT").timeTillFullOrDrop>0&&!c?(window.alert("since a timer for polyglot is set (time till next stack > 0), there must also be AF/UI"),!1):!0}function ej(){const e=hi(N.useContext(gn)),[t,n]=N.useState(void 0),[a,s]=N.useState(Fo.AllaganGcdFormula),[c,d]=N.useState([]),[f,h]=N.useState("0"),[m,R]=N.useState("0"),[T,S]=N.useState(!0),I=le=>{k(!0),d(le),O(le)},[C,_]=N.useState("NEVER"),O=le=>{const ge=new Set(le.map(be=>be.type)),Ie=ro(v.job).keys().find(be=>!ge.has(be))??"NEVER";_(Ie)},[y,x]=N.useState(!1);function L(le,ge){var be,ye;const Ie={...le,...ge};if(!Object.is(Ie,le)){if(Ie.dirty=ge.dirty??!0,ge.job!==void 0&&ge.job!==le.job){const Ue=new Ta(NT(ge.job,parseInt(ge.level??le.level))),Je=tc(Ue).inherentSpeedModifier();if(n(Je),ge.job===((be=p.record.config)==null?void 0:be.job))Object.assign(Ie,p.gameConfig.serialized()),d(p.gameConfig.initialResourceOverrides);else{d([]);const It=((ye=ro(ge.job).keys().toArray())==null?void 0:ye[0])??"NEVER";_(It),Object.assign(Ie,FG(ge.job))}}if(ge.level!==void 0&&ge.level!==le.level){const Ue=new Ta(NT(le.job,parseInt(ge.level))),Je=tc(Ue).inherentSpeedModifier();n(Je)}x(parseInt(Ie.level)!==p.gameConfig.level||Ie.job!==p.gameConfig.job)}return Ie}const[v,P]=N.useReducer(L,{job:"BLM",level:`${ot.lvl100}`,spellSpeed:"0",skillSpeed:"0",criticalHit:"0",directHit:"0",determination:"0",piety:"0",animationLock:"0",fps:"0",gcdSkillCorrection:"0",timeTillFirstManaTick:"0",countdown:"0",randomSeed:"",procMode:Ti.RNG,tenacity:"0",wd:"0",main:"0",dirty:!1}),k=le=>P({dirty:le}),w=le=>ge=>P({[le]:ge}),[K,ne]=N.useState(!1),fe=Object.fromEntries(Object.keys(v).map(le=>[le,!1])),[ue,he]=N.useState(fe),Ee=le=>{he({...ue,...Object.fromEntries(le.map(ge=>[ge,!0]))})},q=le=>{he({...ue,[le]:!1})},Q=()=>{he(fe),ne(!1)};N.useEffect(()=>{wy=le=>{s(le.shellVersion),I(le.initialResourceOverrides),P({...Object.fromEntries(Object.entries(le).flatMap(([ge,Ie])=>ge!=="initialResourceOverrides"?[[ge,Ie.toString()]]:[]))}),k(!1),Q(),O(le.initialResourceOverrides)}});const j=le=>ue[le]?e.success:e.text,G=l.jsxs("div",{style:{marginBottom:10},children:[l.jsx("span",{children:g({en:"job: ",zh:""})}),l.jsx("select",{style:{outline:"none",color:j("job")},value:v.job,onChange:le=>{q("job"),P({job:le.target.value})},children:Gs.filter(le=>mt[le].implementationLevel!=="UNIMPLEMENTED").map(le=>{const ge=g({en:le,zh:mt[le].zh}),Ie=mt[le].implementationLevel;return Ie!=="LIVE"?l.jsx("option",{value:le,children:ge+` (${g(B0[Ie].label??{en:""})})`},le):l.jsx("option",{value:le,children:ge},le)})})]}),{gcdStr:Z,taxedGcdStr:te}=WC(v.spellSpeed,v.fps,v.level,t),{gcdStr:D,taxedGcdStr:F}=WC(v.skillSpeed,v.fps,v.level,t),Y=a>=Fo.FpsTax?e.text:e.warning,B=v.job,W=mt[B].role==="CASTER"||mt[B].role==="HEALER",re={en:W?"spell":"skill",zh:W?"":""},oe=le=>bt.preTaxGcd(parseFloat(v.level),parseFloat(W?v.spellSpeed:v.skillSpeed),le,t),Ae=le=>bt.afterFpsTax(parseFloat(v.fps),oe(le)),me=l.jsxs("div",{children:[l.jsx("style",{children:VF(e.bgHighContrast)}),l.jsx("div",{style:{marginBottom:10},children:g({en:`Preview numbers based on your current ${re.en} speed and FPS input:`,zh:`${re.zh}`})}),l.jsx("table",{className:"castTimeTable",children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("th",{children:g({en:"GCD time",zh:"GCD"})}),l.jsx("th",{children:g({en:"After FPS tax",zh:""})})]}),[2.5,3,3.5,4].map((le,ge)=>l.jsxs("tr",{children:[l.jsxs("td",{children:[oe(le).toFixed(2)," (",le.toFixed(2)," ",g({en:"base",zh:""}),")"]}),l.jsx("td",{children:Ae(le).toFixed(3)})]},"gcdPreview"+ge.toString()))]})})]}),Ce=(le,ge)=>{if(le.preventDefault(),!ge&&y){console.error("attempted to apply w/o reset, but job or level changed");return}if(JF(c)){let Ie=v.randomSeed;if(Ie.length===0){for(let Je=0;Je<4;Je++)Ie+=Math.floor(Math.random()*10).toString();P({randomSeed:Ie})}const be=["spellSpeed","skillSpeed","criticalHit","directHit","determination","animationLock","fps","gcdSkillCorrection","timeTillFirstManaTick","countdown","level","wd","main","piety","tenacity"];if(be.map(Je=>isNaN(parseFloat(v[Je].toString()))).some(Je=>Je)){window.alert("Some config fields are not numbers!");return}if(!(v.job in mt)){window.alert("Invalid job: "+v.job);return}const ye=p.gameConfig.serialized(),Ue=p.record.serialized();p.setConfigAndRestart({job:v.job,randomSeed:Ie.trim(),procMode:v.procMode,initialResourceOverrides:c,...Object.fromEntries(be.map(Je=>[Je,parseFloat(v[Je].toString())]))},ge),p.undoStack.push(new UG(ye,p.gameConfig.serialized(),ge?Ue:void 0)),k(!1),x(!1),Q(),p.updateAllDisplay(),p.scrollToTime()}},Ne=["criticalHit","directHit","determination","piety","animationLock"].map(le=>l.jsx($F,{name:le,description:Pu(le),initial:v[le].toString(),dispatch:P,imported:ue[le],removeImportedField:ge=>q(ge)},le)),pe=l.jsxs("div",{style:{marginBottom:16},children:[l.jsxs("div",{children:[l.jsx("span",{children:g({en:"level: ",zh:""})}),l.jsxs("select",{style:{outline:"none",color:j("level")},value:v.level,onChange:le=>P({level:le.target.value}),children:[(v.level==="100"||B!=="BLU")&&l.jsx("option",{value:ot.lvl100,children:"100"},ot.lvl100),(v.level==="90"||B!=="BLU")&&l.jsx("option",{value:ot.lvl90,children:"90"},ot.lvl90),l.jsx("option",{value:ot.lvl80,children:"80"},ot.lvl80),l.jsx("option",{value:ot.lvl70,children:"70"},ot.lvl70)]})]}),l.jsxs("div",{children:[l.jsx(Kt,{style:{display:"inline-block",color:j("spellSpeed")},defaultValue:v.spellSpeed,description:Pu("spellSpeed"),onChange:w("spellSpeed")}),l.jsxs("span",{children:[" ","(GCD: ",Z," ",l.jsx(Xe,{topic:"gcdPreview",content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:g({en:"Preview of displayed GCD based on your spell speed.",zh:"GCD."})}),l.jsx("p",{children:g({en:`Measured average GCD should be ${te} due to FPS tax.`,zh:`GCD${te}`})})]})}),")"]})]}),l.jsxs("div",{children:[l.jsx(Kt,{style:{display:"inline-block",color:j("skillSpeed")},defaultValue:v.skillSpeed,description:Pu("skillSpeed"),onChange:w("skillSpeed")}),l.jsxs("span",{children:[" ","(GCD: ",D," ",l.jsx(Xe,{topic:"sksGcdPreview",content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:g({en:"Preview of displayed GCD based on your skill speed.",zh:"GCD."})}),l.jsx("p",{children:g({en:`Measured average GCD should be ${F} due to FPS tax.`,zh:`GCD${F}`})})]})}),")"]})]}),Ne,l.jsxs("div",{children:[l.jsx(Kt,{componentColor:Y,style:{display:"inline-block"},defaultValue:v.fps,description:Pu("fps"),onChange:w("fps")}),l.jsxs("span",{children:[" ","(",g({en:`${oe(2.5).toFixed(2)}s w/ tax`,zh:`${oe(2.5).toFixed(2)}s+`}),": ",Ae(2.5).toFixed(3)," ",l.jsx(Xe,{topic:"gcdTaxPreview",content:me}),")"]})]}),l.jsx(Kt,{componentColor:Y,defaultValue:v.gcdSkillCorrection,description:l.jsxs("span",{children:[g({en:"GCD correction",zh:"GCD"})," ",l.jsx(Xe,{topic:"cast-time-correction",content:g({en:"Leaving this at 0 will probably give you the most accurate simulation. But if you want to manually correct your GCD skill durations (including casts) for whatever reason, you can put a small number (can be negative)",zh:"0GCD"})}),":"," "]}),onChange:w("gcdSkillCorrection")}),l.jsx(Kt,{defaultValue:v.timeTillFirstManaTick,description:g({en:"time till first MP tick: ",zh:""}),onChange:w("timeTillFirstManaTick")}),l.jsx(Kt,{defaultValue:v.countdown,description:l.jsxs("span",{children:[g({en:"countdown ",zh:" "}),l.jsx(Xe,{topic:"countdown",content:g({en:"can use a negative countdown to start from a specific time of fight",zh:""})}),":"," "]}),onChange:w("countdown")}),l.jsx(Kt,{defaultValue:v.randomSeed,description:l.jsxs("span",{children:[g({en:"random seed ",zh:" "}),l.jsx(Xe,{topic:"randomSeed",content:g({en:"can be anything, or leave empty to get 4 random digits.",zh:"4"})}),":"," "]}),onChange:w("randomSeed")}),l.jsxs("div",{children:[l.jsxs("span",{children:[g({en:"proc mode ",zh:"BUFF "}),l.jsx(Xe,{topic:"procMode",content:g({en:"Default RNG: 40% Firestarter",zh:"RNG40%AlwaysNever"})}),":"," "]}),l.jsxs("select",{style:{outline:"none"},value:v.procMode,onChange:le=>P({procMode:le.target.value}),children:[l.jsx("option",{value:Ti.RNG,children:"RNG"},Ti.RNG),l.jsx("option",{value:Ti.Never,children:"Never"},Ti.Never),l.jsx("option",{value:Ti.Always,children:"Always"},Ti.Always)]})]}),l.jsx(XF,{job:v.job,initialResourceOverrides:c,overrideTimer:f,overrideStacks:m,overrideEnabled:T,setInitialResourceOverrides:I,selectedOverrideResource:C,setSelectedOverrideResource:_,setOverrideTimer:h,setOverrideStacks:R,setOverrideEnabled:S})]});return l.jsxs("div",{style:{marginBottom:20},children:[l.jsx(QF,{imported:K,setImported:ne,setImportedFields:Ee,dispatch:P}),l.jsx("br",{}),G,l.jsx(qF,{job:p.getActiveJob(),dirty:v.dirty}),pe,l.jsx("p",{style:{paddingBottom:5},children:g({en:"You can also import/export fights from/to local files at the bottom of the page.",zh:""})}),l.jsx("div",{className:"invisibleScrollbar",style:{boxSizing:"border-box",width:"100%",position:"absolute",paddingRight:5,paddingLeft:5,bottom:0,left:0,overflowY:"scroll"},children:l.jsxs("div",{style:{width:"100%",boxSizing:"border-box",backgroundColor:e.background,borderTop:"1px solid "+e.bgMediumContrast,paddingTop:5,paddingBottom:5,display:"flex",flexDirection:"row",justifyContent:"space-between",gap:5},children:[l.jsxs("button",{onClick:le=>Ce(le,!1),style:{width:"100%",fontWeight:!y&&v.dirty?"bold":"normal",textDecoration:y?"line-through":void 0},disabled:y,children:[g({en:"apply",zh:""}),y&&" ",y&&l.jsx(Xe,{topic:"applyWithoutReset",content:g({en:"Must reset timeline because job or level changed.",zh:""})}),!y&&v.dirty?"*":""]}),l.jsxs("button",{onClick:le=>Ce(le,!0),style:{width:"100%",fontWeight:v.dirty?"bold":"normal"},children:[g({en:"apply and reset",zh:""}),v.dirty?"*":""]})]})})]})}function Py(e){let t=Gs[0],n=0;return Gs.forEach(a=>{const s=e.reduce((c,d)=>Yk(a,d)?c+1:c,0);s>n&&(t=a,n=s)}),t}var Ul,pf,Gy;class tj{constructor(){Ve(this,Ul);J(this,"presetLines",[]);Oe(this,Ul,Gy).call(this)}serialized(){return{fileType:Ia.SkillSequencePresets,presets:this.presetLines.map(({actions:t,job:n})=>t.serialized())}}deserializeAndAppend(t){for(const n of t.presets){const a=Nc.deserialize(n.actions);a.name=n.name;const s=a.actions.flatMap(c=>c.info.type===Ze.Skill?[c.info.skillName]:[]);this.addLine(a,n.job??Py(s))}}getLinesForJob(t){return this.presetLines.flatMap(({actions:n,job:a})=>a===t?[n]:[])}addLine(t,n){this.presetLines.push({actions:t,job:n}),xl(),Oe(this,Ul,pf).call(this)}deleteLine(t){for(let n=0;n<this.presetLines.length;n++)if(this.presetLines[n].actions===t){this.presetLines.splice(n,1),xl(),Oe(this,Ul,pf).call(this);return}console.assert(!1)}deleteAllLines(){this.presetLines=[],xl(),Oe(this,Ul,pf).call(this)}}Ul=new WeakSet,pf=function(){pt("presetLines",JSON.stringify(this.serialized()))},Gy=function(){const t=gt("presetLines");if(t!==null){const n=JSON.parse(t);return this.deserializeAndAppend(n),!0}return!1};const nj=new Set(["BLIZZARD","FIRE","BLIZZARD_II","FIRE_II","BLIZZARD_III","FIRE_III","FREEZE","FLARE","BLIZZARD_IV","FIRE_IV","DESPAIR","HIGH_FIRE_II","HIGH_BLIZZARD_II","FLARE_STAR"]),ij=new Set(["FOUL","XENOGLOSSY","PARADOX"]),pl=new Set([]),ii=e=>p.getUntargetableMask()&&p.timeline.duringUntargetable(e),vc=(e,t)=>p.getUntargetableMask()?p.timeline.getTargetableDurationBetween(e,t):t-e;function Ns(e){return e.info.type===Ze.Skill&&p.game.dotSkills.includes(e.info.skillName)}function aj(e,t,n){console.assert(Ns(e),`${e.getNameForMessage()} is not registered as a dot skill`);const a=e.getInitialPotency(),s={castTime:e.tmp_startLockTime?e.tmp_startLockTime-p.gameConfig.countdown:0,applicationTime:e.applicationTime?e.applicationTime-p.gameConfig.countdown:0,displayedModifiers:[],gap:0,override:0,mainPotencyHit:!0,baseMainPotency:0,baseDotPotency:0,initialHitCalculationModifiers:[],tickCalculationModifiers:[],totalNumTicks:0,numHitTicks:0,potencyWithoutPot:0,potPotency:0,partyBuffPotency:0,targetCount:e.targetCount,mainHitFalloff:(a==null?void 0:a.falloff)??0};s.gap=e.getOverTimeGap(t,"damage"),s.override=e.getOverTimeOverrideAmount(t,"damage"),s.baseMainPotency=(a==null?void 0:a.base)??0,s.initialHitCalculationModifiers=(a==null?void 0:a.modifiers)??[],s.mainPotencyHit=e.hitBoss(ii),s.tickCalculationModifiers=s.initialHitCalculationModifiers.filter(h=>h.source!==U.COMBO&&h.source!==U.POSITIONAL),t==="WILDFIRE"&&s.displayedModifiers.push(U.NO_CDH);for(let h=0;h<s.initialHitCalculationModifiers.length;h++){const m=s.initialHitCalculationModifiers[h].source;[U.ENO,U.FUGETSU,U.NO_MERCY,U.POWER_SURGE,U.LANCE_CHARGE,U.LIFE_OF_THE_DRAGON,U.BATTLE_LITANY,U.FIGHT_OR_FLIGHT,U.MOON_FLUTE,U.WHISTLE,U.BRISTLE,U.TINGLEA,U.TINGLEB,U.DIVINATION,U.CHAIN_STRAT].includes(m)&&s.displayedModifiers.push(m)}e.getDotPotencies(t).forEach((h,m)=>{h.hasResolved()&&(s.totalNumTicks++,s.baseDotPotency=h.base,h.hasHitBoss(ii)&&s.numHitTicks++)});const c=e.getPotency({tincturePotencyMultiplier:1,includePartyBuffs:!1,untargetable:ii,includeSplash:!0}).applied,d=e.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),includePartyBuffs:!1,untargetable:ii,includeSplash:!0}).applied,f=e.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),includePartyBuffs:!0,untargetable:ii,includeSplash:!0}).applied;return s.potencyWithoutPot=c,s.potPotency=d-c,s.partyBuffPotency=f-d,s}function oj(e){const t={basePotency:0,displayedModifiers:[],calculationModifiers:[],falloff:1,targetCount:1};if(e.info.type===Ze.Skill){const n=e.info.skillName,a=e.getInitialPotency();if(a)if(t.targetCount=e.targetCount,t.falloff=a.falloff??1,nj.has(n)){t.basePotency=a.base,t.calculationModifiers=a.modifiers;for(const s of a.modifiers){const c=s.source;if(c!==U.ENO&&c!==U.POT){t.displayedModifiers.push(c);break}}}else if(ij.has(n))for(const s of a.modifiers){const c=s.source;if(c===U.ENO){t.basePotency=a.base,t.displayedModifiers=[c],t.calculationModifiers=a.modifiers;break}}else if(Ns(e))t.basePotency=a.base,e.info.targetCount=a.targetCount;else{t.basePotency=a.base;for(const s of a.modifiers){const c=s.source;c!==U.POT&&(t.displayedModifiers.push(c),t.calculationModifiers.push(s))}}return t}else return console.assert(!1),t}function lj(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function sj(e,t){const n=oj(t),a={mainTableIndex:-1,expandedNode:n};for(let s=0;s<e.length;s++)if(t.info.type===Ze.Skill&&t.info.skillName===e[s].skillName&&lj(n.displayedModifiers,e[s].displayedModifiers)&&t.targetCount===e[s].targetCount)return a.mainTableIndex=s,a;return a}function Sa(e){return!pl.has(e)}function rj(){return pl.size===0}function XC(e){e.include&&pl.has(e.skillNameOrDoT)?(pl.delete(e.skillNameOrDoT),e.skillNameOrDoT==="DoT"?p.game.dotSkills.forEach(t=>pl.delete(t)):p.game.dotSkills.includes(e.skillNameOrDoT)&&pl.delete("DoT")):(pl.add(e.skillNameOrDoT),e.skillNameOrDoT!=="DoT"&&p.game.dotSkills.includes(e.skillNameOrDoT)&&pl.add("DoT")),p.displayCurrentState(),p.updateStats()}function cj(e){const t={totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}},n=p.record.getFirstSelection(),a=p.record.getLastSelection();if(n&&a&&n.tmp_startLockTime!==void 0&&a.tmp_endLockTime!==void 0){t.totalDuration=a.tmp_endLockTime-n.tmp_startLockTime;const s=p.gameConfig.countdown;t.targetableDuration=vc(n.tmp_startLockTime-s,a.tmp_endLockTime-s)}return p.record.iterateSelected(s=>{if(s.info.type===Ze.Skill&&!(s.info.skillName in jo)){const c=Sa(s.info.skillName);p.game.skillsList.get(s.info.skillName).cdName==="cd_GCD"&&c&&(s.hitBoss(ii)?t.gcdSkills.applied++:s.resolved()||t.gcdSkills.pending++);const f=s.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:ii,includePartyBuffs:!0,excludeDoT:Ns(s)&&!Sa("DoT"),includeSplash:!0});c&&(t.potency.applied+=f.applied,t.potency.pending+=f.snapshottedButPending)}}),t}function uj(e){let t=zu.Normal;p.displayingUpToDateGameState||(t=zu.Historical),p.record.getFirstSelection()&&(t=zu.Selected);const n={applied:0,pending:0},a={applied:0,pending:0},s=[],c={totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},d=new Map,f=new Map,h=m=>{if(m.info.type===Ze.Skill){const R=m.info.skillName,T=Sa(R),S=R in jo;p.game.skillsList.get(R).cdName==="cd_GCD"&&T&&(m.hitBoss(ii)?a.applied++:m.resolved()||a.pending++);const C=m.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:ii,includePartyBuffs:!0,includeSplash:!0,excludeDoT:Ns(m)&&!Sa("DoT")});if(T&&!S&&(n.applied+=C.applied,n.pending+=C.snapshottedButPending),m.resolved()){const _=sj(s,m);_.mainTableIndex<0&&(s.push({skillName:R,displayedModifiers:_.expandedNode.displayedModifiers,basePotency:S?0:_.expandedNode.basePotency,calculationModifiers:_.expandedNode.calculationModifiers,usageCount:0,hitCount:0,totalPotencyWithoutPot:0,showPotency:m.anyPotencies(),potPotency:0,potCount:0,partyBuffPotency:0,falloff:_.expandedNode.falloff,targetCount:_.expandedNode.targetCount}),_.mainTableIndex=s.length-1);const O=m.hitBoss(ii);if(s[_.mainTableIndex].usageCount+=1,O&&(s[_.mainTableIndex].hitCount+=1),S)return;const y=m.getPotency({tincturePotencyMultiplier:1,untargetable:ii,includePartyBuffs:!1,excludeDoT:Ns(m)&&!Sa("DoT"),includeSplash:!0}).applied,x=m.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:ii,includePartyBuffs:!1,excludeDoT:Ns(m)&&!Sa("DoT"),includeSplash:!0}).applied,L=m.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:ii,includePartyBuffs:!0,excludeDoT:Ns(m)&&!Sa("DoT"),includeSplash:!0}).applied;s[_.mainTableIndex].totalPotencyWithoutPot+=y,s[_.mainTableIndex].potPotency+=x-y,s[_.mainTableIndex].partyBuffPotency+=L-x,O&&m.hasBuff(H.Tincture)&&(s[_.mainTableIndex].potCount+=1);let v=f.get(R)??0;v+=L,f.set(R,v),T&&(c.totalPotencyWithoutPot+=y,c.totalPotPotency+=x-y,c.totalPartyBuffPotency+=L-x),m.getAllDotPotencies().forEach((P,k)=>{let w=d.get(k);const K=p.game.excludedDoTs.includes(k);w||(w={tableRows:[],summary:{cumulativeGap:0,cumulativeOverride:0,timeSinceLastDoTDropped:0,totalTicks:0,maxTicks:p.getMaxTicks(p.game.time,k,K),dotCoverageTimeFraction:p.getDotCoverageTimeFraction(p.game.getDisplayTime(),k),totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},lastDoT:void 0},d.set(k,w));const ne=aj(m,k,w.lastDoT);w.tableRows.push(ne),w.lastDoT=m,w.summary.cumulativeGap+=ne.gap,w.summary.cumulativeOverride+=ne.override,w.summary.totalTicks+=ne.numHitTicks,w.summary.totalPotencyWithoutPot+=ne.potencyWithoutPot,w.summary.totalPotPotency+=ne.potPotency,w.summary.totalPartyBuffPotency+=ne.partyBuffPotency})}}};return t===zu.Selected?p.record.iterateSelected(h):p.record.iterateAll(h),d.forEach((m,R)=>{if(m.lastDoT){const T=m.lastDoT.applicationTime;console.assert(T!==void 0,`DoT node for ${R} was not resolved`);const S=T+p.game.getStatusDuration(R),I=vc(S,p.game.getDisplayTime()),C=p.game.getDisplayTime()-S;C>0&&(m.summary.cumulativeGap+=I,m.summary.timeSinceLastDoTDropped=C)}else{const T=vc(0,Math.max(0,p.game.getDisplayTime()));m.summary.cumulativeGap=T,m.summary.timeSinceLastDoTDropped=T}}),s.sort((m,R)=>{if(m.showPotency!==R.showPotency){const T=m.showPotency?1:0;return(R.showPotency?1:0)-T}else if(m.skillName!==R.skillName){const T=f.get(m.skillName)??0,S=f.get(R.skillName)??0;return T===S?m.skillName.localeCompare(R.skillName):S-T}else{if(m.targetCount!==R.targetCount)return R.targetCount-m.targetCount;if(m.displayedModifiers.length!==R.displayedModifiers.length)return R.displayedModifiers.length-m.displayedModifiers.length;for(let T=0;T<m.displayedModifiers.length;T++){const S=m.displayedModifiers[T]-R.displayedModifiers[T];if(S!==0)return S}return 0}}),{time:p.game.time,tinctureBuffPercentage:e.tinctureBuffPercentage,totalPotency:n,lastDamageApplicationTime:e.lastDamageApplicationTime,countdown:p.gameConfig.countdown,gcdSkills:a,mainTable:s,mainTableSummary:c,dotTables:d,mode:t}}var zu=(e=>(e[e.Normal=0]="Normal",e[e.Historical=1]="Historical",e[e.Selected=2]="Selected",e))(zu||{});let xT=e=>{},By=e=>{};function qC(e){const t=Gk(e.buff),n=Hk(e.buff);return l.jsx("span",{style:{borderRadius:2,border:"1px solid "+n,fontSize:11,marginRight:4,padding:"1px 4px",background:n+"1f"},children:l.jsx("b",{style:{color:n},children:t})})}function WR(e){let t=e.basePotency,n=e.basePotency.toFixed(2)+g({en:"(base)",zh:"()"});e.explainUntargetable&&(n+=g({en:"(untargetable)",zh:"()"}));let a="";if(e.calc.forEach(s=>{s.kind==="adder"&&s.additiveAmount>0&&(t+=s.additiveAmount,a+=" + "+s.additiveAmount+"("+NN(s.source)+")")}),a&&(n="[ "+n+a+" ]"),e.calc.forEach(s=>{s.kind==="multiplier"&&s.potencyFactor!==1&&(t*=s.potencyFactor,n+="  "+s.potencyFactor+"("+NN(s.source)+")")}),e.targetCount&&e.falloff!==void 0&&e.targetCount>1){const s=1+(1-e.falloff)*(e.targetCount-1);n=`[ ${n} ]  ${s}(${e.targetCount}${g({en:" targets",zh:""})})`,t*=s}return l.jsxs("span",{style:{textDecoration:e.includeInStats?"none":"line-through"},children:[t.toFixed(2)," ",l.jsx(Xe,{topic:e.helpTopic,content:n})]})}function dj(){const[e,t]=N.useState("8"),n=s=>{t(s);const c=parseFloat(s);isNaN(c)||(p.setTinctureBuffPercentage(c),pt("tinctureBuffPercentage",s))};N.useEffect(()=>{const s=gt("tinctureBuffPercentage");s!==null&&n(s)},[]);const a=l.jsxs("span",{children:[g({en:"exclude damage when untargetable",zh:"Boss0"})," ",l.jsx(Xe,{topic:"untargetableMask",content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:g({en:"Having this checked will exclude damages from untargetable phases.",zh:"Boss"})}),l.jsx("div",{className:"paragraph",children:g({en:'You can mark up such phases using timeline markers of type "Untargetable".',zh:"  "})}),l.jsx("div",{className:"paragraph",children:g({en:"This is just a statistics helper though. For example it doesn't prevent you from using skills when the boss is untargetable.",zh:"  "})})]})})]});return l.jsxs("div",{children:[l.jsx(Kt,{defaultValue:e,description:g({en:" tincture potency buff ",zh:" "}),onChange:n,width:2,style:{display:"inline"}}),l.jsx("span",{children:"%"}),l.jsx(Fu,{uniqueName:"untargetableMask",label:a,onChange:s=>{p.setUntargetableMask(s)}})]})}const ZC="0.375em 0.75em";class Fy extends di.Component{constructor(n){super(n);J(this,"selected",{totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}});J(this,"data",{time:0,tinctureBuffPercentage:0,countdown:0,totalPotency:{applied:0,pending:0},lastDamageApplicationTime:0,gcdSkills:{applied:0,pending:0},mainTable:[],mainTableSummary:{totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},dotTables:new Map,mode:0});xT=a=>{this.data={...this.data,...a},this.forceUpdate()},By=a=>{this.selected={...this.selected,...a},this.forceUpdate()}}componentWillUnmount(){xT=n=>{}}render(){const n=hi(this.context),a=rj(),s=g({en:": ",zh:""}),c=g({en:" (",zh:""}),d=g({en:") ",zh:""}),f=a?"":g({en:" (checked only)",zh:""}),h=this.data.lastDamageApplicationTime-this.data.countdown,m=vc(0,h),R=this.data.lastDamageApplicationTime>-this.data.countdown,T=R?h.toFixed(3).toString():"N/A";let S=g({en:"Total potency",zh:""}),I=g({en:"Selected potency",zh:""});if(this.data.tinctureBuffPercentage>0){const G=c+g({en:"pot +",zh:" +"})+this.data.tinctureBuffPercentage+"%"+d;S+=G,I+=G}S+=f,I+=f,S+=s+this.data.totalPotency.applied.toFixed(2),I+=s+this.selected.potency.applied.toFixed(2),this.data.totalPotency.pending>0&&(S+=c+this.data.totalPotency.pending.toFixed(2)+g({en:" pending",zh:""})+d),this.selected.potency.pending>0&&(I+=c+this.selected.potency.pending.toFixed(2)+g({en:" pending",zh:""})+d);let C=g({en:"GCD skills",zh:"GCD"})+f+s+this.data.gcdSkills.applied,_=g({en:"Selected GCD skills",zh:"GCD"})+f+s+this.selected.gcdSkills.applied;this.data.gcdSkills.pending>0&&(C+=c+"+"+this.data.gcdSkills.pending+g({en:" not yet applied",zh:""})+d),this.selected.gcdSkills.pending>0&&(_+=c+"+"+this.selected.gcdSkills.pending+g({en:" not yet applied",zh:""})+d);const O=p.game.overTimeEffectGroups.filter(G=>G.reportName&&!G.isHealing).map(G=>{let Z=G.reportName+g({en:" uptime",zh:""})+s,te=0,D=0,F=0;return G.groupedEffects.forEach(Y=>{const B=this.data.dotTables.get(Y.effectName);B&&(te+=B.summary.dotCoverageTimeFraction,D+=B.summary.totalTicks,F=Math.max(F,B.summary.maxTicks))}),Z+=(te*100).toFixed(2)+"%",Z+=c+g({en:"ticks",zh:""})+s+D+"/"+F+d,l.jsx("div",{children:Z},`dot-uptime-${G.reportName}`)});let y;const x=this.selected.targetableDuration>0;this.selected.totalDuration>0&&(y=l.jsxs("div",{style:{flex:1,color:n.accent},children:[l.jsxs("div",{children:[g({en:"Selected duration",zh:""}),s,this.selected.totalDuration.toFixed(3)]}),l.jsx("div",{children:I}),l.jsxs("div",{children:[g({en:"Selected PPS",zh:"PPS"}),s,x?(this.selected.potency.applied/this.selected.targetableDuration).toFixed(2):"N/A"]}),l.jsx("div",{children:_})]}));const L=l.jsxs("div",{style:{display:"flex",marginBottom:10,flexDirection:"row"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{color:this.data.mode!==0?n.historical:n.text},children:[l.jsxs("div",{children:[g({en:"Last damage application time",zh:""}),s,T]}),l.jsx("div",{children:S}),l.jsxs("div",{children:["PPS"," ",l.jsx(Xe,{topic:"ppsNotes",content:l.jsxs("div",{className:"toolTip",children:[l.jsx("div",{className:"paragraph",children:g({en:"(total applied potency of checked skills) / (total targetable duration from 0s until last damage application time).",zh:" / (0s - )"})}),l.jsx("div",{className:"paragraph",children:g({en:"could be inaccurate if any damage happens before pull, or if some damage's not applied yet",zh:"0sPPS"})})]})}),s,R?(this.data.totalPotency.applied/m).toFixed(2):"N/A"]}),l.jsx("div",{children:C}),O]}),l.jsxs("div",{style:{marginTop:10},children:[l.jsx(dj,{}),l.jsx(Hl,{fileFormat:Yo.Csv,getContentFn:()=>({body:p.getDamageLogCsv()}),filename:"damage-log",displayName:g({en:"download detailed damage log as CSV file",zh:"CSV"})})]})]}),y]}),v=function(G){return{verticalAlign:"middle",boxSizing:"border-box",display:"inline-block",width:G+"%",padding:ZC}},P=function(G){return p.game.dotSkills.includes(G)},k=function(G){return P(G)?!0:["AUTOMATON_QUEEN","WILDFIRE",...Object.keys(jo)].includes(G)},w=function(G){const Z=G.row.skillName===G.lastRowSkill,te=[];te.push(G.row.displayedModifiers.map((Ce,Be)=>l.jsx(qC,{buff:Ce},Be)));const D=Sa(G.row.skillName),F=[];!Z&&G.row.basePotency>0&&!(G.row.skillName in jo)&&F.push(l.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:D,onChange:()=>{XC({skillNameOrDoT:G.row.skillName,include:!D})}},"main")),!Z&&P(G.row.skillName)&&F.push(l.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:Sa("DoT"),onChange:()=>{XC({skillNameOrDoT:"DoT",include:!Sa("DoT")})}},"dot"));let Y;Z||(Y=l.jsxs("span",{children:[l.jsxs("span",{style:{textDecoration:D?"none":"line-through",color:D?n.text:n.bgHighContrast},children:[ba(G.row.skillName)," ",P(G.row.skillName)?l.jsx(Xe,{topic:"potencyStats-thunder",content:g({en:"See table below for details",zh:""})}):void 0]}),P(G.row.skillName)?l.jsxs("span",{style:{textDecoration:Sa("DoT")?"none":"line-through",color:Sa("DoT")?n.text:n.bgHighContrast},children:[l.jsx("br",{}),g({en:"(DoT)",zh:"DoT"})," "]}):void 0]}));let B;G.row.targetCount&&G.row.basePotency>0&&(B=l.jsx("span",{style:{textDecoration:D?"none":"line-through"},children:G.row.targetCount}));let W;G.row.basePotency>0&&!k(G.row.skillName)&&(W=l.jsx(WR,{includeInStats:D,basePotency:G.row.basePotency,helpTopic:"mainTable-potencyCalc-"+G.key,calc:G.row.calculationModifiers,falloff:G.row.falloff,targetCount:G.row.targetCount}));const re=G.row.usageCount-G.row.hitCount,oe=l.jsxs("span",{style:{textDecoration:D?"none":"line-through"},children:[G.row.hitCount,re>0?l.jsxs("span",{style:{color:n.timeline.untargetableDamageMark+"af"},children:[" ","+",re," ",l.jsx(Xe,{topic:"mainTable-numUntargetableUsages-"+G.key,content:g({en:"usage(s) when untargetable",zh:"Boss"})})]}):void 0]});let Ae;G.row.showPotency&&!(G.row.skillName in jo)&&(Ae=l.jsxs("span",{style:{textDecoration:D?"none":"line-through"},children:[G.row.totalPotencyWithoutPot.toFixed(2),G.row.potPotency>0?l.jsxs("span",{style:{color:D?n.timeline.potCover:n.bgHighContrast},children:[" ","+",G.row.potPotency.toFixed(2),"(",g({en:"pot",zh:""}),")(",G.row.potCount,")"]}):void 0,G.row.partyBuffPotency>0?l.jsxs("span",{style:{color:D?n.accent:n.bgHighContrast},children:[" ","+",G.row.partyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]}));const me={textAlign:"left",position:"relative",borderTop:Z?"none":"1px solid "+n.bgMediumContrast};return D||(me.color=n.bgHighContrast),l.jsxs("div",{style:me,children:[l.jsx("div",{style:v(3),children:F}),l.jsx("div",{style:v(18),children:Y}),l.jsx("div",{style:v(8),children:B}),l.jsx("div",{style:v(19),children:te}),l.jsx("div",{style:v(14),children:W}),l.jsx("div",{style:v(8),children:oe}),l.jsx("div",{style:v(30),children:Ae})]},G.key)},K=[];for(let G=0;G<this.data.mainTable.length;G++)K.push(w({row:this.data.mainTable[G],key:G,lastRowSkill:G===0?void 0:this.data.mainTable[G-1].skillName}));const ne=function(G){const Z=[];Z.push(G.row.displayedModifiers.map((me,Ce)=>l.jsx(qC,{buff:me},Ce)));const te=G.row.gap.toFixed(3),D=G.row.gap>0?l.jsx("span",{children:te}):l.jsx("span",{}),F=G.row.override.toFixed(3),Y=G.row.override>0?l.jsx("span",{children:F}):l.jsx("span",{}),B=l.jsx(WR,{basePotency:G.row.mainPotencyHit?G.row.baseMainPotency:0,includeInStats:!0,explainUntargetable:!G.row.mainPotencyHit,helpTopic:G.name+"Table-main-"+G.key,calc:G.row.initialHitCalculationModifiers,targetCount:G.row.targetCount,falloff:G.row.mainHitFalloff}),W=l.jsx(WR,{basePotency:G.row.baseDotPotency,includeInStats:!0,helpTopic:G.name+"Table-dot-"+G.key,calc:G.row.tickCalculationModifiers,targetCount:G.row.targetCount,falloff:0}),re=G.row.totalNumTicks-G.row.numHitTicks,oe=l.jsxs("span",{children:[G.row.numHitTicks,re>0?l.jsxs("span",{style:{color:n.timeline.untargetableDamageMark+"af"},children:[" ","+",re," ",l.jsx(Xe,{topic:"thunderTable-numUntargetableTicks-"+G.key,content:g({en:"tick(s) when untargetable",zh:"BossDoT"})})]}):void 0]}),Ae=l.jsxs("span",{children:[G.row.potencyWithoutPot.toFixed(2),G.row.potPotency>0?l.jsxs("span",{style:{color:n.timeline.potCover},children:[" ","+",G.row.potPotency.toFixed(2),"(",g({en:"pot",zh:""}),")"]}):void 0,G.row.partyBuffPotency>0?l.jsxs("span",{style:{color:n.accent},children:[" ","+",G.row.partyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]});return l.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+n.bgMediumContrast},children:[l.jsx("div",{style:v(8),children:G.row.castTime.toFixed(3)}),l.jsx("div",{style:v(8),children:G.row.applicationTime.toFixed(3)}),l.jsx("div",{style:v(12),children:Z}),l.jsx("div",{style:v(10),children:D}),l.jsx("div",{style:v(10),children:Y}),l.jsx("div",{style:v(10),children:B}),l.jsx("div",{style:v(10),children:W}),l.jsx("div",{style:v(8),children:oe}),l.jsx("div",{style:v(24),children:Ae})]},G.key)},fe=[];this.data.dotTables.forEach((G,Z)=>{const te=[];for(let D=0;D<G.tableRows.length;D++)te.push(ne({name:Z,row:G.tableRows[D],key:D}));fe.push({dotName:Z,tableRows:te})});const ue={display:"inline-block",padding:ZC};let he=g(a?{en:"Applied Skills",zh:""}:{en:"Applied Skills (Checked Only)",zh:""}),Ee="";if(this.data.mode===1){const G=(this.data.time-this.data.countdown).toFixed(3)+"s",Z=c+g({en:"up till "+G,zh:""+G})+d;he+=Z,Ee=Z}else if(this.data.mode===2){const G=c+g({en:"from selected skills",zh:""})+d;he+=G,Ee+=G}let q=n.text;this.data.mode===1?q=n.historical:this.data.mode===2&&(q=n.accent);const Q=l.jsxs("div",{id:"damageTable",style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[l.jsx("div",{style:{...v(100),textAlign:"center",marginBottom:10},children:l.jsx("b",{style:{color:q},children:he})}),l.jsxs("div",{style:{outline:"1px solid "+n.bgMediumContrast},children:[l.jsxs("div",{children:[l.jsx("div",{style:{display:"inline-block",width:"21%"},children:l.jsx("span",{style:ue,children:l.jsx("b",{children:g({en:"skill",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"27%"},children:l.jsx("span",{style:ue,children:l.jsx("b",{children:g({en:"targets",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"14%"},children:l.jsx("span",{style:ue,children:l.jsx("b",{children:g({en:"potency",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:ue,children:l.jsx("b",{children:g({en:"count",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"30%"},children:l.jsx("span",{style:ue,children:l.jsx("b",{children:g({en:"total",zh:""})})})})]}),K,l.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+n.bgMediumContrast},children:[l.jsx("div",{style:v(70)}),l.jsx("div",{style:v(30),children:l.jsxs("span",{children:[this.data.mainTableSummary.totalPotencyWithoutPot.toFixed(2),this.data.mainTableSummary.totalPotPotency>0?l.jsxs("span",{style:{color:n.timeline.potCover},children:[" ","+",this.data.mainTableSummary.totalPotPotency.toFixed(2),g({en:" (pot +"+this.data.tinctureBuffPercentage+"%)",zh:"( +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,this.data.mainTableSummary.totalPartyBuffPotency>0?l.jsxs("span",{style:{color:n.accent},children:[" ","+",this.data.mainTableSummary.totalPartyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]})})]})]})]}),j=fe.map(G=>{var F;const Z=G.tableRows,te=(F=this.data.dotTables.get(G.dotName))==null?void 0:F.summary;if(te===void 0)return l.jsx(l.Fragment,{});const D=$e(G.dotName)+Ee;return l.jsxs("div",{style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[l.jsx("div",{style:{...v(100),textAlign:"center",marginBottom:10},children:l.jsx("b",{style:{color:q},children:D})}),l.jsxs("div",{style:{outline:"1px solid "+n.bgMediumContrast},children:[l.jsxs("div",{children:[l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:ue,children:l.jsx("b",{children:g({en:"cast time",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:ue,children:l.jsx("b",{children:g({en:"application time",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"12%"},children:l.jsx("span",{style:ue})}),l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsxs("span",{style:ue,children:[l.jsxs("b",{children:[g({en:"gap",zh:"DoT"})," "]}),l.jsx(Xe,{topic:"dot-gap-title",content:g({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"DoT coverage time gap since pull or previous application"}),l.jsx("div",{className:"paragraph",children:"The last row also includes gap at the beginning and end of the fight"})]}),zh:l.jsx("div",{children:"DoTDoT"})})})]})}),l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsxs("span",{style:ue,children:[l.jsxs("b",{children:[g({en:"override",zh:"DoT"})," "]}),l.jsx(Xe,{topic:"dot-override-title",content:g({en:l.jsx("div",{children:"Overridden DoT time from previous application"}),zh:l.jsx("div",{children:"DoT"})})})]})}),l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsx("span",{style:ue,children:l.jsx("b",{children:g({en:"initial",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsx("span",{style:ue,children:l.jsx("b",{children:g({en:"DoT",zh:"DoT"})})})}),l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:ue,children:l.jsx("b",{children:g({en:"ticks",zh:"DoT"})})})}),l.jsx("div",{style:{display:"inline-block",width:"24%"},children:l.jsx("span",{style:ue,children:l.jsx("b",{children:g({en:"total",zh:""})})})})]}),Z,l.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+n.bgMediumContrast},children:[l.jsx("div",{style:v(28)}),l.jsx("div",{style:v(10),children:te.cumulativeGap.toFixed(3)}),l.jsx("div",{style:v(10),children:te.cumulativeOverride.toFixed(3)}),l.jsx("div",{style:v(20)}),l.jsx("div",{style:v(8),children:p.game.fullTimeDoTs.includes(G.dotName)?l.jsxs(l.Fragment,{children:[te.totalTicks,"/",te.maxTicks]}):l.jsx(l.Fragment,{children:te.totalTicks})}),l.jsxs("div",{style:v(24),children:[te.totalPotencyWithoutPot.toFixed(2),te.totalPotPotency>0?l.jsxs("span",{style:{color:n.timeline.potCover},children:[" ","+",te.totalPotPotency.toFixed(2),g({en:"(pot +"+this.data.tinctureBuffPercentage+"%)",zh:"( +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,te.totalPartyBuffPotency>0?l.jsxs("span",{style:{color:n.accent},children:[" ","+",te.totalPartyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]})]})]})]},`dot-table-${G.dotName}`)});return l.jsxs("div",{children:[L,l.jsxs("div",{children:[Q,j]})]})}}J(Fy,"contextType",gn);const Dd=e=>{e.job==="RDM"&&e.tryConsumeResource("DUALCAST")&&p.reportWarning({kind:"custom",en:"dualcast dropped"})},Xa=e=>e.job!=="NIN"||!e.hasResourceAvailable("TEN_CHI_JIN"),qa=e=>{e.job==="NIN"&&e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")};ut(pi,"INTERJECT",18,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Interject.png",startsAuto:!0});ut(Yl,"HEAD_GRAZE",24,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Head Graze.png"});pi.forEach(e=>{Qe(e,"REPRISAL",1,{timeout:15})});qe(pi,"REPRISAL",22,"cd_REPRISAL",{rscType:"REPRISAL",applicationDelay:.62,cooldown:60,duration:e=>e.hasTraitUnlocked("ENHANCED_REPRISAL")&&15||10,assetPath:"Role/Reprisal.png",startsAuto:!0});fi.forEach(e=>{Qe(e,"FEINT",1,{timeout:15})});qe(fi,"FEINT",22,"cd_FEINT",{rscType:"FEINT",applicationDelay:.537,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_FEINT")&&15||10,assetPath:"Role/Feint.png",validateAttempt:Xa,onConfirm:qa});[...Kl,...Da].forEach(e=>{Qe(e,"ADDLE",1,{timeout:15})});qe([...Da,...Kl],"ADDLE",8,"cd_ADDLE",{rscType:"ADDLE",applicationDelay:.621,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_ADDLE")&&15||10,assetPath:"Role/Addle.png"});pi.forEach(e=>{Qe(e,"RAMPART",1,{timeout:20})});qe(pi,"RAMPART",8,"cd_RAMPART",{rscType:"RAMPART",applicationDelay:.62,cooldown:90,assetPath:"Role/Rampart.png"});fi.forEach(e=>{Qe(e,"TRUE_NORTH",1,{timeout:10})});qe(fi,"TRUE_NORTH",50,"cd_TRUE_NORTH",{rscType:"TRUE_NORTH",applicationDelay:0,cooldown:45,maxCharges:2,assetPath:"Role/True North.png",validateAttempt:Xa,onConfirm:qa});[...Oa,...Da,...Kl].forEach(e=>{Qe(e,"SWIFTCAST",1,{timeout:10})});qe([...Oa,...Da,...Kl],"SWIFTCAST",18,"cd_SWIFTCAST",{rscType:"SWIFTCAST",applicationDelay:0,cooldown:40,assetPath:"Role/Swiftcast.png"});[...Oa,...Da,...Kl].forEach(e=>{Qe(e,"LUCID_DREAMING",1,{timeout:21})});qe([...Oa,...Da,...Kl],"LUCID_DREAMING",14,"cd_LUCID_DREAMING",{rscType:"LUCID_DREAMING",applicationDelay:.623,cooldown:60,assetPath:"Role/Lucid Dreaming.png",onApplication:(e,t)=>{const n=e.resources.get("LUCID_DREAMING");n.node=t,n.tickCount=0;const a=e.findNextQueuedEventByTag(Ri.LucidTick);a&&a.addTag(Ri.ManaGain)}});[...pi,...fi,...Yl].forEach(e=>{Qe(e,"ARMS_LENGTH",1,{timeout:6.5})});qe([...pi,...fi,...Yl],"ARMS_LENGTH",32,"cd_ARMS_LENGTH",{rscType:"ARMS_LENGTH",applicationDelay:.62,cooldown:120,assetPath:"Role/Arms Length.png",validateAttempt:Xa,onConfirm:qa});[...Oa,...Da,...Kl].forEach(e=>{Qe(e,"SURECAST",1,{timeout:6.5})});qe([...Oa,...Da,...Kl],"SURECAST",44,"cd_SURECAST",{rscType:"SURECAST",applicationDelay:0,cooldown:120,assetPath:"Role/Surecast.png"});fi.forEach(e=>{Qe(e,"BLOODBATH",1,{timeout:20})});qe(fi,"BLOODBATH",8,"cd_BLOODBATH",{rscType:"BLOODBATH",applicationDelay:.625,cooldown:90,assetPath:"Role/Bloodbath.png",validateAttempt:Xa,onConfirm:qa});ut([...fi,...Yl],"SECOND_WIND",12,"cd_SECOND_WIND",{healingPotency:600,applicationDelay:.625,cooldown:120,assetPath:"Role/Second Wind.png",validateAttempt:Xa,onConfirm:qa});ut(pi,"PROVOKE",15,"cd_PROVOKE",{applicationDelay:.62,cooldown:30,assetPath:"Role/Provoke.png",drawsAggro:!0,startsAuto:!0});ut(pi,"SHIRK",48,"cd_SHIRK",{applicationDelay:0,cooldown:120,assetPath:"Role/Shirk.png"});ut(pi,"LOW_BLOW",25,"cd_LOW_BLOW",{applicationDelay:.62,cooldown:25,assetPath:"Role/Low Blow.png",startsAuto:!0});ia(Oa,"ESUNA",10,{manaCost:400,castTime:0,applicationDelay:1.14,assetPath:"Role/Esuna.png"});ut(Oa,"RESCUE",48,"cd_RESCUE",{applicationDelay:0,cooldown:120,assetPath:"Role/Rescue.png"});ut(fi,"LEG_SWEEP",10,"cd_LEG_SWEEP",{applicationDelay:.625,cooldown:40,assetPath:"Role/Leg Sweep.png",validateAttempt:Xa,onConfirm:qa});qe(Gs,"TINCTURE",1,"cd_TINCTURE",{rscType:"TINCTURE",applicationDelay:.64,cooldown:270,assetPath:"General/Tincture.png",validateAttempt:Xa,onConfirm:we(Dd,qa)});qe(Gs,"SPRINT",1,"cd_SPRINT",{rscType:"SPRINT",applicationDelay:.133,cooldown:60,assetPath:"General/Sprint.png",validateAttempt:Xa,onConfirm:we(Dd,qa)});pi.forEach(e=>{Qe(e,"SHIELD_WALL",1,{timeout:10}),Qe(e,"STRONGHOLD",1,{timeout:12})});const hI=e=>Object.keys(y0).forEach(t=>{t!=="UNKNOWN"&&e.tryConsumeResource(t)});Ci(pi,"SHIELD_WALL","cd_LIMIT_BREAK_1",{tier:"1",applicationDelay:.45,animationLock:1.93,onApplication:e=>{hI(e),e.gainStatus("SHIELD_WALL")}});Ci(pi,"STRONGHOLD","cd_LIMIT_BREAK_2",{tier:"2",applicationDelay:.89,animationLock:3.86,onApplication:e=>{hI(e),e.gainStatus("STRONGHOLD")}});pi.forEach(e=>{const t=mt[e].limitBreak??"UNKNOWN",n=mt[e].limitBreakBuff??"UNKNOWN";Qe(e,n,1,{timeout:8}),Ci(e,t,"cd_LIMIT_BREAK_3",{tier:"3",applicationDelay:1.34,animationLock:3.86,onApplication:a=>{hI(a),a.gainStatus(n)}})});Ci(Oa,"HEALING_WIND","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,healingPotency:25,applicationDelay:.76,animationLock:2.1});Ci(Oa,"BREATH_OF_THE_EARTH","cd_LIMIT_BREAK_2",{tier:"2",castTime:2,healingPotency:50,applicationDelay:.8,animationLock:5.13});Oa.forEach(e=>{const t=mt[e].limitBreak??"UNKNOWN";Ci(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:2,healingPotency:100,applicationDelay:.8,animationLock:8.1})});Ci(fi,"BRAVER","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.86,potency:1e3,validateAttempt:Xa,onConfirm:qa});Ci(fi,"BLADEDANCE","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.28,animationLock:3.86,potency:2200,validateAttempt:Xa,onConfirm:qa});fi.forEach(e=>{const t=mt[e].limitBreak??"UNKNOWN";Ci(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:2.26,animationLock:3.7,potency:3500,validateAttempt:Xa,onConfirm:qa})});Ci(Yl,"BIGSHOT","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.1,potency:540});Ci(Yl,"DESPERADO","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:2.49,animationLock:3.1,potency:1170});Yl.forEach(e=>{const t=mt[e].limitBreak??"UNKNOWN";Ci(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:3.16,animationLock:3.7,potency:1890})});Ci(Da,"SKYSHARD","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:1.64,animationLock:3.1,onConfirm:Dd,potency:600});Ci(Da,"STARSTORM","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.75,animationLock:5.1,onConfirm:Dd,potency:1300});Da.forEach(e=>{const t=mt[e].limitBreak??"UNKNOWN";Ci(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:4.5,animationLock:8.1,onConfirm:e==="RDM"?Dd:void 0,potency:2100})});const $C="stdtick";var io,bs,Ic,Aa,Os,hd,Go,_c,fd,Ds,ys,vs,Hn,gc,wa,Dl,xe,Il,jy,_l,Yu,HT,$n,Nf,zy,kT,Ss,UT;class hj{constructor(){Ve(this,xe);J(this,"timeScale");J(this,"shouldLoop");J(this,"tickMode");J(this,"timeline");Ve(this,io);J(this,"gameConfig");J(this,"record");J(this,"imageExportConfig");J(this,"timelineDrawOptions",SG);J(this,"queuedPastes");J(this,"clipboardMode");J(this,"game");Ve(this,bs,0);Ve(this,Ic,!0);Ve(this,Aa);Ve(this,Os,[]);Ve(this,hd,[]);Ve(this,Go,[]);Ve(this,_c,new Map);Ve(this,fd,new Map);Ve(this,Ds,new Map);Ve(this,ys,new Map);J(this,"savedHistoricalGame");J(this,"savedHistoricalRecord");Ve(this,vs,!1);Ve(this,Hn,!1);Ve(this,gc,!1);Ve(this,wa,!1);J(this,"displayingUpToDateGameState",!0);Ve(this,Dl,0);J(this,"lastSkillTime",0);J(this,"undoStack");this.timeScale=1,this.shouldLoop=!1,this.queuedPastes=0,this.tickMode=Ra.RealTimeAutoPause,this.timeline=new zP,this.timeline.reset(),ke(this,io,new tj),this.gameConfig=new Ta(df),this.game=tc(this.gameConfig),this.record=new ko,this.record.config=this.gameConfig,this.imageExportConfig={wrapThresholdSeconds:JSON.parse(gt("img: wrapThresholdSeconds")??"0"),includeTime:JSON.parse(gt("img: includeTime")??"true")},this.clipboardMode=gt("radio: clipboardMode")??"plain",ke(this,Aa,-this.gameConfig.countdown),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.undoStack=new vG,Oe(this,xe,_l).call(this)}get inputLocked(){return this.shouldLoop||this.queuedPastes>0}updateStats(){Oe(this,xe,Yu).call(this),Oe(this,xe,HT).call(this)}updateAllDisplay(t=this.game){wy(t.config.serialized()),this.updateStatusDisplay(t),this.updateSkillButtons(t),this.updateTimelineDisplay(),this.updateStats(),sE(this.getActiveJob())}checkRecordValidity(t,n,a=!1){console.assert(t.config!==void 0);const s={isValid:!0,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0};if(n===void 0)return console.log("no edit happened"),s;Oe(this,xe,_l).call(this,!1);const c=t.config??this.gameConfig;this.game=tc(c),this.record=new ko,this.record.config=c,ke(this,Aa,-c.countdown),Oe(this,xe,Il).call(this,this.record.config);const d=Oe(this,xe,Ss).call(this,{line:t,replayMode:xn.Edited,firstEditedNodeIndex:n,selectionStart:t.getFirstSelection(),selectionEnd:t.getLastSelection()});return this.record.selectionStartIndex=t.selectionStartIndex,this.record.selectionStartIndex=t.selectionStartIndex,s.isValid=d.invalidActions.length===0,s.invalidActions=d.invalidActions,s.skillUseTimes=d.skillUseTimes,d.success&&(s.straightenedIfValid=this.record),this.displayingUpToDateGameState=a,s}displayHistoricalState(t,n){const a=t+this.gameConfig.countdown,s=this.record.getFirstSelection()!==void 0;Oe(this,xe,jy).call(this,()=>{const c=this.record;this.game=tc(this.gameConfig),this.record=new ko,this.record.config=this.gameConfig,ke(this,Aa,-this.gameConfig.countdown),Oe(this,xe,Il).call(this,this.record.config),Oe(this,xe,Ss).call(this,{line:c,replayMode:xn.Exact,maxReplayTime:a,cutoffIndex:n}),this.timeline.updateElem({type:ht.s_HistoricalCursor,time:this.game.time,displayTime:this.game.getDisplayTime(),enabled:!0}),this.updateStatusDisplay(this.game),this.updateSkillButtons(this.game),xl(),Oe(this,xe,Yu).call(this),this.timeline.drawElements()}),cE(!0),s&&Oe(this,xe,Yu).call(this,!0),Oe(this,xe,HT).call(this)}displayCurrentState(){this.displayingUpToDateGameState=!0,this.timeline.updateElem({type:ht.s_HistoricalCursor,enabled:!1,time:0,displayTime:0}),cE(!1),this.updateAllDisplay(this.game)}restart(){Oe(this,xe,_l).call(this),Oe(this,xe,Il).call(this,this.gameConfig)}getPresetLines(){return se(this,io).getLinesForJob(this.getActiveJob())}serializedPresets(){return se(this,io).serialized()}addSelectionToPreset(t="(untitled)"){console.assert(this.record.getFirstSelection());const n=this.record.getSelected();n.name=t,se(this,io).addLine(n,this.getActiveJob())}appendFilePresets(t){se(this,io).deserializeAndAppend(t)}loadBattleRecordFromFile(t){t.config===void 0&&(window.alert("Error loading record: saved record had no config object"),console.error(t)),t.config.procMode===void 0&&(t.config.rngProcs!==void 0?t.config.procMode=t.config.rngProcs?Ti.RNG:Ti.Never:t.config.procMode=Ti.RNG),t.config.fps===void 0&&(t.config.fps=df.fps),t.config.gcdSkillCorrection===void 0&&(t.config.gcdSkillCorrection=df.gcdSkillCorrection),t.config.level&&(t.config.level=parseInt(t.config.level)),t.config.skillSpeed===void 0&&(t.config.skillSpeed=bt.getSubstatBase(t.config.level)),t.config.shellVersion===void 0&&(t.config.shellVersion=Fo.Initial),t.config.job===void 0&&(t.config.job=Py(t.actions.flatMap(n=>n.skillName?[TS(n.skillName)]:[]))),fi.includes(t.config.job)||(t.config.initialResourceOverrides=t.config.initialResourceOverrides.filter(n=>![Ye.FLANK_POSITIONAL.name,Ye.REAR_POSITIONAL.name].includes(n.type))),ju(()=>{const n=new Ta(t.config);this.gameConfig=n,this.record=new ko,this.record.config=n,Oe(this,xe,_l).call(this),Oe(this,xe,Il).call(this,this.gameConfig);const a=Nc.deserialize(t.actions),s=Oe(this,xe,Ss).call(this,{line:a,replayMode:xn.Exact});if(!s.success){let c=`Error loading record- 
`;if(s.invalidActions.length>0){const d=s.invalidActions[0].node;if(d.info.type===Ze.Skill){const f=d.info.skillName?ba(d.info.skillName):"(unknown)";c+=`Stopped here because the next action ${f} can't be added: `}else c+=`Stopped here because the next action ${d.info.type} can't be added: `}c+=s.invalidActions[0].reason,window.alert(c)}})}applyEditedRecord(){const t=this.record;this.record=new ko,this.record.config=t.config,Oe(this,xe,_l).call(this),Oe(this,xe,Il).call(this,this.gameConfig);const n=Oe(this,xe,Ss).call(this,{line:t,replayMode:xn.Exact,removeTrailingIdleTime:!0});console.assert(n.success),t.selectionStartIndex!==void 0&&(this.record.selectSingle(t.selectionStartIndex),this.record.selectUntil(t.selectionEndIndex)),this.autoSave()}deleteSelectedSkills(){const t=this.record.selectionStartIndex;if(t!==void 0){this.record.deleteSelected();const n=ni();t<this.record.length?(this.record.selectSingle(t),this.displayHistoricalState(n.skillUseTimes[t],t)):this.displayCurrentState(),this.autoSave()}}getTincturePotencyMultiplier(){return 1+se(this,bs)*.01}setTinctureBuffPercentage(t){ke(this,bs,t),this.displayCurrentState(),Wo()}setUntargetableMask(t){ke(this,Ic,t),this.displayCurrentState(),Wo()}getUntargetableMask(){return se(this,Ic)}getMaxTicks(t,n,a){let s=0;const c=[n];return a||c.push($C),c.forEach(d=>{var f;(f=se(this,_c).get(d))==null||f.forEach(h=>{!ii(h-this.gameConfig.countdown)&&h<=t&&s++})}),s}getDotCoverageTimeFraction(t,n){return this.getOverTimeCoverageTimeFraction(t,n,se(this,Ds))}getHotCoverageTimeFraction(t,n){return this.getOverTimeCoverageTimeFraction(t,n,se(this,ys))}getOverTimeCoverageTimeFraction(t,n,a){if(t<=_n.epsilon)return 0;const s=a.get(n);if(!s)return 0;let c=0;s.forEach(f=>{if(f.tStartDisplay<=t){const h=Math.max(0,f.tStartDisplay);let m=f.tEndDisplay!==void 0&&f.tEndDisplay<=t?f.tEndDisplay:t;m=Math.max(0,m),c+=vc(h,m)}});const d=vc(0,t);return c/d}setTimelineOptions(t){this.timelineDrawOptions={...this.timelineDrawOptions,...t},this.updateTimelineDisplay()}getTimelineRenderingProps(){var s,c;const t=this.record.getFirstSelection()!=null&&this.record.getLastSelection()!=null;let n=this.gameConfig.countdown;const a=this.timeline.getAllSlotsTimeInfo();return a!==null&&(n=Math.max(n,a.countdown)),{timelineWidth:this.timeline.getCanvasWidth(),timelineHeight:this.timeline.getCanvasHeight(),scale:this.timeline.scale,countdown:n,tincturePotencyMultiplier:this.getTincturePotencyMultiplier(),untargetableMask:se(this,Ic),sharedElements:this.timeline.sharedElements,slots:this.timeline.slots,activeSlotIndex:this.timeline.activeSlotIndex,allMarkers:this.timeline.getAllMarkers(),untargetableMarkers:this.timeline.getUntargetableMarkers(),buffMarkers:this.timeline.getBuffMarkers(),showSelection:t,selectionStartDisplayTime:(((s=this.record.getFirstSelection())==null?void 0:s.tmp_startLockTime)??0)-this.gameConfig.countdown,selectionEndDisplayTime:(((c=this.record.getLastSelection())==null?void 0:c.tmp_endLockTime)??0)-this.gameConfig.countdown,drawOptions:this.timelineDrawOptions}}reportWarning(t){se(this,Hn)||this.timeline.addElement({type:ht.WarningMark,warningType:t,time:this.game.time,displayTime:this.game.getDisplayTime()})}reportComboBreak(){this.reportWarning({kind:"combobreak"})}resolvePotency(t){this.resolveAnyPotency(t,ht.DamageMark,se(this,Os)),Oe(this,xe,Yu).call(this)}resolveHealingPotency(t){this.resolveAnyPotency(t,ht.HealingMark,se(this,hd))}resolveOverTimePotency(t,n){n==="damage"?this.resolveAnyPotency(t,ht.DamageMark,se(this,Os)):this.resolveAnyPotency(t,ht.HealingMark,se(this,hd))}resolveAnyPotency(t,n,a){if(t===void 0)return;t.resolve(this.game.getDisplayTime()),ke(this,Aa,this.game.time),t.base===0&&(n=ht.AggroMark);let s=!1;if(t.modifiers.forEach(c=>{c.source===U.POT&&(s=!0)}),!se(this,Hn)){let c="{skill}@"+t.sourceTime.toFixed(3);t.description.length>0&&(c+=" "+t.description);const d={potency:t,sourceDesc:c,sourceSkill:t.sourceSkill},f=this.timeline.tryGetElement(this.game.time,n);f?(f.potencyInfos.push(d),s&&!f.buffs.includes("TINCTURE")&&f.buffs.push("TINCTURE")):this.timeline.addElement({type:n,potencyInfos:[d],buffs:s?["TINCTURE"]:[],time:this.game.time,displayTime:this.game.getDisplayTime()}),a.push({time:this.game.getDisplayTime(),source:t.sourceSkill+"@"+t.sourceTime,potency:t.getAmount({tincturePotencyMultiplier:1,includePartyBuffs:!0,includeSplash:!0}),buffs:s?["TINCTURE"]:[]})}}reportLucidTick(t,n){se(this,Hn)||this.timeline.addElement({type:ht.LucidMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportManaTick(t,n){se(this,Hn)||this.timeline.addElement({type:ht.MPTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportMeditateTick(t,n){se(this,Hn)||this.timeline.addElement({type:ht.MeditateTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportAutoTick(t,n){se(this,Hn)||this.timeline.addElement({type:ht.AutoTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportDotTick(t,n){this.reportOverTimeTick(t,se(this,_c),n)}reportHotTick(t,n){this.reportOverTimeTick(t,se(this,fd),n)}reportOverTimeTick(t,n,a){if(!se(this,Hn)){const s=a??$C;let c=n.get(s);c||(c=[],n.set(s,c)),c.push(t),this.updateStats()}}reportDotStart(t,n){this.reportOverTimeStart(t,n,"damage")}reportHotStart(t,n){this.reportOverTimeStart(t,n,"healing")}reportOverTimeStart(t,n,a){if(!se(this,Hn)){const s=a==="damage"?se(this,Ds):se(this,ys);let c=s.get(n);c||(c=[],s.set(n,c));const d=c.length;console.assert(d===0||c[d-1].tEndDisplay!==void 0),c.push({tStartDisplay:t,tEndDisplay:void 0})}}reportDotDrop(t,n){this.reportOverTimeDrop(t,n,"damage")}reportHotDrop(t,n){this.reportOverTimeDrop(t,n,"healing")}reportOverTimeDrop(t,n,a){if(!se(this,Hn)){const c=(a==="damage"?se(this,Ds):se(this,ys)).get(n);if(console.assert(c,`Reported dropping ${n} when no coverage was detected`),!c)return;const d=c.length;console.assert(d>0&&c[d-1].tEndDisplay===void 0),c[d-1].tEndDisplay=t}}updateStatusDisplay(t){const n=t.resources.get("NOT_CASTER_TAXED"),a=t.resources.get("NOT_ANIMATION_LOCKED"),s=t.cooldowns.get("cd_GCD"),c={gcdReady:s.stacksAvailable()>0,gcd:s.currentStackCd(),timeTillGCDReady:t.cooldowns.timeTillAnyStackAvailable("cd_GCD"),castLocked:t.resources.timeTillReady("NOT_CASTER_TAXED")>0,castLockTotalDuration:n.pendingChange?n.pendingChange.delay:0,castLockCountdown:t.resources.timeTillReady("NOT_CASTER_TAXED"),animLocked:t.resources.timeTillReady("NOT_ANIMATION_LOCKED")>0,animLockTotalDuration:a.pendingChange?a.pendingChange.delay:0,animLockCountdown:t.resources.timeTillReady("NOT_ANIMATION_LOCKED"),canMove:t.resources.get("MOVEMENT").available(1)},d=t.statusPropsGenerator;UO(f=>({time:t.getDisplayTime(),resources:d.getAllResourceViewProps(f),resourceLocks:c,enemyBuffs:d.getAllOtherTargetedBuffViewProps(),selfBuffs:d.getAllSelfTargetedBuffViewProps(),level:t.config.level}),d.statusLayoutFn)}updateTimelineDisplay(){this.timeline.setTimeSegment(0,this.game.time),xl(),td(),se(this,Hn)||this.timeline.updateElem({type:ht.s_Cursor,time:this.game.time,displayTime:this.game.getDisplayTime()}),this.timeline.drawElements()}updateSkillButtons(t){Vb(this.game.displayedSkills.getCurrentSkillNames(this.game).map(n=>t.getSkillAvailabilityStatus(n)))}setTimeControlSettings(t){this.timeScale=t.timeScale,this.tickMode=t.tickMode,this.shouldLoop=!1}setConfigAndRestart(t,n=!0){const a=this.gameConfig.job!==t.job,s=this.gameConfig.countdown,c=s<t.countdown;a&&!n&&(console.error("attempted to apply config without reset even though job changed; forcing reset"),n=!0),ju(()=>{this.gameConfig=new Ta({...t,shellVersion:VT.version}),n?this.record=new ko:c&&this.record.prependActionNode(yl(-s)),this.record.config=this.gameConfig,Oe(this,xe,_l).call(this),Oe(this,xe,Il).call(this,this.gameConfig),a&&sE(t.job)}),this.autoSave()}getDisplayedGame(){return this.displayingUpToDateGameState?this.game:this.savedHistoricalGame}getActiveJob(){return this.game.job}getSkillInfo(t){return t.game.getSkillAvailabilityStatus(t.skillName)}autoSave(){const t=this.record.serialized();this.timeline.saveCurrentSlot(t,this.gameConfig.countdown,this.game.time)}tryAutoLoad(){const t=gt("gameRecord");t!==null&&(console.log("migrating existing record to slot 0"),pt("gameRecord0",t),oT("gameRecord"));for(let s=0;s<Ga;s++)this.timeline.loadSlot(s);this.timeline.slots.length>0||this.timeline.addSlot();const a=parseInt(gt("activeSlotIndex")??"0");this.setActiveSlot(a>=Ga?0:a),this.undoStack.clear()}setActiveSlot(t){Oe(this,xe,Nf).call(this,{shouldLoop:!1}),ju(()=>{this.autoSave(),this.record.unselectAll(),this.timeline.loadSlot(t)||console.error(`failed to load timeline in cached active slot ${t}`)}),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.displayCurrentState(),pt("activeSlotIndex",t.toString())}cloneActiveSlot(){if(this.timeline.activeSlotIndex<0||this.timeline.activeSlotIndex>=this.timeline.slots.length){console.error("tried to clone slot with invalid activeSlotIndex "+this.timeline.activeSlotIndex);return}Oe(this,xe,Nf).call(this,{shouldLoop:!1}),ju(()=>{const t=this.record.serialized();this.timeline.addSlot(),this.loadBattleRecordFromFile(t),this.autoSave(),this.timeline.loadSlot(this.timeline.slots.length-1)}),this.displayCurrentState()}getDamageLogCsv(){const t=se(this,Os).map(n=>{let a=!1;n.buffs.forEach(c=>{c==="TINCTURE"&&(a=!0)});let s=n.potency;return a&&(s*=this.getTincturePotencyMultiplier()),[n.time,n.source,s]});return[["time","damageSource","potency"]].concat(t)}getActionsLogCsv(){const t=se(this,Go).map(n=>[n.time,n.action,n.isGCD,n.castTime]);return[["time","action","isGCD","castTime"]].concat(t)}getAmaSimCsv(){const t=O=>O===bn.TINCTURE.name?"Grade 4 Gemdraught":O.endsWith("(Ten)")||O.endsWith("(Chi)")||O.endsWith("(Jin)")?O.substring(0,O.length-6):O.replace(" 2"," II").replace(" 3"," III").replace(" 4"," IV"),n=this.getActiveJob(),a=pi.includes(n)||fi.includes(n),s=this.timeline.getBuffMarkers().map(O=>{const y=new Xf(O.description);let x=y.info.name;y.info.name===H.Card_TheSpear?x="The Spear":y.info.name===H.Card_TheBalance?x="The Balance":[H.RadiantFinale1,H.RadiantFinale2,H.RadiantFinale3].includes(y.info.name)&&(x="Radiant Finale");const L=y.info.name===H.Dokumori||y.info.name===H.ChainStratagem,v=()=>L?"Debuff Only":y.info.name===H.RadiantFinale1?'"1 Coda, Buff Only"':y.info.name===H.RadiantFinale2?'"2 Coda, Buff Only"':y.info.name===H.RadiantFinale3?'"3 Coda, Buff Only"':[H.ArmysPaeon,H.MagesBallad,H.WanderersMinuet,H.StandardFinish,H.TechnicalFinish].includes(y.info.name)?"Buff Only":y.info.name===H.Card_TheSpear?a?"Small":"Big":y.info.name===H.Card_TheBalance?a?"Big":"Small":"";return[O.time,x,y.info.job,v(),L?"Boss0":""]});let c=this.gameConfig.getOverrideStacks("MAGES_CODA")??0,d=this.gameConfig.getOverrideStacks("WANDERERS_CODA")??0,f=this.gameConfig.getOverrideStacks("ARMYS_CODA")??0,h=this.gameConfig.getOverrideStacks("RADIANT_CODA")??0;const m=se(this,Go).filter(O=>!O.action.includes("Toggle buff")).map(O=>{let y="";if(O.isDamaging&&O.targetCount!==void 0){y='"';for(let v=0;v<O.targetCount;v++)v!==0&&(y+=", "),y+="Boss"+v.toString();y+='"'}let x="";const L=c+d+f;return O.action==="Mage's Ballad"?c=1:O.action==="The Wanderer's Minuet"?d=1:O.action==="Army's Paeon"?f=1:O.action==="Radiant Finale"?L>0&&(h=L,x=`${L} Coda`,c=0,d=0,f=0):O.action==="Radiant Encore"&&h>0&&(x=`${h} Encore`,h=0),[O.time,t(O.action),"",x,y]}),R=["use_strict_skill_naming = False"],T=!(a||Yl.includes(n)),S={[ot.lvl70]:new Map([["WHM",162],["SCH",264],["AST",148],["SGE",177],["BLM",133],["SMN",264],["RDM",162],["PCT",148]]),[ot.lvl80]:new Map([["WHM",189],["SCH",308],["AST",172],["SGE",206],["BLM",155],["SMN",308],["RDM",189],["PCT",172]]),[ot.lvl90]:new Map([["WHM",216],["SCH",353],["AST",197],["SGE",236],["BLM",177],["SMN",353],["RDM",216],["PCT",197]]),[ot.lvl100]:new Map([["WHM",244],["SCH",398],["AST",222],["SGE",266],["BLM",200],["SMN",398],["RDM",244],["PCT",222]])};let I={job_class:n,det_stat:this.gameConfig.determination,crit_stat:this.gameConfig.criticalHit,dh_stat:this.gameConfig.directHit,tenacity:this.gameConfig.tenacity,speed_stat:T?this.gameConfig.spellSpeed:this.gameConfig.skillSpeed,version:x1,level:this.gameConfig.level,wd:this.gameConfig.wd,main_stat:this.gameConfig.main};S[this.gameConfig.level].has(n)&&(I={...I,healer_or_caster_strength:S[this.gameConfig.level].get(n)}),R.push("stats = "+JSON.stringify(I));const C=this.timeline.getUntargetableMarkers().map(O=>`(${O.time}, ${O.time+O.duration}),`);C.length>0&&R.push("downtime_windows = ("+C.join(" ")+")");const _=["time","skill_name","job_class","skill_conditional","targets"];return _.push("players_to_buff","overriding_skill_conditional_for_other_players"),s.forEach(O=>O.push("","")),m.forEach(O=>O.push("","")),{meta:R,body:[_].concat(s,m)}}tryAddLine(t,n=xn.SkillSequence){const a=p.record.length,s=Oe(this,xe,Ss).call(this,{line:t,replayMode:n});return s.success?(this.undoStack.push(new PS(t.actions,a,"preset")),this.autoSave(),ni(),!0):(this.rewindUntilBefore(s.firstAddedIndex,!1),window.alert('Failed to add line "'+t.name+'" due to insufficient resources and/or stats mismatch.'),!1)}deleteLine(t){se(this,io).deleteLine(t)}deleteAllLines(){se(this,io).deleteAllLines()}reportInterruption(t){if(se(this,gc)||this.tickMode===Ra.RealTimeAutoPause&&this.shouldLoop){const n=t.failNode.getNameForMessage();window.alert("Cast interrupted! Resources for "+n+" are no longer available"),console.warn("failed: "+n);const a=this.game.time,s=this.shouldLoop;this.rewindUntilBefore(t.failIndex,!1),this.autoSave(),Oe(this,xe,$n).call(this,{deltaTime:a-this.game.time,waitKind:"duration"}),this.shouldLoop=s}else ke(this,vs,!0),se(this,Hn)||this.timeline.invalidateLastElement()}rewindUntilBefore(t,n){const a=this.record;this.record=new ko,this.record.config=this.gameConfig,Oe(this,xe,_l).call(this),Oe(this,xe,Il).call(this,this.gameConfig),t!==void 0&&(a.spliceUpTo(t),Oe(this,xe,Ss).call(this,{line:a,replayMode:xn.Exact,removeTrailingIdleTime:n}))}removeTrailingIdleTime(){let t;for(let a=this.record.tailIndex;a>=0;a--)if(this.record.actions[a].info.type===Ze.Skill){t=a;break}const n=t===void 0?this.record.actions.slice():this.record.actions.slice(t+1);n.length>0&&this.undoStack.push(new ec((t??-1)+1,n,"delete")),t===void 0?this.rewindUntilBefore(0,!0):this.rewindUntilBefore(t+1,!0),ni()}waitTillNextMpOrLucidTick(){const t=Oe(this,xe,$n).call(this,{deltaTime:this.game.timeTillNextMpGainEvent(),waitKind:"mp"});t!==void 0&&this.undoStack.push(new Rs(t,this.record.tailIndex)),ni(),this.updateAllDisplay()}insertRecordNodes(t,n){this.record.insertActionNodes(t,n),this.autoSave();const a=ni();let s;t.length>1?(s=Math.min(n,this.record.tailIndex),this.record.selectSingle(s),this.record.selectUntil(s+t.length-1)):(s=Math.min(n+1,this.record.tailIndex),this.record.selectSingle(s)),this.displayHistoricalState(a.skillUseTimes[s],s)}insertRecordNode(t,n){this.insertRecordNodes([t],n)}requestUseSkill(t,n=!1){if(ke(this,gc,!0),!this.inputLocked)if(this.displayingUpToDateGameState)Oe(this,xe,kT).call(this,t.skillName,t.targetCount,this.tickMode,-1,!1,n).status.ready()&&(this.scrollToTime(this.game.time),this.autoSave(),this.tickMode!==Ra.RealTimeAutoPause&&ni());else{const a=this.record.selectionStartIndex;if(a!==void 0){const s=xs(t.skillName,t.targetCount);this.insertRecordNode(s,a),n&&this.undoStack.push(new Rs(s,a))}}ke(this,gc,!1)}requestToggleBuff(t,n=!1){if(!this.game.requestToggleBuff(t))return!1;const s=rT(t);return s.tmp_startLockTime=this.game.time,s.tmp_endLockTime=s.tmp_startLockTime,this.record.addActionNode(s),n&&this.undoStack.push(new Rs(s,this.record.tailIndex)),se(this,Go).push({time:this.game.getDisplayTime(),action:"Toggle buff: "+Ye[t].name,isGCD:0,castTime:0,isDamaging:!1}),!0}scrollToTime(t){const n=t===void 0?this.game.time:t;setTimeout(()=>{_v(it.positionFromTimeAndScale(n,this.timeline.scale))},0)}step(t,n=!1){let a,s=this.record.length;this.displayingUpToDateGameState?(a=Oe(this,xe,$n).call(this,{deltaTime:t,waitKind:"duration"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(s=this.record.selectionStartIndex,a=ic(t),this.insertRecordNode(a,s)),n&&a&&this.undoStack.push(new Rs(a,s))}stepUntil(t,n=!1){let a,s=this.record.length;this.displayingUpToDateGameState?(a=Oe(this,xe,$n).call(this,{deltaTime:t-this.game.getDisplayTime(),waitKind:"target"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(s=this.record.selectionStartIndex,a=yl(t),this.insertRecordNode(a,s)),n&&a&&this.undoStack.push(new Rs(a,s))}handleKeyboardEvent(t){if(this.inputLocked)return;const n=t.ctrlKey||t.metaKey,a=p.record.selectionStartIndex,s=a!==void 0;let c=!1;this.displayingUpToDateGameState&&t.key==="u"&&(this.undoStack.doThenPush(new ec(this.record.tailIndex,[this.record.actions[this.record.tailIndex]],"delete")),c=!0),t.key==="z"&&n?(this.undoStack.undo(),c=!0):t.key==="Z"&&n||t.key==="y"&&n?(this.undoStack.redo(),c=!0):t.key==="Paste"||t.key==="v"&&n?(MO(),c=!0):t.key==="Copy"||t.key==="c"&&n?s&&(pT(),c=!0):(t.key==="Cut"||t.key==="x"&&n)&&s&&(pT(),p.undoStack.push(new ec(a,p.record.getSelected().actions,"delete")),p.deleteSelectedSkills(),c=!0),c&&t.preventDefault()}handleTimelineKeyboardEvent(t){var n,a;if(!this.inputLocked){const s=t.ctrlKey||t.metaKey,c=p.record.selectionStartIndex,d=p.record.selectionEndIndex,f=c!==void 0;let h=!1,m=!1;t.key==="Backspace"||t.key==="Delete"?f&&(p.undoStack.push(new ec(c,p.record.getSelected().actions,"delete")),p.deleteSelectedSkills()):t.key==="ArrowUp"?f?(t.shiftKey?p.timeline.resizeSelection(!0):p.timeline.onClickTimelineAction(c-1,!1),h=!0,t.preventDefault()):p.record.length>0&&(p.timeline.onClickTimelineAction(p.record.tailIndex,!1),h=!0,t.preventDefault()):t.key==="ArrowDown"?f?(t.shiftKey?p.timeline.resizeSelection(!1):p.timeline.onClickTimelineAction(d+1,!1),m=!0,t.preventDefault()):p.record.length>0&&(p.timeline.onClickTimelineAction(0,!1),m=!0,t.preventDefault()):t.key==="Home"?(p.timeline.onClickTimelineAction(0,t.shiftKey),h=!0):t.key==="End"?(p.timeline.onClickTimelineAction(p.record.tailIndex,t.shiftKey),m=!0):t.key==="Escape"?(p.record.unselectAll(),p.displayCurrentState()):t.key==="a"&&s&&(p.timeline.onClickTimelineAction(0,!1),p.timeline.onClickTimelineAction(p.record.tailIndex,!0),t.preventDefault()),h?(this.scrollToTime((n=this.record.selectionStart)==null?void 0:n.tmp_startLockTime),US()):m&&(this.scrollToTime((a=this.record.selectionEnd)==null?void 0:a.tmp_startLockTime),CO())}}setImageExportConfig(t){this.imageExportConfig=t}}io=new WeakMap,bs=new WeakMap,Ic=new WeakMap,Aa=new WeakMap,Os=new WeakMap,hd=new WeakMap,Go=new WeakMap,_c=new WeakMap,fd=new WeakMap,Ds=new WeakMap,ys=new WeakMap,vs=new WeakMap,Hn=new WeakMap,gc=new WeakMap,wa=new WeakMap,Dl=new WeakMap,xe=new WeakSet,Il=function(t){const n=t.initialResourceOverrides;for(let a=0;a<n.length;a++)n[a].applyTo(this.game)},jy=function(t){const n=se(this,Hn);this.displayingUpToDateGameState=!1,ke(this,Hn,!0);const a=this.game,s=this.record,c=se(this,Aa);t(),ke(this,Hn,n),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.game=a,this.record=s,ke(this,Aa,c)},_l=function(t=!0){this.game=tc(this.gameConfig),Oe(this,xe,Nf).call(this,{shouldLoop:!1}),this.timeline.reset(),t&&this.record.unselectAll(),ke(this,Aa,-this.gameConfig.countdown),ke(this,Os,[]),ke(this,Go,[]),ke(this,_c,new Map),ke(this,Ds,new Map),ke(this,fd,new Map),ke(this,ys,new Map),ke(this,vs,!1),this.displayingUpToDateGameState=!0},Yu=function(t=!1){if(!se(this,wa)){let n=uj({tinctureBuffPercentage:se(this,bs),lastDamageApplicationTime:se(this,Aa)});t&&(n={mainTable:n.mainTable,mainTableSummary:n.mainTableSummary,dotTables:n.dotTables,mode:n.mode}),xT(n)}},HT=function(){if(!se(this,wa)){const t=cj({tinctureBuffPercentage:se(this,bs),lastDamageApplicationTime:se(this,Aa)});By(t)}},$n=function(t){const n=this.game.time,a=t.deltaTime+this.game.getDisplayTime();if(t.deltaTime>0){ke(this,Dl,t.deltaTime);const s=this.game.tick(t.deltaTime,t.prematureStopCondition?t.prematureStopCondition:()=>!1);let c;return t.waitKind==="duration"?c=ic(s):t.waitKind==="target"?c=yl(a):t.waitKind==="mp"&&(c=eb()),c!==void 0&&(c.tmp_startLockTime=n,c.tmp_endLockTime=t.deltaTime+n,this.record.addActionNode(c)),c}},Nf=function(t){const n=t.shouldLoop;this.shouldLoop!==n&&(this.shouldLoop=n,this.shouldLoop&&Oe(this,xe,UT).call(this,()=>this.shouldLoop))},zy=function(t){let n=this.game.timeTillAnySkillAvailable();t>=0&&(n=Math.min(t-this.game.time,n)),Oe(this,xe,$n).call(this,{deltaTime:n})},kT=function(t,n,a=this.tickMode,s=-1,c=!0,d=!1){let f=this.game.getSkillAvailabilityStatus(t);const h=this.game.time,m=f.timeTillAvailable,R=Oe(this,xe,$n).call(this,{deltaTime:m});d&&R&&this.undoStack.push(new Rs(R,this.record.tailIndex)),t=J0(t,this.game),f=this.game.getSkillAvailabilityStatus(t);const T=xs(t,n);let S;if(f.status.ready())T.tmp_startLockTime=this.game.time,this.record.addActionNode(T),S=this.record.tailIndex,d&&T&&this.undoStack.push(new Rs(T,this.record.tailIndex)),this.game.useSkill(t,T,S),T.tmp_invalid_reasons=[],a===Ra.RealTimeAutoPause&&(this.shouldLoop=!0,Oe(this,xe,UT).call(this,()=>this.game.timeTillAnySkillAvailable()>0,!0));else{if(!c){if(m>0){const C=ic(m);C.tmp_startLockTime=h,C.tmp_endLockTime=this.game.time,this.record.addActionNode(C)}return f}this.record.addActionNode(T),S=this.record.tailIndex,this.game.useInvalidSkill(t,T),T.tmp_invalid_reasons=f.status.unavailableReasons}const I=this.game.timeTillAnySkillAvailable();if(T.tmp_startLockTime=this.game.time,T.tmp_endLockTime=this.game.time+I,!se(this,Hn)){this.lastSkillTime=this.game.time;const C=this.game.getSkillAvailabilityStatus(t,!0);let O=this.game.skillsList.get(t).cdName==="cd_GCD";const y=f.castTime>0&&!f.instantCast,x=y?f.castTime-Ta.getSlidecastWindow(f.castTime):0;let L=C.cdRecastTime;t==="MEDITATE"&&(O=!0,L=this.game.getSkillAvailabilityStatus("YUKIKAZE").cdRecastTime),this.timeline.addElement({type:ht.Skill,displayTime:this.game.getDisplayTime(),skillName:t,isGCD:O,isSpellCast:y,time:this.game.time,relativeSnapshotTime:x,lockDuration:I,recastDuration:L,node:T,actionIndex:S}),se(this,Go).push({time:this.game.getDisplayTime(),action:bn[t].name,isGCD:O?1:0,castTime:f.instantCast?0:f.castTime,targetCount:T.targetCount,isDamaging:T.anyPotencies()})}return a!==Ra.RealTimeAutoPause&&Oe(this,xe,zy).call(this,s),se(this,wa)||td(),f},Ss=function(t){const n=se(this,wa);ke(this,wa,!0),t.removeTrailingIdleTime===void 0&&(t.removeTrailingIdleTime=!1);const a=t.maxReplayTime??-1;let s=t.replayMode;t.replayMode===xn.Edited&&(s=xn.Exact);const c=t.line,d=[],f=[];if(c.length===0)return ke(this,wa,n),{success:!0,firstAddedIndex:void 0,invalidActions:d,skillUseTimes:f};let h=this.record.length,m;const R=t.cutoffIndex??c.actions.length,T=c.actions.slice();for(let C=0;C<R;C++){const _=T[C];t.replayMode===xn.Edited&&s===xn.Exact&&C===t.firstEditedNodeIndex&&(s=xn.Edited);let O=0;if(_.info.type===Ze.Wait?O=_.info.waitDuration:_.info.type===Ze.JumpToTimestamp?O=_.info.targetTime-this.game.getDisplayTime():_.info.type===Ze.WaitForMP?O=this.game.timeTillNextMpGainEvent():_.info.type===Ze.Skill&&(O=this.game.getSkillAvailabilityStatus(_.info.skillName).timeTillAvailable),C>0){const x=T[C-1].legacyWaitDuration;if(x!==void 0&&Math.abs(x-se(this,Dl))>_n.epsilon){const L=x-se(this,Dl);if(L>0&&_.info.type!==Ze.Wait){let v;if(_.info.type===Ze.Skill){const P=this.game.getSkillAvailabilityStatus(_.info.skillName).timeTillAvailable;Math.abs(P-L)>_n.epsilon&&(v="duration")}v&&(Oe(this,xe,$n).call(this,{deltaTime:L,waitKind:v}),h++)}else _.info.type===Ze.Wait&&(O+=L)}}if(a>=0&&a-this.game.time<O&&s===xn.Exact)return Oe(this,xe,$n).call(this,{deltaTime:a-this.game.time,waitKind:"duration"}),ke(this,wa,!1),this.updateAllDisplay(),{success:!0,firstAddedIndex:m,invalidActions:d,skillUseTimes:f};if(f.push(this.game.getDisplayTime()),[Ze.Wait,Ze.JumpToTimestamp,Ze.WaitForMP].includes(_.info.type))if(O>=0)Oe(this,xe,$n).call(this,{deltaTime:O,waitKind:_.info.type===Ze.Wait?"duration":_.info.type===Ze.JumpToTimestamp?"target":"mp"});else{const y=Wu();if(_.info.type===Ze.JumpToTimestamp){const x=yl(_.info.targetTime);x.tmp_startLockTime=this.game.time,x.tmp_endLockTime=x.tmp_startLockTime,this.record.addActionNode(x)}else console.error("non-jump wait somehow failed: "+_.info.type);y.addUnavailableReason(Tt.PastTargetTime),d.push({node:_,index:C,reason:y})}else if(_.info.type===Ze.Skill){let y=_.info.skillName;t.replayMode===xn.SkillSequence&&(y=pc(this.game.job,y,this.gameConfig.level));const x=Oe(this,xe,kT).call(this,y,_.info.targetCount,Ra.Manual,a);f[f.length-1]=x.usedAt,x.status.ready()||d.push({node:_,index:C,reason:x.status.clone()}),se(this,vs)&&(ke(this,vs,!1),this.shouldLoop||(x.status.addUnavailableReason(Tt.CastCanceled),d.push({node:_,index:C,reason:x.status})))}else if(_.info.type===Ze.SetResourceEnabled&&(s===xn.Exact||s===xn.Edited)){const y=this.requestToggleBuff(_.info.buffName),x=s===xn.Exact;if(y)Oe(this,xe,$n).call(this,{deltaTime:x?O:Math.min(O,this.game.timeTillAnySkillAvailable())});else{const L=Wu();L.addUnavailableReason(Tt.BuffNoLongerAvailable),d.push({node:_,index:C,reason:L})}}else if(_.info.type===Ze.Unknown){const{skillName:y,targetCount:x}=_.info,L=Xk(y,x);this.record.addActionNode(L);const v=Wu();v.addUnavailableReason(Tt.UnknownSkill),d.push({node:_,index:C,reason:v}),L.tmp_invalid_reasons=v.unavailableReasons;const P=this.gameConfig.animationLock;se(this,Hn)||(this.lastSkillTime=this.game.time,this.timeline.addElement({type:ht.Skill,displayTime:this.game.getDisplayTime(),skillName:y,isGCD:!1,isSpellCast:!1,time:this.game.time,relativeSnapshotTime:this.game.time,lockDuration:P,recastDuration:0,node:L,actionIndex:C}),se(this,Go).push({time:this.game.getDisplayTime(),action:y,isGCD:0,castTime:0,targetCount:L.targetCount,isDamaging:!1})),Oe(this,xe,$n).call(this,{deltaTime:P})}else console.error("did not process ActionNode "+JSON.stringify(_.info));if(t.replayMode===xn.Edited){const y=this.record.tailIndex;_===t.selectionStart&&y>=0?this.record.selectSingle(y):_===t.selectionEnd&&y>=0&&this.record.selectUntil(y)}this.record.length!==h&&m===void 0&&(m=this.record.tailIndex)}if(t.cutoffIndex!==void 0){const C=T[t.cutoffIndex].info;if(C.type===Ze.Skill){const _=this.game.getSkillAvailabilityStatus(C.skillName);Oe(this,xe,$n).call(this,{deltaTime:_.timeTillAvailable})}}const S=T[T.length-1],I=S.legacyWaitDuration;if(I!==void 0&&(S.info.type===Ze.Skill||S.info.type===Ze.SetResourceEnabled)&&Math.abs(I-se(this,Dl))>_n.epsilon){const C=I-se(this,Dl);Oe(this,xe,$n).call(this,{deltaTime:C,waitKind:"duration"})}return ke(this,wa,n),this.updateAllDisplay(),{success:!0,firstAddedIndex:m,invalidActions:d,skillUseTimes:f}},UT=function(t,n=!1){let a=0;const s=this,c=function(d){var m,R,T;a===0&&(a=d);const f=(d-a)/1e3*s.timeScale,h=s.game.timeTillAnySkillAvailable();h>=f?Oe(m=s,xe,$n).call(m,{deltaTime:f,prematureStopCondition:()=>!t()}):(Oe(R=s,xe,$n).call(R,{deltaTime:h,prematureStopCondition:()=>!t()}),Oe(T=s,xe,$n).call(T,{deltaTime:f-h,prematureStopCondition:()=>!t()})),s.updateAllDisplay(),a=d,t()?requestAnimationFrame(c):(s.shouldLoop=!1,s.autoSave(),rE(!1),n&&ni())};rE(!0),requestAnimationFrame(c)};const p=new hj;function Qh(e){const t=Fa();return t==="en"?e==="fieldop"?"Field Operations":e==="dungeon"?"Dungeons":e==="ultimate"?"Ultimates":e[0].toUpperCase()+e.substring(1):t==="zh"?e==="savage"?"":e==="extreme"?"":e==="ultimate"?"":"":e}function We(e,t,n,a,s){return{name:typeof e=="string"?{en:e,zh:e}:e,fightKind:t,supportedLanguages:typeof n=="string"?[n]:n,authors:typeof a=="string"?[a]:a,phased:s??!1}}const XR=new Map([["m9s",We("M9S","savage","en","shanzhe")],["m9s_zh",We("M9S","savage","zh",["shanzhe",""])],["m10s",We("M10S","savage","en","shanzhe")],["m10s_zh",We("M10S","savage","zh",["shanzhe",""])],["m11s",We("M11S","savage","en","shanzhe")],["m11s_zh",We("M11S","savage","zh",["shanzhe",""])],["m12s_p1",We({en:"M12S P1",zh:"M12S"},"savage","en","shanzhe")],["m12s_p1_zh",We({en:"M12S P1",zh:"M12S"},"savage","zh",["shanzhe",""])],["m12s_p2",We({en:"M12S P2",zh:"M12S"},"savage","en","shanzhe")],["m12s_p2_zh",We({en:"M12S P2",zh:"M12S"},"savage","zh",["shanzhe",""])],["m5s",We("M5S","savage","en","shanzhe")],["m6s",We("M6S","savage","en","shanzhe")],["m7s",We("M7S","savage","en","shanzhe")],["m8s_full",We("M8S","savage","en","shanzhe",!0)],["final_verse_q40",We("The Final Verse Q40","dungeon","en","shanzhe")],["dsr_p2",We("DSR P2","ultimate","en","Caro")],["dsr_p6",We("DSR P6","ultimate","en","Tischel")],["dsr_p7",We("DSR P7","ultimate","en","Tischel")],["TOP_2023_04_02",We("TOP","ultimate","en","Santa")],["m2s",We("M2S","savage","en","shanzhe")],["m3s",We("M3S","savage","en","shanzhe")],["m4s",We("M4S","savage","en","shanzhe")],["m1s_zh",We("M1S","savage","zh","kiyozero")],["m2s_zh",We("M2S","savage","zh","kiyozero")],["m3s_zh",We("M3S","savage","zh","kiyozero")],["m4s_zh",We("M4S","savage","zh","kiyozero")],["fru_en_full",We({en:"FRU",zh:""},"ultimate","en",["Yara","shanzhe"],!0)],["fru_zh",We({en:"FRU",zh:""},"ultimate","zh",["","czmm"])],["queen_eternal",We({en:"Queen Eternal",zh:""},"extreme","zh","")],["p1s_aetherial_shackles_first",We("P1S Aetherial Shackles first","savage","en")],["p1s_shackles_of_time_first",We("P1S Shackles of Time first","savage","en")],["p2s",We("P2S","savage","en")],["p5s_zh",We("P5S","savage","zh","3")],["p6s_zh",We("P6S","savage","zh","3")],["p7s_zh",We("P7S","savage","zh","3")],["p8s_p1_snake_zh",We({en:"P8S P1 snake first",zh:"P8S"},"savage","zh","3")],["p8s_p1_beast_zh",We({en:"P8S P1 dog first",zh:"P8S"},"savage","zh","3")],["p8s_p2_zh",We({en:"P8S P2",zh:"P8S"},"savage","zh","3")],["p9s",We("P9S","savage","en","Lilian")],["p10s",We("P10S","savage","en","Tischel")],["p11s",We("P11S","savage","en","Lilian")],["p12s_p1",We("P12S P1","savage","en","Yara")],["p12s_p2",We("P12S P2","savage","en","Yara")],["p9s_zh",We("P9S","savage","zh","3")],["p10s_zh",We("P10S","savage","zh","3")],["p11s_zh",We("P11S","savage","zh","3")],["p12s_p1_zh",We("P12S","savage","zh","3")],["p12s_p2_zh",We("P12S","savage","zh","3")]]),fj=["m9s","m10s","m11s","m12s_p1","m12s_p2","m9s_zh","m10s_zh","m11s_zh","m12s_p1_zh","m12s_p2_zh","final_verse_q40","fru_en_full","fru_zh"],Ej=["dsr_p2","dsr_p6","dsr_p7","TOP_2023_04_02"],mj=new Map([["7.0-7.3",["m2s","m3s","m4s","m1s_zh","m2s_zh","m3s_zh","m4s_zh","fru_en_full","fru_zh","queen_eternal","m5s","m6s","m7s","m8s_full","final_verse_q40"]],["6.X",["p1s_aetherial_shackles_first","p1s_shackles_of_time_first","p2s","dsr_p2","dsr_p6","dsr_p7","p5s_zh","p6s_zh","p7s_zh","p8s_p1_snake_zh","p8s_p1_beast_zh","p8s_p2_zh","p9s","p9s_zh","TOP_2023_04_02","p9s","p10s","p11s","p12s_p1","p12s_p2","p9s_zh","p10s_zh","p11s_zh","p12s_p1_zh","p12s_p2_zh"]]]);let Yy=e=>{};const Cf="/presets/markers/",rc=20,cc=0,Us=5;function Aj(e){const t=Lt();return l.jsx("hr",{style:{marginTop:e.marginTop,marginBottom:e.marginBottom,border:"none",borderTop:"1px solid "+t.bgHighContrast}})}const wT=function(e,t){TO(e,n=>{try{const a=JSON.parse(n);t(a)}catch(a){console.log("Error fetching/parsing JSON "+e),console.error(a)}})},od=N.createContext(""),ws=N.createContext({trackIndices:[],setTrackIndices:()=>{}});function Ky(e,t,n){let a=ao((n==null?void 0:n.globalOffset)??"");a=isNaN(a)?0:a;const s=ao((n==null?void 0:n.localOffset)??"");p.timeline.loadCombinedTracksPreset(e,a+(isNaN(s)?0:s),(n==null?void 0:n.cutoff)!==void 0?a+n.cutoff:void 0),t(p.timeline.getTrackIndices()),p.updateStats(),p.timeline.drawElements()}function Vy(e){const t=N.useContext(od),{setTrackIndices:n}=N.useContext(ws);return l.jsx("button",{onClick:a=>wT(e.url,s=>Ky(s,n,{globalOffset:t,localOffset:e.offsetStr})),children:e.displayName})}function Wy(e,t){var n,a,s,c;return{en:(((n=e.authors)==null?void 0:n.length)??0)>0&&t?`${e.name.en} by ${(a=e.authors)==null?void 0:a.join(" & ")}`:e.name.en,zh:(((s=e.authors)==null?void 0:s.length)??0)>0&&t?`${e.name.zh} ${(c=e.authors)==null?void 0:c.join(" + ")} `:e.name.zh}}function Rj(e){return l.jsx("div",{style:{marginBlock:1},children:l.jsx(Vy,{displayName:g(Wy(e.meta,e.showAuthors)),url:Cf+e.fileName+".txt"})})}function Tj(e){const t=N.useContext(od),{setTrackIndices:n}=N.useContext(ws),a=hi(N.useContext(gn)),[s,c]=N.useState(new Map),[d,f]=N.useState(void 0);N.useEffect(()=>{wT(Cf+e.fileName+".txt",m=>{m.fileType!==Ia.MarkerTrackSet?console.error(`while parsing ${e.fileName}, got invalid file type ${m.fileType}`):f(m.phasedTracks)})},[]);const h=l.jsx("div",{style:{display:"grid",gridTemplateColumns:"2fr 3fr",gap:Us},children:(d==null?void 0:d.map(({offset:m,label:R,fileName:T},S)=>{var C;let I=s.get(T);return I!=null&&I.length||(I=m.toString()),T===void 0&&console.error("missing fileName for phase",R,"of",e.fileName),l.jsxs(di.Fragment,{children:[l.jsx("div",{style:{gridRow:S+1,gridColumn:1},children:l.jsx(Kt,{description:"@",defaultValue:((C=s.get(T))==null?void 0:C.toString())??"",onChange:_=>{const O=new Map(s);_===void 0?O.delete(T):O.set(T,_),c(O)},width:8,placeholder:m.toString()})}),l.jsx("div",{style:{gridRow:S+1,gridColumn:2},children:l.jsx(Vy,{displayName:g(R),url:Cf+T,offsetStr:I})})]},S)}))??g({en:"loading phases...",zh:""})});return l.jsx("div",{style:{display:"flex",flexDirection:"column",marginBlock:Us,marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+a.bgHighContrast,minWidth:240},children:l.jsx(kl,{title:`trackPresets-phase-${e.fileName}`,titleNode:l.jsxs("div",{style:{display:"inline-flex",flexDirection:"row",gap:Us,alignItems:"baseline",marginBottom:4},children:[l.jsx("div",{children:g(Wy(e.meta,e.showAuthors))}),l.jsx("span",{tabIndex:-1,children:" "}),l.jsx("div",{children:l.jsx("button",{onClick:m=>{m.stopPropagation();const R=new Map;d==null||d.forEach((T,S)=>{let I;for(let C=S+1;C<d.length;C++){const _=s.get(d[C].fileName);if(_){const O=ao(_);(I===void 0||O<I)&&(I=O)}}I!==void 0&&R.set(T.fileName,I)}),d==null||d.forEach(T=>wT(Cf+T.fileName,S=>{Ky(S,n,{globalOffset:t,localOffset:s.get(T.fileName)??T.offset.toString(),cutoff:R.get(T.fileName)})}))},children:g({en:"Load all phases",zh:""})})})]}),noMargin:!0,autoIndent:!1,content:h})})}function qR(e){const t=new Map,n=c=>{const d=XR.get(c);if(!d){console.error("missing track metadata declaration for "+c);return}t.has(d.fightKind)||t.set(d.fightKind,new Map);const f=t.get(d.fightKind);d.supportedLanguages.forEach(h=>{var R,T;f.has(h)||f.set(h,{unphased:[],phased:[],commonAuthors:d.authors});const m=f.get(h);(d.phased?m.phased:m.unphased).push(c),((R=d.authors)==null?void 0:R.join("+"))!==((T=m.commonAuthors)==null?void 0:T.join("+"))&&(m.commonAuthors=void 0)})};e.trackList.map(n);const a={marginBlock:1},s=l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:Us,paddingInlineStart:6,marginInlineStart:10},children:t.entries().map(([c,d],f)=>d.entries().flatMap(([h,m])=>[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:Us,alignItems:"baseline"},children:[g({en:m.commonAuthors?l.jsxs("p",{style:a,children:[Qh(c)," (",Vh(h),") by"," ",m.commonAuthors.join(" & "),":"]}):l.jsxs("p",{style:a,children:[Qh(c)," (",Vh(h),"):"]}),zh:m.commonAuthors?l.jsxs("p",{style:a,children:[Qh(c),"",Vh(h),""," ",m.commonAuthors.join(" + "),""]}):l.jsxs("p",{style:a,children:[Qh(c),"",Vh(h),""]})}),m.unphased.map((R,T)=>l.jsx(Rj,{meta:XR.get(R),fileName:R,showAuthors:!m.commonAuthors},T))]}),l.jsx("div",{children:m.phased.map((R,T)=>l.jsx(Tj,{meta:XR.get(R),fileName:R,showAuthors:!m.commonAuthors},T))})]},`${f}-${h}`)]).toArray()).toArray()});return l.jsx(kl,{title:`trackPresets-${e.label.en}`,titleNode:g(e.label),titleBodyGap:Us,defaultShow:e.defaultShow,autoIndent:!1,content:s})}function Sj(){const[e,t]=N.useState(Jn.Info),[n,a]=N.useState(Rt.Blue),[s,c]=N.useState("0"),[d,f]=N.useState("1"),[h,m]=N.useState("0"),[R,T]=N.useState(""),[S,I]=N.useState(!1),[C,_]=N.useState(H.TechnicalFinish),O={display:"inline-block",marginRight:"1em",marginBottom:6},{setTrackIndices:y}=N.useContext(ws);N.useEffect(()=>{Yy=K=>{t(K.markerType),c(K.time.toString()),f(K.duration.toString()),K.markerType===Jn.Info?(a(K.color),c(K.time.toString()),f(K.duration.toString()),m(K.track.toString()),T(K.description),I(K.showText)):K.markerType===Jn.Buff&&(m(K.track.toString()),_(K.description))};const w=gt("radio: markerType");w!==null&&(t(w),w===Jn.Buff&&v(C))},[]);const x=(w,K)=>l.jsx("option",{value:w,children:K},w),L=l.jsxs("div",{children:[l.jsx(Kt,{defaultValue:R,description:g({en:"Description: ",zh:""}),width:40,onChange:T}),l.jsx(Kt,{defaultValue:h,description:g({en:"Track: ",zh:""}),width:4,style:O,onChange:m}),l.jsxs("div",{style:{display:"inline-block",marginTop:"4px"},children:[l.jsx("span",{children:g({en:"Color: ",zh:""})}),l.jsx("select",{style:{display:"inline-block",outline:"none"},value:n,onChange:w=>{w.target&&a(w.target.value)},children:[x(Rt.Red,g({en:"red",zh:""})),x(Rt.Orange,g({en:"orange",zh:""})),x(Rt.Yellow,g({en:"yellow",zh:""})),x(Rt.Green,g({en:"green",zh:""})),x(Rt.Cyan,g({en:"cyan",zh:""})),x(Rt.Blue,g({en:"blue",zh:""})),x(Rt.Purple,g({en:"purple",zh:""})),x(Rt.Pink,g({en:"pink",zh:""}))]}),l.jsx("div",{style:{background:n,marginLeft:"4px",display:"inline-block",verticalAlign:"middle",height:"1em",width:"4em"}})]}),l.jsxs("div",{style:{display:"inline-block",marginTop:"4px",marginLeft:"10px"},children:[l.jsx("input",{type:"checkbox",style:{position:"relative",top:3},checked:S,onChange:w=>{w.target&&I(w.target.checked)}}),l.jsx("span",{style:{marginLeft:4},children:g({en:"show text",zh:""})})]})]}),v=w=>{const K=new Xf(w);f(K.info.duration.toString())},P=GS.map(w=>l.jsx("option",{value:w.name,children:P0(w.name)},w.name)),k=l.jsxs("div",{children:[l.jsx("span",{children:g({en:"Buff: ",zh:""})}),l.jsx("select",{value:C,onChange:w=>{if(w.target){const K=w.target.value;_(K),v(K)}},children:P}),l.jsx("div",{style:{marginTop:5},children:l.jsx(Kt,{defaultValue:h,description:g({en:"Track: ",zh:""}),width:4,style:O,onChange:m})})]});return l.jsxs("div",{children:[l.jsx("p",{children:l.jsx("b",{children:g({en:"Add buffs/markers",zh:"buff"})})}),l.jsxs("form",{children:[l.jsxs("fieldset",{style:{display:"flex",alignItems:"baseline",paddingTop:0,paddingLeft:0,paddingBottom:0,marginLeft:0,marginBottom:10,border:0},children:[l.jsx("legend",{style:{float:"left",marginRight:"0.5rem",position:"relative",top:"1px"},children:g({en:"Type: ",zh:""})}),l.jsx(IO,{containerStyle:{display:"flex",flexDirection:"row",gap:"0.8rem"},uniqueName:"markerType",selected:e,onChange:w=>{t(w),w===Jn.Buff&&v(C)},options:[[Jn.Info,g({en:"Info",zh:""})],[Jn.Buff,g({en:"Buff",zh:""})],[Jn.Untargetable,g({en:"Untargetable",zh:""})]]})]}),l.jsx("span",{children:" "}),l.jsx(Kt,{defaultValue:s,description:g({en:"Time: ",zh:""}),width:8,style:O,onChange:c}),l.jsx(Kt,{defaultValue:d,description:g({en:"Duration: ",zh:""}),width:8,style:O,onChange:f}),e===Jn.Info?L:void 0,e===Jn.Buff?k:void 0,l.jsx("button",{type:"submit",style:{display:"block",marginTop:"0.5em"},onClick:w=>{const K={type:ht.Marker,markerType:e,time:ao(s),duration:parseFloat(d),color:n,track:parseInt(h),description:R,showText:S};let ne;if(e===Jn.Untargetable&&(K.color=Rt.Grey,K.track=lo,K.description="",K.showText=!0),e===Jn.Buff){const fe=new Xf(C),ue=parseFloat(d);!isNaN(ue)&&ue>fe.info.duration&&(ne=g({en:`this buff can't last longer than ${fe.info.duration}s`,zh:`${fe.info.duration}`})),K.color=fe.info.color,K.description=fe.name,K.duration=ue,K.showText=!0}if((isNaN(K.duration)||isNaN(K.time)||isNaN(K.track))&&(ne=g({en:"some input(s) are invalid",zh:""})),K.track!==lo&&(K.track<cc||K.track>rc)&&(ne=g({en:`marker track number must be between ${cc} and ${rc}`,zh:`${cc}${rc}`})),ne){window.alert(ne),w.preventDefault();return}p.timeline.addMarker(K),p.updateStats(),y(p.timeline.getTrackIndices()),e===Jn.Untargetable&&ni(),w.preventDefault()},children:g({en:"add marker",zh:""})})]})]})}function Ij(){const{trackIndices:e,setTrackIndices:t}=N.useContext(ws),n=parseInt(N.useContext(od)),a=isNaN(n)?0:n,s=hi(N.useContext(gn)),[c,d]=N.useState("0"),f=l.jsx("input",{style:{color:s.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+s.text},size:2,type:"text",value:c,onChange:T=>d(T.target.value)}),h=g({en:l.jsxs("span",{children:["Load into individual track ",f,": "]}),zh:l.jsxs("span",{children:["",f,""]})}),m=l.jsxs(l.Fragment,{children:[l.jsx(Vf,{allowLoadFromUrl:!1,defaultLoadUrl:"",label:g({en:"Load multiple tracks combined: ",zh:""}),onLoadFn:T=>{p.timeline.loadCombinedTracksPreset(T,a),p.updateStats(),t(p.timeline.getTrackIndices()),p.timeline.drawElements()}}),l.jsx("div",{className:"paragraph",children:l.jsx(Vf,{allowLoadFromUrl:!1,label:h,onLoadFn:T=>{const S=parseInt(c);if(isNaN(S)||S!==lo&&(S<cc||S>rc)){window.alert(g({en:`marker track number must be between ${cc} and ${rc}`,zh:`${cc}${rc}`}));return}p.timeline.loadIndividualTrackPreset(T,S,a),p.updateStats(),t(p.timeline.getTrackIndices()),p.timeline.drawElements()}})})]}),R=l.jsxs(l.Fragment,{children:[l.jsx(Hl,{fileFormat:Yo.Json,getContentFn:()=>p.timeline.serializedCombinedMarkerTracks(),filename:"tracks_all",displayName:g({en:"all tracks combined",zh:""})},"combined"),e.map(T=>{let S=T.toString(),I=g({en:"track ",zh:""})+S;return T===lo&&(S="untargetable",I=g({en:"track untargetable",zh:""})),l.jsx(Hl,{fileFormat:Yo.Json,getContentFn:()=>{const C=p.timeline.serializedSeparateMarkerTracks();for(let _=0;_<C.length;_++)if(C[_].track===T)return C[_];return console.assert(!1),[]},filename:"track_"+S,displayName:I},T)})]});return l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsx("b",{children:g({en:"Load marker tracks from file",zh:""})})," ",l.jsx(Xe,{topic:"load tracks",content:g({en:"when loading additional markers, current markers will not be deleted",zh:""})})]}),m,l.jsx("p",{style:{marginTop:16},children:l.jsx("b",{children:g({en:"Save marker tracks to file",zh:""})})}),R]})}function _j(){const[e,t]=N.useState([]);N.useEffect(()=>{t(p.timeline.getTrackIndices())},[]);const[n,a]=N.useState(""),s=ao(n),c=l.jsx(Kt,{defaultValue:n,description:l.jsxs(l.Fragment,{children:[l.jsx("span",{style:{color:isNaN(s)||s===0?"":Rt.Purple},children:g({en:"Load tracks with time offset ",zh:" "})}),l.jsx(Xe,{topic:"trackLoadOffset",content:g({en:l.jsxs("div",{children:[l.jsx("p",{children:"When specified, all imported and preset tracks will start from the specified timestamp. Use this to combine markers for multi-phase fights with varying kill times."}),l.jsx("p",{children:"Loading preset tracks that already have phase timestamps will add this start value on top of the phase-specific timing."})]}),zh:l.jsxs("div",{children:[l.jsx("p",{children:"P"}),l.jsx("p",{children:"P"})]})})}),":"]}),width:4,onChange:a}),d=l.jsxs(l.Fragment,{children:[l.jsx("p",{children:l.jsx("b",{children:g({en:"Remove buffs/markers",zh:"buff"})})}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"max-content max-content",columnGap:2,rowGap:Us,alignItems:"center"},children:[l.jsx("div",{children:l.jsx("button",{onClick:()=>{p.timeline.deleteAllMarkers(),p.updateStats(),t([])},children:g({en:"clear all markers",zh:""})})}),l.jsx("div",{children:l.jsx("button",{onClick:()=>{const f=p.timeline.sortAndRemoveDuplicateMarkers();f>0?alert("removed "+f+" duplicate markers"):alert("no duplicate markers found"),p.timeline.updateTimelineMarkers()},children:g({en:"remove duplicates",zh:""})})}),l.jsx("div",{style:{gridColumn:"1 / 3"},children:g({en:"click a marker in the timeline to delete it",zh:""})})]})]});return l.jsx(kS,{contentHeight:AI,children:[{defaultSize:35,content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:l.jsx("b",{children:g({en:"Presets",zh:""})})}),l.jsx("div",{children:c}),l.jsx(od.Provider,{value:n,children:l.jsxs(ws.Provider,{value:{trackIndices:e,setTrackIndices:t},children:[l.jsx(qR,{label:{en:"Current content",zh:""},trackList:fj,defaultShow:!0}),l.jsx(qR,{label:{en:"Legacy ultimates",zh:""},trackList:Ej,defaultShow:!0}),l.jsx("p",{children:l.jsx("b",{children:g({en:"Archive",zh:""})})}),Array.from(mj.entries().map(([f,h],m)=>l.jsx("div",{children:l.jsx(qR,{label:{en:f},trackList:h})},m)))]})})]})},{defaultSize:30,content:l.jsxs(l.Fragment,{children:[d,l.jsx(Aj,{marginTop:15,marginBottom:15}),l.jsx(ws.Provider,{value:{trackIndices:e,setTrackIndices:t},children:l.jsx(Sj,{})})]})},{defaultSize:35,content:l.jsx(l.Fragment,{children:l.jsx(od.Provider,{value:n,children:l.jsx(ws.Provider,{value:{trackIndices:e,setTrackIndices:t},children:l.jsx(Ij,{})})})})}]})}const He=new Map;He.set(H.LeyLines,"Buffs/BLM/Ley Lines.png");He.set(H.Tincture,"Buffs/General/Tincture.png");He.set(H.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");He.set(H.ArmysPaeon,"Buffs/BRD/Army's Paeon.png");He.set(H.BattleLitany,"PartyBuffs/battle_litany.png");He.set(H.BattleVoice,"Buffs/BRD/Battle Voice.png");He.set(H.Brotherhood,"PartyBuffs/brotherhood.png");He.set(H.Card_TheBalance,"PartyBuffs/the_balance.png");He.set(H.Card_TheSpear,"PartyBuffs/the_spear.png");He.set(H.ChainStratagem,"PartyBuffs/chain_stratagem.png");He.set(H.Devilment,"Buffs/DNC/Devilment.png");He.set(H.Divination,"PartyBuffs/divination.png");He.set(H.Dokumori,"PartyBuffs/dokumori.png");He.set(H.Embolden,"PartyBuffs/Embolden.png");He.set(H.MagesBallad,"Buffs/BRD/Mage's Ballad.png");He.set(H.RadiantFinale1,"Buffs/BRD/Radiant Finale.png");He.set(H.RadiantFinale2,"Buffs/BRD/Radiant Finale.png");He.set(H.RadiantFinale3,"Buffs/BRD/Radiant Finale.png");He.set(H.SearingLight,"PartyBuffs/searing_light.png");He.set(H.StandardFinish,"Buffs/DNC/Standard Finish.png");He.set(H.StarryMuse,"Buffs/PCT/Starry Muse.png");He.set(H.TechnicalFinish,"Buffs/DNC/Technical Finish.png");He.set(H.WanderersMinuet,"Buffs/BRD/Wanderer's Minuet.png");He.set(H.Acceleration,"Buffs/RDM/Acceleration.png");He.set(H.Fuka,"Buffs/SAM/Fuka.png");He.set(H.Fugetsu,"Buffs/SAM/Fugetsu.png");He.set(H.EnhancedEnpi,"Buffs/SAM/Enhanced Enpi.png");He.set(H.DeathsDesign,"Buffs/RPR/Death's Design.png");He.set(H.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");He.set(H.RagingStrikes,"Buffs/BRD/Raging Strikes.png");He.set(H.Barrage,"Buffs/BRD/Barrage.png");He.set(H.NoMercy,"Buffs/GNB/No Mercy.png");He.set(H.EnhancedPiercingTalon,"Buffs/DRG/Enhanced Piercing Talon.png");He.set(H.PowerSurge,"Buffs/DRG/Power Surge.png");He.set(H.LanceCharge,"Buffs/DRG/Lance Charge.png");He.set(H.LifeOfTheDragon,"Buffs/DRG/Life of the Dragon.png");He.set(H.LifeSurge,"Buffs/DRG/Life Surge.png");He.set(H.DivineMight,"Buffs/PLD/Divine Might.png");He.set(H.Requiescat,"Buffs/PLD/Requiescat Zero.png");He.set(H.FightOrFlight,"Buffs/PLD/Fight or Flight.png");He.set(H.Zoe,"Buffs/SGE/Zoe.png");He.set(H.Autophysis,"Buffs/SGE/Autophysis.png");He.set(H.Krasis,"Buffs/SGE/Krasis.png");He.set(H.Philosophia,"Buffs/SGE/Philosophia.png");He.set(H.Soteria,"Buffs/SGE/Soteria.png");He.set(H.TrickAttack,"Buffs/NIN/Trick Attack.png");He.set(H.KunaisBane,"Buffs/NIN/Kunai's Bane.png");He.set(H.Bunshin,"Buffs/NIN/Bunshin.png");He.set(H.RiddleOfFire,"Buffs/MNK/Riddle of Fire.png");He.set(H.NeutralSect,"Buffs/AST/Neutral Sect.png");He.set(H.Synastry,"Buffs/AST/Synastry.png");He.set(H.TheArrow,"Buffs/AST/The Arrow.png");He.set(H.Confession,"Buffs/WHM/Confession.png");He.set(H.Asylum,"Buffs/WHM/Asylum.png");He.set(H.Temperance,"Buffs/WHM/Temperance.png");He.set(H.HuntersInstinct,"Buffs/VPR/Hunter's Instinct.png");He.set(H.Swiftscaled,"Buffs/VPR/Swiftscaled.png");He.set(H.FeyIllumination,"Buffs/SCH/Fey Illumination.png");He.set(H.Dissipation,"Buffs/SCH/Dissipation.png");He.set(H.Protraction,"Buffs/SCH/Protraction.png");He.set(H.Recitation,"Buffs/SCH/Recitation.png");const Ps=new Map;He.forEach((e,t)=>{const n=new Image;n.src="assets/"+e,n.onload=function(){Wo()},Ps.set(t,n)});const oE=400,wi=28,Xy=e=>{e.setDraggedSkillElem(void 0),p.record.unselectAll(),p.displayCurrentState(),e.setBgSelecting(!0)};function gj(e){const{ctx:t,lines:n,images:a,viewInfo:s}=e;let{mouseX:c,mouseY:d}=e;const{colors:f,visibleWidth:h,renderingProps:m}=s;if(!n.length)return;const R=14,T=24,S=8,I=4;t.font="12px "+uo;let C=-1;n.forEach(k=>{C=Math.max(C,t.measureText(k).width)});let[_,O]=[C+2*S,R*n.length+2*I];a&&a.length>0&&(_=Math.max(_,S+a.length*(T+S)),O+=T+I);const y=4,x=11;let L=!1;d>=O+y?d=d-O-y:d+O<=m.timelineHeight?d=d+x+y:L=!0,L?(d=d-O/2,c=c+x+y):c-_/2>=0&&c+_/2<h?c=c-_/2:c-_/2<0?c=0:c=h-_,t.strokeStyle=f.bgHighContrast,t.lineWidth=1,t.fillStyle=f.tipBackground,t.fillRect(c,d,_,O),t.strokeRect(c,d,_,O),t.fillStyle=f.emphasis,t.textBaseline="top",t.textAlign="left";for(let k=0;k<n.length;k++)t.fillText(n[k],c+S,d+k*R+2+I);const v=c+S,P=d+n.length*R+2+I;if(a)for(let k=0;k<a.length;k++)a[k]&&t.drawImage(a[k],v+k*T,P,T*.75,T)}function pj(e){const{ctx:t,viewInfo:n,markerTracksTopY:a,markerTracksBottomY:s,timelineOrigin:c,trackBins:d,testInteraction:f}=e,h=n.colors,{countdown:m,scale:R}=n.renderingProps;t.lineCap="round",t.lineWidth=4,t.font="11px "+uo,t.textAlign="left",d.forEach((T,S)=>{let I=s-(S+1)*De.trackHeight;S===lo&&(I=a);for(let C=0;C<T.length;C++){const _=T[C];let O=_.description;_.markerType===Jn.Untargetable?O=g({en:"Untargetable",zh:""}):_.markerType===Jn.Buff&&(O=P0(_.description));const y=c+it.positionFromTimeAndScale(_.time+m,R),x=()=>{const L=p.timeline.deleteMarker(_);console.assert(L),p.updateStats(),Yy(_)};if(_.duration>0){const L=it.positionFromTimeAndScale(_.duration,R);if(_.markerType===Jn.Buff){t.fillStyle=_.color+h.timeline.markerAlpha,t.fillRect(y,I,L,De.trackHeight);const P=Ps.get(_.description);P&&t.drawImage(P,y,I,De.trackHeight*.75,De.trackHeight),t.fillStyle=h.emphasis,t.fillText(O,y+De.trackHeight*1.5,I+10)}else _.showText?(t.fillStyle=_.color+h.timeline.markerAlpha,t.fillRect(y,I,L,De.trackHeight),t.fillStyle=h.emphasis,t.fillText(O,y+De.trackHeight/2,I+10)):(t.strokeStyle=_.color,t.beginPath(),t.moveTo(y,I+De.trackHeight/2),t.lineTo(y+L,I+De.trackHeight/2),t.stroke());const v=_.time+" - "+parseFloat((_.time+_.duration).toFixed(3));f({x:y,y:I,w:Math.max(L,De.trackHeight),h:De.trackHeight},{hoverTip:[`[${v}] ${O}`],onMouseUp:x})}else t.fillStyle=_.color,t.beginPath(),t.ellipse(y,I+De.trackHeight/2,4,4,0,0,2*Math.PI),t.fill(),_.showText&&(t.fillStyle=h.emphasis,t.beginPath(),t.fillText(O,y+De.trackHeight/2,I+10)),f({x:y-De.trackHeight/2,y:I,w:De.trackHeight,h:De.trackHeight},{hoverTip:[`[${_.time}] ${O}`],onMouseUp:x})}})}function Nj(e){const{ctx:t,viewInfo:n,timelineOriginX:a,timelineOriginY:s,elems:c,testInteraction:d}=e,f=n.colors,h=n.renderingProps.scale;t.lineWidth=1,t.strokeStyle=f.timeline.mpTickMark,t.beginPath(),c.forEach(m=>{const R=a+it.positionFromTimeAndScale(m.displayTime,h);t.moveTo(R,s),t.lineTo(R,s+De.renderSlotHeight()),d({x:R-2,y:s,w:4,h:De.renderSlotHeight()},{hoverTip:[`[${m.displayTime.toFixed(3)}] ${m.sourceDesc}`]})}),t.stroke()}function Cj(e){const{ctx:t,viewInfo:n,timelineOriginX:a,timelineOriginY:s,elems:c,testInteraction:d}=e,f=n.colors,h=n.renderingProps.scale;t.lineWidth=1,t.strokeStyle=f.sam.meditation,t.beginPath(),c.forEach(m=>{const R=a+it.positionFromTimeAndScale(m.displayTime,h);t.moveTo(R,s),t.lineTo(R,s+De.renderSlotHeight()),d({x:R-2,y:s,w:4,h:De.renderSlotHeight()},{hoverTip:[`[${m.displayTime.toFixed(3)}] ${m.sourceDesc}`]})}),t.stroke()}function bj(e){const{ctx:t,viewInfo:n,timelineOriginX:a,timelineOriginY:s,elems:c,testInteraction:d}=e,f=n.colors,h=n.renderingProps.scale;t.lineWidth=1,t.strokeStyle=f.pld.ironWillColor,t.beginPath(),c.forEach(m=>{const R=a+it.positionFromTimeAndScale(m.displayTime,h);t.moveTo(R,s),t.lineTo(R,s+De.renderSlotHeight()),d({x:R-2,y:s,w:4,h:De.renderSlotHeight()},{hoverTip:[`[${m.displayTime.toFixed(3)}] ${m.sourceDesc}`]})}),t.stroke()}function Oj(e){const{ctx:t,viewInfo:n,timelineOriginX:a,timelineOriginY:s,elems:c,testInteraction:d}=e,f=n.colors,h=n.renderingProps.scale;t.font="bold 10px "+uo,c.forEach(m=>{const R=a+it.positionFromTimeAndScale(m.displayTime,h),T=12,S=s+T;t.beginPath(),t.textAlign="center",t.moveTo(R,S-T),t.lineTo(R-T/2,S),t.lineTo(R+T/2,S),t.fillStyle=f.timeline.warningMark,t.fill(),t.fillStyle="white",t.fillText("!",R,S-1);let I="["+m.displayTime.toFixed(3)+"] ";switch(m.warningType.kind){case"combobreak":I+=g({en:"broken combo!",zh:""}).toString();break;case"overcap":I+=$e(m.warningType.rsc).toString()+g({en:" overcap!",zh:""}).toString();break;case"overwrite":I+=$e(m.warningType.rsc).toString()+g({en:" overwrite!",zh:""}).toString();break;case"timeout":I+=$e(m.warningType.rsc).toString()+g({en:" expired!",zh:""});break;default:I+=g({en:m.warningType.en,zh:m.warningType.zh});break}d({x:R-T/2,y:S-T,w:T,h:T},{hoverTip:[I]})})}function ZR(e){const{ctx:t,viewInfo:n,timelineOriginX:a,timelineOriginY:s,elems:c,testInteraction:d}=e,{colors:f,renderingProps:h}=n,m=h.scale;c.forEach(R=>{const T=R.type===ht.DamageMark&&ii(R.displayTime),S=a+it.positionFromTimeAndScale(R.displayTime,m);let I="["+R.displayTime.toFixed(3)+"] ";const C=g({en:"Untargetable",zh:""});switch(R.type){case ht.AggroMark:t.fillStyle=f.timeline.aggroMark,I+=g({en:"aggro"});break;case ht.HealingMark:t.fillStyle=f.timeline.healingMark,I+=g({en:"healing potency",zh:""});break;default:t.fillStyle=T?f.timeline.untargetableDamageMark:f.timeline.damageMark,I+=g({en:"damage potency",zh:""})}t.beginPath(),R.type===ht.AggroMark||R.type===ht.DamageMark?(t.moveTo(S-3,s),t.lineTo(S+3,s),t.lineTo(S,s+6)):(t.moveTo(S-3,s+12),t.lineTo(S+3,s+12),t.lineTo(S,s+6)),t.fill();const _=R.buffs.filter(L=>L==="TINCTURE").length>0,O=[],y=[];R.potencyInfos.forEach(L=>{const v=L.sourceDesc.replace("{skill}",ba(L.sourceSkill));if(T)O.push(0 .toFixed(3)+" ("+v+")");else if(L.sourceSkill in jo){const P=g({en:"LB"});O.push(P+" ("+v+")")}else{const P=L.potency.getAmount({tincturePotencyMultiplier:h.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!1});if(L.potency.targetCount>1){const k=P*(1-(L.potency.falloff??1)),w=L.potency.targetCount-1,K=k.toFixed(2)+(w>1?` x ${w}`:""),ne=w>1?g({en:`${v}, ${w} additional targets`,zh:`${v}, ${w} `}):g({en:`${v}, 1 additional target`,zh:`${v}, 1 `});O.push(P.toFixed(2)+" ("+g({en:`${v}, primary target`,zh:`${v}, `})+")"),O.push(K+` (${ne})`)}else O.push(P.toFixed(2)+" ("+v+")");_&&!y.includes(Ps.get(H.Tincture))&&y.push(Ps.get(H.Tincture)),L.potency.getPartyBuffs().forEach(k=>{const w=Ps.get(k);y.includes(w)||y.push()})}});const x=R.type===ht.HealingMark?{x:S-3,y:s+6,w:6,h:6}:{x:S-3,y:s,w:6,h:6};d(x,{hoverTip:T?[I,...O,C]:[I,...O],hoverImages:y})})}function Dj(e){const{ctx:t,viewInfo:n,timelineOriginX:a,timelineOriginY:s,elems:c,testInteraction:d}=e,f=n.colors,h=n.renderingProps.scale;t.fillStyle=f.timeline.lucidTickMark,c.forEach(m=>{const R=a+it.positionFromTimeAndScale(m.displayTime,h);t.beginPath(),t.moveTo(R-3,s),t.lineTo(R+3,s),t.lineTo(R,s+6),t.fill();const T=`[${m.displayTime.toFixed(3)}] ${m.sourceDesc.replace("{skill}",ba("LUCID_DREAMING"))}`;d({x:R-3,y:s,w:6,h:6},{hoverTip:[T]})})}function yj(e){const{ctx:t,viewInfo:n,timelineOriginX:a,timelineOriginY:s,elems:c,interactive:d,testInteraction:f}=e,{colors:h,renderingProps:m}=n,R=m.scale,T=[],S=[],I=[],C=[],_=[],O=new Map([[H.Tincture,{color:h.timeline.potCover,showImage:!0}],[H.LeyLines,{color:h.timeline.llCover,showImage:!0}],[H.SearingLight,{color:h.smn.searing,showImage:!0}],[H.Hyperphantasia,{color:h.timeline.llCover,showImage:!1}],[H.StarryMuse,{color:h.timeline.buffCover,showImage:!0}],[H.Embolden,{color:h.rdm.emboldenBuff,showImage:!0}],[H.Acceleration,{color:h.rdm.accelBuff,showImage:!0}],[H.TechnicalFinish,{color:h.dnc.esprit,showImage:!0}],[H.Devilment,{color:h.dnc.feathers,showImage:!0}],[H.Fuka,{color:h.timeline.llCover,showImage:!0}],[H.Fugetsu,{color:h.sam.fugetsu,showImage:!0}],[H.NoMercy,{color:h.sam.fugetsu,showImage:!0}],[H.EnhancedPiercingTalon,{color:h.drg.enhancedPiercingTalon,showImage:!0}],[H.PowerSurge,{color:h.drg.powerSurge,showImage:!0}],[H.LifeSurge,{color:h.drg.lifeSurge,showImage:!0}],[H.LanceCharge,{color:h.drg.lanceCharge,showImage:!0}],[H.LifeOfTheDragon,{color:h.drg.lifeOfTheDragon,showImage:!0}],[H.BattleLitany,{color:h.drg.battleLitany,showImage:!0}],[H.DivineMight,{color:h.pld.divineMight,showImage:!0}],[H.Requiescat,{color:h.pld.requiescat,showImage:!0}],[H.FightOrFlight,{color:h.pld.fightOrFlight,showImage:!0}],[H.EnhancedEnpi,{color:h.rdm.accelBuff,showImage:!0}],[H.ArcaneCircle,{color:h.rpr.arcaneCircle,showImage:!0}],[H.DeathsDesign,{color:h.rpr.deathsDesign,showImage:!0}],[H.WanderersMinuet,{color:h.brd.wanderersCoda,showImage:!0}],[H.MagesBallad,{color:h.brd.magesCoda,showImage:!0}],[H.ArmysPaeon,{color:h.brd.armysCoda,showImage:!0}],[H.RagingStrikes,{color:h.brd.ragingStrikes,showImage:!0}],[H.Barrage,{color:h.brd.barrage,showImage:!0}],[H.BattleVoice,{color:h.brd.battleVoice,showImage:!0}],[H.RadiantFinale1,{color:h.brd.radiantFinale,showImage:!0}],[H.RadiantFinale2,{color:h.brd.radiantFinale,showImage:!0}],[H.RadiantFinale3,{color:h.brd.radiantFinale,showImage:!0}],[H.Zoe,{color:h.sge.zoe,showImage:!0}],[H.Autophysis,{color:h.sge.autophysis,showImage:!0}],[H.Krasis,{color:h.sge.krasis,showImage:!0}],[H.Soteria,{color:h.sge.soteria,showImage:!0}],[H.Philosophia,{color:h.sge.philosophia,showImage:!0}],[H.WaxingNocturne,{color:h.blu.moonflute,showImage:!0}],[H.Bristle,{color:h.blu.bristle,showImage:!0}],[H.Whistle,{color:h.blu.whistle,showImage:!0}],[H.TingleA,{color:h.blu.tinglea,showImage:!0}],[H.TingleB,{color:h.blu.tingleb,showImage:!0}],[H.Dokumori,{color:h.nin.dokumori,showImage:!0}],[H.TrickAttack,{color:h.nin.trick,showImage:!0}],[H.KunaisBane,{color:h.nin.trick,showImage:!0}],[H.Bunshin,{color:h.nin.bunshin,showImage:!0}],[H.RiddleOfFire,{color:h.mnk.riddleOfFire,showImage:!0}],[H.Brotherhood,{color:h.mnk.brotherhood,showImage:!0}],[H.Divination,{color:h.ast.div,showImage:!0}],[H.NeutralSect,{color:h.ast.neutral,showImage:!0}],[H.Synastry,{color:h.ast.synastry,showImage:!0}],[H.TheArrow,{color:h.ast.arrow,showImage:!0}],[H.Confession,{color:h.whm.confession,showImage:!0}],[H.Asylum,{color:h.whm.asylum,showImage:!0}],[H.Temperance,{color:h.whm.temperance,showImage:!0}],[H.HuntersInstinct,{color:h.vpr.huntersInstinct,showImage:!0}],[H.Swiftscaled,{color:h.vpr.swiftscaled,showImage:!0}],[H.ChainStratagem,{color:h.sch.chain,showImage:!0}],[H.FeyIllumination,{color:h.sch.feyIllumination,showImage:!0}],[H.Dissipation,{color:h.sch.dissipation,showImage:!0}],[H.Protraction,{color:h.sch.protraction,showImage:!0}],[H.Recitation,{color:h.sch.recitation,showImage:!0}]]),y=new Map;O.forEach((K,ne)=>y.set(ne,[]));const x=[],L=[],v=[],P=s+De.skillButtonHeight/2;c.forEach(K=>{const ne=K,fe=a+it.positionFromTimeAndScale(ne.displayTime,R),ue=ne.isGCD?P+De.skillButtonHeight/2:P,he=ne.node.targetCount;he>1&&T.push({count:he,x:fe+De.skillButtonHeight/2,y:ue-5});const Ee=2,q=it.positionFromTimeAndScale(ne.lockDuration,R);if(ne.isSpellCast?(I.push({x:fe+Ee,y:ue,w:q-Ee,h:De.skillButtonHeight/2}),_.push(fe+it.positionFromTimeAndScale(ne.relativeSnapshotTime,R))):S.push({x:fe+Ee,y:ue,w:q-Ee,h:De.skillButtonHeight}),ne.isGCD){const Z=it.positionFromTimeAndScale(ne.recastDuration,R);C.push({x:fe+Ee,y:ue+De.skillButtonHeight/2,w:Z-Ee,h:De.skillButtonHeight/2})}if(ne.skillName in jo){const Z=it.positionFromTimeAndScale(ne.recastDuration,R);S.push({x:fe+Ee,y:ue+De.skillButtonHeight/2,w:Z-Ee,h:De.skillButtonHeight/2})}ne.node.tmp_invalid_reasons.length>0&&L.push({x:fe,y:s+De.slotPaddingTop,w:it.positionFromTimeAndScale(ne.isGCD?Math.max(ne.recastDuration,ne.lockDuration):ne.lockDuration,R),h:De.renderSlotHeight()-De.slotPaddingBottom-De.slotPaddingTop});let Q=0;y.forEach((Z,te)=>{ne.node.hasBuff(te)&&(Q+=j(Q,Z))}),ne.node.hasPartyBuff()&&j(Q,x);function j(Z,te){return m.drawOptions.drawBuffIndicators&&te.push({x:fe,y:ue+wi+Z*4,w:wi,h:4}),1}ST(ne.skillName)&&v.push({elem:K,x:fe,y:ue})}),t.font="13px "+uo,t.fillStyle=h.text,t.textAlign="center",T.forEach(K=>{t.fillText("x"+K.count.toString(),K.x,K.y)});const k=K=>{t.rect(K.x,K.y,K.w,K.h),d&&f(K,{onMouseDown:Xy})};t.fillStyle=h.timeline.castBar,t.beginPath(),I.forEach(k),t.fill(),t.lineWidth=1,t.strokeStyle="rgba(151, 85, 239, 0.4)",t.beginPath(),_.forEach(K=>{t.moveTo(K,P+wi/2),t.lineTo(K,P+wi)}),t.stroke(),t.fillStyle=h.timeline.gcdBar,t.beginPath(),C.forEach(k),t.fill(),t.fillStyle=h.timeline.lockBar,t.beginPath(),S.forEach(k),t.fill(),y.forEach((K,ne)=>{t.fillStyle=O.get(ne).color,t.beginPath(),K.forEach(k),t.fill()}),t.fillStyle=h.timeline.buffCover,t.beginPath(),x.forEach(k),t.fill(),t.beginPath(),v.forEach(K=>{t.drawImage(ST(K.elem.skillName),K.x,K.y,wi,wi);const ne=K.elem.node,fe=[],ue=[],he=ba(K.elem.skillName)+"@"+K.elem.displayTime.toFixed(3);if(fe.push(he),!((ne.maybeGetActionKey()??"NEVER")in jo)){if(ne.getInitialPotency()){const q=ne.getPotency({tincturePotencyMultiplier:m.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!0,untargetable:ii}).applied;fe.push(g({en:"potency: ",zh:""})+q.toFixed(2))}if(ne.getInitialHealingPotency()){const q=ne.getHealingPotency({tincturePotencyMultiplier:m.tincturePotencyMultiplier,includeSplash:!0,includePartyBuffs:!0,untargetable:ii}).applied;fe.push(g({en:"healing potency: "})+q.toFixed(2))}}let Ee=0;ne.tmp_endLockTime!==void 0&&ne.tmp_startLockTime!==void 0&&(Ee=ne.tmp_endLockTime-ne.tmp_startLockTime),fe.push(g({en:"duration: ",zh:""})+Ee.toFixed(3)),ne.tmp_invalid_reasons.length>0&&(fe.push(""),fe.push(g({en:"skill is invalid:",zh:""}).toString()),ne.tmp_invalid_reasons.forEach(q=>fe.push("- "+Ls(q)))),O.forEach((q,Q)=>{q.showImage&&ne.hasBuff(Q)&&ue.push(Ps.get(Q))}),ne.getPartyBuffs().forEach(q=>{const Q=Ps.get(q);Q&&ue.push(Q)}),d?f({x:K.x,y:K.y,w:wi,h:wi},{hoverTip:fe,onMouseUp:q=>{q.draggedSkillElem===void 0&&(q.bgSelecting||(p.timeline.onClickTimelineAction(K.elem.actionIndex,q.shiftKey),US()))},onMouseDown:q=>{q.dragLock||q.setDraggedSkillElem(K.elem)},pointerMouse:!0,hoverImages:ue}):f({x:K.x,y:K.y,w:wi,h:wi},{hoverTip:fe,pointerMouse:!1,hoverImages:ue})});const w=t.globalAlpha;return t.fillStyle=h.timeline.invalidBg,t.globalAlpha=.2,t.beginPath(),L.forEach(K=>{t.rect(K.x,K.y,K.w,K.h)}),t.fill(),t.globalAlpha=w,new Map(d?v.map(K=>[K.elem.actionIndex,{x:K.x,y:K.y,w:wi,h:wi}]):[])}function PT(e){const{ctx:t,color:n,x:a,y1:s,y2:c,y3:d,tip:f,width:h,testInteraction:m}=e;t.fillStyle=n,t.beginPath(),t.moveTo(a-3,0),t.lineTo(a+3,0),t.lineTo(a,6),t.fill(),t.lineWidth=1,t.strokeStyle=n,t.setLineDash([]),t.beginPath(),t.moveTo(a,0),t.lineTo(a,s),t.stroke(),t.strokeStyle=n+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(a,s),t.lineTo(a,c),t.stroke();const R=t.lineWidth;h!==void 0&&(t.lineWidth=h),t.strokeStyle=n,t.setLineDash([]),t.beginPath(),t.moveTo(a,c),t.lineTo(a,d),t.stroke(),t.lineWidth=R,t.strokeStyle=n+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(a,d),t.lineTo(a,oE),t.stroke(),f!==void 0&&(m==null||m({x:a-3,y:0,w:6,h:oE},{hoverTip:[f]})),t.setLineDash([])}function qy(e){const{ctx:t,viewInfo:n,originX:a,testInteraction:s}=e,c=e.ignoreVisibleX??!1,{colors:d,renderingProps:f,visibleWidth:h}=n,m=c?it.positionFromTimeAndScale(p.game.time+f.countdown,f.scale):h;t.fillStyle=d.timeline.ruler,t.fillRect(0,0,m,De.rulerHeight),s({x:De.leftBufferWidth,y:0,w:m-De.leftBufferWidth,h:De.rulerHeight},{hoverTip:C=>[(it.timeFromPositionAndScale(C.x-a,f.scale)-f.countdown).toFixed(3)],onMouseDown:C=>{const _=it.timeFromPositionAndScale(C.x-a,f.scale)-f.countdown;_<p.game.getDisplayTime()&&_>=-p.game.config.countdown?p.displayHistoricalState(_,void 0):p.displayCurrentState()}}),t.lineCap="butt",t.beginPath();const R=f.scale*100,T=f.countdown*R;t.lineWidth=1,t.strokeStyle=d.text,t.textBaseline="alphabetic",t.font="13px "+uo,t.textAlign="center",t.fillStyle=d.text;const S=50,I=function(C,_,O){const y=C*R,x=a+y+T;x>=-50&&x<=m+S&&(t.moveTo(x,0),t.lineTo(x,_),O&&t.fillText(it.displayTime(y/R,0),x,23))};if(R>=6){for(let C=0;C*R<f.timelineWidth-T;C+=1)C%5!==0&&I(C,6,!1);for(let C=-1;C*R>=-T;C-=1)C%5!==0&&I(C,6,!1)}for(let C=0;C*R<f.timelineWidth-T;C+=5)I(C,10,!0);for(let C=-5;C*R>=-T;C-=5)I(C,10,!0);return t.stroke(),De.rulerHeight}function Zy(e){const{ctx:t,viewInfo:n,originX:a,originY:s,testInteraction:c}=e,d=e.ignoreVisibleX??!1,{colors:f,renderingProps:h,visibleWidth:m}=n,R=d?it.positionFromTimeAndScale(p.game.time+h.countdown,h.scale):m,T=new Map;h.allMarkers.forEach(_=>{let O=T.get(_.track);O===void 0&&(O=[]),O.push(_),T.set(_.track,O)}),t.beginPath();let S=0,I=!1;for(const _ of T.keys())S=Math.max(S,_+1),_===lo&&(I=!0);I&&(S+=1);const C=s+S*De.trackHeight;t.fillStyle=f.timeline.tracks;for(let _=0;_<S;_+=2){const O=C-(_+1)*De.trackHeight;t.rect(0,O,R,De.trackHeight)}return t.fill(),pj({ctx:t,viewInfo:n,markerTracksTopY:s,markerTracksBottomY:C,timelineOrigin:a,trackBins:T,testInteraction:c}),S*De.trackHeight}function $y(e,t){e.fillStyle="rgba(147, 112, 219, 0.15)",e.fillRect(t.x,t.y,t.w,t.h),e.strokeStyle="rgba(147, 112, 219, 0.5)",e.lineWidth=1,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x,t.y+t.h),e.moveTo(t.x+t.w,t.y),e.lineTo(t.x+t.w,t.y+t.h),e.stroke()}function Qy(e){const{ctx:t,viewInfo:n,originX:a,originY:s,isImageExportMode:c,testInteraction:d}=e,{colors:f,renderingProps:h}=n,m=a+it.positionFromTimeAndScale(h.countdown,h.scale);let R=new Map;for(let I=0;I<h.slots.length;I++){const C=I===h.activeSlotIndex,_=new Map;if(c&&!C)continue;h.slots[I].elements.forEach(L=>{const v=_.get(L.type)??[];v.push(L),_.set(L.type,v)});let O=s+I*De.renderSlotHeight();c&&(O=s);const y={ctx:t,viewInfo:n,timelineOriginX:m,timelineOriginY:O,testInteraction:d};h.drawOptions.drawMPTickMarks&&Nj({...y,elems:_.get(ht.MPTickMark)??[]}),h.drawOptions.drawHealingMarks&&ZR({...y,elems:_.get(ht.HealingMark)??[]}),h.drawOptions.drawDamageMarks&&(ZR({...y,elems:_.get(ht.DamageMark)??[]}),ZR({...y,elems:_.get(ht.AggroMark)??[]})),h.drawOptions.drawMPTickMarks&&Dj({...y,elems:_.get(ht.LucidMark)??[]}),Cj({...y,elems:_.get(ht.MeditateTickMark)??[]}),bj({...y,elems:_.get(ht.AutoTickMark)??[]}),Oj({...y,elems:_.get(ht.WarningMark)??[]});const x=yj({...y,elems:_.get(ht.Skill)??[],interactive:C});if(C&&(R=x),h.showSelection&&C&&!c){const L=m+it.positionFromTimeAndScale(h.selectionStartDisplayTime,h.scale),v=it.positionFromTimeAndScale(h.selectionEndDisplayTime-h.selectionStartDisplayTime,h.scale);$y(t,{x:L,y:O,w:v,h:De.renderSlotHeight()})}}const T=it.positionFromTimeAndScale(h.countdown,h.scale);let S=De.renderSlotHeight()*h.slots.length;if(h.slots.length<Ga&&(S+=De.addSlotButtonHeight),t.fillStyle=f.timeline.countdown,t.fillRect(a-De.leftBufferWidth,s,T+De.leftBufferWidth,S),c)return new Map;for(let I=0;I<h.slots.length;I++){const _={x:0,y:s+I*De.renderSlotHeight()+1,w:14,h:De.renderSlotHeight()-2};if(t.fillStyle=I===h.activeSlotIndex?f.accent:f.bgMediumContrast,t.fillRect(_.x,_.y,_.w,_.h),d(_,{hoverTip:I===h.activeSlotIndex?void 0:[g({en:"set active",zh:""})],onMouseUp:(O,y)=>{y&&p.undoStack.doThenPush(new LG(h.activeSlotIndex,I))},pointerMouse:!0}),h.slots.length>1&&I===h.activeSlotIndex){t.fillStyle=f.emphasis,t.font="bold 14px "+uo,t.textAlign="center",t.fillText("",_.x+_.w/2,_.y+_.h-4);const O={x:_.x,y:_.y+_.h-_.w,w:_.w,h:_.w};d(O,{hoverTip:[g({en:"delete",zh:""})],onMouseUp:(y,x)=>{x&&p.undoStack.doThenPush(new xG(h.activeSlotIndex,p.record.serialized()))},pointerMouse:!0})}}return R}function vj(e){const{ctx:t,viewInfo:n,originX:a,timelineStartY:s,testInteraction:c}=e,{colors:d,renderingProps:f}=n,h=a+it.positionFromTimeAndScale(f.countdown,f.scale),m=De.renderSlotHeight(),R=s+f.activeSlotIndex*m,T=new Map;f.sharedElements.forEach(I=>{const C=T.get(I.type)??[];C.push(I),T.set(I.type,C)});const S={y1:s,y2:R,y3:R+m};(T.get(ht.s_HistoricalCursor)??[]).forEach(I=>{const C=I;if(C.enabled){const _=h+it.positionFromTimeAndScale(I.displayTime,f.scale);PT({ctx:t,color:d.historical,x:_,...S,tip:g({en:"cursor: ",zh:""})+C.displayTime.toFixed(3),testInteraction:c})}}),(T.get(ht.s_Cursor)??[]).forEach(I=>{const C=I,_=h+it.positionFromTimeAndScale(C.displayTime,f.scale);PT({ctx:t,color:d.emphasis,x:_,...S,tip:g({en:"cursor: ",zh:""})+C.displayTime.toFixed(3),testInteraction:c})})}function Mj(e){const{ctx:t,viewInfo:n,timelineStartY:a,mouseX:s,mouseY:c,selectStartX:d,selectStartY:f,interactionInfo:h,dragTargetTime:m}=e,{bgSelecting:R,draggedSkillElem:T}=h,{colors:S,visibleLeft:I,renderingProps:C}=n;if(R){const x={x:Math.min(d,s),y:Math.min(f,c),w:Math.abs(d-s),h:Math.abs(f-c)};$y(t,x)}const O=-I+De.leftBufferWidth+it.positionFromTimeAndScale(C.countdown,C.scale);if(T){const x=t.globalAlpha;t.globalAlpha=.4,t.drawImage(ST(T.skillName),s,c,wi,wi),t.globalAlpha=x}const y=m;if(y!==null){const x=De.renderSlotHeight(),L=a+C.activeSlotIndex*x,v=O+it.positionFromTimeAndScale(y,C.scale);PT({ctx:t,color:S.dropTarget,x:v,y1:a,y2:L,y3:L+x,width:4})}}function Lj(e){const{ctx:t,viewInfo:{colors:n,renderingProps:a},originY:s,testInteraction:c}=e;if(a.slots.length<Ga){const h={x:4,y:s+2,w:192,h:De.addSlotButtonHeight-4};t.fillStyle=n.bgLowContrast,t.fillRect(h.x,h.y,h.w,h.h),t.strokeStyle=n.bgHighContrast,t.lineWidth=1,t.strokeRect(h.x,h.y,h.w,h.h),t.font="13px "+uo,t.fillStyle=n.text,t.textAlign="center",t.fillText(g({en:"Add timeline slot",zh:""}),h.x+h.w/2,h.y+h.h-4),c(h,{onMouseUp:(R,T)=>{T&&p.undoStack.doThenPush(new HG(a.activeSlotIndex))},pointerMouse:!0});const m={x:2*4+192,y:s+2,w:192,h:De.addSlotButtonHeight-4};return t.fillStyle=n.bgLowContrast,t.fillRect(m.x,m.y,m.w,m.h),t.strokeStyle=n.bgHighContrast,t.lineWidth=1,t.strokeRect(m.x,m.y,m.w,m.h),t.font="13px "+uo,t.fillStyle=n.text,t.textAlign="center",t.fillText(g({en:"Clone timeline slot",zh:""}),m.x+m.w/2,m.y+m.h-4),c(m,{onMouseUp:(R,T)=>{T&&p.undoStack.doThenPush(new kG(a.activeSlotIndex))},pointerMouse:!0}),De.addSlotButtonHeight}return 0}function Jy(){let e=0,t=!1;for(const n of p.timeline.getAllMarkers()){const a=n.track;e=Math.max(e,a+1),a===lo&&(t=!0)}return t&&(e+=1),e*De.trackHeight}function ev(){return De.rulerHeight+Jy()}function xj(e){const{ctx:t,viewInfo:n,testInteraction:a}=e,{renderingProps:s,colors:c,visibleLeft:d,visibleWidth:f}=n,h=-d+De.leftBufferWidth;let m=0;return t.fillStyle=c.background,t.fillRect(0,0,f+1,s.timelineHeight+1),a({x:0,y:0,w:f,h:oE},{onMouseDown:Xy}),m+=qy({ctx:t,originX:h,viewInfo:n,testInteraction:a}),m+=Jy(),Qy({ctx:t,viewInfo:n,originX:h,originY:m,isImageExportMode:!1,testInteraction:a})}function Hj(e){const{ctx:t,viewInfo:n,testInteraction:a}=e,s=-n.visibleLeft+De.leftBufferWidth,c=Zy({ctx:t,viewInfo:n,originX:s,originY:De.rulerHeight,testInteraction:a});return Lj({ctx:t,viewInfo:n,originY:ev()+De.renderSlotHeight()*n.renderingProps.slots.length,testInteraction:a}),c}function QC(e){const{ctx:t,viewInfo:n,dragTargetTime:a,activeHoverTip:s,activeHoverImages:c,mouseX:d,mouseY:f,selectStartX:h,selectStartY:m,mouseInteractionInfo:R,testInteraction:T}=e,S=-n.visibleLeft+De.leftBufferWidth,I=ev();vj({ctx:t,viewInfo:n,originX:S,timelineStartY:I,testInteraction:T}),R&&Mj({ctx:t,viewInfo:n,timelineStartY:I,mouseX:d,mouseY:f,selectStartX:h,selectStartY:m,interactionInfo:R,dragTargetTime:a}),s!==void 0&&gj({ctx:t,viewInfo:n,lines:s,images:c,mouseX:d,mouseY:f})}function JC(e,t){const n=e.x+e.w<t.x,a=e.x>t.x+t.w,s=e.y+e.h<t.y,c=e.y>t.y+t.h;return!(n||a||s||c)}function tv(e,t){const[n,a]=e;return n!==void 0&&a!==void 0&&n>t.x&&n<t.x+t.w&&a>t.y&&a<t.y+t.h}function $R(e,t,n){const a=nv(e,t,n);return a!==void 0?a[0]:void 0}function nv(e,t,n){for(const[a,s]of Array.from(n.entries()).reverse())if(tv([e,t],a))return[s,a]}function QR(){return{mouseDown:new Map,mouseUp:new Map,mouseHover:new Map,pointer:new Map}}function Jh(e){["mouseDown","mouseHover","mouseUp","pointer"].forEach(t=>e[t].clear())}function kj(e){const t=N.useRef(null),n=N.useRef(null),a=N.useRef(null),s=window.devicePixelRatio,c=e.visibleWidth*s,d=e.timelineHeight*s,f=N.useContext(gn),h=N.useContext($E),m=N.useContext(vd),R=N.useRef([null,null]),T=N.useRef(0),S=N.useRef(0),I=N.useRef(void 0),C=N.useRef(void 0),_=N.useRef(0),O=N.useRef(0),y=N.useRef({}),[x,L]=N.useState(0),v=N.useRef(new Map),P=N.useRef({live:QR(),interactive:QR(),lowUpdate:QR()});function k(D){const F=P.current;return new Map([...F.live[D],...F.interactive[D],...F.lowUpdate[D]])}const w=N.useRef(void 0),K=D=>{w.current=D},ne=N.useRef(!1),fe=D=>{ne.current=D},ue=D=>(F,Y)=>{const{hoverTip:B,onMouseUp:W,onMouseDown:re,pointerMouse:oe,hoverImages:Ae}=Y,me=P.current[D];(B||Ae)&&me.mouseHover.set(F,{tip:B,images:Ae}),W&&me.mouseUp.set(F,W),re&&me.mouseDown.set(F,re),oe!==void 0&&me.pointer.set(F,oe)},he=D=>{const F=-e.visibleLeft-De.leftBufferWidth,Y=e.visibleWidth-F;D.clearRect(F,0,Y,oE+x)},Ee=()=>{const D=y.current.tip,F={x:T.current,y:S.current,shiftKey:!1,dragLock:m.value,draggedSkillElem:w.current,bgSelecting:ne.current,setDraggedSkillElem:K,setBgSelecting:fe};return{viewInfo:{renderingProps:p.getTimelineRenderingProps(),colors:hi(f),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth},dragTargetTime:h.dragTargetTime,mouseX:T.current,mouseY:S.current,selectStartX:_.current,selectStartY:O.current,activeHoverTip:D!==void 0?Array.isArray(D)?D:D(F):void 0,activeHoverImages:y.current.images,mouseInteractionInfo:F}},q=()=>{var F;const D=(F=n.current)==null?void 0:F.getContext("2d",{alpha:!0});D&&(D.scale(s,s),he(D),Jh(P.current.interactive),QC({ctx:D,...Ee(),testInteraction:ue("interactive")}),D.scale(1/s,1/s))},Q={onMouseMove:(D,F)=>{if(T.current=D,S.current=F,y.current=$R(D,F,k("mouseHover"))??{},ne.current){const Y={x:Math.min(_.current,D),y:Math.min(O.current,F),w:Math.abs(_.current-D),h:Math.abs(O.current-F)};let B=null,W=null;for(const[re,oe]of v.current.entries())if(JC(oe,Y)){B=re,W=re;break}if(W!==null)for(const[re,oe]of Array.from(v.current.entries()).reverse()){if(W>=re)break;if(JC(oe,Y)){W=re;break}}(B!==R.current[0]||W!==R.current[1])&&(R.current=[B,W],B!==null&&W!==null?(p.record.selectSingle(B),p.record.selectUntil(W)):p.record.unselectAll(),p.displayCurrentState())}if(w.current){p.record.isInSelection(w.current.actionIndex)||p.timeline.onClickTimelineAction(w.current.actionIndex,!1);const Y=-e.visibleLeft+De.leftBufferWidth;let B=1/0,W=-1,re;const oe=v.current,Ae=Array.from(oe.entries());for(let Ie=0;Ie<Ae.length;Ie++){const[be,ye]=Ae[Ie],Ue=Math.abs(T.current-ye.x);if(re!==void 0&&Ue>re)break;Ue<B&&(B=Ue,W=be),re=Ue}let me=1/0;const Ce=p.getTimelineRenderingProps(),Be=Ce.sharedElements.filter(Ie=>Ie.type==ht.s_Cursor);let Ne;const pe=Be[Be.length-1].displayTime+Ce.countdown;Be.length>0&&(Ne=Y+it.positionFromTimeAndScale(pe,Ce.scale),me=Math.abs(T.current-Ne));let le=null;const ge=Array.from(oe.keys());Ne!==void 0&&me<B&&oe.size>0&&W===ge[ge.length-1]&&(W=ge[ge.length-1]+1,le=pe-Ce.countdown),W!==-1&&h.dragTargetIndex!==W&&(le===null&&(W>0&&!w.current.isGCD?le=p.record.actions[W-1].tmp_endLockTime??null:le=p.record.actions[W].tmp_startLockTime??null,le!==null&&(le-=p.gameConfig.countdown)),h.setDragTarget(W,le))}e.setPointerMouse($R(D,F,k("pointer"))??!1),q()},onMouseEnter:()=>{},onMouseLeave:()=>{I.current=void 0,C.current=void 0,ne.current=!1,(y.current.tip!==void 0||y.current.images!==void 0)&&(y.current={tip:void 0,images:void 0},q())},onMouseUp:(D,F,Y)=>{if(T.current=F,S.current=Y,w.current){const B=h.dragTargetIndex;h.setDragTarget(null,null),K(void 0);let W=!0;if(B!==null){const re=p.record.selectionStartIndex??0;let oe=B-(re??0);if(oe>0&&(oe-=p.record.getSelectionLength()),oe!==0){p.undoStack.push(new uf(re,p.record.getSelectionLength(),oe)),p.record.moveSelected(oe),p.autoSave();const Ae=ni();Wo();const me=p.record.selectionStartIndex;me!==void 0?p.displayHistoricalState(Ae.skillUseTimes[me],me):p.displayCurrentState(),W=!1}}W&&q()}if(!p.inputLocked){const B=nv(F,Y,k("mouseUp"));if(B!==void 0){const[W,re]=B;W({x:F,y:Y,shiftKey:D.shiftKey,dragLock:m.value,bgSelecting:ne.current,setDraggedSkillElem:K,setBgSelecting:fe},tv([I.current,C.current],re))}}ne.current=!1},onMouseDown:(D,F)=>{var Y;if(I.current=D,C.current=F,T.current=D,S.current=F,!p.inputLocked){const B=k("mouseDown");_.current=D,O.current=F,(Y=$R(D,F,B))==null||Y({x:D,y:F,shiftKey:!1,dragLock:m.value,bgSelecting:ne.current,setDraggedSkillElem:K,setBgSelecting:fe})}},onKeyDown:D=>{p.handleTimelineKeyboardEvent(D),p.inputLocked||D.key==="Escape"&&(h.setDragTarget(null,null),K(void 0))}};N.useEffect(()=>e.setCallbacks(Q),[h.dragTargetTime,m.value]);const j=()=>{const[D,F,Y]=[t,n,a].map((B,W)=>{var re;return(re=B.current)==null?void 0:re.getContext("2d",{alpha:W!==0})});if(D&&F&&Y){[D,F,Y].forEach(W=>W.scale(s,s)),Jh(P.current.live),Jh(P.current.interactive),Jh(P.current.lowUpdate),[F,Y].forEach(W=>he(W));const B={renderingProps:p.getTimelineRenderingProps(),colors:hi(f),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth};v.current=xj({ctx:D,viewInfo:B,testInteraction:ue("live")}),QC({ctx:F,...Ee(),testInteraction:ue("interactive")}),L(Hj({ctx:Y,viewInfo:B,testInteraction:ue("lowUpdate")})),[D,F,Y].forEach(W=>W.scale(1/s,1/s))}};N.useEffect(q,[h.dragTargetTime]),N.useEffect(()=>{m.value||(q(),h.setDragTarget(null,null),K(void 0))},[m.value]),N.useEffect(j,[T,S,e.version,s]),N.useEffect(()=>{j(),e.setCallbacks(Q)},[e.visibleLeft,e.visibleWidth]);const G={width:e.visibleWidth,height:e.timelineHeight,position:"absolute",pointerEvents:"none",cursor:e.pointerMouse?"pointer":"default",left:0,top:0},Z=Math.ceil(c),te=Math.ceil(d);return l.jsxs("div",{style:{position:"relative"},children:[l.jsx("canvas",{ref:t,width:Z,height:te,tabIndex:0,style:{...G,zIndex:0}}),l.jsx("canvas",{ref:a,width:Z,height:te,tabIndex:-1,style:{...G,zIndex:1,backgroundColor:"transparent"}}),l.jsx("canvas",{ref:n,width:Z,height:te,tabIndex:-1,style:{...G,zIndex:2,backgroundColor:"transparent"}})]})}const fI=N.createContext(void 0),EI=N.createContext(void 0);function Uj(){const e=N.useContext(EI),t=N.useContext(fI);if(!(t===void 0&&e===void 0))return{...e,...t}}function nr(){const e=N.useContext(EI),t=N.useContext(fI);if(t===void 0)throw new Error("Base UI: DialogRootContext is missing. Dialog parts must be placed within <Dialog.Root>.");return{...e,...t}}function ir(e){const t=typeof e.render=="string"?e.render:void 0,n=typeof e.render=="string"?void 0:e.render;return{renderElement:bE(t,{className:e.className,render:n},{...e,props:e.extraProps})}}const wj={...CE,...vS},iv=N.forwardRef(function(t,n){const{render:a,className:s,...c}=t,{open:d,nested:f,mounted:h,transitionStatus:m,backdropRef:R}=nr(),T=N.useMemo(()=>({open:d,transitionStatus:m}),[d,m]),S=Mc(R,n),{renderElement:I}=ir({render:a??"div",className:s,state:T,ref:S,extraProps:mo({role:"presentation",hidden:!h,style:{userSelect:"none",WebkitUserSelect:"none"}},c),customStyleHookMapping:wj});return f?null:I()});function Pj(e){const{rootElementName:t=""}=e,[n,a]=N.useState(t.toUpperCase()),s=N.useCallback(c=>{a((c==null?void 0:c.tagName)??"")},[]);return{rootElementName:n,updateRootElementName:s}}const Gj=N.createContext(void 0);function Bj(e=!1){const t=N.useContext(Gj);if(t===void 0&&!e)throw new Error("Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.");return t}function av(e={}){const{buttonRef:t,disabled:n=!1,focusableWhenDisabled:a,tabIndex:s,type:c="button",elementName:d}=e,f=N.useRef(null),{rootElementName:h,updateRootElementName:m}=Pj({rootElementName:d}),R=Bj(!0)!==void 0,T=Na(()=>{const O=f.current;return h==="BUTTON"||h==="INPUT"&&["button","submit","reset"].includes(O==null?void 0:O.type)}),S=Na(()=>{const O=f.current;return!!(h==="A"&&(O!=null&&O.href))}),I=Mc(m,t,f),C=N.useMemo(()=>{const O={};return s!==void 0&&!R&&(O.tabIndex=s),h==="BUTTON"||h==="INPUT"?a||R?O["aria-disabled"]=n:R||(O.disabled=n):h!==""&&(h!=="A"?(O.role="button",R||(O.tabIndex=s??0)):s&&!R&&(O.tabIndex=s),n&&(O["aria-disabled"]=n,R||(O.tabIndex=a?s??0:-1))),O},[n,h,a,R,s]);return co(()=>{const O=f.current;O instanceof HTMLButtonElement&&R&&n&&C.disabled===void 0&&O.disabled&&(O.disabled=!1)},[n,C.disabled,R]),{getButtonProps:N.useCallback((O={})=>{const{onClick:y,onMouseDown:x,onKeyUp:L,onKeyDown:v,onPointerDown:P,...k}=O;return mo({type:h==="BUTTON"||h==="INPUT"?c:void 0,onClick(w){if(n){w.preventDefault();return}y==null||y(w)},onMouseDown(w){n||x==null||x(w)},onKeyDown(w){(n&&a&&w.key!=="Tab"||w.target===w.currentTarget&&!T()&&w.key===" ")&&w.preventDefault(),n||(TT(w),v==null||v(w)),!w.baseUIHandlerPrevented&&w.target===w.currentTarget&&!T()&&!S()&&w.key==="Enter"&&!n&&(y==null||y(w),w.preventDefault())},onKeyUp(w){n||(TT(w),L==null||L(w)),!w.baseUIHandlerPrevented&&w.target===w.currentTarget&&!T()&&!n&&w.key===" "&&(y==null||y(w))},onPointerDown(w){if(n){w.preventDefault();return}P==null||P(w)},ref:I},C,k)},[C,n,h,a,T,S,I,c]),buttonRef:I}}function Fj(e){const{open:t,setOpen:n,rootRef:a,disabled:s}=e,c=Na(h=>{t&&n(!1,h.nativeEvent,"click")}),{getButtonProps:d}=av({disabled:s,buttonRef:a});return{getRootProps:h=>mo({onClick:c},h,d)}}const ov=N.forwardRef(function(t,n){const{render:a,className:s,disabled:c=!1,...d}=t,{open:f,setOpen:h}=nr(),{getRootProps:m}=Fj({disabled:c,open:f,setOpen:h,rootRef:n}),R=N.useMemo(()=>({disabled:c}),[c]),{renderElement:T}=ir({render:a??"button",className:s,state:R,propGetter:m,extraProps:d});return T()});let e0=0;function jj(e,t="mui"){const[n,a]=N.useState(e),s=e||n;return N.useEffect(()=>{n==null&&(e0+=1,a(`${t}-${e0}`))},[n,t]),s}const zj={...dE},t0=zj.useId;function Yj(e,t){if(t0!==void 0){const n=t0();return e??`${t}-${n}`}return jj(e,t)}function lv(e){return Yj(e,"base-ui")}const Kj={},sv=N.forwardRef(function(t,n){const{render:a,className:s,id:c,...d}=t,{setDescriptionElementId:f}=nr(),h=lv(c);co(()=>(f(h),()=>{f(void 0)}),[h,f]);const m=N.useCallback((T={})=>mo({id:h},T),[h]),{renderElement:R}=ir({propGetter:m,render:a??"p",className:s,state:Kj,ref:n,extraProps:d});return R()});function Vj(e){const{descriptionElementId:t,getPopupProps:n,initialFocus:a,modal:s,mounted:c,openMethod:d,ref:f,setPopupElement:h,titleElementId:m}=e,R=N.useRef(null),T=Mc(f,R,h),S=N.useCallback(_=>_==="touch"?R:0,[]),I=N.useMemo(()=>a==null?S(d??""):typeof a=="function"?a(d??""):a,[S,a,d]);return{getRootProps:_=>mo({"aria-labelledby":m??void 0,"aria-describedby":t??void 0,"aria-modal":c&&s===!0?!0:void 0,role:"dialog",tabIndex:-1,...n(),ref:T,hidden:!c},_),resolvedInitialFocus:I}}let Wj=function(e){return e.nestedDialogs="--nested-dialogs",e}({}),Xj=function(e){return e[e.open=ps.open]="open",e[e.closed=ps.closed]="closed",e[e.startingStyle=ps.startingStyle]="startingStyle",e[e.endingStyle=ps.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e}({});const qj=N.forwardRef(function(t,n){return l.jsx("div",{ref:n,role:"presentation","data-floating-ui-inert":!0,...t,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none"}})}),rv=N.createContext(void 0);function Zj(){const e=N.useContext(rv);if(e===void 0)throw new Error("Base UI: <Dialog.Portal> is missing.");return e}function $j(e){return Pb(19)?e:e?"true":void 0}const Qj={...CE,...vS,nestedDialogOpen(e){return e?{[Xj.nestedDialogOpen]:""}:null}},cv=N.forwardRef(function(t,n){const{className:a,finalFocus:s,initialFocus:c,render:d,...f}=t,{descriptionElementId:h,dismissible:m,floatingRootContext:R,getPopupProps:T,modal:S,mounted:I,nested:C,nestedOpenDialogCount:_,open:O,openMethod:y,popupRef:x,setPopupElement:L,titleElementId:v,transitionStatus:P,onOpenChangeComplete:k,internalBackdropRef:w}=nr();Zj(),NE({open:O,ref:x,onComplete(){O&&(k==null||k(!0))}});const K=Mc(n,x),{getRootProps:ne,resolvedInitialFocus:fe}=Vj({descriptionElementId:h,getPopupProps:T,initialFocus:c,modal:S,mounted:I,openMethod:y,ref:K,setPopupElement:L,titleElementId:v}),ue=_>0,he=N.useMemo(()=>({open:O,nested:C,transitionStatus:P,nestedDialogOpen:ue}),[O,C,P,ue]),{renderElement:Ee}=ir({render:d??"div",className:a,state:he,propGetter:ne,extraProps:{...f,style:{...f.style,[Wj.nestedDialogs]:_}},customStyleHookMapping:Qj});return l.jsxs(N.Fragment,{children:[I&&S===!0&&l.jsx(qj,{ref:w,inert:$j(!O)}),l.jsx(zw,{context:R,disabled:!I,closeOnFocusOut:m,initialFocus:fe,returnFocus:s,modal:S!==!1,children:Ee()})]})});function uv(e){const{children:t,keepMounted:n=!1,container:a}=e,{mounted:s}=nr();return s||n?l.jsx(rv.Provider,{value:n,children:l.jsx(Pw,{root:a,children:t})}):null}const Jj=typeof document<"u"?di.useLayoutEffect:()=>{};function GT(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}function mI(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function qE(e){let t=null;return()=>(t==null&&(t=e()),t)}const e3=qE(function(){return mI(/^Mac/i)}),t3=qE(function(){return mI(/^iPhone/i)}),n3=qE(function(){return mI(/^iPad/i)||e3()&&navigator.maxTouchPoints>1}),i3=qE(function(){return t3()||n3()});function n0(e,t){if(!e)return!1;let n=window.getComputedStyle(e),a=/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY);return a&&t&&(a=e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth),a}function dv(e,t){let n=e;for(n0(n,t)&&(n=n.parentElement);n&&!n0(n,t);)n=n.parentElement;return n||document.scrollingElement||document.documentElement}const JR=typeof document<"u"&&window.visualViewport,a3=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let ef=0,eT;function o3(e={}){let{isDisabled:t}=e;Jj(()=>{if(!t)return ef++,ef===1&&(i3()?eT=s3():eT=l3()),()=>{ef--,ef===0&&eT()}},[t])}function l3(){return GT(nc(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),nc(document.documentElement,"overflow","hidden"))}function s3(){let e,t,n=m=>{e=dv(m.target,!0),!(e===document.documentElement&&e===document.body)&&e instanceof HTMLElement&&window.getComputedStyle(e).overscrollBehavior==="auto"&&(t=nc(e,"overscrollBehavior","contain"))},a=m=>{if(!e||e===document.documentElement||e===document.body){m.preventDefault();return}e.scrollHeight===e.clientHeight&&e.scrollWidth===e.clientWidth&&m.preventDefault()},s=()=>{t&&t()},c=m=>{let R=m.target;r3(R)&&(f(),R.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{R.style.transform="",JR&&(JR.height<window.innerHeight?requestAnimationFrame(()=>{i0(R)}):JR.addEventListener("resize",()=>i0(R),{once:!0}))}))},d=null,f=()=>{if(d)return;let m=()=>{window.scrollTo(0,0)},R=window.pageXOffset,T=window.pageYOffset;d=GT(wu(window,"scroll",m),nc(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),nc(document.documentElement,"overflow","hidden"),nc(document.body,"marginTop",`-${T}px`),()=>{window.scrollTo(R,T)}),window.scrollTo(0,0)},h=GT(wu(document,"touchstart",n,{passive:!1,capture:!0}),wu(document,"touchmove",a,{passive:!1,capture:!0}),wu(document,"touchend",s,{passive:!1,capture:!0}),wu(document,"focus",c,!0));return()=>{t==null||t(),d==null||d(),h()}}function nc(e,t,n){let a=e.style[t];return e.style[t]=n,()=>{e.style[t]=a}}function wu(e,t,n,a){return e.addEventListener(t,n,a),()=>{e.removeEventListener(t,n,a)}}function i0(e){let t=document.scrollingElement||document.documentElement,n=e;for(;n&&n!==t;){let a=dv(n);if(a!==document.documentElement&&a!==document.body&&a!==n){let s=a.getBoundingClientRect().top,c=n.getBoundingClientRect().top;c>s+n.clientHeight&&(a.scrollTop+=c-s)}n=a.parentElement}}function r3(e){return e instanceof HTMLInputElement&&!a3.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function c3(){if(typeof navigator>"u")return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e!=null&&e.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints}}function hv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none")}function BT(){const e=c3();return e.platform==="MacIntel"&&e.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(e.platform)}function u3(){return/firefox/i.test(NS())}function yd(e){return e&&e.ownerDocument||document}function fv(e){return yd(e).defaultView||window}let a0={},o0={},l0="",Ku=0,s0=()=>{};function d3(){return Ku}function h3(){return typeof CSS<"u"&&typeof CSS.supports=="function"&&CSS.supports("height","1dvh")}function f3(e){if(typeof document>"u")return!1;const t=yd(e);return fv(t).innerWidth-t.documentElement.clientWidth>0}function E3(e){var T;const t=yd(e),n=t.documentElement,a=t.body,s=fv(n);let c=0,d=0,f=-1;if(hv()&&(((T=s.visualViewport)==null?void 0:T.scale)??1)!==1)return()=>{};function h(){var w;const S=s.getComputedStyle(n),I=s.getComputedStyle(a);c=n.scrollTop,d=n.scrollLeft,a0={overflowY:n.style.overflowY,overflowX:n.style.overflowX},l0=n.style.scrollBehavior,o0={position:a.style.position,height:a.style.height,width:a.style.width,boxSizing:a.style.boxSizing,overflowY:a.style.overflowY,overflowX:a.style.overflowX,scrollBehavior:a.style.scrollBehavior};const C=(w=S.scrollbarGutter)==null?void 0:w.includes("stable"),_=n.scrollHeight>n.clientHeight,O=n.scrollWidth>n.clientWidth,y=S.overflowY==="scroll"||I.overflowY==="scroll",x=S.overflowX==="scroll"||I.overflowX==="scroll",L=Math.max(0,s.innerWidth-n.clientWidth),v=Math.max(0,s.innerHeight-n.clientHeight);Object.assign(n.style,{overflowY:!C&&(_||y)?"scroll":"hidden",overflowX:!C&&(O||x)?"scroll":"hidden"});const P=parseFloat(I.marginTop)+parseFloat(I.marginBottom),k=parseFloat(I.marginLeft)+parseFloat(I.marginRight);Object.assign(a.style,{position:"relative",height:P||v?`calc(100dvh - ${P+v}px)`:"100dvh",width:k||L?`calc(100vw - ${k+L}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),a.scrollTop=c,a.scrollLeft=d,n.setAttribute("data-base-ui-scroll-locked",""),n.style.scrollBehavior="unset"}function m(){Object.assign(n.style,a0),Object.assign(a.style,o0),n.scrollTop=c,n.scrollLeft=d,n.removeAttribute("data-base-ui-scroll-locked"),n.style.scrollBehavior=l0}function R(){m(),cancelAnimationFrame(f),f=requestAnimationFrame(h)}return h(),s.addEventListener("resize",R),()=>{cancelAnimationFrame(f),m(),s.removeEventListener("resize",R)}}function m3(e){const{enabled:t=!0,mounted:n,open:a,referenceElement:s}=e,c=N.useMemo(()=>t&&(BT()||!h3()||u3()&&!f3(s)),[t,s]);co(()=>{if(n&&!a&&hv()){const d=yd(s),f=d.body.style.userSelect,h=d.body.style.webkitUserSelect;return d.body.style.userSelect="none",d.body.style.webkitUserSelect="none",()=>{d.body.style.userSelect=f,d.body.style.webkitUserSelect=h}}},[n,a,s]),o3({isDisabled:!c}),co(()=>{if(!(!t||c))return Ku+=1,Ku===1&&(s0=E3(s)),()=>{Ku-=1,Ku===0&&s0()}},[t,c,s])}function A3(e){const t=N.useRef(""),n=N.useCallback(s=>{s.defaultPrevented||(t.current=s.pointerType)},[]);return{onClick:N.useCallback(s=>{if(s.detail===0){e(s,"keyboard");return}"pointerType"in s&&e(s,s.pointerType),e(s,t.current),t.current=""},[e]),onPointerDown:n}}function R3(e){const[t,n]=N.useState(null);!e&&t!==null&&n(null);const a=N.useCallback((d,f)=>{e||n(f)},[e,n]),{onClick:s,onPointerDown:c}=A3(a);return N.useMemo(()=>({openMethod:t,triggerProps:{onClick:s,onPointerDown:c}}),[t,s,c])}function T3(e){const{enabled:t,setLock:n,popupRef:a}=e,s=Na(n),c=N.useRef(t);co(()=>{if(!BT()||(t&&(c.current=!0),!c.current))return;const h=yd(a.current).documentElement;if(t){const m=h.scrollLeft,R=h.scrollTop;return()=>{d3()===0&&(h.scrollLeft=m,h.scrollTop=R)}}},[t,a]);const d=Na(f=>{if(!BT())return;const h=Pa(f.nativeEvent);_E(h)&&(s(!1),setTimeout(()=>s(!0)))});return N.useMemo(()=>({floating:{onFocus:d,onClick:d}}),[d])}function S3(e){const{defaultOpen:t,dismissible:n,modal:a,onNestedDialogClose:s,onNestedDialogOpen:c,onOpenChange:d,open:f,onOpenChangeComplete:h}=e,[m,R]=Mb({controlled:f,default:t,name:"DialogRoot",state:"open"}),T=N.useRef(null),S=N.useRef(null),I=N.useRef(null),[C,_]=N.useState(void 0),[O,y]=N.useState(void 0),[x,L]=N.useState(null),[v,P]=N.useState(null),[k,w]=N.useState(!0),{mounted:K,setMounted:ne,transitionStatus:fe}=Lb(m),ue=Na((Ne,pe,le)=>{d==null||d(Ne,pe,le),R(Ne)}),he=Na(()=>{ne(!1),h==null||h(!1)});NE({enabled:!e.actionsRef,open:m,ref:T,onComplete(){m||he()}}),N.useImperativeHandle(e.actionsRef,()=>({unmount:he}),[he]);const q=yS({elements:{reference:x,floating:v},open:m,onOpenChange:(Ne,pe,le)=>{ue(Ne,pe,Hb(le))}}),[Q,j]=N.useState(0),G=Q===0,Z=Jw(q),te=Kw(q),D=yb(q,{outsidePressEvent:"mousedown",outsidePress(Ne){if(Ne.button!==0)return!1;const pe=Pa(Ne);if(G&&n){const le=pe;return a?le?[I.current,S.current].includes(le):!1:!0}return!1},escapeKey:G}),F=m&&a===!0,Y=F&&k,B=T3({enabled:F,setLock:w,popupRef:T});m3({enabled:Y,mounted:K,open:m,referenceElement:v});const{getReferenceProps:W,getFloatingProps:re}=vb([Z,te,D,B]);N.useEffect(()=>(c&&m&&c(Q),s&&!m&&s(),()=>{s&&m&&s()}),[m,s,c,Q]);const oe=N.useCallback(Ne=>{j(Ne+1)},[]),Ae=N.useCallback(()=>{j(0)},[]),{openMethod:me,triggerProps:Ce}=R3(m),Be=N.useCallback((Ne={})=>W(mo(Ce,Ne)),[W,Ce]);return N.useMemo(()=>({modal:a,setOpen:ue,open:m,titleElementId:C,setTitleElementId:_,descriptionElementId:O,setDescriptionElementId:y,onNestedDialogOpen:oe,onNestedDialogClose:Ae,nestedOpenDialogCount:Q,openMethod:me,mounted:K,transitionStatus:fe,getTriggerProps:Be,getPopupProps:re,setTriggerElement:L,setPopupElement:P,popupRef:T,backdropRef:S,internalBackdropRef:I,floatingRootContext:q}),[a,ue,m,C,O,oe,Ae,Q,me,K,fe,Be,re,q])}const Ev=function(t){const{children:n,defaultOpen:a=!1,dismissible:s=!0,modal:c=!0,onOpenChange:d,open:f,actionsRef:h,onOpenChangeComplete:m}=t,R=Uj(),T=S3({open:f,defaultOpen:a,onOpenChange:d,modal:c,dismissible:s,actionsRef:h,onOpenChangeComplete:m,onNestedDialogClose:R==null?void 0:R.onNestedDialogClose,onNestedDialogOpen:R==null?void 0:R.onNestedDialogOpen}),S=!!R,I=N.useMemo(()=>({...T,nested:S,onOpenChangeComplete:m}),[T,S,m]),C=N.useMemo(()=>({dismissible:s}),[s]);return l.jsx(fI.Provider,{value:I,children:l.jsx(EI.Provider,{value:C,children:n})})},I3={},mv=N.forwardRef(function(t,n){const{render:a,className:s,id:c,...d}=t,{setTitleElementId:f}=nr(),h=lv(c);co(()=>(f(h),()=>{f(void 0)}),[h,f]);const m=N.useCallback((T={})=>mo({id:h},T),[h]),{renderElement:R}=ir({propGetter:m,render:a??"h2",className:s,state:I3,ref:n,extraProps:d});return R()}),Av=N.forwardRef(function(t,n){const{render:a,className:s,disabled:c=!1,...d}=t,{open:f,setTriggerElement:h,getTriggerProps:m}=nr(),R=N.useMemo(()=>({disabled:c,open:f}),[c,f]),T=Mc(n,h),{getButtonProps:S}=av({disabled:c,buttonRef:T}),{renderElement:I}=ir({render:a??"button",className:s,state:R,propGetter:C=>S(m(C)),extraProps:d,customStyleHookMapping:Ub});return I()}),Rv=window.location.hostname==="xivintheshell.com"?"a023d800-1740-426a-8134-915efc395aa3":window.location.hostname==="beta.xivintheshell.com"?"a0281008-3d39-4afc-81b4-a8ddbf7cbd44":window.location.host==="localhost:3000"?"a028101a-803b-4ad4-99b6-bacb8484e214":window.location.host==="localhost:4173"?"a0281237-7471-47d4-b33c-52a6cbaed4c1":"",_3="https://www.fflogs.com/oauth/authorize",g3="https://www.fflogs.com/oauth/token";function p3(){const e=new Uint8Array(64);return window.crypto.getRandomValues(e),Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")}async function N3(e){const n=new TextEncoder().encode(e),a=await window.crypto.subtle.digest("SHA-256",n);return btoa(String.fromCharCode(...new Uint8Array(a))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const lE="pkceCodeVerifier",ld="pkceStateBlob";async function r0(){const e=p3(),t=await N3(e),n=window.crypto.randomUUID();localStorage.getItem(lE)===null&&window.localStorage.setItem(lE,e),window.localStorage.getItem(ld)===null&&window.localStorage.setItem(ld,n);const a=new URLSearchParams({client_id:Rv,code_challenge:t,code_challenge_method:"S256",state:n,redirect_uri:window.location.origin,response_type:"code"});window.location.href=`${_3}?${a.toString()}`}function bf(){window.localStorage.removeItem(lE),window.localStorage.removeItem(ld)}var Of=(e=>(e[e.UNAUTHORIZED=0]="UNAUTHORIZED",e[e.NO_PKCE_VERIFIER=1]="NO_PKCE_VERIFIER",e[e.BAD_PKCE_STATE=2]="BAD_PKCE_STATE",e[e.SUCCESS=3]="SUCCESS",e[e.FAILURE=4]="FAILURE",e))(Of||{});async function c0(){const e=new URLSearchParams(window.location.search);window.history.replaceState({},"",window.location.pathname);const t=e.get("code"),n=window.localStorage.getItem(lE),a=window.localStorage.getItem(ld);if(!t)return 0;if(!n)return console.error("PKCE verifier could not be retrieved"),bf(),1;e.get("state")!==a&&(console.error("PKCE response did not have expected state; force setting new value"),console.log("expected:",a),console.log("actual:",e.get("state")),window.localStorage.setItem(ld,e.get("state")));const s=new URLSearchParams({client_id:Rv,code_verifier:n,redirect_uri:window.location.origin,grant_type:"authorization_code",code:t});try{const c=await fetch(g3,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()});if(c.ok){const d=await c.json();return window.sessionStorage.setItem("fflogsAuthToken",d.access_token),console.log("saved auth tokens to sessionStorage"),3}else return console.log("PKCE response was not ok; clearing intermediate state"),console.error(c),bf(),4}catch(c){return console.log("PKCE exchange failed; clearing intermediate state"),console.error(c),bf(),4}}function C3(e){const t=URL.parse(e.replace("#","?"));if(t===null)return{apiBaseUrl:"",reportCode:"",error:{en:"invalid URL",zh:""}};if(t.hostname!=="www.fflogs.com"&&t.hostname!=="cn.fflogs.com")return{apiBaseUrl:"",reportCode:"",error:{en:"must be a link to www.fflogs.com or cn.fflogs.com",zh:"www.fflogs.comcn.fflogs.com"}};const n=t.pathname.split("/").filter(m=>m.length>0);if(n.length!==2)return console.error("parsed link parts:",n),{apiBaseUrl:"",reportCode:"",error:{en:"link must contain a single report",zh:""}};console.assert(n.length>0);const a=n[n.length-1],s=t.searchParams,c=parseInt(s.get("fight")??"NaN"),d=isNaN(c)?void 0:c,f=parseInt(s.get("source")??"NaN"),h=isNaN(f)?void 0:f;return{apiBaseUrl:`https://${t.hostname}/api/v2/user/`,reportCode:a,fightID:d,playerID:h}}const Tv=new Map([["Paladin","PLD"],["Warrior","WAR"],["DarkKnight","DRK"],["Gunbreaker","GNB"],["WhiteMage","WHM"],["Scholar","SCH"],["Astrologian","AST"],["Sage","SGE"],["Monk","MNK"],["Dragoon","DRG"],["Ninja","NIN"],["Viper","VPR"],["Samurai","SAM"],["Reaper","RPR"],["Bard","BRD"],["Machinist","MCH"],["Dancer","DNC"],["BlackMage","BLM"],["Summoner","SMN"],["RedMage","RDM"],["Pictomancer","PCT"],["BlueMage","BLU"]]),u0=new Set([7,8,33218,34682]),Sl={TEMPERA_COAT:1003686,TEMPERA_GRASSA:1003687,BLACKEST_NIGHT:1001178,TENGENTSU:1003853,THIRD_EYE:1001232,CREST_OF_TIME_BORROWED:1002596,COLD_FOG:1002493},b3=new Map([["TEMPERA_COAT_POP","TEMPERA_COAT"],["TEMPERA_GRASSA_POP","TEMPERA_GRASSA"],["THE_BLACKEST_NIGHT_POP","THE_BLACKEST_NIGHT"],["TENGENTSU_POP","TENGENTSU"],["THIRD_EYE_POP","THIRD_EYE"],["ARCANE_CREST_POP","ARCANE_CREST"],["POP_COLD_FOG","COLD_FOG"]]),O3=`
query ListReportFights($reportCode: String) {
	reportData {
		report(code: $reportCode) {
			fights {
				bossPercentage
				encounterID
				id
				name
				kill
				startTime
			}
			startTime
		}
	}
}`,D3=`
query ListReportFightIDs($reportCode: String) {
	reportData {
		report(code: $reportCode) {
			fights {
				id
			}
		}
	}
}`,y3=`
query ListFightPlayers($reportCode: String, $fightID: Int) {
	reportData {
		report(code: $reportCode) {
			fights(fightIDs: [$fightID]) {
				bossPercentage
				encounterID
				id
				name
				kill
				startTime
			}
			startTime
			playerDetails(fightIDs: [$fightID])
		}
	}
}`,v3=`
query GetPlayerEvents($reportCode: String, $fightID: Int, $playerID: Int) {
	reportData {
		report(code: $reportCode) {
			events(sourceID: $playerID, fightIDs: [$fightID]) {
				data
				nextPageTimestamp
			}
			fights(fightIDs: [$fightID]) {
				name
				combatTime
				startTime
				endTime
			}
			playerDetails(fightIDs: [$fightID])
		}
	}
}`;async function ZE(e,t,n){const a={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${window.sessionStorage.getItem("fflogsAuthToken")}`},body:JSON.stringify({query:t,variables:n})};return fetch(e,a).then(s=>s.json()).then(s=>{if(s.error!==void 0)throw new Error(s.error);if(s.errors!==void 0)throw new Error(s.errors);return s.data})}const d0=new Map;function Sv(e,t){const n=t.bossPercentage===null?g({en:"(trash)",zh:""}).toString():t.bossPercentage.toFixed(1)+"%";return{label:{en:`${t.name} - ${t.kill?"kill":n}`,zh:`${t.name} - ${t.kill?"":n}`},id:t.id,unixStartTime:e+t.startTime}}async function M3(e,t){const n=d0.get(t);if(n!==void 0)return n;const a=await ZE(e,O3,{reportCode:t}),s=a.reportData.report.startTime,c=a.reportData.report.fights.map(d=>Sv(s,d));return d0.set(t,c),c}async function L3(e,t){const a=(await ZE(e,D3,{reportCode:t})).reportData.report.fights.map(s=>s.id);return Math.max(...a)}function Iv(e){return`${e.name??g({en:"(name unknown)",zh:""})} @ ${e.server??g({en:"(world unknown)",zh:""})}`}const tf=new Map;async function h0(e,t,n){var h;const a=(h=tf.get(t))==null?void 0:h.get(n);if(a!==void 0)return a;const s=await ZE(e,y3,{reportCode:t,fightID:n}),c=Object.values(s.reportData.report.playerDetails.data.playerDetails).flat().map(m=>({id:m.id,name:Iv(m),job:Tv.get(m.type)??"???"})),d=s.reportData.report.startTime,f=Sv(d,s.reportData.report.fights[0]);return tf.has(t)?tf.get(t).set(n,[f,c]):tf.set(t,new Map([[n,[f,c]]])),[f,c]}const Wr=new Map;async function f0(e){var O,y,x;const t=(y=(O=Wr.get(e.reportCode))==null?void 0:O.get(e.fightID))==null?void 0:y.get(e.playerID);if(t!==void 0)return console.log("query cache hit for",e),t;const n=await ZE(e.apiBaseUrl,v3,e),a=Object.values(n.reportData.report.playerDetails.data.playerDetails).flat().filter(L=>L.id===e.playerID)[0],s=Tv.get(a.type),c=Iv(a);let d,f;const h=n.reportData.report.fights[0],m=[],R=[];let T;const S=new Map,I=new Map;for(let L of n.reportData.report.events.data)if(L.sourceID===e.playerID)if(L.type==="cast"&&!u0.has(L.abilityGameID))T!==void 0&&(T.abilityGameID===L.abilityGameID&&(L=T),T=void 0),m.push(L),R.push(L.timestamp);else if(L.type==="begincast"&&!u0.has(L.abilityGameID))T=L;else if(L.type==="combatantinfo")d=L.level,f={main:L[mt[s].mainStat],spellSpeed:L.spellSpeed,skillSpeed:L.skillSpeed,criticalHit:L.criticalHit,directHit:L.directHit,determination:L.determination,piety:L.piety,tenacity:L.tenacity};else if(L.type==="removebuff"){let v;const P=L.timestamp,k=L.abilityGameID;s==="PCT"&&L.targetID===e.playerID?k===Sl.TEMPERA_COAT?v="TEMPERA_COAT_POP":k===Sl.TEMPERA_GRASSA&&(v="TEMPERA_GRASSA_POP"):s==="DRK"?k===Sl.BLACKEST_NIGHT&&(v="THE_BLACKEST_NIGHT_POP"):s==="SAM"&&L.targetID===e.playerID?k===Sl.TENGENTSU?v="TENGENTSU_POP":k===Sl.THIRD_EYE&&(v="THIRD_EYE_POP"):s==="RPR"&&L.targetID===e.playerID?k===Sl.CREST_OF_TIME_BORROWED&&(v="ARCANE_CREST_POP"):s==="BLU"&&L.targetID===e.playerID&&k===Sl.COLD_FOG&&(v="POP_COLD_FOG"),v!==void 0&&(S.has(v)?S.get(v).add(P):S.set(v,new Set([P])))}else L.type==="applybuff"&&L.targetID===e.playerID&&s==="PCT"&&L.abilityGameID===Sl.TEMPERA_GRASSA&&(I.has("TEMPERA_GRASSA")||I.set("TEMPERA_GRASSA",new Set),I.get("TEMPERA_GRASSA").add(L.timestamp));(x=I.get("TEMPERA_GRASSA"))==null||x.forEach(L=>{var v;return(v=S.get("TEMPERA_COAT_POP"))==null?void 0:v.delete(L)});const C=m.map(L=>{const v=L.abilityGameID,P=za.get(v)??(v>34e6?"TINCTURE":"NEVER");return P==="NEVER"&&console.error("unknown action id",v),{type:Ze.Skill,skillName:P,targetCount:1,healTargetCount:void 0}}),_={playerName:c,job:s,level:d,statsInLog:f!==void 0&&Object.values(f).every(L=>L!==void 0),inferredConfig:f,buffRemovalActions:Array.from(S.entries().flatMap(([L,v])=>v.entries().map(([P])=>({popKey:L,applyKey:b3.get(L),timestamp:P})))).sort((L,v)=>L.timestamp-v.timestamp),actions:C,timestamps:R,combatStartTime:h.endTime-h.combatTime};return Wr.has(e.reportCode)?Wr.get(e.reportCode).has(e.fightID)?Wr.get(e.reportCode).get(e.fightID).set(e.playerID,_):Wr.get(e.reportCode).set(e.fightID,new Map([[e.playerID,_]])):Wr.set(e.reportCode,new Map([[e.fightID,new Map([[e.playerID,_]])]])),_}const nf={width:"100%",height:"1.6em",outline:"none"};function*x3(e,t){const n=p.gameConfig.serialized(),a={...n,procMode:Ti.Always,job:e.job,initialResourceOverrides:e.job===n.job?n.initialResourceOverrides:[]};for(const[y,x]of Object.entries(e.inferredConfig??{}))typeof x=="number"&&(a[y]=x);e.level!==void 0&&(a.level=e.level),p.setConfigAndRestart(a,t||a.job!==n.job||n.procMode!==a.procMode);const s=p.record.length,c=e.actions;if(console.assert(c.length===e.timestamps.length),c.length===0)return yield{processed:0,total:0,deltas:[],spilledDeltas:0},[];const d=c.map(y=>new na(y)),h=(e.timestamps[0]-e.combatStartTime)/1e3,m=p.game.getSkillAvailabilityStatus(c[0].skillName).castTime,R=m>0?h-m+Ta.getSlidecastWindow(m):h;d.unshift(yl(R)),console.log("initial jump time:",h),-R>p.gameConfig.countdown&&p.setConfigAndRestart({...a,countdown:-Math.floor(R)}),p.insertRecordNodes(d,s);const T={processed:1,total:c.length,deltas:[],spilledDeltas:0};let S=1;const I=p.gameConfig.countdown,C=e.buffRemovalActions[Symbol.iterator]();let _=C.next();for(let y=1;y<c.length;y++){const x=c[y],L=s+y+S,v=p.record.actions[L],P=(e.timestamps[y]-e.combatStartTime)/1e3,k=x.skillName;console.assert(v.info.type===Ze.Skill&&v.tmp_startLockTime);const w=v.tmp_startLockTime-I,K=p.record.actions[L-1],ne=K.tmp_endLockTime-I;if(!_.done){const{popKey:he,applyKey:Ee,timestamp:q}=_.value,Q=(q-e.combatStartTime)/1e3;let j;if(ne>Q?K.info.type===Ze.Skill&&K.info.skillName===Ee?j=L:j=L-1:P>Q&&(j=L),j!==void 0){p.insertRecordNode(xs(he),j),_=C.next(),y--,S++;continue}}const fe=P-w,ue=.05;if(fe>3.5)p.insertRecordNode(yl(P),L),S++;else if(fe>ue){const he=P-ne;console.assert(he>0),p.insertRecordNode(ic(he),L),S++}else fe<-.05&&(T.deltas.length>=10?T.spilledDeltas++:T.deltas.push({skill:k,logTime:P,simTime:w}));T.processed++,yield T}const O=p.record.actions.slice(s);return console.log(`inserted ${S} non-skill nodes`),p.undoStack.push(new MG(O,s,n,a)),p.autoSave(),ni().invalidActions}const Xr={textAlign:"left",paddingLeft:"0.3em"},H3=["spellSpeed","skillSpeed","criticalHit","directHit","determination","piety","fps"];function k3(e){var a;const t=Lt(),n=p.gameConfig[e.field];return l.jsx(Kt,{style:{display:"inline-block",color:t.text},defaultValue:((a=e.inferredStateValue)==null?void 0:a.toString())??"",description:Pu(e.field),onChange:s=>{s.length===0&&e.setValue(void 0);const c=parseInt(s);isNaN(c)||e.setValue(c)},placeholder:n.toString()})}function U3(){const[e,t]=N.useState(new URLSearchParams(window.location.search).has("code")),n={},a=N.useContext(gn)==="Light",s=Lt(),[c,d]=N.useState(!0),f=N.useRef(null),[h,m]=N.useState(""),[R,T]=N.useState(0),S=Ie=>{R===8&&(C(null),d(!0),O([])),Ie!==6&&Ie!==7&&w(void 0),Ie!==4&&Ie!==5&&(L.current=[],P.current=[],v.current=void 0),[2,4,5].includes(Ie)||(x.current=void 0),T(Ie)},[I,C]=N.useState(null),[_,O]=N.useState([]),y=Ie=>{(Ie||R!==7)&&(!Ie&&R===8&&S(2),t(Ie))};N.useEffect(()=>{if(!new URLSearchParams(window.location.search).has("code")&&window.sessionStorage.getItem("fflogsAuthToken")!==null){S(2),console.log("already authorized to fflogs");return}S(1);async function Ie(){let be=0;try{const ye=await c0();if(ye===Of.SUCCESS)be=2;else if(e&&ye===Of.UNAUTHORIZED){await r0();const Ue=await c0();console.log(Ue),Ue===Of.SUCCESS&&(be=2)}}catch(ye){console.log("Error during automatic FFLogs authentication"),console.error(ye)}S(be)}Ie()},[]);const x=N.useRef(void 0),L=N.useRef([]),v=N.useRef(void 0),P=N.useRef([]),[k,w]=N.useState(void 0),K={color:s.emphasis,backgroundColor:s.accent},ne=l.jsx("button",{onClick:()=>S(2),children:g({en:"cancel",zh:""})}),fe=l.jsxs("div",{className:"importPage",children:[l.jsx("div",{children:l.jsx("button",{onClick:()=>{r0(),S(1)},children:g({en:"click here to authorize your fflogs account",zh:"fflogs"})})}),l.jsx("span",{children:g({en:"(will redirect to www.fflogs.com)",zh:"www.fflogs.com"})})]}),ue=l.jsx("div",{className:"importPage",children:l.jsx("p",{children:g({en:"verifying authorization...",zh:"..."})})}),he=l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx("b",{children:g({en:"Limitations",zh:""})})}),l.jsxs("div",{children:[g({en:"Log import is currently subject to the following limitations:",zh:"logs"}),l.jsxs("ul",{children:[l.jsx("li",{children:g({en:"FFLogs only records combat stats for the creator of the log, so stats must be manually entered for other players.",zh:"FFLogs"})}),l.jsx("li",{children:g({en:"FFLogs cannot record actions that were performed before combat began. Pre-pull actions must be entered manually before import.",zh:"FFLogslogs"})}),l.jsx("li",{children:g({en:"Manual buff click-offs, and buff toggles from entering/leaving a zone (for example: leaving Ley Lines or Sacred Soil) are not currently processed by XIV in the Shell.",zh:"XIV in the Shellbuff/buff"})}),l.jsx("li",{children:g({en:"The offset of MP and Lucid Dreaming ticks are not currently synchronized in XIV in the Shell.",zh:"XIV in the Shelllogs"})}),l.jsx("li",{children:g({en:"XIV in the Shell currently does not track when multiple enemies are hit by an ability.",zh:"XIV in the Shell"})}),l.jsx("li",{children:g({en:"XIV in the Shell does not reflect job gauge updates that are affected by random factors, or by whether an enemy is hit or killed.",zh:"XIV in the Shell//"})})]}),g({en:"These may change in future updates.",zh:""})]})]}),Ee=R!==2||!h,q=l.jsxs("div",{className:"importPage",children:[l.jsxs("form",{onSubmit:async Ie=>{if(Ie.preventDefault(),R===2)try{const be=C3(h);if(be.error)throw new Error(g(be.error).toString());if(S(3),new URL(h).searchParams.get("fight")==="last"){console.log("querying last fight ID");const ye=await L3(be.apiBaseUrl,be.reportCode);be.fightID=ye}if(x.current=be,be.fightID===void 0){const ye=await M3(be.apiBaseUrl,be.reportCode);L.current=ye,console.log("choosing from",ye.length,"fights"),S(4)}else if(be.playerID===void 0){const ye=await h0(be.apiBaseUrl,be.reportCode,be.fightID);L.current=[],[v.current,P.current]=ye,console.log("choosing from",P.current.length,"players"),S(5)}else{const ye=await f0({apiBaseUrl:be.apiBaseUrl,reportCode:be.reportCode,fightID:be.fightID,playerID:be.playerID});w(ye),console.log(`preparing to import ${ye.actions.length} skills`),S(6)}}catch(be){console.error(be),window.alert(be),S(2)}},children:[l.jsx(Kt,{description:l.jsx("div",{children:g({en:"enter an FFLogs report link",zh:"FFLogs"})}),style:{width:"100%"},onChange:m,defaultValue:h,fullWidthInput:!0,autoFocus:!0}),l.jsxs("div",{className:"buttonHolder",style:{marginTop:10},children:[l.jsx("button",{style:Ee?{}:K,type:"submit",disabled:Ee,children:g({en:"import",zh:""})}),l.jsx("button",{type:"button",onClick:()=>S(0),children:g({en:"back to authorization",zh:""})})]})]}),l.jsx("hr",{}),he]}),Q=l.jsx("div",{className:"importPage",children:l.jsx("p",{children:g({en:"retrieving log...",zh:"logs"})})}),j=N.useRef(!1),G=l.jsxs("div",{className:"importPage",children:[l.jsx("b",{children:g({en:"Choose a fight",zh:""})}),l.jsx("ul",{children:L.current.map((Ie,be)=>l.jsx("li",{onClick:()=>{if(j.current)return;const ye=x.current;if(ye===void 0){console.error("log info was undefined in fight choice state"),S(2);return}j.current=!0,h0(ye.apiBaseUrl,ye.reportCode,Ie.id).then(Ue=>{[v.current,P.current]=Ue,ye.fightID=Ie.id,console.log("choosing from",P.current.length,"players"),S(5)}).catch(Ue=>{console.error(Ue),window.alert(Ue),S(2)}).finally(()=>{j.current=!1})},children:l.jsxs("span",{className:"clickableLinkLike",children:[new Date(Ie.unixStartTime).toLocaleString()," - ",g(Ie.label)]})},be))}),l.jsx("div",{children:ne})]}),Z=l.jsxs("div",{className:"importPage",children:[v.current&&l.jsxs("span",{children:[new Date(v.current.unixStartTime).toLocaleString()," - ",g(v.current.label)]}),l.jsx("b",{children:g({en:"Choose a player",zh:""})}),l.jsx("ul",{children:P.current.map((Ie,be)=>l.jsx("li",{onClick:()=>{if(j.current)return;const ye=x.current;if(ye===void 0){console.error("log info was undefined in player choice state"),S(2);return}if(ye.fightID===void 0){console.error("fight ID was undefined in player choice state"),S(2);return}j.current=!0,f0({apiBaseUrl:ye.apiBaseUrl,reportCode:ye.reportCode,fightID:ye.fightID,playerID:Ie.id}).then(Ue=>{w(Ue),console.log(`preparing to import ${Ue.actions.length} skills`),S(6)}).catch(Ue=>{console.error(Ue),window.alert(Ue),S(2)}).finally(()=>{j.current=!1})},children:l.jsxs("span",{className:"clickableLinkLike",children:[Ie.job," - ",Ie.name]})},be))}),L.current.length===0?l.jsx("div",{children:ne}):l.jsx("div",{children:l.jsx("button",{onClick:()=>{S(4),P.current=[]},children:g({en:"back to fight selection",zh:""})})})]}),te=()=>p.gameConfig.job!==(k==null?void 0:k.job),D=l.jsx(Xe,{container:f,topic:"fflogsConfigReset",content:g({en:l.jsxs("div",{children:['FFLogs only records exact combat stats for the player that created the log. All other stats must be entered manually. Any configuration not specified in this dialog, including initial resource overrides, will use the values set in the main "Config" panel.',l.jsx("br",{}),'After a log import, the "proc mode" field is set to "Always". You can manually adjust this later.']})})}),F=l.jsx(Xe,{container:f,topic:"fflogsConfigResetActive",content:g({en:l.jsxs("div",{children:[l.jsx("i",{children:"Actions in the current timeline will be cleared and replaced with those imported from the log."}),l.jsx("br",{}),"FFLogs does not record actions performed before combat begins. To add pre-pull actions, manually insert them after importing, or add them beforehand and uncheck this option."]}),zh:l.jsxs("div",{children:[l.jsx("i",{children:"logs"}),l.jsx("br",{}),"FFLogslogs"]})})}),Y=l.jsx(Xe,{container:f,topic:"fflogsConfigResetActive",content:g({en:l.jsx("span",{children:l.jsx("i",{children:"Actions imported from the log will be added to the end of the existing timeline."})}),zh:l.jsx("span",{children:l.jsx("i",{children:"logs"})})})}),B=l.jsxs("div",{className:"importPage",children:[g({en:l.jsxs("p",{children:["Reading ",(k==null?void 0:k.actions.length)??0," skills for"," ",l.jsx("b",{children:k==null?void 0:k.playerName})]}),zh:l.jsxs("p",{children:["",l.jsx("b",{children:k==null?void 0:k.playerName}),"",(k==null?void 0:k.actions.length)??0,""]})}),l.jsxs("div",{children:[k!=null&&k.statsInLog?g({en:"Using stats found in log. Please adjust as needed.",zh:"logs"}):g({en:"Exact stats not found in log; using values in current game config. Please enter manually or adjust with the Config pane after import. ",zh:"Logs"}),D]}),l.jsx("hr",{}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5},children:[l.jsxs("div",{children:[l.jsx("span",{children:g({en:"job: ",zh:""})}),(k==null?void 0:k.job)??p.game.job]}),k&&l.jsxs("div",{children:[l.jsx("span",{children:g({en:"level: ",zh:""})}),l.jsxs("select",{style:{outline:"none",color:s.text},value:k.level,onChange:Ie=>w({...k,level:parseInt(Ie.target.value)}),children:[l.jsx("option",{value:ot.lvl100,children:"100"},ot.lvl100),l.jsx("option",{value:ot.lvl90,children:"90"},ot.lvl90),l.jsx("option",{value:ot.lvl80,children:"80"},ot.lvl80),l.jsx("option",{value:ot.lvl70,children:"70"},ot.lvl70)]})]})]}),l.jsx("div",{style:{display:"flex",gap:5,flexDirection:"column"},children:H3.map(Ie=>{var be;return l.jsx("div",{children:l.jsx(k3,{field:Ie,inferredStateValue:(be=k==null?void 0:k.inferredConfig)==null?void 0:be[Ie],setValue:ye=>{(k==null?void 0:k.inferredConfig)!==void 0&&w({...k,inferredConfig:{...k.inferredConfig,[Ie]:ye}})}})},Ie)})}),l.jsx("hr",{}),te()?l.jsx("div",{children:l.jsx("span",{children:g({en:"Imported actions will replace the current timeline.",zh:""})})}):l.jsxs("div",{children:[l.jsx("input",{className:"shellCheckbox",type:"checkbox",onChange:Ie=>{d(Ie.currentTarget.checked)},checked:c}),l.jsxs("span",{children:[g({en:"Reset timeline on import",zh:""})," "]}),c?F:Y]}),l.jsxs("div",{className:"buttonHolder",children:[l.jsx("button",{style:K,onClick:()=>{if(k){S(7);const Ie=x3(k,c||te());setTimeout(()=>{let be=Ie.next();for(;!be.done;)C({...be.value}),be=Ie.next();O(be.value),S(8)},0)}else console.error("intermediate state was undefined when confirming import"),S(2),y(!1)},children:g({en:"go",zh:""})}),ne]})]}),W={position:"relative",width:"100%",borderCollapse:"collapse",borderColor:s.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},re={backgroundColor:s.timelineEditor.headerFooter,...ks(s)},oe=Ie=>Ie%2===1?s.timelineEditor.bgAlternateRow:"transparent",Ae=I!=null&&I.deltas.length?l.jsxs(l.Fragment,{children:[l.jsx("hr",{}),l.jsx("div",{children:g({en:"Some simulated actions had timestamps in XIV in the Shell different from the recorded values in FFLogs. Minor differences are normal, but if you see a very large discrepancy, this means there's either a bug in XIV in the Shell, or the configured spell speed/skill speed/fps was incorrect.",zh:"XIV in the Shell/logsXIV in the Shellbug//"})}),l.jsxs("table",{style:W,children:[l.jsx("thead",{children:l.jsxs("tr",{style:nf,children:[l.jsx("th",{style:{...re,...Xr,width:"35%"},children:g({en:"skill",zh:""})}),l.jsx("th",{style:{...re,...gl},children:g({en:"log time",zh:""})}),l.jsx("th",{style:{...re,...gl},children:g({en:"shell time",zh:""})}),l.jsx("th",{style:{...re,...gl},children:g({en:"difference",zh:""})})]})}),l.jsx("tbody",{children:I.deltas.map((Ie,be)=>l.jsxs("tr",{style:{...nf,background:oe(be)},children:[l.jsx("td",{style:{...Xr,width:"35%"},children:ba(Ie.skill)}),l.jsx("td",{style:gl,children:it.displayTime(Ie.logTime,3)}),l.jsx("td",{style:gl,children:it.displayTime(Ie.simTime,3)}),l.jsx("td",{style:gl,children:it.displayTime(Ie.logTime-Ie.simTime,3)})]},be))})]}),I.spilledDeltas?l.jsx("span",{children:g({en:`...and ${I.spilledDeltas} more`,zh:`${I.spilledDeltas}`})}):void 0]}):l.jsx(l.Fragment,{}),me=l.jsxs("div",{className:"importPage",children:[l.jsx("div",{children:g({en:"processing actions (this may take a moment)...",zh:""})}),I&&l.jsxs("div",{children:[l.jsxs("span",{children:[I.processed," / ",I.total]}),l.jsx("br",{}),Ae]})]}),Ce=_.length>0?l.jsxs(l.Fragment,{children:[g({en:`The imported timeline produced ${_.length} invalid action${_.length===1?"":"s"}:`,zh:`${_.length}`}),l.jsxs("table",{style:W,children:[l.jsx("thead",{children:l.jsxs("tr",{style:nf,children:[l.jsx("th",{style:{...re,...lc},children:"#"}),l.jsx("th",{style:{...re,...Xr},children:g({en:"action",zh:""})}),l.jsx("th",{style:{...re,...Xr},children:g({en:"reason",zh:""})})]})}),l.jsx("tbody",{children:_.slice(0,10).map((Ie,be)=>l.jsxs("tr",{style:{...nf,background:oe(be)},children:[l.jsx("td",{style:lc,children:Ie.index}),l.jsx("td",{style:Xr,children:Ie.node.toLocalizedString()}),l.jsx("td",{style:Xr,children:Ie.reason.unavailableReasons.map(Ls).join(g({en:"; ",zh:""}).toString())})]},be))})]}),_.length>10?l.jsx("span",{children:g({en:`...and ${_.length-10} more`,zh:`...${_.length-10}`})}):void 0]}):void 0,Be=l.jsxs("div",{className:"importPage",children:[l.jsxs("p",{children:[l.jsx("b",{children:g({en:"Import successful!",zh:""})}),g({en:" You may now close this dialog.",zh:""})]}),Ae,l.jsx("br",{}),Ce,l.jsx("br",{}),l.jsx("div",{children:l.jsx("button",{onClick:()=>y(!1),children:g({en:"finish",zh:""})})})]}),Ne=R===0?fe:R===1?ue:R===2?q:R===3?Q:R===4?G:R===5?Z:R===6?B:R===7?me:R===8?Be:l.jsxs("div",{children:["Bad state: ",R,". Please contact us with a bug report."]}),pe=l.jsxs("div",{ref:f,children:[l.jsx("style",{children:`
			button {
				min-width: 35%;
			}
			.buttonHolder {
				width: 100%;
				display: flex;
				flex-direction: column;
				gap: 0.8em;
				align-items: start;
			}
		`}),Ne]}),le=l.jsx("div",{className:"clickable",children:l.jsx("span",{style:n,children:l.jsx("span",{className:"clickableLinkLike",children:g({en:"Click to open dialog",zh:""})})})}),ge=l.jsx(g0,{className:"dialogExit",style:{color:s.bgHighContrast}});return l.jsxs(Ev,{open:e,onOpenChange:y,children:[l.jsx(Av,{render:le,nativeButton:!1}),l.jsxs(uv,{children:[l.jsx(iv,{className:"Backdrop",style:{opacity:a?.2:.7}}),l.jsxs(cv,{className:"Popup visibleScrollbar",id:"dialogPopup",style:{backgroundColor:s.background,border:"1px solid "+s.bgMediumContrast,color:s.text},children:[l.jsx(mv,{render:l.jsx("h3",{children:g({en:"Import from FFLogs",zh:"FFLogs"})})}),l.jsx(ov,{render:ge,nativeButton:!1}),l.jsx(sv,{className:"Description",render:pe})]})]})]})}function w3(e,t){const n=p.getTimelineRenderingProps();let a=n.selectionStartDisplayTime,s=n.selectionEndDisplayTime;a===s&&(a=-n.countdown,s=p.game.time-n.countdown+4);const c=p.imageExportConfig;let d,f;c.wrapThresholdSeconds===0?(d=1,f=s-a):(d=Math.ceil((s-a)/c.wrapThresholdSeconds),f=c.wrapThresholdSeconds);const h=document.createElement("canvas"),m=document.createElement("canvas"),R=De.trackHeight/2,T=p.timeline,S=T.positionFromTime(n.countdown);h.width=T.positionFromTime(s)+S;let I=De.renderSlotHeight();e&&(I+=De.rulerHeight,I+=De.trackHeight*T.getNumMarkerTracks()),h.height=I;const C=h.getContext("2d",{willReadFrequently:!0}),_=0;C.fillStyle=t.background,C.fillRect(0,0,h.width,h.height);let O=0;const y={renderingProps:p.getTimelineRenderingProps(),colors:t,visibleLeft:0,visibleWidth:100};e&&(O+=qy({ctx:C,viewInfo:y,originX:0,ignoreVisibleX:!0,testInteraction:()=>{}}),O+=Zy({ctx:C,viewInfo:y,originX:_,originY:O,ignoreVisibleX:!0,testInteraction:()=>{}})),Qy({ctx:C,viewInfo:y,isImageExportMode:!0,originX:_,originY:O,testInteraction:()=>{}});const x=T.positionFromTime(a)+S,L=T.positionFromTime(s)+S;m.height=(R+I)*(d-1)+I,m.width=d===1?L-x:T.positionFromTime(f);const v=m.getContext("2d");for(let P=0;P<d;P++){const k=T.positionFromTime(f);if(x>L)break;const w=Math.min(L-(x+P*k),k),K=C.getImageData(x+P*k,0,w+1,h.height+1);v.putImageData(K,0,P*(R+I)),P>0&&w<k&&(v.fillStyle=t.background,v.fillRect(w,P*(R+I),k-w,h.height+1))}return m}function P3(){const[e,t]=N.useState(p.imageExportConfig),n=(h,m)=>{const R=Object.assign({},e);R[h]=m,p.setImageExportConfig(R),t(R),pt("img: "+h,JSON.stringify(m))},a={position:"relative",top:3,marginRight:"0.25em"},s=(h,m)=>l.jsxs("div",{style:{marginBottom:5},children:[l.jsx("input",{type:"checkbox",onClick:R=>n(h,R.currentTarget.checked),value:e[h]?"on":"off",style:a,defaultChecked:e[h]}),l.jsx("span",{children:g(m)})]}),c=h=>{Number.isNaN(parseFloat(h))||n("wrapThresholdSeconds",parseFloat(h))},d=l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx(Kt,{defaultValue:e.wrapThresholdSeconds.toString(),description:l.jsxs("span",{children:[g({en:"seconds before wrapping ",zh:" "}),l.jsx(Xe,{topic:"png-wrap",content:g({en:"number of elapsed seconds, including the countdown, in each row in the image (set to 0 to never wrap)",zh:"0"})}),":"," "]}),onChange:c,style:{margin:"10px 0"}})}),s("includeTime",{en:"include time and markers",zh:""})]}),f=Lt();return l.jsxs("div",{children:[l.jsx("p",{children:g({en:l.jsx("span",{children:"export the selected part of the timeline as a png according to the current display settings, or the whole timeline if nothing is selected"}),zh:"png"})}),d,l.jsx("p",{children:l.jsx(Hl,{filename:"fight",fileFormat:Yo.Png,getContentFn:()=>w3(e.includeTime,f),displayName:g({en:"export selection as png",zh:"png"})})})]})}function G3(){const e=N.useContext(gn),t=f=>{f.fileType===Ia.Record?p.undoStack.doThenPush(new wG(p.record.serialized(),f)):f.fileType===Ia.MarkerTrackIndividual||f.fileType===Ia.MarkerTracksCombined?window.alert("wrong file type '"+f.fileType+`'; use the "Timeline markers" section instead if you meant import markers.`):window.alert("wrong file type '"+f.fileType+"'.")},n=g({en:"Export fight to file",zh:""}),a=l.jsxs("div",{children:[l.jsx("p",{children:g({en:"for sharing and importing:",zh:""})}),l.jsx(Hl,{fileFormat:Yo.Json,getContentFn:()=>p.record.serialized(),filename:"fight",displayName:g({en:"txt format",zh:"txt"})}),l.jsx("p",{children:g({en:l.jsxs("span",{children:["for external tools such as excel and"," ",l.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel's plugin"}),":"]}),zh:l.jsxs("span",{children:["excel",l.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel"}),""]})})}),l.jsx(Hl,{fileFormat:Yo.Csv,getContentFn:()=>({body:p.getActionsLogCsv()}),filename:"fight",displayName:g({en:"csv format",zh:"csv"})}),l.jsx("p",{children:g({en:l.jsxs("span",{children:["for use with"," ",l.jsx("a",{href:"https://colab.research.google.com/github/zqsz-xiv/xivintheshell-ama-sim-notebook/blob/main/in_the_shell_with_ama_sim.ipynb",children:"Amarantine's combat simulator"}),":"]}),zh:l.jsxs("span",{children:["",l.jsx("a",{href:"https://github.com/Amarantine-xiv/Amas-FF14-Combat-Sim",children:"Amarantine"}),""]})})}),l.jsx(Hl,{fileFormat:Yo.Csv,getContentFn:()=>p.getAmaSimCsv(),filename:"fight",displayName:g({en:"csv format",zh:"csv"})})]}),s=g({en:"Import fight from file",zh:""}),c=l.jsxs(l.Fragment,{children:[l.jsx(Vf,{allowLoadFromUrl:!1,onLoadFn:t}),l.jsx("hr",{style:{marginTop:15,border:"none",borderTop:"1px solid "+wl(e,"bgHighContrast")}}),l.jsx("div",{style:{marginTop:15,marginBottom:10},children:l.jsx("b",{children:g({en:"Import fight from FFLogs",zh:"FFLogs"})})}),l.jsx(U3,{})]}),d=l.jsx(l.Fragment,{children:g({en:"Image Export",zh:""})});return l.jsx(kS,{contentHeight:AI,children:[{defaultSize:25,title:s,content:c},{defaultSize:30,title:n,content:a},{defaultSize:45,title:d,content:l.jsx(P3,{})}]})}function B3(){const e=(d,f)=>l.jsxs("div",{style:{marginBottom:5},children:[l.jsx("b",{children:g(d)})," ",f]}),t=l.jsx(Xe,{topic:"settings-display",content:g({en:"Configure how elements are displayed in the visual timeline and image exports.",zh:""})}),n=l.jsx(Xe,{topic:"settings-copypaste",content:g({en:l.jsxs("div",{children:["Configure the format used when copying a sequence of skills from XIV in the Shell to paste in other applications.",l.jsx("br",{}),"Any of the provided formats can be pasted ",l.jsx("i",{children:"from"})," external applications to XIV in the Shell at any time, regardless of the value of this setting."]}),zh:l.jsxs("div",{children:["",l.jsx("br",{}),""]})})}),a=l.jsx(Xe,{topic:"settings-copypaste-plain",content:g({en:l.jsxs("div",{children:["A comma-separated list of skill names.",l.jsx("br",{}),l.jsx("br",{}),"Example:",l.jsx("br",{}),l.jsx("span",{children:"Fire 3, Fire 4, Despair"})]}),zh:l.jsxs("div",{children:["",l.jsx("br",{}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{children:"34"})]})})}),s=l.jsx(Xe,{topic:"settings-copypaste-plain",content:g({en:l.jsxs("div",{children:["A tab-separated list of usage timestamps, target counts, and skill names, for use with external spreadsheet applications.",l.jsx("br",{}),l.jsx("br",{}),"Example:",l.jsx("table",{children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 3"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 4"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Despair"})]})]})})]}),zh:l.jsxs("div",{children:["",l.jsx("br",{}),l.jsx("br",{}),"",l.jsx("table",{children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"3"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"4"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]})]})})]})})}),c=l.jsx(Xe,{topic:"settings-copypaste-discord",content:g({en:l.jsxs("div",{children:["A sequence of Discord emotes (only verified for BLM and PCT). Requires access to a server with appropriately-named emotes to use.",l.jsx("br",{}),l.jsx("br",{}),"Example:",l.jsx("br",{}),l.jsx("span",{children:":F3: :F4: :Despair:"})]}),zh:l.jsxs("div",{children:["Discord)Discord",l.jsx("br",{}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{children:":F3: :F4: :Despair:"})]})})});return l.jsxs("div",{children:[e({en:"Display settings",zh:""},t),l.jsx(Fu,{uniqueName:"showDamageMarks",label:g({en:"show damage marks",zh:""}),onChange:d=>{p.setTimelineOptions({drawDamageMarks:d})}}),l.jsx(Fu,{uniqueName:"showHealingMarks",label:g({en:"show healing marks",zh:""}),onChange:d=>{p.setTimelineOptions({drawHealingMarks:d})}}),l.jsx(Fu,{uniqueName:"showMPAndLucidTickMarks",label:g({en:"show MP and lucid ticks",zh:""}),onChange:d=>{p.setTimelineOptions({drawMPTickMarks:d})}}),l.jsx(Fu,{uniqueName:"showBuffIndicators",label:g({en:"show buff indicators",zh:"buff"}),onChange:d=>{p.setTimelineOptions({drawBuffIndicators:d})}}),l.jsx("br",{}),e({en:"Clipboard copy mode",zh:""},n),l.jsx(IO,{uniqueName:"clipboardMode",onChange:d=>p.clipboardMode=d,options:[["plain",l.jsxs("span",{children:[g({en:"plain text",zh:""})," ",a]})],["tsv",l.jsxs("span",{children:[g({en:"tab-separated lines",zh:""})," ",s]})],["discord",l.jsxs("span",{children:["discord",g({en:" emotes",zh:""})," ",c]})]]})]})}let Wo=()=>{},_v=e=>{};const gv="dragLock",F3=gt(gv),pv=F3==="true",vd=N.createContext({value:pv,setter:e=>{}}),$E=N.createContext({dragTargetIndex:null,dragTargetTime:null,setDragTarget:(e,t)=>{}});function j3(){const e=N.useRef(null),[t,n]=N.useState(11),[a,s]=N.useState(300),[c,d]=N.useState(23),[f,h]=N.useState(66),[m,R]=N.useState(0),[T,S]=N.useState(!1),[I,C]=N.useState({onMouseMove:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},onMouseUp:()=>{},onMouseDown:()=>{},onKeyDown:()=>{}}),_=()=>{e.current&&(d(e.current.scrollLeft),h(e.current.clientWidth))};Wo=()=>{n(p.timeline.getCanvasWidth()),s(p.timeline.getCanvasHeight()),R(m+1)},_v=v=>{if(e.current!=null){const P=e.current.clientWidth;e.current.scrollLeft=v-P*.6}_()},N.useEffect(()=>{n(p.timeline.getCanvasWidth()),s(p.timeline.getCanvasHeight()),_()},[]);const O=l.jsx(kj,{timelineHeight:a,visibleLeft:c,visibleWidth:f,version:m,pointerMouse:T,setCallbacks:C,setPointerMouse:S}),y=N.useContext(gn),x=wl(y,"bgMediumContrast"),L=RO?l.jsx("div",{style:{height:8},tabIndex:-1}):void 0;return l.jsxs("div",{style:{position:"relative"},children:[O,l.jsxs("div",{tabIndex:0,className:"visibleScrollbar",style:{position:"relative",width:"100%",overflowX:"scroll",overflowY:"clip",outline:"1px solid "+x,cursor:T?"pointer":"default"},ref:e,onScroll:()=>{e.current&&(e.current.scrollLeft=Math.min(e.current.scrollWidth-e.current.clientWidth,e.current.scrollLeft),d(e.current.scrollLeft),h(e.current.clientWidth))},onMouseMove:v=>{if(e.current){const P=e.current.getBoundingClientRect(),k=v.clientX-P.left,w=v.clientY-P.top;I.onMouseMove(k,w)}},onMouseDown:v=>{if(e.current){const P=e.current.getBoundingClientRect(),k=v.clientX-P.left,w=v.clientY-P.top;I.onMouseDown(k,w)}},onMouseEnter:()=>I.onMouseEnter(),onMouseLeave:()=>I.onMouseLeave(),onMouseUp:v=>{if(e.current){const P=e.current.getBoundingClientRect(),k=v.clientX-P.left,w=v.clientY-P.top;I.onMouseUp(v,k,w)}},onKeyDown:v=>I.onKeyDown(v),children:[l.jsx("div",{style:{position:"relative",backgroundColor:"transparent",width:t,height:a,pointerEvents:"none"}}),L]})]})}const Nv=320,AI=Nv-40;function z3(){const{value:e,setter:t}=N.useContext(vd),n=N.useContext(gn),a=window.innerWidth>1024,s=window.innerWidth>800;return l.jsxs("div",{style:{position:"relative",margin:6},children:[l.jsx(SO,{uniqueName:"timeline",maxWidth:1440,content:[{titleNode:g({en:"Timeline markers",zh:""}),contentNode:l.jsx(_j,{})},{titleNode:l.jsxs("div",{style:{position:"relative"},children:[g({en:"Timeline editor ",zh:" "}),l.jsx(Xe,{topic:"timeline editor",content:l.jsx("div",{children:l.jsx("div",{className:"paragraph",children:g({en:'Table view for editing the current timeline. Changes made here are not saved until the "apply changes" button is pressed.',zh:""})})})})]}),contentNode:l.jsx(DG,{})},{titleNode:g({en:"Import/Export",zh:"/"}),contentNode:l.jsx("div",{children:l.jsx(G3,{})})},{titleNode:g({en:"Settings",zh:""}),contentNode:l.jsx(B3,{})}],collapsible:!0,scrollable:!1,height:Nv,defaultSelectedIndex:void 0}),l.jsxs("div",{style:{position:"absolute",top:0,right:6,display:"flex",flexDirection:"row",gap:20},children:[a&&l.jsxs("div",{style:{height:Jr,lineHeight:`${Jr}px`,verticalAlign:"middle",cursor:"pointer",userSelect:"none"},onClick:c=>{c.preventDefault(),t(!e)},children:[g({en:"drag lock",zh:""})," ",l.jsx(Xe,{topic:"dragLock",content:g({en:l.jsx("div",{children:"When locked, disables click/drag to rearrange timeline skills."}),zh:l.jsx("div",{children:""})})})," ",l.jsx(_s.Provider,{value:{color:e?wl(n,"accent"):void 0,style:{width:12,height:12,verticalAlign:"baseline"}},children:e?l.jsx(L1,{}):l.jsx(M1,{})})]}),s&&l.jsx(CG,{uniqueName:"timelineDisplayScale",description:g({en:"horizontal scale ",zh:" "}),defaultValue:"0.4",style:{height:Jr,lineHeight:`${Jr}px`,verticalAlign:"middle"},onChange:c=>{p.timeline.setHorizontalScale(parseFloat(c)),p.scrollToTime()}})]})]})}function Y3(){const[e,t]=N.useState(pv),[[n,a],s]=N.useState([null,null]),c=(d,f)=>{if(e)d=null,f=null;else{const h=p.record.selectionStartIndex??0;let m=(d??0)-(h??0);m>0&&(m-=p.record.getSelectionLength()),(m===0||d!==null&&p.record.isInSelection(d))&&(d=null,f=null)}(d!==n||f!==a)&&s([d,f])};return l.jsx("div",{style:{bottom:0,left:0,right:0,paddingLeft:0,paddingRight:0,borderTop:"2px solid "+Lt().bgHighContrast,flex:0},children:l.jsx(vd.Provider,{value:{value:e,setter:d=>{pt(gv,d.toString()),t(d)}},children:l.jsxs($E.Provider,{value:{dragTargetIndex:n,dragTargetTime:a,setDragTarget:c},children:[l.jsx(j3,{}),l.jsx(z3,{})]})})})}const Bi=JSON.parse(`[{"date":"1/26/26","changes":["Updated for patch 7.41."],"changes_zh":["7.41"]},{"date":"1/25/26","changes":["[NIN] Fixed a bug where Mudras were sometimes not visible after FFLogs import."]},{"date":"1/24/26","changes":["[AST] Fixed a bug where Oracle's potency was missing."],"changes_zh":[""]},{"date":"1/23/26","changes":["[RPR] Fixed a bug where Soulsow could not be cast during Enshroud.","[MNK] Fixed a bug where Chakra spenders did not receive the effects of Brotherhood and Riddle of Fire."],"changes_zh":["","buff"]},{"date":"1/22/26","changes":["Added Chinese-language M9S, M10S, and M12S P2 tracks (translated by yuyuka)."],"changes_zh":[" M9SM10SM12S   "],"level":"major"},{"date":"1/20/26","changes":["Added Chinese-language M11S and M12S P1 tracks (translated by yuyuka)."],"changes_zh":[" M11S  M12S   "]},{"date":"1/19/26","changes":["Added a user manual. You can find it at xivintheshell.com/manual, in the intro section, or in the links at the top right of the page."],"changes_zh":[" xivintheshell.com/manual"],"level":"major"},{"date":"1/17/26","changes":["Fixed a bug where the piety stat could not be configured."]},{"date":"1/15/26","changes":["Added English-language M12S P1 tracks. All Arcadion Heavyweight fights now have tracks. Happy planning!"]},{"date":"1/14/26","changes":["Added English-language M11S tracks.","Added English-language M12S P2 tracks."]},{"date":"1/13/26","changes":["Added Vamp Stomp floor bat explosion timings to M9S tracks.","Added English-language M10S tracks."]},{"date":"1/12/26","changes":["Added English-language M9S tracks.","[RPR] Fixed a bug where Slice had incorrect potency."]},{"date":"1/11/26","changes":["[SCH] Fixed a bug where using Adloquium, Succor, or Concitation under the effect of Recitation consumed MP.","[BLU] Enabled FFLogs import.","Fixed a bug where importing an FFLogs report link with a fight ID would sometimes not pick the specified fight.","Removed marker presets for M5S-M8S from current content. These can still be found in the \\"archive\\" section of marker presets.","Limited the maximum marker track number to 20."]},{"date":"1/5/26","changes":["[NIN] Fixed a bug where using Doton under the effect of Ten Chi Jin did not apply AoE damage.","New developer blog post (English only): https://blog.xivintheshell.com/posts/the-night-before-heavyweight/"]},{"date":"1/2/26","changes":["[MCH] Adjusted the potency of Wildfire to reflect its inability to CDH.","[SCH][AST] Fixed a bug where DoT effects with no on-hit potency did not receive the player's own Chain Stratagem or Divination buffs.","[DRK] Fixed a bug where Living Shadow granted Scorn below level 100."]},{"date":"12/31/25","changes":["Fixed a visual bug where deleting a marker did not set the correct marker type in the marker creation menu.","[SCH] Fixed a bug where Sacred Soil incorrectly had a 30-second duration.","[SCH] Fixed a bug where Expedient did not grant buffs."]},{"date":"12/30/25","changes":["Changed font specification to improve display on computers with Chinese browser/OS.","Updated the site to automatically use Chinese if your browser is set to use it. Manually using the language selector overrides this.","[BLM] Fixed a bug where overriding the initial AF/UI state gave an extra Polyglot stack."],"changes_zh":["/","",".",""]},{"date":"12/29/25","changes":["[SAM] Added missing application delay values for Hissatsu: Shinten, Kyuten, Gyoten, Yaten, Senei, and Guren.","Updated export to Ama's combat sim to use Grade 4 Gemdraughts for potions.","Added support QQ group to Introductions section."],"changes_zh":["QQ","changelog"]},{"date":"12/26/25","changes":["[AST] Fixed a bug where Stellar Detonation could be repeatedly cast.","[AST] Fixed a bug where automatically-detonated Earthly Star did not receive a pet potency modifier."]},{"date":"12/22/25","changes":["[WAR] Fixed Inner Release being unusable before combat."]},{"date":"12/21/25","changes":["Fixed a bug where importing from FFLogs while resource overrides were active for a different job would crash the site.","[SMN] Fixed a bug where SMN logs could not be imported."]},{"date":"12/19/25","changes":["[RDM] Fixed log imports with Enchanted melee combo actions under the effect of Manafication.","Fixed a bug where importing from FFLogs would sometimes crash the site.","[BRD] Fixed a bug where auto-attacks appeared as an action in log import."]},{"date":"12/16/25","changes":["Updated for patch 7.4."],"changes_zh":["7.4"],"level":"major"},{"date":"12/14/25","changes":["Fixed a bug where the graphical timeline did not render properly when fight markers were loaded and all timeline slots were filled."]},{"date":"12/10/25","changes":["Adjusted the layout of marker presets and input."],"changes_zh":[""]},{"date":"12/7/25","changes":["Adjusted the appearance of scroll bars in Firefox."]},{"date":"11/15/25","changes":["Consumables like Pilgrim's Potions and Super-Ethers in FFLogs imports now display as unknown skills instead of Tinctures."]},{"date":"11/11/25","changes":["Fixed a bug where timeline skill tooltips would be acidentally cut off.","[SCH] Fixed a bug where Energy Drain and Physick were not recognized during log import."],"changes_zh":["","log"]},{"date":"11/7/25","changes":["Added the ability to import fights from FFLogs! You can find it in the Import/Export tab at the bottom of the page.","[WAR] Fixed a typo in the name of Storm's Path and Storm's Eye"],"changes_zh":["FFLogs/"],"level":"major"},{"date":"10/13/25","changes":["Added tracks for The Final Verse (Quantum) Q40."],"level":"minor"},{"date":"9/29/25","changes":["Updated the text of the timeline editor help tooltip.","New developer blog post (English only): https://blog.xivintheshell.com/posts/progressive-ux-improvements/"],"changes_zh":[""],"level":"minor"},{"date":"9/20/25","changes":["[!] Skills can now be inserted in the middle of a timeline.","[!] Pressing backspace/delete now deletes only the selected skills.","Using the up and down arrow keys changes the selected skills.","Most actions can now be undone/redone with ctrl/cmd+z and ctrl/cmd+y.","Actions can now be copy/pasted both within and outside the site (see \\"Settings\\" at the bottom of the page for details).","Adjusted the appearance of some website elements on Firefox."],"changes_zh":["[!]","[!]backspacedelete","    ","ctrl/cmd+zctrl/cmd+y/","",""],"level":"major"},{"date":"9/14/25","changes":["Fixed a bug where certain config stats couldn't be changed."]},{"date":"9/12/25","changes":["Added an \\"apply\\" button to the configuration section, which can be used to change configuration without resetting the timeline."],"changes_zh":[""]},{"date":"9/8/25","changes":["Fixed a crash when loading xivgear/etro links from a job different from the active one.","Fixed an issue where speed effects and certain sps/sks values were displayed incorrectly at level 70 (this was only a cosmetic issue in the configuration panel).","Changing jobs now uses the last saved stats you set for that job.","Creating a new timeline with a different job will now use one of The Balance's best-in-slot gear sets for the current patch."]},{"date":"9/2/25","changes":["Added different tincture images for each job.","Timelines with invalid skill names can now be loaded."]},{"date":"9/1/25","changes":["Added DSR P2 markers from Caro."]},{"date":"8/28/25","changes":["[BRD] Fixed typos in the names of Apex Arrow, The Wanderer's Minuet, and Rain of Death.","[BRD] Export to Ama's combat sim now tracks codas for Radiant Finale and Radiant Encore.","Updated export to Ama's combat sim to include hard-coded STR stats for healer/caster auto-attacks."]},{"date":"8/19/25","changes":["[WHM] Fixed a bug where Lillies would continue to generate even when at full stacks.","Fixed a bug where clicking on the timeline ruler would not immediately display historical state."],"level":"minor"},{"date":"8/17/25","changes":["Changed timeline slot buttons to trigger only if the mouse was both pressed and released on top of them."],"level":"minor"},{"date":"8/11/25","changes":["Made some internal adjustments to the implementation of click/drag selection and skill arrangements.","[WAR] Fixed a bug where Decimate consumed 2 stacks of Inner Release, and failed to grant Burgeoning Fury.","[WAR] Fixed Storm's Eye using an incorrect application delay.","[WAR] Extended the duration of the Inner Release, Primal Rend Ready, and Primal Ruination buffs to match in-game behavior.","[NIN] Fixed a bug where using Gust Slash without an active combo incorrectly advanced combo state.","[NIN] Fixed a bug where damage from Doton ticks was not computed.","[NIN] Fixed a bug where using Katon under Ten Chi Jin did not trigger Hollow Nozuchi."],"level":"minor"},{"date":"8/10/25","changes":["[NIN] Fixed a bug where Ninjutsu abilities were not buffed by Kunai's Bane and Dokumori."],"level":"minor"},{"date":"8/8/25","changes":["Added quick links to our GitHub, Bluesky, and (new) developer blog.","Added Bluesky, the dev blog, and the legacy game version site to the links in the \\"about\\" section."],"level":"minor"},{"date":"8/4/25","changes":["Updated for patch 7.3."],"changes_zh":["7.3"],"level":"major"},{"date":"8/3/25","changes":["The active timeline slot is now saved across page reloads.","Click and drag to rearrange skills, both in the visual timeline and timeline editor table.","Click and drag on the background of the visual timeline to select multiple skills.","Use the \\"drag lock\\" switch to the right of the display settings tabs to disable click+drag behavior."],"changes_zh":["","","",""],"level":"major"},{"date":"7/27/25","changes":["Updated FPS adjustment preview tooltip to use GCD time instead of cast times."]},{"date":"7/26/25","changes":["[WHM][AST][SCH] Fixed a bug where Swiftcast's cooldown was set to 40s below level 100."]},{"date":"7/25/25","changes":["[SCH] Initial SCH implementation. Thanks to Caro for help with numbers and some mechanics.","That's every job now in the shell! Stay tuned for more features and improvements to come."],"changes_zh":["Caro",""],"level":"major"},{"date":"7/22/25","changes":["[DNC] Fixed a bug where Fountain and Bladeshower could grant Silken Flow when used without combo."]},{"date":"7/20/25","changes":["[VPR] Added initial support for VPR. Thanks to Verra for help testing.","[BLU] Using an action while Waning Nocturne or Diamondback are active now uses the action as soon as the debuff expires."],"changes_zh":[" Verra","\\"\\"\\"\\""],"level":"major"},{"date":"7/15/25","changes":["Fixed \\"real-time auto pause\\" display.","[GNB] Fixed a bug where Fated Circle broke combos."],"changes_zh":["\\"(\\"",""],"level":"minor"},{"date":"7/14/25","changes":["[BLU] Fixed a bug where Apokalypsis and Phantom Flurry's potencies were incorrect.","[BLU] Fixed a bug where Surpanakha's 30-second cooldown was not applied."],"changes_zh":["\\"\\"\\"\\"","\\"\\"30CD"],"level":"minor"},{"date":"7/10/25","changes":["[MNK] Now begins encounters with Formless Fist active by default.","[DRG][NIN] Fixed a bug where using combo actions out of sequence granted combo potency bonus.","[AST] Fixed Macrocosmos/Microcosmos."],"changes_zh":["\\"\\"","",""],"level":"minor"},{"date":"7/8/25","changes":["[AST] Added initial support for AST.","[WHM] Addd initial support for WHM.","[SAM][NIN][MNK] GCD calculations in the configuration panel now account for jobs' natural speed buffs."],"changes_zh":[" "," ","GCD"],"level":"major"},{"date":"7/5/25","changes":["[MNK] Added initial support for MNK."],"changes_zh":[" "],"level":"major"},{"date":"6/25/25","changes":["Fixed a bug where timestamps would not appear for wait events in the timeline editor.","Fixed a bug where selecting a skill in the visual canvas did not cause the editor table to scroll to its location."],"level":"minor"},{"date":"6/24/25","changes":["[NIN] Added initial support for NIN."],"changes_zh":[" "],"level":"major"},{"date":"6/19/25","changes":["[DRK] Added initial support for DRK."],"changes_zh":[" "],"level":"major"},{"date":"6/18/25","changes":["Fixed a bug where the \\"wait until timestamp\\" events would change times unexpectedly."],"changes_zh":["\\"\\""],"level":"minor"},{"date":"6/17/25","changes":["Fixed timestamps not appearing in the timeline editor when a new skill is added.","Fixed skill selections ending on \\"wait\\" events not rendering correctly in the graphical timeline.","Fixed skill tooltips in the graphical timeline not displaying AoE potency."],"changes_zh":["","\\"\\"","aoe"],"level":"minor"},{"date":"6/16/25","changes":["[BLU] Added support for Blue Mage."],"changes_zh":[""],"level":"minor"},{"date":"6/6/25","changes":["[GNB][SGE] Chinese localization."],"changes_zh":[""],"level":"minor"},{"date":"6/3/25","changes":["Added the ability to save invalid timelines on the visual canvas. Changes in the timeline editor now reflect in the graphical timeline as well.","The \\"jump to timestamp\\" and \\"wait for MP tick\\" buttons will now always look for the specified timestamp/next MP tick, even when actions are shifted in the timeline editor.","Added a \\"Clone timeline slot\\" button.","See our \\"known bugs\\" page on GitHub for limitations: https://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"changes_zh":["","","","GitHubhttps://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"level":"major"},{"date":"5/29/25","changes":["[PLD] Chinese localization adjustments.","[SMN] Chinese localization; fix summon lock bar not showing progress."],"changes_zh":["",""],"level":"minor"},{"date":"5/28/25","changes":["[PLD] Chinese localization first draft."],"changes_zh":[""],"level":"minor"},{"date":"5/27/25","changes":["[BRD][MCH][SMN] Adjusted AoE potencies to reflect patch 7.25."],"changes_zh":["7.25"],"level":"minor"},{"date":"5/26/25","changes":["Fixed a bug where damage log CSV export didn't work (thanks ryxiv)."],"level":"minor"},{"date":"5/23/25","changes":["Adjusted the calculations for the effect of crit/DH party buffs on auto-crit/DH hits, like PCT's Hammer combo.","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"changes_zh":["","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"level":"minor"},{"date":"5/18/25","changes":["Updated the site to automatically use dark mode if your system is set to use it. Manually using the theme selector overrides this.","[GNB] Fixed a typo where \\"Lightning Shot\\" was incorrectly called \\"Lightning Shock.\\"","[GNB] Updated the application delay of Trajectory from 0.22 to 0.66 to match the current version of the game."],"level":"minor"},{"date":"5/17/25","changes":["We've made some big updates to the tools we use to build XIV in the Shell. The site should work the same as before, but if you notice anything broken or slow, please let us know posthaste.","We're planning on adding some large features in the near feature, so we've also made the changelog more prominent in anticipation. Please look forward to it."],"changes_zh":["XIV in the Shell",""],"level":"major"},{"date":"5/10/25","changes":["[PLD] Added initial support for PLD"],"changes_zh":[" "],"level":"major"},{"date":"5/9/25","changes":["[RPR] Fixed a bug where Regress wasn't usable in enshroud","[RPR] Fixed a bug where Grim Swathe was replaced with Lemure's Slice instead of Lemure's Scythe","[RPR] Fixed a bug where Perfectio was usable in enshroud","[RPR] Fixed a bug where Executioner's Gibbet/Gallows weren't replaced with Void/Cross Reaping while in enshroud","[SMN] Fixed a bug where Slipstream's initial hit falloff was displayed incorrectly in the DoT table (thanks omor1)","[SMN] Fixed the potency of Mountain Buster (was incorrectly listed as 170 instead of 160, thanks omor1)"]},{"date":"5/2/25","changes":["Changed Ama's combat sim export to disable auto-attacks for healer/caster jobs."]},{"date":"4/28/25","changes":["Refactored cooldown logic. Changes should not affect end users, but let us know if anything is off.","Added a few missing translations"]},{"date":"4/21/25","changes":["Updated compatibility with Ama's combat sim for newly-supported jobs."]},{"date":"4/17/25","changes":["[RPR] Added a button to gain +10 Soul Gauge to simulate a target dying with Death's Design active","[BRD] Fixed a bug where Iron Jaws checked the dot status at application time instead of confirmation time (thanks Yumiya)","[BRD] Fixed a bug where Empyreal Arrow applied repertoire at application time instead of confirmation time (also thanks Yumiya)"]},{"date":"4/13/25","changes":["Added English-language markers for M8S"]},{"date":"4/7/25","changes":["Added English-language markers for M7S"]},{"date":"4/6/25","changes":["Added English-language markers for M5S + M6S"]},{"date":"3/29/25","changes":["[BLM] Removed \\"outdated\\" status"]},{"date":"3/26/25","changes":["Added user survey link"]},{"date":"3/24/25","changes":["We have updated the site in accordance with the 7.2 patch notes. Goodbye to the Enochian timer o7","[BLM] will remain in \\"outdated\\" status until we have a change to play with the changes in-game.","Since most jobs received only potency changes, your old 7.1 plans should work, but as usual, please let us know if anything seems incorrect."]},{"date":"3/20/25","changes":["[DNC] Fixed an issue where the icons for Finishing Move Ready and Last Dance Ready were swapped, and an issue where Last Dance Ready was not consumed by Last Dance (thank you bluke)"]},{"date":"3/16/25","changes":["Fixed an issue where resource toggles were shown in the timeline editor with their internal keys rather than localized text.","Fixed mistakes in DoT effect override calculations.","In anticipation of patch 7.2, we're working on some changes to make it easier to migrate timelines after site or game changes. The following things have changed:","- Single-clicking an action will now try to use it as soon as the current animation lock/skill cooldown is over (this used to require double-clicking). If the action cannot be used, a wait is automatically added to the timeilne.","- In \\"manual\\" control mode, you no longer need to press space to advance past an action's animation lock (it will now advance automatically when a skill is used).","- Displayed wait durations are now always calculated from the end of the previous animation lock. Any existing timelines will automatically be adjusted--the shown wait times may be different, but the times where actions are used will remain the same.","- Skill sequence presets now include wait durations. This lets you load/save sequences that use late weaves or wait for MP ticks (assuming ticks still line up correctly).","As a consequence of these changes, you actually might now be able to load BLM timelines from 7.05/7.0 that previously were broken as a result of Despair becoming instant. Despair will still be instant and other buff usage will be unchanged, but the time between abilities should be correct.","These changes are very large, and while we've tested to make sure they won't break your existing timelines, there might still be some bugs that slipped through the cracks. As always, please reach out to us if you encounter any problems."]},{"date":"3/1/25","changes":["Make it so that you can only delete the currently active slot, to hopefully reduce the chance of accidentally deleting a slot when switching"]},{"date":"2/26/25","changes":["Updated the GCD formula because the old formula may be off by 0.01s when there is haste buff. Thank you Yuyuka for spotting the error. Note: old timelines (including timelines in browser localStorage) aren't affected; only newly created timelines use the new formula."]},{"date":"2/22/25","changes":["Added Queen Eternal markers by "]},{"date":"2/21/25","changes":["[BRD][GNB][SMN] Removed testing tag"]},{"date":"2/20/25","changes":["[SGE] Initial implementation for SGE","- Some rough edges still exist around Krasis' healing potency modification and Eukrasian shield handling.","- Basic functionality should be reasonably complete.","[RDM] Fixed a bug where Manafication could be used before combat"]},{"date":"2/16/25","changes":["[SAM] Fixed Hagakure only being usable at 3 sen"]},{"date":"2/15/25","changes":["[BLM] Fixed Manafont CD at lvl80 and below: should be 120s"]},{"date":"2/13/25","changes":["Updated English FRU tracks to more accurately reflect downtime between phases. We previously used the \\"death\\" event in a log as the end of a phase, but it turns out this is inaccurate as the last damage application to the boss occurs ~2 seconds before its recorded death.","- P1 to P2 untargetable duration increased by 2 seconds","- P2 to intermission untargetable duration decreased to align with the \\"crystals become targetable\\" mark","- Intermission to P3 downtime increased to match Gaia's attack killing the crystal","In order to not break existing timelines, the preset EN full fight track now treats P1 as dying 2 seconds before the end of the enrage cast. The start times of all phases are unaffected."]},{"date":"2/4/25","changes":["[SAM] Fixed AoE combo actions not ending the combo","[DRG] Added initial support for DRG"]},{"date":"2/2/25","changes":["[BRD][DNC] Fixed bonuses given from certain crit/DH buffs not applying in total potency calculations"]},{"date":"2/1/25","changes":["[WAR][SAM][RPR][MCH][DNC] Implemented localization for some recently added jobs"]},{"date":"1/27/25","changes":["[SMN] Added initial support for SMN"]},{"date":"1/26/25","changes":["[WAR][GNB] Fixed missing icon for tank LB3s"]},{"date":"1/18/25","changes":["[GNB] Added initial support for GNB"]},{"date":"1/17/25","changes":["Added \\"move end of selection to start of selection\\" button to the timeline editor"]},{"date":"1/12/25","changes":["[RPR] Fixed a bug where oGCDs would improperly consume Reaver/Executioner stacks"]},{"date":"1/8/25","changes":["[WAR] Fixed surging tempest text not showing up in potency modifier tooltip","[MCH] Fixed Overheated potency modifier not being applied"]},{"date":"1/5/25","changes":["Fixed a bug where multi-target spells lost their target counts when using the timeline editor"]},{"date":"1/4/25","changes":["Added support for multi-target abilities"]},{"date":"1/3/25","changes":["[WAR][SAM][RPR] Removed testing tag"]},{"date":"1/1/25","changes":["Added combined English FRU tracks"]},{"date":"12/28/24","changes":["[PCT] Fixed warning for Palette Gauge overcap"]},{"date":"12/24/24","changes":["[MCH] Added support for Flamethrower"]},{"date":"12/22/24","changes":["[BRD] Added initial support for BRD","Overhaul DoT tracking to provide better usage statistics","[BLM] Added High Thunder II"]},{"date":"12/20/24","changes":["Fixed stats tables not including party buff potencies for most skills","Removed flank/rear positional resources for non-melee jobs"]},{"date":"12/19/24","changes":["[WAR] Adjusted animation lock of Primal Rend","Fixed Down for the Count timing in FRU P4 (thanks xi12570)"]},{"date":"12/16/24","changes":["Limit breaks for all jobs!","[MCH][DNC] Removed testing tag","Updated \\"About this tool\\" section","More underlying implementation changes","[PCT] Made Hammer combo expire with Hammer Time buff (changed in 7.1)"]},{"date":"12/13/24","changes":["Fixed sometimes unable to use skills in manual mode with double click","[RPR] Added timer for Immortal Sacrifice","[RPR] Removed enhanced reapings whenever shroud is exited","[RPR] Separated cooldowns of Sacrificium and Lemure's Slice","[RPR] Fixed sks scaling","[WAR] Added initial WAR support"]},{"date":"12/12/24","changes":["Updated English FRU tracks and added P4 + P5"]},{"date":"12/8/24","changes":["Updated Chinese FRU tracks to latest (12/8 ver)","Make stats tables only include selected skills when there is selection"]},{"date":"12/7/24","changes":["Updated positional buff icons","Misc cleanups and optimizations (hey devs: rerun npm install)","[BLM] Fixed Retrace button not changing back to LL if LL is disabled when the buff drops"]},{"date":"12/5/24","changes":["Updated Chinese FRU tracks to latest (12/2 version)","Additional Chinese localization changes (preset lines; initial resource overrides section; many resource names)","New skill icon progress bar visuals "]},{"date":"12/4/24","changes":["Added English FRU P3 tracks by Yara","[RDM] Fixed Swiftcast being consumed before Dualcast when both are active"]},{"date":"12/2/24","changes":["Added English FRU P2 tracks by Yara","Fixed a bug where 'Load tracks starting at timestamp' did not accept some time formats","[RDM] Removed the 'testing' label"]},{"date":"12/1/24","changes":["Updated full FRU tracks in Chinese by  & czmm"]},{"date":"11/30/24","changes":["[MCH] Fixed Scattergun's heat generation (thanks Kairos)","[PCT] Fixed Monochrome Tones appearing when synced to level 80 and other internal trait logic (thanks misterperson)"]},{"date":"11/29/24","changes":["[MCH] Fixed bugs with MCH Overheat consumption on AoE abilities (thanks FloatingGhost)"]},{"date":"11/28/24","changes":["Added some Chinese tracks (M1S-M4S, FRU before P2.5)"]},{"date":"11/27/24","changes":["Added the ability to override stacks to 0 for 1-stack resources that start present by default","Added preliminary FRU P1 tracks by Yara"]},{"date":"11/26/24","changes":["Added the ability to load marker tracks starting from a particular timestamp"]},{"date":"11/25/24","changes":["[RPR] Added initial RPR support"]},{"date":"11/24/24","changes":["[MCH] Added initial MCH support"]},{"date":"11/21/24","changes":["[SAM] Fixed a bug where Fuka haste was doubly applied","[SAM] Added GCD under Fuka in playback control"]},{"date":"11/20/24","changes":["[DNC] Added initial DNC support","[SAM] Added initial SAM support (thank you Sterling Sylva for the initial work)","Added support for skill speed in addition to spell speed"]},{"date":"11/17/24","changes":["[RDM] Fix Manafication CD (thanks )","[all casters] Fix Surecast duration: previously 10s, now 6.5s (ty erii)"]},{"date":"11/16/24","changes":["Make DET use main stat formula and default to 440","Add hyperlinks for xivgear and etro"]},{"date":"11/15/24","changes":["(thank you Yuyuka for reporting a bunch of RDM bugs)","[RDM] Added some additional warnings on unintended buff drops, overwrites, and combo breaks","[RDM] Fixed the duration of the Acceleration buff","[RDM] Fixed the MP costs of Veraero II/Verthunder II","[RDM] Fixed Manafication failing to interrupt combos","[RDM] Fixed Manafication being usable out of combat","[RDM] Fixed Enchanted Reprise clearing mana stacks","[RDM] Made Prefulgence and Vice of Thorns into button replacements"]},{"date":"11/14/24","changes":["(thank you Wan Shott for reporting a bunch of RDM bugs)","[RDM] Fixed bugs where Verfire and Grand Impact didn't grant correct mana","[RDM] Fixed a bug where it was possible to use un-enchanted Moulinet under certain incorrect conditions","mark newly-implemented jobs as in testing and display a warning message when using those jobs"]},{"date":"11/13/24","changes":["Fixed a bug where party buff potencies were not displayed","[PCT] Fixed a bug where using two hammer combos within 30s of each other caused the combo to break","[RDM] Fixed a bug where level synced RDM still received Grand Impact Ready from Acceleration","[RDM] Fixed a bug where Acceleration did not always grant a Verstone/Verfire proc","[RDM] Fixed a bug where certain role buffs were not being displayed on the hotbar","[RDM] Fixed a bug where buffs were overlapping the hotbar","[RDM] Fixed a bug where Contre Sixte's cooldown was improperly affected by traits","Removed debug and implementation notes sections (see repository wiki for implementation notes)"]},{"date":"11/12/24","changes":["Initial XIV in the Shell! Supporting patch 7.1 BLM and PCT, plus preliminary RDM"]}]`);function tT(){return Bi[0].date}function E0(e){const t=Lt();return l.jsxs("div",{className:"changelogGroup",children:[l.jsx("div",{children:e.date}),l.jsx("div",{children:g({en:l.jsx(l.Fragment,{children:e.changes.map((n,a)=>l.jsx("div",{className:"changelogLine",style:{color:n.substring(1,5)==="BETA"?t.warning:t.text},children:n},a))}),zh:e.changes_zh!==void 0?l.jsx(l.Fragment,{children:e.changes_zh.map((n,a)=>l.jsx("div",{className:"changelogLine",style:{color:n.substring(1,5)==="BETA"?t.warning:t.text},children:n},a))}):void 0})})]})}const K3=`
.changelogGroup {
	margin-top: 1em;
	margin-bottom: 1em;
}

.changelogLine {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
	margin-left: 0.5em;
}
`;function V3(){let e,t,n={};const a=N.useRef(5),[s,c]=N.useState(!1),[d,f]=N.useState(!1),h=N.useContext(gn)==="Light",m=Lt();N.useEffect(()=>{let I=gt("changelogLastRead"),C=gt("changelogLastReadChangeCount");!U1&&(I===null||C===null)&&(I="5/10/25",C="1");const _=I===null||C===null||I===Bi[0].date&&C===Bi[0].changes.length.toString();if(c(_),I!==null&&C!==null){if(!_){let O=0,y=!1;for(;O<Bi.length-1;O++){if(I===Bi[O].date){C!==Bi[O].changes.length.toString()&&O++;break}y=y||Bi[O].level==="major"}f(y),a.current=O}}else pt("changelogLastRead",Bi[0].date),pt("changelogLastReadChangeCount",Bi[0].changes.length.toString())},[]);const R=I=>{I||(a.current=5,s||(pt("changelogLastRead",Bi[0].date),pt("changelogLastReadChangeCount",Bi[0].changes.length.toString())),c(!0))};if(s)e=g({en:"Changelog",zh:"",ja:""}),t="";else{const I=Lt();e=g({en:"Changelog (new updates"+(d?"!!":"")+")",zh:""+(d?"":"")+""}),t="!",d?n={color:I.warning,fontWeight:"bold"}:n={fontWeight:"bold"}}const T=l.jsx("div",{className:"clickable",children:l.jsxs("span",{style:n,children:[l.jsxs("span",{children:[t," "]}),l.jsx("span",{className:"clickableLinkLike",children:e})]})}),S=l.jsx(g0,{className:"dialogExit",style:{color:m.bgHighContrast}});return l.jsxs(l.Fragment,{children:[l.jsx("style",{children:K3}),l.jsxs(Ev,{onOpenChange:R,children:[l.jsx(Av,{render:T,nativeButton:!1}),l.jsxs(uv,{children:[l.jsx(iv,{className:"Backdrop",style:{opacity:h?.2:.7}}),l.jsxs(cv,{className:"Popup visibleScrollbar",id:"changelogPopup",style:{backgroundColor:m.background,border:"1px solid "+m.bgMediumContrast,color:m.text},children:[l.jsx(mv,{render:l.jsx("h3",{children:e})}),l.jsx(ov,{render:S,nativeButton:!1}),l.jsx(sv,{className:"Description",render:l.jsx(W3,{hiddenStartIndex:a.current,newChanges:!s})})]})]})]})]})}function W3(e){const t=[],n=[];for(let m=0;m<e.hiddenStartIndex;m++)t.push(E0(Bi[m]));for(let m=e.hiddenStartIndex;m<Bi.length;m++)n.push(E0(Bi[m]));const a=g({en:e.newChanges?"New Changes":"Recent Changes",zh:e.newChanges?"":""}),s=l.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[l.jsx("span",{style:{marginTop:10,marginBottom:10},children:l.jsx("b",{children:a})}),l.jsx("div",{style:{margin:10,paddingLeft:6},children:t.map((m,R)=>l.jsx("div",{children:m},R))})]}),[c,d]=N.useState(!1),f=g({en:"Older Changes",zh:""}),h=l.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[l.jsx(Ys,{content:l.jsxs("span",{children:[l.jsx("span",{children:c?"- ":"+ "}),l.jsx("b",{children:f})]}),onClickFn:()=>d(!c)}),l.jsx("div",{style:{position:"relative",display:c?"block":"none"},children:l.jsxs("div",{style:{margin:10,paddingLeft:6,marginBottom:20},children:[l.jsx("div",{children:n.map((m,R)=>l.jsx("div",{children:m},R))}),l.jsxs("div",{children:["For older changelog entries before the BLM/PCT in the Shell rejoining, see",l.jsx("b",{children:"About this site/Changelog"})," on the old sites:",l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://miyehn.me/ffxiv-blm-rotation/",children:"BLM in the Shell"}),",",l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://picto.zqsz.me/",children:"PCT in the Shell"})]})]})})]});return l.jsxs("div",{children:[s,h]})}const nT=Vu?"https://beta.xivintheshell.com":"https://xivintheshell.com",ga="https://github.com/xivintheshell/xivintheshell",Ws="https://bsky.app/profile/xivintheshell.com",sd="https://blog.xivintheshell.com",Xs="https://discord.com/channels/277897135515762698/1307922201726685236",FT="913451994",iT="https://discord.gg/thebalanceffxiv",X3=()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"paragraph",children:g({en:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"This tool was initially Black Mage in the Shell, "}),l.jsxs("span",{children:["ideated by ",l.jsx("b",{children:"Eshiya (Galahad)"})," and developed by ",l.jsx("b",{children:"miyehn"})," specifically for BLM during Endwalker since around February 2022."," "]}),l.jsx("span",{children:"After Dawntrail's release, it was expanded to support other jobs and is now maintained by a small team of developers:"})]}),zh:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"miyehn202226.x"}),l.jsx("span",{children:"7.0"})]})})}),g({en:l.jsxs("ul",{children:[l.jsxs("li",{children:["Tool design and core systems: ",l.jsx("b",{children:"shanzhe"}),", ",l.jsx("b",{children:"miyehn"}),", ",l.jsx("b",{children:"Turtle"}),","," ",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["BLM: ",l.jsx("b",{children:"shanzhe"}),", ",l.jsx("b",{children:"Akairyu"}),", ",l.jsx("b",{children:"Turtle"}),", ",l.jsx("b",{children:"miyehn"})]}),l.jsxs("li",{children:["PCT, RDM, SMN, DRK, NIN, MNK, WHM, AST, SCH: ",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["SAM: ",l.jsx("b",{children:"Sterling"}),", ",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["DNC, MCH, BRD, SGE: ",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["RPR: ",l.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),l.jsxs("li",{children:["WAR: ",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["GNB, DRG, PLD: ",l.jsx("b",{children:"Sterling"})]}),l.jsxs("li",{children:["BLU: ",l.jsx("b",{children:""})]}),l.jsxs("li",{children:["VPR: ",l.jsx("b",{children:"shanzhe"}),", ",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["Framework for adding new jobs: ",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["Chinese localization: ",l.jsx("b",{children:"miyehn"}),", ",l.jsx("b",{children:"Eshiya"}),", ",l.jsx("b",{children:"Yuyuka"}),", ",l.jsx("b",{children:"shanzhe"}),","," ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""})]})]}),zh:l.jsxs("ul",{children:[l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:"miyehn"}),"",l.jsx("b",{children:"Turtle"}),"",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:"Akairyu"}),"",l.jsx("b",{children:"Turtle"}),"",l.jsx("b",{children:"miyehn"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Sterling"}),"",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Sterling"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:""})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"miyehn"}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""})]})]})}),l.jsx("div",{className:"paragraph",children:g({en:"And many thanks to Yara, Spider, Santa, players in , kiyozero, czmm, and other players and groups who contributed feature suggestions, timeline markers, bug reports, etc.",zh:"YaraSpiderSantakiyozeroczmmbug"})}),g({en:l.jsxs("div",{className:"paragraph",children:["If you have questions or would like to provide feedback, you can message in"," ",l.jsx("a",{target:"_blank",href:Xs,rel:"noreferrer",children:"this channel in The Balance"})," ",'(requires the "Misc. Support" role), or join QQ group ',FT,' where you can use Chinese. In case of sending a bug report, attaching the fight record (download "fight.txt" from the bottom or name it anything else) would be very helpful.']}),zh:l.jsxs("div",{className:"paragraph",children:[l.jsxs("span",{children:["bugQQ:"," ",FT," Discord The Balance ",l.jsx("a",{target:"_blank",href:Xs,rel:"noreferrer",children:""}),' "Misc. Support" role ']}),l.jsx("span",{children:"bugbugfight.txt"})]}),ja:l.jsx("div",{className:"paragraph",children:"[outdated (ja)] Discordmiyehnellyn.waterford@gmail.com fight.txt"})})]});function q3(e){const t={marginBottom:5},n=Lt(),a=e.job,s=d=>l.jsx(Fi,{text:d}),c=s(navigator.platform.includes("Mac")?"cmd":"ctrl");return l.jsxs("div",{children:[l.jsx(V3,{}),l.jsx(kl,{defaultShow:!0,title:"instructions",titleNode:l.jsxs("span",{children:[g({en:"Instructions ",zh:" ",ja:" "}),l.jsx(Xe,{topic:"expandable",content:g({en:"click me to expand or collapse",zh:"/",ja:""})})]}),content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:l.jsx("b",{children:g({en:"General Usage",zh:"",ja:""})})}),g({en:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["Set your stats in ",l.jsx("b",{children:"Config"})," on the right, then"," ",s("apply and reset"),"."]}),l.jsx("li",{style:t,children:"Click on a skill to use it at the selected point in the timeline. The simulation will always jump to when the last animation lock ends and the skill's cooldown becomes available."}),l.jsxs("li",{style:t,children:["Press ",s("u")," to delete the last added action (effective when not running in real-time). Use ",c,"+",s("z"),"and ",c,"+",s("y")," to undo/redo."]}),l.jsx("li",{style:t,children:"Click on a buff applied to self to remove it. Clicking on certain ground-targeted buffs like BLM's Ley Lines, DRK's Salt and Darkness, and SCH's Sacred Soil temporarily disables their effects. Clicking again re-enables them."}),l.jsx("li",{style:t,children:'Click and drag in the visual timeline or use the "Timeline Editor" tab at the bottom of the page to re-arrange skills.'})]}),zh:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["",l.jsx("b",{children:""}),""," ",s("")," "]}),l.jsx("li",{style:t,children:"CD"}),l.jsxs("li",{style:t,children:[" ",s("u")," "," ",c,"+",s("z"),"  ",c,"+",s("y")," "]}),l.jsx("li",{style:t,children:"buffbuff"}),l.jsx("li",{style:t,children:""})]}),ja:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["",l.jsx("b",{children:""}),"",l.jsx(Fi,{text:""}),""]}),l.jsx("li",{style:t,children:""}),l.jsxs("li",{style:t,children:[l.jsx(Fi,{text:"u"}),""]}),l.jsx("li",{style:t,children:""})]})}),l.jsx("div",{className:"paragraph",children:l.jsx("b",{children:g({en:"Timeline",zh:"",ja:""})})}),g({en:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["Holding ",s("shift")," lets you scroll horizontally."]}),l.jsxs("li",{style:t,children:["Click to select/unselect a single skill on the timeline."," ",s("shift"),"+click or click/drag to select a sequence of skills."]}),l.jsxs("li",{style:t,children:["Use ",s("backspace")," or ",s("delete")," to delete the selected skill(s)."]}),l.jsxs("li",{style:t,children:["Use ",c,"+",s("c")," and ",c,"+",s("v")," to copy/paste skills."]}),l.jsx("li",{style:t,children:"Click on the timeline's ruler-like header to view historical game states. Click on somewhere else on the timeline to return to the most recent game state."})]}),zh:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[" ",s("shift")," "]}),l.jsxs("li",{style:t,children:[" shift  ",s("shift")," ",""]}),l.jsxs("li",{style:t,children:[" ",s("backspace"),"  ",s("delete")," "]}),l.jsxs("li",{style:t,children:[" ",c,"+",s("c"),"  ",c,"+",s("v")," ",""]}),l.jsx("li",{style:t,children:""})]}),ja:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx(Fi,{text:"shift"}),""]}),l.jsxs("li",{style:t,children:["",l.jsx(Fi,{text:"shift"}),""]}),l.jsxs("li",{style:t,children:[l.jsx(Fi,{text:"backspace"}),"",l.jsx(Fi,{text:"delete"}),""]}),l.jsxs("li",{style:t,children:["",l.jsx("b",{style:{color:"darkorange"},children:""})," "]})]})}),g({en:l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:l.jsx("u",{children:"[these]"})})," ","are file download links. Click to download, or right click to choose save location."]}),zh:l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:l.jsx("u",{children:"[]"})})," ",""]}),ja:l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:l.jsx("u",{children:"[]"})}),""]})}),g({en:l.jsxs("div",{className:"paragraph",children:["You can save/load fight records at the bottom, under the"," ",l.jsx("b",{children:"Import/Export"})," tab. Most edits are also automatically saved in your browser cache, so it's generally okay to refresh the page and not worry about losing progress."]}),zh:l.jsxs("div",{className:"paragraph",children:[" ",l.jsx("b",{children:"/"})," ","/"]})}),g({en:l.jsxs("div",{className:"paragraph",children:["Hover over ",l.jsx(Xe,{topic:"sampleTips",content:"sample tip"})," ","everywhere to see more tips."]}),zh:l.jsxs("div",{className:"paragraph",children:[" ",l.jsx(Xe,{topic:"sampleTips",content:""})," ",""]}),ja:l.jsxs("div",{className:"paragraph",children:[l.jsx(Xe,{topic:"sampleTips",content:""}),""]})}),g({en:l.jsxs("div",{className:"paragraph",children:["For more detailed instructions, please refer to our"," ",l.jsx("a",{href:"/manual",children:"user manual"}),"."]}),zh:l.jsxs("div",{className:"paragraph",children:["",l.jsx("a",{href:"/manual",children:""}),""]})}),l.jsx("div",{className:"paragraph",style:{marginTop:16},children:l.jsx(kl,{title:"Troubleshoot",titleNode:g({en:l.jsx("b",{children:"troubleshoot"}),zh:l.jsx("b",{children:""}),ja:l.jsx("b",{children:""})}),content:l.jsxs(l.Fragment,{children:[g({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"I can't guarantee that my updates are always backward compatible. If your fight record files aren't loading properly but you don't understand why, contact me and I'll try my best to help."}),l.jsxs("div",{className:"paragraph",children:["If the browser cache is somehow messed up (likely due to invalid game states), this is how to reset it:",l.jsx("br",{}),"Enter this tool from"," ",l.jsx("b",{children:nT+"?{command}"})," replacing"," ",l.jsx("b",{children:"{command}"})," with one of the following:",l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetResourceOverrides"}),": delete all resource overrides and all actions on the current timeline."]}),l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetAll"}),": delete all browser-cached settings."]})]})]})]}),zh:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:""}),l.jsxs("div",{className:"paragraph",children:["",l.jsx("br",{}),"",l.jsx("b",{children:nT+"?{command}"}),"",l.jsx("b",{children:"{command}"}),"",l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetResourceOverrides"}),": "]}),l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetAll"}),": "]})]})]})]}),ja:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:""}),l.jsxs("div",{className:"paragraph",children:["",l.jsx("br",{}),l.jsx("b",{children:nT+"?{command}"})," ",l.jsx("b",{children:"{command}"})," ","",l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetResourceOverrides"}),": "]}),l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetAll"}),": "]})]})]})]})}),l.jsxs("div",{children:[g({en:"Or just: ",zh:""}),l.jsx("button",{className:"dangerButton",onClick:()=>{N0(),window.location.reload()},children:g({en:"[DANGER!] clear browser cache and reload",zh:"[] ",ja:"[] "})})]})]})})})]})}),l.jsx(kl,{defaultShow:!1,title:"About this tool",titleNode:g({en:"About this tool",zh:"",ja:""}),content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:g({en:"This is a FFXIV simulator & rotation planner.",zh:"FF14/",ja:"FF14"})}),X3(),l.jsx("div",{className:"paragraph",children:g({en:"Some links:",zh:"",ja:""})}),g({en:l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx("a",{href:ga,children:"Github repository"})}),l.jsxs("li",{children:[l.jsx("a",{href:Ws,children:"Bluesky account"})," and our"," ",l.jsx("a",{href:sd,children:"developer blog"})]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:"XIV in the Shell (Legacy)"}),": a snapshot of this tool at the end of the previous major game patch (currently 7.25)."]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"Black Mage in the Shell (Endwalker)"}),": a snapshot of this tool at the end of Endwalker. It also contains some notable fight plans from Endwalker, as memoir."]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": a variation for Save the Queens areas, created by"," ",l.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),l.jsx("li",{children:l.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:"Official FFXIV job guides"})}),l.jsxs("li",{children:["The Balance's community"," ",l.jsx("a",{href:"https://www.thebalanceffxiv.com/",children:"job guides"})," and"," ",l.jsx("a",{href:iT,children:"Discord"})]})]}),zh:l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx("a",{href:ga,children:"Github"})}),l.jsxs("li",{children:[l.jsx("a",{href:Ws,children:""}),"",l.jsx("a",{href:sd,children:""}),""]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:""}),"FF147.25"]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"6.x"}),"6.x"]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": /"," ",l.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),l.jsx("li",{children:l.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:""})}),l.jsxs("li",{children:["The Balance",l.jsxs("a",{href:"https://www.thebalanceffxiv.com/",children:[" ",""]})," ",l.jsx("a",{href:iT,children:"Discord"})]})]}),ja:l.jsx("ul",{children:l.jsxs(l.Fragment,{children:[l.jsx("li",{children:l.jsx("a",{href:ga,children:"Github repository"})}),l.jsxs("li",{children:[l.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": ",l.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),l.jsx("li",{children:l.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/blackmage/",children:"Official FFXIV black mage job guide"})}),l.jsxs("li",{children:[l.jsxs("a",{target:"_blank",href:iT,rel:"noreferrer",children:[a," resources channel on The Balance"]})," ","Discord"," "]})]})})})]})})]})}function Z3(){const e=N.useContext(gn),t=wl(e,"text");return l.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[l.jsx("style",{children:`
		.linkOption {
			display: inline-block;
			cursor: pointer;
			vertical-align: top;
			margin-top: 1px;
		}
		.linkOption:hover {
			border-bottom: 1px solid;
		}
		`}),l.jsxs("div",{style:{display:"inline-block"},children:[l.jsx(_s.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:Ws,title:g({en:"Bluesky",zh:""}),children:l.jsx(b1,{})})}),"|",l.jsx(_s.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:ga,title:g({en:"GitHub",zh:"GitHub"}),children:l.jsx(O1,{})})}),"|",l.jsx(_s.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:sd,title:g({en:"Blog",zh:""}),children:l.jsx(D1,{})})}),"|",l.jsx(_s.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:"/manual",title:g({en:"User Manual",zh:""}),children:l.jsx(y1,{})})})]})]})}var $3={};let sE=e=>{},rE=e=>{},cE=e=>{};function Q3(e){if(e==="resetAll")N0();else if(e==="resetResourceOverrides"){const t=gt("gameRecord");for(let n=0;n<Ga;n++){let a=gt("gameRecord"+n.toString());if(n===0&&a===null&&t!==null&&(a=t),a!==null){const s=JSON.parse(a);console.log(s),s.config&&(s.config.initialResourceOverrides=[]),s.actions=[],pt("gameRecord"+n.toString(),JSON.stringify(s))}}}else e==="code"?console.log("FFLogs authorization triggered."):e==="resetFFLogsAuth"?(console.log("Reset FFLogs PKCE authorization state and session token."),window.sessionStorage.removeItem("fflogsAuthToken"),bf()):e!==void 0&&console.log("unrecognized command '"+e+"'")}function J3(e){return l.jsx("div",{style:{flex:3,height:e.height,marginLeft:6,position:"relative",verticalAlign:"top"},children:l.jsx(SO,{uniqueName:"mainConfig",content:[{titleNode:g({en:"Config",zh:""}),contentNode:l.jsx(ej,{})},{titleNode:g({en:"Control",zh:""}),contentNode:l.jsx(ZF,{})}],collapsible:!1,scrollable:!0,height:e.height,defaultSelectedIndex:0})})}function m0(e){const t=e.color??Lt().accent;return l.jsx("div",{style:{display:e.hidden===!0?"none":"block",color:t,border:"1px solid "+t,borderRadius:4,padding:"10px 10px 0 10px"},children:e.children})}const A0=Vu?"[BETA] ":"";class ez extends di.Component{constructor(n){super(n);J(this,"controlRegionRef");J(this,"gameplayKeyCapture");J(this,"setColorTheme");J(this,"state");Q3(n.command),this.state={job:p.getActiveJob(),hasFocus:!1,historical:!1,realTime:!1,controlRegionHeight:0,colorTheme:fE()},this.controlRegionRef=di.createRef(),this.gameplayKeyCapture=a=>{p.handleKeyboardEvent(a)},sE=a=>{this.setState({job:a});const s=document.querySelector("link[rel~='icon']");s&&(Vu?s.href="/favicons/beta.ico":a in mt?s.href="/favicons/"+a.toString().toLocaleLowerCase()+".ico":s.href=$3.PUBLIC_URL+"/favicon.ico");const c=document.getElementById("pageTitle");c&&(c.text=`${A0}XIV in the Shell (${a})`)},rE=a=>{this.setState({realTime:a})},cE=a=>{this.setState({historical:a})},this.setColorTheme=a=>{a!==this.state.colorTheme&&(p.updateAllDisplay(),this.setState({colorTheme:a}),pt("colorTheme",a))}}componentDidMount(){p.tryAutoLoad(),p.updateAllDisplay(),this.controlRegionRef.current&&new ResizeObserver(()=>{var a;const n=((a=this.controlRegionRef.current)==null?void 0:a.clientHeight)??0;this.setState({controlRegionHeight:n})}).observe(this.controlRegionRef.current)}componentWillUnmount(){sE=n=>{},rE=n=>{},cE=n=>{}}render(){const n=hi(this.state.colorTheme),a={height:"100%",accentColor:n.accent,fontFamily:uo,fontSize:13,color:n.text,backgroundColor:n.background,display:"flex",flexDirection:"column"};let s;this.state.historical?s="2px solid "+n.historical:this.state.hasFocus?this.state.realTime?s="2px solid "+n.realTime:s="2px solid "+n.accent:s="1px solid "+n.bgMediumContrast;const c={marginBottom:"5px"},d=l.jsx("div",{style:{flex:7,display:"inline-block",position:"relative"},children:l.jsxs("div",{onFocus:()=>{this.setState({hasFocus:!0})},onBlur:()=>{this.setState({hasFocus:!1})},style:{display:"inline-block",padding:8,outline:s},tabIndex:-1,ref:this.controlRegionRef,children:[l.jsx(wO,{}),l.jsx(Wb,{})]})}),f=window.innerWidth>1024;return l.jsxs("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,outline:"none"},tabIndex:-1,onKeyDown:this.gameplayKeyCapture,children:[l.jsx("style",{children:`
				@supports selector(::-webkit-scrollbar) {
					.visibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: ${n.bgLowContrast};
						height: 8px;
						width: 5px;
					}
					.visibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${n.bgHighContrast};
					}
					.invisibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: clear;
						height: 8px;
						width: 5px;
					}
					.invisibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${n.bgHighContrast};
					}
				}
				@supports not selector(::-webkit-scrollbar) {
					.visibleScrollbar {
						scrollbar-color: ${n.bgHighContrast} ${n.bgLowContrast};
						scrollbar-width: auto;
					}
					.invisibleScrollbar {
						scrollbar-width: none;
					}
				}
				a {
					color: ${n.accent};
				}
				b, h1, h2, h3, h4 {
					color: ${n.emphasis};
				}
				p {
					margin-block-start: 10px;
					margin-block-end: 10px;
				}
				p:first-child {
					margin-block-start: 0px;
				}
				::selection {
					background: rgba(147, 112, 219, 0.4);
				}
				option, select {
					color: ${n.text};
					background-color: ${n.background};
				}
				button, input[type="submit"], ::-webkit-file-upload-button {
					color: ${n.text};
					background-color: ${n.bgLowContrast};
					border: 1px solid ${n.bgHighContrast};
				}
				input[type="radio"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${n.bgHighContrast};
					border-radius: 50%;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="radio"]:checked {
					background-color: ${n.accent};
				}
				input[type="checkbox"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${n.bgHighContrast};
					border-radius: 1px;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="checkbox"]:checked:after {
					content: '\\2714';
					color: ${n.accent};
					position: absolute;
					font-size: 22px;
					top: -6px;
					left: -2px;
				}
				input[type="range"] {
					appearance: none;
					background-color: transparent;
					border: 1px solid ${n.bgHighContrast};
					vertical-align: middle;
					height: 0.9em;
					border-radius: 0.45em;
					overflow: hidden;
					padding: 0.05em;
				}
				input[type="range"]::-webkit-slider-thumb {
					appearance: none;
					background-color: ${n.accent};
					width: 0.8em;
					height: 0.8em;
					border-radius: 0.4em;
				}
				.help-tooltip {
					color: ${n.text};
					background-color: ${n.tipBackground};
					opacity: 0.98;
					max-width: 300px;
					outline: 1px solid ${n.bgHighContrast};
					transition: none;
					font-size: 100%;
					z-index: 10;
				}
				button:disabled {
					background-color: ${n.background};
				}
			`}),l.jsx(gn.Provider,{value:this.state.colorTheme,children:l.jsxs("div",{style:a,id:"globalHelpTooltipAnchor",children:[l.jsx("div",{style:{flex:1,overflowY:"scroll",overscrollBehaviorY:"contain"},children:l.jsxs("div",{style:{position:"relative",maxWidth:1060,margin:"0 auto",marginTop:40,display:"grid"},children:[l.jsxs("div",{style:{position:"absolute",display:"flex",flexWrap:"wrap",justifySelf:"right",justifyContent:"space-between",alignItems:"flex-start",gap:"1.4em"},children:[f&&l.jsx(Z3,{}),l.jsx(Bk,{}),l.jsx(kk,{setColorTheme:this.setColorTheme})]}),l.jsxs("div",{children:[l.jsxs("h3",{style:{marginTop:0,marginBottom:6},children:[A0,"XIV in the Shell"]}),g({en:l.jsxs("div",{style:{marginBottom:16},children:["Last updated: ",tT()," (see ",l.jsx("b",{children:"Changelog"}),")"]}),zh:l.jsxs("div",{style:{marginBottom:16},children:["",tT(),"",l.jsx("b",{children:""}),""]}),ja:l.jsxs("div",{style:{marginBottom:16},children:["",Uk(tT()),"",l.jsx("b",{children:""}),"",l.jsx("a",{href:"https://coda.io/d/_d-N3WFoMZ8e/Black-Mage-in-the-Shell_suRLF",children:""}),""]})}),k1()?l.jsx("div",{style:{margin:"10px 0",padding:"10px",border:"1px solid "+n.warning,color:n.warning,borderRadius:4},children:g({en:l.jsxs("div",{children:["NOTE: Your browser cache contains data from BLM in the Shell before it's updated for Dawntrail. Visit the Endwalker archive at"," ",l.jsx("a",{style:{color:n.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"})," ","to access and automatically re-save it. Once you do that, this notice will also go away."]}),zh:l.jsxs("div",{children:["7.06.0",l.jsx("a",{style:{color:n.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"}),""]})})}):void 0,Vu&&l.jsx(m0,{color:n.warning,children:g({en:l.jsxs("div",{style:{marginBottom:"10px"},children:[l.jsx("span",{children:l.jsx("b",{style:{color:n.warning},children:"You're currently using the BETA version of XIV in the Shell."})}),l.jsxs("ul",{children:[l.jsx("li",{style:c,children:"Things may break in unexpected ways at any time. Use at your own peril, and make sure to export in-progress files frequently."}),l.jsx("li",{style:c,children:"Application data is not shared with the main site. Anything you do here stays here. Files created on the BETA site may not work on the main site, but files made on the main site should be importable here (if they are not, please report this as a bug)."}),l.jsx("li",{style:c,children:"If the page becomes un-loadable, please contact us and tell us what your last actions on the site were, and we can help you debug what went wrong. You can also try resetting your browser's localStorage data for beta.xivintheshell.com."}),l.jsxs("li",{style:c,children:["To report an issue, you can contact us on Discord in The Balance (",l.jsx("a",{href:Xs,children:"#xiv_in_the_shell_support"}),"), or file an issue on"," ",l.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"our GitHub"}),"."]})]})]}),zh:l.jsxs("div",{style:{marginBottom:"10px"},children:[l.jsx("span",{children:l.jsx("b",{style:{color:n.warning},children:"XIV in the ShellBETA"})}),l.jsxs("ul",{children:[l.jsx("li",{style:c,children:""}),l.jsx("li",{style:c,children:"BETABETAbug"}),l.jsx("li",{style:c,children:"beta.xivintheshell.comlocalStorage"}),l.jsxs("li",{style:c,children:["miyehnQQ870340705",l.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"GitHub"}),"issue"]})]})]})})}),Vu&&l.jsx("div",{style:{margin:"10px"}}),l.jsx(q3,{job:this.state.job}),l.jsx(kl,{defaultShow:!0,title:"7-2-user-survey",titleNode:l.jsx("span",{children:g({en:"7.2 User Survey",zh:"7.2"})}),content:l.jsx(m0,{children:g({en:l.jsx(l.Fragment,{children:l.jsxs("p",{children:["Help us improve XIV in the Shell! Please take our user survey:"," ",l.jsx("b",{children:l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://forms.gle/eKVygxxZVd894323A",children:"https://forms.gle/eKVygxxZVd894323A"})})]})}),zh:l.jsx(l.Fragment,{children:l.jsxs("p",{children:[""," ",l.jsx("b",{children:l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://www.wjx.cn/vm/mQ1gV2b.aspx",children:"https://www.wjx.cn/vm/mQ1gV2b.aspx"})})]})})})})})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"row",position:"relative",marginBottom:"20px"},children:[d,l.jsx(J3,{height:this.state.controlRegionHeight})]}),l.jsx(FP,{}),l.jsx("hr",{style:{margin:"30px 0px",border:"none",borderTop:"1px solid "+n.bgHighContrast}}),l.jsx(Fy,{})]})}),l.jsx(Y3,{})]})})]})}}const tz=N.forwardRef(function(t,n){const{className:a,render:s,orientation:c="horizontal",...d}=t,f=N.useMemo(()=>({orientation:c}),[c]),h=N.useCallback((R={})=>mo({"aria-orientation":c},R),[c]),{renderElement:m}=ir({propGetter:h,render:s??"div",className:a,state:f,extraProps:{role:"separator",...d},ref:n});return m()}),nz="https://support.na.square-enix.com/rule.php?id=5382&la=1&tag=authc",QE="https://www.thebalanceffxiv.com/",JE="https://www.icy-veins.com/ffxiv/",Cv="https://www.fflogs.com/",iz="https://blog.xivintheshell.com/posts/what-is-xiv-in-the-shell/",bv="https://etro.gg/",RI="https://xivgear.app/",wc="https://github.com/Amarantine-xiv/Amas-FF14-Combat-Sim_source",Ov="https://xivanalysis.com/",Dv="https://xivraider.com/",az="https://na.finalfantasyxiv.com/jobguide/battle/",oz="https://ffxiv.consolegameswiki.com/wiki/FF14_Wiki",yv="http://xivapi.com",vv="https://arcanedisgea.github.io/xiv-id/",Mv="https://www.akhmorning.com/allagan-studies/",Lv="https://discord.com/channels/277897135515762698/1199477934075953242",xv="https://docs.google.com/document/d/1c1a16tUifUN09KoCgNx1EyOsk1HLYGm-b-q7lz6W8C4/edit",Hv="https://docs.google.com/document/d/1c1a16tUifUN09KoCgNx1EyOsk1HLYGm-b-q7lz6W8C4/edit",kv="https://docs.google.com/document/d/13ggP7PoOs-ic6ve_Huo4A2-3Mx7ozeRPXzC7N_edgHU/edit#heading=h.d8b4r5is0qbm",Uv="https://www.bilibili.com/read/cv29822181/?jump_opus=1",wv="https://docs.google.com/document/d/1zxUd7vFfs24cGteOeCnEsoCzfDxIvKNROIvDUqG-6no/edit",em="https://github.com/Tischel/BLMInTheShell",Pv="https://github.com/xivintheshell/xivintheshell/blob/main/scripts/csv2track.py",Gv="https://github.com/xivintheshell/xivintheshell/wiki/Creating-timeline-tracks",Bv="https://colab.research.google.com/drive/1XiVqn-W5teCaXGMtLoq3Zqx5zrk50Fh3?usp=sharing",Fv="https://github.com/leifengsang/XivInTheShellMarkerGen",lz="https://en.wikipedia.org/wiki/Random_seed",sz="https://www.bilibili.com/video/BV1SGvZBAEsm/",rz="https://actff1.web.sdo.com/project/20190917jobguid/index.html#/index",cz="https://ff14.huijiwiki.com/wiki/%E9%A6%96%E9%A1%B5",uz="https://bbs.nga.cn/read.php?tid=19736925",dz="https://asvel.github.io/ffxiv-gearing/",hz=fE(),jT=()=>l.jsx(tz,{orientation:"vertical",style:{width:"1px",backgroundColor:hi(hz).text}}),jv={marginLeft:"2em",marginTop:"-0.2em",marginBottom:"1em",display:"flex",gap:"0.5rem"};function fz(){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:jv,children:[l.jsx("div",{children:l.jsx("i",{children:"by Shanzhe Qi @ Seraph"})}),l.jsx(jT,{}),l.jsx("div",{children:"last updated 19 January 2026"})]}),l.jsxs("p",{className:"no-indent",children:["Welcome to ",l.jsx("i",{children:"XIV in the Shell"}),", a rotation planner tool for ",l.jsx("i",{children:"Final Fantasy XIV"}),"! This page walks you through how to make the most of our timeline creation and manipulation features to improve your gameplay. Use the navigation bar on the right to find help for a specific feature."]}),l.jsxs("p",{children:["This manual only covers how to use this tool for planning, not how to choose what abilities to use in your rotation. For resources for learning and optimizing your job, please refer to other sites like ",l.jsx("a",{href:QE,children:"The Balance"})," and"," ",l.jsx("a",{href:JE,children:"Icy Veins"}),". Further information about jobs and FFXIV's combat system can be found in the ",l.jsx("a",{href:"#additional-resources",children:"Additional Resources"})," ","section of this page."]}),l.jsxs("p",{children:["For feedback or questions about this page, please reach out to us on"," ",l.jsx("a",{href:ga,children:"GitHub"})," on Discord through our"," ",l.jsx("a",{href:Xs,children:"support channel in The Balance"}),", or on"," ",l.jsx("a",{href:Ws,children:"Bluesky"}),"."]}),l.jsxs("p",{children:["This manual page can always be found at ",l.jsx("a",{href:"/manual",children:"xivintheshell.com/manual"})," ","or ",l.jsx("a",{href:"/manual_en",children:"xivintheshell.com/manual_en"}),"."]}),l.jsxs("p",{children:["FINAL FANTASY is a registered trademark of Square Enix Holdings Co., Ltd. Game ability and status images are  SQUARE ENIX, and used for non-commercial purposes in compliance with the ",l.jsx("a",{href:nz,children:"Final Fantasy XIV Materials Usage License"}),"."]})]})}function Ez(){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:jv,children:[l.jsx("i",{children:"Shanzhe Qi @ Seraph"})," ",l.jsx(jT,{})," ",l.jsx("i",{children:"ai"})," ",l.jsx(jT,{})," ","2026119"]}),l.jsxs("p",{children:[" XIV in the ShellXIV",l.jsx("a",{href:sz,children:""}),""]}),l.jsxs("p",{children:[""," ",l.jsx("a",{href:QE,children:"The Balance"}),"",l.jsx("a",{href:JE,children:"Icy Veins"})," ","XIV"]}),l.jsxs("p",{children:["",l.jsx("a",{href:ga,children:"GitHub"})," XIV in the ShellQQ",FT,"",l.jsx("a",{href:Xs,children:"The Balance Discord"}),""," ",l.jsx("a",{href:Ws,children:"Bluesky"}),""]}),l.jsxs("p",{children:["",l.jsx("a",{href:"/manual",children:"xivintheshell.com/manual"}),"",l.jsx("a",{href:"/manual_zh",children:"xivintheshell.com/manual_zh"}),""]}),l.jsx("p",{children:"FINAL FANTASY  Square Enix Holdings Co., Ltd.  SQUARE ENIXXIV "})]})}const ve=e=>l.jsx(Fi,{text:e});function mz(){return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{id:"overview",label:l.jsx(l.Fragment,{children:"Overview"})}),l.jsx(Ge,{id:"what-is-xivintheshell",label:l.jsxs(l.Fragment,{children:["What is ",l.jsx("i",{children:"XIV in the Shell"}),"?"]})}),l.jsxs("p",{children:["I answered this question in more detail in our ",l.jsx("a",{href:iz,children:"first blog post"}),", but Ive copied the important parts here."]}),l.jsx("p",{children:l.jsxs("b",{children:[l.jsx("i",{children:"XIV in the Shell"})," (",l.jsx("a",{href:"/",children:"https://xivintheshell.com"}),") is a web-based FFXIV rotation planner and job simulator."]})}),l.jsx("p",{children:"Thats it! Most high-end raids in FFXIV have very predictable timelines, and the mechanics of each fight force players to react differently to maintain a coherent rotation. Melees may need to disengage, casters may need to save resources for extended movement, and parties may adjust buff window timings in unconventional ways. Our tool lets you compare a DPS timeline against a fight's mechanic timeline and party buff windows, and makes precise planning accessible in a way that traditional spreadsheet-based tools do not."}),l.jsx("p",{children:"Making rotational adaptations on the fly is a valuable skill for raiders to have, but planning while outside instance is useful all the same. Even outside hardcore optimization environments, there are a myriad of reasons to create rotation plans for a fight:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Theorycrafting sequences for your job"}),l.jsx("li",{children:"Getting more comfortable in fights you haven't yet cleared"}),l.jsx("li",{children:"Getting more comfortable in fights you've already cleared"}),l.jsx("li",{children:"Improving your understanding of a job's fundamentals"}),l.jsx("li",{children:"Moving the colored number on your FFLogs profile up"})]}),l.jsx("p",{children:"Rotation planning can also just be plain fun for its own sake. The interaction between fight mechanics and job kits is a challenging puzzle to solve, and discovering creative solutions then executing them well in-game is a uniquely rewarding experience."}),l.jsx(Ge,{id:"features",label:"Features"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," provides the following capabilities:"]}),l.jsxs("ul",{children:[l.jsx("li",{children:"Rotation visualization in both a graphical timeline and spreadsheet-like table"}),l.jsx("li",{children:"Full simulation of cooldowns, buffs, MP, and job gauge resources"}),l.jsx("li",{children:"Customizable starting resources for planning specific phases"}),l.jsxs("li",{children:["Combat stat configuration and import from ",l.jsx("a",{href:bv,children:"etro"}),"/",l.jsx("a",{href:RI,children:"XivGear"})]}),l.jsx("li",{children:"Rotation import from FFLogs"}),l.jsx("li",{children:"Preset fight timelines for most high-end difficulty encounters"}),l.jsx("li",{children:"Rotations and fight markers shareable as text files"}),l.jsx("li",{children:"Customizable buff timings and timeline markers"}),l.jsx("li",{children:"Customizable macros for sequences of multiple skills"}),l.jsx("li",{children:"Potency calculation with party buffs and potion usage"}),l.jsxs("li",{children:["Compatibility with ",l.jsx("a",{href:wc,children:"Amarantine's combat simulator"})," for more advanced DPS simulation"]}),l.jsx("li",{children:"Import/export from plain text, spreadsheets, and Discord emotes"})]}),l.jsx(Ge,{id:"quickstart",label:"Quick Start"}),l.jsx("p",{children:"To get started with making a timeline:"}),l.jsxs("ol",{children:[l.jsx("li",{children:'Choose your job and combat stats from the "config" panel to the right of the skill hotbar, then click "apply and reset."'}),l.jsx("p",{children:'[optional] Load fight markers for a specific encounter from the "Timeline markers" tab at the bottom of the page.'}),l.jsx("li",{children:"Input skills by clicking on their icon in the skill hotbar. The simulation will automatically advance to the end of its animation lock or cast time. Clicking a skill will attempt to use it as soon as its cooldown and the current animation lock/GCD timer allows."}),l.jsxs("li",{children:["Rearrange skills by clicking/dragging in the graphical timeline, and hit"," ",ve("Delete")," to remove selected skills."]}),l.jsx("p",{children:"For more details on how to use or configure specific features, please refer to the corresponding section in the navigation bar on the right."})]}),l.jsx(Ge,{id:"shortcuts",label:"Keyboard Shortcuts"}),l.jsxs("p",{children:["The following keyboard shortcuts are available anywhere on the site, except when editing a text/number input field (replace ",ve("ctrl")," with ",ve("cmd")," for Mac users):"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[ve("u")," Delete the last action in the active timeline."]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("z")," Undo last action."]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("y")," OR ",ve("ctrl"),"+",ve("shift"),"+",ve("z")," Redo last action."]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("c")," Copy selected skills to clipboard. The format can be changed in the Settings tab at the bottom of the page."]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("x")," Cut selected skills to clipboard."]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("v")," Paste skills from the clipboard."]})]}),l.jsxs("ul",{children:[l.jsx("p",{children:'The following shortcuts are available when interacting with the graphical timeline and the "Timeline editor" table:'}),l.jsxs("li",{children:[ve("Backspace")," OR ",ve("Delete")," Delete the selected skills from the timeline. Subsequent actions are rearranged to be used as soon as possible."]}),l.jsxs("li",{children:[ve("")," Select the previous action in the timeline. If no actions are currently selected, select the last action in the timeline."]}),l.jsxs("li",{children:[ve("")," Select the next action in the timeline. If no actions are currently selected, select the first action in the timeline."]}),l.jsxs("li",{children:[ve("Home")," Select the first action in the timeline."]}),l.jsxs("li",{children:[ve("End")," Select the last action in the timeline."]}),l.jsxs("li",{children:[ve("Shift"),"+",ve("")," / ",ve("Shift"),"+",ve("")," / ",ve("Shift"),"+",ve("Home")," /"," ",ve("Shift"),"+",ve("End")," Extend the selection window to the previous/next/first/last action."]}),l.jsxs("li",{children:[ve("Escape")," Deselect all actions."]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("a")," Select all actions."]})]}),l.jsx(Ge,{id:"update-policy",label:"Update Policy"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," frequently receives updates to improve user experience and accuracy of its simulations. We make our best effort to ensure our updates do not break saved timelines whenever possible, but cannot always guarantee this, whether due to developer error or in-game changes. Please export your timelines often to reduce the risk of losing work."]}),l.jsxs("p",{children:["Potencies and job mechanics in ",l.jsx("i",{children:"XIV in the Shell"})," reflect those in the latest global server version of FFXIV. We try to make updates available within a few days of each patch release, but may be slower depending on the developers' availability."]}),l.jsx(Ge,{id:"technical-details",label:"Quick Technical Details"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," is a client-only single page application. All data is stored within your web browser's localStorage module, so clearing your browsing data for"," ",l.jsx("a",{href:"/",children:"xivintheshell.com"})," will permanently delete all of your saved rotations and markers. This also means that if you lose any data, we (the developers) are unable to recover it for you, because it never leaves the confines of your browser unless you explicitly send us your exported files through some other platform. It is highly unlikely that we will ever maintain a server of any kind, so as to keep development/maintenance costs minimal and reduce the likelihood of site downtime."]}),l.jsxs("p",{children:["This site is made in Typescript with Vite + React, and hosted with GitHub Pages. You can find our source code on GitHub at ",l.jsx("a",{href:ga,children:ga}),". Contributions, bug reports, and feature requests are welcome!"]}),l.jsx(Ge,{id:"troubleshooting",label:"Troubleshooting"}),l.jsx("p",{children:"In very rare cases, you may encounter a bug that completely breaks the website, causing it to render nothing but a white screen. If this happens, please raise a bug report with us on GitHub or Discord, and describe the most recent actions you took before the site crashed."}),l.jsx("p",{children:"If you're unable to communicate with us, you may attempt to fix the issue yourself by visiting one of the following links:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetResourceOverrides"})," Deletes all resource overrides and clears all actions in your saved timelines."]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetAll"})," Deletes all your saved data in"," ",l.jsx("i",{children:"XIV in the Shell"}),"."]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetFFLogsAuth"})," Resets data related to FFLogs authorization."]})]}),l.jsx("p",{children:"If all these steps fail, please clear your browsing data for xivintheshell.com through your web browser's settings. Once again: remember to frequently download and save your timelines, should the worst come to pass!"})]})}function Az(){return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{id:"overview",label:l.jsx(l.Fragment,{children:""})}),l.jsx(Ge,{id:"what-is-xivintheshell",label:l.jsx(l.Fragment,{children:"XIV in the Shell "})}),l.jsxs("p",{children:["XIV in the Shell",l.jsx("a",{href:"/",children:"https://xivintheshell.com"}),"XIV"]}),l.jsx("p",{children:"XIV"}),l.jsx("p",{children:""}),l.jsxs("ul",{children:[l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:" FFLogs "})]}),l.jsx("p",{children:""}),l.jsx(Ge,{id:"features",label:""}),l.jsx("p",{children:"XIV in the Shell "}),l.jsxs("ul",{children:[l.jsx("li",{children:""}),l.jsx("li",{children:"CDBuff"}),l.jsx("li",{children:""}),l.jsxs("li",{children:[" ",l.jsx("a",{href:bv,children:"etro"}),"/",l.jsx("a",{href:RI,children:"XivGear"})," ",""]}),l.jsx("li",{children:" FFLogs "}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsxs("li",{children:["",l.jsx("a",{href:wc,children:"Amarantine"})," DPS "]}),l.jsx("li",{children:"Discord /"})]}),l.jsx(Ge,{id:"quickstart",label:""}),l.jsx("p",{children:""}),l.jsxs("ol",{children:[l.jsx("li",{children:""}),l.jsx("p",{children:""}),l.jsx("li",{children:""}),l.jsxs("li",{children:[" ",ve("Delete")," "]}),l.jsx("p",{children:""})]}),l.jsx(Ge,{id:"shortcuts",label:""}),l.jsxs("p",{children:["T/Mac  ",ve("ctrl")," "," ",ve("cmd"),""]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[ve("u")," "]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("z")," "]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("y"),"  ",ve("ctrl"),"+",ve("shift"),"+",ve("z")," "]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("c")," "]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("x")," "]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("v")," "]})]}),l.jsxs("ul",{children:[l.jsx("p",{children:""}),l.jsxs("li",{children:[ve("Backspace"),"  ",ve("Delete")," "]}),l.jsxs("li",{children:[ve("")," "]}),l.jsxs("li",{children:[ve("")," "]}),l.jsxs("li",{children:[ve("Home")," "]}),l.jsxs("li",{children:[ve("End")," "]}),l.jsxs("li",{children:[ve("Shift"),"+",ve("")," / ",ve("Shift"),"+",ve("")," / ",ve("Shift"),"+",ve("Home")," /"," ",ve("Shift"),"+",ve("End")," ///"]}),l.jsxs("li",{children:[ve("Escape")," "]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("a")," "]})]}),l.jsx(Ge,{id:"update-policy",label:""}),l.jsx("p",{children:"XIV in the Shell "}),l.jsx(Ge,{id:"technical-details",label:""}),l.jsx("p",{children:"XIV in the Shell  xivintheshell.com /"}),l.jsxs("p",{children:[" TypeScript + Vite + React  GitHub Pages"," ",l.jsx("a",{href:ga,children:ga})," Bug "]}),l.jsx(Ge,{id:"troubleshooting",label:""}),l.jsx("p",{children:" Bug GitHubQQ Discord "}),l.jsx("p",{children:""}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetResourceOverrides"})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetAll"}),"  XIV in the Shell "]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetFFLogsAuth"}),"  FFLogs "]})]}),l.jsx("p",{children:" xivintheshell.com"})]})}const ti=e=>l.jsx(Fi,{text:e});function Rz(){return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{id:"timeline-creation",label:"Timeline Creation and Editing"}),l.jsx(Ge,{id:"setup-config",label:"Setup and Configuration"}),l.jsx("p",{children:'The "Config" panel to the right of the skill input area lets you adjust combat statistics and other simulation settings.'}),l.jsx(lt,{id:1,name:"config"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Etro/XivGear import"})," Import a gearset from an etro or XivGear link."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Job selector"})," Set the job of the active timeline slot. Combat stats will use a default value for the job, or the most recently-used configuration for that job. Resource overrides are cleared when the job changes."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Information area"})," Summarizes the randomly generated offset of Lucid Dreaming ticks (healers/casters only), DoT ticks, initial resource overrides, and random procs."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Level selector and combat stats"})," Adjust the job level and combat stats. Critical hit, direct hit, and determination are used to estimate the effects of critical hit buffs like SCH's Chain Stratagem and DNC's Devilment, and potency for abilities that always crit or crit-direct hit."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Animation lock"})," Adjust the amount of time an ability's animation takes, preventing you from using other abilities. This should very roughly be 0.6 + 2  (your ping). Certain abilities, such as movement skills and DRG's jumps, have separate animation locks that cannot be configured."]}),l.jsxs("li",{children:[l.jsx("b",{children:"FPS"})," Adjust the estimated FPS of your game client. FFXIV only accepts ability inputs when a new frame is rendered, which can accumulate over time to create delays on GCD actions over the course of a fight. To ignore the effects of FPS, set this value to 9999."]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD correction"})," Adjust the duration of GCDs and cast times. This should generally be left at 0, but you can use this to shorten or lengthen these durations if you believe the FPS correction formula is inaccurate."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Time till first MP tick"}),' Adjust the amount of time until the first MP tick (also known as the "actor tick") occurs, relative to the start of the simulation. Mostly relevant only for BLM.']}),l.jsxs("li",{children:[l.jsx("b",{children:"Countdown"})," Adjust the amount of time available pre-pull. Setting this to a negative value begins the simulation after the fight has begun."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Random seed and proc mode"})," A ",l.jsx("a",{href:lz,children:"random seed"})," ",`used to determine the occurrence of random events, such as RDM's Verstone Ready and DNC's Feather gauge. The proc mode setting can be set to "RNG" to use this seed, "Never" to prevent all random events from occurring, or "Always" to make random events occur whenever possible.`]})]}),l.jsx(lt,{id:2,name:"resource_overrides"}),l.jsxs("ol",{start:11,children:[l.jsxs("li",{children:[l.jsx("b",{children:"Override initial resources"})," Specify the initial values of job gauges, status effects, and cooldowns. This is useful for planning specific phases of long fights in isolation, or for encounters that allow you to prepare resources in advance."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Apply/apply and reset"}),' Pressing "apply" confirms any configuration changes, applying them to the current timeline. "Apply and reset" applies the configuration changes to the current timeline, and clears its previously-saved actions.']})]}),l.jsx(lt,{id:3,name:"control"}),l.jsx("p",{children:'The "Control" panel contains simulation settings.'}),l.jsx("p",{children:'When "real-time auto pause" mode is enabled, using an action will simulate its animation lock and cast time in real time, pausing when the next action can be performed. Adjusting the "time scale" field advances through time more quickly.'}),l.jsx("p",{children:'When "manual" mode is enabled, animation locks and cast times are immediately skipped after using an action.'}),l.jsx(Ge,{id:"adding-skills",label:"Adding Skills, Time Delays, and Waits"}),l.jsx(lt,{id:4,name:"hotbar"}),l.jsxs("p",{children:["Click on a skill's icon in the hotbar ",l.jsx("b",{children:"(1)"})," to add it. It will be inserted at the location of the cursor in the timeline. If action(s) are currently selected, attempting to add a new skill will place it before the selection. Attempting to use a skill will automatically wait for the duration of the skill's cooldown, as well as the current animation lock and/or GCD before activating it."]}),l.jsxs("p",{children:['To configure the number of targets hit by an AoE ability, adjust the "# of targets hit" field ',l.jsx("b",{children:"(2)"}),". This will affect all subsequent AoE ability inputs, and is ignored for abilities that can only hit a single target."]}),l.jsxs("p",{children:['To wait a specified duration after the end of the current animation lock, use the "wait until _ second(s) since" input ',l.jsx("b",{children:"(3)"}),'. This is useful for simulating deliberate "late weaves" with a duration of 0.6s-1.0s, depending on your needs.']}),l.jsxs("p",{children:['To jump to a specific timestamp in a fight (such as the beginning of a mechanic or the end of a downtime phase), use the "Wait until _" input ',l.jsx("b",{children:"(4)"}),". This input will always end at the specified timestamp, even if surrounding skills are rearranged."]}),l.jsxs("p",{children:['To wait until the next MP tick or Lucid Dreaming tick, press the "Wait until MP tick / lucid tick" button ',l.jsx("b",{children:"(5)"}),". This will always wait until the next tick occurs, even if surrounding skills are rearranged."]}),l.jsxs("p",{children:['To delete all wait events at the end of the timeline, use the "Remove trailing idle time" button ',l.jsx("b",{children:"(6)"}),"."]}),l.jsxs("p",{children:["To remove a buff or debuff before its natural expiration time, click its icon in the status section ",l.jsx("b",{children:"(7)"}),". Ground-based abilities such as BLM's Ley Lines, SCH's Sacred Soil, and DRK's Salted Earth, can be temporarily disabled, then later re-enabled, by clicking on them here."]}),l.jsx(Ge,{id:"positionals",label:"Positionals and Auto-Attacks"}),l.jsx(lt,{id:5,name:"positional"}),l.jsxs("p",{children:['Melee jobs have a pair of "Rear Positional" ',l.jsx("b",{children:"(1)"}),' and "Flank Positional" ',l.jsx("b",{children:"(2)"})," ",'buffs. Abilities with bonuses for landing positional hits will receive bonuses when the appropriate buff is active. Click the appropriate buff icon to toggle it. The "True North" buff will grant all positional bonuses, overriding the effect of these buffs.']}),l.jsxs("p",{children:['Melee and tank jobs have an additional "auto-attacks engaged" buff ',l.jsx("b",{children:"(3)"}),". This is currently only used on PLD to compute Oath Gauge generation, and can be temporarily disabled to simulate disengagements. Using a melee-range weaponskill or ability will automatically re-enable auto-attacks."]}),l.jsx("p",{children:"Potency computation for auto-attacks is not currently supported, and will be added at a later date."}),l.jsx(Ge,{id:"skill-sequence-presets",label:"Skill Sequence Presets"}),l.jsx(lt,{id:"6",name:"presets"}),l.jsx("p",{children:'Below the skill input window is the "skill sequence presets" menu. Here, you can add sequences of multiple skills that can later be added in bulk to the timeline by clicking on the preset entry.'}),l.jsx("p",{children:"Skills that replace other buttons, such as GNB's Gnashing Fang combo + Continuation and PCT's Red/Green/Blue combo, will automatically transform into the appropriate action when loaded from a preset."}),l.jsx(Ge,{id:"timeline-visualization",label:"Timeline Visualization"}),l.jsx("p",{children:"The graphical timeline displays visual information about skill usages and animation locks."}),l.jsx(lt,{id:"7",name:"timelines"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Time ruler"})," Displays timestamp information."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Skill icons"})," A skill icon image represents the usage of a skill (image width not to scale with animation lock time). Mousing over an icon will display a tooltip with its snapshot time, potency, animation lock/cast time, and active damage/haste effects.",l.jsxs("ol",{type:"a",children:[l.jsxs("li",{children:[l.jsx("b",{children:"Cast bars"})," A purple bar represents a cast time, during which other abilities cannot be used. The vertical line in the middle of the bar represents the cast's snapshot time (also known as the slidecast window)."]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD bars"})," A green bar represents a GCD recast lock."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Animation lock bars"})," (not visible in screenshot) A grey bar represents an animation lock. These are only visible at higher horizontal scale levels, or for abilities with exceptionally long animation locks."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Buff underlines"})," The colored bars beneath a skill icon summarize the haste and amplification buffs that the ability snapshots."]})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Damage ticks"})," A red triangle represents the application timing of a damage event. Mousing over a damage tick shows its exact timestamp, potency, and snapshotted buffs."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Heal ticks"})," A green triangle represents the application timing of a heal event. Similar to damage events, mousing over a heal tick will show its timestamp and potency."]}),l.jsxs("li",{children:[l.jsx("b",{children:"MP ticks"}),' A vertical blue line in the background of the timeline represents the timing of a natural MP tick, also known as the "actor tick." These ticks occur every three seconds, and timing of the first tick can be adjusted in the configuration panel.',l.jsx("ol",{type:"a",children:l.jsxs("li",{children:[l.jsx("b",{children:"Lucid Dreaming ticks"})," A light blue triangle represents the timing of a Lucid Dreaming MP tick. These ticks occur every three seconds (independent of the standard actor tick), and the timing of the first tick is randomly generated for each timeline."]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Auto-attacks"})," A vertical orange line represents the occurrence of an auto-attack. This is currently only used for PLD to determine Oath Gauge generation."]})]}),l.jsx("p",{children:'If you wish to hide some of these elements, you may do so by unchecking the relevant options in the "Settings" tab at the bottom of the page.'}),l.jsx(Ge,{id:"editing-timelines",label:"Editing Timelines"}),l.jsx(lt,{id:"8a",name:"editor"}),l.jsxs("p",{children:["Click on a skill icon in the graphical timeline ",l.jsx("b",{children:"(1)"}),' or a row in the "Timeline editor" tab ',l.jsx("b",{children:"(2)"})," to select it. Use ",ti("Shift")," + click, or click and drag on the background of the graphical timeline to select a sequence of skills. While skill(s) are selected, use ",ti("Backspace")," or ",ti("Delete")," to delete them."]}),l.jsxs("p",{children:["When the timeline extends beyond the bounds of the screen, use ",ti("Shift"),' + scroll wheel while your cursor is within the timeline area to scroll through it. You can also adjust the "horizontal scale" slider ',l.jsx("b",{children:"(3)"})," to increase or decrease the number of visible skills."]}),l.jsxs("p",{children:['While skill(s) in the timeline are selected, click and drag their icons in the graphical timeline to rearrange them. While dragging, a blue line will appear indicating the time at which the simulator will try to use the skill. Click the "drag lock" setting'," ",l.jsx("b",{children:"(4)"})," to toggle this behavior to prevent accidental edits. All editing actions can also be undone and redone with ",ti("ctrl"),"+",ti("z")," and ",ti("ctrl"),"+",ti("y"),", respectively. See ",l.jsx("a",{href:"#shortcuts",children:"keyboard shortcuts"})," for additional navigation shortcuts."]}),l.jsxs("p",{children:['Use the "Add timeline slot" button ',l.jsx("b",{children:"(5)"}),' to, you guessed it, add an additional timeline. Use the "Clone timeline slot" button ',l.jsx("b",{children:"(6)"})," to replicate the currently-selected timeline. Up to four timelines can be stored at once."]}),l.jsxs("p",{children:[`Click on the handle next to a timeline to set it as active. Clicking the small "x" at the bottom of the active timeline's handle `,l.jsx("b",{children:"(7)"})," will delete it."]}),l.jsx(Ge,{id:"timeline-editor-table",label:"The Timeline Editor Table"}),l.jsx(lt,{id:"8b",name:"editor"}),l.jsxs("p",{children:['The "Timeline editor" tab at the bottom of the page provides a compact view of the skills used in the active timeline. Any edits made in this table must be confirmed or discarded with the "apply changes to timeline and save" / "discard changes" buttons on the right ',l.jsx("b",{children:"(1)"}),". If edits would cause a timeline to be invalid (that is, its activation conditions are no longer met), then the offending skill will be highlighted in red, and the first invalid skill will be described in the box to the right of the table."]}),l.jsxs("p",{children:["Clicking a row in the editor table ",l.jsx("b",{children:"(2)"})," selects it. Shift + click allows selecting a range of rows. Dragging and dropping the selected actions will reorder them."]}),l.jsxs("p",{children:['The "move up" and "move down" buttons ',l.jsx("b",{children:"(3)"}),' move the selected actions up or down in the timeline. The "delete selected" button ',l.jsx("b",{children:"(4)"}),' deletes selected actions. The "move end of selection to start of selection" button ',l.jsx("b",{children:"(5)"})," moves the last selected skill ahead of the first selected skill."]}),l.jsxs("p",{children:['"Copy" and "paste" ',l.jsx("b",{children:"(6)"})," copy or paste selected actions to/from the clipboard."]}),l.jsxs("p",{children:['The "undo" and "redo" buttons ',l.jsx("b",{children:"(7)"})," undo or redo the last timeline manipulation action, including those done outside the timeline editor. Undo history is lost upon reloading the page."]})]})}function Tz(){return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{id:"timeline-creation",label:""}),l.jsx(Ge,{id:"setup-config",label:""}),l.jsx("p",{children:""}),l.jsx(lt,{id:1,name:"config"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Etro / XivGear "}),"  etro  XivGear "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","/DoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","/"]}),l.jsxs("li",{children:[l.jsx("b",{children:""}),"   0.6 s + 2  "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","FFXIVGCD 9999"]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD"}),"  GCD/0"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"BUFF"})," ","BUFFRNGNeverAlways"]})]}),l.jsx(lt,{id:2,name:"resource_overrides"}),l.jsxs("ol",{start:11,children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ","BUFFCD"]}),l.jsxs("li",{children:[l.jsx("b",{children:"/"})," ",""]})]}),l.jsx(lt,{id:3,name:"control"}),l.jsx("p",{children:""}),l.jsx("p",{children:"/"}),l.jsx("p",{children:""}),l.jsx(Ge,{id:"adding-skills",label:""}),l.jsx(lt,{id:"4",name:"hotbar"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("p",{children:["AoE ",l.jsx("b",{children:"(2)"}),"  AoE "]}),l.jsxs("p",{children:["____ ",l.jsx("b",{children:"(3)"})," ","GCD0.6s~1.0s"]}),l.jsxs("p",{children:[":"," ",l.jsx("b",{children:"(4)"}),""]}),l.jsxs("p",{children:["/ ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(6)"})," "]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(7)"}),"  Buff/Debuff Buff/Debuff"]}),l.jsx(Ge,{id:"positionals",label:"A"}),l.jsx(lt,{id:"5",name:"positional"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"}),"  ",l.jsx("b",{children:"(2)"})," ",""]}),l.jsxs("p",{children:["A ",l.jsx("b",{children:"(3)"})," ","AAA"]}),l.jsx(Ge,{id:"skill-sequence-presets",label:""}),l.jsx(lt,{id:"6",name:"presets"}),l.jsx("p",{children:""}),l.jsx("p",{children:"//"}),l.jsx(Ge,{id:"timeline-visualization",label:""}),l.jsx("p",{children:"/"}),l.jsx(lt,{id:"7",name:"timelines"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","//Buff",l.jsxs("ol",{type:"a",children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD "})," GCD"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"Buff "})," / Buff"]})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","Buff"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","Buff"]}),l.jsxs("li",{children:[l.jsx("b",{children:""}),"  3 ",l.jsx("ol",{type:"a",children:l.jsxs("li",{children:[l.jsx("b",{children:""})," ","3"]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"A"})," "]})]}),l.jsx("p",{children:"A"}),l.jsx(Ge,{id:"editing-timelines",label:""}),l.jsx(lt,{id:"8a",name:"editor"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"}),"  ",l.jsx("b",{children:"(2)"})," ","",ti("Shift"),"+"," ",ti("Backspace"),"  ",ti("Delete")," "]}),l.jsxs("p",{children:[" ",ti("Shift"),"+ ",l.jsx("b",{children:"(3)"})," "]}),l.jsxs("p",{children:[""," ",l.jsx("b",{children:"(4)"})," "]}),l.jsxs("p",{children:[" ",ti("ctrl"),"+",ti("z")," / ",ti("ctrl"),"+",ti("y")," ","",l.jsx("a",{href:"#shortcuts",children:""}),""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(5)"}),"  ",l.jsx("b",{children:"(6)"})," "," 4 "]}),l.jsxs("p",{children:['"" ',l.jsx("b",{children:"(7)"})," ",""]}),l.jsx(Ge,{id:"timeline-editor-table",label:""}),l.jsx(lt,{id:"8b",name:"editor"}),l.jsxs("p",{children:[""," ",l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," ",ti("Shift"),"+"]}),l.jsxs("p",{children:['"/" ',l.jsx("b",{children:"(3)"}),"  ",l.jsx("b",{children:"(4)"})," "," ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsxs("p",{children:['"/" ',l.jsx("b",{children:"(6)"})," "]}),l.jsxs("p",{children:['"/" ',l.jsx("b",{children:"(7)"})," ",""]})]})}function Sz(){const e=N.useRef(null);return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{id:"timeline-analysis",label:"Timeline Analysis"}),l.jsx(Ge,{id:"damage-table",label:"Potency, PPS, and the Damage Table"}),l.jsx(lt,{id:"9",name:"potency"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Summary statistics"})," The top section summarizes the total potency, potency per second (PPS), number of GCD skills applied, and damage over time (DoT) coverage for the current timeline. When a skill or sequence of skills is selected, these values are updated to reflect the selected range.",l.jsxs("ul",{children:[l.jsx("li",{children:'If an ability has been used but its damage application delay has not yet passed in the simulation, its potency will be described as "pending." To include it in the total potency and PPS calculations, add a "wait" event at the end of your timeline, or use an additional skill.'}),l.jsx("li",{children:"PPS is calculated as damage applied starting from time 0 until the end of the final recorded damage application event. This differs from convention for many jobs, which may calculate time from the start of the first GCD until the end of the cast/recast time of the final GCD."}),l.jsx("li",{children:"Potencies are calculated from the values given in ability tooltips, accounting for bonuses from active status buffs (such as DNC's Technical Step and DRG's Lance Charge + Battle Litany) and job gauge buffs (such as BLM's Enochian and DRG's Life of the Dragon). Because of differences in damage calculation multipliers and other combat stats, potencies in timelines of different jobs (or the same job with different GCD speeds) generally cannot be meaningfully compared with each other without the aid of external potency-to-damage conversion tools."})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Tincture potency configuration"})," Potions/tinctures/gemdraughts increase the strength of damaging actions by temporarily boosting the character's main combat stat (STR/DEX/MND/INT). Because ",l.jsx("i",{children:"XIV in the Shell"})," simulates only potencies rather than calculating the full damage formula, we approximate tinctures as an 8% buff to skill potencies. If you need a different approximation value, you may configure it here."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Exclude damage when untargetable"}),' When checked, damage application events and DoT ticks that occur during an "Untargetable" marker are automatically excluded from calculations.']}),l.jsxs("li",{ref:e,children:[l.jsx("b",{children:"Potency table"})," Displays the number of times each ability was cast under different sets of self-applied buffs. Hovering the"," ",l.jsx(Xe,{topic:"manual-sample-help",content:"potency explanation",container:e})," ","tooltip next to a potency value displays the effect of each buff on a skill's potency. When a skill or sequence of skills is selected, these values are updated to reflect the selected range.",l.jsx("ul",{children:l.jsx("li",{children:'The effect of party buffs added through markers, as well as estimated potency boosts from tinctures, are not visible in this breakdown, and only appear in the purple value in the "total" column.'})})]})]}),l.jsx(Ge,{id:"dot-breakdown",label:"DoT Breakdown"}),l.jsx(lt,{id:"10",name:"thunder"}),l.jsx("p",{children:"Every used DoT ability has a separate table detailing the timing of its usage. The offset at which DoT effects tick is randomly generated for each timeline."}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Cast time and application time"})," The snapshot of the ability, and the time at which the DoT effect was applied."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Gap and override"})," The gap (duration where the DoT debuff was not applied) and override (duration remaining on the previous DoT debuff) for this application of the DoT. The total gap and override are displayed at the bottom of this column."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Initial and DoT"})," The on-hit and per-tick potencies of the DoT, including the effect of self-applied buffs."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Ticks"})," The number of ticks triggered from this DoT application. The total number of hit ticks and the total possible number of ticks, are displayed at the bottom of this column."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Total"})," The total potency from this DoT application, including both the initial hit and subsequent ticks. Similar to the general potency table, the effects of party buff markers and tinctures are displayed here."]})]}),l.jsx("p",{children:`Jobs that attack with summoned pets (DRK's Living Shadow, MCH's Automaton Queen, and SMN's Demi-summons) also have potencies displayed in a DoT table. The per-tick "DoT" column for pets is unreliable, but the total potency column and buff snapshots are correct. This will be updated to be clearer some time in the future.`})]})}function Iz(){const e=N.useRef(null);return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{id:"timeline-analysis",label:""}),l.jsx(Ge,{id:"damage-table",label:"PPS"}),l.jsx(lt,{id:"9",name:"potency"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," PPSGCD DoT ",l.jsxs("ul",{children:[l.jsx("li",{children:""}),l.jsx("li",{children:"PPS  0 GCD GCD"}),l.jsx("li",{children:'/""'})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," /// XIV in the Shell  8% "]}),l.jsxs("li",{children:[l.jsx("b",{children:"Boss0"})," ","DoT"]}),l.jsxs("li",{ref:e,children:[l.jsx("b",{children:""})," Buff"," ",l.jsx(Xe,{topic:"manual-sample-help",content:"",container:e})," ","Buff",l.jsx("ul",{children:l.jsx("li",{children:""})})]})]}),l.jsx(Ge,{id:"dot-breakdown",label:"DoT "}),l.jsx(lt,{id:"10",name:"thunder"}),l.jsx("p",{children:"DoTDoT "}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," DoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:"DoTDoT"})," ","DoTDoTDoTDoTDoTDoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:"DoT"})," ","DoTBuff"]}),l.jsxs("li",{children:[l.jsx("b",{children:"DoT"})," ","DoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","DoT"]})]}),l.jsx("p",{children:"DoTBuff"})]})}function _z(){return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{id:"fight-markers",label:"Fight and Buff Markers"}),l.jsx(Ge,{id:"loading-presets",label:"Loading Preset Fight Markers"}),l.jsx(lt,{id:"11",name:"markers"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," provides preset timeline markers for on-content savage and ultimate fights, as well as a variety of other high-end content. These tracks are created by developers and community members, and illustrate precise timings for mechanics, downtimes, and incoming damage."]}),l.jsxs("p",{children:["Clicking the button with the name of a fight ",l.jsx("b",{children:"(1)"})," adds its markers to the graphical timeline. Clicking the name of tracks for certain fights with phases"," ",l.jsx("b",{children:"(2)"})," may also have separate tracks for each phase, explained in more detail in the next section."]}),l.jsx("p",{children:"Presets are split into three categories:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Current content"})," The most recent tier of Savage-difficulty raid encounters, along with the current expansion's Ultimate encounters. This may also contain tracks for certain other high-end content, including Extreme trials, Criterion dungeons, and Quantum bosses."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Legacy ultimates"})," Full encounters or select phases of Ultimate encounters from previous expansions."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Archive"})," Older Savage tiers and other encounters from previous expansions."]})]}),l.jsxs("p",{children:['To load tracks beginning from a certain timestamp, adjust the value in the "Load tracks with time offset" field ',l.jsx("b",{children:"(3)"}),", which adds the specified difference in seconds to all markers (for example, a value of 4 would delay all markers by 4 seconds, and a value of -4 would move all markers forward by 4 seconds). This offset is applied on top of individual phase offsets."]}),l.jsxs("p",{children:['Use the "clear all markers" button ',l.jsx("b",{children:"(4)"}),' to clear all markers. Use "remove duplicates" ',l.jsx("b",{children:"(5)"})," to remove all extra copies of identical markers (same text, timestamp, track number, etc.), which may occur if a fight preset is loaded multiple times by mistake."]}),l.jsx(Ge,{id:"loading-presets-phases",label:"Loading Preset Markers for Fights With Phases"}),l.jsx(lt,{id:"12",name:"phase_load"}),l.jsxs("p",{children:["If a preset track supports separate phases, click its name ",l.jsx("b",{children:"(1)"})," to expand/collapse timing information for its phases."]}),l.jsxs("p",{children:['The "Load all phases" button ',l.jsx("b",{children:"(2)"})," loads markers for all phases. The default timestamp for the start of a phase is shown next to each field ",l.jsx("b",{children:"(3)"}),". These should be adjusted to account for different kill or push timings. Clicking the name of a particular phase ",l.jsx("b",{children:"(4)"})," loads that phase's markers to the timeline; to create a timeline beginning from the start of a particular phase, set its offset to 0 before loading."]}),l.jsx("p",{children:'The default phase transition timings in presets usually assume the previous phase lasted as long as possible. The beginning of a phase follows the definition provided by FFLogs, which is either the end of a "Down for the Count" debuff, or a boss becoming targetable. You can find these timings for a particular FFLogs report with the `type="targetabilityupdate"` filter, as shown below.'}),l.jsx("img",{src:"assets/ManualScreenshots/targetabilityupdate.png"}),l.jsx("p",{children:"Presets take time to create, and the languages in which they are available depend on the work of the community members that create them. If you're interested in submitting markers for a fight, please reach out to us!"}),l.jsx(Ge,{id:"adding-custom-markers",label:"Adding Party Buffs and Custom Markers"}),l.jsx(lt,{id:"13a",name:"pct_opener"}),l.jsxs("p",{children:[`In addition to the site's built-in presets, you can add your own markers in the "Add buffs/markers" section `,l.jsx("b",{children:"(1)"}),". Markers are split into three distinct categories:"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Info"})," markers represent generic information about a timeline. This includes events like enemy cast bars, boss movements, and mechanic resolution timings."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Buff"})," markers represent raid buffs granted by party members. All buffs will automatically use their default in-game durations (which can be adjusted to account for edge cases like varying propagation timings or Dance Partner swaps), and their potency boosts are automatically applied to the damage table. You can see which abilities snapshot party buffs and self-applied buffs by a colored underline in the graphical timeline, or by hovering the skill image icon."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Untargetable"}),' markers represent periods of time where all enemies are immune to damage, and cannot be targeted. Damage application events that would "ghost" by a boss becoming untargetable and DoT ticks that occur during an untargetable period are not added to potency totals.']})]}),l.jsxs("p",{children:["Each marker has a track number ",l.jsx("b",{children:"(2)"})," that determines where it is visible in the timeline, where 0 is the bottom-most marker line, and increasing numbers stack on the lines above."]}),l.jsxs("p",{children:["Clicking on a marker in the timeline ",l.jsx("b",{children:"(3)"}),' will remove it, and restore its properties to the "Add buffs/markers" menu for further editing.']}),l.jsx(Ge,{id:"exporting-markers",label:"Exporting Markers"}),l.jsx(lt,{id:"13b",name:"pct_opener"}),l.jsxs("p",{children:['Marker tracks can be exported and shared with other users in the "Save marker tracks to file" menu ',l.jsx("b",{children:"(1)"}),'. Click the "all tracks combined" link ',l.jsx("b",{children:"(2)"}),' to download a single file containing all markers, which can then be imported through the "Load multiple tracks combined" option ',l.jsx("b",{children:"(3)"}),". Clicking a link corresponding to a single track ",l.jsx("b",{children:"(4)"}),' will export all markers with that track number, which can then be imported with the "Load into individual track" option ',l.jsx("b",{children:"(5)"}),"."]}),l.jsx(Ge,{id:"creating-markers-from-logs",label:"Creating Marker Tracks From Logs"}),l.jsx("p",{children:"A single encounter can have a very large number of events that you may wish to encode within a marker track file. In these cases, you will most likely find it easier to produce markers in bulk from an FFLogs report."}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," developers use a custom"," ",l.jsx("a",{href:Pv,children:"Python script"})," to generate track files from CSV files exported from FFLogs. See ",l.jsx("a",{href:Gv,children:"this page"})," for detailed usage instructions. If you're unwilling or unable to run the Python script on your own computer, you may also run it directly in your web browser through our"," ",l.jsx("a",{href:Bv,children:"Colab notebook"}),"."]}),l.jsxs("p",{children:["To retrieve markers directly from a report using the FFLogs API, you may also use leifengsang's ",l.jsx("a",{href:Fv,children:"XivInTheShellMarkerGen"})," Python script (instructions in Chinese). This script reads a user-provided configuration file with names of enemy cast and damage events, and produces a track file directly from a report ID."]})]})}function gz(){return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{id:"fight-markers",label:""}),l.jsx(Ge,{id:"loading-presets",label:""}),l.jsx(lt,{id:"11",name:"markers"}),l.jsx("p",{children:"XIV in the Shell "}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"})," "," ",l.jsx("b",{children:"(2)"})," /"]}),l.jsx("p",{children:""}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]})]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(3)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(4)"}),"  ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsx(Ge,{id:"loading-presets-phases",label:""}),l.jsx(lt,{id:"12",name:"phase_load"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"})," /"]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," "," ",l.jsx("b",{children:"(3)"})," 0 ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsx("p",{children:' FFLogs BOSSLogs FFLogs  Filter Expression type="targetabilityupdate" '}),l.jsx("img",{src:"assets/ManualScreenshots/targetabilityupdate.png"}),l.jsx("p",{children:""}),l.jsx(Ge,{id:"adding-custom-markers",label:""}),l.jsx(lt,{id:"13a",name:"pct_opener"}),l.jsxs("p",{children:["Buff ",l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," Boss "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:""}),"  Boss  DoT "]})]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," 0 "]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(3)"})," ","Buff"]}),l.jsx(Ge,{id:"exporting-markers",label:""}),l.jsx(lt,{id:"13b",name:"pct_opener"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"}),"  ",l.jsx("b",{children:"(2)"})," "," ",l.jsx("b",{children:"(3)"})," "]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(4)"})," _"," ",l.jsx("b",{children:"(4)"})," "]}),l.jsx(Ge,{id:"creating-markers-from-logs",label:"Logs"}),l.jsx("p",{children:" FFLogs "}),l.jsxs("p",{children:["XIV in the Shell ",l.jsx("a",{href:Pv,children:"Python"})," FFLogs  CSV ",l.jsx("a",{href:Gv,children:""}),""," ",l.jsx("a",{href:Bv,children:"Colab notebook"})," "]}),l.jsxs("p",{children:[" ",l.jsx("a",{href:Fv,children:"XivInTheShellMarkerGen"})," Python  FFLogs API  ID gui"]})]})}const vl=e=>l.jsx(Fi,{text:e});function pz(){return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{id:"import-export",label:"Import and Export"}),l.jsx(Ge,{id:"exporting-text",label:"Exporting to a Text File"}),l.jsx(lt,{id:"14",name:"importexport"}),l.jsxs("p",{children:['You can download the active timeline as a text file from the "Import/Export" menu, by clicking the "txt format" link ',l.jsx("b",{children:"(1)"}),'. This file can then be shared and imported through the "Load from file" menu ',l.jsx("b",{children:"(2)"}),". We recommend you export your plans frequently to avoid accidentally losing progress."]}),l.jsx(Ge,{id:"importing-fflogs",label:"Importing From FFLogs"}),l.jsx("p",{children:'Fight plans can be imported directly from FFLogs reports from the "Import fight from FFLogs" menu. This will open a dialog to begin the first step of the log import process.'}),l.jsxs("ol",{children:[l.jsxs("li",{children:["Click the button to allow ",l.jsx("i",{children:"XIV in the Shell"})," to read FFLogs reports on your behalf."]}),l.jsxs("li",{children:["Paste a log report URL. The link may contain a full report, a specific fight number, and/or a specific player number.",l.jsxs("ol",{type:"a",children:[l.jsx("li",{children:"If the URL did not specify a single fight, click the desired pull from the list of fights."}),l.jsx("li",{children:"After choosing a specific fight and a player was not specified in the URL, click the desired player name from the list of players."})]})]}),l.jsx("li",{children:"Enter the combat stats of the selected player. Due to limitations with FFLogs, all stats for players other than the creator of the log must be entered manually or estimated, and will use the values of the most recently-created timeline for that job by default."}),l.jsxs("li",{children:['After pressing "go," ',l.jsx("i",{children:"XIV in the Shell"}),' will import the list of actions from the log to the active timeline slot, automatically inserting "wait" and "delay" events as appropriate. You will see a table summarizing the differences between simulated timestamps and those recorded in the log, as well as a list of actions that the simulation believes did not meet their activation requirements. After closing the dialog, you may edit the configuration and timeline actions as needed to make the timeline valid.']})]}),l.jsx(Ge,{id:"text-copy-paste",label:"Text Copy/Paste"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," allows copy/pasting sequences of actions with ",vl("ctrl"),"+",vl("c")," and ",vl("ctrl"),"+",vl("v"),". Three different formats are supported:"]}),l.jsx("p",{children:l.jsx("i",{children:"Example sequence: Fire III, Fire IV, Despair"})}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Plain text"})," A comma-separated list of actions names.",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:"Example:"})}),l.jsx("p",{children:"Fire 3, Fire 4, Despair"})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Tab-separated lines"})," A tab-separated list of usage timestamps, target counts, and skill names, compatible with external spreadsheet applications.",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:"Example:"})}),l.jsx("table",{style:{marginLeft:"1.5rem"},children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 3"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 4"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"despair"})]})]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Discord emotes"})," A sequence of Discord emotes (only verified for BLM and PCT).",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:"Example:"})}),l.jsx("p",{children:":F3: :F4: :Despair:"})]})]}),l.jsxs("p",{children:["The format copied to the clipboard from ",l.jsx("i",{children:"XIV in the Shell"}),' is determined by the "Clipboard copy mode" found in the "Settings" tab at the bottom of the page. Pasting from any of these three formats is always valid, regardless of the value of this setting.']}),l.jsx(Ge,{id:"exporting-images",label:"Exporting an Image"}),l.jsx(lt,{id:"18b",name:"importexport"}),l.jsxs("p",{children:["Besides using your computer's built-in screenshot functionality, you may also use"," ",l.jsx("i",{children:"XIV in the Shell"}),`'s "Image Export" feature to download a timeline as a PNG image.`]}),l.jsxs("p",{children:['To export the selected portion of a timeline as an image, press the "export selection as png" link ',l.jsx("b",{children:"(1)"}),". If no actions are selected, the entirety of the active timeline is selected."]}),l.jsxs("p",{children:['To split the exported image across multiple lines, set the "seconds before wrapping" field ',l.jsx("b",{children:"(2)"})," to a non-zero value. Each row in the image will contain at most the specified number of seconds."]}),l.jsx("p",{children:'To omit the time ruler and fight markers from export, uncheck the "include time and markers" setting. Timeline elements in the export are also affected by the display settings configured in the "Settings" tab.'}),l.jsx(Ge,{id:"exporting-damage-logs",label:"Exporting Damage Logs"}),l.jsx(lt,{id:"17",name:"damageexport"}),l.jsxs("p",{children:['You can export a detailed log of all damage events by clicking the "downloaded detailed damage log as CSV file" button ',l.jsx("b",{children:"(1)"})," above the site's potency summary table. The output contains 3 columns:"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," The decimal timestamp, in seconds, at which the damage event occurred."]}),l.jsxs("li",{children:[l.jsx("b",{children:"damageSource"})," The name and usage time of the ability that caused this damage event."]}),l.jsxs("li",{children:[l.jsx("b",{children:"potency"})," The total potency (including buffs and modifiers) of this damage event."]})]}),l.jsx(Ge,{id:"exporting-for-external-tools",label:"Exporting for External Tools"}),l.jsx(lt,{id:"18b",name:"importexport"}),l.jsxs("p",{children:[`Use the "excel / Tischel's plugin csv format" download link `,l.jsx("b",{children:"(1)"})," to generate a file compatible with external tools, like spreadsheet software or Tischel's"," ",l.jsx("a",{href:em,children:"BLM in the Shell Plugin"}),". The exported CSV will contain the following columns:"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," The decimal timestamp, in seconds, at which the action was used."]}),l.jsxs("li",{children:[l.jsx("b",{children:"action"})," The name of the action used."]}),l.jsxs("li",{children:[l.jsx("b",{children:"isGCD"})," 1 if the action is a GCD ability, 0 if not."]}),l.jsxs("li",{children:[l.jsx("b",{children:"castTime"})," The duration, in seconds, of this action's cast time. 0 If the action did not have a cast time."]})]}),l.jsx(Ge,{id:"exporting-for-combat-sim",label:"Exporting to Amarantine's Combat Simulator"}),l.jsxs("p",{children:[l.jsx("a",{href:wc,children:"Amarantine's Combat Simulator"})," provides powerful DPS simulation and kill time estimation capabilities. ",l.jsx("i",{children:"XIV in the Shell"})," can be used to generate and edit timelines that are compatible with this simulator, and both tools are used by many speedkill teams as part of their planning process."]}),l.jsxs("p",{children:[`To download a CSV file compatible with Ama's Combat Sim, use the "Amarantine's combat simulator csv format" download link `,l.jsx("b",{children:"(2)"}),". The generated CSV file will also contain metadata headers describing the configured combat stats, external party buff timeline markers, and untargetable downtime windows."]}),l.jsxs("p",{children:["Note that if the configured combat stats were originally imported from XivGear or etro, stats in the gearset that cannot be directly configured within ",l.jsx("i",{children:"XIV in the Shell"})," ","(WD, STR/DEX/MND/INT, and TEN) will also be included in the export file for simulation purposes."]})]})}function Nz(){return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{id:"import-export",label:""}),l.jsx(Ge,{id:"exporting-text",label:""}),l.jsx(lt,{id:"14",name:"importexport"}),l.jsxs("p",{children:['"/""txt " ',l.jsx("b",{children:"(1)"}),"txt ",l.jsx("b",{children:"(2)"})," ",""]}),l.jsx(Ge,{id:"importing-fflogs",label:" FFLogs "}),l.jsx("p",{children:'" FFLogs "'}),l.jsxs("ol",{children:[l.jsx("li",{children:" XIV in the Shell  FFLogs "}),l.jsxs("li",{children:["FFLogs/",l.jsxs("ol",{type:"a",children:[l.jsx("li",{children:""}),l.jsx("li",{children:""})]})]}),l.jsx("li",{children:" FFLogs "}),l.jsx("li",{children:"XIV in the Shell "})]}),l.jsx(Ge,{id:"text-copy-paste",label:"/"}),l.jsxs("p",{children:["XIV in the Shell  ",vl("ctrl"),"+",vl("c")," / ",vl("ctrl"),"+",vl("v")," ",""]}),l.jsx("p",{children:l.jsx("i",{children:""})}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ","",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:""})}),l.jsx("p",{children:""})]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:""})}),l.jsx("table",{style:{marginLeft:"1.5rem"},children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]})]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Discord "})," Discord / ",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:""})}),l.jsx("p",{children:":F3: :F4: :Despair:"})]})]}),l.jsx("p",{children:""}),l.jsx(Ge,{id:"exporting-images",label:""}),l.jsx(lt,{id:"18b",name:"importexport"}),l.jsx("p",{children:" PNG"}),l.jsxs("p",{children:['" png" ',l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," "]}),l.jsx("p",{children:""}),l.jsx(Ge,{id:"exporting-damage-logs",label:""}),l.jsx(lt,{id:"17",name:"damageexport"}),l.jsxs("p",{children:['"CSV" ',l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"damageSource"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"potency"})," Buff"]})]}),l.jsx(Ge,{id:"exporting-for-external-tools",label:""}),l.jsx(lt,{id:"18a",name:"importexport"}),l.jsxs("p",{children:['"excel / Tischel CSV " ',l.jsx("b",{children:"(1)"}),"  Tischel "," ",l.jsx("a",{href:em,children:"BLM in the Shell Plugin"})," "]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"action"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"isGCD"})," 1GCD 0 "]}),l.jsxs("li",{children:[l.jsx("b",{children:"castTime"})," 0"]})]}),l.jsx(Ge,{id:"exporting-for-combat-sim",label:"Amarantine"}),l.jsxs("p",{children:[l.jsx("a",{href:wc,children:"Amarantine"})," DPS XIV in the Shell "]}),l.jsxs("p",{children:[' Amarantine CSV "Amarantine CSV " ',l.jsx("b",{children:"(2)"}),""]}),l.jsx("p",{children:" CSV "}),l.jsx("p",{children:" XivGear  etro  XIV in the Shell "})]})}function Cz(){return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{id:"additional-resources",label:"Additional Resources"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"}),": ",l.jsx("a",{href:ga,children:"GitHub"})," - ",l.jsx("a",{href:sd,children:"Blog"})," -"," ",l.jsx("a",{href:Ws,children:"Bluesky"})," -"," ",l.jsx("a",{href:Xs,children:"Discord channel in The Balance"})," -"," ",l.jsx("a",{href:em,children:"Tischel's BLM in the Shell Dalamud Plugin"})]}),l.jsxs("p",{children:["Game assets and information:"," ",l.jsx("a",{href:az,children:"Official FFXIV PvE job guide"})," -"," ",l.jsx("a",{href:oz,children:"FFXIV Community Wiki"})," - ",l.jsx("a",{href:yv,children:"XIVAPI"})," -"," ",l.jsx("a",{href:vv,children:"XIV-ID"})]}),l.jsxs("p",{children:["Job gameplay: ",l.jsx("a",{href:QE,children:"The Balance"})," -"," ",l.jsx("a",{href:JE,children:"Icy Veins"})," - ",l.jsx("a",{href:Cv,children:"FFLogs"})]}),l.jsxs("p",{children:["Game formulas, mechanics, and other cursed knowledge:"," ",l.jsx("a",{href:Mv,children:"Allagan Studies"})," -"," ",l.jsx("a",{href:Lv,children:"#battle_system_discussion in The Balance"})," - Savage Speedkill Memorandum [",l.jsx("a",{href:xv,children:"JP"}),"][",l.jsx("a",{href:Hv,children:"EN"}),"] -"," ",l.jsx("a",{href:kv,children:"Game's Haunted"})," - FPS tax research [",l.jsx("a",{href:Uv,children:"CN"}),"][",l.jsx("a",{href:wv,children:"EN"}),"]"]}),l.jsxs("p",{children:["Other FFXIV community tools: ",l.jsx("a",{href:Ov,children:"xivanalysis"})," -"," ",l.jsx("a",{href:RI,children:"XivGear"})," - ",l.jsx("a",{href:Dv,children:"XIV Raider"})," and"," ",l.jsx("a",{href:wc,children:"Ama's Combat Sim"})]})]})}function bz(){return l.jsxs(l.Fragment,{children:[l.jsx(Ma,{id:"additional-resources",label:""}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"}),": ",l.jsx("a",{href:ga,children:"GitHub"})," - ",l.jsx("a",{href:sd,children:"Blog"})," -"," ",l.jsx("a",{href:Ws,children:"Bluesky"})," - ",l.jsx("a",{href:Xs,children:"Discord"})," -"," ",l.jsx("a",{href:em,children:"TischelBLM in the Shell"})]}),l.jsxs("p",{children:[": ",l.jsx("a",{href:rz,children:"XIV"})," -"," ",l.jsx("a",{href:cz,children:"XIVwiki"})," - ",l.jsx("a",{href:yv,children:"XIVAPI"})," -"," ",l.jsx("a",{href:vv,children:"XIV-ID"})]}),l.jsxs("p",{children:[": ",l.jsx("a",{href:QE,children:"The Balance"})," -"," ",l.jsx("a",{href:JE,children:"Icy Veins"})," - ",l.jsx("a",{href:Cv,children:"FFLogs"})]}),l.jsxs("p",{children:[": ",l.jsx("a",{href:Mv,children:"Allagan Studies"})," -"," ",l.jsx("a",{href:uz,children:" "})," -"," ",l.jsx("a",{href:Lv,children:"The Balance"})," -  [",l.jsx("a",{href:xv,children:""}),"][",l.jsx("a",{href:Hv,children:""}),"] -"," ",l.jsx("a",{href:kv,children:"Game's Haunted"})," -  [",l.jsx("a",{href:Uv,children:""}),"][",l.jsx("a",{href:wv,children:""}),"]"]}),l.jsxs("p",{children:[": ",l.jsx("a",{href:Ov,children:"xivanalysis"})," -"," ",l.jsx("a",{href:dz,children:"14"})," - ",l.jsx("a",{href:Dv,children:"XIV Raider"})," "," ",l.jsx("a",{href:wc,children:"Ama"})]})]})}const zT=fE(),tm=N.createContext({items:[],addItem:()=>{}});function Oz(e){const t=N.useContext(tm);return l.jsxs("nav",{style:{float:"right",zIndex:1,maxWidth:"18%"},children:[l.jsx("p",{className:"no-indent",style:{paddingLeft:"0.8rem"},children:e.language==="zh"?"":"Navigation"}),l.jsxs("ul",{style:{listStyleType:"none",paddingLeft:"0.8rem",marginTop:"0.3rem"},children:[l.jsx("li",{style:{paddingBlockEnd:"0.15rem"},children:l.jsx("a",{href:"#top",children:e.language==="zh"?"":"back to top"})}),t.items.map(({id:n,label:a,indentLevel:s})=>l.jsx("li",{style:{paddingLeft:s>0?`${s*1.5}em`:void 0,paddingBlock:"0.15rem"},children:l.jsx("a",{href:"#"+n,children:a})},n))]})]})}function Ma(e){const t=N.useContext(tm);return N.useEffect(()=>t.addItem({id:e.id,label:e.label,indentLevel:0}),[]),l.jsxs(l.Fragment,{children:[l.jsx("h2",{id:e.id,children:e.label}),e.content]})}function Ge(e){const t=N.useContext(tm);return N.useEffect(()=>t.addItem({id:e.id,label:e.label,indentLevel:1}),[]),l.jsxs(l.Fragment,{children:[l.jsx("h3",{id:e.id,children:e.label}),e.content]})}const zv=N.createContext("en");function lt(e){const t=N.useContext(zv),n=`${e.id}_${zT==="Dark"?"D":"L"}_${t==="zh"?"Z":"E"}_${e.name}.jpg`;return l.jsx("img",{src:`assets/ManualScreenshots/${n}`,alt:e.alt})}function aT(e){const t=hi(zT),n=l.jsx("style",{children:`
		@supports selector(::-webkit-scrollbar) {
			.visibleScrollbar::-webkit-scrollbar {
				appearance: none;
				background-color: ${t.bgLowContrast};
				height: 8px;
				width: 10px;
			}
			.visibleScrollbar::-webkit-scrollbar-thumb {
				background-color: ${t.bgHighContrast};
			}
		}
		@supports not selector(::-webkit-scrollbar) {
			.visibleScrollbar {
				scrollbar-color: ${t.bgHighContrast} ${t.bgLowContrast};
			}
		}
		a {
			color: ${t.accent};
		}
		b, h1, h2, h3, h4 {
			color: ${t.emphasis};
			margin-bottom: 0.2em;
		}
		p {
			margin-block-start: 0.2em;
			margin-block-end: 0.2em;
			text-indent: 2em;
		}
		.no-indent {
			text-indent: 0;
		}
		p:first-child {
			margin-block-start: 0px;
		}
		.help-tooltip {
			color: ${t.text};
			background-color: ${t.tipBackground};
			opacity: 0.98;
			max-width: 300px;
			outline: 1px solid ${t.bgHighContrast};
			transition: none;
			font-size: 100%;
			z-index: 10;
		}
		button:disabled {
			background-color: ${t.background};
		}
		img {
			width: 80%;
			max-width: fit-content;
			border: 2px dashed ${hi(zT).bgMediumContrast};
			align-self: center;
			margin: 5px;
		}
		ul {
			margin-block: 0;
		}
		ol {
			margin-block: 0;
		}
	`}),a=N.useRef(null);N.useEffect(()=>{var h;(h=a.current)==null||h.focus();const f=window.location.hash.slice(1);f&&a.current&&setTimeout(()=>{const R=document.getElementById(f);if(R&&a.current){const T=a.current.getBoundingClientRect(),S=R.getBoundingClientRect(),I=a.current.scrollTop,C=S.top-T.top+I;a.current.scrollTo({top:C-20,behavior:"smooth"})}},100)},[]);const[s,c]=N.useState([]),d=N.useCallback(({id:f,label:h,indentLevel:m})=>{c(R=>R.find(T=>T.id===f)?R:[...R,{id:f,label:h,indentLevel:m}])},[]);return l.jsxs("div",{ref:a,className:"visibleScrollbar",style:{position:"fixed",top:0,bottom:0,left:0,right:0,outline:"none",accentColor:t.accent,fontFamily:uo,fontSize:14,color:t.text,backgroundColor:t.background,height:"100%",overflow:"auto"},tabIndex:-1,children:[n,l.jsxs(tm.Provider,{value:{items:s,addItem:d},children:[window.innerWidth>1024&&l.jsx("div",{id:"nav-container",style:{position:"sticky",top:"1rem",marginInline:"1rem"},children:l.jsx(Oz,{language:e.language})}),l.jsx(zv.Provider,{value:e.language??"en",children:l.jsx("div",{style:{marginLeft:"1em",marginRight:"1em",paddingRight:"1em",marginBottom:"1em",display:"flex",flexDirection:"column"},tabIndex:-1,children:e.language==="zh"?yz():Dz()})})]})]})}function Dz(){return l.jsxs(l.Fragment,{children:[l.jsx("h1",{id:"top",children:"XIV in the Shell User Manual"}),l.jsx(fz,{}),l.jsx(mz,{}),l.jsx(Rz,{}),l.jsx(Sz,{}),l.jsx(_z,{}),l.jsx(pz,{}),l.jsx(Cz,{})]})}function yz(){return l.jsxs(l.Fragment,{children:[l.jsx("h1",{id:"top",children:"XIV in the Shell "}),l.jsx(Ez,{}),l.jsx(Az,{}),l.jsx(Tz,{}),l.jsx(Iz,{}),l.jsx(gz,{}),l.jsx(Nz,{}),l.jsx(bz,{})]})}const af=T1.createRoot(document.getElementById("root")),vz=new URLSearchParams(document.location.search),R0=Array.from(vz.keys()),qr=window.location.pathname;qr==="/manual"||qr==="/manual/"?af.render(l.jsx(aT,{language:gt("language")??void 0})):qr==="/manual_en"||qr==="/manual_en/"?af.render(l.jsx(aT,{language:"en"})):qr==="/manual_zh"||qr==="/manual_zh/"?af.render(l.jsx(aT,{language:"zh"})):af.render(l.jsx(ez,{command:R0.length>0?R0[0]:void 0}));
